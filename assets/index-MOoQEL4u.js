import{c as w,ah as C,ai as c,r as o,aj as S,j as s,ak as T,al as g,am as k,ac as A,an as v,ad as I,B as D}from"./vendor-WQejLG7Y.js";import{u as F}from"./fetchList-Dx9pDj27.js";import{p as N}from"./app-q0ws3Yx0.js";import{g as O,N as B,n as m}from"./index-BUY2Cjej.js";import{p as V}from"./pool.service-DXigxJcB.js";import{u as _,C as R}from"./usePoolData-DTvfbm5K.js";import"./index-YDRpzjTi.js";function h({noteType:a}){return s.jsx("div",{className:"bg-[#25272614] inline px-2 rounded-2xl text-gray-900 py-1",children:a})}const L=({pool:a,poolEvent:e})=>{const t=w(),r=O(C(a,"currency.shortCode","")),{targetAmount:i,poolValue:l,remainingAmount:n,projectedAPY:b,loadingPoolData:p}=_({pool:a,event:e});let x=!1;e&&(e.status===N.eventStatuses.FINISHED||c(e.endTime).diff(c(new Date),"minutes")<=0)&&(x=!0);const u=B[a==null?void 0:a.chainId],d=o.useMemo(()=>!!(e!=null&&e.notesTokenAddress),[e]),j=o.useMemo(()=>!!(e!=null&&e.juniorNotesTokenAddress),[e]),y=o.useMemo(()=>S((i-n)/i*100,2),[i,n]);return s.jsx(s.Fragment,{children:s.jsxs(T,{className:"bg-pool-card-bg rounded-3xl w-full cursor-pointer",onClick:()=>{t(`/invest/note/${e.id}?junior=${j}&senior=${d}`)},loading:p,children:[s.jsxs("div",{children:[s.jsxs("div",{className:"min-h-[50px]",children:[s.jsx("span",{className:"text-gray-900 font-semibold mr-2 text-lg ",children:a.name}),j?s.jsx(h,{noteType:"Junior"}):void 0,s.jsx("span",{className:"inline-block w-2"}),d?s.jsx(h,{noteType:"Senior"}):void 0,u&&s.jsx("div",{className:"bg-[#25272614] inline absolute top-7 right-6 rounded-2xl text-gray-900 px-2 ",children:u.name})]}),s.jsxs("div",{className:"min-h-[100px]",children:[s.jsx("div",{className:"overflow-ellipsis text-pool-card-info",children:a.shortDescription}),!!e&&s.jsx(R,{endTime:e.closedAt||e.endTime,isClosed:x,event:e})]})]}),s.jsxs("div",{className:"flex flex-row",children:[s.jsxs("div",{className:"grow-[2]",children:[s.jsx("div",{className:"text-pool-card-info",children:"Projected APY (%)"}),s.jsx("div",{children:d?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"font-bold text-3xl",children:m(b)}),s.jsx("span",{className:"text-2xl text-pool-card-info ml-1",children:"%"})]}):s.jsx("span",{className:"font-bold text-3xl",children:"Variable"})}),s.jsx("div",{className:"w-4/5",children:s.jsx(g,{className:"mt-1 mb-0",orientationMargin:1})}),s.jsxs("div",{children:[s.jsxs("p",{className:"mt-3 mb-0 text-xs text-pool-card-info ",children:["Pool value (",r,")"]}),s.jsx("p",{className:" font-semibold mt-1 mb-0 text-base",children:m(l)})]}),s.jsxs("div",{children:[s.jsxs("p",{className:"mt-3 mb-0 text-xs text-pool-card-info ",children:["Investment capacity (",r,")"]}),s.jsx("p",{className:"mt-1 mb-0  font-semibold text-base",children:m(n)})]})]}),s.jsx("div",{className:"grow-0 flex flex-col justify-end",children:s.jsx(k,{size:100,strokeLinecap:"butt",strokeWidth:"10",strokeColor:"#1AB752",format:P=>`${P}%`,type:"circle",percent:y})})]})]})})},f=6,z=()=>{const[a,e]=o.useState(f),[t,r]=F(V.getEvents);return s.jsxs("div",{className:"xl:mx-10 lg:mt-6 md:mx-3 sm:mx-1",children:[s.jsx("div",{className:"flex justify-between",children:s.jsx("span",{className:"text-4xl font-bold",children:"Open Pools"})}),s.jsx(g,{}),s.jsx(A,{gutter:[20,20],children:r?s.jsx(v,{active:!0}):t.length===0?s.jsx("div",{children:"No Active Pools "}):s.jsxs(s.Fragment,{children:[t.slice(0,a).map(i=>{let l=!1;const n=i.pool;return(c(i.endTime).diff(c(new Date),"minutes")<=0||i.status===N.eventStatuses.FINISHED)&&(l=!0),s.jsx(I,{xl:8,lg:12,md:12,sm:24,className:"flex",children:s.jsx(L,{pool:n,poolEvent:i,isClosed:l,isJunior:!!(i.juniorTargetAmount&&i.juniorRemainingAmount>0),isSenior:i.investmentTerms>0&&i.remainingAmount>0})},i.id)}),a<t.length&&s.jsx("div",{className:"flex w-full justify-center",children:s.jsx(D,{onClick:()=>e(i=>i+f),children:"View more"})})]})})]})};export{z as default};
