import{b9 as g,c as T,ae as f,r as i,ai as h,j as e,ak as y,an as S,ac as n,ad as x,av as c}from"./vendor-WQejLG7Y.js";import{g as k,n as b}from"./index-BUY2Cjej.js";import{p as N}from"./pool.service-DXigxJcB.js";import{u as O}from"./util.service-DGlW4vEA.js";import{n as r}from"./app-q0ws3Yx0.js";import"./index-YDRpzjTi.js";const E={[r.SENIOR]:"Senior Obligation Token (SOT)",[r.JUNIOR]:"Junior Obligation Token (JOT)"};function I(o,t){return o.principal===0?e.jsx(c,{color:"black",children:"Paid"}):t<h()?e.jsx(c,{color:"red",children:"Past Due"}):e.jsx(c,{color:"green",children:"Ongoing"})}const R=function(){const o=T(),t=f(),[s,j]=i.useState(null),[d,u]=i.useState({principal:0,interest:0}),[l,p]=i.useState(!0);return i.useEffect(()=>{t.id&&(!s||t.id!==s.id)&&(p(!0),N.getNoteTokenAssetById(t.id).then(async a=>{const m=h(a.startEarningInterestTime).add(a.investmentTerms,"days");j({...a,dueDate:m});const[v]=await O.getMultiNoteTokenAssetsBalance([a],a.pool);u(v),p(!1)}))},[t]),e.jsxs(y,{className:"mt-5",children:[e.jsx(S,{active:!0,loading:l}),!l&&e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-weight-bold mr-2",children:"STATUS:"}),I(d,s.dueDate)]}),e.jsxs(n,{gutter:64,className:"mt-4",children:[e.jsxs(x,{span:12,children:[e.jsxs(n,{children:[e.jsx("div",{children:"Collateral type"}),e.jsx("div",{children:E[s.type]})]}),e.jsxs(n,{children:[e.jsx("div",{children:"Outstanding"}),e.jsxs("div",{children:[k(s.currency.shortCode),b(d.principal)]})]}),e.jsxs(n,{children:[e.jsx("div",{children:"Due date"}),e.jsx("div",{children:s.dueDate.format("DD/MM/YYYY")})]})]}),e.jsxs(x,{span:12,children:[e.jsxs(n,{children:[e.jsx("div",{children:"Risk group"}),e.jsx("div",{children:"0"})]}),e.jsxs(n,{children:[e.jsx("div",{children:"Coupon interest rate"}),e.jsx("div",{children:s.type===r.SENIOR?`${s.poolEvent.apy} %`:"Variable"})]}),e.jsxs(n,{children:[e.jsx("div",{children:"Issued by"}),e.jsx("div",{children:e.jsx("a",{onClick:()=>o(`/invest/note/${s.poolEventId}?junior=${s.type===r.JUNIOR}`),children:s.poolEvent.pool.name})})]})]})]})]})]})},B=g.memo(R);export{B as default};
