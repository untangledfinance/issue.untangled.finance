import{c7 as S,a6 as I,r as u,j as e,ao as A,a7 as n,a9 as r,aO as L,B as p,an as W,af as E,ag as F}from"./vendor-WQejLG7Y.js";import{b as w}from"./bank.service-B_Z2xVIm.js";import{u as N,D as P,a as M}from"./index-BUY2Cjej.js";import{u as T}from"./useAsyncRetry-CUd0kvgC.js";import{u as z}from"./useCopyToClipboard-ChYDdG2_.js";import{d as q}from"./data.service-BjjAEJBf.js";import{u as H}from"./useAsync-Dl5FScg5.js";import{u as _}from"./useAsyncFn-DMoxp3xu.js";const D=function({visible:l,onClose:a,onSuccess:t}){const{accountType:c,companyId:i,userId:m}=N(),{signMessage:x,isLoading:s}=S(),{message:d}=I.useApp(),[g,b]=u.useState(!1),[h,k]=u.useState(""),v=async()=>{b(!0);try{if(!h)return;await x({account:h,message:`Untangled wallet verification: ${m}-${(c===2?i:null)||0}`},{onSuccess:async o=>{var f,C;b(!0);try{await w.linkWallet(o),t(),a(),d.success("Wallet linked successfully!")}catch(j){d.error(((C=(f=j==null?void 0:j.response)==null?void 0:f.data)==null?void 0:C.message)||"Something went wrong!")}b(!1)},onError:o=>{b(!1),d.error(o==null?void 0:o.details)}})}catch{b(!1)}};return e.jsx(A,{onCancel:a,footer:null,centered:!0,width:"35vw",open:l,title:e.jsx("span",{className:"text-lg bg-tr",children:"Link Wallet"}),style:{minWidth:500},styles:{header:{backgroundColor:"transparent"},content:{borderRadius:24,backgroundColor:"#F0F0F0"}},children:e.jsxs("div",{className:"w-full pt-8",children:[e.jsx("div",{className:"text-xs font-medium mb-2 text-[#393C3A]",children:"Wallet address"}),e.jsx("div",{className:"mb-4",children:e.jsx(n,{children:e.jsx(n.Item,{name:"walletAddress",rules:[()=>({validator(y,o){return!o||L(o)?Promise.resolve():Promise.reject(new Error("Invalid wallet address"))}})],children:e.jsx(r,{value:h,placeholder:"Enter wallet address",onChange:y=>k(y.target.value),"data-testid":"link-wallet-input"})})})}),e.jsx("div",{children:e.jsx(p,{className:"shadow-none h-10 mt-2",type:"primary",block:!0,disabled:!h,onClick:v,loading:g||s,"data-testid":"link-wallet-button",children:"Link wallet"})})]})})},R=function(){const{loading:l,value:a,retry:t}=T(async()=>{const{walletAddress:g}=await w.getLinkedWallet();return g},[]),[,c]=z(),[i,m]=u.useState(!1),[x,s]=u.useState(!1),d=u.useRef();return l?e.jsx(W,{}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"rounded-3xl p-8 bg-pool-card-bg bg-clip-padding",style:{border:"2px solid transparent",background:"linear-gradient(#f6f7f6, #f6f7f6) padding-box, linear-gradient(180deg, #21BFFA 0%, #1ED760 100%) border-box"},children:[e.jsx("h2",{className:"m-0 text-2xl leading-8 font-semibold mb-4",children:"Wallet"}),e.jsx("div",{children:a?e.jsxs(e.Fragment,{children:[e.jsx("label",{className:"mb-1 text-xs leading-4",children:"Wallet Address"}),e.jsx(r,{size:"large",readOnly:!0,value:a,className:"p-3",suffix:e.jsx("div",{className:"space-x-1 flex",children:e.jsx(p,{size:"small",className:"!rounded-full !py-1 !px-3 !leading-4 !text-xs !font-normal",onClick:()=>{c(String(a)),m(!0),d.current&&clearTimeout(d.current),d.current=setTimeout(()=>{m(!1)},2e3)},children:i?"Copied":"Copy"})})})]}):e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("div",{children:"Link your wallet to supply or withdraw"}),e.jsx("div",{children:e.jsx(p,{type:"primary",onClick:()=>s(!0),children:"Link Wallet"})})]})})]}),e.jsx(D,{visible:x,onClose:()=>s(!1),onSuccess:()=>t()})]})},$=()=>{const{businessProfile:l,roleNames:a}=N(i=>i),t=l==null?void 0:l.contactEmail,c=l==null?void 0:l.companyLegalName;return e.jsxs("div",{className:"flex gap-8 items-center mb-6",children:[e.jsx("img",{className:"aspect-square w-[124px] rounded-full",alt:"",src:P}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h2",{className:"m-0 text-4xl leading-[44px]",children:c}),e.jsxs("span",{className:"text-sm leading-4 font-semibold",children:[a&&`${a} - `,e.jsx("a",{href:`mailto:${t}`,target:"_blank",rel:"noreferrer",className:"underline",children:t})]})]})]})},B=()=>{const l=N(s=>s),[a]=n.useForm(),{value:t}=H(q.getCountries),[c,i]=u.useState(!1),[{loading:m},x]=_(async s=>M.setProfile({companyLegalName:s==null?void 0:s.companyLegalName,companyWebsite:s==null?void 0:s.companyWebsite,companyHouseNumber:s==null?void 0:s.companyHouseNumber,companyStreetName:s==null?void 0:s.companyStreetName,companyCity:s==null?void 0:s.companyCity,countryId:s==null?void 0:s.countryId,description:s==null?void 0:s.description,companySize:s==null?void 0:s.companySize,phoneNumber:s==null?void 0:s.phoneNumber,contactEmail:s==null?void 0:s.contactEmail}),[l]);return l!=null&&l.businessProfile?e.jsx("div",{className:"p-8 bg-pool-card-bg [&_label]:!h-4 [&_label]:!leading-0 [&_.ant-form-item]:!leading-4 rounded-3xl",children:e.jsxs(n,{onFinish:x,form:a,initialValues:{...l==null?void 0:l.businessProfile},name:"update-profile",size:"large",layout:"vertical",requiredMark:!1,children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("h2",{className:"text-2xl leading-8 mt-0 mb-4",children:"My Profile"}),c?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"space-x-2",children:[e.jsx(p,{onClick:()=>i(!1),className:"w-24 !rounded-full",children:"Cancel"}),e.jsx(p,{htmlType:"submit",className:"w-24 !rounded-full",type:"primary",loading:m,disabled:m,children:"Save"})]})}):e.jsx(p,{htmlType:"button",disabled:!1,className:"w-24 !rounded-full",onClick:()=>i(!0),children:"Edit"})]}),e.jsx(n.Item,{rootClassName:"mb-4",name:"companyLegalName",label:"Company Name (*)",children:e.jsx(r,{className:"p-3",disabled:!0,readOnly:!0})}),e.jsx(n.Item,{rootClassName:"mb-4",name:"companyWebsite",label:"Website",children:e.jsx(r,{placeholder:"Enter website...",className:"p-3"})}),e.jsxs(n.Item,{rootClassName:"mb-4",children:[e.jsx(n.Item,{rootClassName:"mb-4",name:"companyHouseNumber",label:"House number (*)",rules:[{required:!0,message:"Please input your House Number"}],className:"inline-block w-1/2 pr-4",children:e.jsx(r,{placeholder:"Enter house number",className:"p-3"})}),e.jsx(n.Item,{rootClassName:"mb-4",name:"companyStreetName",label:"Street name (*)",rules:[{required:!0,message:"Please input your Street Name"}],className:"inline-block w-1/2",children:e.jsx(r,{placeholder:"Enter street name",className:"p-3"})})]}),e.jsxs(n.Item,{rootClassName:"mb-4",children:[e.jsx(n.Item,{rootClassName:"mb-4",name:"companyCity",label:"City (*)",rules:[{required:!0,message:"Please input your City"}],className:"inline-block w-1/2 pr-4",children:e.jsx(r,{placeholder:"Enter city",className:"p-3"})}),e.jsx(n.Item,{rootClassName:"mb-4",label:"Country (*)",rules:[{required:!0,message:"Please input your Country"}],name:"countryId",className:"inline-block w-1/2",children:e.jsx(E,{placeholder:"Select country",className:"!h-12",options:F(t,s=>({label:s.name,value:String(s.id)}))})})]}),e.jsx(n.Item,{rootClassName:"mb-4",name:"description",label:"Company Description",children:e.jsx(r.TextArea,{className:"p-3",rows:4})}),e.jsx(n.Item,{rootClassName:"mb-4",name:"companySize",label:"Company Size",children:e.jsx(r,{className:"p-3"})}),e.jsx(n.Item,{rootClassName:"mb-4",name:"phoneNumber",label:"Phone",children:e.jsx(r,{className:"p-3"})}),e.jsx(n.Item,{rootClassName:"mb-4",name:"contactEmail",label:"Company Email Address",children:e.jsx(r,{className:"p-3"})})]})}):e.jsx(e.Fragment,{children:"Loading..."})},Y=()=>e.jsxs(e.Fragment,{children:[e.jsx($,{}),e.jsx(R,{}),e.jsx("div",{className:"my-6 bg-[#252726] h-[1px] opacity-20"}),e.jsx(B,{})]});export{Y as default};
