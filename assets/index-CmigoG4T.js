import{r as h,a7 as y,cc as ne,j as s,ao as T,af as k,B as C,aQ as le,bF as W,bg as M,a9 as R,aD as Z,ai as Y,Y as H,cd as q,aN as O,c as ee,s as K,b9 as se,aK as re,aq as ie}from"./vendor-WQejLG7Y.js";import{TabSelector as oe}from"./index-BYRqIR4M.js";import{s as ce,b as me,i as de,e as ue,c as pe,r as he,d as ge,f as xe,h as fe,j as ve,k as be,l as Ae}from"./admin.service-hizXY1il.js";import{u as D}from"./useAsyncFn-DMoxp3xu.js";import{d as L}from"./data.service-BjjAEJBf.js";import{u as ye}from"./useAsync-Dl5FScg5.js";import{u as $}from"./useAsyncRetry-CUd0kvgC.js";import{c as Ne}from"./company.service-DgXvkGEz.js";import{m as Se,u as je,o as we}from"./index-BUY2Cjej.js";import{I as ae,S as Ce,c as _e,a as Ee,b as Ie}from"./investorDrawer-DiX6z8wE.js";import{S as Me}from"./approve-CU4-qgFc.js";import{w as Re}from"./index-YDRpzjTi.js";import{w as Pe}from"./web3-KXi-5q2W.js";import"./app-q0ws3Yx0.js";import"./fetchList-Dx9pDj27.js";import"./asset-psWvgQPY.js";import"./assetStatus-D1v3GkIP.js";import"./pool.service-DXigxJcB.js";import"./batchStatus-CBLox09F.js";import"./AntdIcon-Bh4kV9XY.js";import"./index-BwXrazuH.js";import"./util.service-DGlW4vEA.js";import"./kycProgress-CsJgu1it.js";var V;function z(){return z=Object.assign?Object.assign.bind():function(t){for(var i=1;i<arguments.length;i++){var p=arguments[i];for(var a in p)({}).hasOwnProperty.call(p,a)&&(t[a]=p[a])}return t},z.apply(null,arguments)}var G=function(i){return h.createElement("svg",z({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24"},i),V||(V=h.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M16.72 10.611a6.11 6.11 0 1 1-12.22 0 6.11 6.11 0 0 1 12.22 0m1.5 0a7.61 7.61 0 1 1-15.22 0 7.61 7.61 0 0 1 15.22 0m-.485 6.065a.75.75 0 0 0-1.06 1.06l3.044 3.045a.75.75 0 1 0 1.06-1.06z",clipRule:"evenodd"})))};const E={LENDER_SUPER_ADMIN:"Lender Super Admin",WAREHOUSE_SUPER_ADMIN:"Warehouse Super Admin",WAREHOUSE_ADMIN:"Warehouse Admin",BANK_SUPER_ADMIN:"Bank Super Admin",BANK_ADMIN:"Bank Admin",COLLATERAL_MANAGER_SUPER_ADMIN:"Collateral Manager Super Admin",COLLATERAL_MANAGER_ADMIN:"Collateral Manager Admin",COMMODITY_EXCHANGE_ADMIN:"Commodity Exchange Admin",COMMODITY_EXCHANGE_SUPER_ADMIN:"Commodity Exchange Super Admin"},ke=t=>t===E.COLLATERAL_MANAGER_SUPER_ADMIN||t===E.COLLATERAL_MANAGER_ADMIN,De=t=>t===E.WAREHOUSE_SUPER_ADMIN||t===E.WAREHOUSE_ADMIN||t===E.COMMODITY_EXCHANGE_ADMIN||t===E.COMMODITY_EXCHANGE_SUPER_ADMIN,Oe=t=>t===E.BANK_SUPER_ADMIN||t===E.BANK_ADMIN,Fe=t=>t===E.LENDER_SUPER_ADMIN,Te=t=>/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i.test(t),Le=t=>{var w,I,_;const{open:i,onClose:p,onSave:a,defaultValue:N,loading:u,options:m}=t,g=le(N),[o]=y.useForm(),S=y.useWatch("roleId",o),x=y.useWatch("emails",o)||[],v=(_=(I=(w=m==null?void 0:m.roles)==null?void 0:w.find)==null?void 0:I.call(w,f=>f.value===S))==null?void 0:_.label,[j,l]=h.useState(""),[{value:r,loading:c},b]=D(async f=>{l(f);const te=(await ce(f)).data.map(P=>({value:P.email}));return ne(te,P=>P.value).filter(P=>!x.includes(P.vallue))},[x]);let A="",n=[];Oe(v)||Fe(v)?(n=(m==null?void 0:m.banks)??[],A="Bank"):De(v)?(n=(m==null?void 0:m.warehouses)??[],A="Warehouse"):ke(v)&&(n=(m==null?void 0:m.collaterals)??[],A="Collateral Manager");const d=[{required:!0,message:"This field is required"}];return s.jsx(T,{open:i,onCancel:p,centered:!0,title:s.jsx("div",{className:"text-lg",children:g?"Add Admin":"Edit Admin"}),footer:null,children:s.jsxs(y,{onFinish:f=>a({...N,...f,emails:f.emails.filter(Te)}),form:o,initialValues:{...N},rootClassName:"mt-[28px] [&_label]:!h-4 [&_label]:!leading-0 [&_.ant-form-item]:!leading-4",size:"large",layout:"vertical",children:[s.jsx(y.Item,{rules:d,name:"roleId",label:"Role",children:s.jsx(k,{placeholder:"Select role",className:"!h-12",options:(m==null?void 0:m.roles)??[]})}),n.length>0&&s.jsx(y.Item,{rules:d,name:"unitId",label:A,children:s.jsx(k,{className:"!h-12",options:n})}),s.jsxs(y.Item,{rules:d,name:"emails",label:"Account",className:"[&_.ant-form-item-control-input-content]:!flex [&_.ant-form-item-control-input-content]:!items-center [&_.ant-form-item-control-input-content]:!gap-2",children:[s.jsx(k,{rootClassName:"[&_.ant-select-selector]:!py-[5px] [&_.ant-select-selector]:!px-2 flex-1",mode:"multiple",showSearch:!0,value:x,onChange:f=>{l(""),o.setFieldValue("emails",f)},searchValue:j,onSearch:b,placeholder:"Select by email...",loading:c,options:r,disabled:!g,notFoundContent:s.jsxs("div",{className:"flex flex-col gap-4 p-4",children:[s.jsx("span",{className:"text-pool-card-info",children:u?"Loading...":"No match"}),j&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-full bg-[#252726] h-[1px] opacity-[0.08]"}),s.jsxs(C,{onClick:()=>{l(""),o.setFieldValue("emails",[...x,j])},type:"text",className:"!-m-4 !h-auto self-start !font-normal w-[calc(100%+32px)] text-start",children:["Invite",s.jsx("span",{className:"text-[#1AB752] mx-1",children:j})," to Untangled"]})]})]})}),s.jsx(C,{htmlType:"submit",size:"large",loading:u,children:g?"Add":"Update"})]})]})})},Be=()=>{const[t,i]=h.useState({offset:0,limit:10,search_value:""}),[p,a]=h.useState({open:!1,defaultValue:null}),{value:N=[]}=ye(async()=>{const[n,d,w,I]=await Promise.all([me().then(_=>_.data.filter(f=>f.name==="Admin").map(f=>({value:f.id,label:f.name}))),L.getBanks().then(_=>_.data.map(f=>({value:f.id,label:f.name}))),L.getWarehouseProviders().then(_=>_.data.map(f=>({value:f.id,label:f.name}))),L.getAllCollateralManagers().then(_=>_.data.map(f=>({value:f.id,label:f.companyLegalName})))]);return{roles:n,banks:d,warehouses:w,collaterals:I}}),{value:u,loading:m,retry:g}=$(async()=>{const n=await pe(t);for(const d of n.data)d.key=d.id;return n.data=n.data.filter(d=>d.roleName==="Admin"),n},[t]),[o,S]=h.useState([]),x=h.useCallback(W(n=>{i(d=>({...d,offset:0,search_value:n}))},500),[]),v=()=>{a({open:!1,defaultValue:null})},[{value:j},l]=D(async n=>{n.id?(await ue(n.id,{roleId:n.roleId,unitId:n.unitId}),M.success({message:`Edit role of admin ${n.adminEmail} successfully`,description:`Admin ${n.adminEmail} updated.`})):(await Promise.all(n.emails.map(async d=>de(d,n.roleId,n.unitId))),M.success({message:"Invite successfully",description:`Invited ${n.emails.length} successfully.`})),g(),v()},[]),r=u==null?void 0:u.total,c=u==null?void 0:u.data,b=[{title:"Admin Id",dataIndex:"id",key:"id"},{title:"Email",dataIndex:"adminEmail",key:"adminEmail"},{title:"Created At",dataIndex:"createdAt",key:"createdAt",render:n=>Y(n).format("DD/MM/YYYY")}],A=async()=>{if(!o.length)return;const n=o,d=o.map(w=>c.find(_=>_.id===w).adminEmail);T.confirm({title:"Are you sure want to remove these admins?",content:d.join(", "),maskClosable:!0,okText:"Yes",cancelText:"No",onOk:async()=>{try{const w=await he(n);if(w.status!=="success")throw new Error(w.message||"Something went wrong!");H.success("Successfully removed!"),g()}catch{console.log(e),H.error(e.message||"Something went wrong!")}}})};return s.jsxs("div",{className:"max-w-[1416px] mx-auto space-y-6 relative",children:[s.jsxs("div",{className:"absolute right-0 -top-20 flex gap-4",children:[s.jsx(C,{className:"bg-[#CECFCF] !rounded-full !h-auto py-3 px-4 w-[102px]",type:"text",size:"large",onClick:()=>{a({open:!0,defaultValue:null})},children:"Add"}),o.length>0&&s.jsx(C,{className:"bg-[#CECFCF] !rounded-full !h-auto py-3 px-4 w-[132px]",type:"text",size:"large",onClick:A,children:"Remove"}),s.jsx(R,{allowClear:!0,className:"p-3 rounded-full w-[255px] focus-within:w-[300px] [&_.ant-input-prefix]:w-6 [&_.ant-input-prefix]:h-6 [&_svg]:w-6 [&_svg]:h-6 ",prefix:s.jsx(G,{}),placeholder:"Search...",onChange:n=>x(n.target.value)})]}),s.jsx(Z,{rowClassName:"group",loading:m,columns:b,dataSource:c,pagination:{current:t.offset?t.offset/t.limit+1:1,total:r,pageSize:t.limit},onChange:n=>{i(d=>({...d,limit:n.pageSize??(d==null?void 0:d.limit),offset:(n.current-1)*(n.pageSize??(d==null?void 0:d.limit))}))},rowSelection:{selectedRowKeys:o,onChange:n=>{S(n)}},expandable:{}}),p.open&&s.jsx(Le,{...p,loading:j,options:N,onSave:l,onClose:v})]})},ze=t=>{const{selection:i,companies:p}=t,[a,N]=h.useState(!1),[u]=y.useForm(),m=[{required:!0,message:"This field is required"}],g=()=>{N(!1)},[{loading:o},S]=D(async x=>{if((await ge({member_ids:x.member_ids,email_body:x.email_body,email_subject:x.email_subject})).status==="success"){M.success({message:"Send mail to users successfully",description:"Mail has been sent."}),u.resetFields(),g==null||g();return}M.error({message:"Send mail to users fail",description:"Mail has not been sent."})},[g]);return s.jsxs(s.Fragment,{children:[s.jsx(C,{className:"bg-[#CECFCF] !rounded-full !h-auto py-3 px-4 w-[132px]",type:"text",size:"large",onClick:()=>{N(!0)},children:"Send Email"}),s.jsx(T,{open:a,onCancel:g,title:"Send an email to user",footer:null,children:s.jsxs(y,{onFinish:S,form:u,rootClassName:"mt-[28px] [&_label]:!h-4 [&_label]:!leading-0 [&_.ant-form-item]:!leading-4",size:"large",layout:"vertical",initialValues:{member_ids:q(i).map(x=>{var v;return(v=O(x==null?void 0:x.members))==null?void 0:v.id}).compact().value()},children:[s.jsx(y.Item,{rules:[...m],name:"member_ids",label:"To",children:s.jsx(k,{mode:"multiple",options:q(p).map(x=>{const v=O(x==null?void 0:x.members);return v?{value:v.id,label:v.email}:null}).compact().value()})}),s.jsx(y.Item,{rules:[...m],name:"email_subject",label:"Subject",children:s.jsx(R,{})}),s.jsx(y.Item,{name:"email_body",label:"Content",className:"[&_.ant-form-item-control-input-content]:!h-[250px]",valuePropName:"content",trigger:"handleEditorChange",children:s.jsx(ae,{})}),s.jsxs("div",{className:"flex justify-end items-center gap-2",children:[s.jsx(C,{size:"large",className:"!rounded-full w-24 bg-[#25272614] hover:bg-[#25272614]",onClick:g,disabled:o,children:"Cancel"},"back"),s.jsx(C,{size:"large",loading:o,className:"border-none !rounded-full w-24 ",type:"primary",htmlType:"submit",children:"Save"},"submit")]})]})})]})};var X,Q;function U(){return U=Object.assign?Object.assign.bind():function(t){for(var i=1;i<arguments.length;i++){var p=arguments[i];for(var a in p)({}).hasOwnProperty.call(p,a)&&(t[a]=p[a])}return t},U.apply(null,arguments)}var Ue=function(i){return h.createElement("svg",U({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 56 56"},i),X||(X=h.createElement("path",{fill:"#1AB752",d:"M0 27.998c0-15.464 12.536-28 28-28s28 12.536 28 28-12.536 28-28 28-28-12.536-28-28"})),Q||(Q=h.createElement("path",{fill:"#fff",d:"M18.667 22.667c-2.214 0-4 1.786-4 4v10.666c0 2.214 1.786 4 4 4h2c1.466 0 2.666-1.2 2.666-2.666V25.333c0-1.466-1.2-2.666-2.666-2.666zm1.333 12c0 .546-.453 1-1 1s-1-.454-1-1v-5.334c0-.546.453-1 1-1s1 .454 1 1zM37.334 14.667h-8c-2.214 0-4 1.786-4 4v18.666c0 2.214 1.786 4 4 4H30a.66.66 0 0 0 .667-.666V36c0-.733.6-1.334 1.333-1.334h2.667c.733 0 1.333.6 1.333 1.334v4.666a.66.66 0 0 0 .667.667h.666c2.214 0 4-1.786 4-4V18.667c0-2.214-1.786-4-4-4m-5.667 14.666c0 .547-.454 1-1 1-.547 0-1-.453-1-1v-6.666c0-.547.453-1 1-1s1 .453 1 1zm5.333 0c0 .547-.453 1-1 1s-1-.453-1-1v-6.666c0-.547.453-1 1-1s1 .453 1 1z"})))};const We=t=>{var l;const{open:i,onClose:p,defaultValue:a,retry:N}=t,u=h.useRef(null),m=ee(),[g,o]=h.useState(!1),S=(l=O(a==null?void 0:a.members))==null?void 0:l.id,{value:x=[],retry:v}=$(async()=>S?(await xe(S)).data.filter(c=>c.type==="NOTE_MEMBER").map(c=>`Admin ${c.adminEmail} note <b>'${c.content}'</b> at ${Y(c.createdAt).format("DD/MM/YYYY HH:mm")}`):void 0,[S]),j=()=>{o(!1)};return s.jsxs(K,{open:i,onClose:p,width:480,contentWrapperStyle:{padding:24,boxShadow:"none"},className:"rounded-3xl",title:"Details",children:[s.jsx(K,{open:g,onClose:j,width:480,contentWrapperStyle:{padding:24,boxShadow:"none"},className:"rounded-3xl",title:"Approve / Set Role",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"text-lg font-semibold",children:`Set ${a==null?void 0:a.companyLegalName} as:`}),g&&s.jsxs(y,{initialValues:{isIssuer:(a==null?void 0:a.isIssuer)??!1,isOriginator:(a==null?void 0:a.isOriginator)??!1,isPoolAdmin:(a==null?void 0:a.isPoolAdmin)??!1,isValidator:(a==null?void 0:a.isValidator)??!1},onFinish:async r=>{var w,I;const c=await Re(),b=await Se(),A=Pe.utils.keccak256("POOL_CREATOR"),n=(I=(w=a==null?void 0:a.members[0])==null?void 0:w.member_wallet[0])==null?void 0:I.walletAddress;if(!n)return M.error({message:"this profile doesn't have a linked wallet"});const d=await c.methods.hasRole(A,n).call();r.isPoolAdmin?d||await c.methods.grantRole(A,n).send({from:b,maxPriorityFeePerGas:null,maxFeePerGas:null}):d&&await c.methods.revokeRole(A,n).send({from:b,maxPriorityFeePerGas:null,maxFeePerGas:null}),await fe(a==null?void 0:a.id,{isBank:!!(a!=null&&a.isBank),isLender:!!(a!=null&&a.isLender),isWarehouse:!!(a!=null&&a.isWarehouse),isCollateralManager:!!(a!=null&&a.isCollateralManager),...r}),await N(),j()},children:[[{title:"Issuer",desc:"(Entity that can issue and manage tokens)",name:"isIssuer"},{title:"Originator",desc:"(Entity that is permitted to sell or pledge assets into a pool)",name:"isOriginator"},{title:"Pool Admin",desc:"Entity that create and manage key pool risk parameters",name:"isPoolAdmin"},{title:"Validator",desc:"Entity that verify assets and approve them for sale)",name:"isValidator"}].map(({title:r,desc:c,name:b},A,n)=>{const d=A<n.length-1;return s.jsxs(se.Fragment,{children:[s.jsxs("div",{className:"flex items-center gap-4 py-2",children:[s.jsx(y.Item,{name:b,valuePropName:"checked",noStyle:!0,children:s.jsx(re,{})}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("b",{className:"text-base",children:r}),s.jsx("span",{className:"text-[rgba(92,97,93,1)] text-sm",children:c})]})]}),d&&s.jsx("div",{className:"h-[1px] bg-[rgba(37,39,38,0.08)] my-2"})]},b)}),s.jsx(C,{size:"large",type:"primary",className:"!rounded-full w-full mt-4",htmlType:"submit",children:"Update Role"})]})]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-4 text-lg font-semibold",children:[s.jsx(Ue,{width:56,height:56}),s.jsx("span",{children:a==null?void 0:a.companyLegalName})]}),s.jsx("div",{className:"bg-[rgba(37,39,38,0.04)] rounded-2xl",children:[{label:"View Profile",Icon:Ce,onClick:()=>{m(`/company-profile/${a==null?void 0:a.id}`)}},{label:"Approve / Set Role",Icon:Me,onClick:()=>{o(!0)}}].map(({label:r,Icon:c,onClick:b})=>s.jsxs("div",{onClick:b,className:" rounded-2xl p-4 flex gap-4 [&_svg]:flex-shrink-0 hover:bg-[rgba(37,39,38,0.1)] cursor-pointer",role:"button",children:[s.jsx(c,{width:24,height:24}),s.jsx("span",{className:"flex-1",children:r}),s.jsx(_e,{width:24,height:24})]},r))}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("label",{className:"mb-1 leading-[28px] text-base",children:"Note"}),s.jsxs(ie.Compact,{children:[s.jsx(R,{size:"large",ref:u}),s.jsx(C,{size:"large",onClick:async()=>{var c,b;if(!S)return;const r=(b=(c=u.current)==null?void 0:c.input)==null?void 0:b.value;r&&(await ve(S,[{type:"NOTE_MEMBER",content:r.trim()}]),u.current.input.value="",v())},children:"Save"})]}),s.jsx("div",{className:"space-y-2 mt-2",children:x.map((r,c)=>s.jsx("div",{dangerouslySetInnerHTML:{__html:r}},c))})]})]})]})},J={APPROVED:2,BINKABI_APPROVED:3},F={PENDING:1,APPROVED:2},Ye=t=>[J.APPROVED,J.BINKABI_APPROVED].includes(t)?F.APPROVED:F.PENDING,$e=()=>{const[t,i]=h.useState({open:!1,defaultValue:void 0}),[p,a]=h.useState(""),N=h.useCallback(W(a,500),[]),[u,m]=h.useState([]),g=je(l=>l.companyId),{loading:o,value:S=[],retry:x}=$(async()=>{const l=await Ne.getAllCompanies();return i(r=>{if(r.defaultValue){const c=l.find(b=>{var A;return b.id===((A=r.defaultValue)==null?void 0:A.id)});return{...r,defaultValue:{...c??r}}}return r}),l}),v=h.useMemo(()=>S.filter(l=>{const r=new RegExp(p,"gi"),c=`${l.contactEmail} ${l.companyLegalName}`;return l.id!=g&&r.test(c)}),[p,g,S]),j=[{title:"Submitted date",dataIndex:"createdAt",key:"createdAt",sorter:(l,r)=>l.createdAt-r.createdAt,render:l=>Y(l).format("DD/MM/YYYY")},{title:"Email",dataIndex:"contactEmail",key:"contactEmail"},{title:"Company",dataIndex:"companyLegalName",key:"companyLegalName"},{title:"Role",dataIndex:"role",key:"role",render:(l,r)=>we(r)},{title:"Status",dataIndex:"status",key:"status",render:(l,r)=>{let c="",b="",A="";switch(Ye(r.status)){case F.APPROVED:c="Approved",A="#0D612B",b="#159944";break;case F.PENDING:c="Pending",A="#AD8B00",b="#D4B106";break}return s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"rounded-full w-3 h-3 border border-solid",style:{borderColor:A,backgroundColor:b}}),s.jsx("span",{className:"flex-1",children:c}),s.jsx(C,{className:"opacity-0 group-hover:opacity-100 bg-[#CECFCF] !rounded-lg",type:"text",onClick:()=>{i({open:!0,defaultValue:{...r}})},children:"Approve / Set Role"})]})}}];return s.jsxs("div",{className:"max-w-[1416px] mx-auto space-y-6 relative",children:[s.jsxs("div",{className:"absolute right-0 -top-20 flex gap-4",children:[u.length>0&&s.jsx(ze,{selection:u,companies:v}),s.jsx(R,{allowClear:!0,className:"p-3 rounded-full w-[255px] focus-within:w-[300px] [&_.ant-input-prefix]:w-6 [&_.ant-input-prefix]:h-6 [&_svg]:w-6 [&_svg]:h-6 ",prefix:s.jsx(G,{}),placeholder:"Search...",onChange:l=>N(l.target.value)})]}),s.jsx(Z,{rowClassName:"group",loading:o,columns:j,dataSource:v.map(l=>({...l,key:l.id})),rowSelection:{onChange:(l,r)=>{m(r)}}}),s.jsx(We,{...t,retry:x,onClose:()=>{i({open:!1,defaultValue:void 0})}})]})},Ge=({selection:t})=>{const[i,p]=h.useState(!1),[a]=y.useForm(),N=[{required:!0,message:"This field is required"}],u=()=>{p(!1)},[{loading:m},g]=D(async o=>{if((await be({emails:o.emails,email_body:o.email_body,email_subject:o.email_subject})).status==="success"){M.success({message:"Send mail to investors successfully",description:"Mail has been sent."}),a.resetFields(),u==null||u();return}M.error({message:"Send mail to investors fail",description:"Mail has not been sent."})},[u]);return s.jsxs(s.Fragment,{children:[s.jsx(C,{className:"bg-[#CECFCF] !rounded-full !h-auto py-3 px-4 w-[132px]",type:"text",size:"large",onClick:()=>{p(!0)},children:"Send Email"}),s.jsx(T,{open:i,onCancel:u,title:"Send an email to investor(s)",footer:null,children:s.jsxs(y,{onFinish:g,form:a,rootClassName:"mt-[28px] [&_label]:!h-4 [&_label]:!leading-0 [&_.ant-form-item]:!leading-4",size:"large",layout:"vertical",initialValues:{emails:t.map(o=>o.email)},children:[s.jsx(y.Item,{rules:[...N],name:"emails",label:"To",children:s.jsx(k,{mode:"multiple",options:t.map(o=>({value:o==null?void 0:o.email,label:o==null?void 0:o.email}))})}),s.jsx(y.Item,{rules:[...N],name:"email_subject",label:"Subject",children:s.jsx(R,{})}),s.jsx(y.Item,{name:"email_body",label:"Content",className:"[&_.ant-form-item-control-input-content]:!h-[250px]",valuePropName:"content",trigger:"handleEditorChange",children:s.jsx(ae,{})}),s.jsxs("div",{className:"flex justify-end items-center gap-2",children:[s.jsx(C,{size:"large",className:"!rounded-full w-24 bg-[#25272614] hover:bg-[#25272614]",onClick:u,disabled:m,children:"Cancel"},"back"),s.jsx(C,{size:"large",loading:m,className:"border-none !rounded-full w-24 ",type:"primary",htmlType:"submit",children:"Save"},"submit")]})]})})]})},He=()=>{const t=ee(),[{value:i,loading:p},a]=D(Ae),[N,u]=h.useState(""),[m,g]=h.useState(),[o,S]=h.useState([]),x=h.useCallback(W(l=>{u(l)},500),[]);h.useEffect(()=>{a({keyword:N})},[N]);const v=i==null?void 0:i.total,j=i==null?void 0:i.data;return s.jsxs("div",{className:"max-w-[1416px] mx-auto space-y-6 relative",children:[s.jsxs("div",{className:"absolute right-0 -top-20 flex gap-4",children:[o.length>0&&s.jsx(Ge,{selection:o}),s.jsx(R,{allowClear:!0,className:"p-3 rounded-full w-[255px] focus-within:w-[300px] [&_.ant-input-prefix]:w-6 [&_.ant-input-prefix]:h-6 [&_svg]:w-6 [&_svg]:h-6",prefix:s.jsx(G,{}),placeholder:"Search...",onChange:l=>x(l.target.value)})]}),s.jsx(Ee,{keyword:"",data:j==null?void 0:j.map(l=>({...l,key:l.id})),loading:p,fetchInvestors:a,total:v,onView:l=>g(l),rowSelection:{onChange:(l,r)=>{S(r)}}}),s.jsx(Ie,{investor:m,open:!!m,onClose:()=>{g(void 0)},onViewProfile:l=>{t(`/investors/${l==null?void 0:l.address}`)}})]})},B=[{label:"Investors",value:"investors",Content:He},{label:"Issuers",value:"issuers",Content:$e},{label:"Adminintrators",value:"admins",Content:Be}],vs=()=>{const[t,i]=h.useState(O(B).value),p=B.find(a=>a.value===t);return s.jsxs("div",{className:"max-w-[1416px] mx-auto space-y-6",children:[s.jsx("h1",{className:"m-0 text-4xl",children:"Users"}),s.jsx("div",{className:"w-full bg-[#252726] h-[1px] opacity-[0.08]"}),s.jsx("div",{className:"flex justify-between",children:s.jsx("nav",{className:"flex border-gray-300 items-center",children:B.map(a=>s.jsx(oe,{isActive:t===a.value,onClick:()=>i(a.value),children:a.label},a.value))})}),se.createElement(p.Content??null)]})};export{vs as default};
