const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ckeditor-CEhncOht.css","assets/block-quote-BsqTgtWT.css"])))=>i.map(i=>d[i]);
var zL=Object.defineProperty;var jL=(n,e,t)=>e in n?zL(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var s1=(n,e,t)=>jL(n,typeof e!="symbol"?e+"":e,t);import{r as a1,d as Bv,n as tp,g as WL}from"./index-BUY2Cjej.js";import{ai as jf,bp as eI,r as R,bq as hc,br as ot,bs as HL,b9 as O,P as at,bt as UL,bu as GL,bv as ri,bw as l1,bx as Er,by as rw,bz as ys,bA as Wf,bB as iw,bC as tI,bD as qL,ah as Fc,bE as nI,bF as Aa,bG as KL,bH as Lr,bI as Ta,bJ as Ea,bK as rI,bL as YL,bk as XL,bM as ZL,ag as JL,bN as $l,be as QL,j as we,_ as iI,bO as c1,bP as Hf,bQ as xe,bR as eF,bS as tF,a6 as oI,d as nF,aK as rF,ao as sI,ap as iF,aD as oF,B as fa,bT as np,S as rp,ac as ip,ad as sF,an as aF,aI as lF,a9 as aI,bU as j,bV as Fn,bW as Wt,bX as Ht,bY as $n,bZ as ut,b_ as cF,b$ as mc,c0 as uF,c1 as dF,c2 as fF,af as hF}from"./vendor-WQejLG7Y.js";import{E as op,a as sp,l as u1,S as mF}from"./pdf-DFr8ztBQ.js";import{a as gF,i as pF,_ as vF,A as bF}from"./AntdIcon-Bh4kV9XY.js";import{r as yF,s as wF,d as _F}from"./index-YDRpzjTi.js";import{a as ap}from"./asset-psWvgQPY.js";import{u as lp,c as CF}from"./util.service-DGlW4vEA.js";import{a as Vd,n as SF}from"./app-q0ws3Yx0.js";import{u as xF}from"./useLendingValues-FIBZ4h3R.js";import{A as d1}from"./assetStatus-D1v3GkIP.js";import{F as AF}from"./SelectFromSource-BeAMiId5.js";function TF(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(n,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}const f1={bulkUpdateInvoices:"/api/v1/invoice/bulk-update",uploadInvoiceAssets:"/api/v1/pool/:poolId/asset/upload-invoice"};class EF{constructor(){s1(this,"makeFormDataForBulkUpload",(e,{needToBeAcceptedByBuyer:t})=>e.map(i=>{const o={needToBeAccepted:t},s=["paymentDueDate","invoiceDate","invoiceDueDate"],a=["ineligibleReason.approvedReceivablesDebtorJurisdiction","ineligibleReason.debtorInsolvency","ineligibleReason.receivablesAgeing","ineligibleReason.paymentTerm","ineligibleReason.crossAgeing","ineligibleReason.other","exclusionReason.intercompanyTrade","exclusionReason.debtorContractIssues","exclusionReason.debtorUnapprovedJurisdiction","eligibleForPool","disputeCode"];return Object.keys(i).forEach(l=>{let c=i[l]||null;c&&(s.includes(l)?c=jf(c,"DD/MM/YYYY"):a.includes(l)&&(c=c==="Y")),eI(o,l,c)}),o}))}async bulkUpdate(e){const r=await(await a1.getRequestInstance()).post(f1.bulkUpdateInvoices,e),{data:i}=r;return i}async bulkUploadTransfer(e,t){const i=await(await a1.getRequestInstance()).post(f1.uploadInvoiceAssets.replace(":poolId",e),{...t,chainId:Bv.chainId}),{data:o}=i;return o}}const nIe=new EF;function lI(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n))for(e=0;e<n.length;e++)n[e]&&(t=lI(n[e]))&&(r&&(r+=" "),r+=t);else for(e in n)n[e]&&(r&&(r+=" "),r+=e);return r}function Kr(){for(var n,e,t=0,r="";t<arguments.length;)(n=arguments[t++])&&(e=lI(n))&&(r&&(r+=" "),r+=e);return r}var kF=function(n){R.useEffect(n,[])},rIe=function(n){kF(function(){n()})};function Fr(n){const e=Object.prototype.toString.call(n);return n instanceof Date||typeof n=="object"&&e==="[object Date]"?new n.constructor(+n):typeof n=="number"||e==="[object Number]"||typeof n=="string"||e==="[object String]"?new Date(n):new Date(NaN)}function ko(n,e){return n instanceof Date?new n.constructor(e):new Date(e)}function PF(n,e){const t=+Fr(n);return ko(n,t+e)}const cI=6048e5,IF=864e5,OF=6e4;let RF={};function Tm(){return RF}function $c(n,e){var a,l,c,u;const t=Tm(),r=(e==null?void 0:e.weekStartsOn)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??t.weekStartsOn??((u=(c=t.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??0,i=Fr(n),o=i.getDay(),s=(o<r?7:0)+o-r;return i.setDate(i.getDate()-s),i.setHours(0,0,0,0),i}function Uf(n){return $c(n,{weekStartsOn:1})}function uI(n){const e=Fr(n),t=e.getFullYear(),r=ko(n,0);r.setFullYear(t+1,0,4),r.setHours(0,0,0,0);const i=Uf(r),o=ko(n,0);o.setFullYear(t,0,4),o.setHours(0,0,0,0);const s=Uf(o);return e.getTime()>=i.getTime()?t+1:e.getTime()>=s.getTime()?t:t-1}function h1(n){const e=Fr(n);return e.setHours(0,0,0,0),e}function m1(n){const e=Fr(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function MF(n,e){const t=h1(n),r=h1(e),i=+t-m1(t),o=+r-m1(r);return Math.round((i-o)/IF)}function DF(n){const e=uI(n),t=ko(n,0);return t.setFullYear(e,0,4),t.setHours(0,0,0,0),Uf(t)}function iIe(n,e){return PF(n,e*OF)}function BF(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function NF(n){if(!BF(n)&&typeof n!="number")return!1;const e=Fr(n);return!isNaN(Number(e))}function LF(n){const e=Fr(n),t=ko(n,0);return t.setFullYear(e.getFullYear(),0,1),t.setHours(0,0,0,0),t}const FF={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},$F=(n,e,t)=>{let r;const i=FF[n];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+r:r+" ago":r};function cp(n){return(e={})=>{const t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}const VF={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},zF={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},jF={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},WF={date:cp({formats:VF,defaultWidth:"full"}),time:cp({formats:zF,defaultWidth:"full"}),dateTime:cp({formats:jF,defaultWidth:"full"})},HF={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},UF=(n,e,t,r)=>HF[n];function Vl(n){return(e,t)=>{const r=t!=null&&t.context?String(t.context):"standalone";let i;if(r==="formatting"&&n.formattingValues){const s=n.defaultFormattingWidth||n.defaultWidth,a=t!=null&&t.width?String(t.width):s;i=n.formattingValues[a]||n.formattingValues[s]}else{const s=n.defaultWidth,a=t!=null&&t.width?String(t.width):n.defaultWidth;i=n.values[a]||n.values[s]}const o=n.argumentCallback?n.argumentCallback(e):e;return i[o]}}const GF={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},qF={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},KF={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},YF={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},XF={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},ZF={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},JF=(n,e)=>{const t=Number(n),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},QF={ordinalNumber:JF,era:Vl({values:GF,defaultWidth:"wide"}),quarter:Vl({values:qF,defaultWidth:"wide",argumentCallback:n=>n-1}),month:Vl({values:KF,defaultWidth:"wide"}),day:Vl({values:YF,defaultWidth:"wide"}),dayPeriod:Vl({values:XF,defaultWidth:"wide",formattingValues:ZF,defaultFormattingWidth:"wide"})};function zl(n){return(e,t={})=>{const r=t.width,i=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],o=e.match(i);if(!o)return null;const s=o[0],a=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],l=Array.isArray(a)?t$(a,d=>d.test(s)):e$(a,d=>d.test(s));let c;c=n.valueCallback?n.valueCallback(l):l,c=t.valueCallback?t.valueCallback(c):c;const u=e.slice(s.length);return{value:c,rest:u}}}function e$(n,e){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function t$(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function n$(n){return(e,t={})=>{const r=e.match(n.matchPattern);if(!r)return null;const i=r[0],o=e.match(n.parsePattern);if(!o)return null;let s=n.valueCallback?n.valueCallback(o[0]):o[0];s=t.valueCallback?t.valueCallback(s):s;const a=e.slice(i.length);return{value:s,rest:a}}}const r$=/^(\d+)(th|st|nd|rd)?/i,i$=/\d+/i,o$={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},s$={any:[/^b/i,/^(a|c)/i]},a$={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},l$={any:[/1/i,/2/i,/3/i,/4/i]},c$={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},u$={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},d$={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},f$={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},h$={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},m$={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},g$={ordinalNumber:n$({matchPattern:r$,parsePattern:i$,valueCallback:n=>parseInt(n,10)}),era:zl({matchPatterns:o$,defaultMatchWidth:"wide",parsePatterns:s$,defaultParseWidth:"any"}),quarter:zl({matchPatterns:a$,defaultMatchWidth:"wide",parsePatterns:l$,defaultParseWidth:"any",valueCallback:n=>n+1}),month:zl({matchPatterns:c$,defaultMatchWidth:"wide",parsePatterns:u$,defaultParseWidth:"any"}),day:zl({matchPatterns:d$,defaultMatchWidth:"wide",parsePatterns:f$,defaultParseWidth:"any"}),dayPeriod:zl({matchPatterns:h$,defaultMatchWidth:"any",parsePatterns:m$,defaultParseWidth:"any"})},p$={code:"en-US",formatDistance:$F,formatLong:WF,formatRelative:UF,localize:QF,match:g$,options:{weekStartsOn:0,firstWeekContainsDate:1}};function v$(n){const e=Fr(n);return MF(e,LF(e))+1}function b$(n){const e=Fr(n),t=+Uf(e)-+DF(e);return Math.round(t/cI)+1}function dI(n,e){var u,d,f,h;const t=Fr(n),r=t.getFullYear(),i=Tm(),o=(e==null?void 0:e.firstWeekContainsDate)??((d=(u=e==null?void 0:e.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??i.firstWeekContainsDate??((h=(f=i.locale)==null?void 0:f.options)==null?void 0:h.firstWeekContainsDate)??1,s=ko(n,0);s.setFullYear(r+1,0,o),s.setHours(0,0,0,0);const a=$c(s,e),l=ko(n,0);l.setFullYear(r,0,o),l.setHours(0,0,0,0);const c=$c(l,e);return t.getTime()>=a.getTime()?r+1:t.getTime()>=c.getTime()?r:r-1}function y$(n,e){var a,l,c,u;const t=Tm(),r=(e==null?void 0:e.firstWeekContainsDate)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.firstWeekContainsDate)??t.firstWeekContainsDate??((u=(c=t.locale)==null?void 0:c.options)==null?void 0:u.firstWeekContainsDate)??1,i=dI(n,e),o=ko(n,0);return o.setFullYear(i,0,r),o.setHours(0,0,0,0),$c(o,e)}function w$(n,e){const t=Fr(n),r=+$c(t,e)-+y$(t,e);return Math.round(r/cI)+1}function dt(n,e){const t=n<0?"-":"",r=Math.abs(n).toString().padStart(e,"0");return t+r}const co={y(n,e){const t=n.getFullYear(),r=t>0?t:1-t;return dt(e==="yy"?r%100:r,e.length)},M(n,e){const t=n.getMonth();return e==="M"?String(t+1):dt(t+1,2)},d(n,e){return dt(n.getDate(),e.length)},a(n,e){const t=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(n,e){return dt(n.getHours()%12||12,e.length)},H(n,e){return dt(n.getHours(),e.length)},m(n,e){return dt(n.getMinutes(),e.length)},s(n,e){return dt(n.getSeconds(),e.length)},S(n,e){const t=e.length,r=n.getMilliseconds(),i=Math.trunc(r*Math.pow(10,t-3));return dt(i,e.length)}},Hs={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},g1={G:function(n,e,t){const r=n.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(r,{width:"abbreviated"});case"GGGGG":return t.era(r,{width:"narrow"});case"GGGG":default:return t.era(r,{width:"wide"})}},y:function(n,e,t){if(e==="yo"){const r=n.getFullYear(),i=r>0?r:1-r;return t.ordinalNumber(i,{unit:"year"})}return co.y(n,e)},Y:function(n,e,t,r){const i=dI(n,r),o=i>0?i:1-i;if(e==="YY"){const s=o%100;return dt(s,2)}return e==="Yo"?t.ordinalNumber(o,{unit:"year"}):dt(o,e.length)},R:function(n,e){const t=uI(n);return dt(t,e.length)},u:function(n,e){const t=n.getFullYear();return dt(t,e.length)},Q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return dt(r,2);case"Qo":return t.ordinalNumber(r,{unit:"quarter"});case"QQQ":return t.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(r,{width:"wide",context:"formatting"})}},q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return dt(r,2);case"qo":return t.ordinalNumber(r,{unit:"quarter"});case"qqq":return t.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(r,{width:"wide",context:"standalone"})}},M:function(n,e,t){const r=n.getMonth();switch(e){case"M":case"MM":return co.M(n,e);case"Mo":return t.ordinalNumber(r+1,{unit:"month"});case"MMM":return t.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(r,{width:"wide",context:"formatting"})}},L:function(n,e,t){const r=n.getMonth();switch(e){case"L":return String(r+1);case"LL":return dt(r+1,2);case"Lo":return t.ordinalNumber(r+1,{unit:"month"});case"LLL":return t.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(r,{width:"wide",context:"standalone"})}},w:function(n,e,t,r){const i=w$(n,r);return e==="wo"?t.ordinalNumber(i,{unit:"week"}):dt(i,e.length)},I:function(n,e,t){const r=b$(n);return e==="Io"?t.ordinalNumber(r,{unit:"week"}):dt(r,e.length)},d:function(n,e,t){return e==="do"?t.ordinalNumber(n.getDate(),{unit:"date"}):co.d(n,e)},D:function(n,e,t){const r=v$(n);return e==="Do"?t.ordinalNumber(r,{unit:"dayOfYear"}):dt(r,e.length)},E:function(n,e,t){const r=n.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(r,{width:"short",context:"formatting"});case"EEEE":default:return t.day(r,{width:"wide",context:"formatting"})}},e:function(n,e,t,r){const i=n.getDay(),o=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(o);case"ee":return dt(o,2);case"eo":return t.ordinalNumber(o,{unit:"day"});case"eee":return t.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(i,{width:"short",context:"formatting"});case"eeee":default:return t.day(i,{width:"wide",context:"formatting"})}},c:function(n,e,t,r){const i=n.getDay(),o=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(o);case"cc":return dt(o,e.length);case"co":return t.ordinalNumber(o,{unit:"day"});case"ccc":return t.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(i,{width:"narrow",context:"standalone"});case"cccccc":return t.day(i,{width:"short",context:"standalone"});case"cccc":default:return t.day(i,{width:"wide",context:"standalone"})}},i:function(n,e,t){const r=n.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return dt(i,e.length);case"io":return t.ordinalNumber(i,{unit:"day"});case"iii":return t.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(r,{width:"short",context:"formatting"});case"iiii":default:return t.day(r,{width:"wide",context:"formatting"})}},a:function(n,e,t){const i=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(n,e,t){const r=n.getHours();let i;switch(r===12?i=Hs.noon:r===0?i=Hs.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(n,e,t){const r=n.getHours();let i;switch(r>=17?i=Hs.evening:r>=12?i=Hs.afternoon:r>=4?i=Hs.morning:i=Hs.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(n,e,t){if(e==="ho"){let r=n.getHours()%12;return r===0&&(r=12),t.ordinalNumber(r,{unit:"hour"})}return co.h(n,e)},H:function(n,e,t){return e==="Ho"?t.ordinalNumber(n.getHours(),{unit:"hour"}):co.H(n,e)},K:function(n,e,t){const r=n.getHours()%12;return e==="Ko"?t.ordinalNumber(r,{unit:"hour"}):dt(r,e.length)},k:function(n,e,t){let r=n.getHours();return r===0&&(r=24),e==="ko"?t.ordinalNumber(r,{unit:"hour"}):dt(r,e.length)},m:function(n,e,t){return e==="mo"?t.ordinalNumber(n.getMinutes(),{unit:"minute"}):co.m(n,e)},s:function(n,e,t){return e==="so"?t.ordinalNumber(n.getSeconds(),{unit:"second"}):co.s(n,e)},S:function(n,e){return co.S(n,e)},X:function(n,e,t){const r=n.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return v1(r);case"XXXX":case"XX":return Zo(r);case"XXXXX":case"XXX":default:return Zo(r,":")}},x:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"x":return v1(r);case"xxxx":case"xx":return Zo(r);case"xxxxx":case"xxx":default:return Zo(r,":")}},O:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+p1(r,":");case"OOOO":default:return"GMT"+Zo(r,":")}},z:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+p1(r,":");case"zzzz":default:return"GMT"+Zo(r,":")}},t:function(n,e,t){const r=Math.trunc(n.getTime()/1e3);return dt(r,e.length)},T:function(n,e,t){const r=n.getTime();return dt(r,e.length)}};function p1(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),i=Math.trunc(r/60),o=r%60;return o===0?t+String(i):t+String(i)+e+dt(o,2)}function v1(n,e){return n%60===0?(n>0?"-":"+")+dt(Math.abs(n)/60,2):Zo(n,e)}function Zo(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),i=dt(Math.trunc(r/60),2),o=dt(r%60,2);return t+i+e+o}const b1=(n,e)=>{switch(n){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},fI=(n,e)=>{switch(n){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},_$=(n,e)=>{const t=n.match(/(P+)(p+)?/)||[],r=t[1],i=t[2];if(!i)return b1(n,e);let o;switch(r){case"P":o=e.dateTime({width:"short"});break;case"PP":o=e.dateTime({width:"medium"});break;case"PPP":o=e.dateTime({width:"long"});break;case"PPPP":default:o=e.dateTime({width:"full"});break}return o.replace("{{date}}",b1(r,e)).replace("{{time}}",fI(i,e))},C$={p:fI,P:_$},S$=/^D+$/,x$=/^Y+$/,A$=["D","DD","YY","YYYY"];function T$(n){return S$.test(n)}function E$(n){return x$.test(n)}function k$(n,e,t){const r=P$(n,e,t);if(console.warn(r),A$.includes(n))throw new RangeError(r)}function P$(n,e,t){const r=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${e}\`) for formatting ${r} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const I$=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,O$=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,R$=/^'([^]*?)'?$/,M$=/''/g,D$=/[a-zA-Z]/;function oIe(n,e,t){var u,d,f,h;const r=Tm(),i=r.locale??p$,o=r.firstWeekContainsDate??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,s=r.weekStartsOn??((h=(f=r.locale)==null?void 0:f.options)==null?void 0:h.weekStartsOn)??0,a=Fr(n);if(!NF(a))throw new RangeError("Invalid time value");let l=e.match(O$).map(m=>{const g=m[0];if(g==="p"||g==="P"){const p=C$[g];return p(m,i.formatLong)}return m}).join("").match(I$).map(m=>{if(m==="''")return{isToken:!1,value:"'"};const g=m[0];if(g==="'")return{isToken:!1,value:B$(m)};if(g1[g])return{isToken:!0,value:m};if(g.match(D$))throw new RangeError("Format string contains an unescaped latin alphabet character `"+g+"`");return{isToken:!1,value:m}});i.localize.preprocessor&&(l=i.localize.preprocessor(a,l));const c={firstWeekContainsDate:o,weekStartsOn:s,locale:i};return l.map(m=>{if(!m.isToken)return m.value;const g=m.value;(E$(g)||T$(g))&&k$(g,e,String(n));const p=g1[g[0]];return p(a,g,i.localize,c)}).join("")}function B$(n){const e=n.match(R$);return e?e[1].replace(M$,"'"):n}function hI(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=hI(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function rt(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=hI(n))&&(r&&(r+=" "),r+=e);return r}var N$=Array.isArray,tr=N$,L$=typeof hc=="object"&&hc&&hc.Object===Object&&hc,mI=L$,F$=mI,$$=typeof self=="object"&&self&&self.Object===Object&&self,V$=F$||$$||Function("return this")(),Ei=V$,z$=Ei,j$=z$.Symbol,Ku=j$,y1=Ku,gI=Object.prototype,W$=gI.hasOwnProperty,H$=gI.toString,jl=y1?y1.toStringTag:void 0;function U$(n){var e=W$.call(n,jl),t=n[jl];try{n[jl]=void 0;var r=!0}catch{}var i=H$.call(n);return r&&(e?n[jl]=t:delete n[jl]),i}var G$=U$,q$=Object.prototype,K$=q$.toString;function Y$(n){return K$.call(n)}var X$=Y$,w1=Ku,Z$=G$,J$=X$,Q$="[object Null]",eV="[object Undefined]",_1=w1?w1.toStringTag:void 0;function tV(n){return n==null?n===void 0?eV:Q$:_1&&_1 in Object(n)?Z$(n):J$(n)}var no=tV;function nV(n){return n!=null&&typeof n=="object"}var ro=nV,rV=no,iV=ro,oV="[object Symbol]";function sV(n){return typeof n=="symbol"||iV(n)&&rV(n)==oV}var dl=sV,aV=tr,lV=dl,cV=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,uV=/^\w*$/;function dV(n,e){if(aV(n))return!1;var t=typeof n;return t=="number"||t=="symbol"||t=="boolean"||n==null||lV(n)?!0:uV.test(n)||!cV.test(n)||e!=null&&n in Object(e)}var ow=dV;function fV(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var Do=fV;const fl=ot(Do);var hV=no,mV=Do,gV="[object AsyncFunction]",pV="[object Function]",vV="[object GeneratorFunction]",bV="[object Proxy]";function yV(n){if(!mV(n))return!1;var e=hV(n);return e==pV||e==vV||e==gV||e==bV}var sw=yV;const ze=ot(sw);var wV=Ei,_V=wV["__core-js_shared__"],CV=_V,up=CV,C1=function(){var n=/[^.]+$/.exec(up&&up.keys&&up.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function SV(n){return!!C1&&C1 in n}var xV=SV,AV=Function.prototype,TV=AV.toString;function EV(n){if(n!=null){try{return TV.call(n)}catch{}try{return n+""}catch{}}return""}var pI=EV,kV=sw,PV=xV,IV=Do,OV=pI,RV=/[\\^$.*+?()[\]{}|]/g,MV=/^\[object .+?Constructor\]$/,DV=Function.prototype,BV=Object.prototype,NV=DV.toString,LV=BV.hasOwnProperty,FV=RegExp("^"+NV.call(LV).replace(RV,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function $V(n){if(!IV(n)||PV(n))return!1;var e=kV(n)?FV:MV;return e.test(OV(n))}var VV=$V;function zV(n,e){return n==null?void 0:n[e]}var jV=zV,WV=VV,HV=jV;function UV(n,e){var t=HV(n,e);return WV(t)?t:void 0}var ks=UV,GV=ks,qV=GV(Object,"create"),Em=qV,S1=Em;function KV(){this.__data__=S1?S1(null):{},this.size=0}var YV=KV;function XV(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}var ZV=XV,JV=Em,QV="__lodash_hash_undefined__",e3=Object.prototype,t3=e3.hasOwnProperty;function n3(n){var e=this.__data__;if(JV){var t=e[n];return t===QV?void 0:t}return t3.call(e,n)?e[n]:void 0}var r3=n3,i3=Em,o3=Object.prototype,s3=o3.hasOwnProperty;function a3(n){var e=this.__data__;return i3?e[n]!==void 0:s3.call(e,n)}var l3=a3,c3=Em,u3="__lodash_hash_undefined__";function d3(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=c3&&e===void 0?u3:e,this}var f3=d3,h3=YV,m3=ZV,g3=r3,p3=l3,v3=f3;function hl(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}hl.prototype.clear=h3;hl.prototype.delete=m3;hl.prototype.get=g3;hl.prototype.has=p3;hl.prototype.set=v3;var b3=hl;function y3(){this.__data__=[],this.size=0}var w3=y3;function _3(n,e){return n===e||n!==n&&e!==e}var aw=_3,C3=aw;function S3(n,e){for(var t=n.length;t--;)if(C3(n[t][0],e))return t;return-1}var km=S3,x3=km,A3=Array.prototype,T3=A3.splice;function E3(n){var e=this.__data__,t=x3(e,n);if(t<0)return!1;var r=e.length-1;return t==r?e.pop():T3.call(e,t,1),--this.size,!0}var k3=E3,P3=km;function I3(n){var e=this.__data__,t=P3(e,n);return t<0?void 0:e[t][1]}var O3=I3,R3=km;function M3(n){return R3(this.__data__,n)>-1}var D3=M3,B3=km;function N3(n,e){var t=this.__data__,r=B3(t,n);return r<0?(++this.size,t.push([n,e])):t[r][1]=e,this}var L3=N3,F3=w3,$3=k3,V3=O3,z3=D3,j3=L3;function ml(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}ml.prototype.clear=F3;ml.prototype.delete=$3;ml.prototype.get=V3;ml.prototype.has=z3;ml.prototype.set=j3;var Pm=ml,W3=ks,H3=Ei,U3=W3(H3,"Map"),lw=U3,x1=b3,G3=Pm,q3=lw;function K3(){this.size=0,this.__data__={hash:new x1,map:new(q3||G3),string:new x1}}var Y3=K3;function X3(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}var Z3=X3,J3=Z3;function Q3(n,e){var t=n.__data__;return J3(e)?t[typeof e=="string"?"string":"hash"]:t.map}var Im=Q3,ez=Im;function tz(n){var e=ez(this,n).delete(n);return this.size-=e?1:0,e}var nz=tz,rz=Im;function iz(n){return rz(this,n).get(n)}var oz=iz,sz=Im;function az(n){return sz(this,n).has(n)}var lz=az,cz=Im;function uz(n,e){var t=cz(this,n),r=t.size;return t.set(n,e),this.size+=t.size==r?0:1,this}var dz=uz,fz=Y3,hz=nz,mz=oz,gz=lz,pz=dz;function gl(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}gl.prototype.clear=fz;gl.prototype.delete=hz;gl.prototype.get=mz;gl.prototype.has=gz;gl.prototype.set=pz;var cw=gl,vI=cw,vz="Expected a function";function uw(n,e){if(typeof n!="function"||e!=null&&typeof e!="function")throw new TypeError(vz);var t=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=t.cache;if(o.has(i))return o.get(i);var s=n.apply(this,r);return t.cache=o.set(i,s)||o,s};return t.cache=new(uw.Cache||vI),t}uw.Cache=vI;var bI=uw;const bz=ot(bI);var yz=bI,wz=500;function _z(n){var e=yz(n,function(r){return t.size===wz&&t.clear(),r}),t=e.cache;return e}var Cz=_z,Sz=Cz,xz=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Az=/\\(\\)?/g,Tz=Sz(function(n){var e=[];return n.charCodeAt(0)===46&&e.push(""),n.replace(xz,function(t,r,i,o){e.push(i?o.replace(Az,"$1"):r||t)}),e}),Ez=Tz;function kz(n,e){for(var t=-1,r=n==null?0:n.length,i=Array(r);++t<r;)i[t]=e(n[t],t,n);return i}var dw=kz,A1=Ku,Pz=dw,Iz=tr,Oz=dl,T1=A1?A1.prototype:void 0,E1=T1?T1.toString:void 0;function yI(n){if(typeof n=="string")return n;if(Iz(n))return Pz(n,yI)+"";if(Oz(n))return E1?E1.call(n):"";var e=n+"";return e=="0"&&1/n==-1/0?"-0":e}var Rz=yI,Mz=Rz;function Dz(n){return n==null?"":Mz(n)}var wI=Dz,Bz=tr,Nz=ow,Lz=Ez,Fz=wI;function $z(n,e){return Bz(n)?n:Nz(n,e)?[n]:Lz(Fz(n))}var _I=$z,Vz=dl;function zz(n){if(typeof n=="string"||Vz(n))return n;var e=n+"";return e=="0"&&1/n==-1/0?"-0":e}var Om=zz,jz=_I,Wz=Om;function Hz(n,e){e=jz(e,n);for(var t=0,r=e.length;n!=null&&t<r;)n=n[Wz(e[t++])];return t&&t==r?n:void 0}var fw=Hz,Uz=fw;function Gz(n,e,t){var r=n==null?void 0:Uz(n,e);return r===void 0?t:r}var CI=Gz;const Ir=ot(CI);function qz(n){return n==null}var Kz=qz;const Ke=ot(Kz);var Yz=no,Xz=tr,Zz=ro,Jz="[object String]";function Qz(n){return typeof n=="string"||!Xz(n)&&Zz(n)&&Yz(n)==Jz}var e4=Qz;const Yu=ot(e4);var t4=no,n4=ro,r4="[object Number]";function i4(n){return typeof n=="number"||n4(n)&&t4(n)==r4}var SI=i4;const o4=ot(SI);var s4=SI;function a4(n){return s4(n)&&n!=+n}var l4=a4;const pl=ot(l4);var Jr=function(e){return e===0?0:e>0?1:-1},rs=function(e){return Yu(e)&&e.indexOf("%")===e.length-1},fe=function(e){return o4(e)&&!pl(e)},en=function(e){return fe(e)||Yu(e)},c4=0,Xu=function(e){var t=++c4;return"".concat(e||"").concat(t)},ws=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!fe(e)&&!Yu(e))return r;var o;if(rs(e)){var s=e.indexOf("%");o=t*parseFloat(e.slice(0,s))/100}else o=+e;return pl(o)&&(o=r),i&&o>t&&(o=t),o},sa=function(e){if(!e)return null;var t=Object.keys(e);return t&&t.length?e[t[0]]:null},u4=function(e){if(!Array.isArray(e))return!1;for(var t=e.length,r={},i=0;i<t;i++)if(!r[e[i]])r[e[i]]=!0;else return!0;return!1},Tr=function(e,t){return fe(e)&&fe(t)?function(r){return e+r*(t-e)}:function(){return t}};function Gf(n,e,t){return!n||!n.length?null:n.find(function(r){return r&&(typeof e=="function"?e(r):Ir(r,e))===t})}function ya(n,e){for(var t in n)if({}.hasOwnProperty.call(n,t)&&(!{}.hasOwnProperty.call(e,t)||n[t]!==e[t]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(n,r))return!1;return!0}function Nv(n){"@babel/helpers - typeof";return Nv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nv(n)}var d4=["viewBox","children"],f4=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],k1=["points","pathLength"],dp={svg:d4,polygon:k1,polyline:k1},hw=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],qf=function(e,t){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(R.isValidElement(e)&&(r=e.props),!fl(r))return null;var i={};return Object.keys(r).forEach(function(o){hw.includes(o)&&(i[o]=t||function(s){return r[o](r,s)})}),i},h4=function(e,t,r){return function(i){return e(t,r,i),null}},Kf=function(e,t,r){if(!fl(e)||Nv(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(o){var s=e[o];hw.includes(o)&&typeof s=="function"&&(i||(i={}),i[o]=h4(s,t,r))}),i},m4=["children"],g4=["children"];function P1(n,e){if(n==null)return{};var t=p4(n,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function p4(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function Lv(n){"@babel/helpers - typeof";return Lv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lv(n)}var I1={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Ui=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},O1=null,fp=null,mw=function n(e){if(e===O1&&Array.isArray(fp))return fp;var t=[];return R.Children.forEach(e,function(r){Ke(r)||(HL.isFragment(r)?t=t.concat(n(r.props.children)):t.push(r))}),fp=t,O1=e,t};function ni(n,e){var t=[],r=[];return Array.isArray(e)?r=e.map(function(i){return Ui(i)}):r=[Ui(e)],mw(n).forEach(function(i){var o=Ir(i,"type.displayName")||Ir(i,"type.name");r.indexOf(o)!==-1&&t.push(i)}),t}function sr(n,e){var t=ni(n,e);return t&&t[0]}var R1=function(e){if(!e||!e.props)return!1;var t=e.props,r=t.width,i=t.height;return!(!fe(r)||r<=0||!fe(i)||i<=0)},v4=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],b4=function(e){return e&&e.type&&Yu(e.type)&&v4.indexOf(e.type)>=0},y4=function(e){return e&&Lv(e)==="object"&&"clipDot"in e},w4=function(e,t,r,i){var o,s=(o=dp==null?void 0:dp[i])!==null&&o!==void 0?o:[];return!ze(e)&&(i&&s.includes(t)||f4.includes(t))||r&&hw.includes(t)},He=function(e,t,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(R.isValidElement(e)&&(i=e.props),!fl(i))return null;var o={};return Object.keys(i).forEach(function(s){var a;w4((a=i)===null||a===void 0?void 0:a[s],s,t,r)&&(o[s]=i[s])}),o},Fv=function n(e,t){if(e===t)return!0;var r=R.Children.count(e);if(r!==R.Children.count(t))return!1;if(r===0)return!0;if(r===1)return M1(Array.isArray(e)?e[0]:e,Array.isArray(t)?t[0]:t);for(var i=0;i<r;i++){var o=e[i],s=t[i];if(Array.isArray(o)||Array.isArray(s)){if(!n(o,s))return!1}else if(!M1(o,s))return!1}return!0},M1=function(e,t){if(Ke(e)&&Ke(t))return!0;if(!Ke(e)&&!Ke(t)){var r=e.props||{},i=r.children,o=P1(r,m4),s=t.props||{},a=s.children,l=P1(s,g4);return i&&a?ya(o,l)&&Fv(i,a):!i&&!a?ya(o,l):!1}return!1},D1=function(e,t){var r=[],i={};return mw(e).forEach(function(o,s){if(b4(o))r.push(o);else if(o){var a=Ui(o.type),l=t[a]||{},c=l.handler,u=l.once;if(c&&(!u||!i[a])){var d=c(o,a,s);r.push(d),i[a]=!0}}}),r},_4=function(e){var t=e&&e.type;return t&&I1[t]?I1[t]:null},C4=function(e,t){return mw(t).indexOf(e)},S4=["children","width","height","viewBox","className","style","title","desc"];function $v(){return $v=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},$v.apply(this,arguments)}function x4(n,e){if(n==null)return{};var t=A4(n,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function A4(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function Vv(n){var e=n.children,t=n.width,r=n.height,i=n.viewBox,o=n.className,s=n.style,a=n.title,l=n.desc,c=x4(n,S4),u=i||{width:t,height:r,x:0,y:0},d=rt("recharts-surface",o);return O.createElement("svg",$v({},He(c,!0,"svg"),{className:d,width:t,height:r,style:s,viewBox:"".concat(u.x," ").concat(u.y," ").concat(u.width," ").concat(u.height)}),O.createElement("title",null,a),O.createElement("desc",null,l),e)}var T4=["children","className"];function zv(){return zv=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},zv.apply(this,arguments)}function E4(n,e){if(n==null)return{};var t=k4(n,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function k4(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}var It=O.forwardRef(function(n,e){var t=n.children,r=n.className,i=E4(n,T4),o=rt("recharts-layer",r);return O.createElement("g",zv({className:o},He(i,!0),{ref:e}),t)}),us=function(e,t){for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o]};function P4(n,e,t){var r=-1,i=n.length;e<0&&(e=-e>i?0:i+e),t=t>i?i:t,t<0&&(t+=i),i=e>t?0:t-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=n[r+e];return o}var I4=P4,O4=I4;function R4(n,e,t){var r=n.length;return t=t===void 0?r:t,!e&&t>=r?n:O4(n,e,t)}var M4=R4,D4="\\ud800-\\udfff",B4="\\u0300-\\u036f",N4="\\ufe20-\\ufe2f",L4="\\u20d0-\\u20ff",F4=B4+N4+L4,$4="\\ufe0e\\ufe0f",V4="\\u200d",z4=RegExp("["+V4+D4+F4+$4+"]");function j4(n){return z4.test(n)}var xI=j4;function W4(n){return n.split("")}var H4=W4,AI="\\ud800-\\udfff",U4="\\u0300-\\u036f",G4="\\ufe20-\\ufe2f",q4="\\u20d0-\\u20ff",K4=U4+G4+q4,Y4="\\ufe0e\\ufe0f",X4="["+AI+"]",jv="["+K4+"]",Wv="\\ud83c[\\udffb-\\udfff]",Z4="(?:"+jv+"|"+Wv+")",TI="[^"+AI+"]",EI="(?:\\ud83c[\\udde6-\\uddff]){2}",kI="[\\ud800-\\udbff][\\udc00-\\udfff]",J4="\\u200d",PI=Z4+"?",II="["+Y4+"]?",Q4="(?:"+J4+"(?:"+[TI,EI,kI].join("|")+")"+II+PI+")*",e7=II+PI+Q4,t7="(?:"+[TI+jv+"?",jv,EI,kI,X4].join("|")+")",n7=RegExp(Wv+"(?="+Wv+")|"+t7+e7,"g");function r7(n){return n.match(n7)||[]}var i7=r7,o7=H4,s7=xI,a7=i7;function l7(n){return s7(n)?a7(n):o7(n)}var c7=l7,u7=M4,d7=xI,f7=c7,h7=wI;function m7(n){return function(e){e=h7(e);var t=d7(e)?f7(e):void 0,r=t?t[0]:e.charAt(0),i=t?u7(t,1).join(""):e.slice(1);return r[n]()+i}}var g7=m7,p7=g7,v7=p7("toUpperCase"),b7=v7;const Rm=ot(b7);function St(n){return function(){return n}}const OI=Math.cos,Yf=Math.sin,ai=Math.sqrt,Xf=Math.PI,Mm=2*Xf,Hv=Math.PI,Uv=2*Hv,Jo=1e-6,y7=Uv-Jo;function RI(n){this._+=n[0];for(let e=1,t=n.length;e<t;++e)this._+=arguments[e]+n[e]}function w7(n){let e=Math.floor(n);if(!(e>=0))throw new Error(`invalid digits: ${n}`);if(e>15)return RI;const t=10**e;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*t)/t+r[i]}}class _7{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?RI:w7(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,r,i){this._append`Q${+e},${+t},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,t,r,i,o,s){this._append`C${+e},${+t},${+r},${+i},${this._x1=+o},${this._y1=+s}`}arcTo(e,t,r,i,o){if(e=+e,t=+t,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let s=this._x1,a=this._y1,l=r-e,c=i-t,u=s-e,d=a-t,f=u*u+d*d;if(this._x1===null)this._append`M${this._x1=e},${this._y1=t}`;else if(f>Jo)if(!(Math.abs(d*l-c*u)>Jo)||!o)this._append`L${this._x1=e},${this._y1=t}`;else{let h=r-s,m=i-a,g=l*l+c*c,p=h*h+m*m,b=Math.sqrt(g),y=Math.sqrt(f),C=o*Math.tan((Hv-Math.acos((g+f-p)/(2*b*y)))/2),A=C/y,w=C/b;Math.abs(A-1)>Jo&&this._append`L${e+A*u},${t+A*d}`,this._append`A${o},${o},0,0,${+(d*h>u*m)},${this._x1=e+w*l},${this._y1=t+w*c}`}}arc(e,t,r,i,o,s){if(e=+e,t=+t,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),l=r*Math.sin(i),c=e+a,u=t+l,d=1^s,f=s?i-o:o-i;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>Jo||Math.abs(this._y1-u)>Jo)&&this._append`L${c},${u}`,r&&(f<0&&(f=f%Uv+Uv),f>y7?this._append`A${r},${r},0,1,${d},${e-a},${t-l}A${r},${r},0,1,${d},${this._x1=c},${this._y1=u}`:f>Jo&&this._append`A${r},${r},0,${+(f>=Hv)},${d},${this._x1=e+r*Math.cos(o)},${this._y1=t+r*Math.sin(o)}`)}rect(e,t,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function gw(n){let e=3;return n.digits=function(t){if(!arguments.length)return e;if(t==null)e=null;else{const r=Math.floor(t);if(!(r>=0))throw new RangeError(`invalid digits: ${t}`);e=r}return n},()=>new _7(e)}function pw(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function MI(n){this._context=n}MI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;default:this._context.lineTo(n,e);break}}};function Dm(n){return new MI(n)}function DI(n){return n[0]}function BI(n){return n[1]}function NI(n,e){var t=St(!0),r=null,i=Dm,o=null,s=gw(a);n=typeof n=="function"?n:n===void 0?DI:St(n),e=typeof e=="function"?e:e===void 0?BI:St(e);function a(l){var c,u=(l=pw(l)).length,d,f=!1,h;for(r==null&&(o=i(h=s())),c=0;c<=u;++c)!(c<u&&t(d=l[c],c,l))===f&&((f=!f)?o.lineStart():o.lineEnd()),f&&o.point(+n(d,c,l),+e(d,c,l));if(h)return o=null,h+""||null}return a.x=function(l){return arguments.length?(n=typeof l=="function"?l:St(+l),a):n},a.y=function(l){return arguments.length?(e=typeof l=="function"?l:St(+l),a):e},a.defined=function(l){return arguments.length?(t=typeof l=="function"?l:St(!!l),a):t},a.curve=function(l){return arguments.length?(i=l,r!=null&&(o=i(r)),a):i},a.context=function(l){return arguments.length?(l==null?r=o=null:o=i(r=l),a):r},a}function zd(n,e,t){var r=null,i=St(!0),o=null,s=Dm,a=null,l=gw(c);n=typeof n=="function"?n:n===void 0?DI:St(+n),e=typeof e=="function"?e:St(e===void 0?0:+e),t=typeof t=="function"?t:t===void 0?BI:St(+t);function c(d){var f,h,m,g=(d=pw(d)).length,p,b=!1,y,C=new Array(g),A=new Array(g);for(o==null&&(a=s(y=l())),f=0;f<=g;++f){if(!(f<g&&i(p=d[f],f,d))===b)if(b=!b)h=f,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),m=f-1;m>=h;--m)a.point(C[m],A[m]);a.lineEnd(),a.areaEnd()}b&&(C[f]=+n(p,f,d),A[f]=+e(p,f,d),a.point(r?+r(p,f,d):C[f],t?+t(p,f,d):A[f]))}if(y)return a=null,y+""||null}function u(){return NI().defined(i).curve(s).context(o)}return c.x=function(d){return arguments.length?(n=typeof d=="function"?d:St(+d),r=null,c):n},c.x0=function(d){return arguments.length?(n=typeof d=="function"?d:St(+d),c):n},c.x1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:St(+d),c):r},c.y=function(d){return arguments.length?(e=typeof d=="function"?d:St(+d),t=null,c):e},c.y0=function(d){return arguments.length?(e=typeof d=="function"?d:St(+d),c):e},c.y1=function(d){return arguments.length?(t=d==null?null:typeof d=="function"?d:St(+d),c):t},c.lineX0=c.lineY0=function(){return u().x(n).y(e)},c.lineY1=function(){return u().x(n).y(t)},c.lineX1=function(){return u().x(r).y(e)},c.defined=function(d){return arguments.length?(i=typeof d=="function"?d:St(!!d),c):i},c.curve=function(d){return arguments.length?(s=d,o!=null&&(a=s(o)),c):s},c.context=function(d){return arguments.length?(d==null?o=a=null:a=s(o=d),c):o},c}class LI{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t);break}}this._x0=e,this._y0=t}}function C7(n){return new LI(n,!0)}function S7(n){return new LI(n,!1)}const vw={draw(n,e){const t=ai(e/Xf);n.moveTo(t,0),n.arc(0,0,t,0,Mm)}},x7={draw(n,e){const t=ai(e/5)/2;n.moveTo(-3*t,-t),n.lineTo(-t,-t),n.lineTo(-t,-3*t),n.lineTo(t,-3*t),n.lineTo(t,-t),n.lineTo(3*t,-t),n.lineTo(3*t,t),n.lineTo(t,t),n.lineTo(t,3*t),n.lineTo(-t,3*t),n.lineTo(-t,t),n.lineTo(-3*t,t),n.closePath()}},FI=ai(1/3),A7=FI*2,T7={draw(n,e){const t=ai(e/A7),r=t*FI;n.moveTo(0,-t),n.lineTo(r,0),n.lineTo(0,t),n.lineTo(-r,0),n.closePath()}},E7={draw(n,e){const t=ai(e),r=-t/2;n.rect(r,r,t,t)}},k7=.8908130915292852,$I=Yf(Xf/10)/Yf(7*Xf/10),P7=Yf(Mm/10)*$I,I7=-OI(Mm/10)*$I,O7={draw(n,e){const t=ai(e*k7),r=P7*t,i=I7*t;n.moveTo(0,-t),n.lineTo(r,i);for(let o=1;o<5;++o){const s=Mm*o/5,a=OI(s),l=Yf(s);n.lineTo(l*t,-a*t),n.lineTo(a*r-l*i,l*r+a*i)}n.closePath()}},hp=ai(3),R7={draw(n,e){const t=-ai(e/(hp*3));n.moveTo(0,t*2),n.lineTo(-hp*t,-t),n.lineTo(hp*t,-t),n.closePath()}},_r=-.5,Cr=ai(3)/2,Gv=1/ai(12),M7=(Gv/2+1)*3,D7={draw(n,e){const t=ai(e/M7),r=t/2,i=t*Gv,o=r,s=t*Gv+t,a=-o,l=s;n.moveTo(r,i),n.lineTo(o,s),n.lineTo(a,l),n.lineTo(_r*r-Cr*i,Cr*r+_r*i),n.lineTo(_r*o-Cr*s,Cr*o+_r*s),n.lineTo(_r*a-Cr*l,Cr*a+_r*l),n.lineTo(_r*r+Cr*i,_r*i-Cr*r),n.lineTo(_r*o+Cr*s,_r*s-Cr*o),n.lineTo(_r*a+Cr*l,_r*l-Cr*a),n.closePath()}};function B7(n,e){let t=null,r=gw(i);n=typeof n=="function"?n:St(n||vw),e=typeof e=="function"?e:St(e===void 0?64:+e);function i(){let o;if(t||(t=o=r()),n.apply(this,arguments).draw(t,+e.apply(this,arguments)),o)return t=null,o+""||null}return i.type=function(o){return arguments.length?(n=typeof o=="function"?o:St(o),i):n},i.size=function(o){return arguments.length?(e=typeof o=="function"?o:St(+o),i):e},i.context=function(o){return arguments.length?(t=o??null,i):t},i}function Zf(){}function Jf(n,e,t){n._context.bezierCurveTo((2*n._x0+n._x1)/3,(2*n._y0+n._y1)/3,(n._x0+2*n._x1)/3,(n._y0+2*n._y1)/3,(n._x0+4*n._x1+e)/6,(n._y0+4*n._y1+t)/6)}function VI(n){this._context=n}VI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Jf(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Jf(this,n,e);break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e}};function N7(n){return new VI(n)}function zI(n){this._context=n}zI.prototype={areaStart:Zf,areaEnd:Zf,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._x2=n,this._y2=e;break;case 1:this._point=2,this._x3=n,this._y3=e;break;case 2:this._point=3,this._x4=n,this._y4=e,this._context.moveTo((this._x0+4*this._x1+n)/6,(this._y0+4*this._y1+e)/6);break;default:Jf(this,n,e);break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e}};function L7(n){return new zI(n)}function jI(n){this._context=n}jI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var t=(this._x0+4*this._x1+n)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 3:this._point=4;default:Jf(this,n,e);break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e}};function F7(n){return new jI(n)}function WI(n){this._context=n}WI.prototype={areaStart:Zf,areaEnd:Zf,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(n,e){n=+n,e=+e,this._point?this._context.lineTo(n,e):(this._point=1,this._context.moveTo(n,e))}};function $7(n){return new WI(n)}function B1(n){return n<0?-1:1}function N1(n,e,t){var r=n._x1-n._x0,i=e-n._x1,o=(n._y1-n._y0)/(r||i<0&&-0),s=(t-n._y1)/(i||r<0&&-0),a=(o*i+s*r)/(r+i);return(B1(o)+B1(s))*Math.min(Math.abs(o),Math.abs(s),.5*Math.abs(a))||0}function L1(n,e){var t=n._x1-n._x0;return t?(3*(n._y1-n._y0)/t-e)/2:e}function mp(n,e,t){var r=n._x0,i=n._y0,o=n._x1,s=n._y1,a=(o-r)/3;n._context.bezierCurveTo(r+a,i+a*e,o-a,s-a*t,o,s)}function Qf(n){this._context=n}Qf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:mp(this,this._t0,L1(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){var t=NaN;if(n=+n,e=+e,!(n===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;break;case 2:this._point=3,mp(this,L1(this,t=N1(this,n,e)),t);break;default:mp(this,this._t0,t=N1(this,n,e));break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e,this._t0=t}}};function HI(n){this._context=new UI(n)}(HI.prototype=Object.create(Qf.prototype)).point=function(n,e){Qf.prototype.point.call(this,e,n)};function UI(n){this._context=n}UI.prototype={moveTo:function(n,e){this._context.moveTo(e,n)},closePath:function(){this._context.closePath()},lineTo:function(n,e){this._context.lineTo(e,n)},bezierCurveTo:function(n,e,t,r,i,o){this._context.bezierCurveTo(e,n,r,t,o,i)}};function V7(n){return new Qf(n)}function z7(n){return new HI(n)}function GI(n){this._context=n}GI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var n=this._x,e=this._y,t=n.length;if(t)if(this._line?this._context.lineTo(n[0],e[0]):this._context.moveTo(n[0],e[0]),t===2)this._context.lineTo(n[1],e[1]);else for(var r=F1(n),i=F1(e),o=0,s=1;s<t;++o,++s)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],n[s],e[s]);(this._line||this._line!==0&&t===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(n,e){this._x.push(+n),this._y.push(+e)}};function F1(n){var e,t=n.length-1,r,i=new Array(t),o=new Array(t),s=new Array(t);for(i[0]=0,o[0]=2,s[0]=n[0]+2*n[1],e=1;e<t-1;++e)i[e]=1,o[e]=4,s[e]=4*n[e]+2*n[e+1];for(i[t-1]=2,o[t-1]=7,s[t-1]=8*n[t-1]+n[t],e=1;e<t;++e)r=i[e]/o[e-1],o[e]-=r,s[e]-=r*s[e-1];for(i[t-1]=s[t-1]/o[t-1],e=t-2;e>=0;--e)i[e]=(s[e]-i[e+1])/o[e];for(o[t-1]=(n[t]+i[t-1])/2,e=0;e<t-1;++e)o[e]=2*n[e+1]-i[e+1];return[i,o]}function j7(n){return new GI(n)}function Bm(n,e){this._context=n,this._t=e}Bm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(n,e);else{var t=this._x*(1-this._t)+n*this._t;this._context.lineTo(t,this._y),this._context.lineTo(t,e)}break}}this._x=n,this._y=e}};function W7(n){return new Bm(n,.5)}function H7(n){return new Bm(n,0)}function U7(n){return new Bm(n,1)}function ka(n,e){if((s=n.length)>1)for(var t=1,r,i,o=n[e[0]],s,a=o.length;t<s;++t)for(i=o,o=n[e[t]],r=0;r<a;++r)o[r][1]+=o[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function qv(n){for(var e=n.length,t=new Array(e);--e>=0;)t[e]=e;return t}function G7(n,e){return n[e]}function q7(n){const e=[];return e.key=n,e}function K7(){var n=St([]),e=qv,t=ka,r=G7;function i(o){var s=Array.from(n.apply(this,arguments),q7),a,l=s.length,c=-1,u;for(const d of o)for(a=0,++c;a<l;++a)(s[a][c]=[0,+r(d,s[a].key,c,o)]).data=d;for(a=0,u=pw(e(s));a<l;++a)s[u[a]].index=a;return t(s,u),s}return i.keys=function(o){return arguments.length?(n=typeof o=="function"?o:St(Array.from(o)),i):n},i.value=function(o){return arguments.length?(r=typeof o=="function"?o:St(+o),i):r},i.order=function(o){return arguments.length?(e=o==null?qv:typeof o=="function"?o:St(Array.from(o)),i):e},i.offset=function(o){return arguments.length?(t=o??ka,i):t},i}function Y7(n,e){if((r=n.length)>0){for(var t,r,i=0,o=n[0].length,s;i<o;++i){for(s=t=0;t<r;++t)s+=n[t][i][1]||0;if(s)for(t=0;t<r;++t)n[t][i][1]/=s}ka(n,e)}}function X7(n,e){if((i=n.length)>0){for(var t=0,r=n[e[0]],i,o=r.length;t<o;++t){for(var s=0,a=0;s<i;++s)a+=n[s][t][1]||0;r[t][1]+=r[t][0]=-a/2}ka(n,e)}}function Z7(n,e){if(!(!((s=n.length)>0)||!((o=(i=n[e[0]]).length)>0))){for(var t=0,r=1,i,o,s;r<o;++r){for(var a=0,l=0,c=0;a<s;++a){for(var u=n[e[a]],d=u[r][1]||0,f=u[r-1][1]||0,h=(d-f)/2,m=0;m<a;++m){var g=n[e[m]],p=g[r][1]||0,b=g[r-1][1]||0;h+=p-b}l+=d,c+=h*d}i[r-1][1]+=i[r-1][0]=t,l&&(t-=c/l)}i[r-1][1]+=i[r-1][0]=t,ka(n,e)}}function Vc(n){"@babel/helpers - typeof";return Vc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vc(n)}var J7=["type","size","sizeType"];function Kv(){return Kv=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Kv.apply(this,arguments)}function $1(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function V1(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?$1(Object(t),!0).forEach(function(r){Q7(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):$1(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Q7(n,e,t){return e=ej(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function ej(n){var e=tj(n,"string");return Vc(e)=="symbol"?e:e+""}function tj(n,e){if(Vc(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Vc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function nj(n,e){if(n==null)return{};var t=rj(n,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function rj(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}var qI={symbolCircle:vw,symbolCross:x7,symbolDiamond:T7,symbolSquare:E7,symbolStar:O7,symbolTriangle:R7,symbolWye:D7},ij=Math.PI/180,oj=function(e){var t="symbol".concat(Rm(e));return qI[t]||vw},sj=function(e,t,r){if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*ij;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},aj=function(e,t){qI["symbol".concat(Rm(e))]=t},bw=function(e){var t=e.type,r=t===void 0?"circle":t,i=e.size,o=i===void 0?64:i,s=e.sizeType,a=s===void 0?"area":s,l=nj(e,J7),c=V1(V1({},l),{},{type:r,size:o,sizeType:a}),u=function(){var p=oj(r),b=B7().type(p).size(sj(o,a,r));return b()},d=c.className,f=c.cx,h=c.cy,m=He(c,!0);return f===+f&&h===+h&&o===+o?O.createElement("path",Kv({},m,{className:rt("recharts-symbols",d),transform:"translate(".concat(f,", ").concat(h,")"),d:u()})):null};bw.registerSymbol=aj;function Pa(n){"@babel/helpers - typeof";return Pa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pa(n)}function Yv(){return Yv=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Yv.apply(this,arguments)}function z1(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function lj(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?z1(Object(t),!0).forEach(function(r){zc(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):z1(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function cj(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function uj(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,YI(r.key),r)}}function dj(n,e,t){return e&&uj(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function fj(n,e,t){return e=eh(e),hj(n,KI()?Reflect.construct(e,t||[],eh(n).constructor):e.apply(n,t))}function hj(n,e){if(e&&(Pa(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mj(n)}function mj(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function KI(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(KI=function(){return!!n})()}function eh(n){return eh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},eh(n)}function gj(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&Xv(n,e)}function Xv(n,e){return Xv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Xv(n,e)}function zc(n,e,t){return e=YI(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function YI(n){var e=pj(n,"string");return Pa(e)=="symbol"?e:e+""}function pj(n,e){if(Pa(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Pa(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var Wr=32,yw=function(n){function e(){return cj(this,e),fj(this,e,arguments)}return gj(e,n),dj(e,[{key:"renderIcon",value:function(r){var i=this.props.inactiveColor,o=Wr/2,s=Wr/6,a=Wr/3,l=r.inactive?i:r.color;if(r.type==="plainline")return O.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:o,x2:Wr,y2:o,className:"recharts-legend-icon"});if(r.type==="line")return O.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(o,"h").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*a,",").concat(o,`
            H`).concat(Wr,"M").concat(2*a,",").concat(o,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(a,",").concat(o),className:"recharts-legend-icon"});if(r.type==="rect")return O.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(Wr/8,"h").concat(Wr,"v").concat(Wr*3/4,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(O.isValidElement(r.legendIcon)){var c=lj({},r);return delete c.legendIcon,O.cloneElement(r.legendIcon,c)}return O.createElement(bw,{fill:l,cx:o,cy:o,size:Wr,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,i=this.props,o=i.payload,s=i.iconSize,a=i.layout,l=i.formatter,c=i.inactiveColor,u={x:0,y:0,width:Wr,height:Wr},d={display:a==="horizontal"?"inline-block":"block",marginRight:10},f={display:"inline-block",verticalAlign:"middle",marginRight:4};return o.map(function(h,m){var g=h.formatter||l,p=rt(zc(zc({"recharts-legend-item":!0},"legend-item-".concat(m),!0),"inactive",h.inactive));if(h.type==="none")return null;var b=ze(h.value)?null:h.value;us(!ze(h.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var y=h.inactive?c:h.color;return O.createElement("li",Yv({className:p,style:d,key:"legend-item-".concat(m)},Kf(r.props,h,m)),O.createElement(Vv,{width:s,height:s,viewBox:u,style:f},r.renderIcon(h)),O.createElement("span",{className:"recharts-legend-item-text",style:{color:y}},g?g(b,h,m):b))})}},{key:"render",value:function(){var r=this.props,i=r.payload,o=r.layout,s=r.align;if(!i||!i.length)return null;var a={padding:0,margin:0,textAlign:o==="horizontal"?s:"left"};return O.createElement("ul",{className:"recharts-default-legend",style:a},this.renderItems())}}])}(R.PureComponent);zc(yw,"displayName","Legend");zc(yw,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var vj=Pm;function bj(){this.__data__=new vj,this.size=0}var yj=bj;function wj(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}var _j=wj;function Cj(n){return this.__data__.get(n)}var Sj=Cj;function xj(n){return this.__data__.has(n)}var Aj=xj,Tj=Pm,Ej=lw,kj=cw,Pj=200;function Ij(n,e){var t=this.__data__;if(t instanceof Tj){var r=t.__data__;if(!Ej||r.length<Pj-1)return r.push([n,e]),this.size=++t.size,this;t=this.__data__=new kj(r)}return t.set(n,e),this.size=t.size,this}var Oj=Ij,Rj=Pm,Mj=yj,Dj=_j,Bj=Sj,Nj=Aj,Lj=Oj;function vl(n){var e=this.__data__=new Rj(n);this.size=e.size}vl.prototype.clear=Mj;vl.prototype.delete=Dj;vl.prototype.get=Bj;vl.prototype.has=Nj;vl.prototype.set=Lj;var XI=vl,Fj="__lodash_hash_undefined__";function $j(n){return this.__data__.set(n,Fj),this}var Vj=$j;function zj(n){return this.__data__.has(n)}var jj=zj,Wj=cw,Hj=Vj,Uj=jj;function th(n){var e=-1,t=n==null?0:n.length;for(this.__data__=new Wj;++e<t;)this.add(n[e])}th.prototype.add=th.prototype.push=Hj;th.prototype.has=Uj;var ZI=th;function Gj(n,e){for(var t=-1,r=n==null?0:n.length;++t<r;)if(e(n[t],t,n))return!0;return!1}var JI=Gj;function qj(n,e){return n.has(e)}var QI=qj,Kj=ZI,Yj=JI,Xj=QI,Zj=1,Jj=2;function Qj(n,e,t,r,i,o){var s=t&Zj,a=n.length,l=e.length;if(a!=l&&!(s&&l>a))return!1;var c=o.get(n),u=o.get(e);if(c&&u)return c==e&&u==n;var d=-1,f=!0,h=t&Jj?new Kj:void 0;for(o.set(n,e),o.set(e,n);++d<a;){var m=n[d],g=e[d];if(r)var p=s?r(g,m,d,e,n,o):r(m,g,d,n,e,o);if(p!==void 0){if(p)continue;f=!1;break}if(h){if(!Yj(e,function(b,y){if(!Xj(h,y)&&(m===b||i(m,b,t,r,o)))return h.push(y)})){f=!1;break}}else if(!(m===g||i(m,g,t,r,o))){f=!1;break}}return o.delete(n),o.delete(e),f}var eO=Qj,e6=Ei,t6=e6.Uint8Array,n6=t6;function r6(n){var e=-1,t=Array(n.size);return n.forEach(function(r,i){t[++e]=[i,r]}),t}var i6=r6;function o6(n){var e=-1,t=Array(n.size);return n.forEach(function(r){t[++e]=r}),t}var ww=o6,j1=Ku,W1=n6,s6=aw,a6=eO,l6=i6,c6=ww,u6=1,d6=2,f6="[object Boolean]",h6="[object Date]",m6="[object Error]",g6="[object Map]",p6="[object Number]",v6="[object RegExp]",b6="[object Set]",y6="[object String]",w6="[object Symbol]",_6="[object ArrayBuffer]",C6="[object DataView]",H1=j1?j1.prototype:void 0,gp=H1?H1.valueOf:void 0;function S6(n,e,t,r,i,o,s){switch(t){case C6:if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case _6:return!(n.byteLength!=e.byteLength||!o(new W1(n),new W1(e)));case f6:case h6:case p6:return s6(+n,+e);case m6:return n.name==e.name&&n.message==e.message;case v6:case y6:return n==e+"";case g6:var a=l6;case b6:var l=r&u6;if(a||(a=c6),n.size!=e.size&&!l)return!1;var c=s.get(n);if(c)return c==e;r|=d6,s.set(n,e);var u=a6(a(n),a(e),r,i,o,s);return s.delete(n),u;case w6:if(gp)return gp.call(n)==gp.call(e)}return!1}var x6=S6;function A6(n,e){for(var t=-1,r=e.length,i=n.length;++t<r;)n[i+t]=e[t];return n}var tO=A6,T6=tO,E6=tr;function k6(n,e,t){var r=e(n);return E6(n)?r:T6(r,t(n))}var P6=k6;function I6(n,e){for(var t=-1,r=n==null?0:n.length,i=0,o=[];++t<r;){var s=n[t];e(s,t,n)&&(o[i++]=s)}return o}var O6=I6;function R6(){return[]}var M6=R6,D6=O6,B6=M6,N6=Object.prototype,L6=N6.propertyIsEnumerable,U1=Object.getOwnPropertySymbols,F6=U1?function(n){return n==null?[]:(n=Object(n),D6(U1(n),function(e){return L6.call(n,e)}))}:B6,$6=F6;function V6(n,e){for(var t=-1,r=Array(n);++t<n;)r[t]=e(t);return r}var z6=V6,j6=no,W6=ro,H6="[object Arguments]";function U6(n){return W6(n)&&j6(n)==H6}var G6=U6,G1=G6,q6=ro,nO=Object.prototype,K6=nO.hasOwnProperty,Y6=nO.propertyIsEnumerable,X6=G1(function(){return arguments}())?G1:function(n){return q6(n)&&K6.call(n,"callee")&&!Y6.call(n,"callee")},_w=X6,nh={exports:{}};function Z6(){return!1}var J6=Z6;nh.exports;(function(n,e){var t=Ei,r=J6,i=e&&!e.nodeType&&e,o=i&&!0&&n&&!n.nodeType&&n,s=o&&o.exports===i,a=s?t.Buffer:void 0,l=a?a.isBuffer:void 0,c=l||r;n.exports=c})(nh,nh.exports);var rO=nh.exports,Q6=9007199254740991,eW=/^(?:0|[1-9]\d*)$/;function tW(n,e){var t=typeof n;return e=e??Q6,!!e&&(t=="number"||t!="symbol"&&eW.test(n))&&n>-1&&n%1==0&&n<e}var Cw=tW,nW=9007199254740991;function rW(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=nW}var Sw=rW,iW=no,oW=Sw,sW=ro,aW="[object Arguments]",lW="[object Array]",cW="[object Boolean]",uW="[object Date]",dW="[object Error]",fW="[object Function]",hW="[object Map]",mW="[object Number]",gW="[object Object]",pW="[object RegExp]",vW="[object Set]",bW="[object String]",yW="[object WeakMap]",wW="[object ArrayBuffer]",_W="[object DataView]",CW="[object Float32Array]",SW="[object Float64Array]",xW="[object Int8Array]",AW="[object Int16Array]",TW="[object Int32Array]",EW="[object Uint8Array]",kW="[object Uint8ClampedArray]",PW="[object Uint16Array]",IW="[object Uint32Array]",At={};At[CW]=At[SW]=At[xW]=At[AW]=At[TW]=At[EW]=At[kW]=At[PW]=At[IW]=!0;At[aW]=At[lW]=At[wW]=At[cW]=At[_W]=At[uW]=At[dW]=At[fW]=At[hW]=At[mW]=At[gW]=At[pW]=At[vW]=At[bW]=At[yW]=!1;function OW(n){return sW(n)&&oW(n.length)&&!!At[iW(n)]}var RW=OW;function MW(n){return function(e){return n(e)}}var iO=MW,rh={exports:{}};rh.exports;(function(n,e){var t=mI,r=e&&!e.nodeType&&e,i=r&&!0&&n&&!n.nodeType&&n,o=i&&i.exports===r,s=o&&t.process,a=function(){try{var l=i&&i.require&&i.require("util").types;return l||s&&s.binding&&s.binding("util")}catch{}}();n.exports=a})(rh,rh.exports);var DW=rh.exports,BW=RW,NW=iO,q1=DW,K1=q1&&q1.isTypedArray,LW=K1?NW(K1):BW,oO=LW,FW=z6,$W=_w,VW=tr,zW=rO,jW=Cw,WW=oO,HW=Object.prototype,UW=HW.hasOwnProperty;function GW(n,e){var t=VW(n),r=!t&&$W(n),i=!t&&!r&&zW(n),o=!t&&!r&&!i&&WW(n),s=t||r||i||o,a=s?FW(n.length,String):[],l=a.length;for(var c in n)(e||UW.call(n,c))&&!(s&&(c=="length"||i&&(c=="offset"||c=="parent")||o&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||jW(c,l)))&&a.push(c);return a}var qW=GW,KW=Object.prototype;function YW(n){var e=n&&n.constructor,t=typeof e=="function"&&e.prototype||KW;return n===t}var XW=YW;function ZW(n,e){return function(t){return n(e(t))}}var sO=ZW,JW=sO,QW=JW(Object.keys,Object),e8=QW,t8=XW,n8=e8,r8=Object.prototype,i8=r8.hasOwnProperty;function o8(n){if(!t8(n))return n8(n);var e=[];for(var t in Object(n))i8.call(n,t)&&t!="constructor"&&e.push(t);return e}var s8=o8,a8=sw,l8=Sw;function c8(n){return n!=null&&l8(n.length)&&!a8(n)}var Nm=c8,u8=qW,d8=s8,f8=Nm;function h8(n){return f8(n)?u8(n):d8(n)}var xw=h8,m8=P6,g8=$6,p8=xw;function v8(n){return m8(n,p8,g8)}var b8=v8,Y1=b8,y8=1,w8=Object.prototype,_8=w8.hasOwnProperty;function C8(n,e,t,r,i,o){var s=t&y8,a=Y1(n),l=a.length,c=Y1(e),u=c.length;if(l!=u&&!s)return!1;for(var d=l;d--;){var f=a[d];if(!(s?f in e:_8.call(e,f)))return!1}var h=o.get(n),m=o.get(e);if(h&&m)return h==e&&m==n;var g=!0;o.set(n,e),o.set(e,n);for(var p=s;++d<l;){f=a[d];var b=n[f],y=e[f];if(r)var C=s?r(y,b,f,e,n,o):r(b,y,f,n,e,o);if(!(C===void 0?b===y||i(b,y,t,r,o):C)){g=!1;break}p||(p=f=="constructor")}if(g&&!p){var A=n.constructor,w=e.constructor;A!=w&&"constructor"in n&&"constructor"in e&&!(typeof A=="function"&&A instanceof A&&typeof w=="function"&&w instanceof w)&&(g=!1)}return o.delete(n),o.delete(e),g}var S8=C8,x8=ks,A8=Ei,T8=x8(A8,"DataView"),E8=T8,k8=ks,P8=Ei,I8=k8(P8,"Promise"),O8=I8,R8=ks,M8=Ei,D8=R8(M8,"Set"),aO=D8,B8=ks,N8=Ei,L8=B8(N8,"WeakMap"),F8=L8,Zv=E8,Jv=lw,Qv=O8,eb=aO,tb=F8,lO=no,bl=pI,X1="[object Map]",$8="[object Object]",Z1="[object Promise]",J1="[object Set]",Q1="[object WeakMap]",eC="[object DataView]",V8=bl(Zv),z8=bl(Jv),j8=bl(Qv),W8=bl(eb),H8=bl(tb),Qo=lO;(Zv&&Qo(new Zv(new ArrayBuffer(1)))!=eC||Jv&&Qo(new Jv)!=X1||Qv&&Qo(Qv.resolve())!=Z1||eb&&Qo(new eb)!=J1||tb&&Qo(new tb)!=Q1)&&(Qo=function(n){var e=lO(n),t=e==$8?n.constructor:void 0,r=t?bl(t):"";if(r)switch(r){case V8:return eC;case z8:return X1;case j8:return Z1;case W8:return J1;case H8:return Q1}return e});var U8=Qo,pp=XI,G8=eO,q8=x6,K8=S8,tC=U8,nC=tr,rC=rO,Y8=oO,X8=1,iC="[object Arguments]",oC="[object Array]",jd="[object Object]",Z8=Object.prototype,sC=Z8.hasOwnProperty;function J8(n,e,t,r,i,o){var s=nC(n),a=nC(e),l=s?oC:tC(n),c=a?oC:tC(e);l=l==iC?jd:l,c=c==iC?jd:c;var u=l==jd,d=c==jd,f=l==c;if(f&&rC(n)){if(!rC(e))return!1;s=!0,u=!1}if(f&&!u)return o||(o=new pp),s||Y8(n)?G8(n,e,t,r,i,o):q8(n,e,l,t,r,i,o);if(!(t&X8)){var h=u&&sC.call(n,"__wrapped__"),m=d&&sC.call(e,"__wrapped__");if(h||m){var g=h?n.value():n,p=m?e.value():e;return o||(o=new pp),i(g,p,t,r,o)}}return f?(o||(o=new pp),K8(n,e,t,r,i,o)):!1}var Q8=J8,eH=Q8,aC=ro;function cO(n,e,t,r,i){return n===e?!0:n==null||e==null||!aC(n)&&!aC(e)?n!==n&&e!==e:eH(n,e,t,r,cO,i)}var Aw=cO,tH=XI,nH=Aw,rH=1,iH=2;function oH(n,e,t,r){var i=t.length,o=i,s=!r;if(n==null)return!o;for(n=Object(n);i--;){var a=t[i];if(s&&a[2]?a[1]!==n[a[0]]:!(a[0]in n))return!1}for(;++i<o;){a=t[i];var l=a[0],c=n[l],u=a[1];if(s&&a[2]){if(c===void 0&&!(l in n))return!1}else{var d=new tH;if(r)var f=r(c,u,l,n,e,d);if(!(f===void 0?nH(u,c,rH|iH,r,d):f))return!1}}return!0}var sH=oH,aH=Do;function lH(n){return n===n&&!aH(n)}var uO=lH,cH=uO,uH=xw;function dH(n){for(var e=uH(n),t=e.length;t--;){var r=e[t],i=n[r];e[t]=[r,i,cH(i)]}return e}var fH=dH;function hH(n,e){return function(t){return t==null?!1:t[n]===e&&(e!==void 0||n in Object(t))}}var dO=hH,mH=sH,gH=fH,pH=dO;function vH(n){var e=gH(n);return e.length==1&&e[0][2]?pH(e[0][0],e[0][1]):function(t){return t===n||mH(t,n,e)}}var bH=vH;function yH(n,e){return n!=null&&e in Object(n)}var wH=yH,_H=_I,CH=_w,SH=tr,xH=Cw,AH=Sw,TH=Om;function EH(n,e,t){e=_H(e,n);for(var r=-1,i=e.length,o=!1;++r<i;){var s=TH(e[r]);if(!(o=n!=null&&t(n,s)))break;n=n[s]}return o||++r!=i?o:(i=n==null?0:n.length,!!i&&AH(i)&&xH(s,i)&&(SH(n)||CH(n)))}var kH=EH,PH=wH,IH=kH;function OH(n,e){return n!=null&&IH(n,e,PH)}var RH=OH,MH=Aw,DH=CI,BH=RH,NH=ow,LH=uO,FH=dO,$H=Om,VH=1,zH=2;function jH(n,e){return NH(n)&&LH(e)?FH($H(n),e):function(t){var r=DH(t,n);return r===void 0&&r===e?BH(t,n):MH(e,r,VH|zH)}}var WH=jH;function HH(n){return n}var yl=HH;function UH(n){return function(e){return e==null?void 0:e[n]}}var GH=UH,qH=fw;function KH(n){return function(e){return qH(e,n)}}var YH=KH,XH=GH,ZH=YH,JH=ow,QH=Om;function eU(n){return JH(n)?XH(QH(n)):ZH(n)}var tU=eU,nU=bH,rU=WH,iU=yl,oU=tr,sU=tU;function aU(n){return typeof n=="function"?n:n==null?iU:typeof n=="object"?oU(n)?rU(n[0],n[1]):nU(n):sU(n)}var wl=aU;function lU(n,e,t,r){for(var i=n.length,o=t+(r?1:-1);r?o--:++o<i;)if(e(n[o],o,n))return o;return-1}var cU=lU;function uU(n){return n!==n}var dU=uU;function fU(n,e,t){for(var r=t-1,i=n.length;++r<i;)if(n[r]===e)return r;return-1}var hU=fU,mU=cU,gU=dU,pU=hU;function vU(n,e,t){return e===e?pU(n,e,t):mU(n,gU,t)}var bU=vU,yU=bU;function wU(n,e){var t=n==null?0:n.length;return!!t&&yU(n,e,0)>-1}var _U=wU;function CU(n,e,t){for(var r=-1,i=n==null?0:n.length;++r<i;)if(t(e,n[r]))return!0;return!1}var SU=CU;function xU(){}var AU=xU,vp=aO,TU=AU,EU=ww,kU=1/0,PU=vp&&1/EU(new vp([,-0]))[1]==kU?function(n){return new vp(n)}:TU,IU=PU,OU=ZI,RU=_U,MU=SU,DU=QI,BU=IU,NU=ww,LU=200;function FU(n,e,t){var r=-1,i=RU,o=n.length,s=!0,a=[],l=a;if(t)s=!1,i=MU;else if(o>=LU){var c=e?null:BU(n);if(c)return NU(c);s=!1,i=DU,l=new OU}else l=e?[]:a;e:for(;++r<o;){var u=n[r],d=e?e(u):u;if(u=t||u!==0?u:0,s&&d===d){for(var f=l.length;f--;)if(l[f]===d)continue e;e&&l.push(d),a.push(u)}else i(l,d,t)||(l!==a&&l.push(d),a.push(u))}return a}var $U=FU,VU=wl,zU=$U;function jU(n,e){return n&&n.length?zU(n,VU(e)):[]}var WU=jU;const lC=ot(WU);function fO(n,e,t){return e===!0?lC(n,t):ze(e)?lC(n,e):n}function Ia(n){"@babel/helpers - typeof";return Ia=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ia(n)}var HU=["ref"];function cC(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Ri(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?cC(Object(t),!0).forEach(function(r){Lm(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):cC(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function UU(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function uC(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,mO(r.key),r)}}function GU(n,e,t){return e&&uC(n.prototype,e),t&&uC(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function qU(n,e,t){return e=ih(e),KU(n,hO()?Reflect.construct(e,t||[],ih(n).constructor):e.apply(n,t))}function KU(n,e){if(e&&(Ia(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return YU(n)}function YU(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function hO(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hO=function(){return!!n})()}function ih(n){return ih=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ih(n)}function XU(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&nb(n,e)}function nb(n,e){return nb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},nb(n,e)}function Lm(n,e,t){return e=mO(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function mO(n){var e=ZU(n,"string");return Ia(e)=="symbol"?e:e+""}function ZU(n,e){if(Ia(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Ia(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function JU(n,e){if(n==null)return{};var t=QU(n,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function QU(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function e9(n){return n.value}function t9(n,e){if(O.isValidElement(n))return O.cloneElement(n,e);if(typeof n=="function")return O.createElement(n,e);e.ref;var t=JU(e,HU);return O.createElement(yw,t)}var dC=1,wa=function(n){function e(){var t;UU(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=qU(this,e,[].concat(i)),Lm(t,"lastBoundingBox",{width:-1,height:-1}),t}return XU(e,n),GU(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>dC||Math.abs(i.height-this.lastBoundingBox.height)>dC)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,r&&r(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Ri({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var i=this.props,o=i.layout,s=i.align,a=i.verticalAlign,l=i.margin,c=i.chartWidth,u=i.chartHeight,d,f;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(s==="center"&&o==="vertical"){var h=this.getBBoxSnapshot();d={left:((c||0)-h.width)/2}}else d=s==="right"?{right:l&&l.right||0}:{left:l&&l.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(a==="middle"){var m=this.getBBoxSnapshot();f={top:((u||0)-m.height)/2}}else f=a==="bottom"?{bottom:l&&l.bottom||0}:{top:l&&l.top||0};return Ri(Ri({},d),f)}},{key:"render",value:function(){var r=this,i=this.props,o=i.content,s=i.width,a=i.height,l=i.wrapperStyle,c=i.payloadUniqBy,u=i.payload,d=Ri(Ri({position:"absolute",width:s||"auto",height:a||"auto"},this.getDefaultPosition(l)),l);return O.createElement("div",{className:"recharts-legend-wrapper",style:d,ref:function(h){r.wrapperNode=h}},t9(o,Ri(Ri({},this.props),{},{payload:fO(u,c,e9)})))}}],[{key:"getWithHeight",value:function(r,i){var o=Ri(Ri({},this.defaultProps),r.props),s=o.layout;return s==="vertical"&&fe(r.props.height)?{height:r.props.height}:s==="horizontal"?{width:r.props.width||i}:null}}])}(R.PureComponent);Lm(wa,"displayName","Legend");Lm(wa,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var fC=Ku,n9=_w,r9=tr,hC=fC?fC.isConcatSpreadable:void 0;function i9(n){return r9(n)||n9(n)||!!(hC&&n&&n[hC])}var o9=i9,s9=tO,a9=o9;function gO(n,e,t,r,i){var o=-1,s=n.length;for(t||(t=a9),i||(i=[]);++o<s;){var a=n[o];e>0&&t(a)?e>1?gO(a,e-1,t,r,i):s9(i,a):r||(i[i.length]=a)}return i}var pO=gO;function l9(n){return function(e,t,r){for(var i=-1,o=Object(e),s=r(e),a=s.length;a--;){var l=s[n?a:++i];if(t(o[l],l,o)===!1)break}return e}}var c9=l9,u9=c9,d9=u9(),f9=d9,h9=f9,m9=xw;function g9(n,e){return n&&h9(n,e,m9)}var vO=g9,p9=Nm;function v9(n,e){return function(t,r){if(t==null)return t;if(!p9(t))return n(t,r);for(var i=t.length,o=e?i:-1,s=Object(t);(e?o--:++o<i)&&r(s[o],o,s)!==!1;);return t}}var b9=v9,y9=vO,w9=b9,_9=w9(y9),Tw=_9,C9=Tw,S9=Nm;function x9(n,e){var t=-1,r=S9(n)?Array(n.length):[];return C9(n,function(i,o,s){r[++t]=e(i,o,s)}),r}var bO=x9;function A9(n,e){var t=n.length;for(n.sort(e);t--;)n[t]=n[t].value;return n}var T9=A9,mC=dl;function E9(n,e){if(n!==e){var t=n!==void 0,r=n===null,i=n===n,o=mC(n),s=e!==void 0,a=e===null,l=e===e,c=mC(e);if(!a&&!c&&!o&&n>e||o&&s&&l&&!a&&!c||r&&s&&l||!t&&l||!i)return 1;if(!r&&!o&&!c&&n<e||c&&t&&i&&!r&&!o||a&&t&&i||!s&&i||!l)return-1}return 0}var k9=E9,P9=k9;function I9(n,e,t){for(var r=-1,i=n.criteria,o=e.criteria,s=i.length,a=t.length;++r<s;){var l=P9(i[r],o[r]);if(l){if(r>=a)return l;var c=t[r];return l*(c=="desc"?-1:1)}}return n.index-e.index}var O9=I9,bp=dw,R9=fw,M9=wl,D9=bO,B9=T9,N9=iO,L9=O9,F9=yl,$9=tr;function V9(n,e,t){e.length?e=bp(e,function(o){return $9(o)?function(s){return R9(s,o.length===1?o[0]:o)}:o}):e=[F9];var r=-1;e=bp(e,N9(M9));var i=D9(n,function(o,s,a){var l=bp(e,function(c){return c(o)});return{criteria:l,index:++r,value:o}});return B9(i,function(o,s){return L9(o,s,t)})}var z9=V9;function j9(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)}var W9=j9,H9=W9,gC=Math.max;function U9(n,e,t){return e=gC(e===void 0?n.length-1:e,0),function(){for(var r=arguments,i=-1,o=gC(r.length-e,0),s=Array(o);++i<o;)s[i]=r[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=r[i];return a[e]=t(s),H9(n,this,a)}}var G9=U9;function q9(n){return function(){return n}}var K9=q9,Y9=ks,X9=function(){try{var n=Y9(Object,"defineProperty");return n({},"",{}),n}catch{}}(),yO=X9,Z9=K9,pC=yO,J9=yl,Q9=pC?function(n,e){return pC(n,"toString",{configurable:!0,enumerable:!1,value:Z9(e),writable:!0})}:J9,eG=Q9,tG=800,nG=16,rG=Date.now;function iG(n){var e=0,t=0;return function(){var r=rG(),i=nG-(r-t);if(t=r,i>0){if(++e>=tG)return arguments[0]}else e=0;return n.apply(void 0,arguments)}}var oG=iG,sG=eG,aG=oG,lG=aG(sG),cG=lG,uG=yl,dG=G9,fG=cG;function hG(n,e){return fG(dG(n,e,uG),n+"")}var mG=hG,gG=aw,pG=Nm,vG=Cw,bG=Do;function yG(n,e,t){if(!bG(t))return!1;var r=typeof e;return(r=="number"?pG(t)&&vG(e,t.length):r=="string"&&e in t)?gG(t[e],n):!1}var Fm=yG,wG=pO,_G=z9,CG=mG,vC=Fm,SG=CG(function(n,e){if(n==null)return[];var t=e.length;return t>1&&vC(n,e[0],e[1])?e=[]:t>2&&vC(e[0],e[1],e[2])&&(e=[e[0]]),_G(n,wG(e,1),[])}),xG=SG;const Ew=ot(xG);function jc(n){"@babel/helpers - typeof";return jc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jc(n)}function rb(){return rb=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},rb.apply(this,arguments)}function AG(n,e){return PG(n)||kG(n,e)||EG(n,e)||TG()}function TG(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function EG(n,e){if(n){if(typeof n=="string")return bC(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return bC(n,e)}}function bC(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function kG(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,o,s,a=[],l=!0,c=!1;try{if(o=(t=t.call(n)).next,e!==0)for(;!(l=(r=o.call(t)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function PG(n){if(Array.isArray(n))return n}function yC(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function yp(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?yC(Object(t),!0).forEach(function(r){IG(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):yC(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function IG(n,e,t){return e=OG(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function OG(n){var e=RG(n,"string");return jc(e)=="symbol"?e:e+""}function RG(n,e){if(jc(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(jc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function MG(n){return Array.isArray(n)&&en(n[0])&&en(n[1])?n.join(" ~ "):n}var DG=function(e){var t=e.separator,r=t===void 0?" : ":t,i=e.contentStyle,o=i===void 0?{}:i,s=e.itemStyle,a=s===void 0?{}:s,l=e.labelStyle,c=l===void 0?{}:l,u=e.payload,d=e.formatter,f=e.itemSorter,h=e.wrapperClassName,m=e.labelClassName,g=e.label,p=e.labelFormatter,b=e.accessibilityLayer,y=b===void 0?!1:b,C=function(){if(u&&u.length){var k={padding:0,margin:0},I=(f?Ew(u,f):u).map(function(B,D){if(B.type==="none")return null;var F=yp({display:"block",paddingTop:4,paddingBottom:4,color:B.color||"#000"},a),L=B.formatter||d||MG,H=B.value,$=B.name,ne=H,Z=$;if(L&&ne!=null&&Z!=null){var G=L(H,$,B,D,u);if(Array.isArray(G)){var X=AG(G,2);ne=X[0],Z=X[1]}else ne=G}return O.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(D),style:F},en(Z)?O.createElement("span",{className:"recharts-tooltip-item-name"},Z):null,en(Z)?O.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,O.createElement("span",{className:"recharts-tooltip-item-value"},ne),O.createElement("span",{className:"recharts-tooltip-item-unit"},B.unit||""))});return O.createElement("ul",{className:"recharts-tooltip-item-list",style:k},I)}return null},A=yp({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},o),w=yp({margin:0},c),S=!Ke(g),_=S?g:"",v=rt("recharts-default-tooltip",h),x=rt("recharts-tooltip-label",m);S&&p&&u!==void 0&&u!==null&&(_=p(g,u));var T=y?{role:"status","aria-live":"assertive"}:{};return O.createElement("div",rb({className:v,style:A},T),O.createElement("p",{className:x,style:w},O.isValidElement(_)?_:"".concat(_)),C())};function Wc(n){"@babel/helpers - typeof";return Wc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wc(n)}function Wd(n,e,t){return e=BG(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function BG(n){var e=NG(n,"string");return Wc(e)=="symbol"?e:e+""}function NG(n,e){if(Wc(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Wc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var Wl="recharts-tooltip-wrapper",LG={visibility:"hidden"};function FG(n){var e=n.coordinate,t=n.translateX,r=n.translateY;return rt(Wl,Wd(Wd(Wd(Wd({},"".concat(Wl,"-right"),fe(t)&&e&&fe(e.x)&&t>=e.x),"".concat(Wl,"-left"),fe(t)&&e&&fe(e.x)&&t<e.x),"".concat(Wl,"-bottom"),fe(r)&&e&&fe(e.y)&&r>=e.y),"".concat(Wl,"-top"),fe(r)&&e&&fe(e.y)&&r<e.y))}function wC(n){var e=n.allowEscapeViewBox,t=n.coordinate,r=n.key,i=n.offsetTopLeft,o=n.position,s=n.reverseDirection,a=n.tooltipDimension,l=n.viewBox,c=n.viewBoxDimension;if(o&&fe(o[r]))return o[r];var u=t[r]-a-i,d=t[r]+i;if(e[r])return s[r]?u:d;if(s[r]){var f=u,h=l[r];return f<h?Math.max(d,l[r]):Math.max(u,l[r])}var m=d+a,g=l[r]+c;return m>g?Math.max(u,l[r]):Math.max(d,l[r])}function $G(n){var e=n.translateX,t=n.translateY,r=n.useTranslate3d;return{transform:r?"translate3d(".concat(e,"px, ").concat(t,"px, 0)"):"translate(".concat(e,"px, ").concat(t,"px)")}}function VG(n){var e=n.allowEscapeViewBox,t=n.coordinate,r=n.offsetTopLeft,i=n.position,o=n.reverseDirection,s=n.tooltipBox,a=n.useTranslate3d,l=n.viewBox,c,u,d;return s.height>0&&s.width>0&&t?(u=wC({allowEscapeViewBox:e,coordinate:t,key:"x",offsetTopLeft:r,position:i,reverseDirection:o,tooltipDimension:s.width,viewBox:l,viewBoxDimension:l.width}),d=wC({allowEscapeViewBox:e,coordinate:t,key:"y",offsetTopLeft:r,position:i,reverseDirection:o,tooltipDimension:s.height,viewBox:l,viewBoxDimension:l.height}),c=$G({translateX:u,translateY:d,useTranslate3d:a})):c=LG,{cssProperties:c,cssClasses:FG({translateX:u,translateY:d,coordinate:t})}}function Oa(n){"@babel/helpers - typeof";return Oa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oa(n)}function _C(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function CC(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?_C(Object(t),!0).forEach(function(r){ob(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):_C(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function zG(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function jG(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,_O(r.key),r)}}function WG(n,e,t){return e&&jG(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function HG(n,e,t){return e=oh(e),UG(n,wO()?Reflect.construct(e,t||[],oh(n).constructor):e.apply(n,t))}function UG(n,e){if(e&&(Oa(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return GG(n)}function GG(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function wO(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(wO=function(){return!!n})()}function oh(n){return oh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},oh(n)}function qG(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&ib(n,e)}function ib(n,e){return ib=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},ib(n,e)}function ob(n,e,t){return e=_O(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function _O(n){var e=KG(n,"string");return Oa(e)=="symbol"?e:e+""}function KG(n,e){if(Oa(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Oa(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var SC=1,YG=function(n){function e(){var t;zG(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=HG(this,e,[].concat(i)),ob(t,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),ob(t,"handleKeyDown",function(s){if(s.key==="Escape"){var a,l,c,u;t.setState({dismissed:!0,dismissedAtCoordinate:{x:(a=(l=t.props.coordinate)===null||l===void 0?void 0:l.x)!==null&&a!==void 0?a:0,y:(c=(u=t.props.coordinate)===null||u===void 0?void 0:u.y)!==null&&c!==void 0?c:0}})}}),t}return qG(e,n),WG(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>SC||Math.abs(r.height-this.state.lastBoundingBox.height)>SC)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,i=this.props,o=i.active,s=i.allowEscapeViewBox,a=i.animationDuration,l=i.animationEasing,c=i.children,u=i.coordinate,d=i.hasPayload,f=i.isAnimationActive,h=i.offset,m=i.position,g=i.reverseDirection,p=i.useTranslate3d,b=i.viewBox,y=i.wrapperStyle,C=VG({allowEscapeViewBox:s,coordinate:u,offsetTopLeft:h,position:m,reverseDirection:g,tooltipBox:this.state.lastBoundingBox,useTranslate3d:p,viewBox:b}),A=C.cssClasses,w=C.cssProperties,S=CC(CC({transition:f&&o?"transform ".concat(a,"ms ").concat(l):void 0},w),{},{pointerEvents:"none",visibility:!this.state.dismissed&&o&&d?"visible":"hidden",position:"absolute",top:0,left:0},y);return O.createElement("div",{tabIndex:-1,className:A,style:S,ref:function(v){r.wrapperNode=v}},c)}}])}(R.PureComponent),XG=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},_l={isSsr:XG()};function Ra(n){"@babel/helpers - typeof";return Ra=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ra(n)}function xC(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function AC(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?xC(Object(t),!0).forEach(function(r){kw(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):xC(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function ZG(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function JG(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,SO(r.key),r)}}function QG(n,e,t){return e&&JG(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function eq(n,e,t){return e=sh(e),tq(n,CO()?Reflect.construct(e,t||[],sh(n).constructor):e.apply(n,t))}function tq(n,e){if(e&&(Ra(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nq(n)}function nq(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function CO(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(CO=function(){return!!n})()}function sh(n){return sh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},sh(n)}function rq(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&sb(n,e)}function sb(n,e){return sb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},sb(n,e)}function kw(n,e,t){return e=SO(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function SO(n){var e=iq(n,"string");return Ra(e)=="symbol"?e:e+""}function iq(n,e){if(Ra(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Ra(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function oq(n){return n.dataKey}function sq(n,e){return O.isValidElement(n)?O.cloneElement(n,e):typeof n=="function"?O.createElement(n,e):O.createElement(DG,e)}var $i=function(n){function e(){return ZG(this,e),eq(this,e,arguments)}return rq(e,n),QG(e,[{key:"render",value:function(){var r=this,i=this.props,o=i.active,s=i.allowEscapeViewBox,a=i.animationDuration,l=i.animationEasing,c=i.content,u=i.coordinate,d=i.filterNull,f=i.isAnimationActive,h=i.offset,m=i.payload,g=i.payloadUniqBy,p=i.position,b=i.reverseDirection,y=i.useTranslate3d,C=i.viewBox,A=i.wrapperStyle,w=m??[];d&&w.length&&(w=fO(m.filter(function(_){return _.value!=null&&(_.hide!==!0||r.props.includeHidden)}),g,oq));var S=w.length>0;return O.createElement(YG,{allowEscapeViewBox:s,animationDuration:a,animationEasing:l,isAnimationActive:f,active:o,coordinate:u,hasPayload:S,offset:h,position:p,reverseDirection:b,useTranslate3d:y,viewBox:C,wrapperStyle:A},sq(c,AC(AC({},this.props),{},{payload:w})))}}])}(R.PureComponent);kw($i,"displayName","Tooltip");kw($i,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!_l.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var aq=Ei,lq=function(){return aq.Date.now()},cq=lq,uq=/\s/;function dq(n){for(var e=n.length;e--&&uq.test(n.charAt(e)););return e}var fq=dq,hq=fq,mq=/^\s+/;function gq(n){return n&&n.slice(0,hq(n)+1).replace(mq,"")}var pq=gq,vq=pq,TC=Do,bq=dl,EC=NaN,yq=/^[-+]0x[0-9a-f]+$/i,wq=/^0b[01]+$/i,_q=/^0o[0-7]+$/i,Cq=parseInt;function Sq(n){if(typeof n=="number")return n;if(bq(n))return EC;if(TC(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=TC(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=vq(n);var t=wq.test(n);return t||_q.test(n)?Cq(n.slice(2),t?2:8):yq.test(n)?EC:+n}var xO=Sq,xq=Do,wp=cq,kC=xO,Aq="Expected a function",Tq=Math.max,Eq=Math.min;function kq(n,e,t){var r,i,o,s,a,l,c=0,u=!1,d=!1,f=!0;if(typeof n!="function")throw new TypeError(Aq);e=kC(e)||0,xq(t)&&(u=!!t.leading,d="maxWait"in t,o=d?Tq(kC(t.maxWait)||0,e):o,f="trailing"in t?!!t.trailing:f);function h(S){var _=r,v=i;return r=i=void 0,c=S,s=n.apply(v,_),s}function m(S){return c=S,a=setTimeout(b,e),u?h(S):s}function g(S){var _=S-l,v=S-c,x=e-_;return d?Eq(x,o-v):x}function p(S){var _=S-l,v=S-c;return l===void 0||_>=e||_<0||d&&v>=o}function b(){var S=wp();if(p(S))return y(S);a=setTimeout(b,g(S))}function y(S){return a=void 0,f&&r?h(S):(r=i=void 0,s)}function C(){a!==void 0&&clearTimeout(a),c=0,r=l=i=a=void 0}function A(){return a===void 0?s:y(wp())}function w(){var S=wp(),_=p(S);if(r=arguments,i=this,l=S,_){if(a===void 0)return m(l);if(d)return clearTimeout(a),a=setTimeout(b,e),h(l)}return a===void 0&&(a=setTimeout(b,e)),s}return w.cancel=C,w.flush=A,w}var Pq=kq,Iq=Pq,Oq=Do,Rq="Expected a function";function Mq(n,e,t){var r=!0,i=!0;if(typeof n!="function")throw new TypeError(Rq);return Oq(t)&&(r="leading"in t?!!t.leading:r,i="trailing"in t?!!t.trailing:i),Iq(n,e,{leading:r,maxWait:e,trailing:i})}var Dq=Mq;const AO=ot(Dq);function Hc(n){"@babel/helpers - typeof";return Hc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hc(n)}function PC(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Hd(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?PC(Object(t),!0).forEach(function(r){Bq(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):PC(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Bq(n,e,t){return e=Nq(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Nq(n){var e=Lq(n,"string");return Hc(e)=="symbol"?e:e+""}function Lq(n,e){if(Hc(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Hc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Fq(n,e){return jq(n)||zq(n,e)||Vq(n,e)||$q()}function $q(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vq(n,e){if(n){if(typeof n=="string")return IC(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return IC(n,e)}}function IC(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function zq(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,o,s,a=[],l=!0,c=!1;try{if(o=(t=t.call(n)).next,e!==0)for(;!(l=(r=o.call(t)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function jq(n){if(Array.isArray(n))return n}var sIe=R.forwardRef(function(n,e){var t=n.aspect,r=n.initialDimension,i=r===void 0?{width:-1,height:-1}:r,o=n.width,s=o===void 0?"100%":o,a=n.height,l=a===void 0?"100%":a,c=n.minWidth,u=c===void 0?0:c,d=n.minHeight,f=n.maxHeight,h=n.children,m=n.debounce,g=m===void 0?0:m,p=n.id,b=n.className,y=n.onResize,C=n.style,A=C===void 0?{}:C,w=R.useRef(null),S=R.useRef();S.current=y,R.useImperativeHandle(e,function(){return Object.defineProperty(w.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),w.current},configurable:!0})});var _=R.useState({containerWidth:i.width,containerHeight:i.height}),v=Fq(_,2),x=v[0],T=v[1],E=R.useCallback(function(I,B){T(function(D){var F=Math.round(I),L=Math.round(B);return D.containerWidth===F&&D.containerHeight===L?D:{containerWidth:F,containerHeight:L}})},[]);R.useEffect(function(){var I=function($){var ne,Z=$[0].contentRect,G=Z.width,X=Z.height;E(G,X),(ne=S.current)===null||ne===void 0||ne.call(S,G,X)};g>0&&(I=AO(I,g,{trailing:!0,leading:!1}));var B=new ResizeObserver(I),D=w.current.getBoundingClientRect(),F=D.width,L=D.height;return E(F,L),B.observe(w.current),function(){B.disconnect()}},[E,g]);var k=R.useMemo(function(){var I=x.containerWidth,B=x.containerHeight;if(I<0||B<0)return null;us(rs(s)||rs(l),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,s,l),us(!t||t>0,"The aspect(%s) must be greater than zero.",t);var D=rs(s)?I:s,F=rs(l)?B:l;t&&t>0&&(D?F=D/t:F&&(D=F*t),f&&F>f&&(F=f)),us(D>0||F>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,D,F,s,l,u,d,t);var L=!Array.isArray(h)&&Ui(h.type).endsWith("Chart");return O.Children.map(h,function(H){return O.isValidElement(H)?R.cloneElement(H,Hd({width:D,height:F},L?{style:Hd({height:"100%",width:"100%",maxHeight:F,maxWidth:D},H.props.style)}:{})):H})},[t,h,l,f,d,u,x,s]);return O.createElement("div",{id:p?"".concat(p):void 0,className:rt("recharts-responsive-container",b),style:Hd(Hd({},A),{},{width:s,height:l,minWidth:u,minHeight:d,maxHeight:f}),ref:w},k)}),TO=function(e){return null};TO.displayName="Cell";function Uc(n){"@babel/helpers - typeof";return Uc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uc(n)}function OC(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function ab(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?OC(Object(t),!0).forEach(function(r){Wq(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):OC(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Wq(n,e,t){return e=Hq(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Hq(n){var e=Uq(n,"string");return Uc(e)=="symbol"?e:e+""}function Uq(n,e){if(Uc(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Uc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var Us={widthCache:{},cacheCount:0},Gq=2e3,qq={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},RC="recharts_measurement_span";function Kq(n){var e=ab({},n);return Object.keys(e).forEach(function(t){e[t]||delete e[t]}),e}var wc=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||_l.isSsr)return{width:0,height:0};var r=Kq(t),i=JSON.stringify({text:e,copyStyle:r});if(Us.widthCache[i])return Us.widthCache[i];try{var o=document.getElementById(RC);o||(o=document.createElement("span"),o.setAttribute("id",RC),o.setAttribute("aria-hidden","true"),document.body.appendChild(o));var s=ab(ab({},qq),r);Object.assign(o.style,s),o.textContent="".concat(e);var a=o.getBoundingClientRect(),l={width:a.width,height:a.height};return Us.widthCache[i]=l,++Us.cacheCount>Gq&&(Us.cacheCount=0,Us.widthCache={}),l}catch{return{width:0,height:0}}},Yq=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function Gc(n){"@babel/helpers - typeof";return Gc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gc(n)}function ah(n,e){return Qq(n)||Jq(n,e)||Zq(n,e)||Xq()}function Xq(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zq(n,e){if(n){if(typeof n=="string")return MC(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return MC(n,e)}}function MC(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Jq(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,o,s,a=[],l=!0,c=!1;try{if(o=(t=t.call(n)).next,e===0){if(Object(t)!==t)return;l=!1}else for(;!(l=(r=o.call(t)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function Qq(n){if(Array.isArray(n))return n}function eK(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function DC(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,nK(r.key),r)}}function tK(n,e,t){return e&&DC(n.prototype,e),t&&DC(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function nK(n){var e=rK(n,"string");return Gc(e)=="symbol"?e:e+""}function rK(n,e){if(Gc(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Gc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var BC=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,NC=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,iK=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,oK=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,EO={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},sK=Object.keys(EO),ha="NaN";function aK(n,e){return n*EO[e]}var Ud=function(){function n(e,t){eK(this,n),this.num=e,this.unit=t,this.num=e,this.unit=t,Number.isNaN(e)&&(this.unit=""),t!==""&&!iK.test(t)&&(this.num=NaN,this.unit=""),sK.includes(t)&&(this.num=aK(e,t),this.unit="px")}return tK(n,[{key:"add",value:function(t){return this.unit!==t.unit?new n(NaN,""):new n(this.num+t.num,this.unit)}},{key:"subtract",value:function(t){return this.unit!==t.unit?new n(NaN,""):new n(this.num-t.num,this.unit)}},{key:"multiply",value:function(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new n(NaN,""):new n(this.num*t.num,this.unit||t.unit)}},{key:"divide",value:function(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new n(NaN,""):new n(this.num/t.num,this.unit||t.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(t){var r,i=(r=oK.exec(t))!==null&&r!==void 0?r:[],o=ah(i,3),s=o[1],a=o[2];return new n(parseFloat(s),a??"")}}])}();function kO(n){if(n.includes(ha))return ha;for(var e=n;e.includes("*")||e.includes("/");){var t,r=(t=BC.exec(e))!==null&&t!==void 0?t:[],i=ah(r,4),o=i[1],s=i[2],a=i[3],l=Ud.parse(o??""),c=Ud.parse(a??""),u=s==="*"?l.multiply(c):l.divide(c);if(u.isNaN())return ha;e=e.replace(BC,u.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var d,f=(d=NC.exec(e))!==null&&d!==void 0?d:[],h=ah(f,4),m=h[1],g=h[2],p=h[3],b=Ud.parse(m??""),y=Ud.parse(p??""),C=g==="+"?b.add(y):b.subtract(y);if(C.isNaN())return ha;e=e.replace(NC,C.toString())}return e}var LC=/\(([^()]*)\)/;function lK(n){for(var e=n;e.includes("(");){var t=LC.exec(e),r=ah(t,2),i=r[1];e=e.replace(LC,kO(i))}return e}function cK(n){var e=n.replace(/\s+/g,"");return e=lK(e),e=kO(e),e}function uK(n){try{return cK(n)}catch{return ha}}function _p(n){var e=uK(n.slice(5,-1));return e===ha?"":e}var dK=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],fK=["dx","dy","angle","className","breakAll"];function lb(){return lb=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},lb.apply(this,arguments)}function FC(n,e){if(n==null)return{};var t=hK(n,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function hK(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function $C(n,e){return vK(n)||pK(n,e)||gK(n,e)||mK()}function mK(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gK(n,e){if(n){if(typeof n=="string")return VC(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return VC(n,e)}}function VC(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function pK(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,o,s,a=[],l=!0,c=!1;try{if(o=(t=t.call(n)).next,e===0){if(Object(t)!==t)return;l=!1}else for(;!(l=(r=o.call(t)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function vK(n){if(Array.isArray(n))return n}var PO=/[ \f\n\r\t\v\u2028\u2029]+/,IO=function(e){var t=e.children,r=e.breakAll,i=e.style;try{var o=[];Ke(t)||(r?o=t.toString().split(""):o=t.toString().split(PO));var s=o.map(function(l){return{word:l,width:wc(l,i).width}}),a=r?0:wc(" ",i).width;return{wordsWithComputedWidth:s,spaceWidth:a}}catch{return null}},bK=function(e,t,r,i,o){var s=e.maxLines,a=e.children,l=e.style,c=e.breakAll,u=fe(s),d=a,f=function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return D.reduce(function(F,L){var H=L.word,$=L.width,ne=F[F.length-1];if(ne&&(i==null||o||ne.width+$+r<Number(i)))ne.words.push(H),ne.width+=$+r;else{var Z={words:[H],width:$};F.push(Z)}return F},[])},h=f(t),m=function(D){return D.reduce(function(F,L){return F.width>L.width?F:L})};if(!u)return h;for(var g="…",p=function(D){var F=d.slice(0,D),L=IO({breakAll:c,style:l,children:F+g}).wordsWithComputedWidth,H=f(L),$=H.length>s||m(H).width>Number(i);return[$,H]},b=0,y=d.length-1,C=0,A;b<=y&&C<=d.length-1;){var w=Math.floor((b+y)/2),S=w-1,_=p(S),v=$C(_,2),x=v[0],T=v[1],E=p(w),k=$C(E,1),I=k[0];if(!x&&!I&&(b=w+1),x&&I&&(y=w-1),!x&&I){A=T;break}C++}return A||h},zC=function(e){var t=Ke(e)?[]:e.toString().split(PO);return[{words:t}]},yK=function(e){var t=e.width,r=e.scaleToFit,i=e.children,o=e.style,s=e.breakAll,a=e.maxLines;if((t||r)&&!_l.isSsr){var l,c,u=IO({breakAll:s,children:i,style:o});if(u){var d=u.wordsWithComputedWidth,f=u.spaceWidth;l=d,c=f}else return zC(i);return bK({breakAll:s,children:i,maxLines:a,style:o},l,c,t,r)}return zC(i)},jC="#808080",lh=function(e){var t=e.x,r=t===void 0?0:t,i=e.y,o=i===void 0?0:i,s=e.lineHeight,a=s===void 0?"1em":s,l=e.capHeight,c=l===void 0?"0.71em":l,u=e.scaleToFit,d=u===void 0?!1:u,f=e.textAnchor,h=f===void 0?"start":f,m=e.verticalAnchor,g=m===void 0?"end":m,p=e.fill,b=p===void 0?jC:p,y=FC(e,dK),C=R.useMemo(function(){return yK({breakAll:y.breakAll,children:y.children,maxLines:y.maxLines,scaleToFit:d,style:y.style,width:y.width})},[y.breakAll,y.children,y.maxLines,d,y.style,y.width]),A=y.dx,w=y.dy,S=y.angle,_=y.className,v=y.breakAll,x=FC(y,fK);if(!en(r)||!en(o))return null;var T=r+(fe(A)?A:0),E=o+(fe(w)?w:0),k;switch(g){case"start":k=_p("calc(".concat(c,")"));break;case"middle":k=_p("calc(".concat((C.length-1)/2," * -").concat(a," + (").concat(c," / 2))"));break;default:k=_p("calc(".concat(C.length-1," * -").concat(a,")"));break}var I=[];if(d){var B=C[0].width,D=y.width;I.push("scale(".concat((fe(D)?D/B:1)/B,")"))}return S&&I.push("rotate(".concat(S,", ").concat(T,", ").concat(E,")")),I.length&&(x.transform=I.join(" ")),O.createElement("text",lb({},He(x,!0),{x:T,y:E,className:rt("recharts-text",_),textAnchor:h,fill:b.includes("url")?jC:b}),C.map(function(F,L){var H=F.words.join(v?"":" ");return O.createElement("tspan",{x:T,dy:L===0?k:a,key:"".concat(H,"-").concat(L)},H)}))};function Co(n,e){return n==null||e==null?NaN:n<e?-1:n>e?1:n>=e?0:NaN}function wK(n,e){return n==null||e==null?NaN:e<n?-1:e>n?1:e>=n?0:NaN}function Pw(n){let e,t,r;n.length!==2?(e=Co,t=(a,l)=>Co(n(a),l),r=(a,l)=>n(a)-l):(e=n===Co||n===wK?n:_K,t=n,r=n);function i(a,l,c=0,u=a.length){if(c<u){if(e(l,l)!==0)return u;do{const d=c+u>>>1;t(a[d],l)<0?c=d+1:u=d}while(c<u)}return c}function o(a,l,c=0,u=a.length){if(c<u){if(e(l,l)!==0)return u;do{const d=c+u>>>1;t(a[d],l)<=0?c=d+1:u=d}while(c<u)}return c}function s(a,l,c=0,u=a.length){const d=i(a,l,c,u-1);return d>c&&r(a[d-1],l)>-r(a[d],l)?d-1:d}return{left:i,center:s,right:o}}function _K(){return 0}function OO(n){return n===null?NaN:+n}function*CK(n,e){for(let t of n)t!=null&&(t=+t)>=t&&(yield t)}const SK=Pw(Co),Zu=SK.right;Pw(OO).center;class WC extends Map{constructor(e,t=TK){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(HC(this,e))}has(e){return super.has(HC(this,e))}set(e,t){return super.set(xK(this,e),t)}delete(e){return super.delete(AK(this,e))}}function HC({_intern:n,_key:e},t){const r=e(t);return n.has(r)?n.get(r):t}function xK({_intern:n,_key:e},t){const r=e(t);return n.has(r)?n.get(r):(n.set(r,t),t)}function AK({_intern:n,_key:e},t){const r=e(t);return n.has(r)&&(t=n.get(r),n.delete(r)),t}function TK(n){return n!==null&&typeof n=="object"?n.valueOf():n}function EK(n=Co){if(n===Co)return RO;if(typeof n!="function")throw new TypeError("compare is not a function");return(e,t)=>{const r=n(e,t);return r||r===0?r:(n(t,t)===0)-(n(e,e)===0)}}function RO(n,e){return(n==null||!(n>=n))-(e==null||!(e>=e))||(n<e?-1:n>e?1:0)}const kK=Math.sqrt(50),PK=Math.sqrt(10),IK=Math.sqrt(2);function ch(n,e,t){const r=(e-n)/Math.max(0,t),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),s=o>=kK?10:o>=PK?5:o>=IK?2:1;let a,l,c;return i<0?(c=Math.pow(10,-i)/s,a=Math.round(n*c),l=Math.round(e*c),a/c<n&&++a,l/c>e&&--l,c=-c):(c=Math.pow(10,i)*s,a=Math.round(n/c),l=Math.round(e/c),a*c<n&&++a,l*c>e&&--l),l<a&&.5<=t&&t<2?ch(n,e,t*2):[a,l,c]}function cb(n,e,t){if(e=+e,n=+n,t=+t,!(t>0))return[];if(n===e)return[n];const r=e<n,[i,o,s]=r?ch(e,n,t):ch(n,e,t);if(!(o>=i))return[];const a=o-i+1,l=new Array(a);if(r)if(s<0)for(let c=0;c<a;++c)l[c]=(o-c)/-s;else for(let c=0;c<a;++c)l[c]=(o-c)*s;else if(s<0)for(let c=0;c<a;++c)l[c]=(i+c)/-s;else for(let c=0;c<a;++c)l[c]=(i+c)*s;return l}function ub(n,e,t){return e=+e,n=+n,t=+t,ch(n,e,t)[2]}function db(n,e,t){e=+e,n=+n,t=+t;const r=e<n,i=r?ub(e,n,t):ub(n,e,t);return(r?-1:1)*(i<0?1/-i:i)}function UC(n,e){let t;for(const r of n)r!=null&&(t<r||t===void 0&&r>=r)&&(t=r);return t}function GC(n,e){let t;for(const r of n)r!=null&&(t>r||t===void 0&&r>=r)&&(t=r);return t}function MO(n,e,t=0,r=1/0,i){if(e=Math.floor(e),t=Math.floor(Math.max(0,t)),r=Math.floor(Math.min(n.length-1,r)),!(t<=e&&e<=r))return n;for(i=i===void 0?RO:EK(i);r>t;){if(r-t>600){const l=r-t+1,c=e-t+1,u=Math.log(l),d=.5*Math.exp(2*u/3),f=.5*Math.sqrt(u*d*(l-d)/l)*(c-l/2<0?-1:1),h=Math.max(t,Math.floor(e-c*d/l+f)),m=Math.min(r,Math.floor(e+(l-c)*d/l+f));MO(n,e,h,m,i)}const o=n[e];let s=t,a=r;for(Hl(n,t,e),i(n[r],o)>0&&Hl(n,t,r);s<a;){for(Hl(n,s,a),++s,--a;i(n[s],o)<0;)++s;for(;i(n[a],o)>0;)--a}i(n[t],o)===0?Hl(n,t,a):(++a,Hl(n,a,r)),a<=e&&(t=a+1),e<=a&&(r=a-1)}return n}function Hl(n,e,t){const r=n[e];n[e]=n[t],n[t]=r}function OK(n,e,t){if(n=Float64Array.from(CK(n)),!(!(r=n.length)||isNaN(e=+e))){if(e<=0||r<2)return GC(n);if(e>=1)return UC(n);var r,i=(r-1)*e,o=Math.floor(i),s=UC(MO(n,o).subarray(0,o+1)),a=GC(n.subarray(o+1));return s+(a-s)*(i-o)}}function RK(n,e,t=OO){if(!(!(r=n.length)||isNaN(e=+e))){if(e<=0||r<2)return+t(n[0],0,n);if(e>=1)return+t(n[r-1],r-1,n);var r,i=(r-1)*e,o=Math.floor(i),s=+t(n[o],o,n),a=+t(n[o+1],o+1,n);return s+(a-s)*(i-o)}}function MK(n,e,t){n=+n,e=+e,t=(i=arguments.length)<2?(e=n,n=0,1):i<3?1:+t;for(var r=-1,i=Math.max(0,Math.ceil((e-n)/t))|0,o=new Array(i);++r<i;)o[r]=n+r*t;return o}function $r(n,e){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(e).domain(n);break}return this}function io(n,e){switch(arguments.length){case 0:break;case 1:{typeof n=="function"?this.interpolator(n):this.range(n);break}default:{this.domain(n),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const fb=Symbol("implicit");function Iw(){var n=new WC,e=[],t=[],r=fb;function i(o){let s=n.get(o);if(s===void 0){if(r!==fb)return r;n.set(o,s=e.push(o)-1)}return t[s%t.length]}return i.domain=function(o){if(!arguments.length)return e.slice();e=[],n=new WC;for(const s of o)n.has(s)||n.set(s,e.push(s)-1);return i},i.range=function(o){return arguments.length?(t=Array.from(o),i):t.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return Iw(e,t).unknown(r)},$r.apply(i,arguments),i}function qc(){var n=Iw().unknown(void 0),e=n.domain,t=n.range,r=0,i=1,o,s,a=!1,l=0,c=0,u=.5;delete n.unknown;function d(){var f=e().length,h=i<r,m=h?i:r,g=h?r:i;o=(g-m)/Math.max(1,f-l+c*2),a&&(o=Math.floor(o)),m+=(g-m-o*(f-l))*u,s=o*(1-l),a&&(m=Math.round(m),s=Math.round(s));var p=MK(f).map(function(b){return m+o*b});return t(h?p.reverse():p)}return n.domain=function(f){return arguments.length?(e(f),d()):e()},n.range=function(f){return arguments.length?([r,i]=f,r=+r,i=+i,d()):[r,i]},n.rangeRound=function(f){return[r,i]=f,r=+r,i=+i,a=!0,d()},n.bandwidth=function(){return s},n.step=function(){return o},n.round=function(f){return arguments.length?(a=!!f,d()):a},n.padding=function(f){return arguments.length?(l=Math.min(1,c=+f),d()):l},n.paddingInner=function(f){return arguments.length?(l=Math.min(1,f),d()):l},n.paddingOuter=function(f){return arguments.length?(c=+f,d()):c},n.align=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),d()):u},n.copy=function(){return qc(e(),[r,i]).round(a).paddingInner(l).paddingOuter(c).align(u)},$r.apply(d(),arguments)}function DO(n){var e=n.copy;return n.padding=n.paddingOuter,delete n.paddingInner,delete n.paddingOuter,n.copy=function(){return DO(e())},n}function _c(){return DO(qc.apply(null,arguments).paddingInner(1))}function Ow(n,e,t){n.prototype=e.prototype=t,t.constructor=n}function BO(n,e){var t=Object.create(n.prototype);for(var r in e)t[r]=e[r];return t}function Ju(){}var Kc=.7,uh=1/Kc,_a="\\s*([+-]?\\d+)\\s*",Yc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",_i="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",DK=/^#([0-9a-f]{3,8})$/,BK=new RegExp(`^rgb\\(${_a},${_a},${_a}\\)$`),NK=new RegExp(`^rgb\\(${_i},${_i},${_i}\\)$`),LK=new RegExp(`^rgba\\(${_a},${_a},${_a},${Yc}\\)$`),FK=new RegExp(`^rgba\\(${_i},${_i},${_i},${Yc}\\)$`),$K=new RegExp(`^hsl\\(${Yc},${_i},${_i}\\)$`),VK=new RegExp(`^hsla\\(${Yc},${_i},${_i},${Yc}\\)$`),qC={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ow(Ju,Xc,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:KC,formatHex:KC,formatHex8:zK,formatHsl:jK,formatRgb:YC,toString:YC});function KC(){return this.rgb().formatHex()}function zK(){return this.rgb().formatHex8()}function jK(){return NO(this).formatHsl()}function YC(){return this.rgb().formatRgb()}function Xc(n){var e,t;return n=(n+"").trim().toLowerCase(),(e=DK.exec(n))?(t=e[1].length,e=parseInt(e[1],16),t===6?XC(e):t===3?new Xn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?Gd(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?Gd(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=BK.exec(n))?new Xn(e[1],e[2],e[3],1):(e=NK.exec(n))?new Xn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=LK.exec(n))?Gd(e[1],e[2],e[3],e[4]):(e=FK.exec(n))?Gd(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=$K.exec(n))?QC(e[1],e[2]/100,e[3]/100,1):(e=VK.exec(n))?QC(e[1],e[2]/100,e[3]/100,e[4]):qC.hasOwnProperty(n)?XC(qC[n]):n==="transparent"?new Xn(NaN,NaN,NaN,0):null}function XC(n){return new Xn(n>>16&255,n>>8&255,n&255,1)}function Gd(n,e,t,r){return r<=0&&(n=e=t=NaN),new Xn(n,e,t,r)}function WK(n){return n instanceof Ju||(n=Xc(n)),n?(n=n.rgb(),new Xn(n.r,n.g,n.b,n.opacity)):new Xn}function hb(n,e,t,r){return arguments.length===1?WK(n):new Xn(n,e,t,r??1)}function Xn(n,e,t,r){this.r=+n,this.g=+e,this.b=+t,this.opacity=+r}Ow(Xn,hb,BO(Ju,{brighter(n){return n=n==null?uh:Math.pow(uh,n),new Xn(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?Kc:Math.pow(Kc,n),new Xn(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new Xn(ds(this.r),ds(this.g),ds(this.b),dh(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ZC,formatHex:ZC,formatHex8:HK,formatRgb:JC,toString:JC}));function ZC(){return`#${is(this.r)}${is(this.g)}${is(this.b)}`}function HK(){return`#${is(this.r)}${is(this.g)}${is(this.b)}${is((isNaN(this.opacity)?1:this.opacity)*255)}`}function JC(){const n=dh(this.opacity);return`${n===1?"rgb(":"rgba("}${ds(this.r)}, ${ds(this.g)}, ${ds(this.b)}${n===1?")":`, ${n})`}`}function dh(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function ds(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function is(n){return n=ds(n),(n<16?"0":"")+n.toString(16)}function QC(n,e,t,r){return r<=0?n=e=t=NaN:t<=0||t>=1?n=e=NaN:e<=0&&(n=NaN),new Xr(n,e,t,r)}function NO(n){if(n instanceof Xr)return new Xr(n.h,n.s,n.l,n.opacity);if(n instanceof Ju||(n=Xc(n)),!n)return new Xr;if(n instanceof Xr)return n;n=n.rgb();var e=n.r/255,t=n.g/255,r=n.b/255,i=Math.min(e,t,r),o=Math.max(e,t,r),s=NaN,a=o-i,l=(o+i)/2;return a?(e===o?s=(t-r)/a+(t<r)*6:t===o?s=(r-e)/a+2:s=(e-t)/a+4,a/=l<.5?o+i:2-o-i,s*=60):a=l>0&&l<1?0:s,new Xr(s,a,l,n.opacity)}function UK(n,e,t,r){return arguments.length===1?NO(n):new Xr(n,e,t,r??1)}function Xr(n,e,t,r){this.h=+n,this.s=+e,this.l=+t,this.opacity=+r}Ow(Xr,UK,BO(Ju,{brighter(n){return n=n==null?uh:Math.pow(uh,n),new Xr(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?Kc:Math.pow(Kc,n),new Xr(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,t=this.l,r=t+(t<.5?t:1-t)*e,i=2*t-r;return new Xn(Cp(n>=240?n-240:n+120,i,r),Cp(n,i,r),Cp(n<120?n+240:n-120,i,r),this.opacity)},clamp(){return new Xr(eS(this.h),qd(this.s),qd(this.l),dh(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=dh(this.opacity);return`${n===1?"hsl(":"hsla("}${eS(this.h)}, ${qd(this.s)*100}%, ${qd(this.l)*100}%${n===1?")":`, ${n})`}`}}));function eS(n){return n=(n||0)%360,n<0?n+360:n}function qd(n){return Math.max(0,Math.min(1,n||0))}function Cp(n,e,t){return(n<60?e+(t-e)*n/60:n<180?t:n<240?e+(t-e)*(240-n)/60:e)*255}const Rw=n=>()=>n;function GK(n,e){return function(t){return n+t*e}}function qK(n,e,t){return n=Math.pow(n,t),e=Math.pow(e,t)-n,t=1/t,function(r){return Math.pow(n+r*e,t)}}function KK(n){return(n=+n)==1?LO:function(e,t){return t-e?qK(e,t,n):Rw(isNaN(e)?t:e)}}function LO(n,e){var t=e-n;return t?GK(n,t):Rw(isNaN(n)?e:n)}const tS=function n(e){var t=KK(e);function r(i,o){var s=t((i=hb(i)).r,(o=hb(o)).r),a=t(i.g,o.g),l=t(i.b,o.b),c=LO(i.opacity,o.opacity);return function(u){return i.r=s(u),i.g=a(u),i.b=l(u),i.opacity=c(u),i+""}}return r.gamma=n,r}(1);function YK(n,e){e||(e=[]);var t=n?Math.min(e.length,n.length):0,r=e.slice(),i;return function(o){for(i=0;i<t;++i)r[i]=n[i]*(1-o)+e[i]*o;return r}}function XK(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function ZK(n,e){var t=e?e.length:0,r=n?Math.min(t,n.length):0,i=new Array(r),o=new Array(t),s;for(s=0;s<r;++s)i[s]=Cl(n[s],e[s]);for(;s<t;++s)o[s]=e[s];return function(a){for(s=0;s<r;++s)o[s]=i[s](a);return o}}function JK(n,e){var t=new Date;return n=+n,e=+e,function(r){return t.setTime(n*(1-r)+e*r),t}}function fh(n,e){return n=+n,e=+e,function(t){return n*(1-t)+e*t}}function QK(n,e){var t={},r={},i;(n===null||typeof n!="object")&&(n={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in n?t[i]=Cl(n[i],e[i]):r[i]=e[i];return function(o){for(i in t)r[i]=t[i](o);return r}}var mb=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Sp=new RegExp(mb.source,"g");function eY(n){return function(){return n}}function tY(n){return function(e){return n(e)+""}}function nY(n,e){var t=mb.lastIndex=Sp.lastIndex=0,r,i,o,s=-1,a=[],l=[];for(n=n+"",e=e+"";(r=mb.exec(n))&&(i=Sp.exec(e));)(o=i.index)>t&&(o=e.slice(t,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,l.push({i:s,x:fh(r,i)})),t=Sp.lastIndex;return t<e.length&&(o=e.slice(t),a[s]?a[s]+=o:a[++s]=o),a.length<2?l[0]?tY(l[0].x):eY(e):(e=l.length,function(c){for(var u=0,d;u<e;++u)a[(d=l[u]).i]=d.x(c);return a.join("")})}function Cl(n,e){var t=typeof e,r;return e==null||t==="boolean"?Rw(e):(t==="number"?fh:t==="string"?(r=Xc(e))?(e=r,tS):nY:e instanceof Xc?tS:e instanceof Date?JK:XK(e)?YK:Array.isArray(e)?ZK:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?QK:fh)(n,e)}function Mw(n,e){return n=+n,e=+e,function(t){return Math.round(n*(1-t)+e*t)}}function rY(n,e){e===void 0&&(e=n,n=Cl);for(var t=0,r=e.length-1,i=e[0],o=new Array(r<0?0:r);t<r;)o[t]=n(i,i=e[++t]);return function(s){var a=Math.max(0,Math.min(r-1,Math.floor(s*=r)));return o[a](s-a)}}function iY(n){return function(){return n}}function hh(n){return+n}var nS=[0,1];function Nn(n){return n}function gb(n,e){return(e-=n=+n)?function(t){return(t-n)/e}:iY(isNaN(e)?NaN:.5)}function oY(n,e){var t;return n>e&&(t=n,n=e,e=t),function(r){return Math.max(n,Math.min(e,r))}}function sY(n,e,t){var r=n[0],i=n[1],o=e[0],s=e[1];return i<r?(r=gb(i,r),o=t(s,o)):(r=gb(r,i),o=t(o,s)),function(a){return o(r(a))}}function aY(n,e,t){var r=Math.min(n.length,e.length)-1,i=new Array(r),o=new Array(r),s=-1;for(n[r]<n[0]&&(n=n.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=gb(n[s],n[s+1]),o[s]=t(e[s],e[s+1]);return function(a){var l=Zu(n,a,1,r)-1;return o[l](i[l](a))}}function Qu(n,e){return e.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown())}function $m(){var n=nS,e=nS,t=Cl,r,i,o,s=Nn,a,l,c;function u(){var f=Math.min(n.length,e.length);return s!==Nn&&(s=oY(n[0],n[f-1])),a=f>2?aY:sY,l=c=null,d}function d(f){return f==null||isNaN(f=+f)?o:(l||(l=a(n.map(r),e,t)))(r(s(f)))}return d.invert=function(f){return s(i((c||(c=a(e,n.map(r),fh)))(f)))},d.domain=function(f){return arguments.length?(n=Array.from(f,hh),u()):n.slice()},d.range=function(f){return arguments.length?(e=Array.from(f),u()):e.slice()},d.rangeRound=function(f){return e=Array.from(f),t=Mw,u()},d.clamp=function(f){return arguments.length?(s=f?!0:Nn,u()):s!==Nn},d.interpolate=function(f){return arguments.length?(t=f,u()):t},d.unknown=function(f){return arguments.length?(o=f,d):o},function(f,h){return r=f,i=h,u()}}function Dw(){return $m()(Nn,Nn)}function lY(n){return Math.abs(n=Math.round(n))>=1e21?n.toLocaleString("en").replace(/,/g,""):n.toString(10)}function mh(n,e){if((t=(n=e?n.toExponential(e-1):n.toExponential()).indexOf("e"))<0)return null;var t,r=n.slice(0,t);return[r.length>1?r[0]+r.slice(2):r,+n.slice(t+1)]}function Ma(n){return n=mh(Math.abs(n)),n?n[1]:NaN}function cY(n,e){return function(t,r){for(var i=t.length,o=[],s=0,a=n[0],l=0;i>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),o.push(t.substring(i-=a,i+a)),!((l+=a+1)>r));)a=n[s=(s+1)%n.length];return o.reverse().join(e)}}function uY(n){return function(e){return e.replace(/[0-9]/g,function(t){return n[+t]})}}var dY=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Zc(n){if(!(e=dY.exec(n)))throw new Error("invalid format: "+n);var e;return new Bw({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Zc.prototype=Bw.prototype;function Bw(n){this.fill=n.fill===void 0?" ":n.fill+"",this.align=n.align===void 0?">":n.align+"",this.sign=n.sign===void 0?"-":n.sign+"",this.symbol=n.symbol===void 0?"":n.symbol+"",this.zero=!!n.zero,this.width=n.width===void 0?void 0:+n.width,this.comma=!!n.comma,this.precision=n.precision===void 0?void 0:+n.precision,this.trim=!!n.trim,this.type=n.type===void 0?"":n.type+""}Bw.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function fY(n){e:for(var e=n.length,t=1,r=-1,i;t<e;++t)switch(n[t]){case".":r=i=t;break;case"0":r===0&&(r=t),i=t;break;default:if(!+n[t])break e;r>0&&(r=0);break}return r>0?n.slice(0,r)+n.slice(i+1):n}var FO;function hY(n,e){var t=mh(n,e);if(!t)return n+"";var r=t[0],i=t[1],o=i-(FO=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return o===s?r:o>s?r+new Array(o-s+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+mh(n,Math.max(0,e+o-1))[0]}function rS(n,e){var t=mh(n,e);if(!t)return n+"";var r=t[0],i=t[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const iS={"%":(n,e)=>(n*100).toFixed(e),b:n=>Math.round(n).toString(2),c:n=>n+"",d:lY,e:(n,e)=>n.toExponential(e),f:(n,e)=>n.toFixed(e),g:(n,e)=>n.toPrecision(e),o:n=>Math.round(n).toString(8),p:(n,e)=>rS(n*100,e),r:rS,s:hY,X:n=>Math.round(n).toString(16).toUpperCase(),x:n=>Math.round(n).toString(16)};function oS(n){return n}var sS=Array.prototype.map,aS=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function mY(n){var e=n.grouping===void 0||n.thousands===void 0?oS:cY(sS.call(n.grouping,Number),n.thousands+""),t=n.currency===void 0?"":n.currency[0]+"",r=n.currency===void 0?"":n.currency[1]+"",i=n.decimal===void 0?".":n.decimal+"",o=n.numerals===void 0?oS:uY(sS.call(n.numerals,String)),s=n.percent===void 0?"%":n.percent+"",a=n.minus===void 0?"−":n.minus+"",l=n.nan===void 0?"NaN":n.nan+"";function c(d){d=Zc(d);var f=d.fill,h=d.align,m=d.sign,g=d.symbol,p=d.zero,b=d.width,y=d.comma,C=d.precision,A=d.trim,w=d.type;w==="n"?(y=!0,w="g"):iS[w]||(C===void 0&&(C=12),A=!0,w="g"),(p||f==="0"&&h==="=")&&(p=!0,f="0",h="=");var S=g==="$"?t:g==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",_=g==="$"?r:/[%p]/.test(w)?s:"",v=iS[w],x=/[defgprs%]/.test(w);C=C===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,C)):Math.max(0,Math.min(20,C));function T(E){var k=S,I=_,B,D,F;if(w==="c")I=v(E)+I,E="";else{E=+E;var L=E<0||1/E<0;if(E=isNaN(E)?l:v(Math.abs(E),C),A&&(E=fY(E)),L&&+E==0&&m!=="+"&&(L=!1),k=(L?m==="("?m:a:m==="-"||m==="("?"":m)+k,I=(w==="s"?aS[8+FO/3]:"")+I+(L&&m==="("?")":""),x){for(B=-1,D=E.length;++B<D;)if(F=E.charCodeAt(B),48>F||F>57){I=(F===46?i+E.slice(B+1):E.slice(B))+I,E=E.slice(0,B);break}}}y&&!p&&(E=e(E,1/0));var H=k.length+E.length+I.length,$=H<b?new Array(b-H+1).join(f):"";switch(y&&p&&(E=e($+E,$.length?b-I.length:1/0),$=""),h){case"<":E=k+E+I+$;break;case"=":E=k+$+E+I;break;case"^":E=$.slice(0,H=$.length>>1)+k+E+I+$.slice(H);break;default:E=$+k+E+I;break}return o(E)}return T.toString=function(){return d+""},T}function u(d,f){var h=c((d=Zc(d),d.type="f",d)),m=Math.max(-8,Math.min(8,Math.floor(Ma(f)/3)))*3,g=Math.pow(10,-m),p=aS[8+m/3];return function(b){return h(g*b)+p}}return{format:c,formatPrefix:u}}var Kd,Nw,$O;gY({thousands:",",grouping:[3],currency:["$",""]});function gY(n){return Kd=mY(n),Nw=Kd.format,$O=Kd.formatPrefix,Kd}function pY(n){return Math.max(0,-Ma(Math.abs(n)))}function vY(n,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ma(e)/3)))*3-Ma(Math.abs(n)))}function bY(n,e){return n=Math.abs(n),e=Math.abs(e)-n,Math.max(0,Ma(e)-Ma(n))+1}function VO(n,e,t,r){var i=db(n,e,t),o;switch(r=Zc(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(n),Math.abs(e));return r.precision==null&&!isNaN(o=vY(i,s))&&(r.precision=o),$O(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=bY(i,Math.max(Math.abs(n),Math.abs(e))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=pY(i))&&(r.precision=o-(r.type==="%")*2);break}}return Nw(r)}function Bo(n){var e=n.domain;return n.ticks=function(t){var r=e();return cb(r[0],r[r.length-1],t??10)},n.tickFormat=function(t,r){var i=e();return VO(i[0],i[i.length-1],t??10,r)},n.nice=function(t){t==null&&(t=10);var r=e(),i=0,o=r.length-1,s=r[i],a=r[o],l,c,u=10;for(a<s&&(c=s,s=a,a=c,c=i,i=o,o=c);u-- >0;){if(c=ub(s,a,t),c===l)return r[i]=s,r[o]=a,e(r);if(c>0)s=Math.floor(s/c)*c,a=Math.ceil(a/c)*c;else if(c<0)s=Math.ceil(s*c)/c,a=Math.floor(a*c)/c;else break;l=c}return n},n}function gh(){var n=Dw();return n.copy=function(){return Qu(n,gh())},$r.apply(n,arguments),Bo(n)}function zO(n){var e;function t(r){return r==null||isNaN(r=+r)?e:r}return t.invert=t,t.domain=t.range=function(r){return arguments.length?(n=Array.from(r,hh),t):n.slice()},t.unknown=function(r){return arguments.length?(e=r,t):e},t.copy=function(){return zO(n).unknown(e)},n=arguments.length?Array.from(n,hh):[0,1],Bo(t)}function jO(n,e){n=n.slice();var t=0,r=n.length-1,i=n[t],o=n[r],s;return o<i&&(s=t,t=r,r=s,s=i,i=o,o=s),n[t]=e.floor(i),n[r]=e.ceil(o),n}function lS(n){return Math.log(n)}function cS(n){return Math.exp(n)}function yY(n){return-Math.log(-n)}function wY(n){return-Math.exp(-n)}function _Y(n){return isFinite(n)?+("1e"+n):n<0?0:n}function CY(n){return n===10?_Y:n===Math.E?Math.exp:e=>Math.pow(n,e)}function SY(n){return n===Math.E?Math.log:n===10&&Math.log10||n===2&&Math.log2||(n=Math.log(n),e=>Math.log(e)/n)}function uS(n){return(e,t)=>-n(-e,t)}function Lw(n){const e=n(lS,cS),t=e.domain;let r=10,i,o;function s(){return i=SY(r),o=CY(r),t()[0]<0?(i=uS(i),o=uS(o),n(yY,wY)):n(lS,cS),e}return e.base=function(a){return arguments.length?(r=+a,s()):r},e.domain=function(a){return arguments.length?(t(a),s()):t()},e.ticks=a=>{const l=t();let c=l[0],u=l[l.length-1];const d=u<c;d&&([c,u]=[u,c]);let f=i(c),h=i(u),m,g;const p=a==null?10:+a;let b=[];if(!(r%1)&&h-f<p){if(f=Math.floor(f),h=Math.ceil(h),c>0){for(;f<=h;++f)for(m=1;m<r;++m)if(g=f<0?m/o(-f):m*o(f),!(g<c)){if(g>u)break;b.push(g)}}else for(;f<=h;++f)for(m=r-1;m>=1;--m)if(g=f>0?m/o(-f):m*o(f),!(g<c)){if(g>u)break;b.push(g)}b.length*2<p&&(b=cb(c,u,p))}else b=cb(f,h,Math.min(h-f,p)).map(o);return d?b.reverse():b},e.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=Zc(l)).precision==null&&(l.trim=!0),l=Nw(l)),a===1/0)return l;const c=Math.max(1,r*a/e.ticks().length);return u=>{let d=u/o(Math.round(i(u)));return d*r<r-.5&&(d*=r),d<=c?l(u):""}},e.nice=()=>t(jO(t(),{floor:a=>o(Math.floor(i(a))),ceil:a=>o(Math.ceil(i(a)))})),e}function WO(){const n=Lw($m()).domain([1,10]);return n.copy=()=>Qu(n,WO()).base(n.base()),$r.apply(n,arguments),n}function dS(n){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/n))}}function fS(n){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*n}}function Fw(n){var e=1,t=n(dS(e),fS(e));return t.constant=function(r){return arguments.length?n(dS(e=+r),fS(e)):e},Bo(t)}function HO(){var n=Fw($m());return n.copy=function(){return Qu(n,HO()).constant(n.constant())},$r.apply(n,arguments)}function hS(n){return function(e){return e<0?-Math.pow(-e,n):Math.pow(e,n)}}function xY(n){return n<0?-Math.sqrt(-n):Math.sqrt(n)}function AY(n){return n<0?-n*n:n*n}function $w(n){var e=n(Nn,Nn),t=1;function r(){return t===1?n(Nn,Nn):t===.5?n(xY,AY):n(hS(t),hS(1/t))}return e.exponent=function(i){return arguments.length?(t=+i,r()):t},Bo(e)}function Vw(){var n=$w($m());return n.copy=function(){return Qu(n,Vw()).exponent(n.exponent())},$r.apply(n,arguments),n}function TY(){return Vw.apply(null,arguments).exponent(.5)}function mS(n){return Math.sign(n)*n*n}function EY(n){return Math.sign(n)*Math.sqrt(Math.abs(n))}function UO(){var n=Dw(),e=[0,1],t=!1,r;function i(o){var s=EY(n(o));return isNaN(s)?r:t?Math.round(s):s}return i.invert=function(o){return n.invert(mS(o))},i.domain=function(o){return arguments.length?(n.domain(o),i):n.domain()},i.range=function(o){return arguments.length?(n.range((e=Array.from(o,hh)).map(mS)),i):e.slice()},i.rangeRound=function(o){return i.range(o).round(!0)},i.round=function(o){return arguments.length?(t=!!o,i):t},i.clamp=function(o){return arguments.length?(n.clamp(o),i):n.clamp()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return UO(n.domain(),e).round(t).clamp(n.clamp()).unknown(r)},$r.apply(i,arguments),Bo(i)}function GO(){var n=[],e=[],t=[],r;function i(){var s=0,a=Math.max(1,e.length);for(t=new Array(a-1);++s<a;)t[s-1]=RK(n,s/a);return o}function o(s){return s==null||isNaN(s=+s)?r:e[Zu(t,s)]}return o.invertExtent=function(s){var a=e.indexOf(s);return a<0?[NaN,NaN]:[a>0?t[a-1]:n[0],a<t.length?t[a]:n[n.length-1]]},o.domain=function(s){if(!arguments.length)return n.slice();n=[];for(let a of s)a!=null&&!isNaN(a=+a)&&n.push(a);return n.sort(Co),i()},o.range=function(s){return arguments.length?(e=Array.from(s),i()):e.slice()},o.unknown=function(s){return arguments.length?(r=s,o):r},o.quantiles=function(){return t.slice()},o.copy=function(){return GO().domain(n).range(e).unknown(r)},$r.apply(o,arguments)}function qO(){var n=0,e=1,t=1,r=[.5],i=[0,1],o;function s(l){return l!=null&&l<=l?i[Zu(r,l,0,t)]:o}function a(){var l=-1;for(r=new Array(t);++l<t;)r[l]=((l+1)*e-(l-t)*n)/(t+1);return s}return s.domain=function(l){return arguments.length?([n,e]=l,n=+n,e=+e,a()):[n,e]},s.range=function(l){return arguments.length?(t=(i=Array.from(l)).length-1,a()):i.slice()},s.invertExtent=function(l){var c=i.indexOf(l);return c<0?[NaN,NaN]:c<1?[n,r[0]]:c>=t?[r[t-1],e]:[r[c-1],r[c]]},s.unknown=function(l){return arguments.length&&(o=l),s},s.thresholds=function(){return r.slice()},s.copy=function(){return qO().domain([n,e]).range(i).unknown(o)},$r.apply(Bo(s),arguments)}function KO(){var n=[.5],e=[0,1],t,r=1;function i(o){return o!=null&&o<=o?e[Zu(n,o,0,r)]:t}return i.domain=function(o){return arguments.length?(n=Array.from(o),r=Math.min(n.length,e.length-1),i):n.slice()},i.range=function(o){return arguments.length?(e=Array.from(o),r=Math.min(n.length,e.length-1),i):e.slice()},i.invertExtent=function(o){var s=e.indexOf(o);return[n[s-1],n[s]]},i.unknown=function(o){return arguments.length?(t=o,i):t},i.copy=function(){return KO().domain(n).range(e).unknown(t)},$r.apply(i,arguments)}const xp=new Date,Ap=new Date;function rn(n,e,t,r){function i(o){return n(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(n(o=new Date(+o)),o),i.ceil=o=>(n(o=new Date(o-1)),e(o,1),n(o),o),i.round=o=>{const s=i(o),a=i.ceil(o);return o-s<a-o?s:a},i.offset=(o,s)=>(e(o=new Date(+o),s==null?1:Math.floor(s)),o),i.range=(o,s,a)=>{const l=[];if(o=i.ceil(o),a=a==null?1:Math.floor(a),!(o<s)||!(a>0))return l;let c;do l.push(c=new Date(+o)),e(o,a),n(o);while(c<o&&o<s);return l},i.filter=o=>rn(s=>{if(s>=s)for(;n(s),!o(s);)s.setTime(s-1)},(s,a)=>{if(s>=s)if(a<0)for(;++a<=0;)for(;e(s,-1),!o(s););else for(;--a>=0;)for(;e(s,1),!o(s););}),t&&(i.count=(o,s)=>(xp.setTime(+o),Ap.setTime(+s),n(xp),n(Ap),Math.floor(t(xp,Ap))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?s=>r(s)%o===0:s=>i.count(0,s)%o===0):i)),i}const ph=rn(()=>{},(n,e)=>{n.setTime(+n+e)},(n,e)=>e-n);ph.every=n=>(n=Math.floor(n),!isFinite(n)||!(n>0)?null:n>1?rn(e=>{e.setTime(Math.floor(e/n)*n)},(e,t)=>{e.setTime(+e+t*n)},(e,t)=>(t-e)/n):ph);ph.range;const ji=1e3,kr=ji*60,Wi=kr*60,Yi=Wi*24,zw=Yi*7,gS=Yi*30,Tp=Yi*365,os=rn(n=>{n.setTime(n-n.getMilliseconds())},(n,e)=>{n.setTime(+n+e*ji)},(n,e)=>(e-n)/ji,n=>n.getUTCSeconds());os.range;const jw=rn(n=>{n.setTime(n-n.getMilliseconds()-n.getSeconds()*ji)},(n,e)=>{n.setTime(+n+e*kr)},(n,e)=>(e-n)/kr,n=>n.getMinutes());jw.range;const Ww=rn(n=>{n.setUTCSeconds(0,0)},(n,e)=>{n.setTime(+n+e*kr)},(n,e)=>(e-n)/kr,n=>n.getUTCMinutes());Ww.range;const Hw=rn(n=>{n.setTime(n-n.getMilliseconds()-n.getSeconds()*ji-n.getMinutes()*kr)},(n,e)=>{n.setTime(+n+e*Wi)},(n,e)=>(e-n)/Wi,n=>n.getHours());Hw.range;const Uw=rn(n=>{n.setUTCMinutes(0,0,0)},(n,e)=>{n.setTime(+n+e*Wi)},(n,e)=>(e-n)/Wi,n=>n.getUTCHours());Uw.range;const ed=rn(n=>n.setHours(0,0,0,0),(n,e)=>n.setDate(n.getDate()+e),(n,e)=>(e-n-(e.getTimezoneOffset()-n.getTimezoneOffset())*kr)/Yi,n=>n.getDate()-1);ed.range;const Vm=rn(n=>{n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCDate(n.getUTCDate()+e)},(n,e)=>(e-n)/Yi,n=>n.getUTCDate()-1);Vm.range;const YO=rn(n=>{n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCDate(n.getUTCDate()+e)},(n,e)=>(e-n)/Yi,n=>Math.floor(n/Yi));YO.range;function Ps(n){return rn(e=>{e.setDate(e.getDate()-(e.getDay()+7-n)%7),e.setHours(0,0,0,0)},(e,t)=>{e.setDate(e.getDate()+t*7)},(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*kr)/zw)}const zm=Ps(0),vh=Ps(1),kY=Ps(2),PY=Ps(3),Da=Ps(4),IY=Ps(5),OY=Ps(6);zm.range;vh.range;kY.range;PY.range;Da.range;IY.range;OY.range;function Is(n){return rn(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-n)%7),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t*7)},(e,t)=>(t-e)/zw)}const jm=Is(0),bh=Is(1),RY=Is(2),MY=Is(3),Ba=Is(4),DY=Is(5),BY=Is(6);jm.range;bh.range;RY.range;MY.range;Ba.range;DY.range;BY.range;const Gw=rn(n=>{n.setDate(1),n.setHours(0,0,0,0)},(n,e)=>{n.setMonth(n.getMonth()+e)},(n,e)=>e.getMonth()-n.getMonth()+(e.getFullYear()-n.getFullYear())*12,n=>n.getMonth());Gw.range;const qw=rn(n=>{n.setUTCDate(1),n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCMonth(n.getUTCMonth()+e)},(n,e)=>e.getUTCMonth()-n.getUTCMonth()+(e.getUTCFullYear()-n.getUTCFullYear())*12,n=>n.getUTCMonth());qw.range;const Xi=rn(n=>{n.setMonth(0,1),n.setHours(0,0,0,0)},(n,e)=>{n.setFullYear(n.getFullYear()+e)},(n,e)=>e.getFullYear()-n.getFullYear(),n=>n.getFullYear());Xi.every=n=>!isFinite(n=Math.floor(n))||!(n>0)?null:rn(e=>{e.setFullYear(Math.floor(e.getFullYear()/n)*n),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t*n)});Xi.range;const Zi=rn(n=>{n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCFullYear(n.getUTCFullYear()+e)},(n,e)=>e.getUTCFullYear()-n.getUTCFullYear(),n=>n.getUTCFullYear());Zi.every=n=>!isFinite(n=Math.floor(n))||!(n>0)?null:rn(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/n)*n),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t*n)});Zi.range;function XO(n,e,t,r,i,o){const s=[[os,1,ji],[os,5,5*ji],[os,15,15*ji],[os,30,30*ji],[o,1,kr],[o,5,5*kr],[o,15,15*kr],[o,30,30*kr],[i,1,Wi],[i,3,3*Wi],[i,6,6*Wi],[i,12,12*Wi],[r,1,Yi],[r,2,2*Yi],[t,1,zw],[e,1,gS],[e,3,3*gS],[n,1,Tp]];function a(c,u,d){const f=u<c;f&&([c,u]=[u,c]);const h=d&&typeof d.range=="function"?d:l(c,u,d),m=h?h.range(c,+u+1):[];return f?m.reverse():m}function l(c,u,d){const f=Math.abs(u-c)/d,h=Pw(([,,p])=>p).right(s,f);if(h===s.length)return n.every(db(c/Tp,u/Tp,d));if(h===0)return ph.every(Math.max(db(c,u,d),1));const[m,g]=s[f/s[h-1][2]<s[h][2]/f?h-1:h];return m.every(g)}return[a,l]}const[NY,LY]=XO(Zi,qw,jm,YO,Uw,Ww),[FY,$Y]=XO(Xi,Gw,zm,ed,Hw,jw);function Ep(n){if(0<=n.y&&n.y<100){var e=new Date(-1,n.m,n.d,n.H,n.M,n.S,n.L);return e.setFullYear(n.y),e}return new Date(n.y,n.m,n.d,n.H,n.M,n.S,n.L)}function kp(n){if(0<=n.y&&n.y<100){var e=new Date(Date.UTC(-1,n.m,n.d,n.H,n.M,n.S,n.L));return e.setUTCFullYear(n.y),e}return new Date(Date.UTC(n.y,n.m,n.d,n.H,n.M,n.S,n.L))}function Ul(n,e,t){return{y:n,m:e,d:t,H:0,M:0,S:0,L:0}}function VY(n){var e=n.dateTime,t=n.date,r=n.time,i=n.periods,o=n.days,s=n.shortDays,a=n.months,l=n.shortMonths,c=Gl(i),u=ql(i),d=Gl(o),f=ql(o),h=Gl(s),m=ql(s),g=Gl(a),p=ql(a),b=Gl(l),y=ql(l),C={a:L,A:H,b:$,B:ne,c:null,d:_S,e:_S,f:cX,g:yX,G:_X,H:sX,I:aX,j:lX,L:ZO,m:uX,M:dX,p:Z,q:G,Q:xS,s:AS,S:fX,u:hX,U:mX,V:gX,w:pX,W:vX,x:null,X:null,y:bX,Y:wX,Z:CX,"%":SS},A={a:X,A:ee,b:ie,B:me,c:null,d:CS,e:CS,f:TX,g:NX,G:FX,H:SX,I:xX,j:AX,L:QO,m:EX,M:kX,p:Ie,q:ce,Q:xS,s:AS,S:PX,u:IX,U:OX,V:RX,w:MX,W:DX,x:null,X:null,y:BX,Y:LX,Z:$X,"%":SS},w={a:T,A:E,b:k,B:I,c:B,d:yS,e:yS,f:nX,g:bS,G:vS,H:wS,I:wS,j:JY,L:tX,m:ZY,M:QY,p:x,q:XY,Q:iX,s:oX,S:eX,u:UY,U:GY,V:qY,w:HY,W:KY,x:D,X:F,y:bS,Y:vS,Z:YY,"%":rX};C.x=S(t,C),C.X=S(r,C),C.c=S(e,C),A.x=S(t,A),A.X=S(r,A),A.c=S(e,A);function S(q,oe){return function(Q){var K=[],Se=-1,le=0,Ce=q.length,ye,je,P;for(Q instanceof Date||(Q=new Date(+Q));++Se<Ce;)q.charCodeAt(Se)===37&&(K.push(q.slice(le,Se)),(je=pS[ye=q.charAt(++Se)])!=null?ye=q.charAt(++Se):je=ye==="e"?" ":"0",(P=oe[ye])&&(ye=P(Q,je)),K.push(ye),le=Se+1);return K.push(q.slice(le,Se)),K.join("")}}function _(q,oe){return function(Q){var K=Ul(1900,void 0,1),Se=v(K,q,Q+="",0),le,Ce;if(Se!=Q.length)return null;if("Q"in K)return new Date(K.Q);if("s"in K)return new Date(K.s*1e3+("L"in K?K.L:0));if(oe&&!("Z"in K)&&(K.Z=0),"p"in K&&(K.H=K.H%12+K.p*12),K.m===void 0&&(K.m="q"in K?K.q:0),"V"in K){if(K.V<1||K.V>53)return null;"w"in K||(K.w=1),"Z"in K?(le=kp(Ul(K.y,0,1)),Ce=le.getUTCDay(),le=Ce>4||Ce===0?bh.ceil(le):bh(le),le=Vm.offset(le,(K.V-1)*7),K.y=le.getUTCFullYear(),K.m=le.getUTCMonth(),K.d=le.getUTCDate()+(K.w+6)%7):(le=Ep(Ul(K.y,0,1)),Ce=le.getDay(),le=Ce>4||Ce===0?vh.ceil(le):vh(le),le=ed.offset(le,(K.V-1)*7),K.y=le.getFullYear(),K.m=le.getMonth(),K.d=le.getDate()+(K.w+6)%7)}else("W"in K||"U"in K)&&("w"in K||(K.w="u"in K?K.u%7:"W"in K?1:0),Ce="Z"in K?kp(Ul(K.y,0,1)).getUTCDay():Ep(Ul(K.y,0,1)).getDay(),K.m=0,K.d="W"in K?(K.w+6)%7+K.W*7-(Ce+5)%7:K.w+K.U*7-(Ce+6)%7);return"Z"in K?(K.H+=K.Z/100|0,K.M+=K.Z%100,kp(K)):Ep(K)}}function v(q,oe,Q,K){for(var Se=0,le=oe.length,Ce=Q.length,ye,je;Se<le;){if(K>=Ce)return-1;if(ye=oe.charCodeAt(Se++),ye===37){if(ye=oe.charAt(Se++),je=w[ye in pS?oe.charAt(Se++):ye],!je||(K=je(q,Q,K))<0)return-1}else if(ye!=Q.charCodeAt(K++))return-1}return K}function x(q,oe,Q){var K=c.exec(oe.slice(Q));return K?(q.p=u.get(K[0].toLowerCase()),Q+K[0].length):-1}function T(q,oe,Q){var K=h.exec(oe.slice(Q));return K?(q.w=m.get(K[0].toLowerCase()),Q+K[0].length):-1}function E(q,oe,Q){var K=d.exec(oe.slice(Q));return K?(q.w=f.get(K[0].toLowerCase()),Q+K[0].length):-1}function k(q,oe,Q){var K=b.exec(oe.slice(Q));return K?(q.m=y.get(K[0].toLowerCase()),Q+K[0].length):-1}function I(q,oe,Q){var K=g.exec(oe.slice(Q));return K?(q.m=p.get(K[0].toLowerCase()),Q+K[0].length):-1}function B(q,oe,Q){return v(q,e,oe,Q)}function D(q,oe,Q){return v(q,t,oe,Q)}function F(q,oe,Q){return v(q,r,oe,Q)}function L(q){return s[q.getDay()]}function H(q){return o[q.getDay()]}function $(q){return l[q.getMonth()]}function ne(q){return a[q.getMonth()]}function Z(q){return i[+(q.getHours()>=12)]}function G(q){return 1+~~(q.getMonth()/3)}function X(q){return s[q.getUTCDay()]}function ee(q){return o[q.getUTCDay()]}function ie(q){return l[q.getUTCMonth()]}function me(q){return a[q.getUTCMonth()]}function Ie(q){return i[+(q.getUTCHours()>=12)]}function ce(q){return 1+~~(q.getUTCMonth()/3)}return{format:function(q){var oe=S(q+="",C);return oe.toString=function(){return q},oe},parse:function(q){var oe=_(q+="",!1);return oe.toString=function(){return q},oe},utcFormat:function(q){var oe=S(q+="",A);return oe.toString=function(){return q},oe},utcParse:function(q){var oe=_(q+="",!0);return oe.toString=function(){return q},oe}}}var pS={"-":"",_:" ",0:"0"},fn=/^\s*\d+/,zY=/^%/,jY=/[\\^$*+?|[\]().{}]/g;function it(n,e,t){var r=n<0?"-":"",i=(r?-n:n)+"",o=i.length;return r+(o<t?new Array(t-o+1).join(e)+i:i)}function WY(n){return n.replace(jY,"\\$&")}function Gl(n){return new RegExp("^(?:"+n.map(WY).join("|")+")","i")}function ql(n){return new Map(n.map((e,t)=>[e.toLowerCase(),t]))}function HY(n,e,t){var r=fn.exec(e.slice(t,t+1));return r?(n.w=+r[0],t+r[0].length):-1}function UY(n,e,t){var r=fn.exec(e.slice(t,t+1));return r?(n.u=+r[0],t+r[0].length):-1}function GY(n,e,t){var r=fn.exec(e.slice(t,t+2));return r?(n.U=+r[0],t+r[0].length):-1}function qY(n,e,t){var r=fn.exec(e.slice(t,t+2));return r?(n.V=+r[0],t+r[0].length):-1}function KY(n,e,t){var r=fn.exec(e.slice(t,t+2));return r?(n.W=+r[0],t+r[0].length):-1}function vS(n,e,t){var r=fn.exec(e.slice(t,t+4));return r?(n.y=+r[0],t+r[0].length):-1}function bS(n,e,t){var r=fn.exec(e.slice(t,t+2));return r?(n.y=+r[0]+(+r[0]>68?1900:2e3),t+r[0].length):-1}function YY(n,e,t){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(t,t+6));return r?(n.Z=r[1]?0:-(r[2]+(r[3]||"00")),t+r[0].length):-1}function XY(n,e,t){var r=fn.exec(e.slice(t,t+1));return r?(n.q=r[0]*3-3,t+r[0].length):-1}function ZY(n,e,t){var r=fn.exec(e.slice(t,t+2));return r?(n.m=r[0]-1,t+r[0].length):-1}function yS(n,e,t){var r=fn.exec(e.slice(t,t+2));return r?(n.d=+r[0],t+r[0].length):-1}function JY(n,e,t){var r=fn.exec(e.slice(t,t+3));return r?(n.m=0,n.d=+r[0],t+r[0].length):-1}function wS(n,e,t){var r=fn.exec(e.slice(t,t+2));return r?(n.H=+r[0],t+r[0].length):-1}function QY(n,e,t){var r=fn.exec(e.slice(t,t+2));return r?(n.M=+r[0],t+r[0].length):-1}function eX(n,e,t){var r=fn.exec(e.slice(t,t+2));return r?(n.S=+r[0],t+r[0].length):-1}function tX(n,e,t){var r=fn.exec(e.slice(t,t+3));return r?(n.L=+r[0],t+r[0].length):-1}function nX(n,e,t){var r=fn.exec(e.slice(t,t+6));return r?(n.L=Math.floor(r[0]/1e3),t+r[0].length):-1}function rX(n,e,t){var r=zY.exec(e.slice(t,t+1));return r?t+r[0].length:-1}function iX(n,e,t){var r=fn.exec(e.slice(t));return r?(n.Q=+r[0],t+r[0].length):-1}function oX(n,e,t){var r=fn.exec(e.slice(t));return r?(n.s=+r[0],t+r[0].length):-1}function _S(n,e){return it(n.getDate(),e,2)}function sX(n,e){return it(n.getHours(),e,2)}function aX(n,e){return it(n.getHours()%12||12,e,2)}function lX(n,e){return it(1+ed.count(Xi(n),n),e,3)}function ZO(n,e){return it(n.getMilliseconds(),e,3)}function cX(n,e){return ZO(n,e)+"000"}function uX(n,e){return it(n.getMonth()+1,e,2)}function dX(n,e){return it(n.getMinutes(),e,2)}function fX(n,e){return it(n.getSeconds(),e,2)}function hX(n){var e=n.getDay();return e===0?7:e}function mX(n,e){return it(zm.count(Xi(n)-1,n),e,2)}function JO(n){var e=n.getDay();return e>=4||e===0?Da(n):Da.ceil(n)}function gX(n,e){return n=JO(n),it(Da.count(Xi(n),n)+(Xi(n).getDay()===4),e,2)}function pX(n){return n.getDay()}function vX(n,e){return it(vh.count(Xi(n)-1,n),e,2)}function bX(n,e){return it(n.getFullYear()%100,e,2)}function yX(n,e){return n=JO(n),it(n.getFullYear()%100,e,2)}function wX(n,e){return it(n.getFullYear()%1e4,e,4)}function _X(n,e){var t=n.getDay();return n=t>=4||t===0?Da(n):Da.ceil(n),it(n.getFullYear()%1e4,e,4)}function CX(n){var e=n.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+it(e/60|0,"0",2)+it(e%60,"0",2)}function CS(n,e){return it(n.getUTCDate(),e,2)}function SX(n,e){return it(n.getUTCHours(),e,2)}function xX(n,e){return it(n.getUTCHours()%12||12,e,2)}function AX(n,e){return it(1+Vm.count(Zi(n),n),e,3)}function QO(n,e){return it(n.getUTCMilliseconds(),e,3)}function TX(n,e){return QO(n,e)+"000"}function EX(n,e){return it(n.getUTCMonth()+1,e,2)}function kX(n,e){return it(n.getUTCMinutes(),e,2)}function PX(n,e){return it(n.getUTCSeconds(),e,2)}function IX(n){var e=n.getUTCDay();return e===0?7:e}function OX(n,e){return it(jm.count(Zi(n)-1,n),e,2)}function eR(n){var e=n.getUTCDay();return e>=4||e===0?Ba(n):Ba.ceil(n)}function RX(n,e){return n=eR(n),it(Ba.count(Zi(n),n)+(Zi(n).getUTCDay()===4),e,2)}function MX(n){return n.getUTCDay()}function DX(n,e){return it(bh.count(Zi(n)-1,n),e,2)}function BX(n,e){return it(n.getUTCFullYear()%100,e,2)}function NX(n,e){return n=eR(n),it(n.getUTCFullYear()%100,e,2)}function LX(n,e){return it(n.getUTCFullYear()%1e4,e,4)}function FX(n,e){var t=n.getUTCDay();return n=t>=4||t===0?Ba(n):Ba.ceil(n),it(n.getUTCFullYear()%1e4,e,4)}function $X(){return"+0000"}function SS(){return"%"}function xS(n){return+n}function AS(n){return Math.floor(+n/1e3)}var Gs,tR,nR;VX({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function VX(n){return Gs=VY(n),tR=Gs.format,Gs.parse,nR=Gs.utcFormat,Gs.utcParse,Gs}function zX(n){return new Date(n)}function jX(n){return n instanceof Date?+n:+new Date(+n)}function Kw(n,e,t,r,i,o,s,a,l,c){var u=Dw(),d=u.invert,f=u.domain,h=c(".%L"),m=c(":%S"),g=c("%I:%M"),p=c("%I %p"),b=c("%a %d"),y=c("%b %d"),C=c("%B"),A=c("%Y");function w(S){return(l(S)<S?h:a(S)<S?m:s(S)<S?g:o(S)<S?p:r(S)<S?i(S)<S?b:y:t(S)<S?C:A)(S)}return u.invert=function(S){return new Date(d(S))},u.domain=function(S){return arguments.length?f(Array.from(S,jX)):f().map(zX)},u.ticks=function(S){var _=f();return n(_[0],_[_.length-1],S??10)},u.tickFormat=function(S,_){return _==null?w:c(_)},u.nice=function(S){var _=f();return(!S||typeof S.range!="function")&&(S=e(_[0],_[_.length-1],S??10)),S?f(jO(_,S)):u},u.copy=function(){return Qu(u,Kw(n,e,t,r,i,o,s,a,l,c))},u}function WX(){return $r.apply(Kw(FY,$Y,Xi,Gw,zm,ed,Hw,jw,os,tR).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function HX(){return $r.apply(Kw(NY,LY,Zi,qw,jm,Vm,Uw,Ww,os,nR).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Wm(){var n=0,e=1,t,r,i,o,s=Nn,a=!1,l;function c(d){return d==null||isNaN(d=+d)?l:s(i===0?.5:(d=(o(d)-t)*i,a?Math.max(0,Math.min(1,d)):d))}c.domain=function(d){return arguments.length?([n,e]=d,t=o(n=+n),r=o(e=+e),i=t===r?0:1/(r-t),c):[n,e]},c.clamp=function(d){return arguments.length?(a=!!d,c):a},c.interpolator=function(d){return arguments.length?(s=d,c):s};function u(d){return function(f){var h,m;return arguments.length?([h,m]=f,s=d(h,m),c):[s(0),s(1)]}}return c.range=u(Cl),c.rangeRound=u(Mw),c.unknown=function(d){return arguments.length?(l=d,c):l},function(d){return o=d,t=d(n),r=d(e),i=t===r?0:1/(r-t),c}}function No(n,e){return e.domain(n.domain()).interpolator(n.interpolator()).clamp(n.clamp()).unknown(n.unknown())}function rR(){var n=Bo(Wm()(Nn));return n.copy=function(){return No(n,rR())},io.apply(n,arguments)}function iR(){var n=Lw(Wm()).domain([1,10]);return n.copy=function(){return No(n,iR()).base(n.base())},io.apply(n,arguments)}function oR(){var n=Fw(Wm());return n.copy=function(){return No(n,oR()).constant(n.constant())},io.apply(n,arguments)}function Yw(){var n=$w(Wm());return n.copy=function(){return No(n,Yw()).exponent(n.exponent())},io.apply(n,arguments)}function UX(){return Yw.apply(null,arguments).exponent(.5)}function sR(){var n=[],e=Nn;function t(r){if(r!=null&&!isNaN(r=+r))return e((Zu(n,r,1)-1)/(n.length-1))}return t.domain=function(r){if(!arguments.length)return n.slice();n=[];for(let i of r)i!=null&&!isNaN(i=+i)&&n.push(i);return n.sort(Co),t},t.interpolator=function(r){return arguments.length?(e=r,t):e},t.range=function(){return n.map((r,i)=>e(i/(n.length-1)))},t.quantiles=function(r){return Array.from({length:r+1},(i,o)=>OK(n,o/r))},t.copy=function(){return sR(e).domain(n)},io.apply(t,arguments)}function Hm(){var n=0,e=.5,t=1,r=1,i,o,s,a,l,c=Nn,u,d=!1,f;function h(g){return isNaN(g=+g)?f:(g=.5+((g=+u(g))-o)*(r*g<r*o?a:l),c(d?Math.max(0,Math.min(1,g)):g))}h.domain=function(g){return arguments.length?([n,e,t]=g,i=u(n=+n),o=u(e=+e),s=u(t=+t),a=i===o?0:.5/(o-i),l=o===s?0:.5/(s-o),r=o<i?-1:1,h):[n,e,t]},h.clamp=function(g){return arguments.length?(d=!!g,h):d},h.interpolator=function(g){return arguments.length?(c=g,h):c};function m(g){return function(p){var b,y,C;return arguments.length?([b,y,C]=p,c=rY(g,[b,y,C]),h):[c(0),c(.5),c(1)]}}return h.range=m(Cl),h.rangeRound=m(Mw),h.unknown=function(g){return arguments.length?(f=g,h):f},function(g){return u=g,i=g(n),o=g(e),s=g(t),a=i===o?0:.5/(o-i),l=o===s?0:.5/(s-o),r=o<i?-1:1,h}}function aR(){var n=Bo(Hm()(Nn));return n.copy=function(){return No(n,aR())},io.apply(n,arguments)}function lR(){var n=Lw(Hm()).domain([.1,1,10]);return n.copy=function(){return No(n,lR()).base(n.base())},io.apply(n,arguments)}function cR(){var n=Fw(Hm());return n.copy=function(){return No(n,cR()).constant(n.constant())},io.apply(n,arguments)}function Xw(){var n=$w(Hm());return n.copy=function(){return No(n,Xw()).exponent(n.exponent())},io.apply(n,arguments)}function GX(){return Xw.apply(null,arguments).exponent(.5)}const TS=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:qc,scaleDiverging:aR,scaleDivergingLog:lR,scaleDivergingPow:Xw,scaleDivergingSqrt:GX,scaleDivergingSymlog:cR,scaleIdentity:zO,scaleImplicit:fb,scaleLinear:gh,scaleLog:WO,scaleOrdinal:Iw,scalePoint:_c,scalePow:Vw,scaleQuantile:GO,scaleQuantize:qO,scaleRadial:UO,scaleSequential:rR,scaleSequentialLog:iR,scaleSequentialPow:Yw,scaleSequentialQuantile:sR,scaleSequentialSqrt:UX,scaleSequentialSymlog:oR,scaleSqrt:TY,scaleSymlog:HO,scaleThreshold:KO,scaleTime:WX,scaleUtc:HX,tickFormat:VO},Symbol.toStringTag,{value:"Module"}));var qX=dl;function KX(n,e,t){for(var r=-1,i=n.length;++r<i;){var o=n[r],s=e(o);if(s!=null&&(a===void 0?s===s&&!qX(s):t(s,a)))var a=s,l=o}return l}var uR=KX;function YX(n,e){return n>e}var XX=YX,ZX=uR,JX=XX,QX=yl;function eZ(n){return n&&n.length?ZX(n,QX,JX):void 0}var tZ=eZ;const bo=ot(tZ);function nZ(n,e){return n<e}var rZ=nZ,iZ=uR,oZ=rZ,sZ=yl;function aZ(n){return n&&n.length?iZ(n,sZ,oZ):void 0}var lZ=aZ;const Um=ot(lZ);var cZ=dw,uZ=wl,dZ=bO,fZ=tr;function hZ(n,e){var t=fZ(n)?cZ:dZ;return t(n,uZ(e))}var mZ=hZ,gZ=pO,pZ=mZ;function vZ(n,e){return gZ(pZ(n,e),1)}var bZ=vZ;const yZ=ot(bZ);var wZ=Aw;function _Z(n,e){return wZ(n,e)}var CZ=_Z;const Jc=ot(CZ);var Sl=1e9,SZ={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Jw,Pt=!0,Dr="[DecimalError] ",fs=Dr+"Invalid argument: ",Zw=Dr+"Exponent out of range: ",xl=Math.floor,es=Math.pow,xZ=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,lr,sn=1e7,Et=7,dR=9007199254740991,yh=xl(dR/Et),ve={};ve.absoluteValue=ve.abs=function(){var n=new this.constructor(this);return n.s&&(n.s=1),n};ve.comparedTo=ve.cmp=function(n){var e,t,r,i,o=this;if(n=new o.constructor(n),o.s!==n.s)return o.s||-n.s;if(o.e!==n.e)return o.e>n.e^o.s<0?1:-1;for(r=o.d.length,i=n.d.length,e=0,t=r<i?r:i;e<t;++e)if(o.d[e]!==n.d[e])return o.d[e]>n.d[e]^o.s<0?1:-1;return r===i?0:r>i^o.s<0?1:-1};ve.decimalPlaces=ve.dp=function(){var n=this,e=n.d.length-1,t=(e-n.e)*Et;if(e=n.d[e],e)for(;e%10==0;e/=10)t--;return t<0?0:t};ve.dividedBy=ve.div=function(n){return Gi(this,new this.constructor(n))};ve.dividedToIntegerBy=ve.idiv=function(n){var e=this,t=e.constructor;return yt(Gi(e,new t(n),0,1),t.precision)};ve.equals=ve.eq=function(n){return!this.cmp(n)};ve.exponent=function(){return Yt(this)};ve.greaterThan=ve.gt=function(n){return this.cmp(n)>0};ve.greaterThanOrEqualTo=ve.gte=function(n){return this.cmp(n)>=0};ve.isInteger=ve.isint=function(){return this.e>this.d.length-2};ve.isNegative=ve.isneg=function(){return this.s<0};ve.isPositive=ve.ispos=function(){return this.s>0};ve.isZero=function(){return this.s===0};ve.lessThan=ve.lt=function(n){return this.cmp(n)<0};ve.lessThanOrEqualTo=ve.lte=function(n){return this.cmp(n)<1};ve.logarithm=ve.log=function(n){var e,t=this,r=t.constructor,i=r.precision,o=i+5;if(n===void 0)n=new r(10);else if(n=new r(n),n.s<1||n.eq(lr))throw Error(Dr+"NaN");if(t.s<1)throw Error(Dr+(t.s?"NaN":"-Infinity"));return t.eq(lr)?new r(0):(Pt=!1,e=Gi(Qc(t,o),Qc(n,o),o),Pt=!0,yt(e,i))};ve.minus=ve.sub=function(n){var e=this;return n=new e.constructor(n),e.s==n.s?mR(e,n):fR(e,(n.s=-n.s,n))};ve.modulo=ve.mod=function(n){var e,t=this,r=t.constructor,i=r.precision;if(n=new r(n),!n.s)throw Error(Dr+"NaN");return t.s?(Pt=!1,e=Gi(t,n,0,1).times(n),Pt=!0,t.minus(e)):yt(new r(t),i)};ve.naturalExponential=ve.exp=function(){return hR(this)};ve.naturalLogarithm=ve.ln=function(){return Qc(this)};ve.negated=ve.neg=function(){var n=new this.constructor(this);return n.s=-n.s||0,n};ve.plus=ve.add=function(n){var e=this;return n=new e.constructor(n),e.s==n.s?fR(e,n):mR(e,(n.s=-n.s,n))};ve.precision=ve.sd=function(n){var e,t,r,i=this;if(n!==void 0&&n!==!!n&&n!==1&&n!==0)throw Error(fs+n);if(e=Yt(i)+1,r=i.d.length-1,t=r*Et+1,r=i.d[r],r){for(;r%10==0;r/=10)t--;for(r=i.d[0];r>=10;r/=10)t++}return n&&e>t?e:t};ve.squareRoot=ve.sqrt=function(){var n,e,t,r,i,o,s,a=this,l=a.constructor;if(a.s<1){if(!a.s)return new l(0);throw Error(Dr+"NaN")}for(n=Yt(a),Pt=!1,i=Math.sqrt(+a),i==0||i==1/0?(e=bi(a.d),(e.length+n)%2==0&&(e+="0"),i=Math.sqrt(e),n=xl((n+1)/2)-(n<0||n%2),i==1/0?e="5e"+n:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+n),r=new l(e)):r=new l(i.toString()),t=l.precision,i=s=t+3;;)if(o=r,r=o.plus(Gi(a,o,s+2)).times(.5),bi(o.d).slice(0,s)===(e=bi(r.d)).slice(0,s)){if(e=e.slice(s-3,s+1),i==s&&e=="4999"){if(yt(o,t+1,0),o.times(o).eq(a)){r=o;break}}else if(e!="9999")break;s+=4}return Pt=!0,yt(r,t)};ve.times=ve.mul=function(n){var e,t,r,i,o,s,a,l,c,u=this,d=u.constructor,f=u.d,h=(n=new d(n)).d;if(!u.s||!n.s)return new d(0);for(n.s*=u.s,t=u.e+n.e,l=f.length,c=h.length,l<c&&(o=f,f=h,h=o,s=l,l=c,c=s),o=[],s=l+c,r=s;r--;)o.push(0);for(r=c;--r>=0;){for(e=0,i=l+r;i>r;)a=o[i]+h[r]*f[i-r-1]+e,o[i--]=a%sn|0,e=a/sn|0;o[i]=(o[i]+e)%sn|0}for(;!o[--s];)o.pop();return e?++t:o.shift(),n.d=o,n.e=t,Pt?yt(n,d.precision):n};ve.toDecimalPlaces=ve.todp=function(n,e){var t=this,r=t.constructor;return t=new r(t),n===void 0?t:(Ai(n,0,Sl),e===void 0?e=r.rounding:Ai(e,0,8),yt(t,n+Yt(t)+1,e))};ve.toExponential=function(n,e){var t,r=this,i=r.constructor;return n===void 0?t=_s(r,!0):(Ai(n,0,Sl),e===void 0?e=i.rounding:Ai(e,0,8),r=yt(new i(r),n+1,e),t=_s(r,!0,n+1)),t};ve.toFixed=function(n,e){var t,r,i=this,o=i.constructor;return n===void 0?_s(i):(Ai(n,0,Sl),e===void 0?e=o.rounding:Ai(e,0,8),r=yt(new o(i),n+Yt(i)+1,e),t=_s(r.abs(),!1,n+Yt(r)+1),i.isneg()&&!i.isZero()?"-"+t:t)};ve.toInteger=ve.toint=function(){var n=this,e=n.constructor;return yt(new e(n),Yt(n)+1,e.rounding)};ve.toNumber=function(){return+this};ve.toPower=ve.pow=function(n){var e,t,r,i,o,s,a=this,l=a.constructor,c=12,u=+(n=new l(n));if(!n.s)return new l(lr);if(a=new l(a),!a.s){if(n.s<1)throw Error(Dr+"Infinity");return a}if(a.eq(lr))return a;if(r=l.precision,n.eq(lr))return yt(a,r);if(e=n.e,t=n.d.length-1,s=e>=t,o=a.s,s){if((t=u<0?-u:u)<=dR){for(i=new l(lr),e=Math.ceil(r/Et+4),Pt=!1;t%2&&(i=i.times(a),kS(i.d,e)),t=xl(t/2),t!==0;)a=a.times(a),kS(a.d,e);return Pt=!0,n.s<0?new l(lr).div(i):yt(i,r)}}else if(o<0)throw Error(Dr+"NaN");return o=o<0&&n.d[Math.max(e,t)]&1?-1:1,a.s=1,Pt=!1,i=n.times(Qc(a,r+c)),Pt=!0,i=hR(i),i.s=o,i};ve.toPrecision=function(n,e){var t,r,i=this,o=i.constructor;return n===void 0?(t=Yt(i),r=_s(i,t<=o.toExpNeg||t>=o.toExpPos)):(Ai(n,1,Sl),e===void 0?e=o.rounding:Ai(e,0,8),i=yt(new o(i),n,e),t=Yt(i),r=_s(i,n<=t||t<=o.toExpNeg,n)),r};ve.toSignificantDigits=ve.tosd=function(n,e){var t=this,r=t.constructor;return n===void 0?(n=r.precision,e=r.rounding):(Ai(n,1,Sl),e===void 0?e=r.rounding:Ai(e,0,8)),yt(new r(t),n,e)};ve.toString=ve.valueOf=ve.val=ve.toJSON=ve[Symbol.for("nodejs.util.inspect.custom")]=function(){var n=this,e=Yt(n),t=n.constructor;return _s(n,e<=t.toExpNeg||e>=t.toExpPos)};function fR(n,e){var t,r,i,o,s,a,l,c,u=n.constructor,d=u.precision;if(!n.s||!e.s)return e.s||(e=new u(n)),Pt?yt(e,d):e;if(l=n.d,c=e.d,s=n.e,i=e.e,l=l.slice(),o=s-i,o){for(o<0?(r=l,o=-o,a=c.length):(r=c,i=s,a=l.length),s=Math.ceil(d/Et),a=s>a?s+1:a+1,o>a&&(o=a,r.length=1),r.reverse();o--;)r.push(0);r.reverse()}for(a=l.length,o=c.length,a-o<0&&(o=a,r=c,c=l,l=r),t=0;o;)t=(l[--o]=l[o]+c[o]+t)/sn|0,l[o]%=sn;for(t&&(l.unshift(t),++i),a=l.length;l[--a]==0;)l.pop();return e.d=l,e.e=i,Pt?yt(e,d):e}function Ai(n,e,t){if(n!==~~n||n<e||n>t)throw Error(fs+n)}function bi(n){var e,t,r,i=n.length-1,o="",s=n[0];if(i>0){for(o+=s,e=1;e<i;e++)r=n[e]+"",t=Et-r.length,t&&(o+=go(t)),o+=r;s=n[e],r=s+"",t=Et-r.length,t&&(o+=go(t))}else if(s===0)return"0";for(;s%10===0;)s/=10;return o+s}var Gi=function(){function n(r,i){var o,s=0,a=r.length;for(r=r.slice();a--;)o=r[a]*i+s,r[a]=o%sn|0,s=o/sn|0;return s&&r.unshift(s),r}function e(r,i,o,s){var a,l;if(o!=s)l=o>s?1:-1;else for(a=l=0;a<o;a++)if(r[a]!=i[a]){l=r[a]>i[a]?1:-1;break}return l}function t(r,i,o){for(var s=0;o--;)r[o]-=s,s=r[o]<i[o]?1:0,r[o]=s*sn+r[o]-i[o];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,o,s){var a,l,c,u,d,f,h,m,g,p,b,y,C,A,w,S,_,v,x=r.constructor,T=r.s==i.s?1:-1,E=r.d,k=i.d;if(!r.s)return new x(r);if(!i.s)throw Error(Dr+"Division by zero");for(l=r.e-i.e,_=k.length,w=E.length,h=new x(T),m=h.d=[],c=0;k[c]==(E[c]||0);)++c;if(k[c]>(E[c]||0)&&--l,o==null?y=o=x.precision:s?y=o+(Yt(r)-Yt(i))+1:y=o,y<0)return new x(0);if(y=y/Et+2|0,c=0,_==1)for(u=0,k=k[0],y++;(c<w||u)&&y--;c++)C=u*sn+(E[c]||0),m[c]=C/k|0,u=C%k|0;else{for(u=sn/(k[0]+1)|0,u>1&&(k=n(k,u),E=n(E,u),_=k.length,w=E.length),A=_,g=E.slice(0,_),p=g.length;p<_;)g[p++]=0;v=k.slice(),v.unshift(0),S=k[0],k[1]>=sn/2&&++S;do u=0,a=e(k,g,_,p),a<0?(b=g[0],_!=p&&(b=b*sn+(g[1]||0)),u=b/S|0,u>1?(u>=sn&&(u=sn-1),d=n(k,u),f=d.length,p=g.length,a=e(d,g,f,p),a==1&&(u--,t(d,_<f?v:k,f))):(u==0&&(a=u=1),d=k.slice()),f=d.length,f<p&&d.unshift(0),t(g,d,p),a==-1&&(p=g.length,a=e(k,g,_,p),a<1&&(u++,t(g,_<p?v:k,p))),p=g.length):a===0&&(u++,g=[0]),m[c++]=u,a&&g[0]?g[p++]=E[A]||0:(g=[E[A]],p=1);while((A++<w||g[0]!==void 0)&&y--)}return m[0]||m.shift(),h.e=l,yt(h,s?o+Yt(h)+1:o)}}();function hR(n,e){var t,r,i,o,s,a,l=0,c=0,u=n.constructor,d=u.precision;if(Yt(n)>16)throw Error(Zw+Yt(n));if(!n.s)return new u(lr);for(Pt=!1,a=d,s=new u(.03125);n.abs().gte(.1);)n=n.times(s),c+=5;for(r=Math.log(es(2,c))/Math.LN10*2+5|0,a+=r,t=i=o=new u(lr),u.precision=a;;){if(i=yt(i.times(n),a),t=t.times(++l),s=o.plus(Gi(i,t,a)),bi(s.d).slice(0,a)===bi(o.d).slice(0,a)){for(;c--;)o=yt(o.times(o),a);return u.precision=d,e==null?(Pt=!0,yt(o,d)):o}o=s}}function Yt(n){for(var e=n.e*Et,t=n.d[0];t>=10;t/=10)e++;return e}function Pp(n,e,t){if(e>n.LN10.sd())throw Pt=!0,t&&(n.precision=t),Error(Dr+"LN10 precision limit exceeded");return yt(new n(n.LN10),e)}function go(n){for(var e="";n--;)e+="0";return e}function Qc(n,e){var t,r,i,o,s,a,l,c,u,d=1,f=10,h=n,m=h.d,g=h.constructor,p=g.precision;if(h.s<1)throw Error(Dr+(h.s?"NaN":"-Infinity"));if(h.eq(lr))return new g(0);if(e==null?(Pt=!1,c=p):c=e,h.eq(10))return e==null&&(Pt=!0),Pp(g,c);if(c+=f,g.precision=c,t=bi(m),r=t.charAt(0),o=Yt(h),Math.abs(o)<15e14){for(;r<7&&r!=1||r==1&&t.charAt(1)>3;)h=h.times(n),t=bi(h.d),r=t.charAt(0),d++;o=Yt(h),r>1?(h=new g("0."+t),o++):h=new g(r+"."+t.slice(1))}else return l=Pp(g,c+2,p).times(o+""),h=Qc(new g(r+"."+t.slice(1)),c-f).plus(l),g.precision=p,e==null?(Pt=!0,yt(h,p)):h;for(a=s=h=Gi(h.minus(lr),h.plus(lr),c),u=yt(h.times(h),c),i=3;;){if(s=yt(s.times(u),c),l=a.plus(Gi(s,new g(i),c)),bi(l.d).slice(0,c)===bi(a.d).slice(0,c))return a=a.times(2),o!==0&&(a=a.plus(Pp(g,c+2,p).times(o+""))),a=Gi(a,new g(d),c),g.precision=p,e==null?(Pt=!0,yt(a,p)):a;a=l,i+=2}}function ES(n,e){var t,r,i;for((t=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(t<0&&(t=r),t+=+e.slice(r+1),e=e.substring(0,r)):t<0&&(t=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,t=t-r-1,n.e=xl(t/Et),n.d=[],r=(t+1)%Et,t<0&&(r+=Et),r<i){for(r&&n.d.push(+e.slice(0,r)),i-=Et;r<i;)n.d.push(+e.slice(r,r+=Et));e=e.slice(r),r=Et-e.length}else r-=i;for(;r--;)e+="0";if(n.d.push(+e),Pt&&(n.e>yh||n.e<-yh))throw Error(Zw+t)}else n.s=0,n.e=0,n.d=[0];return n}function yt(n,e,t){var r,i,o,s,a,l,c,u,d=n.d;for(s=1,o=d[0];o>=10;o/=10)s++;if(r=e-s,r<0)r+=Et,i=e,c=d[u=0];else{if(u=Math.ceil((r+1)/Et),o=d.length,u>=o)return n;for(c=o=d[u],s=1;o>=10;o/=10)s++;r%=Et,i=r-Et+s}if(t!==void 0&&(o=es(10,s-i-1),a=c/o%10|0,l=e<0||d[u+1]!==void 0||c%o,l=t<4?(a||l)&&(t==0||t==(n.s<0?3:2)):a>5||a==5&&(t==4||l||t==6&&(r>0?i>0?c/es(10,s-i):0:d[u-1])%10&1||t==(n.s<0?8:7))),e<1||!d[0])return l?(o=Yt(n),d.length=1,e=e-o-1,d[0]=es(10,(Et-e%Et)%Et),n.e=xl(-e/Et)||0):(d.length=1,d[0]=n.e=n.s=0),n;if(r==0?(d.length=u,o=1,u--):(d.length=u+1,o=es(10,Et-r),d[u]=i>0?(c/es(10,s-i)%es(10,i)|0)*o:0),l)for(;;)if(u==0){(d[0]+=o)==sn&&(d[0]=1,++n.e);break}else{if(d[u]+=o,d[u]!=sn)break;d[u--]=0,o=1}for(r=d.length;d[--r]===0;)d.pop();if(Pt&&(n.e>yh||n.e<-yh))throw Error(Zw+Yt(n));return n}function mR(n,e){var t,r,i,o,s,a,l,c,u,d,f=n.constructor,h=f.precision;if(!n.s||!e.s)return e.s?e.s=-e.s:e=new f(n),Pt?yt(e,h):e;if(l=n.d,d=e.d,r=e.e,c=n.e,l=l.slice(),s=c-r,s){for(u=s<0,u?(t=l,s=-s,a=d.length):(t=d,r=c,a=l.length),i=Math.max(Math.ceil(h/Et),a)+2,s>i&&(s=i,t.length=1),t.reverse(),i=s;i--;)t.push(0);t.reverse()}else{for(i=l.length,a=d.length,u=i<a,u&&(a=i),i=0;i<a;i++)if(l[i]!=d[i]){u=l[i]<d[i];break}s=0}for(u&&(t=l,l=d,d=t,e.s=-e.s),a=l.length,i=d.length-a;i>0;--i)l[a++]=0;for(i=d.length;i>s;){if(l[--i]<d[i]){for(o=i;o&&l[--o]===0;)l[o]=sn-1;--l[o],l[i]+=sn}l[i]-=d[i]}for(;l[--a]===0;)l.pop();for(;l[0]===0;l.shift())--r;return l[0]?(e.d=l,e.e=r,Pt?yt(e,h):e):new f(0)}function _s(n,e,t){var r,i=Yt(n),o=bi(n.d),s=o.length;return e?(t&&(r=t-s)>0?o=o.charAt(0)+"."+o.slice(1)+go(r):s>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(i<0?"e":"e+")+i):i<0?(o="0."+go(-i-1)+o,t&&(r=t-s)>0&&(o+=go(r))):i>=s?(o+=go(i+1-s),t&&(r=t-i-1)>0&&(o=o+"."+go(r))):((r=i+1)<s&&(o=o.slice(0,r)+"."+o.slice(r)),t&&(r=t-s)>0&&(i+1===s&&(o+="."),o+=go(r))),n.s<0?"-"+o:o}function kS(n,e){if(n.length>e)return n.length=e,!0}function gR(n){var e,t,r;function i(o){var s=this;if(!(s instanceof i))return new i(o);if(s.constructor=i,o instanceof i){s.s=o.s,s.e=o.e,s.d=(o=o.d)?o.slice():o;return}if(typeof o=="number"){if(o*0!==0)throw Error(fs+o);if(o>0)s.s=1;else if(o<0)o=-o,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(o===~~o&&o<1e7){s.e=0,s.d=[o];return}return ES(s,o.toString())}else if(typeof o!="string")throw Error(fs+o);if(o.charCodeAt(0)===45?(o=o.slice(1),s.s=-1):s.s=1,xZ.test(o))ES(s,o);else throw Error(fs+o)}if(i.prototype=ve,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=gR,i.config=i.set=AZ,n===void 0&&(n={}),n)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)n.hasOwnProperty(t=r[e++])||(n[t]=this[t]);return i.config(n),i}function AZ(n){if(!n||typeof n!="object")throw Error(Dr+"Object expected");var e,t,r,i=["precision",1,Sl,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=n[t=i[e]])!==void 0)if(xl(r)===r&&r>=i[e+1]&&r<=i[e+2])this[t]=r;else throw Error(fs+t+": "+r);if((r=n[t="LN10"])!==void 0)if(r==Math.LN10)this[t]=new this(r);else throw Error(fs+t+": "+r);return this}var Jw=gR(SZ);lr=new Jw(1);const ht=Jw;function TZ(n){return IZ(n)||PZ(n)||kZ(n)||EZ()}function EZ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kZ(n,e){if(n){if(typeof n=="string")return pb(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return pb(n,e)}}function PZ(n){if(typeof Symbol<"u"&&Symbol.iterator in Object(n))return Array.from(n)}function IZ(n){if(Array.isArray(n))return pb(n)}function pb(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}var OZ=function(e){return e},pR={},vR=function(e){return e===pR},PS=function(e){return function t(){return arguments.length===0||arguments.length===1&&vR(arguments.length<=0?void 0:arguments[0])?t:e.apply(void 0,arguments)}},RZ=function n(e,t){return e===1?t:PS(function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];var s=i.filter(function(a){return a!==pR}).length;return s>=e?t.apply(void 0,i):n(e-s,PS(function(){for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];var u=i.map(function(d){return vR(d)?l.shift():d});return t.apply(void 0,TZ(u).concat(l))}))})},Gm=function(e){return RZ(e.length,e)},vb=function(e,t){for(var r=[],i=e;i<t;++i)r[i-e]=i;return r},MZ=Gm(function(n,e){return Array.isArray(e)?e.map(n):Object.keys(e).map(function(t){return e[t]}).map(n)}),DZ=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(!t.length)return OZ;var i=t.reverse(),o=i[0],s=i.slice(1);return function(){return s.reduce(function(a,l){return l(a)},o.apply(void 0,arguments))}},bb=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},bR=function(e){var t=null,r=null;return function(){for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return t&&o.every(function(a,l){return a===t[l]})||(t=o,r=e.apply(void 0,o)),r}};function BZ(n){var e;return n===0?e=1:e=Math.floor(new ht(n).abs().log(10).toNumber())+1,e}function NZ(n,e,t){for(var r=new ht(n),i=0,o=[];r.lt(e)&&i<1e5;)o.push(r.toNumber()),r=r.add(t),i++;return o}var LZ=Gm(function(n,e,t){var r=+n,i=+e;return r+t*(i-r)}),FZ=Gm(function(n,e,t){var r=e-+n;return r=r||1/0,(t-n)/r}),$Z=Gm(function(n,e,t){var r=e-+n;return r=r||1/0,Math.max(0,Math.min(1,(t-n)/r))});const qm={rangeStep:NZ,getDigitCount:BZ,interpolateNumber:LZ,uninterpolateNumber:FZ,uninterpolateTruncation:$Z};function yb(n){return jZ(n)||zZ(n)||yR(n)||VZ()}function VZ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zZ(n){if(typeof Symbol<"u"&&Symbol.iterator in Object(n))return Array.from(n)}function jZ(n){if(Array.isArray(n))return wb(n)}function eu(n,e){return UZ(n)||HZ(n,e)||yR(n,e)||WZ()}function WZ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yR(n,e){if(n){if(typeof n=="string")return wb(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return wb(n,e)}}function wb(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function HZ(n,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(n)))){var t=[],r=!0,i=!1,o=void 0;try{for(var s=n[Symbol.iterator](),a;!(r=(a=s.next()).done)&&(t.push(a.value),!(e&&t.length===e));r=!0);}catch(l){i=!0,o=l}finally{try{!r&&s.return!=null&&s.return()}finally{if(i)throw o}}return t}}function UZ(n){if(Array.isArray(n))return n}function wR(n){var e=eu(n,2),t=e[0],r=e[1],i=t,o=r;return t>r&&(i=r,o=t),[i,o]}function _R(n,e,t){if(n.lte(0))return new ht(0);var r=qm.getDigitCount(n.toNumber()),i=new ht(10).pow(r),o=n.div(i),s=r!==1?.05:.1,a=new ht(Math.ceil(o.div(s).toNumber())).add(t).mul(s),l=a.mul(i);return e?l:new ht(Math.ceil(l))}function GZ(n,e,t){var r=1,i=new ht(n);if(!i.isint()&&t){var o=Math.abs(n);o<1?(r=new ht(10).pow(qm.getDigitCount(n)-1),i=new ht(Math.floor(i.div(r).toNumber())).mul(r)):o>1&&(i=new ht(Math.floor(n)))}else n===0?i=new ht(Math.floor((e-1)/2)):t||(i=new ht(Math.floor(n)));var s=Math.floor((e-1)/2),a=DZ(MZ(function(l){return i.add(new ht(l-s).mul(r)).toNumber()}),vb);return a(0,e)}function CR(n,e,t,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-n)/(t-1)))return{step:new ht(0),tickMin:new ht(0),tickMax:new ht(0)};var o=_R(new ht(e).sub(n).div(t-1),r,i),s;n<=0&&e>=0?s=new ht(0):(s=new ht(n).add(e).div(2),s=s.sub(new ht(s).mod(o)));var a=Math.ceil(s.sub(n).div(o).toNumber()),l=Math.ceil(new ht(e).sub(s).div(o).toNumber()),c=a+l+1;return c>t?CR(n,e,t,r,i+1):(c<t&&(l=e>0?l+(t-c):l,a=e>0?a:a+(t-c)),{step:o,tickMin:s.sub(new ht(a).mul(o)),tickMax:s.add(new ht(l).mul(o))})}function qZ(n){var e=eu(n,2),t=e[0],r=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(i,2),a=wR([t,r]),l=eu(a,2),c=l[0],u=l[1];if(c===-1/0||u===1/0){var d=u===1/0?[c].concat(yb(vb(0,i-1).map(function(){return 1/0}))):[].concat(yb(vb(0,i-1).map(function(){return-1/0})),[u]);return t>r?bb(d):d}if(c===u)return GZ(c,i,o);var f=CR(c,u,s,o),h=f.step,m=f.tickMin,g=f.tickMax,p=qm.rangeStep(m,g.add(new ht(.1).mul(h)),h);return t>r?bb(p):p}function KZ(n,e){var t=eu(n,2),r=t[0],i=t[1],o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=wR([r,i]),a=eu(s,2),l=a[0],c=a[1];if(l===-1/0||c===1/0)return[r,i];if(l===c)return[l];var u=Math.max(e,2),d=_R(new ht(c).sub(l).div(u-1),o,0),f=[].concat(yb(qm.rangeStep(new ht(l),new ht(c).sub(new ht(.99).mul(d)),d)),[c]);return r>i?bb(f):f}var YZ=bR(qZ),XZ=bR(KZ),ZZ="Invariant failed";function Po(n,e){throw new Error(ZZ)}var JZ=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Na(n){"@babel/helpers - typeof";return Na=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Na(n)}function wh(){return wh=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},wh.apply(this,arguments)}function QZ(n,e){return rJ(n)||nJ(n,e)||tJ(n,e)||eJ()}function eJ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tJ(n,e){if(n){if(typeof n=="string")return IS(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return IS(n,e)}}function IS(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function nJ(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,o,s,a=[],l=!0,c=!1;try{if(o=(t=t.call(n)).next,e!==0)for(;!(l=(r=o.call(t)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function rJ(n){if(Array.isArray(n))return n}function iJ(n,e){if(n==null)return{};var t=oJ(n,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function oJ(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function sJ(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function aJ(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,AR(r.key),r)}}function lJ(n,e,t){return e&&aJ(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function cJ(n,e,t){return e=_h(e),uJ(n,SR()?Reflect.construct(e,t||[],_h(n).constructor):e.apply(n,t))}function uJ(n,e){if(e&&(Na(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dJ(n)}function dJ(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function SR(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(SR=function(){return!!n})()}function _h(n){return _h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_h(n)}function fJ(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&_b(n,e)}function _b(n,e){return _b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},_b(n,e)}function xR(n,e,t){return e=AR(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function AR(n){var e=hJ(n,"string");return Na(e)=="symbol"?e:e+""}function hJ(n,e){if(Na(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Na(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var Km=function(n){function e(){return sJ(this,e),cJ(this,e,arguments)}return fJ(e,n),lJ(e,[{key:"render",value:function(){var r=this.props,i=r.offset,o=r.layout,s=r.width,a=r.dataKey,l=r.data,c=r.dataPointFormatter,u=r.xAxis,d=r.yAxis,f=iJ(r,JZ),h=He(f,!1);this.props.direction==="x"&&u.type!=="number"&&Po();var m=l.map(function(g){var p=c(g,a),b=p.x,y=p.y,C=p.value,A=p.errorVal;if(!A)return null;var w=[],S,_;if(Array.isArray(A)){var v=QZ(A,2);S=v[0],_=v[1]}else S=_=A;if(o==="vertical"){var x=u.scale,T=y+i,E=T+s,k=T-s,I=x(C-S),B=x(C+_);w.push({x1:B,y1:E,x2:B,y2:k}),w.push({x1:I,y1:T,x2:B,y2:T}),w.push({x1:I,y1:E,x2:I,y2:k})}else if(o==="horizontal"){var D=d.scale,F=b+i,L=F-s,H=F+s,$=D(C-S),ne=D(C+_);w.push({x1:L,y1:ne,x2:H,y2:ne}),w.push({x1:F,y1:$,x2:F,y2:ne}),w.push({x1:L,y1:$,x2:H,y2:$})}return O.createElement(It,wh({className:"recharts-errorBar",key:"bar-".concat(w.map(function(Z){return"".concat(Z.x1,"-").concat(Z.x2,"-").concat(Z.y1,"-").concat(Z.y2)}))},h),w.map(function(Z){return O.createElement("line",wh({},Z,{key:"line-".concat(Z.x1,"-").concat(Z.x2,"-").concat(Z.y1,"-").concat(Z.y2)}))}))});return O.createElement(It,{className:"recharts-errorBars"},m)}}])}(O.Component);xR(Km,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});xR(Km,"displayName","ErrorBar");function tu(n){"@babel/helpers - typeof";return tu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tu(n)}function OS(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Wo(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?OS(Object(t),!0).forEach(function(r){mJ(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):OS(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function mJ(n,e,t){return e=gJ(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function gJ(n){var e=pJ(n,"string");return tu(e)=="symbol"?e:e+""}function pJ(n,e){if(tu(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(tu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var TR=function(e){var t=e.children,r=e.formattedGraphicalItems,i=e.legendWidth,o=e.legendContent,s=sr(t,wa);if(!s)return null;var a=wa.defaultProps,l=a!==void 0?Wo(Wo({},a),s.props):{},c;return s.props&&s.props.payload?c=s.props&&s.props.payload:o==="children"?c=(r||[]).reduce(function(u,d){var f=d.item,h=d.props,m=h.sectors||h.data||[];return u.concat(m.map(function(g){return{type:s.props.iconType||f.props.legendType,value:g.name,color:g.fill,payload:g}}))},[]):c=(r||[]).map(function(u){var d=u.item,f=d.type.defaultProps,h=f!==void 0?Wo(Wo({},f),d.props):{},m=h.dataKey,g=h.name,p=h.legendType,b=h.hide;return{inactive:b,dataKey:m,type:l.iconType||p||"square",color:Qw(d),value:g||m,payload:h}}),Wo(Wo(Wo({},l),wa.getWithHeight(s,i)),{},{payload:c,item:s})};function nu(n){"@babel/helpers - typeof";return nu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nu(n)}function RS(n){return wJ(n)||yJ(n)||bJ(n)||vJ()}function vJ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bJ(n,e){if(n){if(typeof n=="string")return Cb(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Cb(n,e)}}function yJ(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function wJ(n){if(Array.isArray(n))return Cb(n)}function Cb(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function MS(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Rt(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?MS(Object(t),!0).forEach(function(r){Ca(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):MS(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Ca(n,e,t){return e=_J(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function _J(n){var e=CJ(n,"string");return nu(e)=="symbol"?e:e+""}function CJ(n,e){if(nu(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(nu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function gr(n,e,t){return Ke(n)||Ke(e)?t:en(e)?Ir(n,e,t):ze(e)?e(n):t}function Cc(n,e,t,r){var i=yZ(n,function(a){return gr(a,e)});if(t==="number"){var o=i.filter(function(a){return fe(a)||parseFloat(a)});return o.length?[Um(o),bo(o)]:[1/0,-1/0]}var s=r?i.filter(function(a){return!Ke(a)}):i;return s.map(function(a){return en(a)||a instanceof Date?a:""})}var SJ=function(e){var t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,s=-1,a=(t=r==null?void 0:r.length)!==null&&t!==void 0?t:0;if(a<=1)return 0;if(o&&o.axisType==="angleAxis"&&Math.abs(Math.abs(o.range[1]-o.range[0])-360)<=1e-6)for(var l=o.range,c=0;c<a;c++){var u=c>0?i[c-1].coordinate:i[a-1].coordinate,d=i[c].coordinate,f=c>=a-1?i[0].coordinate:i[c+1].coordinate,h=void 0;if(Jr(d-u)!==Jr(f-d)){var m=[];if(Jr(f-d)===Jr(l[1]-l[0])){h=f;var g=d+l[1]-l[0];m[0]=Math.min(g,(g+u)/2),m[1]=Math.max(g,(g+u)/2)}else{h=u;var p=f+l[1]-l[0];m[0]=Math.min(d,(p+d)/2),m[1]=Math.max(d,(p+d)/2)}var b=[Math.min(d,(h+d)/2),Math.max(d,(h+d)/2)];if(e>b[0]&&e<=b[1]||e>=m[0]&&e<=m[1]){s=i[c].index;break}}else{var y=Math.min(u,f),C=Math.max(u,f);if(e>(y+d)/2&&e<=(C+d)/2){s=i[c].index;break}}}else for(var A=0;A<a;A++)if(A===0&&e<=(r[A].coordinate+r[A+1].coordinate)/2||A>0&&A<a-1&&e>(r[A].coordinate+r[A-1].coordinate)/2&&e<=(r[A].coordinate+r[A+1].coordinate)/2||A===a-1&&e>(r[A].coordinate+r[A-1].coordinate)/2){s=r[A].index;break}return s},Qw=function(e){var t,r=e,i=r.type.displayName,o=(t=e.type)!==null&&t!==void 0&&t.defaultProps?Rt(Rt({},e.type.defaultProps),e.props):e.props,s=o.stroke,a=o.fill,l;switch(i){case"Line":l=s;break;case"Area":case"Radar":l=s&&s!=="none"?s:a;break;default:l=a;break}return l},xJ=function(e){var t=e.barSize,r=e.totalSize,i=e.stackGroups,o=i===void 0?{}:i;if(!o)return{};for(var s={},a=Object.keys(o),l=0,c=a.length;l<c;l++)for(var u=o[a[l]].stackGroups,d=Object.keys(u),f=0,h=d.length;f<h;f++){var m=u[d[f]],g=m.items,p=m.cateAxisId,b=g.filter(function(_){return Ui(_.type).indexOf("Bar")>=0});if(b&&b.length){var y=b[0].type.defaultProps,C=y!==void 0?Rt(Rt({},y),b[0].props):b[0].props,A=C.barSize,w=C[p];s[w]||(s[w]=[]);var S=Ke(A)?t:A;s[w].push({item:b[0],stackList:b.slice(1),barSize:Ke(S)?void 0:ws(S,r,0)})}}return s},AJ=function(e){var t=e.barGap,r=e.barCategoryGap,i=e.bandSize,o=e.sizeList,s=o===void 0?[]:o,a=e.maxBarSize,l=s.length;if(l<1)return null;var c=ws(t,i,0,!0),u,d=[];if(s[0].barSize===+s[0].barSize){var f=!1,h=i/l,m=s.reduce(function(A,w){return A+w.barSize||0},0);m+=(l-1)*c,m>=i&&(m-=(l-1)*c,c=0),m>=i&&h>0&&(f=!0,h*=.9,m=l*h);var g=(i-m)/2>>0,p={offset:g-c,size:0};u=s.reduce(function(A,w){var S={item:w.item,position:{offset:p.offset+p.size+c,size:f?h:w.barSize}},_=[].concat(RS(A),[S]);return p=_[_.length-1].position,w.stackList&&w.stackList.length&&w.stackList.forEach(function(v){_.push({item:v,position:p})}),_},d)}else{var b=ws(r,i,0,!0);i-2*b-(l-1)*c<=0&&(c=0);var y=(i-2*b-(l-1)*c)/l;y>1&&(y>>=0);var C=a===+a?Math.min(y,a):y;u=s.reduce(function(A,w,S){var _=[].concat(RS(A),[{item:w.item,position:{offset:b+(y+c)*S+(y-C)/2,size:C}}]);return w.stackList&&w.stackList.length&&w.stackList.forEach(function(v){_.push({item:v,position:_[_.length-1].position})}),_},d)}return u},TJ=function(e,t,r,i){var o=r.children,s=r.width,a=r.margin,l=s-(a.left||0)-(a.right||0),c=TR({children:o,legendWidth:l});if(c){var u=i||{},d=u.width,f=u.height,h=c.align,m=c.verticalAlign,g=c.layout;if((g==="vertical"||g==="horizontal"&&m==="middle")&&h!=="center"&&fe(e[h]))return Rt(Rt({},e),{},Ca({},h,e[h]+(d||0)));if((g==="horizontal"||g==="vertical"&&h==="center")&&m!=="middle"&&fe(e[m]))return Rt(Rt({},e),{},Ca({},m,e[m]+(f||0)))}return e},EJ=function(e,t,r){return Ke(t)?!0:e==="horizontal"?t==="yAxis":e==="vertical"||r==="x"?t==="xAxis":r==="y"?t==="yAxis":!0},ER=function(e,t,r,i,o){var s=t.props.children,a=ni(s,Km).filter(function(c){return EJ(i,o,c.props.direction)});if(a&&a.length){var l=a.map(function(c){return c.props.dataKey});return e.reduce(function(c,u){var d=gr(u,r);if(Ke(d))return c;var f=Array.isArray(d)?[Um(d),bo(d)]:[d,d],h=l.reduce(function(m,g){var p=gr(u,g,0),b=f[0]-Math.abs(Array.isArray(p)?p[0]:p),y=f[1]+Math.abs(Array.isArray(p)?p[1]:p);return[Math.min(b,m[0]),Math.max(y,m[1])]},[1/0,-1/0]);return[Math.min(h[0],c[0]),Math.max(h[1],c[1])]},[1/0,-1/0])}return null},kJ=function(e,t,r,i,o){var s=t.map(function(a){return ER(e,a,r,o,i)}).filter(function(a){return!Ke(a)});return s&&s.length?s.reduce(function(a,l){return[Math.min(a[0],l[0]),Math.max(a[1],l[1])]},[1/0,-1/0]):null},kR=function(e,t,r,i,o){var s=t.map(function(l){var c=l.props.dataKey;return r==="number"&&c&&ER(e,l,c,i)||Cc(e,c,r,o)});if(r==="number")return s.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]);var a={};return s.reduce(function(l,c){for(var u=0,d=c.length;u<d;u++)a[c[u]]||(a[c[u]]=!0,l.push(c[u]));return l},[])},PR=function(e,t){return e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis"},ss=function(e,t,r){if(!e)return null;var i=e.scale,o=e.duplicateDomain,s=e.type,a=e.range,l=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,c=(t||r)&&s==="category"&&i.bandwidth?i.bandwidth()/l:0;if(c=e.axisType==="angleAxis"&&(a==null?void 0:a.length)>=2?Jr(a[0]-a[1])*2*c:c,t&&(e.ticks||e.niceTicks)){var u=(e.ticks||e.niceTicks).map(function(d){var f=o?o.indexOf(d):d;return{coordinate:i(f)+c,value:d,offset:c}});return u.filter(function(d){return!pl(d.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(d,f){return{coordinate:i(d)+c,value:d,index:f,offset:c}}):i.ticks&&!r?i.ticks(e.tickCount).map(function(d){return{coordinate:i(d)+c,value:d,offset:c}}):i.domain().map(function(d,f){return{coordinate:i(d)+c,value:o?o[d]:d,index:f,offset:c}})},Ip=new WeakMap,Yd=function(e,t){if(typeof t!="function")return e;Ip.has(e)||Ip.set(e,new WeakMap);var r=Ip.get(e);if(r.has(t))return r.get(t);var i=function(){e.apply(void 0,arguments),t.apply(void 0,arguments)};return r.set(t,i),i},PJ=function(e,t,r){var i=e.scale,o=e.type,s=e.layout,a=e.axisType;if(i==="auto")return s==="radial"&&a==="radiusAxis"?{scale:qc(),realScaleType:"band"}:s==="radial"&&a==="angleAxis"?{scale:gh(),realScaleType:"linear"}:o==="category"&&t&&(t.indexOf("LineChart")>=0||t.indexOf("AreaChart")>=0||t.indexOf("ComposedChart")>=0&&!r)?{scale:_c(),realScaleType:"point"}:o==="category"?{scale:qc(),realScaleType:"band"}:{scale:gh(),realScaleType:"linear"};if(Yu(i)){var l="scale".concat(Rm(i));return{scale:(TS[l]||_c)(),realScaleType:TS[l]?l:"point"}}return ze(i)?{scale:i}:{scale:_c(),realScaleType:"point"}},DS=1e-4,IJ=function(e){var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,i=e.range(),o=Math.min(i[0],i[1])-DS,s=Math.max(i[0],i[1])+DS,a=e(t[0]),l=e(t[r-1]);(a<o||a>s||l<o||l>s)&&e.domain([t[0],t[r-1]])}},OJ=function(e,t){if(!e)return null;for(var r=0,i=e.length;r<i;r++)if(e[r].item===t)return e[r].position;return null},RJ=function(e,t){if(!t||t.length!==2||!fe(t[0])||!fe(t[1]))return e;var r=Math.min(t[0],t[1]),i=Math.max(t[0],t[1]),o=[e[0],e[1]];return(!fe(e[0])||e[0]<r)&&(o[0]=r),(!fe(e[1])||e[1]>i)&&(o[1]=i),o[0]>i&&(o[0]=i),o[1]<r&&(o[1]=r),o},MJ=function(e){var t=e.length;if(!(t<=0))for(var r=0,i=e[0].length;r<i;++r)for(var o=0,s=0,a=0;a<t;++a){var l=pl(e[a][r][1])?e[a][r][0]:e[a][r][1];l>=0?(e[a][r][0]=o,e[a][r][1]=o+l,o=e[a][r][1]):(e[a][r][0]=s,e[a][r][1]=s+l,s=e[a][r][1])}},DJ=function(e){var t=e.length;if(!(t<=0))for(var r=0,i=e[0].length;r<i;++r)for(var o=0,s=0;s<t;++s){var a=pl(e[s][r][1])?e[s][r][0]:e[s][r][1];a>=0?(e[s][r][0]=o,e[s][r][1]=o+a,o=e[s][r][1]):(e[s][r][0]=0,e[s][r][1]=0)}},BJ={sign:MJ,expand:Y7,none:ka,silhouette:X7,wiggle:Z7,positive:DJ},NJ=function(e,t,r){var i=t.map(function(a){return a.props.dataKey}),o=BJ[r],s=K7().keys(i).value(function(a,l){return+gr(a,l,0)}).order(qv).offset(o);return s(e)},LJ=function(e,t,r,i,o,s){if(!e)return null;var a=s?t.reverse():t,l={},c=a.reduce(function(d,f){var h,m=(h=f.type)!==null&&h!==void 0&&h.defaultProps?Rt(Rt({},f.type.defaultProps),f.props):f.props,g=m.stackId,p=m.hide;if(p)return d;var b=m[r],y=d[b]||{hasStack:!1,stackGroups:{}};if(en(g)){var C=y.stackGroups[g]||{numericAxisId:r,cateAxisId:i,items:[]};C.items.push(f),y.hasStack=!0,y.stackGroups[g]=C}else y.stackGroups[Xu("_stackId_")]={numericAxisId:r,cateAxisId:i,items:[f]};return Rt(Rt({},d),{},Ca({},b,y))},l),u={};return Object.keys(c).reduce(function(d,f){var h=c[f];if(h.hasStack){var m={};h.stackGroups=Object.keys(h.stackGroups).reduce(function(g,p){var b=h.stackGroups[p];return Rt(Rt({},g),{},Ca({},p,{numericAxisId:r,cateAxisId:i,items:b.items,stackedData:NJ(e,b.items,o)}))},m)}return Rt(Rt({},d),{},Ca({},f,h))},u)},FJ=function(e,t){var r=t.realScaleType,i=t.type,o=t.tickCount,s=t.originalDomain,a=t.allowDecimals,l=r||t.scale;if(l!=="auto"&&l!=="linear")return null;if(o&&i==="number"&&s&&(s[0]==="auto"||s[1]==="auto")){var c=e.domain();if(!c.length)return null;var u=YZ(c,o,a);return e.domain([Um(u),bo(u)]),{niceTicks:u}}if(o&&i==="number"){var d=e.domain(),f=XZ(d,o,a);return{niceTicks:f}}return null};function BS(n){var e=n.axis,t=n.ticks,r=n.bandSize,i=n.entry,o=n.index,s=n.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!Ke(i[e.dataKey])){var a=Gf(t,"value",i[e.dataKey]);if(a)return a.coordinate+r/2}return t[o]?t[o].coordinate+r/2:null}var l=gr(i,Ke(s)?e.dataKey:s);return Ke(l)?null:e.scale(l)}var NS=function(e){var t=e.axis,r=e.ticks,i=e.offset,o=e.bandSize,s=e.entry,a=e.index;if(t.type==="category")return r[a]?r[a].coordinate+i:null;var l=gr(s,t.dataKey,t.domain[a]);return Ke(l)?null:t.scale(l)-o/2+i},$J=function(e){var t=e.numericAxis,r=t.scale.domain();if(t.type==="number"){var i=Math.min(r[0],r[1]),o=Math.max(r[0],r[1]);return i<=0&&o>=0?0:o<0?o:i}return r[0]},VJ=function(e,t){var r,i=(r=e.type)!==null&&r!==void 0&&r.defaultProps?Rt(Rt({},e.type.defaultProps),e.props):e.props,o=i.stackId;if(en(o)){var s=t[o];if(s){var a=s.items.indexOf(e);return a>=0?s.stackedData[a]:null}}return null},zJ=function(e){return e.reduce(function(t,r){return[Um(r.concat([t[0]]).filter(fe)),bo(r.concat([t[1]]).filter(fe))]},[1/0,-1/0])},IR=function(e,t,r){return Object.keys(e).reduce(function(i,o){var s=e[o],a=s.stackedData,l=a.reduce(function(c,u){var d=zJ(u.slice(t,r+1));return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]);return[Math.min(l[0],i[0]),Math.max(l[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},LS=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,FS=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Sb=function(e,t,r){if(ze(e))return e(t,r);if(!Array.isArray(e))return t;var i=[];if(fe(e[0]))i[0]=r?e[0]:Math.min(e[0],t[0]);else if(LS.test(e[0])){var o=+LS.exec(e[0])[1];i[0]=t[0]-o}else ze(e[0])?i[0]=e[0](t[0]):i[0]=t[0];if(fe(e[1]))i[1]=r?e[1]:Math.max(e[1],t[1]);else if(FS.test(e[1])){var s=+FS.exec(e[1])[1];i[1]=t[1]+s}else ze(e[1])?i[1]=e[1](t[1]):i[1]=t[1];return i},Ch=function(e,t,r){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!r||i>0)return i}if(e&&t&&t.length>=2){for(var o=Ew(t,function(d){return d.coordinate}),s=1/0,a=1,l=o.length;a<l;a++){var c=o[a],u=o[a-1];s=Math.min((c.coordinate||0)-(u.coordinate||0),s)}return s===1/0?0:s}return r?void 0:0},$S=function(e,t,r){return!e||!e.length||Jc(e,Ir(r,"type.defaultProps.domain"))?t:e},OR=function(e,t){var r=e.type.defaultProps?Rt(Rt({},e.type.defaultProps),e.props):e.props,i=r.dataKey,o=r.name,s=r.unit,a=r.formatter,l=r.tooltipType,c=r.chartType,u=r.hide;return Rt(Rt({},He(e,!1)),{},{dataKey:i,unit:s,formatter:a,name:o||i,color:Qw(e),value:gr(t,i),type:l,payload:t,chartType:c,hide:u})};function ru(n){"@babel/helpers - typeof";return ru=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ru(n)}function VS(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function zS(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?VS(Object(t),!0).forEach(function(r){jJ(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):VS(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function jJ(n,e,t){return e=WJ(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function WJ(n){var e=HJ(n,"string");return ru(e)=="symbol"?e:e+""}function HJ(n,e){if(ru(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(ru(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var Sh=Math.PI/180,UJ=function(e){return e*180/Math.PI},yn=function(e,t,r,i){return{x:e+Math.cos(-Sh*i)*r,y:t+Math.sin(-Sh*i)*r}},GJ=function(e,t){var r=e.x,i=e.y,o=t.x,s=t.y;return Math.sqrt(Math.pow(r-o,2)+Math.pow(i-s,2))},qJ=function(e,t){var r=e.x,i=e.y,o=t.cx,s=t.cy,a=GJ({x:r,y:i},{x:o,y:s});if(a<=0)return{radius:a};var l=(r-o)/a,c=Math.acos(l);return i>s&&(c=2*Math.PI-c),{radius:a,angle:UJ(c),angleInRadian:c}},KJ=function(e){var t=e.startAngle,r=e.endAngle,i=Math.floor(t/360),o=Math.floor(r/360),s=Math.min(i,o);return{startAngle:t-s*360,endAngle:r-s*360}},YJ=function(e,t){var r=t.startAngle,i=t.endAngle,o=Math.floor(r/360),s=Math.floor(i/360),a=Math.min(o,s);return e+a*360},jS=function(e,t){var r=e.x,i=e.y,o=qJ({x:r,y:i},t),s=o.radius,a=o.angle,l=t.innerRadius,c=t.outerRadius;if(s<l||s>c)return!1;if(s===0)return!0;var u=KJ(t),d=u.startAngle,f=u.endAngle,h=a,m;if(d<=f){for(;h>f;)h-=360;for(;h<d;)h+=360;m=h>=d&&h<=f}else{for(;h>d;)h-=360;for(;h<f;)h+=360;m=h>=f&&h<=d}return m?zS(zS({},t),{},{radius:s,angle:YJ(h,t)}):null};function iu(n){"@babel/helpers - typeof";return iu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},iu(n)}var XJ=["offset"];function ZJ(n){return tQ(n)||eQ(n)||QJ(n)||JJ()}function JJ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function QJ(n,e){if(n){if(typeof n=="string")return xb(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return xb(n,e)}}function eQ(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function tQ(n){if(Array.isArray(n))return xb(n)}function xb(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function nQ(n,e){if(n==null)return{};var t=rQ(n,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function rQ(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function WS(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Jt(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?WS(Object(t),!0).forEach(function(r){iQ(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):WS(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function iQ(n,e,t){return e=oQ(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function oQ(n){var e=sQ(n,"string");return iu(e)=="symbol"?e:e+""}function sQ(n,e){if(iu(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(iu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function ou(){return ou=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ou.apply(this,arguments)}var aQ=function(e){var t=e.value,r=e.formatter,i=Ke(e.children)?t:e.children;return ze(r)?r(i):i},lQ=function(e,t){var r=Jr(t-e),i=Math.min(Math.abs(t-e),360);return r*i},cQ=function(e,t,r){var i=e.position,o=e.viewBox,s=e.offset,a=e.className,l=o,c=l.cx,u=l.cy,d=l.innerRadius,f=l.outerRadius,h=l.startAngle,m=l.endAngle,g=l.clockWise,p=(d+f)/2,b=lQ(h,m),y=b>=0?1:-1,C,A;i==="insideStart"?(C=h+y*s,A=g):i==="insideEnd"?(C=m-y*s,A=!g):i==="end"&&(C=m+y*s,A=g),A=b<=0?A:!A;var w=yn(c,u,p,C),S=yn(c,u,p,C+(A?1:-1)*359),_="M".concat(w.x,",").concat(w.y,`
    A`).concat(p,",").concat(p,",0,1,").concat(A?0:1,`,
    `).concat(S.x,",").concat(S.y),v=Ke(e.id)?Xu("recharts-radial-line-"):e.id;return O.createElement("text",ou({},r,{dominantBaseline:"central",className:rt("recharts-radial-bar-label",a)}),O.createElement("defs",null,O.createElement("path",{id:v,d:_})),O.createElement("textPath",{xlinkHref:"#".concat(v)},t))},uQ=function(e){var t=e.viewBox,r=e.offset,i=e.position,o=t,s=o.cx,a=o.cy,l=o.innerRadius,c=o.outerRadius,u=o.startAngle,d=o.endAngle,f=(u+d)/2;if(i==="outside"){var h=yn(s,a,c+r,f),m=h.x,g=h.y;return{x:m,y:g,textAnchor:m>=s?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:s,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:s,y:a,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:s,y:a,textAnchor:"middle",verticalAnchor:"end"};var p=(l+c)/2,b=yn(s,a,p,f),y=b.x,C=b.y;return{x:y,y:C,textAnchor:"middle",verticalAnchor:"middle"}},dQ=function(e){var t=e.viewBox,r=e.parentViewBox,i=e.offset,o=e.position,s=t,a=s.x,l=s.y,c=s.width,u=s.height,d=u>=0?1:-1,f=d*i,h=d>0?"end":"start",m=d>0?"start":"end",g=c>=0?1:-1,p=g*i,b=g>0?"end":"start",y=g>0?"start":"end";if(o==="top"){var C={x:a+c/2,y:l-d*i,textAnchor:"middle",verticalAnchor:h};return Jt(Jt({},C),r?{height:Math.max(l-r.y,0),width:c}:{})}if(o==="bottom"){var A={x:a+c/2,y:l+u+f,textAnchor:"middle",verticalAnchor:m};return Jt(Jt({},A),r?{height:Math.max(r.y+r.height-(l+u),0),width:c}:{})}if(o==="left"){var w={x:a-p,y:l+u/2,textAnchor:b,verticalAnchor:"middle"};return Jt(Jt({},w),r?{width:Math.max(w.x-r.x,0),height:u}:{})}if(o==="right"){var S={x:a+c+p,y:l+u/2,textAnchor:y,verticalAnchor:"middle"};return Jt(Jt({},S),r?{width:Math.max(r.x+r.width-S.x,0),height:u}:{})}var _=r?{width:c,height:u}:{};return o==="insideLeft"?Jt({x:a+p,y:l+u/2,textAnchor:y,verticalAnchor:"middle"},_):o==="insideRight"?Jt({x:a+c-p,y:l+u/2,textAnchor:b,verticalAnchor:"middle"},_):o==="insideTop"?Jt({x:a+c/2,y:l+f,textAnchor:"middle",verticalAnchor:m},_):o==="insideBottom"?Jt({x:a+c/2,y:l+u-f,textAnchor:"middle",verticalAnchor:h},_):o==="insideTopLeft"?Jt({x:a+p,y:l+f,textAnchor:y,verticalAnchor:m},_):o==="insideTopRight"?Jt({x:a+c-p,y:l+f,textAnchor:b,verticalAnchor:m},_):o==="insideBottomLeft"?Jt({x:a+p,y:l+u-f,textAnchor:y,verticalAnchor:h},_):o==="insideBottomRight"?Jt({x:a+c-p,y:l+u-f,textAnchor:b,verticalAnchor:h},_):fl(o)&&(fe(o.x)||rs(o.x))&&(fe(o.y)||rs(o.y))?Jt({x:a+ws(o.x,c),y:l+ws(o.y,u),textAnchor:"end",verticalAnchor:"end"},_):Jt({x:a+c/2,y:l+u/2,textAnchor:"middle",verticalAnchor:"middle"},_)},fQ=function(e){return"cx"in e&&fe(e.cx)};function En(n){var e=n.offset,t=e===void 0?5:e,r=nQ(n,XJ),i=Jt({offset:t},r),o=i.viewBox,s=i.position,a=i.value,l=i.children,c=i.content,u=i.className,d=u===void 0?"":u,f=i.textBreakAll;if(!o||Ke(a)&&Ke(l)&&!R.isValidElement(c)&&!ze(c))return null;if(R.isValidElement(c))return R.cloneElement(c,i);var h;if(ze(c)){if(h=R.createElement(c,i),R.isValidElement(h))return h}else h=aQ(i);var m=fQ(o),g=He(i,!0);if(m&&(s==="insideStart"||s==="insideEnd"||s==="end"))return cQ(i,h,g);var p=m?uQ(i):dQ(i);return O.createElement(lh,ou({className:rt("recharts-label",d)},g,p,{breakAll:f}),h)}En.displayName="Label";var RR=function(e){var t=e.cx,r=e.cy,i=e.angle,o=e.startAngle,s=e.endAngle,a=e.r,l=e.radius,c=e.innerRadius,u=e.outerRadius,d=e.x,f=e.y,h=e.top,m=e.left,g=e.width,p=e.height,b=e.clockWise,y=e.labelViewBox;if(y)return y;if(fe(g)&&fe(p)){if(fe(d)&&fe(f))return{x:d,y:f,width:g,height:p};if(fe(h)&&fe(m))return{x:h,y:m,width:g,height:p}}return fe(d)&&fe(f)?{x:d,y:f,width:0,height:0}:fe(t)&&fe(r)?{cx:t,cy:r,startAngle:o||i||0,endAngle:s||i||0,innerRadius:c||0,outerRadius:u||l||a||0,clockWise:b}:e.viewBox?e.viewBox:{}},hQ=function(e,t){return e?e===!0?O.createElement(En,{key:"label-implicit",viewBox:t}):en(e)?O.createElement(En,{key:"label-implicit",viewBox:t,value:e}):R.isValidElement(e)?e.type===En?R.cloneElement(e,{key:"label-implicit",viewBox:t}):O.createElement(En,{key:"label-implicit",content:e,viewBox:t}):ze(e)?O.createElement(En,{key:"label-implicit",content:e,viewBox:t}):fl(e)?O.createElement(En,ou({viewBox:t},e,{key:"label-implicit"})):null:null},mQ=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var i=e.children,o=RR(e),s=ni(i,En).map(function(l,c){return R.cloneElement(l,{viewBox:t||o,key:"label-".concat(c)})});if(!r)return s;var a=hQ(e.label,t||o);return[a].concat(ZJ(s))};En.parseViewBox=RR;En.renderCallByParent=mQ;function gQ(n){var e=n==null?0:n.length;return e?n[e-1]:void 0}var pQ=gQ;const vQ=ot(pQ);function su(n){"@babel/helpers - typeof";return su=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},su(n)}var bQ=["valueAccessor"],yQ=["data","dataKey","clockWise","id","textBreakAll"];function wQ(n){return xQ(n)||SQ(n)||CQ(n)||_Q()}function _Q(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function CQ(n,e){if(n){if(typeof n=="string")return Ab(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Ab(n,e)}}function SQ(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function xQ(n){if(Array.isArray(n))return Ab(n)}function Ab(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function xh(){return xh=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},xh.apply(this,arguments)}function HS(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function US(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?HS(Object(t),!0).forEach(function(r){AQ(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):HS(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function AQ(n,e,t){return e=TQ(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function TQ(n){var e=EQ(n,"string");return su(e)=="symbol"?e:e+""}function EQ(n,e){if(su(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(su(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function GS(n,e){if(n==null)return{};var t=kQ(n,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function kQ(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}var PQ=function(e){return Array.isArray(e.value)?vQ(e.value):e.value};function So(n){var e=n.valueAccessor,t=e===void 0?PQ:e,r=GS(n,bQ),i=r.data,o=r.dataKey,s=r.clockWise,a=r.id,l=r.textBreakAll,c=GS(r,yQ);return!i||!i.length?null:O.createElement(It,{className:"recharts-label-list"},i.map(function(u,d){var f=Ke(o)?t(u,d):gr(u&&u.payload,o),h=Ke(a)?{}:{id:"".concat(a,"-").concat(d)};return O.createElement(En,xh({},He(u,!0),c,h,{parentViewBox:u.parentViewBox,value:f,textBreakAll:l,viewBox:En.parseViewBox(Ke(s)?u:US(US({},u),{},{clockWise:s})),key:"label-".concat(d),index:d}))}))}So.displayName="LabelList";function IQ(n,e){return n?n===!0?O.createElement(So,{key:"labelList-implicit",data:e}):O.isValidElement(n)||ze(n)?O.createElement(So,{key:"labelList-implicit",data:e,content:n}):fl(n)?O.createElement(So,xh({data:e},n,{key:"labelList-implicit"})):null:null}function OQ(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!n||!n.children&&t&&!n.label)return null;var r=n.children,i=ni(r,So).map(function(s,a){return R.cloneElement(s,{data:e,key:"labelList-".concat(a)})});if(!t)return i;var o=IQ(n.label,e);return[o].concat(wQ(i))}So.renderCallByParent=OQ;function au(n){"@babel/helpers - typeof";return au=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},au(n)}function Tb(){return Tb=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Tb.apply(this,arguments)}function qS(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function KS(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?qS(Object(t),!0).forEach(function(r){RQ(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):qS(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function RQ(n,e,t){return e=MQ(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function MQ(n){var e=DQ(n,"string");return au(e)=="symbol"?e:e+""}function DQ(n,e){if(au(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(au(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var BQ=function(e,t){var r=Jr(t-e),i=Math.min(Math.abs(t-e),359.999);return r*i},Xd=function(e){var t=e.cx,r=e.cy,i=e.radius,o=e.angle,s=e.sign,a=e.isExternal,l=e.cornerRadius,c=e.cornerIsExternal,u=l*(a?1:-1)+i,d=Math.asin(l/u)/Sh,f=c?o:o+s*d,h=yn(t,r,u,f),m=yn(t,r,i,f),g=c?o-s*d:o,p=yn(t,r,u*Math.cos(d*Sh),g);return{center:h,circleTangency:m,lineTangency:p,theta:d}},MR=function(e){var t=e.cx,r=e.cy,i=e.innerRadius,o=e.outerRadius,s=e.startAngle,a=e.endAngle,l=BQ(s,a),c=s+l,u=yn(t,r,o,s),d=yn(t,r,o,c),f="M ".concat(u.x,",").concat(u.y,`
    A `).concat(o,",").concat(o,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(s>c),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(i>0){var h=yn(t,r,i,s),m=yn(t,r,i,c);f+="L ".concat(m.x,",").concat(m.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(s<=c),`,
            `).concat(h.x,",").concat(h.y," Z")}else f+="L ".concat(t,",").concat(r," Z");return f},NQ=function(e){var t=e.cx,r=e.cy,i=e.innerRadius,o=e.outerRadius,s=e.cornerRadius,a=e.forceCornerRadius,l=e.cornerIsExternal,c=e.startAngle,u=e.endAngle,d=Jr(u-c),f=Xd({cx:t,cy:r,radius:o,angle:c,sign:d,cornerRadius:s,cornerIsExternal:l}),h=f.circleTangency,m=f.lineTangency,g=f.theta,p=Xd({cx:t,cy:r,radius:o,angle:u,sign:-d,cornerRadius:s,cornerIsExternal:l}),b=p.circleTangency,y=p.lineTangency,C=p.theta,A=l?Math.abs(c-u):Math.abs(c-u)-g-C;if(A<0)return a?"M ".concat(m.x,",").concat(m.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):MR({cx:t,cy:r,innerRadius:i,outerRadius:o,startAngle:c,endAngle:u});var w="M ".concat(m.x,",").concat(m.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(h.x,",").concat(h.y,`
    A`).concat(o,",").concat(o,",0,").concat(+(A>180),",").concat(+(d<0),",").concat(b.x,",").concat(b.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(y.x,",").concat(y.y,`
  `);if(i>0){var S=Xd({cx:t,cy:r,radius:i,angle:c,sign:d,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),_=S.circleTangency,v=S.lineTangency,x=S.theta,T=Xd({cx:t,cy:r,radius:i,angle:u,sign:-d,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),E=T.circleTangency,k=T.lineTangency,I=T.theta,B=l?Math.abs(c-u):Math.abs(c-u)-x-I;if(B<0&&s===0)return"".concat(w,"L").concat(t,",").concat(r,"Z");w+="L".concat(k.x,",").concat(k.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(E.x,",").concat(E.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(B>180),",").concat(+(d>0),",").concat(_.x,",").concat(_.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(v.x,",").concat(v.y,"Z")}else w+="L".concat(t,",").concat(r,"Z");return w},LQ={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},DR=function(e){var t=KS(KS({},LQ),e),r=t.cx,i=t.cy,o=t.innerRadius,s=t.outerRadius,a=t.cornerRadius,l=t.forceCornerRadius,c=t.cornerIsExternal,u=t.startAngle,d=t.endAngle,f=t.className;if(s<o||u===d)return null;var h=rt("recharts-sector",f),m=s-o,g=ws(a,m,0,!0),p;return g>0&&Math.abs(u-d)<360?p=NQ({cx:r,cy:i,innerRadius:o,outerRadius:s,cornerRadius:Math.min(g,m/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d}):p=MR({cx:r,cy:i,innerRadius:o,outerRadius:s,startAngle:u,endAngle:d}),O.createElement("path",Tb({},He(t,!0),{className:h,d:p,role:"img"}))};function lu(n){"@babel/helpers - typeof";return lu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lu(n)}function Eb(){return Eb=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Eb.apply(this,arguments)}function YS(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function XS(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?YS(Object(t),!0).forEach(function(r){FQ(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):YS(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function FQ(n,e,t){return e=$Q(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function $Q(n){var e=VQ(n,"string");return lu(e)=="symbol"?e:e+""}function VQ(n,e){if(lu(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(lu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var ZS={curveBasisClosed:L7,curveBasisOpen:F7,curveBasis:N7,curveBumpX:C7,curveBumpY:S7,curveLinearClosed:$7,curveLinear:Dm,curveMonotoneX:V7,curveMonotoneY:z7,curveNatural:j7,curveStep:W7,curveStepAfter:U7,curveStepBefore:H7},Zd=function(e){return e.x===+e.x&&e.y===+e.y},Kl=function(e){return e.x},Yl=function(e){return e.y},zQ=function(e,t){if(ze(e))return e;var r="curve".concat(Rm(e));return(r==="curveMonotone"||r==="curveBump")&&t?ZS["".concat(r).concat(t==="vertical"?"Y":"X")]:ZS[r]||Dm},jQ=function(e){var t=e.type,r=t===void 0?"linear":t,i=e.points,o=i===void 0?[]:i,s=e.baseLine,a=e.layout,l=e.connectNulls,c=l===void 0?!1:l,u=zQ(r,a),d=c?o.filter(function(g){return Zd(g)}):o,f;if(Array.isArray(s)){var h=c?s.filter(function(g){return Zd(g)}):s,m=d.map(function(g,p){return XS(XS({},g),{},{base:h[p]})});return a==="vertical"?f=zd().y(Yl).x1(Kl).x0(function(g){return g.base.x}):f=zd().x(Kl).y1(Yl).y0(function(g){return g.base.y}),f.defined(Zd).curve(u),f(m)}return a==="vertical"&&fe(s)?f=zd().y(Yl).x1(Kl).x0(s):fe(s)?f=zd().x(Kl).y1(Yl).y0(s):f=NI().x(Kl).y(Yl),f.defined(Zd).curve(u),f(d)},Sc=function(e){var t=e.className,r=e.points,i=e.path,o=e.pathRef;if((!r||!r.length)&&!i)return null;var s=r&&r.length?jQ(e):i;return O.createElement("path",Eb({},He(e,!1),qf(e),{className:rt("recharts-curve",t),d:s,ref:o}))},WQ=Object.getOwnPropertyNames,HQ=Object.getOwnPropertySymbols,UQ=Object.prototype.hasOwnProperty;function JS(n,e){return function(r,i,o){return n(r,i,o)&&e(r,i,o)}}function Jd(n){return function(t,r,i){if(!t||!r||typeof t!="object"||typeof r!="object")return n(t,r,i);var o=i.cache,s=o.get(t),a=o.get(r);if(s&&a)return s===r&&a===t;o.set(t,r),o.set(r,t);var l=n(t,r,i);return o.delete(t),o.delete(r),l}}function QS(n){return WQ(n).concat(HQ(n))}var GQ=Object.hasOwn||function(n,e){return UQ.call(n,e)};function Os(n,e){return n===e||!n&&!e&&n!==n&&e!==e}var qQ="__v",KQ="__o",YQ="_owner",ex=Object.getOwnPropertyDescriptor,tx=Object.keys;function XQ(n,e,t){var r=n.length;if(e.length!==r)return!1;for(;r-- >0;)if(!t.equals(n[r],e[r],r,r,n,e,t))return!1;return!0}function ZQ(n,e){return Os(n.getTime(),e.getTime())}function JQ(n,e){return n.name===e.name&&n.message===e.message&&n.cause===e.cause&&n.stack===e.stack}function QQ(n,e){return n===e}function nx(n,e,t){var r=n.size;if(r!==e.size)return!1;if(!r)return!0;for(var i=new Array(r),o=n.entries(),s,a,l=0;(s=o.next())&&!s.done;){for(var c=e.entries(),u=!1,d=0;(a=c.next())&&!a.done;){if(i[d]){d++;continue}var f=s.value,h=a.value;if(t.equals(f[0],h[0],l,d,n,e,t)&&t.equals(f[1],h[1],f[0],h[0],n,e,t)){u=i[d]=!0;break}d++}if(!u)return!1;l++}return!0}var eee=Os;function tee(n,e,t){var r=tx(n),i=r.length;if(tx(e).length!==i)return!1;for(;i-- >0;)if(!BR(n,e,t,r[i]))return!1;return!0}function Xl(n,e,t){var r=QS(n),i=r.length;if(QS(e).length!==i)return!1;for(var o,s,a;i-- >0;)if(o=r[i],!BR(n,e,t,o)||(s=ex(n,o),a=ex(e,o),(s||a)&&(!s||!a||s.configurable!==a.configurable||s.enumerable!==a.enumerable||s.writable!==a.writable)))return!1;return!0}function nee(n,e){return Os(n.valueOf(),e.valueOf())}function ree(n,e){return n.source===e.source&&n.flags===e.flags}function rx(n,e,t){var r=n.size;if(r!==e.size)return!1;if(!r)return!0;for(var i=new Array(r),o=n.values(),s,a;(s=o.next())&&!s.done;){for(var l=e.values(),c=!1,u=0;(a=l.next())&&!a.done;){if(!i[u]&&t.equals(s.value,a.value,s.value,a.value,n,e,t)){c=i[u]=!0;break}u++}if(!c)return!1}return!0}function iee(n,e){var t=n.length;if(e.length!==t)return!1;for(;t-- >0;)if(n[t]!==e[t])return!1;return!0}function oee(n,e){return n.hostname===e.hostname&&n.pathname===e.pathname&&n.protocol===e.protocol&&n.port===e.port&&n.hash===e.hash&&n.username===e.username&&n.password===e.password}function BR(n,e,t,r){return(r===YQ||r===KQ||r===qQ)&&(n.$$typeof||e.$$typeof)?!0:GQ(e,r)&&t.equals(n[r],e[r],r,r,n,e,t)}var see="[object Arguments]",aee="[object Boolean]",lee="[object Date]",cee="[object Error]",uee="[object Map]",dee="[object Number]",fee="[object Object]",hee="[object RegExp]",mee="[object Set]",gee="[object String]",pee="[object URL]",vee=Array.isArray,ix=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,ox=Object.assign,bee=Object.prototype.toString.call.bind(Object.prototype.toString);function yee(n){var e=n.areArraysEqual,t=n.areDatesEqual,r=n.areErrorsEqual,i=n.areFunctionsEqual,o=n.areMapsEqual,s=n.areNumbersEqual,a=n.areObjectsEqual,l=n.arePrimitiveWrappersEqual,c=n.areRegExpsEqual,u=n.areSetsEqual,d=n.areTypedArraysEqual,f=n.areUrlsEqual;return function(m,g,p){if(m===g)return!0;if(m==null||g==null)return!1;var b=typeof m;if(b!==typeof g)return!1;if(b!=="object")return b==="number"?s(m,g,p):b==="function"?i(m,g,p):!1;var y=m.constructor;if(y!==g.constructor)return!1;if(y===Object)return a(m,g,p);if(vee(m))return e(m,g,p);if(ix!=null&&ix(m))return d(m,g,p);if(y===Date)return t(m,g,p);if(y===RegExp)return c(m,g,p);if(y===Map)return o(m,g,p);if(y===Set)return u(m,g,p);var C=bee(m);return C===lee?t(m,g,p):C===hee?c(m,g,p):C===uee?o(m,g,p):C===mee?u(m,g,p):C===fee?typeof m.then!="function"&&typeof g.then!="function"&&a(m,g,p):C===pee?f(m,g,p):C===cee?r(m,g,p):C===see?a(m,g,p):C===aee||C===dee||C===gee?l(m,g,p):!1}}function wee(n){var e=n.circular,t=n.createCustomConfig,r=n.strict,i={areArraysEqual:r?Xl:XQ,areDatesEqual:ZQ,areErrorsEqual:JQ,areFunctionsEqual:QQ,areMapsEqual:r?JS(nx,Xl):nx,areNumbersEqual:eee,areObjectsEqual:r?Xl:tee,arePrimitiveWrappersEqual:nee,areRegExpsEqual:ree,areSetsEqual:r?JS(rx,Xl):rx,areTypedArraysEqual:r?Xl:iee,areUrlsEqual:oee};if(t&&(i=ox({},i,t(i))),e){var o=Jd(i.areArraysEqual),s=Jd(i.areMapsEqual),a=Jd(i.areObjectsEqual),l=Jd(i.areSetsEqual);i=ox({},i,{areArraysEqual:o,areMapsEqual:s,areObjectsEqual:a,areSetsEqual:l})}return i}function _ee(n){return function(e,t,r,i,o,s,a){return n(e,t,a)}}function Cee(n){var e=n.circular,t=n.comparator,r=n.createState,i=n.equals,o=n.strict;if(r)return function(l,c){var u=r(),d=u.cache,f=d===void 0?e?new WeakMap:void 0:d,h=u.meta;return t(l,c,{cache:f,equals:i,meta:h,strict:o})};if(e)return function(l,c){return t(l,c,{cache:new WeakMap,equals:i,meta:void 0,strict:o})};var s={cache:void 0,equals:i,meta:void 0,strict:o};return function(l,c){return t(l,c,s)}}var See=Lo();Lo({strict:!0});Lo({circular:!0});Lo({circular:!0,strict:!0});Lo({createInternalComparator:function(){return Os}});Lo({strict:!0,createInternalComparator:function(){return Os}});Lo({circular:!0,createInternalComparator:function(){return Os}});Lo({circular:!0,createInternalComparator:function(){return Os},strict:!0});function Lo(n){n===void 0&&(n={});var e=n.circular,t=e===void 0?!1:e,r=n.createInternalComparator,i=n.createState,o=n.strict,s=o===void 0?!1:o,a=wee(n),l=yee(a),c=r?r(l):_ee(l);return Cee({circular:t,comparator:l,createState:i,equals:c,strict:s})}function xee(n){typeof requestAnimationFrame<"u"&&requestAnimationFrame(n)}function sx(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=-1,r=function i(o){t<0&&(t=o),o-t>e?(n(o),t=-1):xee(i)};requestAnimationFrame(r)}function kb(n){"@babel/helpers - typeof";return kb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kb(n)}function Aee(n){return Pee(n)||kee(n)||Eee(n)||Tee()}function Tee(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Eee(n,e){if(n){if(typeof n=="string")return ax(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ax(n,e)}}function ax(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function kee(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Pee(n){if(Array.isArray(n))return n}function Iee(){var n={},e=function(){return null},t=!1,r=function i(o){if(!t){if(Array.isArray(o)){if(!o.length)return;var s=o,a=Aee(s),l=a[0],c=a.slice(1);if(typeof l=="number"){sx(i.bind(null,c),l);return}i(l),sx(i.bind(null,c));return}kb(o)==="object"&&(n=o,e(n)),typeof o=="function"&&o()}};return{stop:function(){t=!0},start:function(o){t=!1,r(o)},subscribe:function(o){return e=o,function(){e=function(){return null}}}}}function cu(n){"@babel/helpers - typeof";return cu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cu(n)}function lx(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function cx(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?lx(Object(t),!0).forEach(function(r){NR(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):lx(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function NR(n,e,t){return e=Oee(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Oee(n){var e=Ree(n,"string");return cu(e)==="symbol"?e:String(e)}function Ree(n,e){if(cu(n)!=="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(cu(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var Mee=function(e,t){return[Object.keys(e),Object.keys(t)].reduce(function(r,i){return r.filter(function(o){return i.includes(o)})})},Dee=function(e){return e},Bee=function(e){return e.replace(/([A-Z])/g,function(t){return"-".concat(t.toLowerCase())})},xc=function(e,t){return Object.keys(t).reduce(function(r,i){return cx(cx({},r),{},NR({},i,e(i,t[i])))},{})},ux=function(e,t,r){return e.map(function(i){return"".concat(Bee(i)," ").concat(t,"ms ").concat(r)}).join(",")};function Nee(n,e){return $ee(n)||Fee(n,e)||LR(n,e)||Lee()}function Lee(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fee(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,o,s,a=[],l=!0,c=!1;try{if(o=(t=t.call(n)).next,e!==0)for(;!(l=(r=o.call(t)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function $ee(n){if(Array.isArray(n))return n}function Vee(n){return Wee(n)||jee(n)||LR(n)||zee()}function zee(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function LR(n,e){if(n){if(typeof n=="string")return Pb(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Pb(n,e)}}function jee(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Wee(n){if(Array.isArray(n))return Pb(n)}function Pb(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}var Ah=1e-4,FR=function(e,t){return[0,3*e,3*t-6*e,3*e-3*t+1]},$R=function(e,t){return e.map(function(r,i){return r*Math.pow(t,i)}).reduce(function(r,i){return r+i})},dx=function(e,t){return function(r){var i=FR(e,t);return $R(i,r)}},Hee=function(e,t){return function(r){var i=FR(e,t),o=[].concat(Vee(i.map(function(s,a){return s*a}).slice(1)),[0]);return $R(o,r)}},fx=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],o=t[1],s=t[2],a=t[3];if(t.length===1)switch(t[0]){case"linear":i=0,o=0,s=1,a=1;break;case"ease":i=.25,o=.1,s=.25,a=1;break;case"ease-in":i=.42,o=0,s=1,a=1;break;case"ease-out":i=.42,o=0,s=.58,a=1;break;case"ease-in-out":i=0,o=0,s=.58,a=1;break;default:{var l=t[0].split("(");if(l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4){var c=l[1].split(")")[0].split(",").map(function(p){return parseFloat(p)}),u=Nee(c,4);i=u[0],o=u[1],s=u[2],a=u[3]}}}var d=dx(i,s),f=dx(o,a),h=Hee(i,s),m=function(b){return b>1?1:b<0?0:b},g=function(b){for(var y=b>1?1:b,C=y,A=0;A<8;++A){var w=d(C)-y,S=h(C);if(Math.abs(w-y)<Ah||S<Ah)return f(C);C=m(C-w/S)}return f(C)};return g.isStepper=!1,g},Uee=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.stiff,r=t===void 0?100:t,i=e.damping,o=i===void 0?8:i,s=e.dt,a=s===void 0?17:s,l=function(u,d,f){var h=-(u-d)*r,m=f*o,g=f+(h-m)*a/1e3,p=f*a/1e3+u;return Math.abs(p-d)<Ah&&Math.abs(g)<Ah?[d,0]:[p,g]};return l.isStepper=!0,l.dt=a,l},Gee=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return fx(i);case"spring":return Uee();default:if(i.split("(")[0]==="cubic-bezier")return fx(i)}return typeof i=="function"?i:null};function uu(n){"@babel/helpers - typeof";return uu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uu(n)}function hx(n){return Yee(n)||Kee(n)||VR(n)||qee()}function qee(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Kee(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Yee(n){if(Array.isArray(n))return Ob(n)}function mx(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function bn(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?mx(Object(t),!0).forEach(function(r){Ib(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):mx(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Ib(n,e,t){return e=Xee(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Xee(n){var e=Zee(n,"string");return uu(e)==="symbol"?e:String(e)}function Zee(n,e){if(uu(n)!=="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(uu(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Jee(n,e){return tte(n)||ete(n,e)||VR(n,e)||Qee()}function Qee(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function VR(n,e){if(n){if(typeof n=="string")return Ob(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Ob(n,e)}}function Ob(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function ete(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,o,s,a=[],l=!0,c=!1;try{if(o=(t=t.call(n)).next,e!==0)for(;!(l=(r=o.call(t)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function tte(n){if(Array.isArray(n))return n}var Th=function(e,t,r){return e+(t-e)*r},Rb=function(e){var t=e.from,r=e.to;return t!==r},nte=function n(e,t,r){var i=xc(function(o,s){if(Rb(s)){var a=e(s.from,s.to,s.velocity),l=Jee(a,2),c=l[0],u=l[1];return bn(bn({},s),{},{from:c,velocity:u})}return s},t);return r<1?xc(function(o,s){return Rb(s)?bn(bn({},s),{},{velocity:Th(s.velocity,i[o].velocity,r),from:Th(s.from,i[o].from,r)}):s},t):n(e,i,r-1)};const rte=function(n,e,t,r,i){var o=Mee(n,e),s=o.reduce(function(p,b){return bn(bn({},p),{},Ib({},b,[n[b],e[b]]))},{}),a=o.reduce(function(p,b){return bn(bn({},p),{},Ib({},b,{from:n[b],velocity:0,to:e[b]}))},{}),l=-1,c,u,d=function(){return null},f=function(){return xc(function(b,y){return y.from},a)},h=function(){return!Object.values(a).filter(Rb).length},m=function(b){c||(c=b);var y=b-c,C=y/t.dt;a=nte(t,a,C),i(bn(bn(bn({},n),e),f())),c=b,h()||(l=requestAnimationFrame(d))},g=function(b){u||(u=b);var y=(b-u)/r,C=xc(function(w,S){return Th.apply(void 0,hx(S).concat([t(y)]))},s);if(i(bn(bn(bn({},n),e),C)),y<1)l=requestAnimationFrame(d);else{var A=xc(function(w,S){return Th.apply(void 0,hx(S).concat([t(1)]))},s);i(bn(bn(bn({},n),e),A))}};return d=t.isStepper?m:g,function(){return requestAnimationFrame(d),function(){cancelAnimationFrame(l)}}};function La(n){"@babel/helpers - typeof";return La=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},La(n)}var ite=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function ote(n,e){if(n==null)return{};var t=ste(n,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function ste(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function Op(n){return ute(n)||cte(n)||lte(n)||ate()}function ate(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lte(n,e){if(n){if(typeof n=="string")return Mb(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Mb(n,e)}}function cte(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function ute(n){if(Array.isArray(n))return Mb(n)}function Mb(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function gx(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Hr(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?gx(Object(t),!0).forEach(function(r){gc(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):gx(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function gc(n,e,t){return e=zR(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function dte(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function fte(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,zR(r.key),r)}}function hte(n,e,t){return e&&fte(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function zR(n){var e=mte(n,"string");return La(e)==="symbol"?e:String(e)}function mte(n,e){if(La(n)!=="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(La(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function gte(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&Db(n,e)}function Db(n,e){return Db=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Db(n,e)}function pte(n){var e=vte();return function(){var r=Eh(n),i;if(e){var o=Eh(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return Bb(this,i)}}function Bb(n,e){if(e&&(La(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Nb(n)}function Nb(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function vte(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Eh(n){return Eh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Eh(n)}var Ji=function(n){gte(t,n);var e=pte(t);function t(r,i){var o;dte(this,t),o=e.call(this,r,i);var s=o.props,a=s.isActive,l=s.attributeName,c=s.from,u=s.to,d=s.steps,f=s.children,h=s.duration;if(o.handleStyleChange=o.handleStyleChange.bind(Nb(o)),o.changeStyle=o.changeStyle.bind(Nb(o)),!a||h<=0)return o.state={style:{}},typeof f=="function"&&(o.state={style:u}),Bb(o);if(d&&d.length)o.state={style:d[0].style};else if(c){if(typeof f=="function")return o.state={style:c},Bb(o);o.state={style:l?gc({},l,c):c}}else o.state={style:{}};return o}return hte(t,[{key:"componentDidMount",value:function(){var i=this.props,o=i.isActive,s=i.canBegin;this.mounted=!0,!(!o||!s)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var o=this.props,s=o.isActive,a=o.canBegin,l=o.attributeName,c=o.shouldReAnimate,u=o.to,d=o.from,f=this.state.style;if(a){if(!s){var h={style:l?gc({},l,u):u};this.state&&f&&(l&&f[l]!==u||!l&&f!==u)&&this.setState(h);return}if(!(See(i.to,u)&&i.canBegin&&i.isActive)){var m=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var g=m||c?d:i.to;if(this.state&&f){var p={style:l?gc({},l,g):g};(l&&f[l]!==g||!l&&f!==g)&&this.setState(p)}this.runAnimation(Hr(Hr({},this.props),{},{from:g,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var o=this,s=i.from,a=i.to,l=i.duration,c=i.easing,u=i.begin,d=i.onAnimationEnd,f=i.onAnimationStart,h=rte(s,a,Gee(c),l,this.changeStyle),m=function(){o.stopJSAnimation=h()};this.manager.start([f,u,m,l,d])}},{key:"runStepAnimation",value:function(i){var o=this,s=i.steps,a=i.begin,l=i.onAnimationStart,c=s[0],u=c.style,d=c.duration,f=d===void 0?0:d,h=function(g,p,b){if(b===0)return g;var y=p.duration,C=p.easing,A=C===void 0?"ease":C,w=p.style,S=p.properties,_=p.onAnimationEnd,v=b>0?s[b-1]:p,x=S||Object.keys(w);if(typeof A=="function"||A==="spring")return[].concat(Op(g),[o.runJSAnimation.bind(o,{from:v.style,to:w,duration:y,easing:A}),y]);var T=ux(x,y,A),E=Hr(Hr(Hr({},v.style),w),{},{transition:T});return[].concat(Op(g),[E,y,_]).filter(Dee)};return this.manager.start([l].concat(Op(s.reduce(h,[u,Math.max(f,a)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=Iee());var o=i.begin,s=i.duration,a=i.attributeName,l=i.to,c=i.easing,u=i.onAnimationStart,d=i.onAnimationEnd,f=i.steps,h=i.children,m=this.manager;if(this.unSubscribe=m.subscribe(this.handleStyleChange),typeof c=="function"||typeof h=="function"||c==="spring"){this.runJSAnimation(i);return}if(f.length>1){this.runStepAnimation(i);return}var g=a?gc({},a,l):l,p=ux(Object.keys(g),s,c);m.start([u,o,Hr(Hr({},g),{},{transition:p}),s,d])}},{key:"render",value:function(){var i=this.props,o=i.children;i.begin;var s=i.duration;i.attributeName,i.easing;var a=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var l=ote(i,ite),c=R.Children.count(o),u=this.state.style;if(typeof o=="function")return o(u);if(!a||c===0||s<=0)return o;var d=function(h){var m=h.props,g=m.style,p=g===void 0?{}:g,b=m.className,y=R.cloneElement(h,Hr(Hr({},l),{},{style:Hr(Hr({},p),u),className:b}));return y};return c===1?d(R.Children.only(o)):O.createElement("div",null,R.Children.map(o,function(f){return d(f)}))}}]),t}(R.PureComponent);Ji.displayName="Animate";Ji.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Ji.propTypes={from:at.oneOfType([at.object,at.string]),to:at.oneOfType([at.object,at.string]),attributeName:at.string,duration:at.number,begin:at.number,easing:at.oneOfType([at.string,at.func]),steps:at.arrayOf(at.shape({duration:at.number.isRequired,style:at.object.isRequired,easing:at.oneOfType([at.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),at.func]),properties:at.arrayOf("string"),onAnimationEnd:at.func})),children:at.oneOfType([at.node,at.func]),isActive:at.bool,canBegin:at.bool,onAnimationEnd:at.func,shouldReAnimate:at.bool,onAnimationStart:at.func,onAnimationReStart:at.func};function jR(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,UL(n,e)}function du(n){"@babel/helpers - typeof";return du=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},du(n)}function kh(){return kh=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},kh.apply(this,arguments)}function bte(n,e){return Cte(n)||_te(n,e)||wte(n,e)||yte()}function yte(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wte(n,e){if(n){if(typeof n=="string")return px(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return px(n,e)}}function px(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function _te(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,o,s,a=[],l=!0,c=!1;try{if(o=(t=t.call(n)).next,e!==0)for(;!(l=(r=o.call(t)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function Cte(n){if(Array.isArray(n))return n}function vx(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function bx(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?vx(Object(t),!0).forEach(function(r){Ste(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):vx(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Ste(n,e,t){return e=xte(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function xte(n){var e=Ate(n,"string");return du(e)=="symbol"?e:e+""}function Ate(n,e){if(du(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(du(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var yx=function(e,t,r,i,o){var s=Math.min(Math.abs(r)/2,Math.abs(i)/2),a=i>=0?1:-1,l=r>=0?1:-1,c=i>=0&&r>=0||i<0&&r<0?1:0,u;if(s>0&&o instanceof Array){for(var d=[0,0,0,0],f=0,h=4;f<h;f++)d[f]=o[f]>s?s:o[f];u="M".concat(e,",").concat(t+a*d[0]),d[0]>0&&(u+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(c,",").concat(e+l*d[0],",").concat(t)),u+="L ".concat(e+r-l*d[1],",").concat(t),d[1]>0&&(u+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(c,`,
        `).concat(e+r,",").concat(t+a*d[1])),u+="L ".concat(e+r,",").concat(t+i-a*d[2]),d[2]>0&&(u+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(c,`,
        `).concat(e+r-l*d[2],",").concat(t+i)),u+="L ".concat(e+l*d[3],",").concat(t+i),d[3]>0&&(u+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(c,`,
        `).concat(e,",").concat(t+i-a*d[3])),u+="Z"}else if(s>0&&o===+o&&o>0){var m=Math.min(s,o);u="M ".concat(e,",").concat(t+a*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+l*m,",").concat(t,`
            L `).concat(e+r-l*m,",").concat(t,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+r,",").concat(t+a*m,`
            L `).concat(e+r,",").concat(t+i-a*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+r-l*m,",").concat(t+i,`
            L `).concat(e+l*m,",").concat(t+i,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e,",").concat(t+i-a*m," Z")}else u="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(i," h ").concat(-r," Z");return u},Tte=function(e,t){if(!e||!t)return!1;var r=e.x,i=e.y,o=t.x,s=t.y,a=t.width,l=t.height;if(Math.abs(a)>0&&Math.abs(l)>0){var c=Math.min(o,o+a),u=Math.max(o,o+a),d=Math.min(s,s+l),f=Math.max(s,s+l);return r>=c&&r<=u&&i>=d&&i<=f}return!1},Ete={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},e0=function(e){var t=bx(bx({},Ete),e),r=R.useRef(),i=R.useState(-1),o=bte(i,2),s=o[0],a=o[1];R.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var A=r.current.getTotalLength();A&&a(A)}catch{}},[]);var l=t.x,c=t.y,u=t.width,d=t.height,f=t.radius,h=t.className,m=t.animationEasing,g=t.animationDuration,p=t.animationBegin,b=t.isAnimationActive,y=t.isUpdateAnimationActive;if(l!==+l||c!==+c||u!==+u||d!==+d||u===0||d===0)return null;var C=rt("recharts-rectangle",h);return y?O.createElement(Ji,{canBegin:s>0,from:{width:u,height:d,x:l,y:c},to:{width:u,height:d,x:l,y:c},duration:g,animationEasing:m,isActive:y},function(A){var w=A.width,S=A.height,_=A.x,v=A.y;return O.createElement(Ji,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:p,duration:g,isActive:b,easing:m},O.createElement("path",kh({},He(t,!0),{className:C,d:yx(_,v,w,S,f),ref:r})))}):O.createElement("path",kh({},He(t,!0),{className:C,d:yx(l,c,u,d,f)}))};function Lb(){return Lb=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Lb.apply(this,arguments)}var t0=function(e){var t=e.cx,r=e.cy,i=e.r,o=e.className,s=rt("recharts-dot",o);return t===+t&&r===+r&&i===+i?O.createElement("circle",Lb({},He(e,!1),qf(e),{className:s,cx:t,cy:r,r:i})):null};function fu(n){"@babel/helpers - typeof";return fu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fu(n)}var kte=["x","y","top","left","width","height","className"];function Fb(){return Fb=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Fb.apply(this,arguments)}function wx(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Pte(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?wx(Object(t),!0).forEach(function(r){Ite(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):wx(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Ite(n,e,t){return e=Ote(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Ote(n){var e=Rte(n,"string");return fu(e)=="symbol"?e:e+""}function Rte(n,e){if(fu(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(fu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Mte(n,e){if(n==null)return{};var t=Dte(n,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function Dte(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}var Bte=function(e,t,r,i,o,s){return"M".concat(e,",").concat(o,"v").concat(i,"M").concat(s,",").concat(t,"h").concat(r)},Nte=function(e){var t=e.x,r=t===void 0?0:t,i=e.y,o=i===void 0?0:i,s=e.top,a=s===void 0?0:s,l=e.left,c=l===void 0?0:l,u=e.width,d=u===void 0?0:u,f=e.height,h=f===void 0?0:f,m=e.className,g=Mte(e,kte),p=Pte({x:r,y:o,top:a,left:c,width:d,height:h},g);return!fe(r)||!fe(o)||!fe(d)||!fe(h)||!fe(a)||!fe(c)?null:O.createElement("path",Fb({},He(p,!0),{className:rt("recharts-cross",m),d:Bte(r,o,d,h,a,c)}))},Lte=sO,Fte=Lte(Object.getPrototypeOf,Object),$te=Fte,Vte=no,zte=$te,jte=ro,Wte="[object Object]",Hte=Function.prototype,Ute=Object.prototype,WR=Hte.toString,Gte=Ute.hasOwnProperty,qte=WR.call(Object);function Kte(n){if(!jte(n)||Vte(n)!=Wte)return!1;var e=zte(n);if(e===null)return!0;var t=Gte.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&WR.call(t)==qte}var Yte=Kte;const Xte=ot(Yte);var Zte=no,Jte=ro,Qte="[object Boolean]";function ene(n){return n===!0||n===!1||Jte(n)&&Zte(n)==Qte}var tne=ene;const nne=ot(tne);function hu(n){"@babel/helpers - typeof";return hu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hu(n)}function Ph(){return Ph=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Ph.apply(this,arguments)}function rne(n,e){return ane(n)||sne(n,e)||one(n,e)||ine()}function ine(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function one(n,e){if(n){if(typeof n=="string")return _x(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return _x(n,e)}}function _x(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function sne(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,o,s,a=[],l=!0,c=!1;try{if(o=(t=t.call(n)).next,e!==0)for(;!(l=(r=o.call(t)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function ane(n){if(Array.isArray(n))return n}function Cx(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Sx(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Cx(Object(t),!0).forEach(function(r){lne(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Cx(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function lne(n,e,t){return e=cne(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function cne(n){var e=une(n,"string");return hu(e)=="symbol"?e:e+""}function une(n,e){if(hu(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(hu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var xx=function(e,t,r,i,o){var s=r-i,a;return a="M ".concat(e,",").concat(t),a+="L ".concat(e+r,",").concat(t),a+="L ".concat(e+r-s/2,",").concat(t+o),a+="L ".concat(e+r-s/2-i,",").concat(t+o),a+="L ".concat(e,",").concat(t," Z"),a},dne={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},fne=function(e){var t=Sx(Sx({},dne),e),r=R.useRef(),i=R.useState(-1),o=rne(i,2),s=o[0],a=o[1];R.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var C=r.current.getTotalLength();C&&a(C)}catch{}},[]);var l=t.x,c=t.y,u=t.upperWidth,d=t.lowerWidth,f=t.height,h=t.className,m=t.animationEasing,g=t.animationDuration,p=t.animationBegin,b=t.isUpdateAnimationActive;if(l!==+l||c!==+c||u!==+u||d!==+d||f!==+f||u===0&&d===0||f===0)return null;var y=rt("recharts-trapezoid",h);return b?O.createElement(Ji,{canBegin:s>0,from:{upperWidth:0,lowerWidth:0,height:f,x:l,y:c},to:{upperWidth:u,lowerWidth:d,height:f,x:l,y:c},duration:g,animationEasing:m,isActive:b},function(C){var A=C.upperWidth,w=C.lowerWidth,S=C.height,_=C.x,v=C.y;return O.createElement(Ji,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:p,duration:g,easing:m},O.createElement("path",Ph({},He(t,!0),{className:y,d:xx(_,v,A,w,S),ref:r})))}):O.createElement("g",null,O.createElement("path",Ph({},He(t,!0),{className:y,d:xx(l,c,u,d,f)})))},hne=["option","shapeType","propTransformer","activeClassName","isActive"];function mu(n){"@babel/helpers - typeof";return mu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mu(n)}function mne(n,e){if(n==null)return{};var t=gne(n,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function gne(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function Ax(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Ih(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Ax(Object(t),!0).forEach(function(r){pne(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Ax(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function pne(n,e,t){return e=vne(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function vne(n){var e=bne(n,"string");return mu(e)=="symbol"?e:e+""}function bne(n,e){if(mu(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(mu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function yne(n,e){return Ih(Ih({},e),n)}function wne(n,e){return n==="symbols"}function Tx(n){var e=n.shapeType,t=n.elementProps;switch(e){case"rectangle":return O.createElement(e0,t);case"trapezoid":return O.createElement(fne,t);case"sector":return O.createElement(DR,t);case"symbols":if(wne(e))return O.createElement(bw,t);break;default:return null}}function _ne(n){return R.isValidElement(n)?n.props:n}function Cne(n){var e=n.option,t=n.shapeType,r=n.propTransformer,i=r===void 0?yne:r,o=n.activeClassName,s=o===void 0?"recharts-active-shape":o,a=n.isActive,l=mne(n,hne),c;if(R.isValidElement(e))c=R.cloneElement(e,Ih(Ih({},l),_ne(e)));else if(ze(e))c=e(l);else if(Xte(e)&&!nne(e)){var u=i(e,l);c=O.createElement(Tx,{shapeType:t,elementProps:u})}else{var d=l;c=O.createElement(Tx,{shapeType:t,elementProps:d})}return a?O.createElement(It,{className:s},c):c}function Ym(n,e){return e!=null&&"trapezoids"in n.props}function Xm(n,e){return e!=null&&"sectors"in n.props}function gu(n,e){return e!=null&&"points"in n.props}function Sne(n,e){var t,r,i=n.x===(e==null||(t=e.labelViewBox)===null||t===void 0?void 0:t.x)||n.x===e.x,o=n.y===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.y)||n.y===e.y;return i&&o}function xne(n,e){var t=n.endAngle===e.endAngle,r=n.startAngle===e.startAngle;return t&&r}function Ane(n,e){var t=n.x===e.x,r=n.y===e.y,i=n.z===e.z;return t&&r&&i}function Tne(n,e){var t;return Ym(n,e)?t=Sne:Xm(n,e)?t=xne:gu(n,e)&&(t=Ane),t}function Ene(n,e){var t;return Ym(n,e)?t="trapezoids":Xm(n,e)?t="sectors":gu(n,e)&&(t="points"),t}function kne(n,e){if(Ym(n,e)){var t;return(t=e.tooltipPayload)===null||t===void 0||(t=t[0])===null||t===void 0||(t=t.payload)===null||t===void 0?void 0:t.payload}if(Xm(n,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return gu(n,e)?e.payload:{}}function Pne(n){var e=n.activeTooltipItem,t=n.graphicalItem,r=n.itemData,i=Ene(t,e),o=kne(t,e),s=r.filter(function(l,c){var u=Jc(o,l),d=t.props[i].filter(function(m){var g=Tne(t,e);return g(m,e)}),f=t.props[i].indexOf(d[d.length-1]),h=c===f;return u&&h}),a=r.indexOf(s[s.length-1]);return a}var Ine=Math.ceil,One=Math.max;function Rne(n,e,t,r){for(var i=-1,o=One(Ine((e-n)/(t||1)),0),s=Array(o);o--;)s[r?o:++i]=n,n+=t;return s}var Mne=Rne,Dne=xO,Bne=1/0,Nne=17976931348623157e292;function Lne(n){if(!n)return n===0?n:0;if(n=Dne(n),n===Bne||n===-1/0){var e=n<0?-1:1;return e*Nne}return n===n?n:0}var Fne=Lne,$ne=Mne,Vne=Fm,Rp=Fne;function zne(n){return function(e,t,r){return r&&typeof r!="number"&&Vne(e,t,r)&&(t=r=void 0),e=Rp(e),t===void 0?(t=e,e=0):t=Rp(t),r=r===void 0?e<t?1:-1:Rp(r),$ne(e,t,r,n)}}var jne=zne,Wne=jne,Hne=Wne(),Une=Hne;const Oh=ot(Une);function pu(n){"@babel/helpers - typeof";return pu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pu(n)}function Ex(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function kx(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Ex(Object(t),!0).forEach(function(r){HR(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Ex(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function HR(n,e,t){return e=Gne(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Gne(n){var e=qne(n,"string");return pu(e)=="symbol"?e:e+""}function qne(n,e){if(pu(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(pu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var Kne=["Webkit","Moz","O","ms"],Yne=function(e,t){var r=e.replace(/(\w)/,function(o){return o.toUpperCase()}),i=Kne.reduce(function(o,s){return kx(kx({},o),{},HR({},s+r,t))},{});return i[e]=t,i};function Fa(n){"@babel/helpers - typeof";return Fa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fa(n)}function Rh(){return Rh=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Rh.apply(this,arguments)}function Px(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Mp(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Px(Object(t),!0).forEach(function(r){or(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Px(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Xne(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Ix(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,GR(r.key),r)}}function Zne(n,e,t){return e&&Ix(n.prototype,e),t&&Ix(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function Jne(n,e,t){return e=Mh(e),Qne(n,UR()?Reflect.construct(e,t||[],Mh(n).constructor):e.apply(n,t))}function Qne(n,e){if(e&&(Fa(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ere(n)}function ere(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function UR(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(UR=function(){return!!n})()}function Mh(n){return Mh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Mh(n)}function tre(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&$b(n,e)}function $b(n,e){return $b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},$b(n,e)}function or(n,e,t){return e=GR(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function GR(n){var e=nre(n,"string");return Fa(e)=="symbol"?e:e+""}function nre(n,e){if(Fa(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Fa(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var rre=function(e){var t=e.data,r=e.startIndex,i=e.endIndex,o=e.x,s=e.width,a=e.travellerWidth;if(!t||!t.length)return{};var l=t.length,c=_c().domain(Oh(0,l)).range([o,o+s-a]),u=c.domain().map(function(d){return c(d)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:c(r),endX:c(i),scale:c,scaleValues:u}},Ox=function(e){return e.changedTouches&&!!e.changedTouches.length},$a=function(n){function e(t){var r;return Xne(this,e),r=Jne(this,e,[t]),or(r,"handleDrag",function(i){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(i):r.state.isSlideMoving&&r.handleSlideDrag(i)}),or(r,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&r.handleDrag(i.changedTouches[0])}),or(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=r.props,o=i.endIndex,s=i.onDragEnd,a=i.startIndex;s==null||s({endIndex:o,startIndex:a})}),r.detachDragEndListener()}),or(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),or(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),or(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),or(r,"handleSlideDragStart",function(i){var o=Ox(i)?i.changedTouches[0]:i;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:o.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return tre(e,n),Zne(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var i=r.startX,o=r.endX,s=this.state.scaleValues,a=this.props,l=a.gap,c=a.data,u=c.length-1,d=Math.min(i,o),f=Math.max(i,o),h=e.getIndexInRange(s,d),m=e.getIndexInRange(s,f);return{startIndex:h-h%l,endIndex:m===u?u:m-m%l}}},{key:"getTextOfTick",value:function(r){var i=this.props,o=i.data,s=i.tickFormatter,a=i.dataKey,l=gr(o[r],a,r);return ze(s)?s(l,r):l}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var i=this.state,o=i.slideMoveStartX,s=i.startX,a=i.endX,l=this.props,c=l.x,u=l.width,d=l.travellerWidth,f=l.startIndex,h=l.endIndex,m=l.onChange,g=r.pageX-o;g>0?g=Math.min(g,c+u-d-a,c+u-d-s):g<0&&(g=Math.max(g,c-s,c-a));var p=this.getIndex({startX:s+g,endX:a+g});(p.startIndex!==f||p.endIndex!==h)&&m&&m(p),this.setState({startX:s+g,endX:a+g,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,i){var o=Ox(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:o.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var i=this.state,o=i.brushMoveStartX,s=i.movingTravellerId,a=i.endX,l=i.startX,c=this.state[s],u=this.props,d=u.x,f=u.width,h=u.travellerWidth,m=u.onChange,g=u.gap,p=u.data,b={startX:this.state.startX,endX:this.state.endX},y=r.pageX-o;y>0?y=Math.min(y,d+f-h-c):y<0&&(y=Math.max(y,d-c)),b[s]=c+y;var C=this.getIndex(b),A=C.startIndex,w=C.endIndex,S=function(){var v=p.length-1;return s==="startX"&&(a>l?A%g===0:w%g===0)||a<l&&w===v||s==="endX"&&(a>l?w%g===0:A%g===0)||a>l&&w===v};this.setState(or(or({},s,c+y),"brushMoveStartX",r.pageX),function(){m&&S()&&m(C)})}},{key:"handleTravellerMoveKeyboard",value:function(r,i){var o=this,s=this.state,a=s.scaleValues,l=s.startX,c=s.endX,u=this.state[i],d=a.indexOf(u);if(d!==-1){var f=d+r;if(!(f===-1||f>=a.length)){var h=a[f];i==="startX"&&h>=c||i==="endX"&&h<=l||this.setState(or({},i,h),function(){o.props.onChange(o.getIndex({startX:o.state.startX,endX:o.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,i=r.x,o=r.y,s=r.width,a=r.height,l=r.fill,c=r.stroke;return O.createElement("rect",{stroke:c,fill:l,x:i,y:o,width:s,height:a})}},{key:"renderPanorama",value:function(){var r=this.props,i=r.x,o=r.y,s=r.width,a=r.height,l=r.data,c=r.children,u=r.padding,d=R.Children.only(c);return d?O.cloneElement(d,{x:i,y:o,width:s,height:a,margin:u,compact:!0,data:l}):null}},{key:"renderTravellerLayer",value:function(r,i){var o,s,a=this,l=this.props,c=l.y,u=l.travellerWidth,d=l.height,f=l.traveller,h=l.ariaLabel,m=l.data,g=l.startIndex,p=l.endIndex,b=Math.max(r,this.props.x),y=Mp(Mp({},He(this.props,!1)),{},{x:b,y:c,width:u,height:d}),C=h||"Min value: ".concat((o=m[g])===null||o===void 0?void 0:o.name,", Max value: ").concat((s=m[p])===null||s===void 0?void 0:s.name);return O.createElement(It,{tabIndex:0,role:"slider","aria-label":C,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(w){["ArrowLeft","ArrowRight"].includes(w.key)&&(w.preventDefault(),w.stopPropagation(),a.handleTravellerMoveKeyboard(w.key==="ArrowRight"?1:-1,i))},onFocus:function(){a.setState({isTravellerFocused:!0})},onBlur:function(){a.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(f,y))}},{key:"renderSlide",value:function(r,i){var o=this.props,s=o.y,a=o.height,l=o.stroke,c=o.travellerWidth,u=Math.min(r,i)+c,d=Math.max(Math.abs(i-r)-c,0);return O.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:l,fillOpacity:.2,x:u,y:s,width:d,height:a})}},{key:"renderText",value:function(){var r=this.props,i=r.startIndex,o=r.endIndex,s=r.y,a=r.height,l=r.travellerWidth,c=r.stroke,u=this.state,d=u.startX,f=u.endX,h=5,m={pointerEvents:"none",fill:c};return O.createElement(It,{className:"recharts-brush-texts"},O.createElement(lh,Rh({textAnchor:"end",verticalAnchor:"middle",x:Math.min(d,f)-h,y:s+a/2},m),this.getTextOfTick(i)),O.createElement(lh,Rh({textAnchor:"start",verticalAnchor:"middle",x:Math.max(d,f)+l+h,y:s+a/2},m),this.getTextOfTick(o)))}},{key:"render",value:function(){var r=this.props,i=r.data,o=r.className,s=r.children,a=r.x,l=r.y,c=r.width,u=r.height,d=r.alwaysShowText,f=this.state,h=f.startX,m=f.endX,g=f.isTextActive,p=f.isSlideMoving,b=f.isTravellerMoving,y=f.isTravellerFocused;if(!i||!i.length||!fe(a)||!fe(l)||!fe(c)||!fe(u)||c<=0||u<=0)return null;var C=rt("recharts-brush",o),A=O.Children.count(s)===1,w=Yne("userSelect","none");return O.createElement(It,{className:C,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:w},this.renderBackground(),A&&this.renderPanorama(),this.renderSlide(h,m),this.renderTravellerLayer(h,"startX"),this.renderTravellerLayer(m,"endX"),(g||p||b||y||d)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var i=r.x,o=r.y,s=r.width,a=r.height,l=r.stroke,c=Math.floor(o+a/2)-1;return O.createElement(O.Fragment,null,O.createElement("rect",{x:i,y:o,width:s,height:a,fill:l,stroke:"none"}),O.createElement("line",{x1:i+1,y1:c,x2:i+s-1,y2:c,fill:"none",stroke:"#fff"}),O.createElement("line",{x1:i+1,y1:c+2,x2:i+s-1,y2:c+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,i){var o;return O.isValidElement(r)?o=O.cloneElement(r,i):ze(r)?o=r(i):o=e.renderDefaultTraveller(i),o}},{key:"getDerivedStateFromProps",value:function(r,i){var o=r.data,s=r.width,a=r.x,l=r.travellerWidth,c=r.updateId,u=r.startIndex,d=r.endIndex;if(o!==i.prevData||c!==i.prevUpdateId)return Mp({prevData:o,prevTravellerWidth:l,prevUpdateId:c,prevX:a,prevWidth:s},o&&o.length?rre({data:o,width:s,x:a,travellerWidth:l,startIndex:u,endIndex:d}):{scale:null,scaleValues:null});if(i.scale&&(s!==i.prevWidth||a!==i.prevX||l!==i.prevTravellerWidth)){i.scale.range([a,a+s-l]);var f=i.scale.domain().map(function(h){return i.scale(h)});return{prevData:o,prevTravellerWidth:l,prevUpdateId:c,prevX:a,prevWidth:s,startX:i.scale(r.startIndex),endX:i.scale(r.endIndex),scaleValues:f}}return null}},{key:"getIndexInRange",value:function(r,i){for(var o=r.length,s=0,a=o-1;a-s>1;){var l=Math.floor((s+a)/2);r[l]>i?a=l:s=l}return i>=r[a]?a:s}}])}(R.PureComponent);or($a,"displayName","Brush");or($a,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var ire=Tw;function ore(n,e){var t;return ire(n,function(r,i,o){return t=e(r,i,o),!t}),!!t}var sre=ore,are=JI,lre=wl,cre=sre,ure=tr,dre=Fm;function fre(n,e,t){var r=ure(n)?are:cre;return t&&dre(n,e,t)&&(e=void 0),r(n,lre(e))}var hre=fre;const mre=ot(hre);var Ci=function(e,t){var r=e.alwaysShow,i=e.ifOverflow;return r&&(i="extendDomain"),i===t},Rx=yO;function gre(n,e,t){e=="__proto__"&&Rx?Rx(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t}var pre=gre,vre=pre,bre=vO,yre=wl;function wre(n,e){var t={};return e=yre(e),bre(n,function(r,i,o){vre(t,i,e(r,i,o))}),t}var _re=wre;const Cre=ot(_re);function Sre(n,e){for(var t=-1,r=n==null?0:n.length;++t<r;)if(!e(n[t],t,n))return!1;return!0}var xre=Sre,Are=Tw;function Tre(n,e){var t=!0;return Are(n,function(r,i,o){return t=!!e(r,i,o),t}),t}var Ere=Tre,kre=xre,Pre=Ere,Ire=wl,Ore=tr,Rre=Fm;function Mre(n,e,t){var r=Ore(n)?kre:Pre;return t&&Rre(n,e,t)&&(e=void 0),r(n,Ire(e))}var Dre=Mre;const Bre=ot(Dre);var Nre=["x","y"];function vu(n){"@babel/helpers - typeof";return vu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vu(n)}function Vb(){return Vb=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Vb.apply(this,arguments)}function Mx(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Zl(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Mx(Object(t),!0).forEach(function(r){Lre(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Mx(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Lre(n,e,t){return e=Fre(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Fre(n){var e=$re(n,"string");return vu(e)=="symbol"?e:e+""}function $re(n,e){if(vu(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(vu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Vre(n,e){if(n==null)return{};var t=zre(n,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function zre(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function jre(n,e){var t=n.x,r=n.y,i=Vre(n,Nre),o="".concat(t),s=parseInt(o,10),a="".concat(r),l=parseInt(a,10),c="".concat(e.height||i.height),u=parseInt(c,10),d="".concat(e.width||i.width),f=parseInt(d,10);return Zl(Zl(Zl(Zl(Zl({},e),i),s?{x:s}:{}),l?{y:l}:{}),{},{height:u,width:f,name:e.name,radius:e.radius})}function Dx(n){return O.createElement(Cne,Vb({shapeType:"rectangle",propTransformer:jre,activeClassName:"recharts-active-bar"},n))}var Wre=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,i){if(typeof e=="number")return e;var o=typeof r=="number";return o?e(r,i):(o||Po(),t)}},Hre=["value","background"],qR;function Va(n){"@babel/helpers - typeof";return Va=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Va(n)}function Ure(n,e){if(n==null)return{};var t=Gre(n,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function Gre(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function Dh(){return Dh=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Dh.apply(this,arguments)}function Bx(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function qt(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Bx(Object(t),!0).forEach(function(r){yo(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Bx(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function qre(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Nx(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,YR(r.key),r)}}function Kre(n,e,t){return e&&Nx(n.prototype,e),t&&Nx(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function Yre(n,e,t){return e=Bh(e),Xre(n,KR()?Reflect.construct(e,t||[],Bh(n).constructor):e.apply(n,t))}function Xre(n,e){if(e&&(Va(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Zre(n)}function Zre(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function KR(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(KR=function(){return!!n})()}function Bh(n){return Bh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Bh(n)}function Jre(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&zb(n,e)}function zb(n,e){return zb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},zb(n,e)}function yo(n,e,t){return e=YR(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function YR(n){var e=Qre(n,"string");return Va(e)=="symbol"?e:e+""}function Qre(n,e){if(Va(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Va(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var td=function(n){function e(){var t;qre(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=Yre(this,e,[].concat(i)),yo(t,"state",{isAnimationFinished:!1}),yo(t,"id",Xu("recharts-bar-")),yo(t,"handleAnimationEnd",function(){var s=t.props.onAnimationEnd;t.setState({isAnimationFinished:!0}),s&&s()}),yo(t,"handleAnimationStart",function(){var s=t.props.onAnimationStart;t.setState({isAnimationFinished:!1}),s&&s()}),t}return Jre(e,n),Kre(e,[{key:"renderRectanglesStatically",value:function(r){var i=this,o=this.props,s=o.shape,a=o.dataKey,l=o.activeIndex,c=o.activeBar,u=He(this.props,!1);return r&&r.map(function(d,f){var h=f===l,m=h?c:s,g=qt(qt(qt({},u),d),{},{isActive:h,option:m,index:f,dataKey:a,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return O.createElement(It,Dh({className:"recharts-bar-rectangle"},Kf(i.props,d,f),{key:"rectangle-".concat(d==null?void 0:d.x,"-").concat(d==null?void 0:d.y,"-").concat(d==null?void 0:d.value)}),O.createElement(Dx,g))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,i=this.props,o=i.data,s=i.layout,a=i.isAnimationActive,l=i.animationBegin,c=i.animationDuration,u=i.animationEasing,d=i.animationId,f=this.state.prevData;return O.createElement(Ji,{begin:l,duration:c,isActive:a,easing:u,from:{t:0},to:{t:1},key:"bar-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(h){var m=h.t,g=o.map(function(p,b){var y=f&&f[b];if(y){var C=Tr(y.x,p.x),A=Tr(y.y,p.y),w=Tr(y.width,p.width),S=Tr(y.height,p.height);return qt(qt({},p),{},{x:C(m),y:A(m),width:w(m),height:S(m)})}if(s==="horizontal"){var _=Tr(0,p.height),v=_(m);return qt(qt({},p),{},{y:p.y+p.height-v,height:v})}var x=Tr(0,p.width),T=x(m);return qt(qt({},p),{},{width:T})});return O.createElement(It,null,r.renderRectanglesStatically(g))})}},{key:"renderRectangles",value:function(){var r=this.props,i=r.data,o=r.isAnimationActive,s=this.state.prevData;return o&&i&&i.length&&(!s||!Jc(s,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var r=this,i=this.props,o=i.data,s=i.dataKey,a=i.activeIndex,l=He(this.props.background,!1);return o.map(function(c,u){c.value;var d=c.background,f=Ure(c,Hre);if(!d)return null;var h=qt(qt(qt(qt(qt({},f),{},{fill:"#eee"},d),l),Kf(r.props,c,u)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:s,index:u,className:"recharts-bar-background-rectangle"});return O.createElement(Dx,Dh({key:"background-bar-".concat(u),option:r.props.background,isActive:u===a},h))})}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var o=this.props,s=o.data,a=o.xAxis,l=o.yAxis,c=o.layout,u=o.children,d=ni(u,Km);if(!d)return null;var f=c==="vertical"?s[0].height/2:s[0].width/2,h=function(p,b){var y=Array.isArray(p.value)?p.value[1]:p.value;return{x:p.x,y:p.y,value:y,errorVal:gr(p,b)}},m={clipPath:r?"url(#clipPath-".concat(i,")"):null};return O.createElement(It,m,d.map(function(g){return O.cloneElement(g,{key:"error-bar-".concat(i,"-").concat(g.props.dataKey),data:s,xAxis:a,yAxis:l,layout:c,offset:f,dataPointFormatter:h})}))}},{key:"render",value:function(){var r=this.props,i=r.hide,o=r.data,s=r.className,a=r.xAxis,l=r.yAxis,c=r.left,u=r.top,d=r.width,f=r.height,h=r.isAnimationActive,m=r.background,g=r.id;if(i||!o||!o.length)return null;var p=this.state.isAnimationFinished,b=rt("recharts-bar",s),y=a&&a.allowDataOverflow,C=l&&l.allowDataOverflow,A=y||C,w=Ke(g)?this.id:g;return O.createElement(It,{className:b},y||C?O.createElement("defs",null,O.createElement("clipPath",{id:"clipPath-".concat(w)},O.createElement("rect",{x:y?c:c-d/2,y:C?u:u-f/2,width:y?d:d*2,height:C?f:f*2}))):null,O.createElement(It,{className:"recharts-bar-rectangles",clipPath:A?"url(#clipPath-".concat(w,")"):null},m?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(A,w),(!h||p)&&So.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:i.curData}:r.data!==i.curData?{curData:r.data}:null}}])}(R.PureComponent);qR=td;yo(td,"displayName","Bar");yo(td,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!_l.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});yo(td,"getComposedData",function(n){var e=n.props,t=n.item,r=n.barPosition,i=n.bandSize,o=n.xAxis,s=n.yAxis,a=n.xAxisTicks,l=n.yAxisTicks,c=n.stackedData,u=n.dataStartIndex,d=n.displayedData,f=n.offset,h=OJ(r,t);if(!h)return null;var m=e.layout,g=t.type.defaultProps,p=g!==void 0?qt(qt({},g),t.props):t.props,b=p.dataKey,y=p.children,C=p.minPointSize,A=m==="horizontal"?s:o,w=c?A.scale.domain():null,S=$J({numericAxis:A}),_=ni(y,TO),v=d.map(function(x,T){var E,k,I,B,D,F;c?E=RJ(c[u+T],w):(E=gr(x,b),Array.isArray(E)||(E=[S,E]));var L=Wre(C,qR.defaultProps.minPointSize)(E[1],T);if(m==="horizontal"){var H,$=[s.scale(E[0]),s.scale(E[1])],ne=$[0],Z=$[1];k=NS({axis:o,ticks:a,bandSize:i,offset:h.offset,entry:x,index:T}),I=(H=Z??ne)!==null&&H!==void 0?H:void 0,B=h.size;var G=ne-Z;if(D=Number.isNaN(G)?0:G,F={x:k,y:s.y,width:B,height:s.height},Math.abs(L)>0&&Math.abs(D)<Math.abs(L)){var X=Jr(D||L)*(Math.abs(L)-Math.abs(D));I-=X,D+=X}}else{var ee=[o.scale(E[0]),o.scale(E[1])],ie=ee[0],me=ee[1];if(k=ie,I=NS({axis:s,ticks:l,bandSize:i,offset:h.offset,entry:x,index:T}),B=me-ie,D=h.size,F={x:o.x,y:I,width:o.width,height:D},Math.abs(L)>0&&Math.abs(B)<Math.abs(L)){var Ie=Jr(B||L)*(Math.abs(L)-Math.abs(B));B+=Ie}}return qt(qt(qt({},x),{},{x:k,y:I,width:B,height:D,value:c?E:E[1],payload:x,background:F},_&&_[T]&&_[T].props),{},{tooltipPayload:[OR(t,x)],tooltipPosition:{x:k+B/2,y:I+D/2}})});return qt({data:v,layout:m},f)});function bu(n){"@babel/helpers - typeof";return bu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bu(n)}function eie(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Lx(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,XR(r.key),r)}}function tie(n,e,t){return e&&Lx(n.prototype,e),t&&Lx(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function Fx(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function qr(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Fx(Object(t),!0).forEach(function(r){Zm(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Fx(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Zm(n,e,t){return e=XR(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function XR(n){var e=nie(n,"string");return bu(e)=="symbol"?e:e+""}function nie(n,e){if(bu(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(bu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var rie=function(e,t,r,i,o){var s=e.width,a=e.height,l=e.layout,c=e.children,u=Object.keys(t),d={left:r.left,leftMirror:r.left,right:s-r.right,rightMirror:s-r.right,top:r.top,topMirror:r.top,bottom:a-r.bottom,bottomMirror:a-r.bottom},f=!!sr(c,td);return u.reduce(function(h,m){var g=t[m],p=g.orientation,b=g.domain,y=g.padding,C=y===void 0?{}:y,A=g.mirror,w=g.reversed,S="".concat(p).concat(A?"Mirror":""),_,v,x,T,E;if(g.type==="number"&&(g.padding==="gap"||g.padding==="no-gap")){var k=b[1]-b[0],I=1/0,B=g.categoricalDomain.sort();if(B.forEach(function(ee,ie){ie>0&&(I=Math.min((ee||0)-(B[ie-1]||0),I))}),Number.isFinite(I)){var D=I/k,F=g.layout==="vertical"?r.height:r.width;if(g.padding==="gap"&&(_=D*F/2),g.padding==="no-gap"){var L=ws(e.barCategoryGap,D*F),H=D*F/2;_=H-L-(H-L)/F*L}}}i==="xAxis"?v=[r.left+(C.left||0)+(_||0),r.left+r.width-(C.right||0)-(_||0)]:i==="yAxis"?v=l==="horizontal"?[r.top+r.height-(C.bottom||0),r.top+(C.top||0)]:[r.top+(C.top||0)+(_||0),r.top+r.height-(C.bottom||0)-(_||0)]:v=g.range,w&&(v=[v[1],v[0]]);var $=PJ(g,o,f),ne=$.scale,Z=$.realScaleType;ne.domain(b).range(v),IJ(ne);var G=FJ(ne,qr(qr({},g),{},{realScaleType:Z}));i==="xAxis"?(E=p==="top"&&!A||p==="bottom"&&A,x=r.left,T=d[S]-E*g.height):i==="yAxis"&&(E=p==="left"&&!A||p==="right"&&A,x=d[S]-E*g.width,T=r.top);var X=qr(qr(qr({},g),G),{},{realScaleType:Z,x,y:T,scale:ne,width:i==="xAxis"?r.width:g.width,height:i==="yAxis"?r.height:g.height});return X.bandSize=Ch(X,G),!g.hide&&i==="xAxis"?d[S]+=(E?-1:1)*X.height:g.hide||(d[S]+=(E?-1:1)*X.width),qr(qr({},h),{},Zm({},m,X))},{})},ZR=function(e,t){var r=e.x,i=e.y,o=t.x,s=t.y;return{x:Math.min(r,o),y:Math.min(i,s),width:Math.abs(o-r),height:Math.abs(s-i)}},iie=function(e){var t=e.x1,r=e.y1,i=e.x2,o=e.y2;return ZR({x:t,y:r},{x:i,y:o})},JR=function(){function n(e){eie(this,n),this.scale=e}return tie(n,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.bandAware,o=r.position;if(t!==void 0){if(o)switch(o){case"start":return this.scale(t);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+s}case"end":{var a=this.bandwidth?this.bandwidth():0;return this.scale(t)+a}default:return this.scale(t)}if(i){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+l}return this.scale(t)}}},{key:"isInRange",value:function(t){var r=this.range(),i=r[0],o=r[r.length-1];return i<=o?t>=i&&t<=o:t>=o&&t<=i}}],[{key:"create",value:function(t){return new n(t)}}])}();Zm(JR,"EPS",1e-4);var n0=function(e){var t=Object.keys(e).reduce(function(r,i){return qr(qr({},r),{},Zm({},i,JR.create(e[i])))},{});return qr(qr({},t),{},{apply:function(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=o.bandAware,a=o.position;return Cre(i,function(l,c){return t[c].apply(l,{bandAware:s,position:a})})},isInRange:function(i){return Bre(i,function(o,s){return t[s].isInRange(o)})}})};function oie(n){return(n%180+180)%180}var sie=function(e){var t=e.width,r=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=oie(i),s=o*Math.PI/180,a=Math.atan(r/t),l=s>a&&s<Math.PI-a?r/Math.sin(s):t/Math.cos(s);return Math.abs(l)},aie=bz(function(n){return{x:n.left,y:n.top,width:n.width,height:n.height}},function(n){return["l",n.left,"t",n.top,"w",n.width,"h",n.height].join("")}),QR=R.createContext(void 0),e2=R.createContext(void 0),t2=R.createContext(void 0),lie=R.createContext({}),n2=R.createContext(void 0),r2=R.createContext(0),i2=R.createContext(0),$x=function(e){var t=e.state,r=t.xAxisMap,i=t.yAxisMap,o=t.offset,s=e.clipPathId,a=e.children,l=e.width,c=e.height,u=aie(o);return O.createElement(QR.Provider,{value:r},O.createElement(e2.Provider,{value:i},O.createElement(lie.Provider,{value:o},O.createElement(t2.Provider,{value:u},O.createElement(n2.Provider,{value:s},O.createElement(r2.Provider,{value:c},O.createElement(i2.Provider,{value:l},a)))))))},cie=function(){return R.useContext(n2)},o2=function(e){var t=R.useContext(QR);t==null&&Po();var r=t[e];return r==null&&Po(),r},s2=function(e){var t=R.useContext(e2);t==null&&Po();var r=t[e];return r==null&&Po(),r},uie=function(){var e=R.useContext(t2);return e},a2=function(){return R.useContext(i2)},l2=function(){return R.useContext(r2)};function za(n){"@babel/helpers - typeof";return za=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},za(n)}function die(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function fie(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,u2(r.key),r)}}function hie(n,e,t){return e&&fie(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function mie(n,e,t){return e=Nh(e),gie(n,c2()?Reflect.construct(e,t||[],Nh(n).constructor):e.apply(n,t))}function gie(n,e){if(e&&(za(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pie(n)}function pie(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function c2(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(c2=function(){return!!n})()}function Nh(n){return Nh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Nh(n)}function vie(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&jb(n,e)}function jb(n,e){return jb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},jb(n,e)}function Vx(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function zx(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Vx(Object(t),!0).forEach(function(r){r0(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Vx(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function r0(n,e,t){return e=u2(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function u2(n){var e=bie(n,"string");return za(e)=="symbol"?e:e+""}function bie(n,e){if(za(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(za(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function yie(n,e){return Sie(n)||Cie(n,e)||_ie(n,e)||wie()}function wie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _ie(n,e){if(n){if(typeof n=="string")return jx(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return jx(n,e)}}function jx(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Cie(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,o,s,a=[],l=!0,c=!1;try{if(o=(t=t.call(n)).next,e!==0)for(;!(l=(r=o.call(t)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function Sie(n){if(Array.isArray(n))return n}function Wb(){return Wb=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Wb.apply(this,arguments)}var xie=function(e,t){var r;return O.isValidElement(e)?r=O.cloneElement(e,t):ze(e)?r=e(t):r=O.createElement("line",Wb({},t,{className:"recharts-reference-line-line"})),r},Aie=function(e,t,r,i,o,s,a,l,c){var u=o.x,d=o.y,f=o.width,h=o.height;if(r){var m=c.y,g=e.y.apply(m,{position:s});if(Ci(c,"discard")&&!e.y.isInRange(g))return null;var p=[{x:u+f,y:g},{x:u,y:g}];return l==="left"?p.reverse():p}if(t){var b=c.x,y=e.x.apply(b,{position:s});if(Ci(c,"discard")&&!e.x.isInRange(y))return null;var C=[{x:y,y:d+h},{x:y,y:d}];return a==="top"?C.reverse():C}if(i){var A=c.segment,w=A.map(function(S){return e.apply(S,{position:s})});return Ci(c,"discard")&&mre(w,function(S){return!e.isInRange(S)})?null:w}return null};function Tie(n){var e=n.x,t=n.y,r=n.segment,i=n.xAxisId,o=n.yAxisId,s=n.shape,a=n.className,l=n.alwaysShow,c=cie(),u=o2(i),d=s2(o),f=uie();if(!c||!f)return null;us(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var h=n0({x:u.scale,y:d.scale}),m=en(e),g=en(t),p=r&&r.length===2,b=Aie(h,m,g,p,f,n.position,u.orientation,d.orientation,n);if(!b)return null;var y=yie(b,2),C=y[0],A=C.x,w=C.y,S=y[1],_=S.x,v=S.y,x=Ci(n,"hidden")?"url(#".concat(c,")"):void 0,T=zx(zx({clipPath:x},He(n,!0)),{},{x1:A,y1:w,x2:_,y2:v});return O.createElement(It,{className:rt("recharts-reference-line",a)},xie(s,T),En.renderCallByParent(n,iie({x1:A,y1:w,x2:_,y2:v})))}var i0=function(n){function e(){return die(this,e),mie(this,e,arguments)}return vie(e,n),hie(e,[{key:"render",value:function(){return O.createElement(Tie,this.props)}}])}(O.Component);r0(i0,"displayName","ReferenceLine");r0(i0,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function Hb(){return Hb=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Hb.apply(this,arguments)}function ja(n){"@babel/helpers - typeof";return ja=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ja(n)}function Wx(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Hx(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Wx(Object(t),!0).forEach(function(r){Jm(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Wx(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Eie(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function kie(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,f2(r.key),r)}}function Pie(n,e,t){return e&&kie(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function Iie(n,e,t){return e=Lh(e),Oie(n,d2()?Reflect.construct(e,t||[],Lh(n).constructor):e.apply(n,t))}function Oie(n,e){if(e&&(ja(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Rie(n)}function Rie(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function d2(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(d2=function(){return!!n})()}function Lh(n){return Lh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Lh(n)}function Mie(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&Ub(n,e)}function Ub(n,e){return Ub=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Ub(n,e)}function Jm(n,e,t){return e=f2(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function f2(n){var e=Die(n,"string");return ja(e)=="symbol"?e:e+""}function Die(n,e){if(ja(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(ja(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var Bie=function(e){var t=e.x,r=e.y,i=e.xAxis,o=e.yAxis,s=n0({x:i.scale,y:o.scale}),a=s.apply({x:t,y:r},{bandAware:!0});return Ci(e,"discard")&&!s.isInRange(a)?null:a},Qm=function(n){function e(){return Eie(this,e),Iie(this,e,arguments)}return Mie(e,n),Pie(e,[{key:"render",value:function(){var r=this.props,i=r.x,o=r.y,s=r.r,a=r.alwaysShow,l=r.clipPathId,c=en(i),u=en(o);if(us(a===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!c||!u)return null;var d=Bie(this.props);if(!d)return null;var f=d.x,h=d.y,m=this.props,g=m.shape,p=m.className,b=Ci(this.props,"hidden")?"url(#".concat(l,")"):void 0,y=Hx(Hx({clipPath:b},He(this.props,!0)),{},{cx:f,cy:h});return O.createElement(It,{className:rt("recharts-reference-dot",p)},e.renderDot(g,y),En.renderCallByParent(this.props,{x:f-s,y:h-s,width:2*s,height:2*s}))}}])}(O.Component);Jm(Qm,"displayName","ReferenceDot");Jm(Qm,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});Jm(Qm,"renderDot",function(n,e){var t;return O.isValidElement(n)?t=O.cloneElement(n,e):ze(n)?t=n(e):t=O.createElement(t0,Hb({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),t});function Gb(){return Gb=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Gb.apply(this,arguments)}function Wa(n){"@babel/helpers - typeof";return Wa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wa(n)}function Ux(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Gx(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Ux(Object(t),!0).forEach(function(r){eg(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Ux(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Nie(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Lie(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,m2(r.key),r)}}function Fie(n,e,t){return e&&Lie(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function $ie(n,e,t){return e=Fh(e),Vie(n,h2()?Reflect.construct(e,t||[],Fh(n).constructor):e.apply(n,t))}function Vie(n,e){if(e&&(Wa(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zie(n)}function zie(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function h2(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(h2=function(){return!!n})()}function Fh(n){return Fh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Fh(n)}function jie(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&qb(n,e)}function qb(n,e){return qb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},qb(n,e)}function eg(n,e,t){return e=m2(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function m2(n){var e=Wie(n,"string");return Wa(e)=="symbol"?e:e+""}function Wie(n,e){if(Wa(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Wa(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var Hie=function(e,t,r,i,o){var s=o.x1,a=o.x2,l=o.y1,c=o.y2,u=o.xAxis,d=o.yAxis;if(!u||!d)return null;var f=n0({x:u.scale,y:d.scale}),h={x:e?f.x.apply(s,{position:"start"}):f.x.rangeMin,y:r?f.y.apply(l,{position:"start"}):f.y.rangeMin},m={x:t?f.x.apply(a,{position:"end"}):f.x.rangeMax,y:i?f.y.apply(c,{position:"end"}):f.y.rangeMax};return Ci(o,"discard")&&(!f.isInRange(h)||!f.isInRange(m))?null:ZR(h,m)},tg=function(n){function e(){return Nie(this,e),$ie(this,e,arguments)}return jie(e,n),Fie(e,[{key:"render",value:function(){var r=this.props,i=r.x1,o=r.x2,s=r.y1,a=r.y2,l=r.className,c=r.alwaysShow,u=r.clipPathId;us(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var d=en(i),f=en(o),h=en(s),m=en(a),g=this.props.shape;if(!d&&!f&&!h&&!m&&!g)return null;var p=Hie(d,f,h,m,this.props);if(!p&&!g)return null;var b=Ci(this.props,"hidden")?"url(#".concat(u,")"):void 0;return O.createElement(It,{className:rt("recharts-reference-area",l)},e.renderRect(g,Gx(Gx({clipPath:b},He(this.props,!0)),p)),En.renderCallByParent(this.props,p))}}])}(O.Component);eg(tg,"displayName","ReferenceArea");eg(tg,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});eg(tg,"renderRect",function(n,e){var t;return O.isValidElement(n)?t=O.cloneElement(n,e):ze(n)?t=n(e):t=O.createElement(e0,Gb({},e,{className:"recharts-reference-area-rect"})),t});function g2(n,e,t){if(e<1)return[];if(e===1&&t===void 0)return n;for(var r=[],i=0;i<n.length;i+=e)r.push(n[i]);return r}function Uie(n,e,t){var r={width:n.width+e.width,height:n.height+e.height};return sie(r,t)}function Gie(n,e,t){var r=t==="width",i=n.x,o=n.y,s=n.width,a=n.height;return e===1?{start:r?i:o,end:r?i+s:o+a}:{start:r?i+s:o+a,end:r?i:o}}function $h(n,e,t,r,i){if(n*e<n*r||n*e>n*i)return!1;var o=t();return n*(e-n*o/2-r)>=0&&n*(e+n*o/2-i)<=0}function qie(n,e){return g2(n,e+1)}function Kie(n,e,t,r,i){for(var o=(r||[]).slice(),s=e.start,a=e.end,l=0,c=1,u=s,d=function(){var m=r==null?void 0:r[l];if(m===void 0)return{v:g2(r,c)};var g=l,p,b=function(){return p===void 0&&(p=t(m,g)),p},y=m.coordinate,C=l===0||$h(n,y,b,u,a);C||(l=0,u=s,c+=1),C&&(u=y+n*(b()/2+i),l+=c)},f;c<=o.length;)if(f=d(),f)return f.v;return[]}function yu(n){"@babel/helpers - typeof";return yu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yu(n)}function qx(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function An(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?qx(Object(t),!0).forEach(function(r){Yie(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):qx(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Yie(n,e,t){return e=Xie(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Xie(n){var e=Zie(n,"string");return yu(e)=="symbol"?e:e+""}function Zie(n,e){if(yu(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(yu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Jie(n,e,t,r,i){for(var o=(r||[]).slice(),s=o.length,a=e.start,l=e.end,c=function(f){var h=o[f],m,g=function(){return m===void 0&&(m=t(h,f)),m};if(f===s-1){var p=n*(h.coordinate+n*g()/2-l);o[f]=h=An(An({},h),{},{tickCoord:p>0?h.coordinate-p*n:h.coordinate})}else o[f]=h=An(An({},h),{},{tickCoord:h.coordinate});var b=$h(n,h.tickCoord,g,a,l);b&&(l=h.tickCoord-n*(g()/2+i),o[f]=An(An({},h),{},{isShow:!0}))},u=s-1;u>=0;u--)c(u);return o}function Qie(n,e,t,r,i,o){var s=(r||[]).slice(),a=s.length,l=e.start,c=e.end;if(o){var u=r[a-1],d=t(u,a-1),f=n*(u.coordinate+n*d/2-c);s[a-1]=u=An(An({},u),{},{tickCoord:f>0?u.coordinate-f*n:u.coordinate});var h=$h(n,u.tickCoord,function(){return d},l,c);h&&(c=u.tickCoord-n*(d/2+i),s[a-1]=An(An({},u),{},{isShow:!0}))}for(var m=o?a-1:a,g=function(y){var C=s[y],A,w=function(){return A===void 0&&(A=t(C,y)),A};if(y===0){var S=n*(C.coordinate-n*w()/2-l);s[y]=C=An(An({},C),{},{tickCoord:S<0?C.coordinate-S*n:C.coordinate})}else s[y]=C=An(An({},C),{},{tickCoord:C.coordinate});var _=$h(n,C.tickCoord,w,l,c);_&&(l=C.tickCoord+n*(w()/2+i),s[y]=An(An({},C),{},{isShow:!0}))},p=0;p<m;p++)g(p);return s}function eoe(n,e,t){var r=n.tick,i=n.ticks,o=n.viewBox,s=n.minTickGap,a=n.orientation,l=n.interval,c=n.tickFormatter,u=n.unit,d=n.angle;if(!i||!i.length||!r)return[];if(fe(l)||_l.isSsr)return qie(i,typeof l=="number"&&fe(l)?l:0);var f=[],h=a==="top"||a==="bottom"?"width":"height",m=u&&h==="width"?wc(u,{fontSize:e,letterSpacing:t}):{width:0,height:0},g=function(C,A){var w=ze(c)?c(C.value,A):C.value;return h==="width"?Uie(wc(w,{fontSize:e,letterSpacing:t}),m,d):wc(w,{fontSize:e,letterSpacing:t})[h]},p=i.length>=2?Jr(i[1].coordinate-i[0].coordinate):1,b=Gie(o,p,h);return l==="equidistantPreserveStart"?Kie(p,b,g,i,s):(l==="preserveStart"||l==="preserveStartEnd"?f=Qie(p,b,g,i,s,l==="preserveStartEnd"):f=Jie(p,b,g,i,s),f.filter(function(y){return y.isShow}))}var toe=["viewBox"],noe=["viewBox"],roe=["ticks"];function Ha(n){"@babel/helpers - typeof";return Ha=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ha(n)}function ma(){return ma=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ma.apply(this,arguments)}function Kx(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Rn(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Kx(Object(t),!0).forEach(function(r){o0(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Kx(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Dp(n,e){if(n==null)return{};var t=ioe(n,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function ioe(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function ooe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Yx(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,v2(r.key),r)}}function soe(n,e,t){return e&&Yx(n.prototype,e),t&&Yx(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function aoe(n,e,t){return e=Vh(e),loe(n,p2()?Reflect.construct(e,t||[],Vh(n).constructor):e.apply(n,t))}function loe(n,e){if(e&&(Ha(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return coe(n)}function coe(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function p2(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(p2=function(){return!!n})()}function Vh(n){return Vh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Vh(n)}function uoe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&Kb(n,e)}function Kb(n,e){return Kb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Kb(n,e)}function o0(n,e,t){return e=v2(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function v2(n){var e=doe(n,"string");return Ha(e)=="symbol"?e:e+""}function doe(n,e){if(Ha(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Ha(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var ng=function(n){function e(t){var r;return ooe(this,e),r=aoe(this,e,[t]),r.state={fontSize:"",letterSpacing:""},r}return uoe(e,n),soe(e,[{key:"shouldComponentUpdate",value:function(r,i){var o=r.viewBox,s=Dp(r,toe),a=this.props,l=a.viewBox,c=Dp(a,noe);return!ya(o,l)||!ya(s,c)||!ya(i,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var i=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var i=this.props,o=i.x,s=i.y,a=i.width,l=i.height,c=i.orientation,u=i.tickSize,d=i.mirror,f=i.tickMargin,h,m,g,p,b,y,C=d?-1:1,A=r.tickSize||u,w=fe(r.tickCoord)?r.tickCoord:r.coordinate;switch(c){case"top":h=m=r.coordinate,p=s+ +!d*l,g=p-C*A,y=g-C*f,b=w;break;case"left":g=p=r.coordinate,m=o+ +!d*a,h=m-C*A,b=h-C*f,y=w;break;case"right":g=p=r.coordinate,m=o+ +d*a,h=m+C*A,b=h+C*f,y=w;break;default:h=m=r.coordinate,p=s+ +d*l,g=p+C*A,y=g+C*f,b=w;break}return{line:{x1:h,y1:g,x2:m,y2:p},tick:{x:b,y}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,i=r.orientation,o=r.mirror,s;switch(i){case"left":s=o?"start":"end";break;case"right":s=o?"end":"start";break;default:s="middle";break}return s}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,i=r.orientation,o=r.mirror,s="end";switch(i){case"left":case"right":s="middle";break;case"top":s=o?"start":"end";break;default:s=o?"end":"start";break}return s}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.x,o=r.y,s=r.width,a=r.height,l=r.orientation,c=r.mirror,u=r.axisLine,d=Rn(Rn(Rn({},He(this.props,!1)),He(u,!1)),{},{fill:"none"});if(l==="top"||l==="bottom"){var f=+(l==="top"&&!c||l==="bottom"&&c);d=Rn(Rn({},d),{},{x1:i,y1:o+f*a,x2:i+s,y2:o+f*a})}else{var h=+(l==="left"&&!c||l==="right"&&c);d=Rn(Rn({},d),{},{x1:i+h*s,y1:o,x2:i+h*s,y2:o+a})}return O.createElement("line",ma({},d,{className:rt("recharts-cartesian-axis-line",Ir(u,"className"))}))}},{key:"renderTicks",value:function(r,i,o){var s=this,a=this.props,l=a.tickLine,c=a.stroke,u=a.tick,d=a.tickFormatter,f=a.unit,h=eoe(Rn(Rn({},this.props),{},{ticks:r}),i,o),m=this.getTickTextAnchor(),g=this.getTickVerticalAnchor(),p=He(this.props,!1),b=He(u,!1),y=Rn(Rn({},p),{},{fill:"none"},He(l,!1)),C=h.map(function(A,w){var S=s.getTickLineCoord(A),_=S.line,v=S.tick,x=Rn(Rn(Rn(Rn({textAnchor:m,verticalAnchor:g},p),{},{stroke:"none",fill:c},b),v),{},{index:w,payload:A,visibleTicksCount:h.length,tickFormatter:d});return O.createElement(It,ma({className:"recharts-cartesian-axis-tick",key:"tick-".concat(A.value,"-").concat(A.coordinate,"-").concat(A.tickCoord)},Kf(s.props,A,w)),l&&O.createElement("line",ma({},y,_,{className:rt("recharts-cartesian-axis-tick-line",Ir(l,"className"))})),u&&e.renderTickItem(u,x,"".concat(ze(d)?d(A.value,w):A.value).concat(f||"")))});return O.createElement("g",{className:"recharts-cartesian-axis-ticks"},C)}},{key:"render",value:function(){var r=this,i=this.props,o=i.axisLine,s=i.width,a=i.height,l=i.ticksGenerator,c=i.className,u=i.hide;if(u)return null;var d=this.props,f=d.ticks,h=Dp(d,roe),m=f;return ze(l)&&(m=f&&f.length>0?l(this.props):l(h)),s<=0||a<=0||!m||!m.length?null:O.createElement(It,{className:rt("recharts-cartesian-axis",c),ref:function(p){r.layerReference=p}},o&&this.renderAxisLine(),this.renderTicks(m,this.state.fontSize,this.state.letterSpacing),En.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,i,o){var s;return O.isValidElement(r)?s=O.cloneElement(r,i):ze(r)?s=r(i):s=O.createElement(lh,ma({},i,{className:"recharts-cartesian-axis-tick-value"}),o),s}}])}(R.Component);o0(ng,"displayName","CartesianAxis");o0(ng,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var foe=["layout","type","stroke","connectNulls","isRange","ref"],hoe=["key"],b2;function Ua(n){"@babel/helpers - typeof";return Ua=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ua(n)}function y2(n,e){if(n==null)return{};var t=moe(n,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function moe(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function as(){return as=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},as.apply(this,arguments)}function Xx(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function fo(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Xx(Object(t),!0).forEach(function(r){yi(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Xx(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function goe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Zx(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,_2(r.key),r)}}function poe(n,e,t){return e&&Zx(n.prototype,e),t&&Zx(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function voe(n,e,t){return e=zh(e),boe(n,w2()?Reflect.construct(e,t||[],zh(n).constructor):e.apply(n,t))}function boe(n,e){if(e&&(Ua(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yoe(n)}function yoe(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function w2(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(w2=function(){return!!n})()}function zh(n){return zh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},zh(n)}function woe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&Yb(n,e)}function Yb(n,e){return Yb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Yb(n,e)}function yi(n,e,t){return e=_2(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function _2(n){var e=_oe(n,"string");return Ua(e)=="symbol"?e:e+""}function _oe(n,e){if(Ua(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Ua(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var Rs=function(n){function e(){var t;goe(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=voe(this,e,[].concat(i)),yi(t,"state",{isAnimationFinished:!0}),yi(t,"id",Xu("recharts-area-")),yi(t,"handleAnimationEnd",function(){var s=t.props.onAnimationEnd;t.setState({isAnimationFinished:!0}),ze(s)&&s()}),yi(t,"handleAnimationStart",function(){var s=t.props.onAnimationStart;t.setState({isAnimationFinished:!1}),ze(s)&&s()}),t}return woe(e,n),poe(e,[{key:"renderDots",value:function(r,i,o){var s=this.props.isAnimationActive,a=this.state.isAnimationFinished;if(s&&!a)return null;var l=this.props,c=l.dot,u=l.points,d=l.dataKey,f=He(this.props,!1),h=He(c,!0),m=u.map(function(p,b){var y=fo(fo(fo({key:"dot-".concat(b),r:3},f),h),{},{index:b,cx:p.x,cy:p.y,dataKey:d,value:p.value,payload:p.payload,points:u});return e.renderDotItem(c,y)}),g={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(o,")"):null};return O.createElement(It,as({className:"recharts-area-dots"},g),m)}},{key:"renderHorizontalRect",value:function(r){var i=this.props,o=i.baseLine,s=i.points,a=i.strokeWidth,l=s[0].x,c=s[s.length-1].x,u=r*Math.abs(l-c),d=bo(s.map(function(f){return f.y||0}));return fe(o)&&typeof o=="number"?d=Math.max(o,d):o&&Array.isArray(o)&&o.length&&(d=Math.max(bo(o.map(function(f){return f.y||0})),d)),fe(d)?O.createElement("rect",{x:l<c?l:l-u,y:0,width:u,height:Math.floor(d+(a?parseInt("".concat(a),10):1))}):null}},{key:"renderVerticalRect",value:function(r){var i=this.props,o=i.baseLine,s=i.points,a=i.strokeWidth,l=s[0].y,c=s[s.length-1].y,u=r*Math.abs(l-c),d=bo(s.map(function(f){return f.x||0}));return fe(o)&&typeof o=="number"?d=Math.max(o,d):o&&Array.isArray(o)&&o.length&&(d=Math.max(bo(o.map(function(f){return f.x||0})),d)),fe(d)?O.createElement("rect",{x:0,y:l<c?l:l-u,width:d+(a?parseInt("".concat(a),10):1),height:Math.floor(u)}):null}},{key:"renderClipRect",value:function(r){var i=this.props.layout;return i==="vertical"?this.renderVerticalRect(r):this.renderHorizontalRect(r)}},{key:"renderAreaStatically",value:function(r,i,o,s){var a=this.props,l=a.layout,c=a.type,u=a.stroke,d=a.connectNulls,f=a.isRange;a.ref;var h=y2(a,foe);return O.createElement(It,{clipPath:o?"url(#clipPath-".concat(s,")"):null},O.createElement(Sc,as({},He(h,!0),{points:r,connectNulls:d,type:c,baseLine:i,layout:l,stroke:"none",className:"recharts-area-area"})),u!=="none"&&O.createElement(Sc,as({},He(this.props,!1),{className:"recharts-area-curve",layout:l,type:c,connectNulls:d,fill:"none",points:r})),u!=="none"&&f&&O.createElement(Sc,as({},He(this.props,!1),{className:"recharts-area-curve",layout:l,type:c,connectNulls:d,fill:"none",points:i})))}},{key:"renderAreaWithAnimation",value:function(r,i){var o=this,s=this.props,a=s.points,l=s.baseLine,c=s.isAnimationActive,u=s.animationBegin,d=s.animationDuration,f=s.animationEasing,h=s.animationId,m=this.state,g=m.prevPoints,p=m.prevBaseLine;return O.createElement(Ji,{begin:u,duration:d,isActive:c,easing:f,from:{t:0},to:{t:1},key:"area-".concat(h),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(b){var y=b.t;if(g){var C=g.length/a.length,A=a.map(function(v,x){var T=Math.floor(x*C);if(g[T]){var E=g[T],k=Tr(E.x,v.x),I=Tr(E.y,v.y);return fo(fo({},v),{},{x:k(y),y:I(y)})}return v}),w;if(fe(l)&&typeof l=="number"){var S=Tr(p,l);w=S(y)}else if(Ke(l)||pl(l)){var _=Tr(p,0);w=_(y)}else w=l.map(function(v,x){var T=Math.floor(x*C);if(p[T]){var E=p[T],k=Tr(E.x,v.x),I=Tr(E.y,v.y);return fo(fo({},v),{},{x:k(y),y:I(y)})}return v});return o.renderAreaStatically(A,w,r,i)}return O.createElement(It,null,O.createElement("defs",null,O.createElement("clipPath",{id:"animationClipPath-".concat(i)},o.renderClipRect(y))),O.createElement(It,{clipPath:"url(#animationClipPath-".concat(i,")")},o.renderAreaStatically(a,l,r,i)))})}},{key:"renderArea",value:function(r,i){var o=this.props,s=o.points,a=o.baseLine,l=o.isAnimationActive,c=this.state,u=c.prevPoints,d=c.prevBaseLine,f=c.totalLength;return l&&s&&s.length&&(!u&&f>0||!Jc(u,s)||!Jc(d,a))?this.renderAreaWithAnimation(r,i):this.renderAreaStatically(s,a,r,i)}},{key:"render",value:function(){var r,i=this.props,o=i.hide,s=i.dot,a=i.points,l=i.className,c=i.top,u=i.left,d=i.xAxis,f=i.yAxis,h=i.width,m=i.height,g=i.isAnimationActive,p=i.id;if(o||!a||!a.length)return null;var b=this.state.isAnimationFinished,y=a.length===1,C=rt("recharts-area",l),A=d&&d.allowDataOverflow,w=f&&f.allowDataOverflow,S=A||w,_=Ke(p)?this.id:p,v=(r=He(s,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},x=v.r,T=x===void 0?3:x,E=v.strokeWidth,k=E===void 0?2:E,I=y4(s)?s:{},B=I.clipDot,D=B===void 0?!0:B,F=T*2+k;return O.createElement(It,{className:C},A||w?O.createElement("defs",null,O.createElement("clipPath",{id:"clipPath-".concat(_)},O.createElement("rect",{x:A?u:u-h/2,y:w?c:c-m/2,width:A?h:h*2,height:w?m:m*2})),!D&&O.createElement("clipPath",{id:"clipPath-dots-".concat(_)},O.createElement("rect",{x:u-F/2,y:c-F/2,width:h+F,height:m+F}))):null,y?null:this.renderArea(S,_),(s||y)&&this.renderDots(S,D,_),(!g||b)&&So.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,curBaseLine:r.baseLine,prevPoints:i.curPoints,prevBaseLine:i.curBaseLine}:r.points!==i.curPoints||r.baseLine!==i.curBaseLine?{curPoints:r.points,curBaseLine:r.baseLine}:null}}])}(R.PureComponent);b2=Rs;yi(Rs,"displayName","Area");yi(Rs,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!_l.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});yi(Rs,"getBaseValue",function(n,e,t,r){var i=n.layout,o=n.baseValue,s=e.props.baseValue,a=s??o;if(fe(a)&&typeof a=="number")return a;var l=i==="horizontal"?r:t,c=l.scale.domain();if(l.type==="number"){var u=Math.max(c[0],c[1]),d=Math.min(c[0],c[1]);return a==="dataMin"?d:a==="dataMax"||u<0?u:Math.max(Math.min(c[0],c[1]),0)}return a==="dataMin"?c[0]:a==="dataMax"?c[1]:c[0]});yi(Rs,"getComposedData",function(n){var e=n.props,t=n.item,r=n.xAxis,i=n.yAxis,o=n.xAxisTicks,s=n.yAxisTicks,a=n.bandSize,l=n.dataKey,c=n.stackedData,u=n.dataStartIndex,d=n.displayedData,f=n.offset,h=e.layout,m=c&&c.length,g=b2.getBaseValue(e,t,r,i),p=h==="horizontal",b=!1,y=d.map(function(A,w){var S;m?S=c[u+w]:(S=gr(A,l),Array.isArray(S)?b=!0:S=[g,S]);var _=S[1]==null||m&&gr(A,l)==null;return p?{x:BS({axis:r,ticks:o,bandSize:a,entry:A,index:w}),y:_?null:i.scale(S[1]),value:S,payload:A}:{x:_?null:r.scale(S[1]),y:BS({axis:i,ticks:s,bandSize:a,entry:A,index:w}),value:S,payload:A}}),C;return m||b?C=y.map(function(A){var w=Array.isArray(A.value)?A.value[0]:null;return p?{x:A.x,y:w!=null&&A.y!=null?i.scale(w):null}:{x:w!=null?r.scale(w):null,y:A.y}}):C=p?i.scale(g):r.scale(g),fo({points:y,baseLine:C,layout:h,isRange:b},f)});yi(Rs,"renderDotItem",function(n,e){var t;if(O.isValidElement(n))t=O.cloneElement(n,e);else if(ze(n))t=n(e);else{var r=rt("recharts-area-dot",typeof n!="boolean"?n.className:""),i=e.key,o=y2(e,hoe);t=O.createElement(t0,as({},o,{key:i,className:r}))}return t});function Ga(n){"@babel/helpers - typeof";return Ga=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ga(n)}function Coe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Soe(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,x2(r.key),r)}}function xoe(n,e,t){return e&&Soe(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function Aoe(n,e,t){return e=jh(e),Toe(n,C2()?Reflect.construct(e,t||[],jh(n).constructor):e.apply(n,t))}function Toe(n,e){if(e&&(Ga(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Eoe(n)}function Eoe(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function C2(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(C2=function(){return!!n})()}function jh(n){return jh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},jh(n)}function koe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&Xb(n,e)}function Xb(n,e){return Xb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Xb(n,e)}function S2(n,e,t){return e=x2(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function x2(n){var e=Poe(n,"string");return Ga(e)=="symbol"?e:e+""}function Poe(n,e){if(Ga(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Ga(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Zb(){return Zb=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Zb.apply(this,arguments)}function Ioe(n){var e=n.xAxisId,t=a2(),r=l2(),i=o2(e);return i==null?null:O.createElement(ng,Zb({},i,{className:rt("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:t,height:r},ticksGenerator:function(s){return ss(s,!0)}}))}var s0=function(n){function e(){return Coe(this,e),Aoe(this,e,arguments)}return koe(e,n),xoe(e,[{key:"render",value:function(){return O.createElement(Ioe,this.props)}}])}(O.Component);S2(s0,"displayName","XAxis");S2(s0,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function qa(n){"@babel/helpers - typeof";return qa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qa(n)}function Ooe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Roe(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,E2(r.key),r)}}function Moe(n,e,t){return e&&Roe(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function Doe(n,e,t){return e=Wh(e),Boe(n,A2()?Reflect.construct(e,t||[],Wh(n).constructor):e.apply(n,t))}function Boe(n,e){if(e&&(qa(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Noe(n)}function Noe(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function A2(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(A2=function(){return!!n})()}function Wh(n){return Wh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Wh(n)}function Loe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&Jb(n,e)}function Jb(n,e){return Jb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Jb(n,e)}function T2(n,e,t){return e=E2(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function E2(n){var e=Foe(n,"string");return qa(e)=="symbol"?e:e+""}function Foe(n,e){if(qa(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(qa(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Qb(){return Qb=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Qb.apply(this,arguments)}var $oe=function(e){var t=e.yAxisId,r=a2(),i=l2(),o=s2(t);return o==null?null:O.createElement(ng,Qb({},o,{className:rt("recharts-".concat(o.axisType," ").concat(o.axisType),o.className),viewBox:{x:0,y:0,width:r,height:i},ticksGenerator:function(a){return ss(a,!0)}}))},a0=function(n){function e(){return Ooe(this,e),Doe(this,e,arguments)}return Loe(e,n),Moe(e,[{key:"render",value:function(){return O.createElement($oe,this.props)}}])}(O.Component);T2(a0,"displayName","YAxis");T2(a0,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function Jx(n){return Woe(n)||joe(n)||zoe(n)||Voe()}function Voe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zoe(n,e){if(n){if(typeof n=="string")return ey(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ey(n,e)}}function joe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Woe(n){if(Array.isArray(n))return ey(n)}function ey(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}var ty=function(e,t,r,i,o){var s=ni(e,i0),a=ni(e,Qm),l=[].concat(Jx(s),Jx(a)),c=ni(e,tg),u="".concat(i,"Id"),d=i[0],f=t;if(l.length&&(f=l.reduce(function(g,p){if(p.props[u]===r&&Ci(p.props,"extendDomain")&&fe(p.props[d])){var b=p.props[d];return[Math.min(g[0],b),Math.max(g[1],b)]}return g},f)),c.length){var h="".concat(d,"1"),m="".concat(d,"2");f=c.reduce(function(g,p){if(p.props[u]===r&&Ci(p.props,"extendDomain")&&fe(p.props[h])&&fe(p.props[m])){var b=p.props[h],y=p.props[m];return[Math.min(g[0],b,y),Math.max(g[1],b,y)]}return g},f)}return o&&o.length&&(f=o.reduce(function(g,p){return fe(p)?[Math.min(g[0],p),Math.max(g[1],p)]:g},f)),f},k2={exports:{}};(function(n){var e=Object.prototype.hasOwnProperty,t="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(t=!1));function i(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function o(l,c,u,d,f){if(typeof u!="function")throw new TypeError("The listener must be a function");var h=new i(u,d||l,f),m=t?t+c:c;return l._events[m]?l._events[m].fn?l._events[m]=[l._events[m],h]:l._events[m].push(h):(l._events[m]=h,l._eventsCount++),l}function s(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var c=[],u,d;if(this._eventsCount===0)return c;for(d in u=this._events)e.call(u,d)&&c.push(t?d.slice(1):d);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},a.prototype.listeners=function(c){var u=t?t+c:c,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var f=0,h=d.length,m=new Array(h);f<h;f++)m[f]=d[f].fn;return m},a.prototype.listenerCount=function(c){var u=t?t+c:c,d=this._events[u];return d?d.fn?1:d.length:0},a.prototype.emit=function(c,u,d,f,h,m){var g=t?t+c:c;if(!this._events[g])return!1;var p=this._events[g],b=arguments.length,y,C;if(p.fn){switch(p.once&&this.removeListener(c,p.fn,void 0,!0),b){case 1:return p.fn.call(p.context),!0;case 2:return p.fn.call(p.context,u),!0;case 3:return p.fn.call(p.context,u,d),!0;case 4:return p.fn.call(p.context,u,d,f),!0;case 5:return p.fn.call(p.context,u,d,f,h),!0;case 6:return p.fn.call(p.context,u,d,f,h,m),!0}for(C=1,y=new Array(b-1);C<b;C++)y[C-1]=arguments[C];p.fn.apply(p.context,y)}else{var A=p.length,w;for(C=0;C<A;C++)switch(p[C].once&&this.removeListener(c,p[C].fn,void 0,!0),b){case 1:p[C].fn.call(p[C].context);break;case 2:p[C].fn.call(p[C].context,u);break;case 3:p[C].fn.call(p[C].context,u,d);break;case 4:p[C].fn.call(p[C].context,u,d,f);break;default:if(!y)for(w=1,y=new Array(b-1);w<b;w++)y[w-1]=arguments[w];p[C].fn.apply(p[C].context,y)}}return!0},a.prototype.on=function(c,u,d){return o(this,c,u,d,!1)},a.prototype.once=function(c,u,d){return o(this,c,u,d,!0)},a.prototype.removeListener=function(c,u,d,f){var h=t?t+c:c;if(!this._events[h])return this;if(!u)return s(this,h),this;var m=this._events[h];if(m.fn)m.fn===u&&(!f||m.once)&&(!d||m.context===d)&&s(this,h);else{for(var g=0,p=[],b=m.length;g<b;g++)(m[g].fn!==u||f&&!m[g].once||d&&m[g].context!==d)&&p.push(m[g]);p.length?this._events[h]=p.length===1?p[0]:p:s(this,h)}return this},a.prototype.removeAllListeners=function(c){var u;return c?(u=t?t+c:c,this._events[u]&&s(this,u)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=t,a.EventEmitter=a,n.exports=a})(k2);var Hoe=k2.exports;const Uoe=ot(Hoe);var Bp=new Uoe,Np="recharts.syncMouseEvents";function wu(n){"@babel/helpers - typeof";return wu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wu(n)}function Goe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function qoe(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,P2(r.key),r)}}function Koe(n,e,t){return e&&qoe(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function Lp(n,e,t){return e=P2(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function P2(n){var e=Yoe(n,"string");return wu(e)=="symbol"?e:e+""}function Yoe(n,e){if(wu(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(wu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var Xoe=function(){function n(){Goe(this,n),Lp(this,"activeIndex",0),Lp(this,"coordinateList",[]),Lp(this,"layout","horizontal")}return Koe(n,[{key:"setDetails",value:function(t){var r,i=t.coordinateList,o=i===void 0?null:i,s=t.container,a=s===void 0?null:s,l=t.layout,c=l===void 0?null:l,u=t.offset,d=u===void 0?null:u,f=t.mouseHandlerCallback,h=f===void 0?null:f;this.coordinateList=(r=o??this.coordinateList)!==null&&r!==void 0?r:[],this.container=a??this.container,this.layout=c??this.layout,this.offset=d??this.offset,this.mouseHandlerCallback=h??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(t){if(this.coordinateList.length!==0)switch(t.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(t){this.activeIndex=t}},{key:"spoofMouse",value:function(){var t,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),o=i.x,s=i.y,a=i.height,l=this.coordinateList[this.activeIndex].coordinate,c=((t=window)===null||t===void 0?void 0:t.scrollX)||0,u=((r=window)===null||r===void 0?void 0:r.scrollY)||0,d=o+l+c,f=s+this.offset.top+a/2+u;this.mouseHandlerCallback({pageX:d,pageY:f})}}}])}();function Zoe(n,e,t){if(t==="number"&&e===!0&&Array.isArray(n)){var r=n==null?void 0:n[0],i=n==null?void 0:n[1];if(r&&i&&fe(r)&&fe(i))return!0}return!1}function Joe(n,e,t,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:n==="horizontal"?e.x-i:t.left+.5,y:n==="horizontal"?t.top+.5:e.y-i,width:n==="horizontal"?r:t.width-1,height:n==="horizontal"?t.height-1:r}}function I2(n){var e=n.cx,t=n.cy,r=n.radius,i=n.startAngle,o=n.endAngle,s=yn(e,t,r,i),a=yn(e,t,r,o);return{points:[s,a],cx:e,cy:t,radius:r,startAngle:i,endAngle:o}}function Qoe(n,e,t){var r,i,o,s;if(n==="horizontal")r=e.x,o=r,i=t.top,s=t.top+t.height;else if(n==="vertical")i=e.y,s=i,r=t.left,o=t.left+t.width;else if(e.cx!=null&&e.cy!=null)if(n==="centric"){var a=e.cx,l=e.cy,c=e.innerRadius,u=e.outerRadius,d=e.angle,f=yn(a,l,c,d),h=yn(a,l,u,d);r=f.x,i=f.y,o=h.x,s=h.y}else return I2(e);return[{x:r,y:i},{x:o,y:s}]}function _u(n){"@babel/helpers - typeof";return _u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_u(n)}function Qx(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Qd(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Qx(Object(t),!0).forEach(function(r){ese(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Qx(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function ese(n,e,t){return e=tse(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function tse(n){var e=nse(n,"string");return _u(e)=="symbol"?e:e+""}function nse(n,e){if(_u(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(_u(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function rse(n){var e,t,r=n.element,i=n.tooltipEventType,o=n.isActive,s=n.activeCoordinate,a=n.activePayload,l=n.offset,c=n.activeTooltipIndex,u=n.tooltipAxisBandSize,d=n.layout,f=n.chartName,h=(e=r.props.cursor)!==null&&e!==void 0?e:(t=r.type.defaultProps)===null||t===void 0?void 0:t.cursor;if(!r||!h||!o||!s||f!=="ScatterChart"&&i!=="axis")return null;var m,g=Sc;if(f==="ScatterChart")m=s,g=Nte;else if(f==="BarChart")m=Joe(d,s,l,u),g=e0;else if(d==="radial"){var p=I2(s),b=p.cx,y=p.cy,C=p.radius,A=p.startAngle,w=p.endAngle;m={cx:b,cy:y,startAngle:A,endAngle:w,innerRadius:C,outerRadius:C},g=DR}else m={points:Qoe(d,s,l)},g=Sc;var S=Qd(Qd(Qd(Qd({stroke:"#ccc",pointerEvents:"none"},l),m),He(h,!1)),{},{payload:a,payloadIndex:c,className:rt("recharts-tooltip-cursor",h.className)});return R.isValidElement(h)?R.cloneElement(h,S):R.createElement(g,S)}var ise=["item"],ose=["children","className","width","height","style","compact","title","desc"];function Ka(n){"@babel/helpers - typeof";return Ka=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ka(n)}function ga(){return ga=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ga.apply(this,arguments)}function eA(n,e){return lse(n)||ase(n,e)||R2(n,e)||sse()}function sse(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ase(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,o,s,a=[],l=!0,c=!1;try{if(o=(t=t.call(n)).next,e!==0)for(;!(l=(r=o.call(t)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function lse(n){if(Array.isArray(n))return n}function tA(n,e){if(n==null)return{};var t=cse(n,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function cse(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function use(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function dse(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,M2(r.key),r)}}function fse(n,e,t){return e&&dse(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function hse(n,e,t){return e=Hh(e),mse(n,O2()?Reflect.construct(e,t||[],Hh(n).constructor):e.apply(n,t))}function mse(n,e){if(e&&(Ka(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gse(n)}function gse(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function O2(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(O2=function(){return!!n})()}function Hh(n){return Hh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Hh(n)}function pse(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&ny(n,e)}function ny(n,e){return ny=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},ny(n,e)}function Ya(n){return yse(n)||bse(n)||R2(n)||vse()}function vse(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function R2(n,e){if(n){if(typeof n=="string")return ry(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ry(n,e)}}function bse(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function yse(n){if(Array.isArray(n))return ry(n)}function ry(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function nA(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Y(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?nA(Object(t),!0).forEach(function(r){Oe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):nA(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Oe(n,e,t){return e=M2(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function M2(n){var e=wse(n,"string");return Ka(e)=="symbol"?e:e+""}function wse(n,e){if(Ka(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Ka(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var _se={xAxis:["bottom","top"],yAxis:["left","right"]},Cse={width:"100%",height:"100%"},D2={x:0,y:0};function ef(n){return n}var Sse=function(e,t){return t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius},xse=function(e,t,r,i){var o=t.find(function(u){return u&&u.index===r});if(o){if(e==="horizontal")return{x:o.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:o.coordinate};if(e==="centric"){var s=o.coordinate,a=i.radius;return Y(Y(Y({},i),yn(i.cx,i.cy,a,s)),{},{angle:s,radius:a})}var l=o.coordinate,c=i.angle;return Y(Y(Y({},i),yn(i.cx,i.cy,l,c)),{},{angle:c,radius:l})}return D2},rg=function(e,t){var r=t.graphicalItems,i=t.dataStartIndex,o=t.dataEndIndex,s=(r??[]).reduce(function(a,l){var c=l.props.data;return c&&c.length?[].concat(Ya(a),Ya(c)):a},[]);return s.length>0?s:e&&e.length&&fe(i)&&fe(o)?e.slice(i,o+1):[]};function B2(n){return n==="number"?[0,"auto"]:void 0}var iy=function(e,t,r,i){var o=e.graphicalItems,s=e.tooltipAxis,a=rg(t,e);return r<0||!o||!o.length||r>=a.length?null:o.reduce(function(l,c){var u,d=(u=c.props.data)!==null&&u!==void 0?u:t;d&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=r&&(d=d.slice(e.dataStartIndex,e.dataEndIndex+1));var f;if(s.dataKey&&!s.allowDuplicatedCategory){var h=d===void 0?a:d;f=Gf(h,s.dataKey,i)}else f=d&&d[r]||a[r];return f?[].concat(Ya(l),[OR(c,f)]):l},[])},rA=function(e,t,r,i){var o=i||{x:e.chartX,y:e.chartY},s=Sse(o,r),a=e.orderedTooltipTicks,l=e.tooltipAxis,c=e.tooltipTicks,u=SJ(s,a,c,l);if(u>=0&&c){var d=c[u]&&c[u].value,f=iy(e,t,u,d),h=xse(r,a,u,o);return{activeTooltipIndex:u,activeLabel:d,activePayload:f,activeCoordinate:h}}return null},Ase=function(e,t){var r=t.axes,i=t.graphicalItems,o=t.axisType,s=t.axisIdKey,a=t.stackGroups,l=t.dataStartIndex,c=t.dataEndIndex,u=e.layout,d=e.children,f=e.stackOffset,h=PR(u,o);return r.reduce(function(m,g){var p,b=g.type.defaultProps!==void 0?Y(Y({},g.type.defaultProps),g.props):g.props,y=b.type,C=b.dataKey,A=b.allowDataOverflow,w=b.allowDuplicatedCategory,S=b.scale,_=b.ticks,v=b.includeHidden,x=b[s];if(m[x])return m;var T=rg(e.data,{graphicalItems:i.filter(function(G){var X,ee=s in G.props?G.props[s]:(X=G.type.defaultProps)===null||X===void 0?void 0:X[s];return ee===x}),dataStartIndex:l,dataEndIndex:c}),E=T.length,k,I,B;Zoe(b.domain,A,y)&&(k=Sb(b.domain,null,A),h&&(y==="number"||S!=="auto")&&(B=Cc(T,C,"category")));var D=B2(y);if(!k||k.length===0){var F,L=(F=b.domain)!==null&&F!==void 0?F:D;if(C){if(k=Cc(T,C,y),y==="category"&&h){var H=u4(k);w&&H?(I=k,k=Oh(0,E)):w||(k=$S(L,k,g).reduce(function(G,X){return G.indexOf(X)>=0?G:[].concat(Ya(G),[X])},[]))}else if(y==="category")w?k=k.filter(function(G){return G!==""&&!Ke(G)}):k=$S(L,k,g).reduce(function(G,X){return G.indexOf(X)>=0||X===""||Ke(X)?G:[].concat(Ya(G),[X])},[]);else if(y==="number"){var $=kJ(T,i.filter(function(G){var X,ee,ie=s in G.props?G.props[s]:(X=G.type.defaultProps)===null||X===void 0?void 0:X[s],me="hide"in G.props?G.props.hide:(ee=G.type.defaultProps)===null||ee===void 0?void 0:ee.hide;return ie===x&&(v||!me)}),C,o,u);$&&(k=$)}h&&(y==="number"||S!=="auto")&&(B=Cc(T,C,"category"))}else h?k=Oh(0,E):a&&a[x]&&a[x].hasStack&&y==="number"?k=f==="expand"?[0,1]:IR(a[x].stackGroups,l,c):k=kR(T,i.filter(function(G){var X=s in G.props?G.props[s]:G.type.defaultProps[s],ee="hide"in G.props?G.props.hide:G.type.defaultProps.hide;return X===x&&(v||!ee)}),y,u,!0);if(y==="number")k=ty(d,k,x,o,_),L&&(k=Sb(L,k,A));else if(y==="category"&&L){var ne=L,Z=k.every(function(G){return ne.indexOf(G)>=0});Z&&(k=ne)}}return Y(Y({},m),{},Oe({},x,Y(Y({},b),{},{axisType:o,domain:k,categoricalDomain:B,duplicateDomain:I,originalDomain:(p=b.domain)!==null&&p!==void 0?p:D,isCategorical:h,layout:u})))},{})},Tse=function(e,t){var r=t.graphicalItems,i=t.Axis,o=t.axisType,s=t.axisIdKey,a=t.stackGroups,l=t.dataStartIndex,c=t.dataEndIndex,u=e.layout,d=e.children,f=rg(e.data,{graphicalItems:r,dataStartIndex:l,dataEndIndex:c}),h=f.length,m=PR(u,o),g=-1;return r.reduce(function(p,b){var y=b.type.defaultProps!==void 0?Y(Y({},b.type.defaultProps),b.props):b.props,C=y[s],A=B2("number");if(!p[C]){g++;var w;return m?w=Oh(0,h):a&&a[C]&&a[C].hasStack?(w=IR(a[C].stackGroups,l,c),w=ty(d,w,C,o)):(w=Sb(A,kR(f,r.filter(function(S){var _,v,x=s in S.props?S.props[s]:(_=S.type.defaultProps)===null||_===void 0?void 0:_[s],T="hide"in S.props?S.props.hide:(v=S.type.defaultProps)===null||v===void 0?void 0:v.hide;return x===C&&!T}),"number",u),i.defaultProps.allowDataOverflow),w=ty(d,w,C,o)),Y(Y({},p),{},Oe({},C,Y(Y({axisType:o},i.defaultProps),{},{hide:!0,orientation:Ir(_se,"".concat(o,".").concat(g%2),null),domain:w,originalDomain:A,isCategorical:m,layout:u})))}return p},{})},Ese=function(e,t){var r=t.axisType,i=r===void 0?"xAxis":r,o=t.AxisComp,s=t.graphicalItems,a=t.stackGroups,l=t.dataStartIndex,c=t.dataEndIndex,u=e.children,d="".concat(i,"Id"),f=ni(u,o),h={};return f&&f.length?h=Ase(e,{axes:f,graphicalItems:s,axisType:i,axisIdKey:d,stackGroups:a,dataStartIndex:l,dataEndIndex:c}):s&&s.length&&(h=Tse(e,{Axis:o,graphicalItems:s,axisType:i,axisIdKey:d,stackGroups:a,dataStartIndex:l,dataEndIndex:c})),h},kse=function(e){var t=sa(e),r=ss(t,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:Ew(r,function(i){return i.coordinate}),tooltipAxis:t,tooltipAxisBandSize:Ch(t,r)}},iA=function(e){var t=e.children,r=e.defaultShowTooltip,i=sr(t,$a),o=0,s=0;return e.data&&e.data.length!==0&&(s=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(o=i.props.startIndex),i.props.endIndex>=0&&(s=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:o,dataEndIndex:s,activeTooltipIndex:-1,isTooltipActive:!!r}},Pse=function(e){return!e||!e.length?!1:e.some(function(t){var r=Ui(t&&t.type);return r&&r.indexOf("Bar")>=0})},oA=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},Ise=function(e,t){var r=e.props,i=e.graphicalItems,o=e.xAxisMap,s=o===void 0?{}:o,a=e.yAxisMap,l=a===void 0?{}:a,c=r.width,u=r.height,d=r.children,f=r.margin||{},h=sr(d,$a),m=sr(d,wa),g=Object.keys(l).reduce(function(w,S){var _=l[S],v=_.orientation;return!_.mirror&&!_.hide?Y(Y({},w),{},Oe({},v,w[v]+_.width)):w},{left:f.left||0,right:f.right||0}),p=Object.keys(s).reduce(function(w,S){var _=s[S],v=_.orientation;return!_.mirror&&!_.hide?Y(Y({},w),{},Oe({},v,Ir(w,"".concat(v))+_.height)):w},{top:f.top||0,bottom:f.bottom||0}),b=Y(Y({},p),g),y=b.bottom;h&&(b.bottom+=h.props.height||$a.defaultProps.height),m&&t&&(b=TJ(b,i,r,t));var C=c-b.left-b.right,A=u-b.top-b.bottom;return Y(Y({brushBottom:y},b),{},{width:Math.max(C,0),height:Math.max(A,0)})},Ose=function(e,t){if(t==="xAxis")return e[t].width;if(t==="yAxis")return e[t].height},Rse=function(e){var t=e.chartName,r=e.GraphicalChild,i=e.defaultTooltipEventType,o=i===void 0?"axis":i,s=e.validateTooltipEventTypes,a=s===void 0?["axis"]:s,l=e.axisComponents,c=e.legendContent,u=e.formatAxisMap,d=e.defaultProps,f=function(b,y){var C=y.graphicalItems,A=y.stackGroups,w=y.offset,S=y.updateId,_=y.dataStartIndex,v=y.dataEndIndex,x=b.barSize,T=b.layout,E=b.barGap,k=b.barCategoryGap,I=b.maxBarSize,B=oA(T),D=B.numericAxisName,F=B.cateAxisName,L=Pse(C),H=[];return C.forEach(function($,ne){var Z=rg(b.data,{graphicalItems:[$],dataStartIndex:_,dataEndIndex:v}),G=$.type.defaultProps!==void 0?Y(Y({},$.type.defaultProps),$.props):$.props,X=G.dataKey,ee=G.maxBarSize,ie=G["".concat(D,"Id")],me=G["".concat(F,"Id")],Ie={},ce=l.reduce(function(se,te){var re=y["".concat(te.axisType,"Map")],ge=G["".concat(te.axisType,"Id")];re&&re[ge]||te.axisType==="zAxis"||Po();var Ae=re[ge];return Y(Y({},se),{},Oe(Oe({},te.axisType,Ae),"".concat(te.axisType,"Ticks"),ss(Ae)))},Ie),q=ce[F],oe=ce["".concat(F,"Ticks")],Q=A&&A[ie]&&A[ie].hasStack&&VJ($,A[ie].stackGroups),K=Ui($.type).indexOf("Bar")>=0,Se=Ch(q,oe),le=[],Ce=L&&xJ({barSize:x,stackGroups:A,totalSize:Ose(ce,F)});if(K){var ye,je,P=Ke(ee)?I:ee,N=(ye=(je=Ch(q,oe,!0))!==null&&je!==void 0?je:P)!==null&&ye!==void 0?ye:0;le=AJ({barGap:E,barCategoryGap:k,bandSize:N!==Se?N:Se,sizeList:Ce[me],maxBarSize:P}),N!==Se&&(le=le.map(function(se){return Y(Y({},se),{},{position:Y(Y({},se.position),{},{offset:se.position.offset-N/2})})}))}var z=$&&$.type&&$.type.getComposedData;z&&H.push({props:Y(Y({},z(Y(Y({},ce),{},{displayedData:Z,props:b,dataKey:X,item:$,bandSize:Se,barPosition:le,offset:w,stackedData:Q,layout:T,dataStartIndex:_,dataEndIndex:v}))),{},Oe(Oe(Oe({key:$.key||"item-".concat(ne)},D,ce[D]),F,ce[F]),"animationId",S)),childIndex:C4($,b.children),item:$})}),H},h=function(b,y){var C=b.props,A=b.dataStartIndex,w=b.dataEndIndex,S=b.updateId;if(!R1({props:C}))return null;var _=C.children,v=C.layout,x=C.stackOffset,T=C.data,E=C.reverseStackOrder,k=oA(v),I=k.numericAxisName,B=k.cateAxisName,D=ni(_,r),F=LJ(T,D,"".concat(I,"Id"),"".concat(B,"Id"),x,E),L=l.reduce(function(G,X){var ee="".concat(X.axisType,"Map");return Y(Y({},G),{},Oe({},ee,Ese(C,Y(Y({},X),{},{graphicalItems:D,stackGroups:X.axisType===I&&F,dataStartIndex:A,dataEndIndex:w}))))},{}),H=Ise(Y(Y({},L),{},{props:C,graphicalItems:D}),y==null?void 0:y.legendBBox);Object.keys(L).forEach(function(G){L[G]=u(C,L[G],H,G.replace("Map",""),t)});var $=L["".concat(B,"Map")],ne=kse($),Z=f(C,Y(Y({},L),{},{dataStartIndex:A,dataEndIndex:w,updateId:S,graphicalItems:D,stackGroups:F,offset:H}));return Y(Y({formattedGraphicalItems:Z,graphicalItems:D,offset:H,stackGroups:F},ne),L)},m=function(p){function b(y){var C,A,w;return use(this,b),w=hse(this,b,[y]),Oe(w,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Oe(w,"accessibilityManager",new Xoe),Oe(w,"handleLegendBBoxUpdate",function(S){if(S){var _=w.state,v=_.dataStartIndex,x=_.dataEndIndex,T=_.updateId;w.setState(Y({legendBBox:S},h({props:w.props,dataStartIndex:v,dataEndIndex:x,updateId:T},Y(Y({},w.state),{},{legendBBox:S}))))}}),Oe(w,"handleReceiveSyncEvent",function(S,_,v){if(w.props.syncId===S){if(v===w.eventEmitterSymbol&&typeof w.props.syncMethod!="function")return;w.applySyncEvent(_)}}),Oe(w,"handleBrushChange",function(S){var _=S.startIndex,v=S.endIndex;if(_!==w.state.dataStartIndex||v!==w.state.dataEndIndex){var x=w.state.updateId;w.setState(function(){return Y({dataStartIndex:_,dataEndIndex:v},h({props:w.props,dataStartIndex:_,dataEndIndex:v,updateId:x},w.state))}),w.triggerSyncEvent({dataStartIndex:_,dataEndIndex:v})}}),Oe(w,"handleMouseEnter",function(S){var _=w.getMouseInfo(S);if(_){var v=Y(Y({},_),{},{isTooltipActive:!0});w.setState(v),w.triggerSyncEvent(v);var x=w.props.onMouseEnter;ze(x)&&x(v,S)}}),Oe(w,"triggeredAfterMouseMove",function(S){var _=w.getMouseInfo(S),v=_?Y(Y({},_),{},{isTooltipActive:!0}):{isTooltipActive:!1};w.setState(v),w.triggerSyncEvent(v);var x=w.props.onMouseMove;ze(x)&&x(v,S)}),Oe(w,"handleItemMouseEnter",function(S){w.setState(function(){return{isTooltipActive:!0,activeItem:S,activePayload:S.tooltipPayload,activeCoordinate:S.tooltipPosition||{x:S.cx,y:S.cy}}})}),Oe(w,"handleItemMouseLeave",function(){w.setState(function(){return{isTooltipActive:!1}})}),Oe(w,"handleMouseMove",function(S){S.persist(),w.throttleTriggeredAfterMouseMove(S)}),Oe(w,"handleMouseLeave",function(S){w.throttleTriggeredAfterMouseMove.cancel();var _={isTooltipActive:!1};w.setState(_),w.triggerSyncEvent(_);var v=w.props.onMouseLeave;ze(v)&&v(_,S)}),Oe(w,"handleOuterEvent",function(S){var _=_4(S),v=Ir(w.props,"".concat(_));if(_&&ze(v)){var x,T;/.*touch.*/i.test(_)?T=w.getMouseInfo(S.changedTouches[0]):T=w.getMouseInfo(S),v((x=T)!==null&&x!==void 0?x:{},S)}}),Oe(w,"handleClick",function(S){var _=w.getMouseInfo(S);if(_){var v=Y(Y({},_),{},{isTooltipActive:!0});w.setState(v),w.triggerSyncEvent(v);var x=w.props.onClick;ze(x)&&x(v,S)}}),Oe(w,"handleMouseDown",function(S){var _=w.props.onMouseDown;if(ze(_)){var v=w.getMouseInfo(S);_(v,S)}}),Oe(w,"handleMouseUp",function(S){var _=w.props.onMouseUp;if(ze(_)){var v=w.getMouseInfo(S);_(v,S)}}),Oe(w,"handleTouchMove",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&w.throttleTriggeredAfterMouseMove(S.changedTouches[0])}),Oe(w,"handleTouchStart",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&w.handleMouseDown(S.changedTouches[0])}),Oe(w,"handleTouchEnd",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&w.handleMouseUp(S.changedTouches[0])}),Oe(w,"handleDoubleClick",function(S){var _=w.props.onDoubleClick;if(ze(_)){var v=w.getMouseInfo(S);_(v,S)}}),Oe(w,"handleContextMenu",function(S){var _=w.props.onContextMenu;if(ze(_)){var v=w.getMouseInfo(S);_(v,S)}}),Oe(w,"triggerSyncEvent",function(S){w.props.syncId!==void 0&&Bp.emit(Np,w.props.syncId,S,w.eventEmitterSymbol)}),Oe(w,"applySyncEvent",function(S){var _=w.props,v=_.layout,x=_.syncMethod,T=w.state.updateId,E=S.dataStartIndex,k=S.dataEndIndex;if(S.dataStartIndex!==void 0||S.dataEndIndex!==void 0)w.setState(Y({dataStartIndex:E,dataEndIndex:k},h({props:w.props,dataStartIndex:E,dataEndIndex:k,updateId:T},w.state)));else if(S.activeTooltipIndex!==void 0){var I=S.chartX,B=S.chartY,D=S.activeTooltipIndex,F=w.state,L=F.offset,H=F.tooltipTicks;if(!L)return;if(typeof x=="function")D=x(H,S);else if(x==="value"){D=-1;for(var $=0;$<H.length;$++)if(H[$].value===S.activeLabel){D=$;break}}var ne=Y(Y({},L),{},{x:L.left,y:L.top}),Z=Math.min(I,ne.x+ne.width),G=Math.min(B,ne.y+ne.height),X=H[D]&&H[D].value,ee=iy(w.state,w.props.data,D),ie=H[D]?{x:v==="horizontal"?H[D].coordinate:Z,y:v==="horizontal"?G:H[D].coordinate}:D2;w.setState(Y(Y({},S),{},{activeLabel:X,activeCoordinate:ie,activePayload:ee,activeTooltipIndex:D}))}else w.setState(S)}),Oe(w,"renderCursor",function(S){var _,v=w.state,x=v.isTooltipActive,T=v.activeCoordinate,E=v.activePayload,k=v.offset,I=v.activeTooltipIndex,B=v.tooltipAxisBandSize,D=w.getTooltipEventType(),F=(_=S.props.active)!==null&&_!==void 0?_:x,L=w.props.layout,H=S.key||"_recharts-cursor";return O.createElement(rse,{key:H,activeCoordinate:T,activePayload:E,activeTooltipIndex:I,chartName:t,element:S,isActive:F,layout:L,offset:k,tooltipAxisBandSize:B,tooltipEventType:D})}),Oe(w,"renderPolarAxis",function(S,_,v){var x=Ir(S,"type.axisType"),T=Ir(w.state,"".concat(x,"Map")),E=S.type.defaultProps,k=E!==void 0?Y(Y({},E),S.props):S.props,I=T&&T[k["".concat(x,"Id")]];return R.cloneElement(S,Y(Y({},I),{},{className:rt(x,I.className),key:S.key||"".concat(_,"-").concat(v),ticks:ss(I,!0)}))}),Oe(w,"renderPolarGrid",function(S){var _=S.props,v=_.radialLines,x=_.polarAngles,T=_.polarRadius,E=w.state,k=E.radiusAxisMap,I=E.angleAxisMap,B=sa(k),D=sa(I),F=D.cx,L=D.cy,H=D.innerRadius,$=D.outerRadius;return R.cloneElement(S,{polarAngles:Array.isArray(x)?x:ss(D,!0).map(function(ne){return ne.coordinate}),polarRadius:Array.isArray(T)?T:ss(B,!0).map(function(ne){return ne.coordinate}),cx:F,cy:L,innerRadius:H,outerRadius:$,key:S.key||"polar-grid",radialLines:v})}),Oe(w,"renderLegend",function(){var S=w.state.formattedGraphicalItems,_=w.props,v=_.children,x=_.width,T=_.height,E=w.props.margin||{},k=x-(E.left||0)-(E.right||0),I=TR({children:v,formattedGraphicalItems:S,legendWidth:k,legendContent:c});if(!I)return null;var B=I.item,D=tA(I,ise);return R.cloneElement(B,Y(Y({},D),{},{chartWidth:x,chartHeight:T,margin:E,onBBoxUpdate:w.handleLegendBBoxUpdate}))}),Oe(w,"renderTooltip",function(){var S,_=w.props,v=_.children,x=_.accessibilityLayer,T=sr(v,$i);if(!T)return null;var E=w.state,k=E.isTooltipActive,I=E.activeCoordinate,B=E.activePayload,D=E.activeLabel,F=E.offset,L=(S=T.props.active)!==null&&S!==void 0?S:k;return R.cloneElement(T,{viewBox:Y(Y({},F),{},{x:F.left,y:F.top}),active:L,label:D,payload:L?B:[],coordinate:I,accessibilityLayer:x})}),Oe(w,"renderBrush",function(S){var _=w.props,v=_.margin,x=_.data,T=w.state,E=T.offset,k=T.dataStartIndex,I=T.dataEndIndex,B=T.updateId;return R.cloneElement(S,{key:S.key||"_recharts-brush",onChange:Yd(w.handleBrushChange,S.props.onChange),data:x,x:fe(S.props.x)?S.props.x:E.left,y:fe(S.props.y)?S.props.y:E.top+E.height+E.brushBottom-(v.bottom||0),width:fe(S.props.width)?S.props.width:E.width,startIndex:k,endIndex:I,updateId:"brush-".concat(B)})}),Oe(w,"renderReferenceElement",function(S,_,v){if(!S)return null;var x=w,T=x.clipPathId,E=w.state,k=E.xAxisMap,I=E.yAxisMap,B=E.offset,D=S.type.defaultProps||{},F=S.props,L=F.xAxisId,H=L===void 0?D.xAxisId:L,$=F.yAxisId,ne=$===void 0?D.yAxisId:$;return R.cloneElement(S,{key:S.key||"".concat(_,"-").concat(v),xAxis:k[H],yAxis:I[ne],viewBox:{x:B.left,y:B.top,width:B.width,height:B.height},clipPathId:T})}),Oe(w,"renderActivePoints",function(S){var _=S.item,v=S.activePoint,x=S.basePoint,T=S.childIndex,E=S.isRange,k=[],I=_.props.key,B=_.item.type.defaultProps!==void 0?Y(Y({},_.item.type.defaultProps),_.item.props):_.item.props,D=B.activeDot,F=B.dataKey,L=Y(Y({index:T,dataKey:F,cx:v.x,cy:v.y,r:4,fill:Qw(_.item),strokeWidth:2,stroke:"#fff",payload:v.payload,value:v.value},He(D,!1)),qf(D));return k.push(b.renderActiveDot(D,L,"".concat(I,"-activePoint-").concat(T))),x?k.push(b.renderActiveDot(D,Y(Y({},L),{},{cx:x.x,cy:x.y}),"".concat(I,"-basePoint-").concat(T))):E&&k.push(null),k}),Oe(w,"renderGraphicChild",function(S,_,v){var x=w.filterFormatItem(S,_,v);if(!x)return null;var T=w.getTooltipEventType(),E=w.state,k=E.isTooltipActive,I=E.tooltipAxis,B=E.activeTooltipIndex,D=E.activeLabel,F=w.props.children,L=sr(F,$i),H=x.props,$=H.points,ne=H.isRange,Z=H.baseLine,G=x.item.type.defaultProps!==void 0?Y(Y({},x.item.type.defaultProps),x.item.props):x.item.props,X=G.activeDot,ee=G.hide,ie=G.activeBar,me=G.activeShape,Ie=!!(!ee&&k&&L&&(X||ie||me)),ce={};T!=="axis"&&L&&L.props.trigger==="click"?ce={onClick:Yd(w.handleItemMouseEnter,S.props.onClick)}:T!=="axis"&&(ce={onMouseLeave:Yd(w.handleItemMouseLeave,S.props.onMouseLeave),onMouseEnter:Yd(w.handleItemMouseEnter,S.props.onMouseEnter)});var q=R.cloneElement(S,Y(Y({},x.props),ce));function oe(te){return typeof I.dataKey=="function"?I.dataKey(te.payload):null}if(Ie)if(B>=0){var Q,K;if(I.dataKey&&!I.allowDuplicatedCategory){var Se=typeof I.dataKey=="function"?oe:"payload.".concat(I.dataKey.toString());Q=Gf($,Se,D),K=ne&&Z&&Gf(Z,Se,D)}else Q=$==null?void 0:$[B],K=ne&&Z&&Z[B];if(me||ie){var le=S.props.activeIndex!==void 0?S.props.activeIndex:B;return[R.cloneElement(S,Y(Y(Y({},x.props),ce),{},{activeIndex:le})),null,null]}if(!Ke(Q))return[q].concat(Ya(w.renderActivePoints({item:x,activePoint:Q,basePoint:K,childIndex:B,isRange:ne})))}else{var Ce,ye=(Ce=w.getItemByXY(w.state.activeCoordinate))!==null&&Ce!==void 0?Ce:{graphicalItem:q},je=ye.graphicalItem,P=je.item,N=P===void 0?S:P,z=je.childIndex,se=Y(Y(Y({},x.props),ce),{},{activeIndex:z});return[R.cloneElement(N,se),null,null]}return ne?[q,null,null]:[q,null]}),Oe(w,"renderCustomized",function(S,_,v){return R.cloneElement(S,Y(Y({key:"recharts-customized-".concat(v)},w.props),w.state))}),Oe(w,"renderMap",{CartesianGrid:{handler:ef,once:!0},ReferenceArea:{handler:w.renderReferenceElement},ReferenceLine:{handler:ef},ReferenceDot:{handler:w.renderReferenceElement},XAxis:{handler:ef},YAxis:{handler:ef},Brush:{handler:w.renderBrush,once:!0},Bar:{handler:w.renderGraphicChild},Line:{handler:w.renderGraphicChild},Area:{handler:w.renderGraphicChild},Radar:{handler:w.renderGraphicChild},RadialBar:{handler:w.renderGraphicChild},Scatter:{handler:w.renderGraphicChild},Pie:{handler:w.renderGraphicChild},Funnel:{handler:w.renderGraphicChild},Tooltip:{handler:w.renderCursor,once:!0},PolarGrid:{handler:w.renderPolarGrid,once:!0},PolarAngleAxis:{handler:w.renderPolarAxis},PolarRadiusAxis:{handler:w.renderPolarAxis},Customized:{handler:w.renderCustomized}}),w.clipPathId="".concat((C=y.id)!==null&&C!==void 0?C:Xu("recharts"),"-clip"),w.throttleTriggeredAfterMouseMove=AO(w.triggeredAfterMouseMove,(A=y.throttleDelay)!==null&&A!==void 0?A:1e3/60),w.state={},w}return pse(b,p),fse(b,[{key:"componentDidMount",value:function(){var C,A;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(C=this.props.margin.left)!==null&&C!==void 0?C:0,top:(A=this.props.margin.top)!==null&&A!==void 0?A:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var C=this.props,A=C.children,w=C.data,S=C.height,_=C.layout,v=sr(A,$i);if(v){var x=v.props.defaultIndex;if(!(typeof x!="number"||x<0||x>this.state.tooltipTicks.length-1)){var T=this.state.tooltipTicks[x]&&this.state.tooltipTicks[x].value,E=iy(this.state,w,x,T),k=this.state.tooltipTicks[x].coordinate,I=(this.state.offset.top+S)/2,B=_==="horizontal",D=B?{x:k,y:I}:{y:k,x:I},F=this.state.formattedGraphicalItems.find(function(H){var $=H.item;return $.type.name==="Scatter"});F&&(D=Y(Y({},D),F.props.points[x].tooltipPosition),E=F.props.points[x].tooltipPayload);var L={activeTooltipIndex:x,isTooltipActive:!0,activeLabel:T,activePayload:E,activeCoordinate:D};this.setState(L),this.renderCursor(v),this.accessibilityManager.setIndex(x)}}}},{key:"getSnapshotBeforeUpdate",value:function(C,A){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==A.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==C.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==C.margin){var w,S;this.accessibilityManager.setDetails({offset:{left:(w=this.props.margin.left)!==null&&w!==void 0?w:0,top:(S=this.props.margin.top)!==null&&S!==void 0?S:0}})}return null}},{key:"componentDidUpdate",value:function(C){Fv([sr(C.children,$i)],[sr(this.props.children,$i)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var C=sr(this.props.children,$i);if(C&&typeof C.props.shared=="boolean"){var A=C.props.shared?"axis":"item";return a.indexOf(A)>=0?A:o}return o}},{key:"getMouseInfo",value:function(C){if(!this.container)return null;var A=this.container,w=A.getBoundingClientRect(),S=Yq(w),_={chartX:Math.round(C.pageX-S.left),chartY:Math.round(C.pageY-S.top)},v=w.width/A.offsetWidth||1,x=this.inRange(_.chartX,_.chartY,v);if(!x)return null;var T=this.state,E=T.xAxisMap,k=T.yAxisMap,I=this.getTooltipEventType();if(I!=="axis"&&E&&k){var B=sa(E).scale,D=sa(k).scale,F=B&&B.invert?B.invert(_.chartX):null,L=D&&D.invert?D.invert(_.chartY):null;return Y(Y({},_),{},{xValue:F,yValue:L})}var H=rA(this.state,this.props.data,this.props.layout,x);return H?Y(Y({},_),H):null}},{key:"inRange",value:function(C,A){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,S=this.props.layout,_=C/w,v=A/w;if(S==="horizontal"||S==="vertical"){var x=this.state.offset,T=_>=x.left&&_<=x.left+x.width&&v>=x.top&&v<=x.top+x.height;return T?{x:_,y:v}:null}var E=this.state,k=E.angleAxisMap,I=E.radiusAxisMap;if(k&&I){var B=sa(k);return jS({x:_,y:v},B)}return null}},{key:"parseEventsOfWrapper",value:function(){var C=this.props.children,A=this.getTooltipEventType(),w=sr(C,$i),S={};w&&A==="axis"&&(w.props.trigger==="click"?S={onClick:this.handleClick}:S={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var _=qf(this.props,this.handleOuterEvent);return Y(Y({},_),S)}},{key:"addListener",value:function(){Bp.on(Np,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){Bp.removeListener(Np,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(C,A,w){for(var S=this.state.formattedGraphicalItems,_=0,v=S.length;_<v;_++){var x=S[_];if(x.item===C||x.props.key===C.key||A===Ui(x.item.type)&&w===x.childIndex)return x}return null}},{key:"renderClipPath",value:function(){var C=this.clipPathId,A=this.state.offset,w=A.left,S=A.top,_=A.height,v=A.width;return O.createElement("defs",null,O.createElement("clipPath",{id:C},O.createElement("rect",{x:w,y:S,height:_,width:v})))}},{key:"getXScales",value:function(){var C=this.state.xAxisMap;return C?Object.entries(C).reduce(function(A,w){var S=eA(w,2),_=S[0],v=S[1];return Y(Y({},A),{},Oe({},_,v.scale))},{}):null}},{key:"getYScales",value:function(){var C=this.state.yAxisMap;return C?Object.entries(C).reduce(function(A,w){var S=eA(w,2),_=S[0],v=S[1];return Y(Y({},A),{},Oe({},_,v.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(C){var A;return(A=this.state.xAxisMap)===null||A===void 0||(A=A[C])===null||A===void 0?void 0:A.scale}},{key:"getYScaleByAxisId",value:function(C){var A;return(A=this.state.yAxisMap)===null||A===void 0||(A=A[C])===null||A===void 0?void 0:A.scale}},{key:"getItemByXY",value:function(C){var A=this.state,w=A.formattedGraphicalItems,S=A.activeItem;if(w&&w.length)for(var _=0,v=w.length;_<v;_++){var x=w[_],T=x.props,E=x.item,k=E.type.defaultProps!==void 0?Y(Y({},E.type.defaultProps),E.props):E.props,I=Ui(E.type);if(I==="Bar"){var B=(T.data||[]).find(function(H){return Tte(C,H)});if(B)return{graphicalItem:x,payload:B}}else if(I==="RadialBar"){var D=(T.data||[]).find(function(H){return jS(C,H)});if(D)return{graphicalItem:x,payload:D}}else if(Ym(x,S)||Xm(x,S)||gu(x,S)){var F=Pne({graphicalItem:x,activeTooltipItem:S,itemData:k.data}),L=k.activeIndex===void 0?F:k.activeIndex;return{graphicalItem:Y(Y({},x),{},{childIndex:L}),payload:gu(x,S)?k.data[F]:x.props.data[F]}}}return null}},{key:"render",value:function(){var C=this;if(!R1(this))return null;var A=this.props,w=A.children,S=A.className,_=A.width,v=A.height,x=A.style,T=A.compact,E=A.title,k=A.desc,I=tA(A,ose),B=He(I,!1);if(T)return O.createElement($x,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},O.createElement(Vv,ga({},B,{width:_,height:v,title:E,desc:k}),this.renderClipPath(),D1(w,this.renderMap)));if(this.props.accessibilityLayer){var D,F;B.tabIndex=(D=this.props.tabIndex)!==null&&D!==void 0?D:0,B.role=(F=this.props.role)!==null&&F!==void 0?F:"application",B.onKeyDown=function(H){C.accessibilityManager.keyboardEvent(H)},B.onFocus=function(){C.accessibilityManager.focus()}}var L=this.parseEventsOfWrapper();return O.createElement($x,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},O.createElement("div",ga({className:rt("recharts-wrapper",S),style:Y({position:"relative",cursor:"default",width:_,height:v},x)},L,{ref:function($){C.container=$}}),O.createElement(Vv,ga({},B,{width:_,height:v,title:E,desc:k,style:Cse}),this.renderClipPath(),D1(w,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(R.Component);Oe(m,"displayName",t),Oe(m,"defaultProps",Y({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},d)),Oe(m,"getDerivedStateFromProps",function(p,b){var y=p.dataKey,C=p.data,A=p.children,w=p.width,S=p.height,_=p.layout,v=p.stackOffset,x=p.margin,T=b.dataStartIndex,E=b.dataEndIndex;if(b.updateId===void 0){var k=iA(p);return Y(Y(Y({},k),{},{updateId:0},h(Y(Y({props:p},k),{},{updateId:0}),b)),{},{prevDataKey:y,prevData:C,prevWidth:w,prevHeight:S,prevLayout:_,prevStackOffset:v,prevMargin:x,prevChildren:A})}if(y!==b.prevDataKey||C!==b.prevData||w!==b.prevWidth||S!==b.prevHeight||_!==b.prevLayout||v!==b.prevStackOffset||!ya(x,b.prevMargin)){var I=iA(p),B={chartX:b.chartX,chartY:b.chartY,isTooltipActive:b.isTooltipActive},D=Y(Y({},rA(b,C,_)),{},{updateId:b.updateId+1}),F=Y(Y(Y({},I),B),D);return Y(Y(Y({},F),h(Y({props:p},F),b)),{},{prevDataKey:y,prevData:C,prevWidth:w,prevHeight:S,prevLayout:_,prevStackOffset:v,prevMargin:x,prevChildren:A})}if(!Fv(A,b.prevChildren)){var L,H,$,ne,Z=sr(A,$a),G=Z&&(L=(H=Z.props)===null||H===void 0?void 0:H.startIndex)!==null&&L!==void 0?L:T,X=Z&&($=(ne=Z.props)===null||ne===void 0?void 0:ne.endIndex)!==null&&$!==void 0?$:E,ee=G!==T||X!==E,ie=!Ke(C),me=ie&&!ee?b.updateId:b.updateId+1;return Y(Y({updateId:me},h(Y(Y({props:p},b),{},{updateId:me,dataStartIndex:G,dataEndIndex:X}),b)),{},{prevChildren:A,dataStartIndex:G,dataEndIndex:X})}return null}),Oe(m,"renderActiveDot",function(p,b,y){var C;return R.isValidElement(p)?C=R.cloneElement(p,b):ze(p)?C=p(b):C=O.createElement(t0,b),O.createElement(It,{className:"recharts-active-dot",key:y},C)});var g=R.forwardRef(function(b,y){return O.createElement(m,ga({},b,{ref:y}))});return g.displayName=m.displayName,g},aIe=Rse({chartName:"AreaChart",GraphicalChild:Rs,axisComponents:[{axisType:"xAxis",AxisComp:s0},{axisType:"yAxis",AxisComp:a0}],formatAxisMap:rie});const Mse=/[\p{Lu}]/u,Dse=/[\p{Ll}]/u,sA=/^[\p{Lu}](?![\p{Lu}])/gu,N2=/([\p{Alpha}\p{N}_]|$)/u,l0=/[_.\- ]+/,Bse=new RegExp("^"+l0.source),aA=new RegExp(l0.source+N2.source,"gu"),lA=new RegExp("\\d+"+N2.source,"gu"),Nse=(n,e,t,r)=>{let i=!1,o=!1,s=!1,a=!1;for(let l=0;l<n.length;l++){const c=n[l];a=l>2?n[l-3]==="-":!0,i&&Mse.test(c)?(n=n.slice(0,l)+"-"+n.slice(l),i=!1,s=o,o=!0,l++):o&&s&&Dse.test(c)&&(!a||r)?(n=n.slice(0,l-1)+"-"+n.slice(l-1),s=o,o=!1,i=!0):(i=e(c)===c&&t(c)!==c,s=o,o=t(c)===c&&e(c)!==c)}return n},Lse=(n,e)=>(sA.lastIndex=0,n.replaceAll(sA,t=>e(t))),Fse=(n,e)=>(aA.lastIndex=0,lA.lastIndex=0,n.replaceAll(lA,(t,r,i)=>["_","-"].includes(n.charAt(i+t.length))?t:e(t)).replaceAll(aA,(t,r)=>e(r)));function lIe(n,e){if(!(typeof n=="string"||Array.isArray(n)))throw new TypeError("Expected the input to be `string | string[]`");if(e={pascalCase:!1,preserveConsecutiveUppercase:!1,...e},Array.isArray(n)?n=n.map(o=>o.trim()).filter(o=>o.length).join("-"):n=n.trim(),n.length===0)return"";const t=e.locale===!1?o=>o.toLowerCase():o=>o.toLocaleLowerCase(e.locale),r=e.locale===!1?o=>o.toUpperCase():o=>o.toLocaleUpperCase(e.locale);return n.length===1?l0.test(n)?"":e.pascalCase?r(n):t(n):(n!==t(n)&&(n=Nse(n,t,r,e.preserveConsecutiveUppercase)),n=n.replace(Bse,""),n=e.preserveConsecutiveUppercase?Lse(n,t):t(n),e.pascalCase&&(n=r(n.charAt(0))+n.slice(1)),Fse(n,r))}var L2={exports:{}};(function(n,e){(function(t){n.exports=t(null)})(function t(r){var i=/^\0+/g,o=/[\0\r\f]/g,s=/: */g,a=/zoo|gra/,l=/([,: ])(transform)/g,c=/,+\s*(?![^(]*[)])/g,u=/ +\s*(?![^(]*[)])/g,d=/ *[\0] */g,f=/,\r+?/g,h=/([\t\r\n ])*\f?&/g,m=/:global\(((?:[^\(\)\[\]]*|\[.*\]|\([^\(\)]*\))*)\)/g,g=/\W+/g,p=/@(k\w+)\s*(\S*)\s*/,b=/::(place)/g,y=/:(read-only)/g,C=/\s+(?=[{\];=:>])/g,A=/([[}=:>])\s+/g,w=/(\{[^{]+?);(?=\})/g,S=/\s{2,}/g,_=/([^\(])(:+) */g,v=/[svh]\w+-[tblr]{2}/,x=/\(\s*(.*)\s*\)/g,T=/([\s\S]*?);/g,E=/-self|flex-/g,k=/[^]*?(:[rp][el]a[\w-]+)[^]*/,I=/stretch|:\s*\w+\-(?:conte|avail)/,B=/([^-])(image-set\()/,D="-webkit-",F="-moz-",L="-ms-",H=59,$=125,ne=123,Z=40,G=41,X=91,ee=93,ie=10,me=13,Ie=9,ce=64,q=32,oe=38,Q=45,K=95,Se=42,le=44,Ce=58,ye=39,je=34,P=47,N=62,z=43,se=126,te=0,re=12,ge=11,Ae=107,Fe=109,We=115,Dt=112,oo=111,so=105,yr=99,Pn=100,ui=112,In=1,zr=1,ao=0,di=1,jr=1,Hg=1,Y_=0,X_=0,Ug=0,Gg=[],qg=[],Pi=0,Kg=null,ML=-2,DL=-1,BL=0,NL=1,LL=2,FL=3,Z_=0,Dl=1,Dd="",lo="",Bl="";function Yg(Be,Pe,Te,Ve,pe){for(var st,U,Je=0,Ue=0,Gt=0,Ge=0,Zt=0,_t=0,Xe=0,On=0,zn=0,zs=0,jn=0,Ii=0,Nd=0,fi=0,tt=0,wr=0,js=0,Ll=0,Ct=0,jo=Te.length,Fl=jo-1,Sn="",Le="",xt="",Bt="",Ld="",Jg="";tt<jo;){if(Xe=Te.charCodeAt(tt),tt===Fl&&Ue+Ge+Gt+Je!==0&&(Ue!==0&&(Xe=Ue===P?ie:P),Ge=Gt=Je=0,jo++,Fl++),Ue+Ge+Gt+Je===0){if(tt===Fl&&(wr>0&&(Le=Le.replace(o,"")),Le.trim().length>0)){switch(Xe){case q:case Ie:case H:case me:case ie:break;default:Le+=Te.charAt(tt)}Xe=H}if(js===1)switch(Xe){case ne:case $:case H:case je:case ye:case Z:case G:case le:js=0;case Ie:case me:case ie:case q:break;default:for(js=0,Ct=tt,Zt=Xe,tt--,Xe=H;Ct<jo;)switch(Te.charCodeAt(Ct++)){case ie:case me:case H:++tt,Xe=Zt,Ct=jo;break;case Ce:wr>0&&(++tt,Xe=Zt);case ne:Ct=jo}}switch(Xe){case ne:for(Zt=(Le=Le.trim()).charCodeAt(0),jn=1,Ct=++tt;tt<jo;){switch(Xe=Te.charCodeAt(tt)){case ne:jn++;break;case $:jn--;break;case P:switch(_t=Te.charCodeAt(tt+1)){case Se:case P:tt=VL(_t,tt,Fl,Te)}break;case X:Xe++;case Z:Xe++;case je:case ye:for(;tt++<Fl&&Te.charCodeAt(tt)!==Xe;);}if(jn===0)break;tt++}switch(xt=Te.substring(Ct,tt),Zt===te&&(Zt=(Le=Le.replace(i,"").trim()).charCodeAt(0)),Zt){case ce:switch(wr>0&&(Le=Le.replace(o,"")),_t=Le.charCodeAt(1)){case Pn:case Fe:case We:case Q:st=Pe;break;default:st=Gg}if(Ct=(xt=Yg(Pe,st,xt,_t,pe+1)).length,Ug>0&&Ct===0&&(Ct=Le.length),Pi>0&&(st=J_(Gg,Le,Ll),U=Vs(FL,xt,st,Pe,zr,In,Ct,_t,pe,Ve),Le=st.join(""),U!==void 0&&(Ct=(xt=U.trim()).length)===0&&(_t=0,xt="")),Ct>0)switch(_t){case We:Le=Le.replace(x,$L);case Pn:case Fe:case Q:xt=Le+"{"+xt+"}";break;case Ae:xt=(Le=Le.replace(p,"$1 $2"+(Dl>0?Dd:"")))+"{"+xt+"}",jr===1||jr===2&&Bd("@"+xt,3)?xt="@"+D+xt+"@"+xt:xt="@"+xt;break;default:xt=Le+xt,Ve===ui&&(Bt+=xt,xt="")}else xt="";break;default:xt=Yg(Pe,J_(Pe,Le,Ll),xt,Ve,pe+1)}Ld+=xt,Ii=0,js=0,fi=0,wr=0,Ll=0,Nd=0,Le="",xt="",Xe=Te.charCodeAt(++tt);break;case $:case H:if((Ct=(Le=(wr>0?Le.replace(o,""):Le).trim()).length)>1)switch(fi===0&&((Zt=Le.charCodeAt(0))===Q||Zt>96&&Zt<123)&&(Ct=(Le=Le.replace(" ",":")).length),Pi>0&&(U=Vs(NL,Le,Pe,Be,zr,In,Bt.length,Ve,pe,Ve))!==void 0&&(Ct=(Le=U.trim()).length)===0&&(Le="\0\0"),Zt=Le.charCodeAt(0),_t=Le.charCodeAt(1),Zt){case te:break;case ce:if(_t===so||_t===yr){Jg+=Le+Te.charAt(tt);break}default:if(Le.charCodeAt(Ct-1)===Ce)break;Bt+=Xg(Le,Zt,_t,Le.charCodeAt(2))}Ii=0,js=0,fi=0,wr=0,Ll=0,Le="",Xe=Te.charCodeAt(++tt)}}switch(Xe){case me:case ie:if(Ue+Ge+Gt+Je+X_===0)switch(zs){case G:case ye:case je:case ce:case se:case N:case Se:case z:case P:case Q:case Ce:case le:case H:case ne:case $:break;default:fi>0&&(js=1)}Ue===P?Ue=0:di+Ii===0&&Ve!==Ae&&Le.length>0&&(wr=1,Le+="\0"),Pi*Z_>0&&Vs(BL,Le,Pe,Be,zr,In,Bt.length,Ve,pe,Ve),In=1,zr++;break;case H:case $:if(Ue+Ge+Gt+Je===0){In++;break}default:switch(In++,Sn=Te.charAt(tt),Xe){case Ie:case q:if(Ge+Je+Ue===0)switch(On){case le:case Ce:case Ie:case q:Sn="";break;default:Xe!==q&&(Sn=" ")}break;case te:Sn="\\0";break;case re:Sn="\\f";break;case ge:Sn="\\v";break;case oe:Ge+Ue+Je===0&&di>0&&(Ll=1,wr=1,Sn="\f"+Sn);break;case 108:if(Ge+Ue+Je+ao===0&&fi>0)switch(tt-fi){case 2:On===Dt&&Te.charCodeAt(tt-3)===Ce&&(ao=On);case 8:zn===oo&&(ao=zn)}break;case Ce:Ge+Ue+Je===0&&(fi=tt);break;case le:Ue+Gt+Ge+Je===0&&(wr=1,Sn+="\r");break;case je:case ye:Ue===0&&(Ge=Ge===Xe?0:Ge===0?Xe:Ge);break;case X:Ge+Ue+Gt===0&&Je++;break;case ee:Ge+Ue+Gt===0&&Je--;break;case G:Ge+Ue+Je===0&&Gt--;break;case Z:if(Ge+Ue+Je===0){if(Ii===0)switch(2*On+3*zn){case 533:break;default:jn=0,Ii=1}Gt++}break;case ce:Ue+Gt+Ge+Je+fi+Nd===0&&(Nd=1);break;case Se:case P:if(Ge+Je+Gt>0)break;switch(Ue){case 0:switch(2*Xe+3*Te.charCodeAt(tt+1)){case 235:Ue=P;break;case 220:Ct=tt,Ue=Se}break;case Se:Xe===P&&On===Se&&Ct+2!==tt&&(Te.charCodeAt(Ct+2)===33&&(Bt+=Te.substring(Ct,tt+1)),Sn="",Ue=0)}}if(Ue===0){if(di+Ge+Je+Nd===0&&Ve!==Ae&&Xe!==H)switch(Xe){case le:case se:case N:case z:case G:case Z:if(Ii===0){switch(On){case Ie:case q:case ie:case me:Sn+="\0";break;default:Sn="\0"+Sn+(Xe===le?"":"\0")}wr=1}else switch(Xe){case Z:fi+7===tt&&On===108&&(fi=0),Ii=++jn;break;case G:(Ii=--jn)==0&&(wr=1,Sn+="\0")}break;case Ie:case q:switch(On){case te:case ne:case $:case H:case le:case re:case Ie:case q:case ie:case me:break;default:Ii===0&&(wr=1,Sn+="\0")}}Le+=Sn,Xe!==q&&Xe!==Ie&&(zs=Xe)}}zn=On,On=Xe,tt++}if(Ct=Bt.length,Ug>0&&Ct===0&&Ld.length===0&&Pe[0].length!==0&&(Ve!==Fe||Pe.length===1&&(di>0?lo:Bl)===Pe[0])&&(Ct=Pe.join(",").length+2),Ct>0){if(st=di===0&&Ve!==Ae?function(e1){for(var Oi,gn,Fd=0,t1=e1.length,n1=Array(t1);Fd<t1;++Fd){for(var Qg=e1[Fd].split(d),$d="",Ws=0,ep=0,r1=0,i1=0,o1=Qg.length;Ws<o1;++Ws)if(!((ep=(gn=Qg[Ws]).length)===0&&o1>1)){if(r1=$d.charCodeAt($d.length-1),i1=gn.charCodeAt(0),Oi="",Ws!==0)switch(r1){case Se:case se:case N:case z:case q:case Z:break;default:Oi=" "}switch(i1){case oe:gn=Oi+lo;case se:case N:case z:case q:case G:case Z:break;case X:gn=Oi+gn+lo;break;case Ce:switch(2*gn.charCodeAt(1)+3*gn.charCodeAt(2)){case 530:if(Hg>0){gn=Oi+gn.substring(8,ep-1);break}default:(Ws<1||Qg[Ws-1].length<1)&&(gn=Oi+lo+gn)}break;case le:Oi="";default:ep>1&&gn.indexOf(":")>0?gn=Oi+gn.replace(_,"$1"+lo+"$2"):gn=Oi+gn+lo}$d+=gn}n1[Fd]=$d.replace(o,"").trim()}return n1}(Pe):Pe,Pi>0&&(U=Vs(LL,Bt,st,Be,zr,In,Ct,Ve,pe,Ve))!==void 0&&(Bt=U).length===0)return Jg+Bt+Ld;if(Bt=st.join(",")+"{"+Bt+"}",jr*ao!=0){switch(jr===2&&!Bd(Bt,2)&&(ao=0),ao){case oo:Bt=Bt.replace(y,":"+F+"$1")+Bt;break;case Dt:Bt=Bt.replace(b,"::"+D+"input-$1")+Bt.replace(b,"::"+F+"$1")+Bt.replace(b,":"+L+"input-$1")+Bt}ao=0}}return Jg+Bt+Ld}function J_(Be,Pe,Te){var Ve=Pe.trim().split(f),pe=Ve,st=Ve.length,U=Be.length;switch(U){case 0:case 1:for(var Je=0,Ue=U===0?"":Be[0]+" ";Je<st;++Je)pe[Je]=Q_(Ue,pe[Je],Te,U).trim();break;default:Je=0;var Gt=0;for(pe=[];Je<st;++Je)for(var Ge=0;Ge<U;++Ge)pe[Gt++]=Q_(Be[Ge]+" ",Ve[Je],Te,U).trim()}return pe}function Q_(Be,Pe,Te,Ve){var pe=Pe,st=pe.charCodeAt(0);switch(st<33&&(st=(pe=pe.trim()).charCodeAt(0)),st){case oe:switch(di+Ve){case 0:case 1:if(Be.trim().length===0)break;default:return pe.replace(h,"$1"+Be.trim())}break;case Ce:switch(pe.charCodeAt(1)){case 103:if(Hg>0&&di>0)return pe.replace(m,"$1").replace(h,"$1"+Bl);break;default:return Be.trim()+pe.replace(h,"$1"+Be.trim())}default:if(Te*di>0&&pe.indexOf("\f")>0)return pe.replace(h,(Be.charCodeAt(0)===Ce?"":"$1")+Be.trim())}return Be+pe}function Xg(Be,Pe,Te,Ve){var pe,st=0,U=Be+";",Je=2*Pe+3*Te+4*Ve;if(Je===944)return function(Ue){var Gt=Ue.length,Ge=Ue.indexOf(":",9)+1,Zt=Ue.substring(0,Ge).trim(),_t=Ue.substring(Ge,Gt-1).trim();switch(Ue.charCodeAt(9)*Dl){case 0:break;case Q:if(Ue.charCodeAt(10)!==110)break;default:for(var Xe=_t.split((_t="",c)),On=0,Ge=0,Gt=Xe.length;On<Gt;Ge=0,++On){for(var zn=Xe[On],zs=zn.split(u);zn=zs[Ge];){var jn=zn.charCodeAt(0);if(Dl===1&&(jn>ce&&jn<90||jn>96&&jn<123||jn===K||jn===Q&&zn.charCodeAt(1)!==Q))switch(isNaN(parseFloat(zn))+(zn.indexOf("(")!==-1)){case 1:switch(zn){case"infinite":case"alternate":case"backwards":case"running":case"normal":case"forwards":case"both":case"none":case"linear":case"ease":case"ease-in":case"ease-out":case"ease-in-out":case"paused":case"reverse":case"alternate-reverse":case"inherit":case"initial":case"unset":case"step-start":case"step-end":break;default:zn+=Dd}}zs[Ge++]=zn}_t+=(On===0?"":",")+zs.join(" ")}}return _t=Zt+_t+";",jr===1||jr===2&&Bd(_t,1)?D+_t+_t:_t}(U);if(jr===0||jr===2&&!Bd(U,1))return U;switch(Je){case 1015:return U.charCodeAt(10)===97?D+U+U:U;case 951:return U.charCodeAt(3)===116?D+U+U:U;case 963:return U.charCodeAt(5)===110?D+U+U:U;case 1009:if(U.charCodeAt(4)!==100)break;case 969:case 942:return D+U+U;case 978:return D+U+F+U+U;case 1019:case 983:return D+U+F+U+L+U+U;case 883:return U.charCodeAt(8)===Q?D+U+U:U.indexOf("image-set(",11)>0?U.replace(B,"$1"+D+"$2")+U:U;case 932:if(U.charCodeAt(4)===Q)switch(U.charCodeAt(5)){case 103:return D+"box-"+U.replace("-grow","")+D+U+L+U.replace("grow","positive")+U;case 115:return D+U+L+U.replace("shrink","negative")+U;case 98:return D+U+L+U.replace("basis","preferred-size")+U}return D+U+L+U+U;case 964:return D+U+L+"flex-"+U+U;case 1023:if(U.charCodeAt(8)!==99)break;return pe=U.substring(U.indexOf(":",15)).replace("flex-","").replace("space-between","justify"),D+"box-pack"+pe+D+U+L+"flex-pack"+pe+U;case 1005:return a.test(U)?U.replace(s,":"+D)+U.replace(s,":"+F)+U:U;case 1e3:switch(st=(pe=U.substring(13).trim()).indexOf("-")+1,pe.charCodeAt(0)+pe.charCodeAt(st)){case 226:pe=U.replace(v,"tb");break;case 232:pe=U.replace(v,"tb-rl");break;case 220:pe=U.replace(v,"lr");break;default:return U}return D+U+L+pe+U;case 1017:if(U.indexOf("sticky",9)===-1)return U;case 975:switch(st=(U=Be).length-10,Je=(pe=(U.charCodeAt(st)===33?U.substring(0,st):U).substring(Be.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|pe.charCodeAt(7))){case 203:if(pe.charCodeAt(8)<111)break;case 115:U=U.replace(pe,D+pe)+";"+U;break;case 207:case 102:U=U.replace(pe,D+(Je>102?"inline-":"")+"box")+";"+U.replace(pe,D+pe)+";"+U.replace(pe,L+pe+"box")+";"+U}return U+";";case 938:if(U.charCodeAt(5)===Q)switch(U.charCodeAt(6)){case 105:return pe=U.replace("-items",""),D+U+D+"box-"+pe+L+"flex-"+pe+U;case 115:return D+U+L+"flex-item-"+U.replace(E,"")+U;default:return D+U+L+"flex-line-pack"+U.replace("align-content","").replace(E,"")+U}break;case 973:case 989:if(U.charCodeAt(3)!==Q||U.charCodeAt(4)===122)break;case 931:case 953:if(I.test(Be)===!0)return(pe=Be.substring(Be.indexOf(":")+1)).charCodeAt(0)===115?Xg(Be.replace("stretch","fill-available"),Pe,Te,Ve).replace(":fill-available",":stretch"):U.replace(pe,D+pe)+U.replace(pe,F+pe.replace("fill-",""))+U;break;case 962:if(U=D+U+(U.charCodeAt(5)===102?L+U:"")+U,Te+Ve===211&&U.charCodeAt(13)===105&&U.indexOf("transform",10)>0)return U.substring(0,U.indexOf(";",27)+1).replace(l,"$1"+D+"$2")+U}return U}function Bd(Be,Pe){var Te=Be.indexOf(Pe===1?":":"{"),Ve=Be.substring(0,Pe!==3?Te:10),pe=Be.substring(Te+1,Be.length-1);return Kg(Pe!==2?Ve:Ve.replace(k,"$1"),pe,Pe)}function $L(Be,Pe){var Te=Xg(Pe,Pe.charCodeAt(0),Pe.charCodeAt(1),Pe.charCodeAt(2));return Te!==Pe+";"?Te.replace(T," or ($1)").substring(4):"("+Pe+")"}function Vs(Be,Pe,Te,Ve,pe,st,U,Je,Ue,Gt){for(var Ge,Zt=0,_t=Pe;Zt<Pi;++Zt)switch(Ge=qg[Zt].call(Nl,Be,_t,Te,Ve,pe,st,U,Je,Ue,Gt)){case void 0:case!1:case!0:case null:break;default:_t=Ge}if(_t!==Pe)return _t}function VL(Be,Pe,Te,Ve){for(var pe=Pe+1;pe<Te;++pe)switch(Ve.charCodeAt(pe)){case P:if(Be===Se&&Ve.charCodeAt(pe-1)===Se&&Pe+2!==pe)return pe+1;break;case ie:if(Be===P)return pe+1}return pe}function Zg(Be){for(var Pe in Be){var Te=Be[Pe];switch(Pe){case"keyframe":Dl=0|Te;break;case"global":Hg=0|Te;break;case"cascade":di=0|Te;break;case"compress":Y_=0|Te;break;case"semicolon":X_=0|Te;break;case"preserve":Ug=0|Te;break;case"prefix":Kg=null,Te?typeof Te!="function"?jr=1:(jr=2,Kg=Te):jr=0}}return Zg}function Nl(Be,Pe){if(this!==void 0&&this.constructor===Nl)return t(Be);var Te=Be,Ve=Te.charCodeAt(0);Ve<33&&(Ve=(Te=Te.trim()).charCodeAt(0)),Dl>0&&(Dd=Te.replace(g,Ve===X?"":"-")),Ve=1,di===1?Bl=Te:lo=Te;var pe,st=[Bl];Pi>0&&(pe=Vs(DL,Pe,st,st,zr,In,0,0,0,0))!==void 0&&typeof pe=="string"&&(Pe=pe);var U=Yg(Gg,st,Pe,0,0);return Pi>0&&(pe=Vs(ML,U,st,st,zr,In,U.length,0,0,0))!==void 0&&typeof(U=pe)!="string"&&(Ve=0),Dd="",Bl="",lo="",ao=0,zr=1,In=1,Y_*Ve==0?U:U.replace(o,"").replace(C,"").replace(A,"$1").replace(w,"$1").replace(S," ")}return Nl.use=function Be(Pe){switch(Pe){case void 0:case null:Pi=qg.length=0;break;default:if(typeof Pe=="function")qg[Pi++]=Pe;else if(typeof Pe=="object")for(var Te=0,Ve=Pe.length;Te<Ve;++Te)Be(Pe[Te]);else Z_=0|!!Pe}return Be},Nl.set=Zg,r!==void 0&&Zg(r),Nl})})(L2);var $se=L2.exports;const F2=ot($se);var $2={exports:{}};(function(n,e){(function(t){n.exports=t()})(function(){return function(t){var r="/*|*/",i=r+"}";function o(s){if(s)try{t(s+"}")}catch{}}return function(a,l,c,u,d,f,h,m,g,p){switch(a){case 1:if(g===0&&l.charCodeAt(0)===64)return t(l+";"),"";break;case 2:if(m===0)return l+r;break;case 3:switch(m){case 102:case 112:return t(c[0]+l),"";default:return l+(p===0?r:"")}case-2:l.split(i).forEach(o)}}}})})($2);var Vse=$2.exports;const zse=ot(Vse);var V2={exports:{}},ft={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hn=typeof Symbol=="function"&&Symbol.for,c0=hn?Symbol.for("react.element"):60103,u0=hn?Symbol.for("react.portal"):60106,ig=hn?Symbol.for("react.fragment"):60107,og=hn?Symbol.for("react.strict_mode"):60108,sg=hn?Symbol.for("react.profiler"):60114,ag=hn?Symbol.for("react.provider"):60109,lg=hn?Symbol.for("react.context"):60110,d0=hn?Symbol.for("react.async_mode"):60111,cg=hn?Symbol.for("react.concurrent_mode"):60111,ug=hn?Symbol.for("react.forward_ref"):60112,dg=hn?Symbol.for("react.suspense"):60113,jse=hn?Symbol.for("react.suspense_list"):60120,fg=hn?Symbol.for("react.memo"):60115,hg=hn?Symbol.for("react.lazy"):60116,Wse=hn?Symbol.for("react.block"):60121,Hse=hn?Symbol.for("react.fundamental"):60117,Use=hn?Symbol.for("react.responder"):60118,Gse=hn?Symbol.for("react.scope"):60119;function br(n){if(typeof n=="object"&&n!==null){var e=n.$$typeof;switch(e){case c0:switch(n=n.type,n){case d0:case cg:case ig:case sg:case og:case dg:return n;default:switch(n=n&&n.$$typeof,n){case lg:case ug:case hg:case fg:case ag:return n;default:return e}}case u0:return e}}}function z2(n){return br(n)===cg}ft.AsyncMode=d0;ft.ConcurrentMode=cg;ft.ContextConsumer=lg;ft.ContextProvider=ag;ft.Element=c0;ft.ForwardRef=ug;ft.Fragment=ig;ft.Lazy=hg;ft.Memo=fg;ft.Portal=u0;ft.Profiler=sg;ft.StrictMode=og;ft.Suspense=dg;ft.isAsyncMode=function(n){return z2(n)||br(n)===d0};ft.isConcurrentMode=z2;ft.isContextConsumer=function(n){return br(n)===lg};ft.isContextProvider=function(n){return br(n)===ag};ft.isElement=function(n){return typeof n=="object"&&n!==null&&n.$$typeof===c0};ft.isForwardRef=function(n){return br(n)===ug};ft.isFragment=function(n){return br(n)===ig};ft.isLazy=function(n){return br(n)===hg};ft.isMemo=function(n){return br(n)===fg};ft.isPortal=function(n){return br(n)===u0};ft.isProfiler=function(n){return br(n)===sg};ft.isStrictMode=function(n){return br(n)===og};ft.isSuspense=function(n){return br(n)===dg};ft.isValidElementType=function(n){return typeof n=="string"||typeof n=="function"||n===ig||n===cg||n===sg||n===og||n===dg||n===jse||typeof n=="object"&&n!==null&&(n.$$typeof===hg||n.$$typeof===fg||n.$$typeof===ag||n.$$typeof===lg||n.$$typeof===ug||n.$$typeof===Hse||n.$$typeof===Use||n.$$typeof===Gse||n.$$typeof===Wse)};ft.typeOf=br;V2.exports=ft;var f0=V2.exports,cA=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function qse(n,e){return!!(n===e||cA(n)&&cA(e))}function Kse(n,e){if(n.length!==e.length)return!1;for(var t=0;t<n.length;t++)if(!qse(n[t],e[t]))return!1;return!0}function Xt(n,e){e===void 0&&(e=Kse);var t,r=[],i,o=!1;function s(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];return o&&t===this&&e(a,r)||(i=n.apply(this,a),o=!0,t=this,r=a),i}return s}function Yse(n){var e={};return function(t){return e[t]===void 0&&(e[t]=n(t)),e[t]}}var Xse=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|inert|itemProp|itemScope|itemType|itemID|itemRef|on|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,Zse=Yse(function(n){return Xse.test(n)||n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)<91});function h0(n){return Object.prototype.toString.call(n).slice(8,-1)}function pc(n){return h0(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function uA(n){return h0(n)==="Array"}function dA(n){return h0(n)==="Symbol"}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function fA(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var r=Array(n),i=0,e=0;e<t;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function hA(n,e,t,r){var i=r.propertyIsEnumerable(e)?"enumerable":"nonenumerable";i==="enumerable"&&(n[e]=t),i==="nonenumerable"&&Object.defineProperty(n,e,{value:t,enumerable:!1,writable:!0,configurable:!0})}function j2(n,e,t){if(!pc(e))return t&&uA(t)&&t.forEach(function(c){e=c(n,e)}),e;var r={};if(pc(n)){var i=Object.getOwnPropertyNames(n),o=Object.getOwnPropertySymbols(n);r=fA(i,o).reduce(function(c,u){var d=n[u];return(!dA(u)&&!Object.getOwnPropertyNames(e).includes(u)||dA(u)&&!Object.getOwnPropertySymbols(e).includes(u))&&hA(c,u,d,n),c},{})}var s=Object.getOwnPropertyNames(e),a=Object.getOwnPropertySymbols(e),l=fA(s,a).reduce(function(c,u){var d=e[u],f=pc(n)?n[u]:void 0;return t&&uA(t)&&t.forEach(function(h){d=h(f,d)}),f!==void 0&&pc(d)&&(d=j2(f,d,t)),hA(c,u,d,e),c},r);return l}function Jse(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];var r=null,i=n;return pc(n)&&n.extensions&&Object.keys(n).length===1&&(i={},r=n.extensions),e.reduce(function(o,s){return j2(o,s,r)},i)}var Uh={},mA=function(n,e){for(var t=[n[0]],r=0,i=e.length;r<i;r+=1)t.push(e[r],n[r+1]);return t},W2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ms=function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")},Qse=function(){function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),Or=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},mg=function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)},eae=function(n,e){var t={};for(var r in n)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r]);return t},Cu=function(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n},m0=function(n){return(typeof n>"u"?"undefined":W2(n))==="object"&&n.constructor===Object},oy=Object.freeze([]),Ac=Object.freeze({});function Qi(n){return typeof n=="function"}function H2(n){return n.displayName||n.name||"Component"}function tae(n){return typeof n=="function"&&!(n.prototype&&n.prototype.isReactComponent)}function gg(n){return n&&typeof n.styledComponentId=="string"}var Su=typeof process<"u"&&(Uh.REACT_APP_SC_ATTR||Uh.SC_ATTR)||"data-styled",pg="data-styled-version",nae="data-styled-streamed",Xa=typeof window<"u"&&"HTMLElement"in window,U2=typeof SC_DISABLE_SPEEDY=="boolean"&&SC_DISABLE_SPEEDY||typeof process<"u"&&(Uh.REACT_APP_SC_DISABLE_SPEEDY||Uh.SC_DISABLE_SPEEDY)||!1,Fo=function(n){mg(e,n);function e(t){Ms(this,e);for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];var s,s=Cu(this,n.call(this,"An error occurred. See https://github.com/styled-components/styled-components/blob/master/packages/styled-components/src/utils/errors.md#"+t+" for more information."+(i.length>0?" Additional arguments: "+i.join(", "):"")));return Cu(s)}return e}(Error),rae=/^[^\S\n]*?\/\* sc-component-id:\s*(\S+)\s+\*\//gm,iae=function(n){var e=""+(n||""),t=[];return e.replace(rae,function(r,i,o){return t.push({componentId:i,matchIndex:o}),r}),t.map(function(r,i){var o=r.componentId,s=r.matchIndex,a=t[i+1],l=a?e.slice(s,a.matchIndex):e.slice(s);return{componentId:o,cssFromDOM:l}})},oae=/^\s*\/\/.*$/gm,G2=new F2({global:!1,cascade:!0,keyframe:!1,prefix:!1,compress:!1,semicolon:!0}),q2=new F2({global:!1,cascade:!0,keyframe:!1,prefix:!0,compress:!1,semicolon:!1}),sy=[],K2=function(e){if(e===-2){var t=sy;return sy=[],t}},Y2=zse(function(n){sy.push(n)}),X2=void 0,Sa=void 0,Z2=void 0,sae=function(e,t,r){return t>0&&r.slice(0,t).indexOf(Sa)!==-1&&r.slice(t-Sa.length,t)!==Sa?"."+X2:e},aae=function(e,t,r){e===2&&r.length&&r[0].lastIndexOf(Sa)>0&&(r[0]=r[0].replace(Z2,sae))};q2.use([aae,Y2,K2]);G2.use([Y2,K2]);var lae=function(e){return G2("",e)};function cae(n,e,t){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"&",i=n.join("").replace(oae,""),o=i;return X2=r,Sa=e,Z2=new RegExp("\\"+Sa+"\\b","g"),q2(e||"",o)}var g0=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null},p0=function(e,t,r){if(r){var i=e[t]||(e[t]=Object.create(null));i[r]=!0}},Gh=function(e,t){e[t]=Object.create(null)},v0=function(e){return function(t,r){return e[t]!==void 0&&e[t][r]}},J2=function(e){var t="";for(var r in e)t+=Object.keys(e[r]).join(" ")+" ";return t.trim()},uae=function(e){var t=Object.create(null);for(var r in e)t[r]=Or({},e[r]);return t},Fp=function(e){if(e.sheet)return e.sheet;for(var t=e.ownerDocument.styleSheets.length,r=0;r<t;r+=1){var i=e.ownerDocument.styleSheets[r];if(i.ownerNode===e)return i}throw new Fo(10)},dae=function(e,t,r){if(!t)return!1;var i=e.cssRules.length;try{e.insertRule(t,r<=i?r:i)}catch{return!1}return!0},fae=function(e,t,r){for(var i=t-r,o=t;o>i;o-=1)e.deleteRule(o)},b0=function(e){return`
/* sc-component-id: `+e+` */
`},$p=function(e,t){for(var r=0,i=0;i<=t;i+=1)r+=e[i];return r},hae=function(e,t,r){var i=document;e?i=e.ownerDocument:t&&(i=t.ownerDocument);var o=i.createElement("style");o.setAttribute(Su,""),o.setAttribute(pg,"4.4.1");var s=g0();if(s&&o.setAttribute("nonce",s),o.appendChild(i.createTextNode("")),e&&!t)e.appendChild(o);else{if(!t||!e||!t.parentNode)throw new Fo(6);t.parentNode.insertBefore(o,r?t:t.nextSibling)}return o},y0=function(e,t){return function(r){var i=g0(),o=[i&&'nonce="'+i+'"',Su+'="'+J2(t)+'"',pg+'="4.4.1"',r],s=o.filter(Boolean).join(" ");return"<style "+s+">"+e()+"</style>"}},w0=function(e,t){return function(){var r,i=(r={},r[Su]=J2(t),r[pg]="4.4.1",r),o=g0();return o&&(i.nonce=o),O.createElement("style",Or({},i,{dangerouslySetInnerHTML:{__html:e()}}))}},_0=function(e){return function(){return Object.keys(e)}},mae=function(e,t){var r=Object.create(null),i=Object.create(null),o=[],s=t!==void 0,a=!1,l=function(h){var m=i[h];return m!==void 0?m:(i[h]=o.length,o.push(0),Gh(r,h),i[h])},c=function(h,m,g){for(var p=l(h),b=Fp(e),y=$p(o,p),C=0,A=[],w=m.length,S=0;S<w;S+=1){var _=m[S],v=s;v&&_.indexOf("@import")!==-1?A.push(_):dae(b,_,y+C)&&(v=!1,C+=1)}s&&A.length>0&&(a=!0,t().insertRules(h+"-import",A)),o[p]+=C,p0(r,h,g)},u=function(h){var m=i[h];if(m!==void 0&&e.isConnected!==!1){var g=o[m],p=Fp(e),b=$p(o,m)-1;fae(p,b,g),o[m]=0,Gh(r,h),s&&a&&t().removeRules(h+"-import")}},d=function(){var h=Fp(e),m=h.cssRules,g="";for(var p in i){g+=b0(p);for(var b=i[p],y=$p(o,b),C=o[b],A=y-C;A<y;A+=1){var w=m[A];w!==void 0&&(g+=w.cssText)}}return g};return{clone:function(){throw new Fo(5)},css:d,getIds:_0(i),hasNameForId:v0(r),insertMarker:l,insertRules:c,removeRules:u,sealed:!1,styleTag:e,toElement:w0(d,r),toHTML:y0(d,r)}},gA=function(e,t){return e.createTextNode(b0(t))},gae=function(e,t){var r=Object.create(null),i=Object.create(null),o=t!==void 0,s=!1,a=function(f){var h=i[f];return h!==void 0?h:(i[f]=gA(e.ownerDocument,f),e.appendChild(i[f]),r[f]=Object.create(null),i[f])},l=function(f,h,m){for(var g=a(f),p=[],b=h.length,y=0;y<b;y+=1){var C=h[y],A=o;if(A&&C.indexOf("@import")!==-1)p.push(C);else{A=!1;var w=y===b-1?"":" ";g.appendData(""+C+w)}}p0(r,f,m),o&&p.length>0&&(s=!0,t().insertRules(f+"-import",p))},c=function(f){var h=i[f];if(h!==void 0){var m=gA(e.ownerDocument,f);e.replaceChild(m,h),i[f]=m,Gh(r,f),o&&s&&t().removeRules(f+"-import")}},u=function(){var f="";for(var h in i)f+=i[h].data;return f};return{clone:function(){throw new Fo(5)},css:u,getIds:_0(i),hasNameForId:v0(r),insertMarker:a,insertRules:l,removeRules:c,sealed:!1,styleTag:e,toElement:w0(u,r),toHTML:y0(u,r)}},pae=function n(e,t){var r=e===void 0?Object.create(null):e,i=t===void 0?Object.create(null):t,o=function(f){var h=i[f];return h!==void 0?h:i[f]=[""]},s=function(f,h,m){var g=o(f);g[0]+=h.join(" "),p0(r,f,m)},a=function(f){var h=i[f];h!==void 0&&(h[0]="",Gh(r,f))},l=function(){var f="";for(var h in i){var m=i[h][0];m&&(f+=b0(h)+m)}return f},c=function(){var f=uae(r),h=Object.create(null);for(var m in i)h[m]=[i[m][0]];return n(f,h)},u={clone:c,css:l,getIds:_0(i),hasNameForId:v0(r),insertMarker:o,insertRules:s,removeRules:a,sealed:!1,styleTag:null,toElement:w0(l,r),toHTML:y0(l,r)};return u},pA=function(e,t,r,i,o){if(Xa&&!r){var s=hae(e,t,i);return U2?gae(s,o):mae(s,o)}return pae()},vae=function(e,t,r){for(var i=0,o=r.length;i<o;i+=1){var s=r[i],a=s.componentId,l=s.cssFromDOM,c=lae(l);e.insertRules(a,c)}for(var u=0,d=t.length;u<d;u+=1){var f=t[u];f.parentNode&&f.parentNode.removeChild(f)}},bae=/\s+/,qh=void 0;Xa?qh=U2?40:1e3:qh=-1;var vA=0,Vp=void 0,Kh=function(){function n(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Xa?document.head:null,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;Ms(this,n),this.getImportRuleTag=function(){var i=e.importRuleTag;if(i!==void 0)return i;var o=e.tags[0],s=!0;return e.importRuleTag=pA(e.target,o?o.styleTag:null,e.forceServer,s)},vA+=1,this.id=vA,this.forceServer=r,this.target=r?null:t,this.tagMap={},this.deferred={},this.rehydratedNames={},this.ignoreRehydratedNames={},this.tags=[],this.capacity=1,this.clones=[]}return n.prototype.rehydrate=function(){if(!Xa||this.forceServer)return this;var t=[],r=[],i=!1,o=document.querySelectorAll("style["+Su+"]["+pg+'="4.4.1"]'),s=o.length;if(!s)return this;for(var a=0;a<s;a+=1){var l=o[a];i||(i=!!l.getAttribute(nae));for(var c=(l.getAttribute(Su)||"").trim().split(bae),u=c.length,d=0,f;d<u;d+=1)f=c[d],this.rehydratedNames[f]=!0;r.push.apply(r,iae(l.textContent)),t.push(l)}var h=r.length;if(!h)return this;var m=this.makeTag(null);vae(m,t,r),this.capacity=Math.max(1,qh-h),this.tags.push(m);for(var g=0;g<h;g+=1)this.tagMap[r[g].componentId]=m;return this},n.reset=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;Vp=new n(void 0,t).rehydrate()},n.prototype.clone=function(){var t=new n(this.target,this.forceServer);return this.clones.push(t),t.tags=this.tags.map(function(r){for(var i=r.getIds(),o=r.clone(),s=0;s<i.length;s+=1)t.tagMap[i[s]]=o;return o}),t.rehydratedNames=Or({},this.rehydratedNames),t.deferred=Or({},this.deferred),t},n.prototype.sealAllTags=function(){this.capacity=1,this.tags.forEach(function(t){t.sealed=!0})},n.prototype.makeTag=function(t){var r=t?t.styleTag:null,i=!1;return pA(this.target,r,this.forceServer,i,this.getImportRuleTag)},n.prototype.getTagForId=function(t){var r=this.tagMap[t];if(r!==void 0&&!r.sealed)return r;var i=this.tags[this.tags.length-1];return this.capacity-=1,this.capacity===0&&(this.capacity=qh,i=this.makeTag(i),this.tags.push(i)),this.tagMap[t]=i},n.prototype.hasId=function(t){return this.tagMap[t]!==void 0},n.prototype.hasNameForId=function(t,r){if(this.ignoreRehydratedNames[t]===void 0&&this.rehydratedNames[r])return!0;var i=this.tagMap[t];return i!==void 0&&i.hasNameForId(t,r)},n.prototype.deferredInject=function(t,r){if(this.tagMap[t]===void 0){for(var i=this.clones,o=0;o<i.length;o+=1)i[o].deferredInject(t,r);this.getTagForId(t).insertMarker(t),this.deferred[t]=r}},n.prototype.inject=function(t,r,i){for(var o=this.clones,s=0;s<o.length;s+=1)o[s].inject(t,r,i);var a=this.getTagForId(t);if(this.deferred[t]!==void 0){var l=this.deferred[t].concat(r);a.insertRules(t,l,i),this.deferred[t]=void 0}else a.insertRules(t,r,i)},n.prototype.remove=function(t){var r=this.tagMap[t];if(r!==void 0){for(var i=this.clones,o=0;o<i.length;o+=1)i[o].remove(t);r.removeRules(t),this.ignoreRehydratedNames[t]=!0,this.deferred[t]=void 0}},n.prototype.toHTML=function(){return this.tags.map(function(t){return t.toHTML()}).join("")},n.prototype.toReactElements=function(){var t=this.id;return this.tags.map(function(r,i){var o="sc-"+t+"-"+i;return R.cloneElement(r.toElement(),{key:o})})},Qse(n,null,[{key:"master",get:function(){return Vp||(Vp=new n().rehydrate())}},{key:"instance",get:function(){return n.master}}]),n}(),yae=function(){function n(e,t){var r=this;Ms(this,n),this.inject=function(i){i.hasNameForId(r.id,r.name)||i.inject(r.id,r.rules,r.name)},this.toString=function(){throw new Fo(12,String(r.name))},this.name=e,this.rules=t,this.id="sc-keyframes-"+e}return n.prototype.getName=function(){return this.name},n}(),wae=/([A-Z])/g,_ae=/^ms-/;function bA(n){return n.replace(wae,"-$1").toLowerCase().replace(_ae,"-ms-")}function Cae(n,e){return e==null||typeof e=="boolean"||e===""?"":typeof e=="number"&&e!==0&&!(n in GL)?e+"px":String(e).trim()}var Q2=function(e){return e==null||e===!1||e===""},Sae=function n(e,t){var r=[],i=Object.keys(e);return i.forEach(function(o){if(!Q2(e[o])){if(m0(e[o]))return r.push.apply(r,n(e[o],o)),r;if(Qi(e[o]))return r.push(bA(o)+":",e[o],";"),r;r.push(bA(o)+": "+Cae(o,e[o])+";")}return r}),t?[t+" {"].concat(r,["}"]):r};function xu(n,e,t){if(Array.isArray(n)){for(var r=[],i=0,o=n.length,s;i<o;i+=1)s=xu(n[i],e,t),s!==null&&(Array.isArray(s)?r.push.apply(r,s):r.push(s));return r}if(Q2(n))return null;if(gg(n))return"."+n.styledComponentId;if(Qi(n))if(tae(n)&&e){var a=n(e);return xu(a,e,t)}else return n;return n instanceof yae?t?(n.inject(t),n.getName()):n:m0(n)?Sae(n):n.toString()}function xae(n){for(var e=arguments.length,t=Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return Qi(n)||m0(n)?xu(mA(oy,[n].concat(t))):xu(mA(n,t))}function ay(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ac;if(!f0.isValidElementType(e))throw new Fo(1,String(e));var r=function(){return n(e,t,xae.apply(void 0,arguments))};return r.withConfig=function(i){return ay(n,e,Or({},t,i))},r.attrs=function(i){return ay(n,e,Or({},t,{attrs:Array.prototype.concat(t.attrs,i).filter(Boolean)}))},r}function Aae(n){for(var e=n.length|0,t=e|0,r=0,i;e>=4;)i=n.charCodeAt(r)&255|(n.charCodeAt(++r)&255)<<8|(n.charCodeAt(++r)&255)<<16|(n.charCodeAt(++r)&255)<<24,i=1540483477*(i&65535)+((1540483477*(i>>>16)&65535)<<16),i^=i>>>24,i=1540483477*(i&65535)+((1540483477*(i>>>16)&65535)<<16),t=1540483477*(t&65535)+((1540483477*(t>>>16)&65535)<<16)^i,e-=4,++r;switch(e){case 3:t^=(n.charCodeAt(r+2)&255)<<16;case 2:t^=(n.charCodeAt(r+1)&255)<<8;case 1:t^=n.charCodeAt(r)&255,t=1540483477*(t&65535)+((1540483477*(t>>>16)&65535)<<16)}return t^=t>>>13,t=1540483477*(t&65535)+((1540483477*(t>>>16)&65535)<<16),(t^t>>>15)>>>0}var tf=52,yA=function(e){return String.fromCharCode(e+(e>25?39:97))};function Tae(n){var e="",t=void 0;for(t=n;t>tf;t=Math.floor(t/tf))e=yA(t%tf)+e;return yA(t%tf)+e}function Eae(n){for(var e in n)if(Qi(n[e]))return!0;return!1}function eM(n,e){for(var t=0;t<n.length;t+=1){var r=n[t];if(Array.isArray(r)&&!eM(r,e))return!1;if(Qi(r)&&!gg(r))return!1}return!e.some(function(i){return Qi(i)||Eae(i)})}var wA=function(e){return Tae(Aae(e))},_A=function(){function n(e,t,r){Ms(this,n),this.rules=e,this.isStatic=eM(e,t),this.componentId=r,Kh.master.hasId(r)||Kh.master.deferredInject(r,[])}return n.prototype.generateAndInjectStyles=function(t,r){var i=this.isStatic,o=this.componentId,s=this.lastClassName;if(Xa&&i&&typeof s=="string"&&r.hasNameForId(o,s))return s;var a=xu(this.rules,t,r),l=wA(this.componentId+a.join(""));return r.hasNameForId(o,l)||r.inject(this.componentId,cae(a,"."+l,void 0,o),l),this.lastClassName=l,l},n.generateName=function(t){return wA(t)},n}(),kae=function(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ac,r=t?n.theme===t.theme:!1,i=n.theme&&!r?n.theme:e||t.theme;return i},Pae=/[[\].#*$><+~=|^:(),"'`-]+/g,Iae=/(^-|-$)/g;function ly(n){return n.replace(Pae,"-").replace(Iae,"")}function Yh(n){return typeof n=="string"&&!0}function Oae(n){return Yh(n)?"styled."+n:"Styled("+H2(n)+")"}var zp,CA={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDerivedStateFromProps:!0,propTypes:!0,type:!0},Rae={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},SA=(zp={},zp[f0.ForwardRef]={$$typeof:!0,render:!0},zp),Mae=Object.defineProperty,Dae=Object.getOwnPropertyNames,xA=Object.getOwnPropertySymbols,Bae=xA===void 0?function(){return[]}:xA,Nae=Object.getOwnPropertyDescriptor,Lae=Object.getPrototypeOf,Fae=Object.prototype,$ae=Array.prototype;function tM(n,e,t){if(typeof e!="string"){var r=Lae(e);r&&r!==Fae&&tM(n,r,t);for(var i=$ae.concat(Dae(e),Bae(e)),o=SA[n.$$typeof]||CA,s=SA[e.$$typeof]||CA,a=i.length,l=void 0,c=void 0;a--;)if(c=i[a],!Rae[c]&&!(t&&t[c])&&!(s&&s[c])&&!(o&&o[c])&&(l=Nae(e,c),l))try{Mae(n,c,l)}catch{}return n}return n}function Vae(n){return!!(n&&n.prototype&&n.prototype.isReactComponent)}var cy=R.createContext(),zae=cy.Consumer;(function(n){mg(e,n);function e(t){Ms(this,e);var r=Cu(this,n.call(this,t));return r.getContext=Xt(r.getContext.bind(r)),r.renderInner=r.renderInner.bind(r),r}return e.prototype.render=function(){return this.props.children?O.createElement(cy.Consumer,null,this.renderInner):null},e.prototype.renderInner=function(r){var i=this.getContext(this.props.theme,r);return O.createElement(cy.Provider,{value:i},this.props.children)},e.prototype.getTheme=function(r,i){if(Qi(r)){var o=r(i);return o}if(r===null||Array.isArray(r)||(typeof r>"u"?"undefined":W2(r))!=="object")throw new Fo(8);return Or({},i,r)},e.prototype.getContext=function(r,i){return this.getTheme(r,i)},e})(R.Component);var nM=R.createContext(),jae=nM.Consumer;(function(n){mg(e,n);function e(t){Ms(this,e);var r=Cu(this,n.call(this,t));return r.getContext=Xt(r.getContext),r}return e.prototype.getContext=function(r,i){if(r)return r;if(i)return new Kh(i);throw new Fo(4)},e.prototype.render=function(){var r=this.props,i=r.children,o=r.sheet,s=r.target;return O.createElement(nM.Provider,{value:this.getContext(o,s)},i)},e})(R.Component);var AA={};function Wae(n,e,t){var r=typeof e!="string"?"sc":ly(e),i=(AA[r]||0)+1;AA[r]=i;var o=r+"-"+n.generateName(r+i);return t?t+"-"+o:o}var Hae=function(n){mg(e,n);function e(){Ms(this,e);var t=Cu(this,n.call(this));return t.attrs={},t.renderOuter=t.renderOuter.bind(t),t.renderInner=t.renderInner.bind(t),t}return e.prototype.render=function(){return O.createElement(jae,null,this.renderOuter)},e.prototype.renderOuter=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Kh.master;return this.styleSheet=r,this.props.forwardedComponent.componentStyle.isStatic?this.renderInner():O.createElement(zae,null,this.renderInner)},e.prototype.renderInner=function(r){var i=this.props.forwardedComponent,o=i.componentStyle,s=i.defaultProps;i.displayName;var a=i.foldedComponentIds,l=i.styledComponentId,c=i.target,u=void 0;o.isStatic?u=this.generateAndInjectStyles(Ac,this.props):u=this.generateAndInjectStyles(kae(this.props,r,s)||Ac,this.props);var d=this.props.as||this.attrs.as||c,f=Yh(d),h={},m=Or({},this.props,this.attrs),g=void 0;for(g in m)g==="forwardedComponent"||g==="as"||(g==="forwardedRef"?h.ref=m[g]:g==="forwardedAs"?h.as=m[g]:(!f||Zse(g))&&(h[g]=m[g]));return this.props.style&&this.attrs.style&&(h.style=Or({},this.attrs.style,this.props.style)),h.className=Array.prototype.concat(a,l,u!==l?u:null,this.props.className,this.attrs.className).filter(Boolean).join(" "),R.createElement(d,h)},e.prototype.buildExecutionContext=function(r,i,o){var s=this,a=Or({},i,{theme:r});return o.length&&(this.attrs={},o.forEach(function(l){var c=l,u=!1,d=void 0,f=void 0;Qi(c)&&(c=c(a),u=!0);for(f in c)d=c[f],u||Qi(d)&&!Vae(d)&&!gg(d)&&(d=d(a)),s.attrs[f]=d,a[f]=d})),a},e.prototype.generateAndInjectStyles=function(r,i){var o=i.forwardedComponent,s=o.attrs,a=o.componentStyle;if(o.warnTooManyClasses,a.isStatic&&!s.length)return a.generateAndInjectStyles(Ac,this.styleSheet);var l=a.generateAndInjectStyles(this.buildExecutionContext(r,i,s),this.styleSheet);return l},e}(R.Component);function rM(n,e,t){var r=gg(n),i=!Yh(n),o=e.displayName,s=o===void 0?Oae(n):o,a=e.componentId,l=a===void 0?Wae(_A,e.displayName,e.parentComponentId):a,c=e.ParentComponent,u=c===void 0?Hae:c,d=e.attrs,f=d===void 0?oy:d,h=e.displayName&&e.componentId?ly(e.displayName)+"-"+e.componentId:e.componentId||l,m=r&&n.attrs?Array.prototype.concat(n.attrs,f).filter(Boolean):f,g=new _A(r?n.componentStyle.rules.concat(t):t,m,h),p=void 0,b=function(C,A){return O.createElement(u,Or({},C,{forwardedComponent:p,forwardedRef:A}))};return b.displayName=s,p=O.forwardRef(b),p.displayName=s,p.attrs=m,p.componentStyle=g,p.foldedComponentIds=r?Array.prototype.concat(n.foldedComponentIds,n.styledComponentId):oy,p.styledComponentId=h,p.target=r?n.target:n,p.withComponent=function(C){var A=e.componentId,w=eae(e,["componentId"]),S=A&&A+"-"+(Yh(C)?C:ly(H2(C))),_=Or({},w,{attrs:m,componentId:S,ParentComponent:u});return rM(C,_,t)},Object.defineProperty(p,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(C){this._foldedDefaultProps=r?Jse(n.defaultProps,C):C}}),p.toString=function(){return"."+p.styledComponentId},i&&tM(p,n,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,styledComponentId:!0,target:!0,withComponent:!0}),p}var Uae=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],uy=function(e){return ay(rM,e)};Uae.forEach(function(n){uy[n]=uy(n)});Xa&&(window.scCGSHMRCache={});/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let he;try{he={window,document}}catch{/* istanbul ignore next -- @preserve */he={window:{},document:{}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Gae(){try{return navigator.userAgent.toLowerCase()}catch{return""}}const Ho=Gae(),Re={isMac:iM(Ho),isWindows:qae(Ho),isGecko:Kae(Ho),isSafari:Yae(Ho),isiOS:Xae(Ho),isAndroid:Zae(Ho),isBlink:Jae(Ho),get isMediaForcedColors(){return ele()},features:{isRegExpUnicodePropertySupported:Qae()}};function iM(n){return n.indexOf("macintosh")>-1}function qae(n){return n.indexOf("windows")>-1}function Kae(n){return!!n.match(/gecko\/\d+/)}function Yae(n){return n.indexOf(" applewebkit/")>-1&&n.indexOf("chrome")===-1}function Xae(n){return!!n.match(/iphone|ipad/i)||iM(n)&&navigator.maxTouchPoints>0}function Zae(n){return n.indexOf("android")>-1}function Jae(n){return n.indexOf("chrome/")>-1&&n.indexOf("edge/")<0}function Qae(){let n=!1;try{n="ć".search(new RegExp("[\\p{L}]","u"))===0}catch{}return n}function ele(){return he.window.matchMedia?he.window.matchMedia("(forced-colors: active)").matches:!1}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function oM(n,e,t,r){t=t||function(l,c){return l===c};const i=Array.isArray(n)?n:Array.prototype.slice.call(n),o=Array.isArray(e)?e:Array.prototype.slice.call(e),s=tle(i,o,t);return r?rle(s,o.length):nle(o,s)}function tle(n,e,t){const r=TA(n,e,t);if(r===-1)return{firstIndex:-1,lastIndexOld:-1,lastIndexNew:-1};const i=EA(n,r),o=EA(e,r),s=TA(i,o,t),a=n.length-s,l=e.length-s;return{firstIndex:r,lastIndexOld:a,lastIndexNew:l}}function TA(n,e,t){for(let r=0;r<Math.max(n.length,e.length);r++)if(n[r]===void 0||e[r]===void 0||!t(n[r],e[r]))return r;return-1}function EA(n,e){return n.slice(e).reverse()}function nle(n,e){const t=[],{firstIndex:r,lastIndexOld:i,lastIndexNew:o}=e;return o-r>0&&t.push({index:r,type:"insert",values:n.slice(r,o)}),i-r>0&&t.push({index:r+(o-r),type:"delete",howMany:i-r}),t}function rle(n,e){const{firstIndex:t,lastIndexOld:r,lastIndexNew:i}=n;if(t===-1)return Array(e).fill("equal");let o=[];return t>0&&(o=o.concat(Array(t).fill("equal"))),i-t>0&&(o=o.concat(Array(i-t).fill("insert"))),r-t>0&&(o=o.concat(Array(r-t).fill("delete"))),i<e&&(o=o.concat(Array(e-i).fill("equal"))),o}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Tc(n,e,t){t=t||function(g,p){return g===p};const r=n.length,i=e.length;if(r>200||i>200||r+i>300)return Tc.fastDiff(n,e,t,!0);let o,s;if(i<r){const g=n;n=e,e=g,o="delete",s="insert"}else o="insert",s="delete";const a=n.length,l=e.length,c=l-a,u={},d={};function f(g){const p=(d[g-1]!==void 0?d[g-1]:-1)+1,b=d[g+1]!==void 0?d[g+1]:-1,y=p>b?-1:1;u[g+y]&&(u[g]=u[g+y].slice(0)),u[g]||(u[g]=[]),u[g].push(p>b?o:s);let C=Math.max(p,b),A=C-g;for(;A<a&&C<l&&t(n[A],e[C]);)A++,C++,u[g].push("equal");return C}let h=0,m;do{for(m=-h;m<c;m++)d[m]=f(m);for(m=c+h;m>c;m--)d[m]=f(m);d[c]=f(c),h++}while(d[c]!==l);return u[c].slice(1)}Tc.fastDiff=oM;/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function kA(){return function n(){n.called=!0}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class eo{constructor(e,t){this.source=e,this.name=t,this.path=[],this.stop=kA(),this.off=kA()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const xn=new Array(256).fill("").map((n,e)=>("0"+e.toString(16)).slice(-2));function Br(){const n=Math.random()*4294967296>>>0,e=Math.random()*4294967296>>>0,t=Math.random()*4294967296>>>0,r=Math.random()*4294967296>>>0;return"e"+xn[n>>0&255]+xn[n>>8&255]+xn[n>>16&255]+xn[n>>24&255]+xn[e>>0&255]+xn[e>>8&255]+xn[e>>16&255]+xn[e>>24&255]+xn[t>>0&255]+xn[t>>8&255]+xn[t>>16&255]+xn[t>>24&255]+xn[r>>0&255]+xn[r>>8&255]+xn[r>>16&255]+xn[r>>24&255]}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const ur={get(n="normal"){return typeof n!="number"?this[n]||this.normal:n},highest:1e5,high:1e3,normal:0,low:-1e3,lowest:-1e5};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function sM(n,e){const t=ur.get(e.priority);for(let r=0;r<n.length;r++)if(ur.get(n[r].priority)<t){n.splice(r,0,e);return}n.push(e)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const ile="https://ckeditor.com/docs/ckeditor5/latest/support/error-codes.html";class M extends Error{constructor(e,t,r){super(ole(e,r)),this.name="CKEditorError",this.context=t,this.data=r}is(e){return e==="CKEditorError"}static rethrowUnexpectedError(e,t){if(e.is&&e.is("CKEditorError"))throw e;const r=new M(e.message,t);throw r.stack=e.stack,r}}function Ye(n,e){console.warn(...sle(n,e))}function aM(n){return`
Read more: ${ile}#error-${n}`}function ole(n,e){const t=new WeakSet,i=e?` ${JSON.stringify(e,(s,a)=>{if(typeof a=="object"&&a!==null){if(t.has(a))return`[object ${a.constructor.name}]`;t.add(a)}return a})}`:"",o=aM(n);return n+i+o}function sle(n,e){const t=aM(n);return e?[n,e,t]:[n,t]}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const ale="41.4.2",lle=new Date(2024,4,17);/* istanbul ignore next -- @preserve */if(globalThis.CKEDITOR_VERSION)throw new M("ckeditor-duplicated-modules",null);globalThis.CKEDITOR_VERSION=ale;/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const aa=Symbol("listeningTo"),dy=Symbol("emitterId"),Mi=Symbol("delegations"),lM=pt(Object);function pt(n){if(!n)return lM;class e extends n{on(r,i,o){this.listenTo(this,r,i,o)}once(r,i,o){let s=!1;const a=(l,...c)=>{s||(s=!0,l.off(),i.call(this,l,...c))};this.listenTo(this,r,a,o)}off(r,i){this.stopListening(this,r,i)}listenTo(r,i,o,s={}){let a,l;this[aa]||(this[aa]={});const c=this[aa];jp(r)||cM(r);const u=jp(r);(a=c[u])||(a=c[u]={emitter:r,callbacks:{}}),(l=a.callbacks[i])||(l=a.callbacks[i]=[]),l.push(o),fle(this,r,i,o,s)}stopListening(r,i,o){const s=this[aa];let a=r&&jp(r);const l=s&&a?s[a]:void 0,c=l&&i?l.callbacks[i]:void 0;if(!(!s||r&&!l||i&&!c))if(o)Wp(this,r,i,o),c.indexOf(o)!==-1&&(c.length===1?delete l.callbacks[i]:Wp(this,r,i,o));else if(c){for(;o=c.pop();)Wp(this,r,i,o);delete l.callbacks[i]}else if(l){for(i in l.callbacks)this.stopListening(r,i);delete s[a]}else{for(a in s)this.stopListening(s[a].emitter);delete this[aa]}}fire(r,...i){try{const o=r instanceof eo?r:new eo(this,r),s=o.name;let a=dM(this,s);if(o.path.push(this),a){const c=[o,...i];a=Array.from(a);for(let u=0;u<a.length&&(a[u].callback.apply(this,c),o.off.called&&(delete o.off.called,this._removeEventListener(s,a[u].callback)),!o.stop.called);u++);}const l=this[Mi];if(l){const c=l.get(s),u=l.get("*");c&&PA(c,o,i),u&&PA(u,o,i)}return o.return}catch(o){/* istanbul ignore next -- @preserve */M.rethrowUnexpectedError(o,this)}}delegate(...r){return{to:(i,o)=>{this[Mi]||(this[Mi]=new Map),r.forEach(s=>{const a=this[Mi].get(s);a?a.set(i,o):this[Mi].set(s,new Map([[i,o]]))})}}}stopDelegating(r,i){if(this[Mi])if(!r)this[Mi].clear();else if(!i)this[Mi].delete(r);else{const o=this[Mi].get(r);o&&o.delete(i)}}_addEventListener(r,i,o){dle(this,r);const s=fy(this,r),a=ur.get(o.priority),l={callback:i,priority:a};for(const c of s)sM(c,l)}_removeEventListener(r,i){const o=fy(this,r);for(const s of o)for(let a=0;a<s.length;a++)s[a].callback==i&&(s.splice(a,1),a--)}}return e}["on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(n=>{pt[n]=lM.prototype[n]});function cle(n,e){const t=n[aa];return t&&t[e]?t[e].emitter:null}function cM(n,e){n[dy]||(n[dy]=e||Br())}function jp(n){return n[dy]}function uM(n){return n._events||Object.defineProperty(n,"_events",{value:{}}),n._events}function ule(){return{callbacks:[],childEvents:[]}}function dle(n,e){const t=uM(n);if(t[e])return;let r=e,i=null;const o=[];for(;r!==""&&!t[r];)t[r]=ule(),o.push(t[r]),i&&t[r].childEvents.push(i),i=r,r=r.substr(0,r.lastIndexOf(":"));if(r!==""){for(const s of o)s.callbacks=t[r].callbacks.slice();t[r].childEvents.push(i)}}function fy(n,e){const t=uM(n)[e];if(!t)return[];let r=[t.callbacks];for(let i=0;i<t.childEvents.length;i++){const o=fy(n,t.childEvents[i]);r=r.concat(o)}return r}function dM(n,e){let t;return!n._events||!(t=n._events[e])||!t.callbacks.length?e.indexOf(":")>-1?dM(n,e.substr(0,e.lastIndexOf(":"))):null:t.callbacks}function PA(n,e,t){for(let[r,i]of n){i?typeof i=="function"&&(i=i(e.name)):i=e.name;const o=new eo(e.source,i);o.path=[...e.path],r.fire(o,...t)}}function fle(n,e,t,r,i){e._addEventListener?e._addEventListener(t,r,i):n._addEventListener.call(e,t,r,i)}function Wp(n,e,t,r){e._removeEventListener?e._removeEventListener(t,r):n._removeEventListener.call(e,t,r)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Xh=Symbol("observableProperties"),vg=Symbol("boundObservables"),Zh=Symbol("boundProperties"),qs=Symbol("decoratedMethods"),IA=Symbol("decoratedOriginal"),fM=ct(pt());function ct(n){if(!n)return fM;class e extends n{set(r,i){if(ri(r)){Object.keys(r).forEach(s=>{this.set(s,r[s])},this);return}Hp(this);const o=this[Xh];if(r in this&&!o.has(r))throw new M("observable-set-cannot-override",this);Object.defineProperty(this,r,{enumerable:!0,configurable:!0,get(){return o.get(r)},set(s){const a=o.get(r);let l=this.fire(`set:${r}`,r,s,a);l===void 0&&(l=s),(a!==l||!o.has(r))&&(o.set(r,l),this.fire(`change:${r}`,r,l,a))}}),this[r]=i}bind(...r){if(!r.length||!OA(r))throw new M("observable-bind-wrong-properties",this);if(new Set(r).size!==r.length)throw new M("observable-bind-duplicate-properties",this);Hp(this);const i=this[Zh];r.forEach(s=>{if(i.has(s))throw new M("observable-bind-rebind",this)});const o=new Map;return r.forEach(s=>{const a={property:s,to:[]};i.set(s,a),o.set(s,a)}),{to:hle,toMany:mle,_observable:this,_bindProperties:r,_to:[],_bindings:o}}unbind(...r){if(!this[Xh])return;const i=this[Zh],o=this[vg];if(r.length){if(!OA(r))throw new M("observable-unbind-wrong-properties",this);r.forEach(s=>{const a=i.get(s);a&&(a.to.forEach(([l,c])=>{const u=o.get(l),d=u[c];d.delete(a),d.size||delete u[c],Object.keys(u).length||(o.delete(l),this.stopListening(l,"change"))}),i.delete(s))})}else o.forEach((s,a)=>{this.stopListening(a,"change")}),o.clear(),i.clear()}decorate(r){Hp(this);const i=this[r];if(!i)throw new M("observablemixin-cannot-decorate-undefined",this,{object:this,methodName:r});this.on(r,(o,s)=>{o.return=i.apply(this,s)}),this[r]=function(...o){return this.fire(r,o)},this[r][IA]=i,this[qs]||(this[qs]=[]),this[qs].push(r)}stopListening(r,i,o){if(!r&&this[qs]){for(const s of this[qs])this[s]=this[s][IA];delete this[qs]}super.stopListening(r,i,o)}}return e}["set","bind","unbind","decorate","on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(n=>{ct[n]=fM.prototype[n]});function Hp(n){n[Xh]||(Object.defineProperty(n,Xh,{value:new Map}),Object.defineProperty(n,vg,{value:new Map}),Object.defineProperty(n,Zh,{value:new Map}))}function hle(...n){const e=ple(...n),t=Array.from(this._bindings.keys()),r=t.length;if(!e.callback&&e.to.length>1)throw new M("observable-bind-to-no-callback",this);if(r>1&&e.callback)throw new M("observable-bind-to-extra-callback",this);e.to.forEach(i=>{if(i.properties.length&&i.properties.length!==r)throw new M("observable-bind-to-properties-length",this);i.properties.length||(i.properties=this._bindProperties)}),this._to=e.to,e.callback&&(this._bindings.get(t[0]).callback=e.callback),yle(this._observable,this._to),ble(this),this._bindProperties.forEach(i=>{hM(this._observable,i)})}function mle(n,e,t){if(this._bindings.size>1)throw new M("observable-bind-to-many-not-one-binding",this);this.to(...gle(n,e),t)}function gle(n,e){const t=n.map(r=>[r,e]);return Array.prototype.concat.apply([],t)}function OA(n){return n.every(e=>typeof e=="string")}function ple(...n){if(!n.length)throw new M("observable-bind-to-parse-error",null);const e={to:[]};let t;return typeof n[n.length-1]=="function"&&(e.callback=n.pop()),n.forEach(r=>{if(typeof r=="string")t.properties.push(r);else if(typeof r=="object")t={observable:r,properties:[]},e.to.push(t);else throw new M("observable-bind-to-parse-error",null)}),e}function vle(n,e,t,r){const i=n[vg],o=i.get(t),s=o||{};s[r]||(s[r]=new Set),s[r].add(e),o||i.set(t,s)}function ble(n){let e;n._bindings.forEach((t,r)=>{n._to.forEach(i=>{e=i.properties[t.callback?0:n._bindProperties.indexOf(r)],t.to.push([i.observable,e]),vle(n._observable,t,i.observable,e)})})}function hM(n,e){const r=n[Zh].get(e);let i;r.callback?i=r.callback.apply(n,r.to.map(o=>o[0][o[1]])):(i=r.to[0],i=i[0][i[1]]),Object.prototype.hasOwnProperty.call(n,e)?n[e]=i:n.set(e,i)}function yle(n,e){e.forEach(t=>{const r=n[vg];let i;r.get(t.observable)||n.listenTo(t.observable,"change",(o,s)=>{i=r.get(t.observable)[s],i&&i.forEach(a=>{hM(n,a.property)})})})}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class wle{constructor(){this._replacedElements=[]}replace(e,t){this._replacedElements.push({element:e,newElement:t}),e.style.display="none",t&&e.parentNode.insertBefore(t,e.nextSibling)}restore(){this._replacedElements.forEach(({element:e,newElement:t})=>{e.style.display="",t&&t.remove()}),this._replacedElements=[]}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function hy(n){let e=0;for(const t of n)e++;return e}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Tn(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++)if(n[r]!=e[r])return r;return n.length==e.length?"same":n.length<e.length?"prefix":"extension"}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function pr(n){return!!(n&&n[Symbol.iterator])}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Gr(n,e,t={},r=[]){const i=t&&t.xmlns,o=i?n.createElementNS(i,e):n.createElement(e);for(const s in t)o.setAttribute(s,t[s]);(l1(r)||!pr(r))&&(r=[r]);for(let s of r)l1(s)&&(s=n.createTextNode(s)),o.appendChild(s);return o}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class mM{constructor(e,t){this._config={},t&&this.define(RA(t)),e&&this._setObjectToTarget(this._config,e)}set(e,t){this._setToTarget(this._config,e,t)}define(e,t){this._setToTarget(this._config,e,t,!0)}get(e){return this._getFromSource(this._config,e)}*names(){for(const e of Object.keys(this._config))yield e}_setToTarget(e,t,r,i=!1){if(Er(t)){this._setObjectToTarget(e,t,i);return}const o=t.split(".");t=o.pop();for(const s of o)Er(e[s])||(e[s]={}),e=e[s];if(Er(r)){Er(e[t])||(e[t]={}),e=e[t],this._setObjectToTarget(e,r,i);return}i&&typeof e[t]<"u"||(e[t]=r)}_getFromSource(e,t){const r=t.split(".");t=r.pop();for(const i of r){if(!Er(e[i])){e=null;break}e=e[i]}return e?RA(e[t]):void 0}_setObjectToTarget(e,t,r){Object.keys(t).forEach(i=>{this._setToTarget(e,i,t[i],r)})}}function RA(n){return rw(n,_le)}function _le(n){return ys(n)||typeof n=="function"?n:void 0}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Io(n){if(n){if(n.defaultView)return n instanceof n.defaultView.Document;if(n.ownerDocument&&n.ownerDocument.defaultView)return n instanceof n.ownerDocument.defaultView.Node}return!1}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Jh(n){const e=Object.prototype.toString.apply(n);return e=="[object Window]"||e=="[object global]"}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const gM=nr(pt());function nr(n){if(!n)return gM;class e extends n{listenTo(r,i,o,s={}){if(Io(r)||Jh(r)){const a={capture:!!s.useCapture,passive:!!s.usePassive},l=this._getProxyEmitter(r,a)||new Cle(r,a);this.listenTo(l,i,o,s)}else super.listenTo(r,i,o,s)}stopListening(r,i,o){if(Io(r)||Jh(r)){const s=this._getAllProxyEmitters(r);for(const a of s)this.stopListening(a,i,o)}else super.stopListening(r,i,o)}_getProxyEmitter(r,i){return cle(this,pM(r,i))}_getAllProxyEmitters(r){return[{capture:!1,passive:!1},{capture:!1,passive:!0},{capture:!0,passive:!1},{capture:!0,passive:!0}].map(i=>this._getProxyEmitter(r,i)).filter(i=>!!i)}}return e}["_getProxyEmitter","_getAllProxyEmitters","on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(n=>{nr[n]=gM.prototype[n]});class Cle extends pt(){constructor(e,t){super(),cM(this,pM(e,t)),this._domNode=e,this._options=t}attach(e){if(this._domListeners&&this._domListeners[e])return;const t=this._createDomListener(e);this._domNode.addEventListener(e,t,this._options),this._domListeners||(this._domListeners={}),this._domListeners[e]=t}detach(e){let t;this._domListeners[e]&&(!(t=this._events[e])||!t.callbacks.length)&&this._domListeners[e].removeListener()}_addEventListener(e,t,r){this.attach(e),pt().prototype._addEventListener.call(this,e,t,r)}_removeEventListener(e,t){pt().prototype._removeEventListener.call(this,e,t),this.detach(e)}_createDomListener(e){const t=r=>{this.fire(e,r)};return t.removeListener=()=>{this._domNode.removeEventListener(e,t,this._options),delete this._domListeners[e]},t}}function Sle(n){return n["data-ck-expando"]||(n["data-ck-expando"]=Br())}function pM(n,e){let t=Sle(n);for(const r of Object.keys(e).sort())e[r]&&(t+="-"+r);return t}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function xle(n){const e=[];let t=n;for(;t&&t.nodeType!=Node.DOCUMENT_NODE;)e.unshift(t),t=t.parentNode;return e}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Ale(n){return n instanceof HTMLTextAreaElement?n.value:n.innerHTML}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function vM(n){const e=n.ownerDocument.defaultView.getComputedStyle(n);return{top:parseInt(e.borderTopWidth,10),right:parseInt(e.borderRightWidth,10),bottom:parseInt(e.borderBottomWidth,10),left:parseInt(e.borderLeftWidth,10)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Ft(n){return Object.prototype.toString.call(n)=="[object Text]"}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function bg(n){return Object.prototype.toString.apply(n)=="[object Range]"}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function bM(n){return!n||!n.parentNode||n.offsetParent===he.document.body?null:n.offsetParent}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const yM=["top","right","bottom","left","width","height"];class De{constructor(e){const t=bg(e);if(Object.defineProperty(this,"_source",{value:e._source||e,writable:!0,enumerable:!1}),my(e)||t)if(t){const r=De.getDomRangeRects(e);nf(this,De.getBoundingRect(r))}else nf(this,e.getBoundingClientRect());else if(Jh(e)){const{innerWidth:r,innerHeight:i}=e;nf(this,{top:0,right:r,bottom:i,left:0,width:r,height:i})}else nf(this,e)}clone(){return new De(this)}moveTo(e,t){return this.top=t,this.right=e+this.width,this.bottom=t+this.height,this.left=e,this}moveBy(e,t){return this.top+=t,this.right+=e,this.left+=e,this.bottom+=t,this}getIntersection(e){const t={top:Math.max(this.top,e.top),right:Math.min(this.right,e.right),bottom:Math.min(this.bottom,e.bottom),left:Math.max(this.left,e.left),width:0,height:0};if(t.width=t.right-t.left,t.height=t.bottom-t.top,t.width<0||t.height<0)return null;{const r=new De(t);return r._source=this._source,r}}getIntersectionArea(e){const t=this.getIntersection(e);return t?t.getArea():0}getArea(){return this.width*this.height}getVisible(){const e=this._source;let t=this.clone();if(MA(e))return t;let r=e,i=e.parentNode||e.commonAncestorContainer,o;for(;i&&!MA(i);){const s=Tle(i)==="visible";r instanceof HTMLElement&&DA(r)==="absolute"&&(o=r);const a=DA(i);if(s||o&&(a==="relative"&&s||a!=="relative")){r=i,i=i.parentNode;continue}const l=new De(i),c=t.getIntersection(l);if(c)c.getArea()<t.getArea()&&(t=c);else return null;r=i,i=i.parentNode}return t}isEqual(e){for(const t of yM)if(this[t]!==e[t])return!1;return!0}contains(e){const t=this.getIntersection(e);return!!(t&&t.isEqual(e))}toAbsoluteRect(){const{scrollX:e,scrollY:t}=he.window,r=this.clone().moveBy(e,t);if(my(r._source)){const i=bM(r._source);i&&Ele(r,i)}return r}excludeScrollbarsAndBorders(){const e=this._source;let t,r,i;if(Jh(e))t=e.innerWidth-e.document.documentElement.clientWidth,r=e.innerHeight-e.document.documentElement.clientHeight,i=e.getComputedStyle(e.document.documentElement).direction;else{const o=vM(e);t=e.offsetWidth-e.clientWidth-o.left-o.right,r=e.offsetHeight-e.clientHeight-o.top-o.bottom,i=e.ownerDocument.defaultView.getComputedStyle(e).direction,this.left+=o.left,this.top+=o.top,this.right-=o.right,this.bottom-=o.bottom,this.width=this.right-this.left,this.height=this.bottom-this.top}return this.width-=t,i==="ltr"?this.right-=t:this.left+=t,this.height-=r,this.bottom-=r,this}static getDomRangeRects(e){const t=[],r=Array.from(e.getClientRects());if(r.length)for(const i of r)t.push(new De(i));else{let i=e.startContainer;Ft(i)&&(i=i.parentNode);const o=new De(i.getBoundingClientRect());o.right=o.left,o.width=0,t.push(o)}return t}static getBoundingRect(e){const t={left:Number.POSITIVE_INFINITY,top:Number.POSITIVE_INFINITY,right:Number.NEGATIVE_INFINITY,bottom:Number.NEGATIVE_INFINITY,width:0,height:0};let r=0;for(const i of e)r++,t.left=Math.min(t.left,i.left),t.top=Math.min(t.top,i.top),t.right=Math.max(t.right,i.right),t.bottom=Math.max(t.bottom,i.bottom);return r==0?null:(t.width=t.right-t.left,t.height=t.bottom-t.top,new De(t))}}function nf(n,e){for(const t of yM)n[t]=e[t]}function MA(n){return my(n)?n===n.ownerDocument.body:!1}function my(n){return n!==null&&typeof n=="object"&&n.nodeType===1&&typeof n.getBoundingClientRect=="function"}function DA(n){return n instanceof HTMLElement?n.ownerDocument.defaultView.getComputedStyle(n).position:"static"}function Tle(n){return n instanceof HTMLElement?n.ownerDocument.defaultView.getComputedStyle(n).overflow:"visible"}function Ele(n,e){const t=new De(e),r=vM(e);let i=0,o=0;i-=t.left,o-=t.top,i+=e.scrollLeft,o+=e.scrollTop,i-=r.left,o-=r.top,n.moveBy(i,o)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let nd=class Nt{constructor(e,t){Nt._observerInstance||Nt._createObserver(),this._element=e,this._callback=t,Nt._addElementCallback(e,t),Nt._observerInstance.observe(e)}get element(){return this._element}destroy(){Nt._deleteElementCallback(this._element,this._callback)}static _addElementCallback(e,t){Nt._elementCallbacks||(Nt._elementCallbacks=new Map);let r=Nt._elementCallbacks.get(e);r||(r=new Set,Nt._elementCallbacks.set(e,r)),r.add(t)}static _deleteElementCallback(e,t){const r=Nt._getElementCallbacks(e);r&&(r.delete(t),r.size||(Nt._elementCallbacks.delete(e),Nt._observerInstance.unobserve(e))),Nt._elementCallbacks&&!Nt._elementCallbacks.size&&(Nt._observerInstance=null,Nt._elementCallbacks=null)}static _getElementCallbacks(e){return Nt._elementCallbacks?Nt._elementCallbacks.get(e):null}static _createObserver(){Nt._observerInstance=new he.window.ResizeObserver(e=>{for(const t of e){const r=Nt._getElementCallbacks(t.target);if(r)for(const i of r)i(t)}})}};nd._observerInstance=null;nd._elementCallbacks=null;/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function BA(n,e){n instanceof HTMLTextAreaElement&&(n.value=e),n.innerHTML=e}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Al(n){return e=>e+n}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function vc(n){let e=0;for(;n.previousSibling;)n=n.previousSibling,e++;return e}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function wM(n,e,t){n.insertBefore(t,n.childNodes[e]||null)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Ec(n){return n&&n.nodeType===Node.COMMENT_NODE}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function _M(n){try{he.document.createAttribute(n)}catch{return!1}return!0}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Cs(n){return!!(n&&n.getClientRects&&n.getClientRects().length)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function yg({element:n,target:e,positions:t,limiter:r,fitInViewport:i,viewportOffsetConfig:o}){Wf(e)&&(e=e()),Wf(r)&&(r=r());const s=bM(n),a=kle(o),l=new De(n),c=NA(e,a);let u;if(!c||!a.getIntersection(c))return null;const d={targetRect:c,elementRect:l,positionedElementAncestor:s,viewportRect:a};if(!r&&!i)u=new CM(t[0],d);else{if(r){const f=NA(r,a);f&&(d.limiterRect=f)}u=Ple(t,d)}return u}function NA(n,e){const t=new De(n).getVisible();return t?t.getIntersection(e):null}function kle(n){n=Object.assign({top:0,bottom:0,left:0,right:0},n);const e=new De(he.window);return e.top+=n.top,e.height-=n.top,e.bottom-=n.bottom,e.height-=n.bottom,e}function Ple(n,e){const{elementRect:t}=e,r=t.getArea(),i=n.map(a=>new CM(a,e)).filter(a=>!!a.name);let o=0,s=null;for(const a of i){const{limiterIntersectionArea:l,viewportIntersectionArea:c}=a;if(l===r)return a;const u=c**2+l**2;u>o&&(o=u,s=a)}return s}class CM{constructor(e,t){const r=e(t.targetRect,t.elementRect,t.viewportRect,t.limiterRect);if(!r)return;const{left:i,top:o,name:s,config:a}=r;this.name=s,this.config=a,this._positioningFunctionCoordinates={left:i,top:o},this._options=t}get left(){return this._absoluteRect.left}get top(){return this._absoluteRect.top}get limiterIntersectionArea(){const e=this._options.limiterRect;return e?e.getIntersectionArea(this._rect):0}get viewportIntersectionArea(){return this._options.viewportRect.getIntersectionArea(this._rect)}get _rect(){return this._cachedRect?this._cachedRect:(this._cachedRect=this._options.elementRect.clone().moveTo(this._positioningFunctionCoordinates.left,this._positioningFunctionCoordinates.top),this._cachedRect)}get _absoluteRect(){return this._cachedAbsoluteRect?this._cachedAbsoluteRect:(this._cachedAbsoluteRect=this._rect.toAbsoluteRect(),this._cachedAbsoluteRect)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function LA(n){const e=n.parentNode;e&&e.removeChild(n)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Ile({target:n,viewportOffset:e=0,ancestorOffset:t=0,alignToTop:r,forceScroll:i}){const o=C0(n);let s=o,a=null;for(e=Mle(e);s;){let l;s==o?l=FA(n):l=FA(a),Rle({parent:l,getRect:()=>$A(n,s),alignToTop:r,ancestorOffset:t,forceScroll:i});const c=$A(n,s);if(Ole({window:s,rect:c,viewportOffset:e,alignToTop:r,forceScroll:i}),s.parent!=s){if(a=s.frameElement,s=s.parent,!a)return}else s=null}}function Ole({window:n,rect:e,alignToTop:t,forceScroll:r,viewportOffset:i}){const o=e.clone().moveBy(0,i.bottom),s=e.clone().moveBy(0,-i.top),a=new De(n).excludeScrollbarsAndBorders(),l=[s,o],c=t&&r,u=l.every(g=>a.contains(g));let{scrollX:d,scrollY:f}=n;const h=d,m=f;c?f-=a.top-e.top+i.top:u||(xM(s,a)?f-=a.top-e.top+i.top:SM(o,a)&&(t?f+=e.top-a.top-i.top:f+=e.bottom-a.bottom+i.bottom)),u||(AM(e,a)?d-=a.left-e.left+i.left:TM(e,a)&&(d+=e.right-a.right+i.right)),(d!=h||f!==m)&&n.scrollTo(d,f)}function Rle({parent:n,getRect:e,alignToTop:t,forceScroll:r,ancestorOffset:i=0,limiterElement:o}){const s=C0(n),a=t&&r;let l,c,u;const d=o||s.document.body;for(;n!=d;)c=e(),l=new De(n).excludeScrollbarsAndBorders(),u=l.contains(c),a?n.scrollTop-=l.top-c.top+i:u||(xM(c,l)?n.scrollTop-=l.top-c.top+i:SM(c,l)&&(t?n.scrollTop+=c.top-l.top-i:n.scrollTop+=c.bottom-l.bottom+i)),u||(AM(c,l)?n.scrollLeft-=l.left-c.left+i:TM(c,l)&&(n.scrollLeft+=c.right-l.right+i)),n=n.parentNode}function SM(n,e){return n.bottom>e.bottom}function xM(n,e){return n.top<e.top}function AM(n,e){return n.left<e.left}function TM(n,e){return n.right>e.right}function C0(n){return bg(n)?n.startContainer.ownerDocument.defaultView:n.ownerDocument.defaultView}function FA(n){if(bg(n)){let e=n.commonAncestorContainer;return Ft(e)&&(e=e.parentNode),e}else return n.parentNode}function $A(n,e){const t=C0(n),r=new De(n);if(t===e)return r;{let i=t;for(;i!=e;){const o=i.frameElement,s=new De(o).excludeScrollbarsAndBorders();r.moveBy(s.left,s.top),i=i.parent}}return r}function Mle(n){return typeof n=="number"?{top:n,bottom:n,left:n,right:n}:n}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Dle={ctrl:"⌃",cmd:"⌘",alt:"⌥",shift:"⇧"},Ble={ctrl:"Ctrl+",alt:"Alt+",shift:"Shift+"},VA={37:"←",38:"↑",39:"→",40:"↓",9:"⇥",33:"Page Up",34:"Page Down"},qe=Vle(),Nle=Object.fromEntries(Object.entries(qe).map(([n,e])=>{let t;return e in VA?t=VA[e]:t=n.charAt(0).toUpperCase()+n.slice(1),[e,t]}));function Za(n){let e;if(typeof n=="string"){if(e=qe[n.toLowerCase()],!e)throw new M("keyboard-unknown-key",null,{key:n})}else e=n.keyCode+(n.altKey?qe.alt:0)+(n.ctrlKey?qe.ctrl:0)+(n.shiftKey?qe.shift:0)+(n.metaKey?qe.cmd:0);return e}function rd(n){return typeof n=="string"&&(n=zle(n)),n.map(e=>typeof e=="string"?Fle(e):e).reduce((e,t)=>t+e,0)}function Qh(n){let e=rd(n);return Object.entries(Re.isMac||Re.isiOS?Dle:Ble).reduce((i,[o,s])=>(e&qe[o]&&(e&=~qe[o],i+=s),i),"")+(e?Nle[e]:"")}function Lle(n){return n==qe.arrowright||n==qe.arrowleft||n==qe.arrowup||n==qe.arrowdown}function S0(n,e){const t=e==="ltr";switch(n){case qe.arrowleft:return t?"left":"right";case qe.arrowright:return t?"right":"left";case qe.arrowup:return"up";case qe.arrowdown:return"down"}}function Fle(n){if(n.endsWith("!"))return Za(n.slice(0,-1));const e=Za(n);return(Re.isMac||Re.isiOS)&&e==qe.ctrl?qe.cmd:e}function $le(n,e){const t=S0(n,e);return t==="down"||t==="right"}function Vle(){const n={pageup:33,pagedown:34,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,backspace:8,delete:46,enter:13,space:32,esc:27,tab:9,ctrl:1114112,shift:2228224,alt:4456448,cmd:8912896};for(let e=65;e<=90;e++){const t=String.fromCharCode(e);n[t.toLowerCase()]=e}for(let e=48;e<=57;e++)n[e-48]=e;for(let e=112;e<=123;e++)n["f"+(e-111)]=e;return Object.assign(n,{"'":222,",":108,"-":109,".":110,"/":111,";":186,"=":187,"[":219,"\\":220,"]":221,"`":223}),n}function zle(n){return n.split("+").map(e=>e.trim())}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const jle=["ar","ara","dv","div","fa","per","fas","he","heb","ku","kur","ug","uig"];function zA(n){return jle.includes(n)?"rtl":"ltr"}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function nt(n){return Array.isArray(n)?n:[n]}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 *//* istanbul ignore else -- @preserve */he.window.CKEDITOR_TRANSLATIONS||(he.window.CKEDITOR_TRANSLATIONS={});function Wle(n,e,t=1,r){if(typeof t!="number")throw new M("translation-service-quantity-not-a-number",null,{quantity:t});const i=r||he.window.CKEDITOR_TRANSLATIONS,o=Gle(i);o===1&&(n=Object.keys(i)[0]);const s=e.id||e.string;if(o===0||!Ule(n,s,i))return t!==1?e.plural:e.string;const a=i[n].dictionary,l=i[n].getPluralForm||(d=>d===1?0:1),c=a[s];if(typeof c=="string")return c;const u=Number(l(t));return c[u]}function Hle(n){return Array.isArray(n)?n.reduce((e,t)=>iw(e,t)):n}function Ule(n,e,t){return!!t[n]&&!!t[n].dictionary[e]}function Gle(n){return Object.keys(n).length}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class qle{constructor({uiLanguage:e="en",contentLanguage:t,translations:r}={}){this.uiLanguage=e,this.contentLanguage=t||this.uiLanguage,this.uiLanguageDirection=zA(this.uiLanguage),this.contentLanguageDirection=zA(this.contentLanguage),this.translations=Hle(r),this.t=(i,o)=>this._t(i,o)}get language(){return console.warn("locale-deprecated-language-property: The Locale#language property has been deprecated and will be removed in the near future. Please use #uiLanguage and #contentLanguage properties instead."),this.uiLanguage}_t(e,t=[]){t=nt(t),typeof e=="string"&&(e={string:e});const i=!!e.plural?t[0]:1,o=Wle(this.uiLanguage,e,i,this.translations);return Kle(o,t)}}function Kle(n,e){return n.replace(/%(\d+)/g,(t,r)=>r<e.length?e[r]:t)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let Vn=class extends pt(){constructor(e={},t={}){super();const r=pr(e);if(r||(t=e),this._items=[],this._itemMap=new Map,this._idProperty=t.idProperty||"id",this._bindToExternalToInternalMap=new WeakMap,this._bindToInternalToExternalMap=new WeakMap,this._skippedIndexesFromExternal=[],r)for(const i of e)this._items.push(i),this._itemMap.set(this._getItemIdBeforeAdding(i),i)}get length(){return this._items.length}get first(){return this._items[0]||null}get last(){return this._items[this.length-1]||null}add(e,t){return this.addMany([e],t)}addMany(e,t){if(t===void 0)t=this._items.length;else if(t>this._items.length||t<0)throw new M("collection-add-item-invalid-index",this);let r=0;for(const i of e){const o=this._getItemIdBeforeAdding(i),s=t+r;this._items.splice(s,0,i),this._itemMap.set(o,i),this.fire("add",i,s),r++}return this.fire("change",{added:e,removed:[],index:t}),this}get(e){let t;if(typeof e=="string")t=this._itemMap.get(e);else if(typeof e=="number")t=this._items[e];else throw new M("collection-get-invalid-arg",this);return t||null}has(e){if(typeof e=="string")return this._itemMap.has(e);{const t=this._idProperty,r=e[t];return r&&this._itemMap.has(r)}}getIndex(e){let t;return typeof e=="string"?t=this._itemMap.get(e):t=e,t?this._items.indexOf(t):-1}remove(e){const[t,r]=this._remove(e);return this.fire("change",{added:[],removed:[t],index:r}),t}map(e,t){return this._items.map(e,t)}forEach(e,t){this._items.forEach(e,t)}find(e,t){return this._items.find(e,t)}filter(e,t){return this._items.filter(e,t)}clear(){this._bindToCollection&&(this.stopListening(this._bindToCollection),this._bindToCollection=null);const e=Array.from(this._items);for(;this.length;)this._remove(0);this.fire("change",{added:[],removed:e,index:0})}bindTo(e){if(this._bindToCollection)throw new M("collection-bind-to-rebind",this);return this._bindToCollection=e,{as:t=>{this._setUpBindToBinding(r=>new t(r))},using:t=>{typeof t=="function"?this._setUpBindToBinding(t):this._setUpBindToBinding(r=>r[t])}}}_setUpBindToBinding(e){const t=this._bindToCollection,r=(i,o,s)=>{const a=t._bindToCollection==this,l=t._bindToInternalToExternalMap.get(o);if(a&&l)this._bindToExternalToInternalMap.set(o,l),this._bindToInternalToExternalMap.set(l,o);else{const c=e(o);if(!c){this._skippedIndexesFromExternal.push(s);return}let u=s;for(const d of this._skippedIndexesFromExternal)s>d&&u--;for(const d of t._skippedIndexesFromExternal)u>=d&&u++;this._bindToExternalToInternalMap.set(o,c),this._bindToInternalToExternalMap.set(c,o),this.add(c,u);for(let d=0;d<t._skippedIndexesFromExternal.length;d++)u<=t._skippedIndexesFromExternal[d]&&t._skippedIndexesFromExternal[d]++}};for(const i of t)r(null,i,t.getIndex(i));this.listenTo(t,"add",r),this.listenTo(t,"remove",(i,o,s)=>{const a=this._bindToExternalToInternalMap.get(o);a&&this.remove(a),this._skippedIndexesFromExternal=this._skippedIndexesFromExternal.reduce((l,c)=>(s<c&&l.push(c-1),s>c&&l.push(c),l),[])})}_getItemIdBeforeAdding(e){const t=this._idProperty;let r;if(t in e){if(r=e[t],typeof r!="string")throw new M("collection-add-invalid-id",this);if(this.get(r))throw new M("collection-add-item-already-exists",this)}else e[t]=r=Br();return r}_remove(e){let t,r,i,o=!1;const s=this._idProperty;if(typeof e=="string"?(r=e,i=this._itemMap.get(r),o=!i,i&&(t=this._items.indexOf(i))):typeof e=="number"?(t=e,i=this._items[t],o=!i,i&&(r=i[s])):(i=e,r=i[s],t=this._items.indexOf(i),o=t==-1||!this._itemMap.get(r)),o)throw new M("collection-remove-404",this);this._items.splice(t,1),this._itemMap.delete(r);const a=this._bindToInternalToExternalMap.get(i);return this._bindToInternalToExternalMap.delete(i),this._bindToExternalToInternalMap.delete(a),this.fire("remove",i,t),[i,t]}[Symbol.iterator](){return this._items[Symbol.iterator]()}};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function ln(n){const e=n.next();return e.done?null:e.value}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ut extends nr(ct()){constructor(){super(),this._elements=new Set,this._nextEventLoopTimeout=null,this.set("isFocused",!1),this.set("focusedElement",null)}add(e){if(this._elements.has(e))throw new M("focustracker-add-element-already-exist",this);this.listenTo(e,"focus",()=>this._focus(e),{useCapture:!0}),this.listenTo(e,"blur",()=>this._blur(),{useCapture:!0}),this._elements.add(e)}remove(e){e===this.focusedElement&&this._blur(),this._elements.has(e)&&(this.stopListening(e),this._elements.delete(e))}destroy(){this.stopListening()}_focus(e){clearTimeout(this._nextEventLoopTimeout),this.focusedElement=e,this.isFocused=!0}_blur(){clearTimeout(this._nextEventLoopTimeout),this._nextEventLoopTimeout=setTimeout(()=>{this.focusedElement=null,this.isFocused=!1},0)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class mn{constructor(){this._listener=new(nr())}listenTo(e){this._listener.listenTo(e,"keydown",(t,r)=>{this._listener.fire("_keydown:"+Za(r),r)})}set(e,t,r={}){const i=rd(e),o=r.priority;this._listener.listenTo(this._listener,"_keydown:"+i,(s,a)=>{t(a,()=>{a.preventDefault(),a.stopPropagation(),s.stop()}),s.return=!0},{priority:o})}press(e){return!!this._listener.fire("_keydown:"+Za(e),e)}stopListening(e){this._listener.stopListening(e)}destroy(){this.stopListening()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Yle(n){const e=new Map;for(const t in n)e.set(t,n[t]);return e}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function to(n){return pr(n)?new Map(n):Yle(n)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Xle=1e4;function Zle(n,e,t,r){if(Math.max(e.length,n.length)>Xle)return n.slice(0,t).concat(e).concat(n.slice(t+r,n.length));{const i=Array.from(n);return i.splice(t,r,...e),i}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function x0(n,e){let t;function r(...i){r.cancel(),t=setTimeout(()=>n(...i),e)}return r.cancel=()=>{clearTimeout(t)},r}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Jle(n){function e(d){return d.length>=40&&d.length<=255?"VALID":"INVALID"}if(!n)return"INVALID";let t="";try{t=atob(n)}catch{return"INVALID"}const r=t.split("-"),i=r[0],o=r[1];if(!o)return e(n);try{atob(o)}catch{try{if(atob(i),!atob(i).length)return e(n)}catch{return e(n)}}if(i.length<40||i.length>255)return"INVALID";let s="";try{atob(i),s=atob(o)}catch{return"INVALID"}if(s.length!==8)return"INVALID";const a=Number(s.substring(0,4)),l=Number(s.substring(4,6))-1,c=Number(s.substring(6,8)),u=new Date(a,l,c);return u<lle||isNaN(Number(u))?"INVALID":"VALID"}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Qle(n){return!!n&&n.length==1&&/[\u0300-\u036f\u1ab0-\u1aff\u1dc0-\u1dff\u20d0-\u20ff\ufe20-\ufe2f]/.test(n)}function ece(n){return!!n&&n.length==1&&/[\ud800-\udbff]/.test(n)}function tce(n){return!!n&&n.length==1&&/[\udc00-\udfff]/.test(n)}function A0(n,e){return ece(n.charAt(e-1))&&tce(n.charAt(e))}function T0(n,e){return Qle(n.charAt(e))}const nce=rce();function EM(n,e){const t=String(n).matchAll(nce);return Array.from(t).some(r=>r.index<e&&e<r.index+r[0].length)}function rce(){const n=[new RegExp("\\p{Emoji}[\\u{E0020}-\\u{E007E}]+\\u{E007F}","u"),new RegExp("\\p{Emoji}\\u{FE0F}?\\u{20E3}","u"),new RegExp("\\p{Emoji}\\u{FE0F}","u"),new RegExp("(?=\\p{General_Category=Other_Symbol})\\p{Emoji}\\p{Emoji_Modifier}*","u")],e=new RegExp("\\p{Regional_Indicator}{2}","u").source,t="(?:"+n.map(i=>i.source).join("|")+")",r=`${e}|${t}(?:‍${t})*`;return new RegExp(r,"ug")}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class rr extends Vn{constructor(e=[]){super(e,{idProperty:"viewUid"}),this.on("add",(t,r,i)=>{this._renderViewIntoCollectionParent(r,i)}),this.on("remove",(t,r)=>{r.element&&this._parentElement&&r.element.remove()}),this._parentElement=null}destroy(){this.map(e=>e.destroy())}setParent(e){this._parentElement=e;for(const t of this)this._renderViewIntoCollectionParent(t)}delegate(...e){if(!e.length||!ice(e))throw new M("ui-viewcollection-delegate-wrong-events",this);return{to:t=>{for(const r of this)for(const i of e)r.delegate(i).to(t);this.on("add",(r,i)=>{for(const o of e)i.delegate(o).to(t)}),this.on("remove",(r,i)=>{for(const o of e)i.stopDelegating(o,t)})}}}_renderViewIntoCollectionParent(e,t){e.isRendered||e.render(),e.element&&this._parentElement&&this._parentElement.insertBefore(e.element,this._parentElement.children[t])}remove(e){return super.remove(e)}}function ice(n){return n.every(e=>typeof e=="string")}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const oce="http://www.w3.org/1999/xhtml";class Jn extends pt(){constructor(e){super(),Object.assign(this,WA(jA(e))),this._isRendered=!1,this._revertData=null}render(){const e=this._renderNode({intoFragment:!0});return this._isRendered=!0,e}apply(e){return this._revertData=GA(),this._renderNode({node:e,intoFragment:!1,isApplying:!0,revertData:this._revertData}),e}revert(e){if(!this._revertData)throw new M("ui-template-revert-not-applied",[this,e]);this._revertTemplateFromNode(e,this._revertData)}*getViews(){function*e(t){if(t.children)for(const r of t.children)em(r)?yield r:E0(r)&&(yield*e(r))}yield*e(this)}static bind(e,t){return{to(r,i){return new sce({eventNameOrFunction:r,attribute:r,observable:e,emitter:t,callback:i})},if(r,i,o){return new kM({observable:e,emitter:t,attribute:r,valueIfTrue:i,callback:o})}}}static extend(e,t){if(e._isRendered)throw new M("template-extend-render",[this,e]);RM(e,WA(jA(t)))}_renderNode(e){let t;if(e.node?t=this.tag&&this.text:t=this.tag?this.text:!this.text,t)throw new M("ui-template-wrong-syntax",this);return this.text?this._renderText(e):this._renderElement(e)}_renderElement(e){let t=e.node;return t||(t=e.node=document.createElementNS(this.ns||oce,this.tag)),this._renderAttributes(e),this._renderElementChildren(e),this._setUpListeners(e),t}_renderText(e){let t=e.node;return t?e.revertData.text=t.textContent:t=e.node=document.createTextNode(""),Rf(this.text)?this._bindToObservable({schema:this.text,updater:lce(t),data:e}):t.textContent=this.text.join(""),t}_renderAttributes(e){if(!this.attributes)return;const t=e.node,r=e.revertData;for(const i in this.attributes){const o=t.getAttribute(i),s=this.attributes[i];r&&(r.attributes[i]=o);const a=UA(s)?s[0].ns:null;if(Rf(s)){const l=UA(s)?s[0].value:s;r&&qA(i)&&l.unshift(o),this._bindToObservable({schema:l,updater:cce(t,i,a),data:e})}else if(i=="style"&&typeof s[0]!="string")this._renderStyleAttribute(s[0],e);else{r&&o&&qA(i)&&s.unshift(o);const l=s.map(c=>c&&(c.value||c)).reduce((c,u)=>c.concat(u),[]).reduce(OM,"");Ja(l)||t.setAttributeNS(a,i,l)}}}_renderStyleAttribute(e,t){const r=t.node;for(const i in e){const o=e[i];Rf(o)?this._bindToObservable({schema:[o],updater:uce(r,i),data:t}):r.style[i]=o}}_renderElementChildren(e){const t=e.node,r=e.intoFragment?document.createDocumentFragment():t,i=e.isApplying;let o=0;for(const s of this.children)if(k0(s)){if(!i){s.setParent(t);for(const a of s)r.appendChild(a.element)}}else if(em(s))i||(s.isRendered||s.render(),r.appendChild(s.element));else if(Io(s))r.appendChild(s);else if(i){const a=e.revertData,l=GA();a.children.push(l),s._renderNode({intoFragment:!1,node:r.childNodes[o++],isApplying:!0,revertData:l})}else r.appendChild(s.render());e.intoFragment&&t.appendChild(r)}_setUpListeners(e){if(this.eventListeners)for(const t in this.eventListeners){const r=this.eventListeners[t].map(i=>{const[o,s]=t.split("@");return i.activateDomEventListener(o,s,e)});e.revertData&&e.revertData.bindings.push(r)}}_bindToObservable({schema:e,updater:t,data:r}){const i=r.revertData;PM(e,t,r);const o=e.filter(s=>!Ja(s)).filter(s=>s.observable).map(s=>s.activateAttributeListener(e,t,r));i&&i.bindings.push(o)}_revertTemplateFromNode(e,t){for(const i of t.bindings)for(const o of i)o();if(t.text){e.textContent=t.text;return}const r=e;for(const i in t.attributes){const o=t.attributes[i];o===null?r.removeAttribute(i):r.setAttribute(i,o)}for(let i=0;i<t.children.length;++i)this._revertTemplateFromNode(r.childNodes[i],t.children[i])}}class id{constructor(e){this.attribute=e.attribute,this.observable=e.observable,this.emitter=e.emitter,this.callback=e.callback}getValue(e){const t=this.observable[this.attribute];return this.callback?this.callback(t,e):t}activateAttributeListener(e,t,r){const i=()=>PM(e,t,r);return this.emitter.listenTo(this.observable,`change:${this.attribute}`,i),()=>{this.emitter.stopListening(this.observable,`change:${this.attribute}`,i)}}}class sce extends id{constructor(e){super(e),this.eventNameOrFunction=e.eventNameOrFunction}activateDomEventListener(e,t,r){const i=(o,s)=>{(!t||s.target.matches(t))&&(typeof this.eventNameOrFunction=="function"?this.eventNameOrFunction(s):this.observable.fire(this.eventNameOrFunction,s))};return this.emitter.listenTo(r.node,e,i),()=>{this.emitter.stopListening(r.node,e,i)}}}class kM extends id{constructor(e){super(e),this.valueIfTrue=e.valueIfTrue}getValue(e){const t=super.getValue(e);return Ja(t)?!1:this.valueIfTrue||!0}}function Rf(n){return n?(n.value&&(n=n.value),Array.isArray(n)?n.some(Rf):n instanceof id):!1}function ace(n,e){return n.map(t=>t instanceof id?t.getValue(e):t)}function PM(n,e,{node:t}){const r=ace(n,t);let i;n.length==1&&n[0]instanceof kM?i=r[0]:i=r.reduce(OM,""),Ja(i)?e.remove():e.set(i)}function lce(n){return{set(e){n.textContent=e},remove(){n.textContent=""}}}function cce(n,e,t){return{set(r){n.setAttributeNS(t,e,r)},remove(){n.removeAttributeNS(t,e)}}}function uce(n,e){return{set(t){n.style[e]=t},remove(){n.style[e]=null}}}function jA(n){return rw(n,t=>{if(t&&(t instanceof id||E0(t)||em(t)||k0(t)))return t})}function WA(n){if(typeof n=="string"?n=hce(n):n.text&&mce(n),n.on&&(n.eventListeners=fce(n.on),delete n.on),!n.text){n.attributes&&dce(n.attributes);const e=[];if(n.children)if(k0(n.children))e.push(n.children);else for(const t of n.children)E0(t)||em(t)||Io(t)?e.push(t):e.push(new Jn(t));n.children=e}return n}function dce(n){for(const e in n)n[e].value&&(n[e].value=nt(n[e].value)),IM(n,e)}function fce(n){for(const e in n)IM(n,e);return n}function hce(n){return{text:[n]}}function mce(n){n.text=nt(n.text)}function IM(n,e){n[e]=nt(n[e])}function OM(n,e){return Ja(e)?n:Ja(n)?e:`${n} ${e}`}function HA(n,e){for(const t in e)n[t]?n[t].push(...e[t]):n[t]=e[t]}function RM(n,e){if(e.attributes&&(n.attributes||(n.attributes={}),HA(n.attributes,e.attributes)),e.eventListeners&&(n.eventListeners||(n.eventListeners={}),HA(n.eventListeners,e.eventListeners)),e.text&&n.text.push(...e.text),e.children&&e.children.length){if(n.children.length!=e.children.length)throw new M("ui-template-extend-children-mismatch",n);let t=0;for(const r of e.children)RM(n.children[t++],r)}}function Ja(n){return!n&&n!==0}function em(n){return n instanceof be}function E0(n){return n instanceof Jn}function k0(n){return n instanceof rr}function UA(n){return ri(n[0])&&n[0].ns}function GA(){return{children:[],bindings:[],attributes:{}}}function qA(n){return n=="class"||n=="style"}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let be=class extends nr(ct()){constructor(e){super(),this.element=null,this.isRendered=!1,this.locale=e,this.t=e&&e.t,this._viewCollections=new Vn,this._unboundChildren=this.createCollection(),this._viewCollections.on("add",(t,r)=>{r.locale=e,r.t=e&&e.t}),this.decorate("render")}get bindTemplate(){return this._bindTemplate?this._bindTemplate:this._bindTemplate=Jn.bind(this,this)}createCollection(e){const t=new rr(e);return this._viewCollections.add(t),t}registerChild(e){pr(e)||(e=[e]);for(const t of e)this._unboundChildren.add(t)}deregisterChild(e){pr(e)||(e=[e]);for(const t of e)this._unboundChildren.remove(t)}setTemplate(e){this.template=new Jn(e)}extendTemplate(e){Jn.extend(this.template,e)}render(){if(this.isRendered)throw new M("ui-view-render-already-rendered",this);this.template&&(this.element=this.template.render(),this.registerChild(this.template.getViews())),this.isRendered=!0}destroy(){this.stopListening(),this._viewCollections.map(e=>e.destroy()),this.template&&this.template._revertData&&this.template.revert(this.element)}};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function od({emitter:n,activator:e,callback:t,contextElements:r}){n.listenTo(document,"mousedown",(i,o)=>{if(!e())return;const s=typeof o.composedPath=="function"?o.composedPath():[],a=typeof r=="function"?r():r;for(const l of a)if(l.contains(o.target)||s.includes(l))return;t()})}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function wg(n){class e extends n{disableCssTransitions(){this._isCssTransitionsDisabled=!0}enableCssTransitions(){this._isCssTransitionsDisabled=!1}constructor(...r){super(...r),this.set("_isCssTransitionsDisabled",!1),this.initializeCssTransitionDisablerMixin()}initializeCssTransitionDisablerMixin(){this.extendTemplate({attributes:{class:[this.bindTemplate.if("_isCssTransitionsDisabled","ck-transitions-disabled")]}})}}return e}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function sd({view:n}){n.listenTo(n.element,"submit",(e,t)=>{t.preventDefault(),n.fire("submit")},{useCapture:!0})}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function MM({keystrokeHandler:n,focusTracker:e,gridItems:t,numberOfColumns:r,uiLanguageDirection:i}){const o=typeof r=="number"?()=>r:r;n.set("arrowright",s((c,u)=>i==="rtl"?l(c,u.length):a(c,u.length))),n.set("arrowleft",s((c,u)=>i==="rtl"?a(c,u.length):l(c,u.length))),n.set("arrowup",s((c,u)=>{let d=c-o();return d<0&&(d=c+o()*Math.floor(u.length/o()),d>u.length-1&&(d-=o())),d})),n.set("arrowdown",s((c,u)=>{let d=c+o();return d>u.length-1&&(d=c%o()),d}));function s(c){return u=>{const d=t.find(m=>m.element===e.focusedElement),f=t.getIndex(d),h=c(f,t);t.get(h).focus(),u.stopPropagation(),u.preventDefault()}}function a(c,u){return c===u-1?0:c+1}function l(c,u){return c===0?u-1:c-1}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class W extends ct(){constructor(e){super(),this._disableStack=new Set,this.editor=e,this.set("isEnabled",!0)}forceDisabled(e){this._disableStack.add(e),this._disableStack.size==1&&(this.on("set:isEnabled",KA,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(e){this._disableStack.delete(e),this._disableStack.size==0&&(this.off("set:isEnabled",KA),this.isEnabled=!0)}destroy(){this.stopListening()}static get isContextPlugin(){return!1}}function KA(n){n.return=!1,n.stop()}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Me extends ct(){constructor(e){super(),this.editor=e,this.set("value",void 0),this.set("isEnabled",!1),this._affectsData=!0,this._isEnabledBasedOnSelection=!0,this._disableStack=new Set,this.decorate("execute"),this.listenTo(this.editor.model.document,"change",()=>{this.refresh()}),this.listenTo(e,"change:isReadOnly",()=>{this.refresh()}),this.on("set:isEnabled",t=>{if(!this.affectsData)return;const r=e.model.document.selection,o=!(r.getFirstPosition().root.rootName=="$graveyard")&&e.model.canEditAt(r);(e.isReadOnly||this._isEnabledBasedOnSelection&&!o)&&(t.return=!1,t.stop())},{priority:"highest"}),this.on("execute",t=>{this.isEnabled||t.stop()},{priority:"high"})}get affectsData(){return this._affectsData}set affectsData(e){this._affectsData=e}refresh(){this.isEnabled=!0}forceDisabled(e){this._disableStack.add(e),this._disableStack.size==1&&(this.on("set:isEnabled",YA,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(e){this._disableStack.delete(e),this._disableStack.size==0&&(this.off("set:isEnabled",YA),this.refresh())}execute(...e){}destroy(){this.stopListening()}}function YA(n){n.return=!1,n.stop()}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class XA extends Me{constructor(){super(...arguments),this._childCommandsDefinitions=[]}refresh(){}execute(...e){const t=this._getFirstEnabledCommand();return!!t&&t.execute(e)}registerChildCommand(e,t={}){sM(this._childCommandsDefinitions,{command:e,priority:t.priority||"normal"}),e.on("change:isEnabled",()=>this._checkEnabled()),this._checkEnabled()}_checkEnabled(){this.isEnabled=!!this._getFirstEnabledCommand()}_getFirstEnabledCommand(){const e=this._childCommandsDefinitions.find(({command:t})=>t.isEnabled);return e&&e.command}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class DM extends pt(){constructor(e,t=[],r=[]){super(),this._plugins=new Map,this._context=e,this._availablePlugins=new Map;for(const i of t)i.pluginName&&this._availablePlugins.set(i.pluginName,i);this._contextPlugins=new Map;for(const[i,o]of r)this._contextPlugins.set(i,o),this._contextPlugins.set(o,i),i.pluginName&&this._availablePlugins.set(i.pluginName,i)}*[Symbol.iterator](){for(const e of this._plugins)typeof e[0]=="function"&&(yield e)}get(e){const t=this._plugins.get(e);if(!t){let r=e;throw typeof e=="function"&&(r=e.pluginName||e.name),new M("plugincollection-plugin-not-loaded",this._context,{plugin:r})}return t}has(e){return this._plugins.has(e)}init(e,t=[],r=[]){const i=this,o=this._context;h(e),g(e);const s=e.filter(S=>!d(S,t)),a=[...m(s)];w(a,r);const l=C(a);return A(l,"init").then(()=>A(l,"afterInit")).then(()=>l);function c(S){return typeof S=="function"}function u(S){return c(S)&&!!S.isContextPlugin}function d(S,_){return _.some(v=>v===S||f(S)===v||f(v)===S)}function f(S){return c(S)?S.pluginName||S.name:S}function h(S,_=new Set){S.forEach(v=>{c(v)&&(_.has(v)||(_.add(v),v.pluginName&&!i._availablePlugins.has(v.pluginName)&&i._availablePlugins.set(v.pluginName,v),v.requires&&h(v.requires,_)))})}function m(S,_=new Set){return S.map(v=>c(v)?v:i._availablePlugins.get(v)).reduce((v,x)=>_.has(x)?v:(_.add(x),x.requires&&(g(x.requires,x),m(x.requires,_).forEach(T=>v.add(T))),v.add(x)),new Set)}function g(S,_=null){S.map(v=>c(v)?v:i._availablePlugins.get(v)||v).forEach(v=>{p(v,_),b(v,_),y(v,_)})}function p(S,_){if(!c(S))throw _?new M("plugincollection-soft-required",o,{missingPlugin:S,requiredBy:f(_)}):new M("plugincollection-plugin-not-found",o,{plugin:S})}function b(S,_){if(u(_)&&!u(S))throw new M("plugincollection-context-required",o,{plugin:f(S),requiredBy:f(_)})}function y(S,_){if(_&&d(S,t))throw new M("plugincollection-required",o,{plugin:f(S),requiredBy:f(_)})}function C(S){return S.map(_=>{let v=i._contextPlugins.get(_);return v=v||new _(o),i._add(_,v),v})}function A(S,_){return S.reduce((v,x)=>!x[_]||i._contextPlugins.has(x)?v:v.then(x[_].bind(x)),Promise.resolve())}function w(S,_){for(const v of _){if(typeof v!="function")throw new M("plugincollection-replace-plugin-invalid-type",null,{pluginItem:v});const x=v.pluginName;if(!x)throw new M("plugincollection-replace-plugin-missing-name",null,{pluginItem:v});if(v.requires&&v.requires.length)throw new M("plugincollection-plugin-for-replacing-cannot-have-dependencies",null,{pluginName:x});const T=i._availablePlugins.get(x);if(!T)throw new M("plugincollection-plugin-for-replacing-not-exist",null,{pluginName:x});const E=S.indexOf(T);if(E===-1){if(i._contextPlugins.has(T))return;throw new M("plugincollection-plugin-for-replacing-not-loaded",null,{pluginName:x})}if(T.requires&&T.requires.length)throw new M("plugincollection-replaced-plugin-cannot-have-dependencies",null,{pluginName:x});S.splice(E,1,v),i._availablePlugins.set(x,v)}}}destroy(){const e=[];for(const[,t]of this)typeof t.destroy=="function"&&!this._contextPlugins.has(t)&&e.push(t.destroy());return Promise.all(e)}_add(e,t){this._plugins.set(e,t);const r=e.pluginName;if(r){if(this._plugins.has(r))throw new M("plugincollection-plugin-name-conflict",null,{pluginName:r,plugin1:this._plugins.get(r).constructor,plugin2:e});this._plugins.set(r,t)}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class BM{constructor(e){this._contextOwner=null;const{translations:t,...r}=e||{};this.config=new mM(r,this.constructor.defaultConfig);const i=this.constructor.builtinPlugins;this.config.define("plugins",i),this.plugins=new DM(this,i);const o=this.config.get("language")||{};this.locale=new qle({uiLanguage:typeof o=="string"?o:o.ui,contentLanguage:this.config.get("language.content"),translations:t}),this.t=this.locale.t,this.editors=new Vn}initPlugins(){const e=this.config.get("plugins")||[],t=this.config.get("substitutePlugins")||[];for(const r of e.concat(t)){if(typeof r!="function")throw new M("context-initplugins-constructor-only",null,{Plugin:r});if(r.isContextPlugin!==!0)throw new M("context-initplugins-invalid-plugin",null,{Plugin:r})}return this.plugins.init(e,[],t)}destroy(){return Promise.all(Array.from(this.editors,e=>e.destroy())).then(()=>this.plugins.destroy())}_addEditor(e,t){if(this._contextOwner)throw new M("context-addeditor-private-context");this.editors.add(e),t&&(this._contextOwner=e)}_removeEditor(e){return this.editors.has(e)&&this.editors.remove(e),this._contextOwner===e?this.destroy():Promise.resolve()}_getEditorConfig(){const e={};for(const t of this.config.names())["plugins","removePlugins","extraPlugins"].includes(t)||(e[t]=this.config.get(t));return e}static create(e){return new Promise(t=>{const r=new this(e);t(r.initPlugins().then(()=>r))})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class NM extends ct(){constructor(e){super(),this.context=e}destroy(){this.stopListening()}static get isContextPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Mf=new WeakMap;let ZA=!1;function LM({view:n,element:e,text:t,isDirectHost:r=!0,keepOnFocus:i=!1}){const o=n.document;Mf.has(o)||(Mf.set(o,new Map),o.registerPostFixer(a=>Up(o,a)),o.on("change:isComposing",()=>{n.change(a=>Up(o,a))},{priority:"high"})),e.is("editableElement")&&e.on("change:placeholder",(a,l,c)=>{s(c)}),e.placeholder?s(e.placeholder):t&&s(t),t&&yce();function s(a){Mf.get(o).set(e,{text:a,isDirectHost:r,keepOnFocus:i,hostElement:r?e:null}),n.change(l=>Up(o,l))}}function gce(n,e){return e.hasClass("ck-placeholder")?!1:(n.addClass("ck-placeholder",e),!0)}function pce(n,e){return e.hasClass("ck-placeholder")?(n.removeClass("ck-placeholder",e),!0):!1}function vce(n,e){if(!n.isAttached()||Array.from(n.getChildren()).some(s=>!s.is("uiElement")))return!1;const r=n.document,o=r.selection.anchor;return r.isComposing&&o&&o.parent===n?!1:e||!r.isFocused?!0:!!o&&o.parent!==n}function Up(n,e){const t=Mf.get(n),r=[];let i=!1;for(const[o,s]of t)s.isDirectHost&&(r.push(o),JA(e,o,s)&&(i=!0));for(const[o,s]of t){if(s.isDirectHost)continue;const a=bce(o);a&&(r.includes(a)||(s.hostElement=a,JA(e,o,s)&&(i=!0)))}return i}function JA(n,e,t){const{text:r,isDirectHost:i,hostElement:o}=t;let s=!1;return o.getAttribute("data-placeholder")!==r&&(n.setAttribute("data-placeholder",r,o),s=!0),(i||e.childCount==1)&&vce(o,t.keepOnFocus)?gce(n,o)&&(s=!0):pce(n,o)&&(s=!0),s}function bce(n){if(n.childCount){const e=n.getChild(0);if(e.is("element")&&!e.is("uiElement")&&!e.is("attributeElement"))return e}return null}function yce(){ZA||Ye("enableplaceholder-deprecated-text-option"),ZA=!0}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let Ds=class{is(){throw new Error("is() method is abstract")}};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let Bs=class extends pt(Ds){constructor(e){super(),this.document=e,this.parent=null}get index(){let e;if(!this.parent)return null;if((e=this.parent.getChildIndex(this))==-1)throw new M("view-node-not-found-in-parent",this);return e}get nextSibling(){const e=this.index;return e!==null&&this.parent.getChild(e+1)||null}get previousSibling(){const e=this.index;return e!==null&&this.parent.getChild(e-1)||null}get root(){let e=this;for(;e.parent;)e=e.parent;return e}isAttached(){return this.root.is("rootElement")}getPath(){const e=[];let t=this;for(;t.parent;)e.unshift(t.index),t=t.parent;return e}getAncestors(e={}){const t=[];let r=e.includeSelf?this:this.parent;for(;r;)t[e.parentFirst?"push":"unshift"](r),r=r.parent;return t}getCommonAncestor(e,t={}){const r=this.getAncestors(t),i=e.getAncestors(t);let o=0;for(;r[o]==i[o]&&r[o];)o++;return o===0?null:r[o-1]}isBefore(e){if(this==e||this.root!==e.root)return!1;const t=this.getPath(),r=e.getPath(),i=Tn(t,r);switch(i){case"prefix":return!0;case"extension":return!1;default:return t[i]<r[i]}}isAfter(e){return this==e||this.root!==e.root?!1:!this.isBefore(e)}_remove(){this.parent._removeChildren(this.index)}_fireChange(e,t){this.fire(`change:${e}`,t),this.parent&&this.parent._fireChange(e,t)}toJSON(){const e=tI(this);return delete e.parent,e}};Bs.prototype.is=function(n){return n==="node"||n==="view:node"};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let kt=class gy extends Bs{constructor(e,t){super(e),this._textData=t}get data(){return this._textData}get _data(){return this.data}set _data(e){this._fireChange("text",this),this._textData=e}isSimilar(e){return e instanceof gy?this===e||this.data===e.data:!1}_clone(){return new gy(this.document,this.data)}};kt.prototype.is=function(n){return n==="$text"||n==="view:$text"||n==="text"||n==="view:text"||n==="node"||n==="view:node"};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let gi=class extends Ds{constructor(e,t,r){if(super(),this.textNode=e,t<0||t>e.data.length)throw new M("view-textproxy-wrong-offsetintext",this);if(r<0||t+r>e.data.length)throw new M("view-textproxy-wrong-length",this);this.data=e.data.substring(t,t+r),this.offsetInText=t}get offsetSize(){return this.data.length}get isPartial(){return this.data.length!==this.textNode.data.length}get parent(){return this.textNode.parent}get root(){return this.textNode.root}get document(){return this.textNode.document}getAncestors(e={}){const t=[];let r=e.includeSelf?this.textNode:this.parent;for(;r!==null;)t[e.parentFirst?"push":"unshift"](r),r=r.parent;return t}};gi.prototype.is=function(n){return n==="$textProxy"||n==="view:$textProxy"||n==="textProxy"||n==="view:textProxy"};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ss{constructor(...e){this._patterns=[],this.add(...e)}add(...e){for(let t of e)(typeof t=="string"||t instanceof RegExp)&&(t={name:t}),this._patterns.push(t)}match(...e){for(const t of e)for(const r of this._patterns){const i=QA(t,r);if(i)return{element:t,pattern:r,match:i}}return null}matchAll(...e){const t=[];for(const r of e)for(const i of this._patterns){const o=QA(r,i);o&&t.push({element:r,pattern:i,match:o})}return t.length>0?t:null}getElementName(){if(this._patterns.length!==1)return null;const e=this._patterns[0],t=e.name;return typeof e!="function"&&t&&!(t instanceof RegExp)?t:null}}function QA(n,e){if(typeof e=="function")return e(n);const t={};return e.name&&(t.name=wce(e.name,n.name),!t.name)||e.attributes&&(t.attributes=xce(e.attributes,n),!t.attributes)||e.classes&&(t.classes=Ace(e.classes,n),!t.classes)||e.styles&&(t.styles=Tce(e.styles,n),!t.styles)?null:t}function wce(n,e){return n instanceof RegExp?!!e.match(n):n===e}function P0(n,e,t){const r=_ce(n),i=Array.from(e),o=[];if(r.forEach(([s,a])=>{i.forEach(l=>{Cce(s,l)&&Sce(a,l,t)&&o.push(l)})}),!(!r.length||o.length<r.length))return o}function _ce(n){return Array.isArray(n)?n.map(e=>Er(e)?((e.key===void 0||e.value===void 0)&&Ye("matcher-pattern-missing-key-or-value",e),[e.key,e.value]):[e,!0]):Er(n)?Object.entries(n):[[n,!0]]}function Cce(n,e){return n===!0||n===e||n instanceof RegExp&&e.match(n)}function Sce(n,e,t){if(n===!0)return!0;const r=t(e);return n===r||n instanceof RegExp&&!!String(r).match(n)}function xce(n,e){const t=new Set(e.getAttributeKeys());return Er(n)?(n.style!==void 0&&Ye("matcher-pattern-deprecated-attributes-style-key",n),n.class!==void 0&&Ye("matcher-pattern-deprecated-attributes-class-key",n)):(t.delete("style"),t.delete("class")),P0(n,t,r=>e.getAttribute(r))}function Ace(n,e){return P0(n,e.getClassNames(),()=>{})}function Tce(n,e){return P0(n,e.getStyleNames(!0),t=>e.getStyle(t))}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class tm{constructor(e){this._styles={},this._styleProcessor=e}get isEmpty(){return!Object.entries(this._styles).length}get size(){return this.isEmpty?0:this.getStyleNames().length}setTo(e){this.clear();const t=kce(e);for(const[r,i]of t)this._styleProcessor.toNormalizedForm(r,i,this._styles)}has(e){if(this.isEmpty)return!1;const r=this._styleProcessor.getReducedForm(e,this._styles).find(([i])=>i===e);return Array.isArray(r)}set(e,t){if(ri(e))for(const[r,i]of Object.entries(e))this._styleProcessor.toNormalizedForm(r,i,this._styles);else this._styleProcessor.toNormalizedForm(e,t,this._styles)}remove(e){const t=py(e);qL(this._styles,t),delete this._styles[e],this._cleanEmptyObjectsOnPath(t)}getNormalized(e){return this._styleProcessor.getNormalized(e,this._styles)}toString(){return this.isEmpty?"":this.getStylesEntries().map(e=>e.join(":")).sort().join(";")+";"}getAsString(e){if(this.isEmpty)return;if(this._styles[e]&&!ri(this._styles[e]))return this._styles[e];const r=this._styleProcessor.getReducedForm(e,this._styles).find(([i])=>i===e);if(Array.isArray(r))return r[1]}getStyleNames(e=!1){return this.isEmpty?[]:e?this._styleProcessor.getStyleNames(this._styles):this.getStylesEntries().map(([r])=>r)}clear(){this._styles={}}getStylesEntries(){const e=[],t=Object.keys(this._styles);for(const r of t)e.push(...this._styleProcessor.getReducedForm(r,this._styles));return e}_cleanEmptyObjectsOnPath(e){const t=e.split(".");if(!(t.length>1))return;const i=t.splice(0,t.length-1).join("."),o=Fc(this._styles,i);if(!o)return;!Object.keys(o).length&&this.remove(i)}}class Ece{constructor(){this._normalizers=new Map,this._extractors=new Map,this._reducers=new Map,this._consumables=new Map}toNormalizedForm(e,t,r){if(ri(t)){Gp(r,py(e),t);return}if(this._normalizers.has(e)){const i=this._normalizers.get(e),{path:o,value:s}=i(t);Gp(r,o,s)}else Gp(r,e,t)}getNormalized(e,t){if(!e)return iw({},t);if(t[e]!==void 0)return t[e];if(this._extractors.has(e)){const r=this._extractors.get(e);if(typeof r=="string")return Fc(t,r);const i=r(e,t);if(i)return i}return Fc(t,py(e))}getReducedForm(e,t){const r=this.getNormalized(e,t);return r===void 0?[]:this._reducers.has(e)?this._reducers.get(e)(r):[[e,r]]}getStyleNames(e){const t=Array.from(this._consumables.keys()).filter(i=>{const o=this.getNormalized(i,e);return o&&typeof o=="object"?Object.keys(o).length:o}),r=new Set([...t,...Object.keys(e)]);return Array.from(r)}getRelatedStyles(e){return this._consumables.get(e)||[]}setNormalizer(e,t){this._normalizers.set(e,t)}setExtractor(e,t){this._extractors.set(e,t)}setReducer(e,t){this._reducers.set(e,t)}setStyleRelation(e,t){this._mapStyleNames(e,t);for(const r of t)this._mapStyleNames(r,[e])}_mapStyleNames(e,t){this._consumables.has(e)||this._consumables.set(e,[]),this._consumables.get(e).push(...t)}}function kce(n){let e=null,t=0,r=0,i=null;const o=new Map;if(n==="")return o;n.charAt(n.length-1)!=";"&&(n=n+";");for(let s=0;s<n.length;s++){const a=n.charAt(s);if(e===null)switch(a){case":":i||(i=n.substr(t,s-t),r=s+1);break;case'"':case"'":e=a;break;case";":{const l=n.substr(r,s-r);i&&o.set(i.trim(),l.trim()),i=null,t=s+1;break}}else a===e&&(e=null)}return o}function py(n){return n.replace("-",".")}function Gp(n,e,t){let r=t;ri(t)&&(r=iw({},Fc(n,e),t)),eI(n,e,r)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let ii=class FM extends Bs{constructor(e,t,r,i){if(super(e),this._unsafeAttributesToRender=[],this._customProperties=new Map,this.name=t,this._attrs=Pce(r),this._children=[],i&&this._insertChild(0,i),this._classes=new Set,this._attrs.has("class")){const o=this._attrs.get("class");eT(this._classes,o),this._attrs.delete("class")}this._styles=new tm(this.document.stylesProcessor),this._attrs.has("style")&&(this._styles.setTo(this._attrs.get("style")),this._attrs.delete("style"))}get childCount(){return this._children.length}get isEmpty(){return this._children.length===0}getChild(e){return this._children[e]}getChildIndex(e){return this._children.indexOf(e)}getChildren(){return this._children[Symbol.iterator]()}*getAttributeKeys(){this._classes.size>0&&(yield"class"),this._styles.isEmpty||(yield"style"),yield*this._attrs.keys()}*getAttributes(){yield*this._attrs.entries(),this._classes.size>0&&(yield["class",this.getAttribute("class")]),this._styles.isEmpty||(yield["style",this.getAttribute("style")])}getAttribute(e){if(e=="class")return this._classes.size>0?[...this._classes].join(" "):void 0;if(e=="style"){const t=this._styles.toString();return t==""?void 0:t}return this._attrs.get(e)}hasAttribute(e){return e=="class"?this._classes.size>0:e=="style"?!this._styles.isEmpty:this._attrs.has(e)}isSimilar(e){if(!(e instanceof FM))return!1;if(this===e)return!0;if(this.name!=e.name||this._attrs.size!==e._attrs.size||this._classes.size!==e._classes.size||this._styles.size!==e._styles.size)return!1;for(const[t,r]of this._attrs)if(!e._attrs.has(t)||e._attrs.get(t)!==r)return!1;for(const t of this._classes)if(!e._classes.has(t))return!1;for(const t of this._styles.getStyleNames())if(!e._styles.has(t)||e._styles.getAsString(t)!==this._styles.getAsString(t))return!1;return!0}hasClass(...e){for(const t of e)if(!this._classes.has(t))return!1;return!0}getClassNames(){return this._classes.keys()}getStyle(e){return this._styles.getAsString(e)}getNormalizedStyle(e){return this._styles.getNormalized(e)}getStyleNames(e){return this._styles.getStyleNames(e)}hasStyle(...e){for(const t of e)if(!this._styles.has(t))return!1;return!0}findAncestor(...e){const t=new Ss(...e);let r=this.parent;for(;r&&!r.is("documentFragment");){if(t.match(r))return r;r=r.parent}return null}getCustomProperty(e){return this._customProperties.get(e)}*getCustomProperties(){yield*this._customProperties.entries()}getIdentity(){const e=Array.from(this._classes).sort().join(","),t=this._styles.toString(),r=Array.from(this._attrs).map(i=>`${i[0]}="${i[1]}"`).sort().join(" ");return this.name+(e==""?"":` class="${e}"`)+(t?` style="${t}"`:"")+(r==""?"":` ${r}`)}shouldRenderUnsafeAttribute(e){return this._unsafeAttributesToRender.includes(e)}_clone(e=!1){const t=[];if(e)for(const i of this.getChildren())t.push(i._clone(e));const r=new this.constructor(this.document,this.name,this._attrs,t);return r._classes=new Set(this._classes),r._styles.set(this._styles.getNormalized()),r._customProperties=new Map(this._customProperties),r.getFillerOffset=this.getFillerOffset,r._unsafeAttributesToRender=this._unsafeAttributesToRender,r}_appendChild(e){return this._insertChild(this.childCount,e)}_insertChild(e,t){this._fireChange("children",this);let r=0;const i=Ice(this.document,t);for(const o of i)o.parent!==null&&o._remove(),o.parent=this,o.document=this.document,this._children.splice(e,0,o),e++,r++;return r}_removeChildren(e,t=1){this._fireChange("children",this);for(let r=e;r<e+t;r++)this._children[r].parent=null;return this._children.splice(e,t)}_setAttribute(e,t){const r=String(t);this._fireChange("attributes",this),e=="class"?eT(this._classes,r):e=="style"?this._styles.setTo(r):this._attrs.set(e,r)}_removeAttribute(e){return this._fireChange("attributes",this),e=="class"?this._classes.size>0?(this._classes.clear(),!0):!1:e=="style"?this._styles.isEmpty?!1:(this._styles.clear(),!0):this._attrs.delete(e)}_addClass(e){this._fireChange("attributes",this);for(const t of nt(e))this._classes.add(t)}_removeClass(e){this._fireChange("attributes",this);for(const t of nt(e))this._classes.delete(t)}_setStyle(e,t){this._fireChange("attributes",this),typeof e!="string"?this._styles.set(e):this._styles.set(e,t)}_removeStyle(e){this._fireChange("attributes",this);for(const t of nt(e))this._styles.remove(t)}_setCustomProperty(e,t){this._customProperties.set(e,t)}_removeCustomProperty(e){return this._customProperties.delete(e)}};ii.prototype.is=function(n,e){return e?e===this.name&&(n==="element"||n==="view:element"):n==="element"||n==="view:element"||n==="node"||n==="view:node"};function Pce(n){const e=to(n);for(const[t,r]of e)r===null?e.delete(t):typeof r!="string"&&e.set(t,String(r));return e}function eT(n,e){const t=e.split(/\s+/);n.clear(),t.forEach(r=>n.add(r))}function Ice(n,e){return typeof e=="string"?[new kt(n,e)]:(pr(e)||(e=[e]),Array.from(e).map(t=>typeof t=="string"?new kt(n,t):t instanceof gi?new kt(n,t.data):t))}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Au extends ii{constructor(e,t,r,i){super(e,t,r,i),this.getFillerOffset=Oce}}Au.prototype.is=function(n,e){return e?e===this.name&&(n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"):n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};function Oce(){const n=[...this.getChildren()],e=n[this.childCount-1];if(e&&e.is("element","br"))return this.childCount;for(const t of n)if(!t.is("uiElement"))return null;return this.childCount}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class _g extends ct(Au){constructor(e,t,r,i){super(e,t,r,i),this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("placeholder",void 0),this.bind("isReadOnly").to(e),this.bind("isFocused").to(e,"isFocused",o=>o&&e.selection.editableElement==this),this.listenTo(e.selection,"change",()=>{this.isFocused=e.isFocused&&e.selection.editableElement==this})}destroy(){this.stopListening()}}_g.prototype.is=function(n,e){return e?e===this.name&&(n==="editableElement"||n==="view:editableElement"||n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"):n==="editableElement"||n==="view:editableElement"||n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const tT=Symbol("rootName");class $M extends _g{constructor(e,t){super(e,t),this.rootName="main"}get rootName(){return this.getCustomProperty(tT)}set rootName(e){this._setCustomProperty(tT,e)}set _name(e){this.name=e}}$M.prototype.is=function(n,e){return e?e===this.name&&(n==="rootElement"||n==="view:rootElement"||n==="editableElement"||n==="view:editableElement"||n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"):n==="rootElement"||n==="view:rootElement"||n==="editableElement"||n==="view:editableElement"||n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let ls=class{constructor(e={}){if(!e.boundaries&&!e.startPosition)throw new M("view-tree-walker-no-start-position",null);if(e.direction&&e.direction!="forward"&&e.direction!="backward")throw new M("view-tree-walker-unknown-direction",e.startPosition,{direction:e.direction});this.boundaries=e.boundaries||null,e.startPosition?this._position=ue._createAt(e.startPosition):this._position=ue._createAt(e.boundaries[e.direction=="backward"?"end":"start"]),this.direction=e.direction||"forward",this.singleCharacters=!!e.singleCharacters,this.shallow=!!e.shallow,this.ignoreElementEnd=!!e.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null}[Symbol.iterator](){return this}get position(){return this._position}skip(e){let t,r;do r=this.position,t=this.next();while(!t.done&&e(t.value));t.done||(this._position=r)}next(){return this.direction=="forward"?this._next():this._previous()}_next(){let e=this.position.clone();const t=this.position,r=e.parent;if(r.parent===null&&e.offset===r.childCount)return{done:!0,value:void 0};if(r===this._boundaryEndParent&&e.offset==this.boundaries.end.offset)return{done:!0,value:void 0};let i;if(r instanceof kt){if(e.isAtEnd)return this._position=ue._createAfter(r),this._next();i=r.data[e.offset]}else i=r.getChild(e.offset);if(i instanceof ii){if(!this.shallow)e=new ue(i,0);else{if(this.boundaries&&this.boundaries.end.isBefore(e))return{done:!0,value:void 0};e.offset++}return this._position=e,this._formatReturnValue("elementStart",i,t,e,1)}if(i instanceof kt){if(this.singleCharacters)return e=new ue(i,0),this._position=e,this._next();let o=i.data.length,s;return i==this._boundaryEndParent?(o=this.boundaries.end.offset,s=new gi(i,0,o),e=ue._createAfter(s)):(s=new gi(i,0,i.data.length),e.offset++),this._position=e,this._formatReturnValue("text",s,t,e,o)}if(typeof i=="string"){let o;this.singleCharacters?o=1:o=(r===this._boundaryEndParent?this.boundaries.end.offset:r.data.length)-e.offset;const s=new gi(r,e.offset,o);return e.offset+=o,this._position=e,this._formatReturnValue("text",s,t,e,o)}return e=ue._createAfter(r),this._position=e,this.ignoreElementEnd?this._next():this._formatReturnValue("elementEnd",r,t,e)}_previous(){let e=this.position.clone();const t=this.position,r=e.parent;if(r.parent===null&&e.offset===0)return{done:!0,value:void 0};if(r==this._boundaryStartParent&&e.offset==this.boundaries.start.offset)return{done:!0,value:void 0};let i;if(r instanceof kt){if(e.isAtStart)return this._position=ue._createBefore(r),this._previous();i=r.data[e.offset-1]}else i=r.getChild(e.offset-1);if(i instanceof ii)return this.shallow?(e.offset--,this._position=e,this._formatReturnValue("elementStart",i,t,e,1)):(e=new ue(i,i.childCount),this._position=e,this.ignoreElementEnd?this._previous():this._formatReturnValue("elementEnd",i,t,e));if(i instanceof kt){if(this.singleCharacters)return e=new ue(i,i.data.length),this._position=e,this._previous();let o=i.data.length,s;if(i==this._boundaryStartParent){const a=this.boundaries.start.offset;s=new gi(i,a,i.data.length-a),o=s.data.length,e=ue._createBefore(s)}else s=new gi(i,0,i.data.length),e.offset--;return this._position=e,this._formatReturnValue("text",s,t,e,o)}if(typeof i=="string"){let o;if(this.singleCharacters)o=1;else{const a=r===this._boundaryStartParent?this.boundaries.start.offset:0;o=e.offset-a}e.offset-=o;const s=new gi(r,e.offset,o);return this._position=e,this._formatReturnValue("text",s,t,e,o)}return e=ue._createBefore(r),this._position=e,this._formatReturnValue("elementStart",r,t,e,1)}_formatReturnValue(e,t,r,i,o){return t instanceof gi&&(t.offsetInText+t.data.length==t.textNode.data.length&&(this.direction=="forward"&&!(this.boundaries&&this.boundaries.end.isEqual(this.position))?(i=ue._createAfter(t.textNode),this._position=i):r=ue._createAfter(t.textNode)),t.offsetInText===0&&(this.direction=="backward"&&!(this.boundaries&&this.boundaries.start.isEqual(this.position))?(i=ue._createBefore(t.textNode),this._position=i):r=ue._createBefore(t.textNode))),{done:!1,value:{type:e,item:t,previousPosition:r,nextPosition:i,length:o}}}};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let ue=class Ni extends Ds{constructor(e,t){super(),this.parent=e,this.offset=t}get nodeAfter(){return this.parent.is("$text")?null:this.parent.getChild(this.offset)||null}get nodeBefore(){return this.parent.is("$text")?null:this.parent.getChild(this.offset-1)||null}get isAtStart(){return this.offset===0}get isAtEnd(){const e=this.parent.is("$text")?this.parent.data.length:this.parent.childCount;return this.offset===e}get root(){return this.parent.root}get editableElement(){let e=this.parent;for(;!(e instanceof _g);)if(e.parent)e=e.parent;else return null;return e}getShiftedBy(e){const t=Ni._createAt(this),r=t.offset+e;return t.offset=r<0?0:r,t}getLastMatchingPosition(e,t={}){t.startPosition=this;const r=new ls(t);return r.skip(e),r.position}getAncestors(){return this.parent.is("documentFragment")?[this.parent]:this.parent.getAncestors({includeSelf:!0})}getCommonAncestor(e){const t=this.getAncestors(),r=e.getAncestors();let i=0;for(;t[i]==r[i]&&t[i];)i++;return i===0?null:t[i-1]}isEqual(e){return this.parent==e.parent&&this.offset==e.offset}isBefore(e){return this.compareWith(e)=="before"}isAfter(e){return this.compareWith(e)=="after"}compareWith(e){if(this.root!==e.root)return"different";if(this.isEqual(e))return"same";const t=this.parent.is("node")?this.parent.getPath():[],r=e.parent.is("node")?e.parent.getPath():[];t.push(this.offset),r.push(e.offset);const i=Tn(t,r);switch(i){case"prefix":return"before";case"extension":return"after";default:return t[i]<r[i]?"before":"after"}}getWalker(e={}){return e.startPosition=this,new ls(e)}clone(){return new Ni(this.parent,this.offset)}static _createAt(e,t){if(e instanceof Ni)return new this(e.parent,e.offset);{const r=e;if(t=="end")t=r.is("$text")?r.data.length:r.childCount;else{if(t=="before")return this._createBefore(r);if(t=="after")return this._createAfter(r);if(t!==0&&!t)throw new M("view-createpositionat-offset-required",r)}return new Ni(r,t)}}static _createAfter(e){if(e.is("$textProxy"))return new Ni(e.textNode,e.offsetInText+e.data.length);if(!e.parent)throw new M("view-position-after-root",e,{root:e});return new Ni(e.parent,e.index+1)}static _createBefore(e){if(e.is("$textProxy"))return new Ni(e.textNode,e.offsetInText);if(!e.parent)throw new M("view-position-before-root",e,{root:e});return new Ni(e.parent,e.index)}};ue.prototype.is=function(n){return n==="position"||n==="view:position"};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let $e=class ho extends Ds{constructor(e,t=null){super(),this.start=e.clone(),this.end=t?t.clone():e.clone()}*[Symbol.iterator](){yield*new ls({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){return this.start.parent===this.end.parent}get root(){return this.start.root}getEnlarged(){let e=this.start.getLastMatchingPosition(rf,{direction:"backward"}),t=this.end.getLastMatchingPosition(rf);return e.parent.is("$text")&&e.isAtStart&&(e=ue._createBefore(e.parent)),t.parent.is("$text")&&t.isAtEnd&&(t=ue._createAfter(t.parent)),new ho(e,t)}getTrimmed(){let e=this.start.getLastMatchingPosition(rf);if(e.isAfter(this.end)||e.isEqual(this.end))return new ho(e,e);let t=this.end.getLastMatchingPosition(rf,{direction:"backward"});const r=e.nodeAfter,i=t.nodeBefore;return r&&r.is("$text")&&(e=new ue(r,0)),i&&i.is("$text")&&(t=new ue(i,i.data.length)),new ho(e,t)}isEqual(e){return this==e||this.start.isEqual(e.start)&&this.end.isEqual(e.end)}containsPosition(e){return e.isAfter(this.start)&&e.isBefore(this.end)}containsRange(e,t=!1){e.isCollapsed&&(t=!1);const r=this.containsPosition(e.start)||t&&this.start.isEqual(e.start),i=this.containsPosition(e.end)||t&&this.end.isEqual(e.end);return r&&i}getDifference(e){const t=[];return this.isIntersecting(e)?(this.containsPosition(e.start)&&t.push(new ho(this.start,e.start)),this.containsPosition(e.end)&&t.push(new ho(e.end,this.end))):t.push(this.clone()),t}getIntersection(e){if(this.isIntersecting(e)){let t=this.start,r=this.end;return this.containsPosition(e.start)&&(t=e.start),this.containsPosition(e.end)&&(r=e.end),new ho(t,r)}return null}getWalker(e={}){return e.boundaries=this,new ls(e)}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;let e=this.start.nodeAfter,t=this.end.nodeBefore;return this.start.parent.is("$text")&&this.start.isAtEnd&&this.start.parent.nextSibling&&(e=this.start.parent.nextSibling),this.end.parent.is("$text")&&this.end.isAtStart&&this.end.parent.previousSibling&&(t=this.end.parent.previousSibling),e&&e.is("element")&&e===t?e:null}clone(){return new ho(this.start,this.end)}*getItems(e={}){e.boundaries=this,e.ignoreElementEnd=!0;const t=new ls(e);for(const r of t)yield r.item}*getPositions(e={}){e.boundaries=this;const t=new ls(e);yield t.position;for(const r of t)yield r.nextPosition}isIntersecting(e){return this.start.isBefore(e.end)&&this.end.isAfter(e.start)}static _createFromParentsAndOffsets(e,t,r,i){return new this(new ue(e,t),new ue(r,i))}static _createFromPositionAndShift(e,t){const r=e,i=e.getShiftedBy(t);return t>0?new this(r,i):new this(i,r)}static _createIn(e){return this._createFromParentsAndOffsets(e,0,e,e.childCount)}static _createOn(e){const t=e.is("$textProxy")?e.offsetSize:1;return this._createFromPositionAndShift(ue._createBefore(e),t)}};$e.prototype.is=function(n){return n==="range"||n==="view:range"};function rf(n){return!!(n.item.is("attributeElement")||n.item.is("uiElement"))}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let qi=class VM extends pt(Ds){constructor(...e){super(),this._ranges=[],this._lastRangeBackward=!1,this._isFake=!1,this._fakeSelectionLabel="",e.length&&this.setTo(...e)}get isFake(){return this._isFake}get fakeSelectionLabel(){return this._fakeSelectionLabel}get anchor(){if(!this._ranges.length)return null;const e=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?e.end:e.start).clone()}get focus(){if(!this._ranges.length)return null;const e=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?e.start:e.end).clone()}get isCollapsed(){return this.rangeCount===1&&this._ranges[0].isCollapsed}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}get editableElement(){return this.anchor?this.anchor.editableElement:null}*getRanges(){for(const e of this._ranges)yield e.clone()}getFirstRange(){let e=null;for(const t of this._ranges)(!e||t.start.isBefore(e.start))&&(e=t);return e?e.clone():null}getLastRange(){let e=null;for(const t of this._ranges)(!e||t.end.isAfter(e.end))&&(e=t);return e?e.clone():null}getFirstPosition(){const e=this.getFirstRange();return e?e.start.clone():null}getLastPosition(){const e=this.getLastRange();return e?e.end.clone():null}isEqual(e){if(this.isFake!=e.isFake||this.isFake&&this.fakeSelectionLabel!=e.fakeSelectionLabel||this.rangeCount!=e.rangeCount)return!1;if(this.rangeCount===0)return!0;if(!this.anchor.isEqual(e.anchor)||!this.focus.isEqual(e.focus))return!1;for(const t of this._ranges){let r=!1;for(const i of e._ranges)if(t.isEqual(i)){r=!0;break}if(!r)return!1}return!0}isSimilar(e){if(this.isBackward!=e.isBackward)return!1;const t=hy(this.getRanges()),r=hy(e.getRanges());if(t!=r)return!1;if(t==0)return!0;for(let i of this.getRanges()){i=i.getTrimmed();let o=!1;for(let s of e.getRanges())if(s=s.getTrimmed(),i.start.isEqual(s.start)&&i.end.isEqual(s.end)){o=!0;break}if(!o)return!1}return!0}getSelectedElement(){return this.rangeCount!==1?null:this.getFirstRange().getContainedElement()}setTo(...e){let[t,r,i]=e;if(typeof r=="object"&&(i=r,r=void 0),t===null)this._setRanges([]),this._setFakeOptions(i);else if(t instanceof VM||t instanceof I0)this._setRanges(t.getRanges(),t.isBackward),this._setFakeOptions({fake:t.isFake,label:t.fakeSelectionLabel});else if(t instanceof $e)this._setRanges([t],i&&i.backward),this._setFakeOptions(i);else if(t instanceof ue)this._setRanges([new $e(t)]),this._setFakeOptions(i);else if(t instanceof Bs){const o=!!i&&!!i.backward;let s;if(r===void 0)throw new M("view-selection-setto-required-second-parameter",this);r=="in"?s=$e._createIn(t):r=="on"?s=$e._createOn(t):s=new $e(ue._createAt(t,r)),this._setRanges([s],o),this._setFakeOptions(i)}else if(pr(t))this._setRanges(t,i&&i.backward),this._setFakeOptions(i);else throw new M("view-selection-setto-not-selectable",this);this.fire("change")}setFocus(e,t){if(this.anchor===null)throw new M("view-selection-setfocus-no-ranges",this);const r=ue._createAt(e,t);if(r.compareWith(this.focus)=="same")return;const i=this.anchor;this._ranges.pop(),r.compareWith(i)=="before"?this._addRange(new $e(r,i),!0):this._addRange(new $e(i,r)),this.fire("change")}_setRanges(e,t=!1){e=Array.from(e),this._ranges=[];for(const r of e)this._addRange(r);this._lastRangeBackward=!!t}_setFakeOptions(e={}){this._isFake=!!e.fake,this._fakeSelectionLabel=e.fake&&e.label||""}_addRange(e,t=!1){if(!(e instanceof $e))throw new M("view-selection-add-range-not-range",this);this._pushRange(e),this._lastRangeBackward=!!t}_pushRange(e){for(const t of this._ranges)if(e.isIntersecting(t))throw new M("view-selection-range-intersects",this,{addedRange:e,intersectingRange:t});this._ranges.push(new $e(e.start,e.end))}};qi.prototype.is=function(n){return n==="selection"||n==="view:selection"};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let I0=class extends pt(Ds){constructor(...e){super(),this._selection=new qi,this._selection.delegate("change").to(this),e.length&&this._selection.setTo(...e)}get isFake(){return this._selection.isFake}get fakeSelectionLabel(){return this._selection.fakeSelectionLabel}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get isCollapsed(){return this._selection.isCollapsed}get rangeCount(){return this._selection.rangeCount}get isBackward(){return this._selection.isBackward}get editableElement(){return this._selection.editableElement}get _ranges(){return this._selection._ranges}*getRanges(){yield*this._selection.getRanges()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getSelectedElement(){return this._selection.getSelectedElement()}isEqual(e){return this._selection.isEqual(e)}isSimilar(e){return this._selection.isSimilar(e)}_setTo(...e){this._selection.setTo(...e)}_setFocus(e,t){this._selection.setFocus(e,t)}};I0.prototype.is=function(n){return n==="selection"||n=="documentSelection"||n=="view:selection"||n=="view:documentSelection"};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Tl extends eo{constructor(e,t,r){super(e,t),this.startRange=r,this._eventPhase="none",this._currentTarget=null}get eventPhase(){return this._eventPhase}get currentTarget(){return this._currentTarget}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const qp=Symbol("bubbling contexts");function vy(n){class e extends n{fire(r,...i){try{const o=r instanceof eo?r:new eo(this,r),s=Kp(this);if(!s.size)return;if(Jl(o,"capturing",this),Ks(s,"$capture",o,...i))return o.return;const a=o.startRange||this.selection.getFirstRange(),l=a?a.getContainedElement():null,c=l?!!zM(s,l):!1;let u=l||Rce(a);if(Jl(o,"atTarget",u),!c){if(Ks(s,"$text",o,...i))return o.return;Jl(o,"bubbling",u)}for(;u;){if(u.is("rootElement")){if(Ks(s,"$root",o,...i))return o.return}else if(u.is("element")&&Ks(s,u.name,o,...i))return o.return;if(Ks(s,u,o,...i))return o.return;u=u.parent,Jl(o,"bubbling",u)}return Jl(o,"bubbling",this),Ks(s,"$document",o,...i),o.return}catch(o){/* istanbul ignore next -- @preserve */M.rethrowUnexpectedError(o,this)}}_addEventListener(r,i,o){const s=nt(o.context||"$document"),a=Kp(this);for(const l of s){let c=a.get(l);c||(c=new(pt()),a.set(l,c)),this.listenTo(c,r,i,o)}}_removeEventListener(r,i){const o=Kp(this);for(const s of o.values())this.stopListening(s,r,i)}}return e}{const n=vy(Object);["fire","_addEventListener","_removeEventListener"].forEach(e=>{vy[e]=n.prototype[e]})}function Jl(n,e,t){n instanceof Tl&&(n._eventPhase=e,n._currentTarget=t)}function Ks(n,e,t,...r){const i=typeof e=="string"?n.get(e):zM(n,e);return i?(i.fire(t,...r),t.stop.called):!1}function zM(n,e){for(const[t,r]of n)if(typeof t=="function"&&t(e))return r;return null}function Kp(n){return n[qp]||(n[qp]=new Map),n[qp]}function Rce(n){if(!n)return null;const e=n.start.parent,t=n.end.parent,r=e.getPath(),i=t.getPath();return r.length>i.length?e:t}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let jM=class extends vy(ct()){constructor(e){super(),this._postFixers=new Set,this.selection=new I0,this.roots=new Vn({idProperty:"rootName"}),this.stylesProcessor=e,this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("isSelecting",!1),this.set("isComposing",!1)}getRoot(e="main"){return this.roots.get(e)}registerPostFixer(e){this._postFixers.add(e)}destroy(){this.roots.forEach(e=>e.destroy()),this.stopListening()}_callPostFixers(e){let t=!1;do for(const r of this._postFixers)if(t=r(e),t)break;while(t)}};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const WM=10;class hs extends ii{constructor(e,t,r,i){super(e,t,r,i),this._priority=WM,this._id=null,this._clonesGroup=null,this.getFillerOffset=Mce}get priority(){return this._priority}get id(){return this._id}getElementsWithSameId(){if(this.id===null)throw new M("attribute-element-get-elements-with-same-id-no-id",this);return new Set(this._clonesGroup)}isSimilar(e){return this.id!==null||e.id!==null?this.id===e.id:super.isSimilar(e)&&this.priority==e.priority}_clone(e=!1){const t=super._clone(e);return t._priority=this._priority,t._id=this._id,t}}hs.DEFAULT_PRIORITY=WM;hs.prototype.is=function(n,e){return e?e===this.name&&(n==="attributeElement"||n==="view:attributeElement"||n==="element"||n==="view:element"):n==="attributeElement"||n==="view:attributeElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};function Mce(){if(Yp(this))return null;let n=this.parent;for(;n&&n.is("attributeElement");){if(Yp(n)>1)return null;n=n.parent}return!n||Yp(n)>1?null:this.childCount}function Yp(n){return Array.from(n.getChildren()).filter(e=>!e.is("uiElement")).length}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class O0 extends ii{constructor(e,t,r,i){super(e,t,r,i),this.getFillerOffset=Dce}_insertChild(e,t){if(t&&(t instanceof Bs||Array.from(t).length>0))throw new M("view-emptyelement-cannot-add",[this,t]);return 0}}O0.prototype.is=function(n,e){return e?e===this.name&&(n==="emptyElement"||n==="view:emptyElement"||n==="element"||n==="view:element"):n==="emptyElement"||n==="view:emptyElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};function Dce(){return null}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Cg extends ii{constructor(e,t,r,i){super(e,t,r,i),this.getFillerOffset=Nce}_insertChild(e,t){if(t&&(t instanceof Bs||Array.from(t).length>0))throw new M("view-uielement-cannot-add",[this,t]);return 0}render(e,t){return this.toDomElement(e)}toDomElement(e){const t=e.createElement(this.name);for(const r of this.getAttributeKeys())t.setAttribute(r,this.getAttribute(r));return t}}Cg.prototype.is=function(n,e){return e?e===this.name&&(n==="uiElement"||n==="view:uiElement"||n==="element"||n==="view:element"):n==="uiElement"||n==="view:uiElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};function Bce(n){n.document.on("arrowKey",(e,t)=>Lce(e,t,n.domConverter),{priority:"low"})}function Nce(){return null}function Lce(n,e,t){if(e.keyCode==qe.arrowright){const r=e.domTarget.ownerDocument.defaultView.getSelection(),i=r.rangeCount==1&&r.getRangeAt(0).collapsed;if(i||e.shiftKey){const o=r.focusNode,s=r.focusOffset,a=t.domPositionToView(o,s);if(a===null)return;let l=!1;const c=a.getLastMatchingPosition(u=>(u.item.is("uiElement")&&(l=!0),!!(u.item.is("uiElement")||u.item.is("attributeElement"))));if(l){const u=t.viewPositionToDom(c);i?r.collapse(u.parent,u.offset):r.extend(u.parent,u.offset)}}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class R0 extends ii{constructor(e,t,r,i){super(e,t,r,i),this.getFillerOffset=Fce}_insertChild(e,t){if(t&&(t instanceof Bs||Array.from(t).length>0))throw new M("view-rawelement-cannot-add",[this,t]);return 0}render(e,t){}}R0.prototype.is=function(n,e){return e?e===this.name&&(n==="rawElement"||n==="view:rawElement"||n==="element"||n==="view:element"):n==="rawElement"||n==="view:rawElement"||n===this.name||n==="view:"+this.name||n==="element"||n==="view:element"||n==="node"||n==="view:node"};function Fce(){return null}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let ms=class extends pt(Ds){constructor(e,t){super(),this._children=[],this._customProperties=new Map,this.document=e,t&&this._insertChild(0,t)}[Symbol.iterator](){return this._children[Symbol.iterator]()}get childCount(){return this._children.length}get isEmpty(){return this.childCount===0}get root(){return this}get parent(){return null}get name(){}get getFillerOffset(){}getCustomProperty(e){return this._customProperties.get(e)}*getCustomProperties(){yield*this._customProperties.entries()}_appendChild(e){return this._insertChild(this.childCount,e)}getChild(e){return this._children[e]}getChildIndex(e){return this._children.indexOf(e)}getChildren(){return this._children[Symbol.iterator]()}_insertChild(e,t){this._fireChange("children",this);let r=0;const i=$ce(this.document,t);for(const o of i)o.parent!==null&&o._remove(),o.parent=this,this._children.splice(e,0,o),e++,r++;return r}_removeChildren(e,t=1){this._fireChange("children",this);for(let r=e;r<e+t;r++)this._children[r].parent=null;return this._children.splice(e,t)}_fireChange(e,t){this.fire("change:"+e,t)}_setCustomProperty(e,t){this._customProperties.set(e,t)}_removeCustomProperty(e){return this._customProperties.delete(e)}};ms.prototype.is=function(n){return n==="documentFragment"||n==="view:documentFragment"};function $ce(n,e){return typeof e=="string"?[new kt(n,e)]:(pr(e)||(e=[e]),Array.from(e).map(t=>typeof t=="string"?new kt(n,t):t instanceof gi?new kt(n,t.data):t))}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class HM{constructor(e){this._cloneGroups=new Map,this._slotFactory=null,this.document=e}setSelection(...e){this.document.selection._setTo(...e)}setSelectionFocus(e,t){this.document.selection._setFocus(e,t)}createDocumentFragment(e){return new ms(this.document,e)}createText(e){return new kt(this.document,e)}createAttributeElement(e,t,r={}){const i=new hs(this.document,e,t);return typeof r.priority=="number"&&(i._priority=r.priority),r.id&&(i._id=r.id),r.renderUnsafeAttributes&&i._unsafeAttributesToRender.push(...r.renderUnsafeAttributes),i}createContainerElement(e,t,r={},i={}){let o=null;Er(r)?i=r:o=r;const s=new Au(this.document,e,t,o);return i.renderUnsafeAttributes&&s._unsafeAttributesToRender.push(...i.renderUnsafeAttributes),s}createEditableElement(e,t,r={}){const i=new _g(this.document,e,t);return r.renderUnsafeAttributes&&i._unsafeAttributesToRender.push(...r.renderUnsafeAttributes),i}createEmptyElement(e,t,r={}){const i=new O0(this.document,e,t);return r.renderUnsafeAttributes&&i._unsafeAttributesToRender.push(...r.renderUnsafeAttributes),i}createUIElement(e,t,r){const i=new Cg(this.document,e,t);return r&&(i.render=r),i}createRawElement(e,t,r,i={}){const o=new R0(this.document,e,t);return r&&(o.render=r),i.renderUnsafeAttributes&&o._unsafeAttributesToRender.push(...i.renderUnsafeAttributes),o}setAttribute(e,t,r){r._setAttribute(e,t)}removeAttribute(e,t){t._removeAttribute(e)}addClass(e,t){t._addClass(e)}removeClass(e,t){t._removeClass(e)}setStyle(e,t,r){Er(e)&&r===void 0?t._setStyle(e):r._setStyle(e,t)}removeStyle(e,t){t._removeStyle(e)}setCustomProperty(e,t,r){r._setCustomProperty(e,t)}removeCustomProperty(e,t){return t._removeCustomProperty(e)}breakAttributes(e){return e instanceof ue?this._breakAttributes(e):this._breakAttributesRange(e)}breakContainer(e){const t=e.parent;if(!t.is("containerElement"))throw new M("view-writer-break-non-container-element",this.document);if(!t.parent)throw new M("view-writer-break-root",this.document);if(e.isAtStart)return ue._createBefore(t);if(!e.isAtEnd){const r=t._clone(!1);this.insert(ue._createAfter(t),r);const i=new $e(e,ue._createAt(t,"end")),o=new ue(r,0);this.move(i,o)}return ue._createAfter(t)}mergeAttributes(e){const t=e.offset,r=e.parent;if(r.is("$text"))return e;if(r.is("attributeElement")&&r.childCount===0){const s=r.parent,a=r.index;return r._remove(),this._removeFromClonedElementsGroup(r),this.mergeAttributes(new ue(s,a))}const i=r.getChild(t-1),o=r.getChild(t);if(!i||!o)return e;if(i.is("$text")&&o.is("$text"))return rT(i,o);if(i.is("attributeElement")&&o.is("attributeElement")&&i.isSimilar(o)){const s=i.childCount;return i._appendChild(o.getChildren()),o._remove(),this._removeFromClonedElementsGroup(o),this.mergeAttributes(new ue(i,s))}return e}mergeContainers(e){const t=e.nodeBefore,r=e.nodeAfter;if(!t||!r||!t.is("containerElement")||!r.is("containerElement"))throw new M("view-writer-merge-containers-invalid-position",this.document);const i=t.getChild(t.childCount-1),o=i instanceof kt?ue._createAt(i,"end"):ue._createAt(t,"end");return this.move($e._createIn(r),ue._createAt(t,"end")),this.remove($e._createOn(r)),o}insert(e,t){t=pr(t)?[...t]:[t],UM(t,this.document);const r=t.reduce((s,a)=>{const l=s[s.length-1],c=!a.is("uiElement");return!l||l.breakAttributes!=c?s.push({breakAttributes:c,nodes:[a]}):l.nodes.push(a),s},[]);let i=null,o=e;for(const{nodes:s,breakAttributes:a}of r){const l=this._insertNodes(o,s,a);i||(i=l.start),o=l.end}return i?new $e(i,o):new $e(e)}remove(e){const t=e instanceof $e?e:$e._createOn(e);if(Ql(t,this.document),t.isCollapsed)return new ms(this.document);const{start:r,end:i}=this._breakAttributesRange(t,!0),o=r.parent,s=i.offset-r.offset,a=o._removeChildren(r.offset,s);for(const c of a)this._removeFromClonedElementsGroup(c);const l=this.mergeAttributes(r);return t.start=l,t.end=l.clone(),new ms(this.document,a)}clear(e,t){Ql(e,this.document);const r=e.getWalker({direction:"backward",ignoreElementEnd:!0});for(const i of r){const o=i.item;let s;if(o.is("element")&&t.isSimilar(o))s=$e._createOn(o);else if(!i.nextPosition.isAfter(e.start)&&o.is("$textProxy")){const a=o.getAncestors().find(l=>l.is("element")&&t.isSimilar(l));a&&(s=$e._createIn(a))}s&&(s.end.isAfter(e.end)&&(s.end=e.end),s.start.isBefore(e.start)&&(s.start=e.start),this.remove(s))}}move(e,t){let r;if(t.isAfter(e.end)){t=this._breakAttributes(t,!0);const i=t.parent,o=i.childCount;e=this._breakAttributesRange(e,!0),r=this.remove(e),t.offset+=i.childCount-o}else r=this.remove(e);return this.insert(t,r)}wrap(e,t){if(!(t instanceof hs))throw new M("view-writer-wrap-invalid-attribute",this.document);if(Ql(e,this.document),e.isCollapsed){let r=e.start;r.parent.is("element")&&!Vce(r.parent)&&(r=r.getLastMatchingPosition(o=>o.item.is("uiElement"))),r=this._wrapPosition(r,t);const i=this.document.selection;return i.isCollapsed&&i.getFirstPosition().isEqual(e.start)&&this.setSelection(r),new $e(r)}else return this._wrapRange(e,t)}unwrap(e,t){if(!(t instanceof hs))throw new M("view-writer-unwrap-invalid-attribute",this.document);if(Ql(e,this.document),e.isCollapsed)return e;const{start:r,end:i}=this._breakAttributesRange(e,!0),o=r.parent,s=this._unwrapChildren(o,r.offset,i.offset,t),a=this.mergeAttributes(s.start);a.isEqual(s.start)||s.end.offset--;const l=this.mergeAttributes(s.end);return new $e(a,l)}rename(e,t){const r=new Au(this.document,e,t.getAttributes());return this.insert(ue._createAfter(t),r),this.move($e._createIn(t),ue._createAt(r,0)),this.remove($e._createOn(t)),r}clearClonedElementsGroup(e){this._cloneGroups.delete(e)}createPositionAt(e,t){return ue._createAt(e,t)}createPositionAfter(e){return ue._createAfter(e)}createPositionBefore(e){return ue._createBefore(e)}createRange(e,t){return new $e(e,t)}createRangeOn(e){return $e._createOn(e)}createRangeIn(e){return $e._createIn(e)}createSelection(...e){return new qi(...e)}createSlot(e="children"){if(!this._slotFactory)throw new M("view-writer-invalid-create-slot-context",this.document);return this._slotFactory(this,e)}_registerSlotFactory(e){this._slotFactory=e}_clearSlotFactory(){this._slotFactory=null}_insertNodes(e,t,r){let i;if(r?i=by(e):i=e.parent.is("$text")?e.parent.parent:e.parent,!i)throw new M("view-writer-invalid-position-container",this.document);let o;r?o=this._breakAttributes(e,!0):o=e.parent.is("$text")?Xp(e):e;const s=i._insertChild(o.offset,t);for(const u of t)this._addToClonedElementsGroup(u);const a=o.getShiftedBy(s),l=this.mergeAttributes(o);l.isEqual(o)||a.offset--;const c=this.mergeAttributes(a);return new $e(l,c)}_wrapChildren(e,t,r,i){let o=t;const s=[];for(;o<r;){const l=e.getChild(o),c=l.is("$text"),u=l.is("attributeElement");if(u&&this._wrapAttributeElement(i,l))s.push(new ue(e,o));else if(c||!u||zce(i,l)){const d=i._clone();l._remove(),d._appendChild(l),e._insertChild(o,d),this._addToClonedElementsGroup(d),s.push(new ue(e,o))}else this._wrapChildren(l,0,l.childCount,i);o++}let a=0;for(const l of s){if(l.offset-=a,l.offset==t)continue;this.mergeAttributes(l).isEqual(l)||(a++,r--)}return $e._createFromParentsAndOffsets(e,t,e,r)}_unwrapChildren(e,t,r,i){let o=t;const s=[];for(;o<r;){const l=e.getChild(o);if(!l.is("attributeElement")){o++;continue}if(l.isSimilar(i)){const c=l.getChildren(),u=l.childCount;l._remove(),e._insertChild(o,c),this._removeFromClonedElementsGroup(l),s.push(new ue(e,o),new ue(e,o+u)),o+=u,r+=u-1;continue}if(this._unwrapAttributeElement(i,l)){s.push(new ue(e,o),new ue(e,o+1)),o++;continue}this._unwrapChildren(l,0,l.childCount,i),o++}let a=0;for(const l of s){if(l.offset-=a,l.offset==t||l.offset==r)continue;this.mergeAttributes(l).isEqual(l)||(a++,r--)}return $e._createFromParentsAndOffsets(e,t,e,r)}_wrapRange(e,t){const{start:r,end:i}=this._breakAttributesRange(e,!0),o=r.parent,s=this._wrapChildren(o,r.offset,i.offset,t),a=this.mergeAttributes(s.start);a.isEqual(s.start)||s.end.offset--;const l=this.mergeAttributes(s.end);return new $e(a,l)}_wrapPosition(e,t){if(t.isSimilar(e.parent))return nT(e.clone());e.parent.is("$text")&&(e=Xp(e));const r=this.createAttributeElement("_wrapPosition-fake-element");r._priority=Number.POSITIVE_INFINITY,r.isSimilar=()=>!1,e.parent._insertChild(e.offset,r);const i=new $e(e,e.getShiftedBy(1));this.wrap(i,t);const o=new ue(r.parent,r.index);r._remove();const s=o.nodeBefore,a=o.nodeAfter;return s instanceof kt&&a instanceof kt?rT(s,a):nT(o)}_wrapAttributeElement(e,t){if(!iT(e,t)||e.name!==t.name||e.priority!==t.priority)return!1;for(const r of e.getAttributeKeys())if(!(r==="class"||r==="style")&&t.hasAttribute(r)&&t.getAttribute(r)!==e.getAttribute(r))return!1;for(const r of e.getStyleNames())if(t.hasStyle(r)&&t.getStyle(r)!==e.getStyle(r))return!1;for(const r of e.getAttributeKeys())r==="class"||r==="style"||t.hasAttribute(r)||this.setAttribute(r,e.getAttribute(r),t);for(const r of e.getStyleNames())t.hasStyle(r)||this.setStyle(r,e.getStyle(r),t);for(const r of e.getClassNames())t.hasClass(r)||this.addClass(r,t);return!0}_unwrapAttributeElement(e,t){if(!iT(e,t)||e.name!==t.name||e.priority!==t.priority)return!1;for(const r of e.getAttributeKeys())if(!(r==="class"||r==="style")&&(!t.hasAttribute(r)||t.getAttribute(r)!==e.getAttribute(r)))return!1;if(!t.hasClass(...e.getClassNames()))return!1;for(const r of e.getStyleNames())if(!t.hasStyle(r)||t.getStyle(r)!==e.getStyle(r))return!1;for(const r of e.getAttributeKeys())r==="class"||r==="style"||this.removeAttribute(r,t);return this.removeClass(Array.from(e.getClassNames()),t),this.removeStyle(Array.from(e.getStyleNames()),t),!0}_breakAttributesRange(e,t=!1){const r=e.start,i=e.end;if(Ql(e,this.document),e.isCollapsed){const l=this._breakAttributes(e.start,t);return new $e(l,l)}const o=this._breakAttributes(i,t),s=o.parent.childCount,a=this._breakAttributes(r,t);return o.offset+=o.parent.childCount-s,new $e(a,o)}_breakAttributes(e,t=!1){const r=e.offset,i=e.parent;if(e.parent.is("emptyElement"))throw new M("view-writer-cannot-break-empty-element",this.document);if(e.parent.is("uiElement"))throw new M("view-writer-cannot-break-ui-element",this.document);if(e.parent.is("rawElement"))throw new M("view-writer-cannot-break-raw-element",this.document);if(!t&&i.is("$text")&&yy(i.parent)||yy(i))return e.clone();if(i.is("$text"))return this._breakAttributes(Xp(e),t);const o=i.childCount;if(r==o){const s=new ue(i.parent,i.index+1);return this._breakAttributes(s,t)}else if(r===0){const s=new ue(i.parent,i.index);return this._breakAttributes(s,t)}else{const s=i.index+1,a=i._clone();i.parent._insertChild(s,a),this._addToClonedElementsGroup(a);const l=i.childCount-r,c=i._removeChildren(r,l);a._appendChild(c);const u=new ue(i.parent,s);return this._breakAttributes(u,t)}}_addToClonedElementsGroup(e){if(!e.root.is("rootElement"))return;if(e.is("element"))for(const i of e.getChildren())this._addToClonedElementsGroup(i);const t=e.id;if(!t)return;let r=this._cloneGroups.get(t);r||(r=new Set,this._cloneGroups.set(t,r)),r.add(e),e._clonesGroup=r}_removeFromClonedElementsGroup(e){if(e.is("element"))for(const i of e.getChildren())this._removeFromClonedElementsGroup(i);const t=e.id;if(!t)return;const r=this._cloneGroups.get(t);r&&r.delete(e)}}function Vce(n){return Array.from(n.getChildren()).some(e=>!e.is("uiElement"))}function by(n){let e=n.parent;for(;!yy(e);){if(!e)return;e=e.parent}return e}function zce(n,e){return n.priority<e.priority?!0:n.priority>e.priority?!1:n.getIdentity()<e.getIdentity()}function nT(n){const e=n.nodeBefore;if(e&&e.is("$text"))return new ue(e,e.data.length);const t=n.nodeAfter;return t&&t.is("$text")?new ue(t,0):n}function Xp(n){if(n.offset==n.parent.data.length)return new ue(n.parent.parent,n.parent.index+1);if(n.offset===0)return new ue(n.parent.parent,n.parent.index);const e=n.parent.data.slice(n.offset);return n.parent._data=n.parent.data.slice(0,n.offset),n.parent.parent._insertChild(n.parent.index+1,new kt(n.root.document,e)),new ue(n.parent.parent,n.parent.index+1)}function rT(n,e){const t=n.data.length;return n._data+=e.data,e._remove(),new ue(n,t)}const jce=[kt,hs,Au,O0,R0,Cg];function UM(n,e){for(const t of n){if(!jce.some(r=>t instanceof r))throw new M("view-writer-insert-invalid-node-type",e);t.is("$text")||UM(t.getChildren(),e)}}function yy(n){return n&&(n.is("containerElement")||n.is("documentFragment"))}function Ql(n,e){const t=by(n.start),r=by(n.end);if(!t||!r||t!==r)throw new M("view-writer-invalid-range-container",e)}function iT(n,e){return n.id===null&&e.id===null}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const GM=n=>n.createTextNode(" "),qM=n=>{const e=n.createElement("span");return e.dataset.ckeFiller="true",e.innerText=" ",e},KM=n=>{const e=n.createElement("br");return e.dataset.ckeFiller="true",e},Qr=7,Tu="⁠".repeat(Qr);function ar(n){return typeof n=="string"?n.substr(0,Qr)===Tu:Ft(n)&&n.data.substr(0,Qr)===Tu}function pa(n){return n.data.length==Qr&&ar(n)}function oT(n){const e=typeof n=="string"?n:n.data;return ar(n)?e.slice(Qr):e}function Wce(n){n.document.on("arrowKey",Hce,{priority:"low"})}function Hce(n,e){if(e.keyCode==qe.arrowleft){const t=e.domTarget.ownerDocument.defaultView.getSelection();if(t.rangeCount==1&&t.getRangeAt(0).collapsed){const r=t.getRangeAt(0).startContainer,i=t.getRangeAt(0).startOffset;ar(r)&&i<=Qr&&t.collapse(r,0)}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Uce extends ct(){constructor(e,t){super(),this.domDocuments=new Set,this.markedAttributes=new Set,this.markedChildren=new Set,this.markedTexts=new Set,this._inlineFiller=null,this._fakeSelectionContainer=null,this.domConverter=e,this.selection=t,this.set("isFocused",!1),this.set("isSelecting",!1),Re.isBlink&&!Re.isAndroid&&this.on("change:isSelecting",()=>{this.isSelecting||this.render()}),this.set("isComposing",!1),this.on("change:isComposing",()=>{this.isComposing||this.render()})}markToSync(e,t){if(e==="text")this.domConverter.mapViewToDom(t.parent)&&this.markedTexts.add(t);else{if(!this.domConverter.mapViewToDom(t))return;if(e==="attributes")this.markedAttributes.add(t);else if(e==="children")this.markedChildren.add(t);else throw new M("view-renderer-unknown-type",this)}}render(){if(this.isComposing&&!Re.isAndroid)return;let e=null;const t=Re.isBlink&&!Re.isAndroid?!this.isSelecting:!0;for(const r of this.markedChildren)this._updateChildrenMappings(r);t?(this._inlineFiller&&!this._isSelectionInInlineFiller()&&this._removeInlineFiller(),this._inlineFiller?e=this._getInlineFillerPosition():this._needsInlineFillerAtSelection()&&(e=this.selection.getFirstPosition(),this.markedChildren.add(e.parent))):this._inlineFiller&&this._inlineFiller.parentNode&&(e=this.domConverter.domPositionToView(this._inlineFiller),e&&e.parent.is("$text")&&(e=ue._createBefore(e.parent)));for(const r of this.markedAttributes)this._updateAttrs(r);for(const r of this.markedChildren)this._updateChildren(r,{inlineFillerPosition:e});for(const r of this.markedTexts)!this.markedChildren.has(r.parent)&&this.domConverter.mapViewToDom(r.parent)&&this._updateText(r,{inlineFillerPosition:e});if(t)if(e){const r=this.domConverter.viewPositionToDom(e),i=r.parent.ownerDocument;ar(r.parent)?this._inlineFiller=r.parent:this._inlineFiller=sT(i,r.parent,r.offset)}else this._inlineFiller=null;this._updateFocus(),this._updateSelection(),this.domConverter._clearTemporaryCustomProperties(),this.markedTexts.clear(),this.markedAttributes.clear(),this.markedChildren.clear()}_updateChildrenMappings(e){const t=this.domConverter.mapViewToDom(e);if(!t)return;const r=Array.from(t.childNodes),i=Array.from(this.domConverter.viewChildrenToDom(e,{withChildren:!1})),o=this._diffNodeLists(r,i),s=this._findUpdateActions(o,r,i,qce);if(s.indexOf("update")!==-1){const a={equal:0,insert:0,delete:0};for(const l of s)if(l==="update"){const c=a.equal+a.insert,u=a.equal+a.delete,d=e.getChild(c);d&&!d.is("uiElement")&&!d.is("rawElement")&&this._updateElementMappings(d,r[u]),LA(i[c]),a.equal++}else a[l]++}}_updateElementMappings(e,t){this.domConverter.unbindDomElement(t),this.domConverter.bindElements(t,e),this.markedChildren.add(e),this.markedAttributes.add(e)}_getInlineFillerPosition(){const e=this.selection.getFirstPosition();return e.parent.is("$text")?ue._createBefore(e.parent):e}_isSelectionInInlineFiller(){if(this.selection.rangeCount!=1||!this.selection.isCollapsed)return!1;const e=this.selection.getFirstPosition(),t=this.domConverter.viewPositionToDom(e);return!!(t&&Ft(t.parent)&&ar(t.parent))}_removeInlineFiller(){const e=this._inlineFiller;if(!ar(e))throw new M("view-renderer-filler-was-lost",this);pa(e)?e.remove():e.data=e.data.substr(Qr),this._inlineFiller=null}_needsInlineFillerAtSelection(){if(this.selection.rangeCount!=1||!this.selection.isCollapsed)return!1;const e=this.selection.getFirstPosition(),t=e.parent,r=e.offset;if(!this.domConverter.mapViewToDom(t.root)||!t.is("element")||!Gce(t))return!1;const i=e.nodeBefore,o=e.nodeAfter;return!(i instanceof kt||o instanceof kt||r===t.getFillerOffset()&&(!i||!i.is("element","br"))||Re.isAndroid&&(i||o))}_updateText(e,t){const r=this.domConverter.findCorrespondingDomText(e);let o=this.domConverter.viewToDom(e).data;const s=t.inlineFillerPosition;s&&s.parent==e.parent&&s.offset==e.index&&(o=Tu+o),aT(r,o)}_updateAttrs(e){const t=this.domConverter.mapViewToDom(e);if(!t)return;const r=Array.from(t.attributes).map(o=>o.name),i=e.getAttributeKeys();for(const o of i)this.domConverter.setDomElementAttribute(t,o,e.getAttribute(o),e);for(const o of r)e.hasAttribute(o)||this.domConverter.removeDomElementAttribute(t,o)}_updateChildren(e,t){const r=this.domConverter.mapViewToDom(e);if(!r)return;if(Re.isAndroid){let d=null;for(const f of Array.from(r.childNodes)){if(d&&Ft(d)&&Ft(f)){r.normalize();break}d=f}}const i=t.inlineFillerPosition,o=r.childNodes,s=Array.from(this.domConverter.viewChildrenToDom(e,{bind:!0}));i&&i.parent===e&&sT(r.ownerDocument,s,i.offset);const a=this._diffNodeLists(o,s),l=this._findUpdateActions(a,o,s,Kce);let c=0;const u=new Set;for(const d of l)d==="delete"?(u.add(o[c]),LA(o[c])):(d==="equal"||d==="update")&&c++;c=0;for(const d of l)d==="insert"?(wM(r,c,s[c]),c++):d==="update"?(aT(o[c],s[c].data),c++):d==="equal"&&(this._markDescendantTextToSync(this.domConverter.domToView(s[c])),c++);for(const d of u)d.parentNode||this.domConverter.unbindDomElement(d)}_diffNodeLists(e,t){return e=Zce(e,this._fakeSelectionContainer),Tc(e,t,Yce.bind(null,this.domConverter))}_findUpdateActions(e,t,r,i){if(e.indexOf("insert")===-1||e.indexOf("delete")===-1)return e;let o=[],s=[],a=[];const l={equal:0,insert:0,delete:0};for(const c of e)c==="insert"?a.push(r[l.equal+l.insert]):c==="delete"?s.push(t[l.equal+l.delete]):(o=o.concat(Tc(s,a,i).map(u=>u==="equal"?"update":u)),o.push("equal"),s=[],a=[]),l[c]++;return o.concat(Tc(s,a,i).map(c=>c==="equal"?"update":c))}_markDescendantTextToSync(e){if(e){if(e.is("$text"))this.markedTexts.add(e);else if(e.is("element"))for(const t of e.getChildren())this._markDescendantTextToSync(t)}}_updateSelection(){if(Re.isBlink&&!Re.isAndroid&&this.isSelecting&&!this.markedChildren.size)return;if(this.selection.rangeCount===0){this._removeDomSelection(),this._removeFakeSelection();return}const e=this.domConverter.mapViewToDom(this.selection.editableElement);!this.isFocused||!e||(this.selection.isFake?this._updateFakeSelection(e):this._fakeSelectionContainer&&this._fakeSelectionContainer.isConnected?(this._removeFakeSelection(),this._updateDomSelection(e)):this.isComposing&&Re.isAndroid||this._updateDomSelection(e))}_updateFakeSelection(e){const t=e.ownerDocument;this._fakeSelectionContainer||(this._fakeSelectionContainer=Jce(t));const r=this._fakeSelectionContainer;if(this.domConverter.bindFakeSelection(r,this.selection),!this._fakeSelectionNeedsUpdate(e))return;(!r.parentElement||r.parentElement!=e)&&e.appendChild(r),r.textContent=this.selection.fakeSelectionLabel||" ";const i=t.getSelection(),o=t.createRange();i.removeAllRanges(),o.selectNodeContents(r),i.addRange(o)}_updateDomSelection(e){const t=e.ownerDocument.defaultView.getSelection();if(!this._domSelectionNeedsUpdate(t))return;const r=this.domConverter.viewPositionToDom(this.selection.anchor),i=this.domConverter.viewPositionToDom(this.selection.focus);t.setBaseAndExtent(r.parent,r.offset,i.parent,i.offset),Re.isGecko&&Xce(i,t)}_domSelectionNeedsUpdate(e){if(!this.domConverter.isDomSelectionCorrect(e))return!0;const t=e&&this.domConverter.domSelectionToView(e);return!(t&&this.selection.isEqual(t)||!this.selection.isCollapsed&&this.selection.isSimilar(t))}_fakeSelectionNeedsUpdate(e){const t=this._fakeSelectionContainer,r=e.ownerDocument.getSelection();return!t||t.parentElement!==e||r.anchorNode!==t&&!t.contains(r.anchorNode)?!0:t.textContent!==this.selection.fakeSelectionLabel}_removeDomSelection(){for(const e of this.domDocuments){const t=e.getSelection();if(t.rangeCount){const r=e.activeElement,i=this.domConverter.mapDomToView(r);r&&i&&t.removeAllRanges()}}}_removeFakeSelection(){const e=this._fakeSelectionContainer;e&&e.remove()}_updateFocus(){if(this.isFocused){const e=this.selection.editableElement;e&&this.domConverter.focus(e)}}}function Gce(n){if(n.getAttribute("contenteditable")=="false")return!1;const e=n.findAncestor(t=>t.hasAttribute("contenteditable"));return!e||e.getAttribute("contenteditable")=="true"}function sT(n,e,t){const r=e instanceof Array?e:e.childNodes,i=r[t];if(Ft(i))return i.data=Tu+i.data,i;{const o=n.createTextNode(Tu);return Array.isArray(e)?r.splice(t,0,o):wM(e,t,o),o}}function qce(n,e){return Io(n)&&Io(e)&&!Ft(n)&&!Ft(e)&&!Ec(n)&&!Ec(e)&&n.tagName.toLowerCase()===e.tagName.toLowerCase()}function Kce(n,e){return Io(n)&&Io(e)&&Ft(n)&&Ft(e)}function Yce(n,e,t){return e===t?!0:Ft(e)&&Ft(t)?e.data===t.data:!!(n.isBlockFiller(e)&&n.isBlockFiller(t))}function Xce(n,e){let t=n.parent,r=n.offset;if(Ft(t)&&pa(t)&&(r=vc(t)+1,t=t.parentNode),t.nodeType!=Node.ELEMENT_NODE||r!=t.childNodes.length-1)return;const i=t.childNodes[r];i&&i.tagName=="BR"&&e.addRange(e.getRangeAt(0))}function Zce(n,e){const t=Array.from(n);return t.length==0||!e||t[t.length-1]==e&&t.pop(),t}function Jce(n){const e=n.createElement("div");return e.className="ck-fake-selection-container",Object.assign(e.style,{position:"fixed",top:0,left:"-9999px",width:"42px"}),e.textContent=" ",e}function aT(n,e){const t=n.data;if(t==e)return;const r=oM(t,e);for(const i of r)i.type==="insert"?n.insertData(i.index,i.values.join("")):n.deleteData(i.index,i.howMany)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Qce=KM(he.document),eue=GM(he.document),tue=qM(he.document),of="data-ck-unsafe-attribute-",lT="data-ck-unsafe-element";class YM{constructor(e,{blockFillerMode:t,renderingMode:r="editing"}={}){this._domToViewMapping=new WeakMap,this._viewToDomMapping=new WeakMap,this._fakeSelectionMapping=new WeakMap,this._rawContentElementMatcher=new Ss,this._inlineObjectElementMatcher=new Ss,this._elementsWithTemporaryCustomProperties=new Set,this.document=e,this.renderingMode=r,this.blockFillerMode=t||(r==="editing"?"br":"nbsp"),this.preElements=["pre"],this.blockElements=["address","article","aside","blockquote","caption","center","dd","details","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","legend","li","main","menu","nav","ol","p","pre","section","summary","table","tbody","td","tfoot","th","thead","tr","ul"],this.inlineObjectElements=["object","iframe","input","button","textarea","select","option","video","embed","audio","img","canvas"],this.unsafeElements=["script","style"],this._domDocument=this.renderingMode==="editing"?he.document:he.document.implementation.createHTMLDocument("")}bindFakeSelection(e,t){this._fakeSelectionMapping.set(e,new qi(t))}fakeSelectionToView(e){return this._fakeSelectionMapping.get(e)}bindElements(e,t){this._domToViewMapping.set(e,t),this._viewToDomMapping.set(t,e)}unbindDomElement(e){const t=this._domToViewMapping.get(e);if(t){this._domToViewMapping.delete(e),this._viewToDomMapping.delete(t);for(const r of Array.from(e.children))this.unbindDomElement(r)}}bindDocumentFragments(e,t){this._domToViewMapping.set(e,t),this._viewToDomMapping.set(t,e)}shouldRenderAttribute(e,t,r){return this.renderingMode==="data"?!0:(e=e.toLowerCase(),e.startsWith("on")||e==="srcdoc"&&t.match(/\bon\S+\s*=|javascript:|<\s*\/*script/i)?!1:r==="img"&&(e==="src"||e==="srcset")||r==="source"&&e==="srcset"?!0:!t.match(/^\s*(javascript:|data:(image\/svg|text\/x?html))/i))}setContentOf(e,t){if(this.renderingMode==="data"){e.innerHTML=t;return}const r=new DOMParser().parseFromString(t,"text/html"),i=r.createDocumentFragment(),o=r.body.childNodes;for(;o.length>0;)i.appendChild(o[0]);const s=r.createTreeWalker(i,NodeFilter.SHOW_ELEMENT),a=[];let l;for(;l=s.nextNode();)a.push(l);for(const c of a){for(const d of c.getAttributeNames())this.setDomElementAttribute(c,d,c.getAttribute(d));const u=c.tagName.toLowerCase();this._shouldRenameElement(u)&&(uT(u),c.replaceWith(this._createReplacementDomElement(u,c)))}for(;e.firstChild;)e.firstChild.remove();e.append(i)}viewToDom(e,t={}){if(e.is("$text")){const r=this._processDataFromViewText(e);return this._domDocument.createTextNode(r)}else{const r=e;if(this.mapViewToDom(r))if(r.getCustomProperty("editingPipeline:doNotReuseOnce"))this._elementsWithTemporaryCustomProperties.add(r);else return this.mapViewToDom(r);let i;if(r.is("documentFragment"))i=this._domDocument.createDocumentFragment(),t.bind&&this.bindDocumentFragments(i,r);else{if(r.is("uiElement"))return r.name==="$comment"?i=this._domDocument.createComment(r.getCustomProperty("$rawContent")):i=r.render(this._domDocument,this),t.bind&&this.bindElements(i,r),i;this._shouldRenameElement(r.name)?(uT(r.name),i=this._createReplacementDomElement(r.name)):r.hasAttribute("xmlns")?i=this._domDocument.createElementNS(r.getAttribute("xmlns"),r.name):i=this._domDocument.createElement(r.name),r.is("rawElement")&&r.render(i,this),t.bind&&this.bindElements(i,r);for(const o of r.getAttributeKeys())this.setDomElementAttribute(i,o,r.getAttribute(o),r)}if(t.withChildren!==!1)for(const o of this.viewChildrenToDom(r,t))i instanceof HTMLTemplateElement?i.content.appendChild(o):i.appendChild(o);return i}}setDomElementAttribute(e,t,r,i){const o=this.shouldRenderAttribute(t,r,e.tagName.toLowerCase())||i&&i.shouldRenderUnsafeAttribute(t);if(o||Ye("domconverter-unsafe-attribute-detected",{domElement:e,key:t,value:r}),!_M(t)){Ye("domconverter-invalid-attribute-detected",{domElement:e,key:t,value:r});return}e.hasAttribute(t)&&!o?e.removeAttribute(t):e.hasAttribute(of+t)&&o&&e.removeAttribute(of+t),e.setAttribute(o?t:of+t,r)}removeDomElementAttribute(e,t){t!=lT&&(e.removeAttribute(t),e.removeAttribute(of+t))}*viewChildrenToDom(e,t={}){const r=e.getFillerOffset&&e.getFillerOffset();let i=0;for(const o of e.getChildren()){r===i&&(yield this._getBlockFiller());const s=o.is("element")&&!!o.getCustomProperty("dataPipeline:transparentRendering")&&!ln(o.getAttributes());s&&this.renderingMode=="data"?yield*this.viewChildrenToDom(o,t):(s&&Ye("domconverter-transparent-rendering-unsupported-in-editing-pipeline",{viewElement:o}),yield this.viewToDom(o,t)),i++}r===i&&(yield this._getBlockFiller())}viewRangeToDom(e){const t=this.viewPositionToDom(e.start),r=this.viewPositionToDom(e.end),i=this._domDocument.createRange();return i.setStart(t.parent,t.offset),i.setEnd(r.parent,r.offset),i}viewPositionToDom(e){const t=e.parent;if(t.is("$text")){const r=this.findCorrespondingDomText(t);if(!r)return null;let i=e.offset;return ar(r)&&(i+=Qr),{parent:r,offset:i}}else{let r,i,o;if(e.offset===0){if(r=this.mapViewToDom(t),!r)return null;o=r.childNodes[0]}else{const a=e.nodeBefore;if(i=a.is("$text")?this.findCorrespondingDomText(a):this.mapViewToDom(a),!i)return null;r=i.parentNode,o=i.nextSibling}if(Ft(o)&&ar(o))return{parent:o,offset:Qr};const s=i?vc(i)+1:0;return{parent:r,offset:s}}}domToView(e,t={}){const r=[],i=this._domToView(e,t,r),o=i.next().value;return!o||(i.next(),this._processDomInlineNodes(null,r,t),o.is("$text")&&o.data.length==0)?null:o}*domChildrenToView(e,t={},r=[]){let i=[];e instanceof HTMLTemplateElement?i=[...e.content.childNodes]:i=[...e.childNodes];for(let o=0;o<i.length;o++){const s=i[o],a=this._domToView(s,t,r),l=a.next().value;l!==null&&(this._isBlockViewElement(l)&&this._processDomInlineNodes(e,r,t),yield l,a.next())}this._processDomInlineNodes(e,r,t)}domSelectionToView(e){if(iue(e))return new qi([]);if(e.rangeCount===1){let i=e.getRangeAt(0).startContainer;Ft(i)&&(i=i.parentNode);const o=this.fakeSelectionToView(i);if(o)return o}const t=this.isDomSelectionBackward(e),r=[];for(let i=0;i<e.rangeCount;i++){const o=e.getRangeAt(i),s=this.domRangeToView(o);s&&r.push(s)}return new qi(r,{backward:t})}domRangeToView(e){const t=this.domPositionToView(e.startContainer,e.startOffset),r=this.domPositionToView(e.endContainer,e.endOffset);return t&&r?new $e(t,r):null}domPositionToView(e,t=0){if(this.isBlockFiller(e))return this.domPositionToView(e.parentNode,vc(e));const r=this.mapDomToView(e);if(r&&(r.is("uiElement")||r.is("rawElement")))return ue._createBefore(r);if(Ft(e)){if(pa(e))return this.domPositionToView(e.parentNode,vc(e));const i=this.findCorrespondingViewText(e);let o=t;return i?(ar(e)&&(o-=Qr,o=o<0?0:o),new ue(i,o)):null}else{if(t===0){const i=this.mapDomToView(e);if(i)return new ue(i,0)}else{const i=e.childNodes[t-1];if(Ft(i)&&pa(i)||i&&this.isBlockFiller(i))return this.domPositionToView(i.parentNode,vc(i));const o=Ft(i)?this.findCorrespondingViewText(i):this.mapDomToView(i);if(o&&o.parent)return new ue(o.parent,o.index+1)}return null}}mapDomToView(e){return this.getHostViewElement(e)||this._domToViewMapping.get(e)}findCorrespondingViewText(e){if(pa(e))return null;const t=this.getHostViewElement(e);if(t)return t;const r=e.previousSibling;if(r){if(!this.isElement(r))return null;const i=this.mapDomToView(r);if(i){const o=i.nextSibling;return o instanceof kt?o:null}}else{const i=this.mapDomToView(e.parentNode);if(i){const o=i.getChild(0);return o instanceof kt?o:null}}return null}mapViewToDom(e){return this._viewToDomMapping.get(e)}findCorrespondingDomText(e){const t=e.previousSibling;return t&&this.mapViewToDom(t)?this.mapViewToDom(t).nextSibling:!t&&e.parent&&this.mapViewToDom(e.parent)?this.mapViewToDom(e.parent).childNodes[0]:null}focus(e){const t=this.mapViewToDom(e);if(t&&t.ownerDocument.activeElement!==t){const{scrollX:r,scrollY:i}=he.window,o=[];cT(t,s=>{const{scrollLeft:a,scrollTop:l}=s;o.push([a,l])}),t.focus(),cT(t,s=>{const[a,l]=o.shift();s.scrollLeft=a,s.scrollTop=l}),he.window.scrollTo(r,i)}}_clearDomSelection(){const e=this.mapViewToDom(this.document.selection.editableElement);if(!e)return;const t=e.ownerDocument.defaultView.getSelection(),r=this.domSelectionToView(t);r&&r.rangeCount>0&&t.removeAllRanges()}isElement(e){return e&&e.nodeType==Node.ELEMENT_NODE}isDocumentFragment(e){return e&&e.nodeType==Node.DOCUMENT_FRAGMENT_NODE}isBlockFiller(e){return this.blockFillerMode=="br"?e.isEqualNode(Qce):e.tagName==="BR"&&XM(e,this.blockElements)&&e.parentNode.childNodes.length===1?!0:e.isEqualNode(tue)||rue(e,this.blockElements)}isDomSelectionBackward(e){if(e.isCollapsed)return!1;const t=this._domDocument.createRange();try{t.setStart(e.anchorNode,e.anchorOffset),t.setEnd(e.focusNode,e.focusOffset)}catch{return!1}const r=t.collapsed;return t.detach(),r}getHostViewElement(e){const t=xle(e);for(t.pop();t.length;){const r=t.pop(),i=this._domToViewMapping.get(r);if(i&&(i.is("uiElement")||i.is("rawElement")))return i}return null}isDomSelectionCorrect(e){return this._isDomSelectionPositionCorrect(e.anchorNode,e.anchorOffset)&&this._isDomSelectionPositionCorrect(e.focusNode,e.focusOffset)}registerRawContentMatcher(e){this._rawContentElementMatcher.add(e)}registerInlineObjectMatcher(e){this._inlineObjectElementMatcher.add(e)}_clearTemporaryCustomProperties(){for(const e of this._elementsWithTemporaryCustomProperties)e._removeCustomProperty("editingPipeline:doNotReuseOnce");this._elementsWithTemporaryCustomProperties.clear()}_getBlockFiller(){switch(this.blockFillerMode){case"nbsp":return GM(this._domDocument);case"markedNbsp":return qM(this._domDocument);case"br":return KM(this._domDocument)}}_isDomSelectionPositionCorrect(e,t){if(Ft(e)&&ar(e)&&t<Qr||this.isElement(e)&&ar(e.childNodes[t]))return!1;const r=this.mapDomToView(e);return!(r&&(r.is("uiElement")||r.is("rawElement")))}*_domToView(e,t,r){if(this.isBlockFiller(e))return null;const i=this.getHostViewElement(e);if(i)return i;if(Ec(e)&&t.skipComments)return null;if(Ft(e)){if(pa(e))return null;{const o=e.data;if(o==="")return null;const s=new kt(this.document,o);return r.push(s),s}}else{let o=this.mapDomToView(e);if(o)return this._isInlineObjectElement(o)&&r.push(o),o;if(this.isDocumentFragment(e))o=new ms(this.document),t.bind&&this.bindDocumentFragments(e,o);else{o=this._createViewElement(e,t),t.bind&&this.bindElements(e,o);const a=e.attributes;if(a)for(let l=a.length,c=0;c<l;c++)o._setAttribute(a[c].name,a[c].value);if(this._isViewElementWithRawContent(o,t))return o._setCustomProperty("$rawContent",e.innerHTML),this._isBlockViewElement(o)||r.push(o),o;if(Ec(e))return o._setCustomProperty("$rawContent",e.data),o}yield o;const s=[];if(t.withChildren!==!1)for(const a of this.domChildrenToView(e,t,s))o._appendChild(a);if(this._isInlineObjectElement(o))r.push(o);else for(const a of s)r.push(a)}}_processDomInlineNodes(e,t,r){if(!t.length||e&&!this.isDocumentFragment(e)&&!this._isBlockDomElement(e))return;let i=!1;for(let o=0;o<t.length;o++){const s=t[o];if(!s.is("$text")){i=!1;continue}let a,l=!1;if(nue(s,this.preElements))a=oT(s.data);else{a=s.data.replace(/[ \n\t\r]{1,}/g," "),l=/[^\S\u00A0]/.test(a.charAt(a.length-1));const c=o>0?t[o-1]:null,u=o+1<t.length?t[o+1]:null,d=!c||c.is("element")&&c.name=="br"||i,f=u?!1:!ar(s.data);r.withChildren!==!1&&(d&&(a=a.replace(/^ /,"")),f&&(a=a.replace(/ $/,""))),a=oT(a),a=a.replace(/ \u00A0/g,"  ");const h=u&&u.is("element")&&u.name!="br",m=u&&u.is("$text")&&u.data.charAt(0)==" ";(/[ \u00A0]\u00A0$/.test(a)||!u||h||m)&&(a=a.replace(/\u00A0$/," ")),(d||c&&c.is("element")&&c.name!="br")&&(a=a.replace(/^\u00A0/," "))}a.length==0&&s.parent?(s._remove(),t.splice(o,1),o--):(s._data=a,i=l)}t.length=0}_processDataFromViewText(e){let t=e.data;if(e.getAncestors().some(r=>this.preElements.includes(r.name)))return t;if(t.charAt(0)==" "){const r=this._getTouchingInlineViewNode(e,!1);(r&&r.is("$textProxy")&&this._nodeEndsWithSpace(r)||!r)&&(t=" "+t.substr(1))}if(t.charAt(t.length-1)==" "){const r=this._getTouchingInlineViewNode(e,!0),i=r&&r.is("$textProxy")&&r.data.charAt(0)==" ";(t.charAt(t.length-2)==" "||!r||i)&&(t=t.substr(0,t.length-1)+" ")}return t.replace(/ {2}/g,"  ")}_nodeEndsWithSpace(e){if(e.getAncestors().some(r=>this.preElements.includes(r.name)))return!1;const t=this._processDataFromViewText(e);return t.charAt(t.length-1)==" "}_getTouchingInlineViewNode(e,t){const r=new ls({startPosition:t?ue._createAfter(e):ue._createBefore(e),direction:t?"forward":"backward"});for(const i of r){if(i.item.is("element","br"))return null;if(this._isInlineObjectElement(i.item))return i.item;if(i.item.is("containerElement"))return null;if(i.item.is("$textProxy"))return i.item}return null}_isBlockDomElement(e){return this.isElement(e)&&this.blockElements.includes(e.tagName.toLowerCase())}_isBlockViewElement(e){return e.is("element")&&this.blockElements.includes(e.name)}_isInlineObjectElement(e){return e.is("element")?e.name=="br"||this.inlineObjectElements.includes(e.name)||!!this._inlineObjectElementMatcher.match(e):!1}_createViewElement(e,t){if(Ec(e))return new Cg(this.document,"$comment");const r=t.keepOriginalCase?e.tagName:e.tagName.toLowerCase();return new ii(this.document,r)}_isViewElementWithRawContent(e,t){return t.withChildren!==!1&&e.is("element")&&!!this._rawContentElementMatcher.match(e)}_shouldRenameElement(e){const t=e.toLowerCase();return this.renderingMode==="editing"&&this.unsafeElements.includes(t)}_createReplacementDomElement(e,t){const r=this._domDocument.createElement("span");if(r.setAttribute(lT,e),t){for(;t.firstChild;)r.appendChild(t.firstChild);for(const i of t.getAttributeNames())r.setAttribute(i,t.getAttribute(i))}return r}}function nue(n,e){return n.getAncestors().some(t=>t.is("element")&&e.includes(t.name))}function cT(n,e){let t=n;for(;t;)e(t),t=t.parentElement}function rue(n,e){return n.isEqualNode(eue)&&XM(n,e)&&n.parentNode.childNodes.length===1}function XM(n,e){const t=n.parentNode;return!!t&&!!t.tagName&&e.includes(t.tagName.toLowerCase())}function uT(n){n==="script"&&Ye("domconverter-unsafe-script-element-detected"),n==="style"&&Ye("domconverter-unsafe-style-element-detected")}function iue(n){if(!Re.isGecko||!n.rangeCount)return!1;const e=n.getRangeAt(0).startContainer;try{Object.prototype.toString.call(e)}catch{return!0}return!1}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ki extends nr(){constructor(e){super(),this._isEnabled=!1,this.view=e,this.document=e.document}get isEnabled(){return this._isEnabled}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}destroy(){this.disable(),this.stopListening()}checkShouldIgnoreEventFromTarget(e){return e&&e.nodeType===3&&(e=e.parentNode),!e||e.nodeType!==1?!1:e.matches("[data-cke-ignore-events], [data-cke-ignore-events] *")}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Qa{constructor(e,t,r){this.view=e,this.document=e.document,this.domEvent=t,this.domTarget=t.target,nI(this,r)}get target(){return this.view.domConverter.mapDomToView(this.domTarget)}preventDefault(){this.domEvent.preventDefault()}stopPropagation(){this.domEvent.stopPropagation()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class $o extends ki{constructor(){super(...arguments),this.useCapture=!1}observe(e){(typeof this.domEventType=="string"?[this.domEventType]:this.domEventType).forEach(r=>{this.listenTo(e,r,(i,o)=>{this.isEnabled&&!this.checkShouldIgnoreEventFromTarget(o.target)&&this.onDomEvent(o)},{useCapture:this.useCapture})})}stopObserving(e){this.stopListening(e)}fire(e,t,r){this.isEnabled&&this.document.fire(e,new Qa(this.view,t,r))}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class oue extends $o{constructor(){super(...arguments),this.domEventType=["keydown","keyup"]}onDomEvent(e){const t={keyCode:e.keyCode,altKey:e.altKey,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,metaKey:e.metaKey,get keystroke(){return Za(this)}};this.fire(e.type,e,t)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class sue extends ki{constructor(e){super(e),this._fireSelectionChangeDoneDebounced=Aa(t=>{this.document.fire("selectionChangeDone",t)},200)}observe(){const e=this.document;e.on("arrowKey",(t,r)=>{e.selection.isFake&&this.isEnabled&&r.preventDefault()},{context:"$capture"}),e.on("arrowKey",(t,r)=>{e.selection.isFake&&this.isEnabled&&this._handleSelectionMove(r.keyCode)},{priority:"lowest"})}stopObserving(){}destroy(){super.destroy(),this._fireSelectionChangeDoneDebounced.cancel()}_handleSelectionMove(e){const t=this.document.selection,r=new qi(t.getRanges(),{backward:t.isBackward,fake:!1});(e==qe.arrowleft||e==qe.arrowup)&&r.setTo(r.getFirstPosition()),(e==qe.arrowright||e==qe.arrowdown)&&r.setTo(r.getLastPosition());const i={oldSelection:t,newSelection:r,domSelection:null};this.document.fire("selectionChange",i),this._fireSelectionChangeDoneDebounced(i)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let ZM=class extends ki{constructor(e){super(e),this._config={childList:!0,characterData:!0,subtree:!0},this.domConverter=e.domConverter,this.renderer=e._renderer,this._domElements=new Set,this._mutationObserver=new window.MutationObserver(this._onMutations.bind(this))}flush(){this._onMutations(this._mutationObserver.takeRecords())}observe(e){this._domElements.add(e),this.isEnabled&&this._mutationObserver.observe(e,this._config)}stopObserving(e){if(this._domElements.delete(e),this.isEnabled){this._mutationObserver.disconnect();for(const t of this._domElements)this._mutationObserver.observe(t,this._config)}}enable(){super.enable();for(const e of this._domElements)this._mutationObserver.observe(e,this._config)}disable(){super.disable(),this._mutationObserver.disconnect()}destroy(){super.destroy(),this._mutationObserver.disconnect()}_onMutations(e){if(e.length===0)return;const t=this.domConverter,r=new Set,i=new Set;for(const s of e){const a=t.mapDomToView(s.target);a&&(a.is("uiElement")||a.is("rawElement")||s.type==="childList"&&!this._isBogusBrMutation(s)&&i.add(a))}for(const s of e){const a=t.mapDomToView(s.target);if(!(a&&(a.is("uiElement")||a.is("rawElement")))&&s.type==="characterData"){const l=t.findCorrespondingViewText(s.target);l&&!i.has(l.parent)?r.add(l):!l&&ar(s.target)&&i.add(t.mapDomToView(s.target.parentNode))}}let o=!1;for(const s of r)o=!0,this.renderer.markToSync("text",s);for(const s of i){const a=t.mapViewToDom(s),l=Array.from(s.getChildren()),c=Array.from(t.domChildrenToView(a,{withChildren:!1}));KL(l,c,aue)||(o=!0,this.renderer.markToSync("children",s))}o&&this.view.forceRender()}_isBogusBrMutation(e){let t=null;return e.nextSibling===null&&e.removedNodes.length===0&&e.addedNodes.length==1&&(t=this.domConverter.domToView(e.addedNodes[0],{withChildren:!1})),t&&t.is("element","br")}};function aue(n,e){if(!Array.isArray(n))return n===e?!0:n.is("$text")&&e.is("$text")?n.data===e.data:!1}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class nm extends $o{constructor(e){super(e),this._isFocusChanging=!1,this.domEventType=["focus","blur"],this.useCapture=!0;const t=this.document;t.on("focus",()=>{this._isFocusChanging=!0,this._renderTimeoutId=setTimeout(()=>{this.flush(),e.change(()=>{})},50)}),t.on("blur",(r,i)=>{const o=t.selection.editableElement;(o===null||o===i.target)&&(t.isFocused=!1,this._isFocusChanging=!1,e.change(()=>{}))})}flush(){this._isFocusChanging&&(this._isFocusChanging=!1,this.document.isFocused=!0)}onDomEvent(e){this.fire(e.type,e)}destroy(){this._renderTimeoutId&&clearTimeout(this._renderTimeoutId),super.destroy()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class lue extends ki{constructor(e){super(e),this.mutationObserver=e.getObserver(ZM),this.focusObserver=e.getObserver(nm),this.selection=this.document.selection,this.domConverter=e.domConverter,this._documents=new WeakSet,this._fireSelectionChangeDoneDebounced=Aa(t=>{this.document.fire("selectionChangeDone",t)},200),this._clearInfiniteLoopInterval=setInterval(()=>this._clearInfiniteLoop(),1e3),this._documentIsSelectingInactivityTimeoutDebounced=Aa(()=>this.document.isSelecting=!1,5e3),this._loopbackCounter=0}observe(e){const t=e.ownerDocument,r=()=>{this.document.isSelecting=!0,this._documentIsSelectingInactivityTimeoutDebounced()},i=()=>{this.document.isSelecting&&(this._handleSelectionChange(null,t),this.document.isSelecting=!1,this._documentIsSelectingInactivityTimeoutDebounced.cancel())};this.listenTo(e,"selectstart",r,{priority:"highest"}),this.listenTo(e,"keydown",i,{priority:"highest",useCapture:!0}),this.listenTo(e,"keyup",i,{priority:"highest",useCapture:!0}),!this._documents.has(t)&&(this.listenTo(t,"mouseup",i,{priority:"highest",useCapture:!0}),this.listenTo(t,"selectionchange",(o,s)=>{this.document.isComposing&&!Re.isAndroid||(this._handleSelectionChange(s,t),this._documentIsSelectingInactivityTimeoutDebounced())}),this._documents.add(t))}stopObserving(e){this.stopListening(e)}destroy(){super.destroy(),clearInterval(this._clearInfiniteLoopInterval),this._fireSelectionChangeDoneDebounced.cancel(),this._documentIsSelectingInactivityTimeoutDebounced.cancel()}_reportInfiniteLoop(){}_handleSelectionChange(e,t){if(!this.isEnabled)return;const r=t.defaultView.getSelection();if(this.checkShouldIgnoreEventFromTarget(r.anchorNode))return;this.mutationObserver.flush();const i=this.domConverter.domSelectionToView(r);if(i.rangeCount==0){this.view.hasDomSelection=!1;return}if(this.view.hasDomSelection=!0,this.focusObserver.flush(),!(this.selection.isEqual(i)&&this.domConverter.isDomSelectionCorrect(r))){if(++this._loopbackCounter>60){this._reportInfiniteLoop();return}if(this.selection.isSimilar(i))this.view.forceRender();else{const o={oldSelection:this.selection,newSelection:i,domSelection:r};this.document.fire("selectionChange",o),this._fireSelectionChangeDoneDebounced(o)}}}_clearInfiniteLoop(){this._loopbackCounter=0}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class cue extends $o{constructor(e){super(e),this.domEventType=["compositionstart","compositionupdate","compositionend"];const t=this.document;t.on("compositionstart",()=>{t.isComposing=!0},{priority:"low"}),t.on("compositionend",()=>{t.isComposing=!1},{priority:"low"})}onDomEvent(e){this.fire(e.type,e,{data:e.data})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class JM{constructor(e,t={}){this._files=t.cacheFiles?dT(e):null,this._native=e}get files(){return this._files||(this._files=dT(this._native)),this._files}get types(){return this._native.types}getData(e){return this._native.getData(e)}setData(e,t){this._native.setData(e,t)}set effectAllowed(e){this._native.effectAllowed=e}get effectAllowed(){return this._native.effectAllowed}set dropEffect(e){this._native.dropEffect=e}get dropEffect(){return this._native.dropEffect}setDragImage(e,t,r){this._native.setDragImage(e,t,r)}get isCanceled(){return this._native.dropEffect=="none"||!!this._native.mozUserCancelled}}function dT(n){const e=Array.from(n.files||[]),t=Array.from(n.items||[]);return e.length?e:t.filter(r=>r.kind==="file").map(r=>r.getAsFile())}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class uue extends $o{constructor(){super(...arguments),this.domEventType="beforeinput"}onDomEvent(e){const t=e.getTargetRanges(),r=this.view,i=r.document;let o=null,s=null,a=[];if(e.dataTransfer&&(o=new JM(e.dataTransfer)),e.data!==null?s=e.data:o&&(s=o.getData("text/plain")),i.selection.isFake)a=Array.from(i.selection.getRanges());else if(t.length)a=t.map(l=>{const c=r.domConverter.domPositionToView(l.startContainer,l.startOffset),u=r.domConverter.domPositionToView(l.endContainer,l.endOffset);if(c)return r.createRange(c,u);if(u)return r.createRange(u)}).filter(l=>!!l);else if(Re.isAndroid){const l=e.target.ownerDocument.defaultView.getSelection();a=Array.from(r.domConverter.domSelectionToView(l).getRanges())}if(Re.isAndroid&&e.inputType=="insertCompositionText"&&s&&s.endsWith(`
`)){this.fire(e.type,e,{inputType:"insertParagraph",targetRanges:[r.createRange(a[0].end)]});return}if(e.inputType=="insertText"&&s&&s.includes(`
`)){const l=s.split(/\n{1,2}/g);let c=a;for(let u=0;u<l.length;u++){const d=l[u];d!=""&&(this.fire(e.type,e,{data:d,dataTransfer:o,targetRanges:c,inputType:e.inputType,isComposing:e.isComposing}),c=[i.selection.getFirstRange()]),u+1<l.length&&(this.fire(e.type,e,{inputType:"insertParagraph",targetRanges:c}),c=[i.selection.getFirstRange()])}return}this.fire(e.type,e,{data:s,dataTransfer:o,targetRanges:a,inputType:e.inputType,isComposing:e.isComposing})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class due extends ki{constructor(e){super(e),this.document.on("keydown",(t,r)=>{if(this.isEnabled&&Lle(r.keyCode)){const i=new Tl(this.document,"arrowKey",this.document.selection.getFirstRange());this.document.fire(i,r),i.stop.called&&t.stop()}})}observe(){}stopObserving(){}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class fue extends ki{constructor(e){super(e);const t=this.document;t.on("keydown",(r,i)=>{if(!this.isEnabled||i.keyCode!=qe.tab||i.ctrlKey)return;const o=new Tl(t,"tab",t.selection.getFirstRange());t.fire(o,i),o.stop.called&&r.stop()})}observe(){}stopObserving(){}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class hue extends ct(){constructor(e){super(),this.domRoots=new Map,this._initialDomRootAttributes=new WeakMap,this._observers=new Map,this._ongoingChange=!1,this._postFixersInProgress=!1,this._renderingDisabled=!1,this._hasChangedSinceTheLastRendering=!1,this.document=new jM(e),this.domConverter=new YM(this.document),this.set("isRenderingInProgress",!1),this.set("hasDomSelection",!1),this._renderer=new Uce(this.domConverter,this.document.selection),this._renderer.bind("isFocused","isSelecting","isComposing").to(this.document,"isFocused","isSelecting","isComposing"),this._writer=new HM(this.document),this.addObserver(ZM),this.addObserver(nm),this.addObserver(lue),this.addObserver(oue),this.addObserver(sue),this.addObserver(cue),this.addObserver(due),this.addObserver(uue),this.addObserver(fue),Wce(this),Bce(this),this.on("render",()=>{this._render(),this.document.fire("layoutChanged"),this._hasChangedSinceTheLastRendering=!1}),this.listenTo(this.document.selection,"change",()=>{this._hasChangedSinceTheLastRendering=!0}),this.listenTo(this.document,"change:isFocused",()=>{this._hasChangedSinceTheLastRendering=!0}),Re.isiOS&&this.listenTo(this.document,"blur",(t,r)=>{this.domConverter.mapDomToView(r.domEvent.relatedTarget)||this.domConverter._clearDomSelection()})}attachDomRoot(e,t="main"){const r=this.document.getRoot(t);r._name=e.tagName.toLowerCase();const i={};for(const{name:s,value:a}of Array.from(e.attributes))i[s]=a,s==="class"?this._writer.addClass(a.split(" "),r):this._writer.setAttribute(s,a,r);this._initialDomRootAttributes.set(e,i);const o=()=>{this._writer.setAttribute("contenteditable",(!r.isReadOnly).toString(),r),r.isReadOnly?this._writer.addClass("ck-read-only",r):this._writer.removeClass("ck-read-only",r)};o(),this.domRoots.set(t,e),this.domConverter.bindElements(e,r),this._renderer.markToSync("children",r),this._renderer.markToSync("attributes",r),this._renderer.domDocuments.add(e.ownerDocument),r.on("change:children",(s,a)=>this._renderer.markToSync("children",a)),r.on("change:attributes",(s,a)=>this._renderer.markToSync("attributes",a)),r.on("change:text",(s,a)=>this._renderer.markToSync("text",a)),r.on("change:isReadOnly",()=>this.change(o)),r.on("change",()=>{this._hasChangedSinceTheLastRendering=!0});for(const s of this._observers.values())s.observe(e,t)}detachDomRoot(e){const t=this.domRoots.get(e);Array.from(t.attributes).forEach(({name:i})=>t.removeAttribute(i));const r=this._initialDomRootAttributes.get(t);for(const i in r)t.setAttribute(i,r[i]);this.domRoots.delete(e),this.domConverter.unbindDomElement(t);for(const i of this._observers.values())i.stopObserving(t)}getDomRoot(e="main"){return this.domRoots.get(e)}addObserver(e){let t=this._observers.get(e);if(t)return t;t=new e(this),this._observers.set(e,t);for(const[r,i]of this.domRoots)t.observe(i,r);return t.enable(),t}getObserver(e){return this._observers.get(e)}disableObservers(){for(const e of this._observers.values())e.disable()}enableObservers(){for(const e of this._observers.values())e.enable()}scrollToTheSelection({alignToTop:e,forceScroll:t,viewportOffset:r=20,ancestorOffset:i=20}={}){const o=this.document.selection.getFirstRange();if(!o)return;const s=Lr({alignToTop:e,forceScroll:t,viewportOffset:r,ancestorOffset:i});typeof r=="number"&&(r={top:r,bottom:r,left:r,right:r});const a={target:this.domConverter.viewRangeToDom(o),viewportOffset:r,ancestorOffset:i,alignToTop:e,forceScroll:t};this.fire("scrollToTheSelection",a,s),Ile(a)}focus(){if(!this.document.isFocused){const e=this.document.selection.editableElement;e&&(this.domConverter.focus(e),this.forceRender())}}change(e){if(this.isRenderingInProgress||this._postFixersInProgress)throw new M("cannot-change-view-tree",this);try{if(this._ongoingChange)return e(this._writer);this._ongoingChange=!0;const t=e(this._writer);return this._ongoingChange=!1,!this._renderingDisabled&&this._hasChangedSinceTheLastRendering&&(this._postFixersInProgress=!0,this.document._callPostFixers(this._writer),this._postFixersInProgress=!1,this.fire("render")),t}catch(t){/* istanbul ignore next -- @preserve */M.rethrowUnexpectedError(t,this)}}forceRender(){this._hasChangedSinceTheLastRendering=!0,this.getObserver(nm).flush(),this.change(()=>{})}destroy(){for(const e of this._observers.values())e.destroy();this.document.destroy(),this.stopListening()}createPositionAt(e,t){return ue._createAt(e,t)}createPositionAfter(e){return ue._createAfter(e)}createPositionBefore(e){return ue._createBefore(e)}createRange(e,t){return new $e(e,t)}createRangeOn(e){return $e._createOn(e)}createRangeIn(e){return $e._createIn(e)}createSelection(...e){return new qi(...e)}_disableRendering(e){this._renderingDisabled=e,e==!1&&this.change(()=>{})}_render(){this.isRenderingInProgress=!0,this.disableObservers(),this._renderer.render(),this.enableObservers(),this.isRenderingInProgress=!1}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Vo{is(){throw new Error("is() method is abstract")}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let Ns=class extends Vo{constructor(e){super(),this.parent=null,this._attrs=to(e)}get document(){return null}get index(){let e;if(!this.parent)return null;if((e=this.parent.getChildIndex(this))===null)throw new M("model-node-not-found-in-parent",this);return e}get startOffset(){let e;if(!this.parent)return null;if((e=this.parent.getChildStartOffset(this))===null)throw new M("model-node-not-found-in-parent",this);return e}get offsetSize(){return 1}get endOffset(){return this.parent?this.startOffset+this.offsetSize:null}get nextSibling(){const e=this.index;return e!==null&&this.parent.getChild(e+1)||null}get previousSibling(){const e=this.index;return e!==null&&this.parent.getChild(e-1)||null}get root(){let e=this;for(;e.parent;)e=e.parent;return e}isAttached(){return this.parent===null?!1:this.root.isAttached()}getPath(){const e=[];let t=this;for(;t.parent;)e.unshift(t.startOffset),t=t.parent;return e}getAncestors(e={}){const t=[];let r=e.includeSelf?this:this.parent;for(;r;)t[e.parentFirst?"push":"unshift"](r),r=r.parent;return t}getCommonAncestor(e,t={}){const r=this.getAncestors(t),i=e.getAncestors(t);let o=0;for(;r[o]==i[o]&&r[o];)o++;return o===0?null:r[o-1]}isBefore(e){if(this==e||this.root!==e.root)return!1;const t=this.getPath(),r=e.getPath(),i=Tn(t,r);switch(i){case"prefix":return!0;case"extension":return!1;default:return t[i]<r[i]}}isAfter(e){return this==e||this.root!==e.root?!1:!this.isBefore(e)}hasAttribute(e){return this._attrs.has(e)}getAttribute(e){return this._attrs.get(e)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}toJSON(){const e={};return this._attrs.size&&(e.attributes=Array.from(this._attrs).reduce((t,r)=>(t[r[0]]=r[1],t),{})),e}_clone(e){return new this.constructor(this._attrs)}_remove(){this.parent._removeChildren(this.index)}_setAttribute(e,t){this._attrs.set(e,t)}_setAttributesTo(e){this._attrs=to(e)}_removeAttribute(e){return this._attrs.delete(e)}_clearAttributes(){this._attrs.clear()}};Ns.prototype.is=function(n){return n==="node"||n==="model:node"};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class kc{constructor(e){this._nodes=[],e&&this._insertNodes(0,e)}[Symbol.iterator](){return this._nodes[Symbol.iterator]()}get length(){return this._nodes.length}get maxOffset(){return this._nodes.reduce((e,t)=>e+t.offsetSize,0)}getNode(e){return this._nodes[e]||null}getNodeIndex(e){const t=this._nodes.indexOf(e);return t==-1?null:t}getNodeStartOffset(e){const t=this.getNodeIndex(e);return t===null?null:this._nodes.slice(0,t).reduce((r,i)=>r+i.offsetSize,0)}indexToOffset(e){if(e==this._nodes.length)return this.maxOffset;const t=this._nodes[e];if(!t)throw new M("model-nodelist-index-out-of-bounds",this);return this.getNodeStartOffset(t)}offsetToIndex(e){let t=0;for(const r of this._nodes){if(e>=t&&e<t+r.offsetSize)return this.getNodeIndex(r);t+=r.offsetSize}if(t!=e)throw new M("model-nodelist-offset-out-of-bounds",this,{offset:e,nodeList:this});return this.length}_insertNodes(e,t){for(const r of t)if(!(r instanceof Ns))throw new M("model-nodelist-insertnodes-not-node",this);this._nodes=Zle(this._nodes,Array.from(t),e,0)}_removeNodes(e,t=1){return this._nodes.splice(e,t)}toJSON(){return this._nodes.map(e=>e.toJSON())}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class mt extends Ns{constructor(e,t){super(t),this._data=e||""}get offsetSize(){return this.data.length}get data(){return this._data}toJSON(){const e=super.toJSON();return e.data=this.data,e}_clone(){return new mt(this.data,this.getAttributes())}static fromJSON(e){return new mt(e.data,e.attributes)}}mt.prototype.is=function(n){return n==="$text"||n==="model:$text"||n==="text"||n==="model:text"||n==="node"||n==="model:node"};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ei extends Vo{constructor(e,t,r){if(super(),this.textNode=e,t<0||t>e.offsetSize)throw new M("model-textproxy-wrong-offsetintext",this);if(r<0||t+r>e.offsetSize)throw new M("model-textproxy-wrong-length",this);this.data=e.data.substring(t,t+r),this.offsetInText=t}get startOffset(){return this.textNode.startOffset!==null?this.textNode.startOffset+this.offsetInText:null}get offsetSize(){return this.data.length}get endOffset(){return this.startOffset!==null?this.startOffset+this.offsetSize:null}get isPartial(){return this.offsetSize!==this.textNode.offsetSize}get parent(){return this.textNode.parent}get root(){return this.textNode.root}getPath(){const e=this.textNode.getPath();return e.length>0&&(e[e.length-1]+=this.offsetInText),e}getAncestors(e={}){const t=[];let r=e.includeSelf?this:this.parent;for(;r;)t[e.parentFirst?"push":"unshift"](r),r=r.parent;return t}hasAttribute(e){return this.textNode.hasAttribute(e)}getAttribute(e){return this.textNode.getAttribute(e)}getAttributes(){return this.textNode.getAttributes()}getAttributeKeys(){return this.textNode.getAttributeKeys()}}ei.prototype.is=function(n){return n==="$textProxy"||n==="model:$textProxy"||n==="textProxy"||n==="model:textProxy"};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let Tt=class Df extends Ns{constructor(e,t,r){super(t),this._children=new kc,this.name=e,r&&this._insertChild(0,r)}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return this.childCount===0}getChild(e){return this._children.getNode(e)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(e){return this._children.getNodeIndex(e)}getChildStartOffset(e){return this._children.getNodeStartOffset(e)}offsetToIndex(e){return this._children.offsetToIndex(e)}getNodeByPath(e){let t=this;for(const r of e)t=t.getChild(t.offsetToIndex(r));return t}findAncestor(e,t={}){let r=t.includeSelf?this:this.parent;for(;r;){if(r.name===e)return r;r=r.parent}return null}toJSON(){const e=super.toJSON();if(e.name=this.name,this._children.length>0){e.children=[];for(const t of this._children)e.children.push(t.toJSON())}return e}_clone(e=!1){const t=e?Array.from(this._children).map(r=>r._clone(!0)):void 0;return new Df(this.name,this.getAttributes(),t)}_appendChild(e){this._insertChild(this.childCount,e)}_insertChild(e,t){const r=mue(t);for(const i of r)i.parent!==null&&i._remove(),i.parent=this;this._children._insertNodes(e,r)}_removeChildren(e,t=1){const r=this._children._removeNodes(e,t);for(const i of r)i.parent=null;return r}static fromJSON(e){let t;if(e.children){t=[];for(const r of e.children)r.name?t.push(Df.fromJSON(r)):t.push(mt.fromJSON(r))}return new Df(e.name,e.attributes,t)}};Tt.prototype.is=function(n,e){return e?e===this.name&&(n==="element"||n==="model:element"):n==="element"||n==="model:element"||n==="node"||n==="model:node"};function mue(n){return typeof n=="string"?[new mt(n)]:(pr(n)||(n=[n]),Array.from(n).map(e=>typeof e=="string"?new mt(e):e instanceof ei?new mt(e.data,e.getAttributes()):e))}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Hi{constructor(e){if(!e||!e.boundaries&&!e.startPosition)throw new M("model-tree-walker-no-start-position",null);const t=e.direction||"forward";if(t!="forward"&&t!="backward")throw new M("model-tree-walker-unknown-direction",e,{direction:t});this.direction=t,this.boundaries=e.boundaries||null,e.startPosition?this._position=e.startPosition.clone():this._position=J._createAt(this.boundaries[this.direction=="backward"?"end":"start"]),this.position.stickiness="toNone",this.singleCharacters=!!e.singleCharacters,this.shallow=!!e.shallow,this.ignoreElementEnd=!!e.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null,this._visitedParent=this.position.parent}[Symbol.iterator](){return this}get position(){return this._position}skip(e){let t,r,i,o;do i=this.position,o=this._visitedParent,{done:t,value:r}=this.next();while(!t&&e(r));t||(this._position=i,this._visitedParent=o)}next(){return this.direction=="forward"?this._next():this._previous()}_next(){const e=this.position,t=this.position.clone(),r=this._visitedParent;if(r.parent===null&&t.offset===r.maxOffset)return{done:!0,value:void 0};if(r===this._boundaryEndParent&&t.offset==this.boundaries.end.offset)return{done:!0,value:void 0};const i=Pc(t,r),o=i||QM(t,r,i);if(o instanceof Tt){if(!this.shallow)t.path.push(0),this._visitedParent=o;else{if(this.boundaries&&this.boundaries.end.isBefore(t))return{done:!0,value:void 0};t.offset++}return this._position=t,Uo("elementStart",o,e,t,1)}if(o instanceof mt){let s;if(this.singleCharacters)s=1;else{let c=o.endOffset;this._boundaryEndParent==r&&this.boundaries.end.offset<c&&(c=this.boundaries.end.offset),s=c-t.offset}const a=t.offset-o.startOffset,l=new ei(o,a,s);return t.offset+=s,this._position=t,Uo("text",l,e,t,s)}return t.path.pop(),t.offset++,this._position=t,this._visitedParent=r.parent,this.ignoreElementEnd?this._next():Uo("elementEnd",r,e,t)}_previous(){const e=this.position,t=this.position.clone(),r=this._visitedParent;if(r.parent===null&&t.offset===0)return{done:!0,value:void 0};if(r==this._boundaryStartParent&&t.offset==this.boundaries.start.offset)return{done:!0,value:void 0};const i=t.parent,o=Pc(t,i),s=o||eD(t,i,o);if(s instanceof Tt)return t.offset--,this.shallow?(this._position=t,Uo("elementStart",s,e,t,1)):(t.path.push(s.maxOffset),this._position=t,this._visitedParent=s,this.ignoreElementEnd?this._previous():Uo("elementEnd",s,e,t));if(s instanceof mt){let a;if(this.singleCharacters)a=1;else{let u=s.startOffset;this._boundaryStartParent==r&&this.boundaries.start.offset>u&&(u=this.boundaries.start.offset),a=t.offset-u}const l=t.offset-s.startOffset,c=new ei(s,l-a,a);return t.offset-=a,this._position=t,Uo("text",c,e,t,a)}return t.path.pop(),this._position=t,this._visitedParent=r.parent,Uo("elementStart",r,e,t,1)}}function Uo(n,e,t,r,i){return{done:!1,value:{type:n,item:e,previousPosition:t,nextPosition:r,length:i}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class J extends Vo{constructor(e,t,r="toNone"){if(super(),!e.is("element")&&!e.is("documentFragment"))throw new M("model-position-root-invalid",e);if(!(t instanceof Array)||t.length===0)throw new M("model-position-path-incorrect-format",e,{path:t});e.is("rootElement")?t=t.slice():(t=[...e.getPath(),...t],e=e.root),this.root=e,this.path=t,this.stickiness=r}get offset(){return this.path[this.path.length-1]}set offset(e){this.path[this.path.length-1]=e}get parent(){let e=this.root;for(let t=0;t<this.path.length-1;t++)if(e=e.getChild(e.offsetToIndex(this.path[t])),!e)throw new M("model-position-path-incorrect",this,{position:this});if(e.is("$text"))throw new M("model-position-path-incorrect",this,{position:this});return e}get index(){return this.parent.offsetToIndex(this.offset)}get textNode(){return Pc(this,this.parent)}get nodeAfter(){const e=this.parent;return QM(this,e,Pc(this,e))}get nodeBefore(){const e=this.parent;return eD(this,e,Pc(this,e))}get isAtStart(){return this.offset===0}get isAtEnd(){return this.offset==this.parent.maxOffset}compareWith(e){if(this.root!=e.root)return"different";const t=Tn(this.path,e.path);switch(t){case"same":return"same";case"prefix":return"before";case"extension":return"after";default:return this.path[t]<e.path[t]?"before":"after"}}getLastMatchingPosition(e,t={}){t.startPosition=this;const r=new Hi(t);return r.skip(e),r.position}getParentPath(){return this.path.slice(0,-1)}getAncestors(){const e=this.parent;return e.is("documentFragment")?[e]:e.getAncestors({includeSelf:!0})}findAncestor(e){const t=this.parent;return t.is("element")?t.findAncestor(e,{includeSelf:!0}):null}getCommonPath(e){if(this.root!=e.root)return[];const t=Tn(this.path,e.path),r=typeof t=="string"?Math.min(this.path.length,e.path.length):t;return this.path.slice(0,r)}getCommonAncestor(e){const t=this.getAncestors(),r=e.getAncestors();let i=0;for(;t[i]==r[i]&&t[i];)i++;return i===0?null:t[i-1]}getShiftedBy(e){const t=this.clone(),r=t.offset+e;return t.offset=r<0?0:r,t}isAfter(e){return this.compareWith(e)=="after"}isBefore(e){return this.compareWith(e)=="before"}isEqual(e){return this.compareWith(e)=="same"}isTouching(e){if(this.root!==e.root)return!1;const t=Math.min(this.path.length,e.path.length);for(let r=0;r<t;r++){const i=this.path[r]-e.path[r];if(i<-1||i>1)return!1;if(i===1)return fT(e,this,r);if(i===-1)return fT(this,e,r)}return this.path.length===e.path.length?!0:this.path.length>e.path.length?wy(this.path,t):wy(e.path,t)}hasSameParentAs(e){if(this.root!==e.root)return!1;const t=this.getParentPath(),r=e.getParentPath();return Tn(t,r)=="same"}getTransformedByOperation(e){let t;switch(e.type){case"insert":t=this._getTransformedByInsertOperation(e);break;case"move":case"remove":case"reinsert":t=this._getTransformedByMoveOperation(e);break;case"split":t=this._getTransformedBySplitOperation(e);break;case"merge":t=this._getTransformedByMergeOperation(e);break;default:t=J._createAt(this);break}return t}_getTransformedByInsertOperation(e){return this._getTransformedByInsertion(e.position,e.howMany)}_getTransformedByMoveOperation(e){return this._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany)}_getTransformedBySplitOperation(e){const t=e.movedRange;return t.containsPosition(this)||t.start.isEqual(this)&&this.stickiness=="toNext"?this._getCombined(e.splitPosition,e.moveTargetPosition):e.graveyardPosition?this._getTransformedByMove(e.graveyardPosition,e.insertionPosition,1):this._getTransformedByInsertion(e.insertionPosition,1)}_getTransformedByMergeOperation(e){const t=e.movedRange,r=t.containsPosition(this)||t.start.isEqual(this);let i;return r?(i=this._getCombined(e.sourcePosition,e.targetPosition),e.sourcePosition.isBefore(e.targetPosition)&&(i=i._getTransformedByDeletion(e.deletionPosition,1))):this.isEqual(e.deletionPosition)?i=J._createAt(e.deletionPosition):i=this._getTransformedByMove(e.deletionPosition,e.graveyardPosition,1),i}_getTransformedByDeletion(e,t){const r=J._createAt(this);if(this.root!=e.root)return r;if(Tn(e.getParentPath(),this.getParentPath())=="same"){if(e.offset<this.offset){if(e.offset+t>this.offset)return null;r.offset-=t}}else if(Tn(e.getParentPath(),this.getParentPath())=="prefix"){const i=e.path.length-1;if(e.offset<=this.path[i]){if(e.offset+t>this.path[i])return null;r.path[i]-=t}}return r}_getTransformedByInsertion(e,t){const r=J._createAt(this);if(this.root!=e.root)return r;if(Tn(e.getParentPath(),this.getParentPath())=="same")(e.offset<this.offset||e.offset==this.offset&&this.stickiness!="toPrevious")&&(r.offset+=t);else if(Tn(e.getParentPath(),this.getParentPath())=="prefix"){const i=e.path.length-1;e.offset<=this.path[i]&&(r.path[i]+=t)}return r}_getTransformedByMove(e,t,r){if(t=t._getTransformedByDeletion(e,r),e.isEqual(t))return J._createAt(this);const i=this._getTransformedByDeletion(e,r);return i===null||e.isEqual(this)&&this.stickiness=="toNext"||e.getShiftedBy(r).isEqual(this)&&this.stickiness=="toPrevious"?this._getCombined(e,t):i._getTransformedByInsertion(t,r)}_getCombined(e,t){const r=e.path.length-1,i=J._createAt(t);return i.stickiness=this.stickiness,i.offset=i.offset+this.path[r]-e.offset,i.path=[...i.path,...this.path.slice(r+1)],i}toJSON(){return{root:this.root.toJSON(),path:Array.from(this.path),stickiness:this.stickiness}}clone(){return new this.constructor(this.root,this.path,this.stickiness)}static _createAt(e,t,r="toNone"){if(e instanceof J)return new J(e.root,e.path,e.stickiness);{const i=e;if(t=="end")t=i.maxOffset;else{if(t=="before")return this._createBefore(i,r);if(t=="after")return this._createAfter(i,r);if(t!==0&&!t)throw new M("model-createpositionat-offset-required",[this,e])}if(!i.is("element")&&!i.is("documentFragment"))throw new M("model-position-parent-incorrect",[this,e]);const o=i.getPath();return o.push(t),new this(i.root,o,r)}}static _createAfter(e,t){if(!e.parent)throw new M("model-position-after-root",[this,e],{root:e});return this._createAt(e.parent,e.endOffset,t)}static _createBefore(e,t){if(!e.parent)throw new M("model-position-before-root",e,{root:e});return this._createAt(e.parent,e.startOffset,t)}static fromJSON(e,t){if(e.root==="$graveyard"){const r=new J(t.graveyard,e.path);return r.stickiness=e.stickiness,r}if(!t.getRoot(e.root))throw new M("model-position-fromjson-no-root",t,{rootName:e.root});return new J(t.getRoot(e.root),e.path,e.stickiness)}}J.prototype.is=function(n){return n==="position"||n==="model:position"};function Pc(n,e){const t=e.getChild(e.offsetToIndex(n.offset));return t&&t.is("$text")&&t.startOffset<n.offset?t:null}function QM(n,e,t){return t!==null?null:e.getChild(e.offsetToIndex(n.offset))}function eD(n,e,t){return t!==null?null:e.getChild(e.offsetToIndex(n.offset)-1)}function fT(n,e,t){return!(t+1===n.path.length||!wy(e.path,t+1)||!gue(n,t+1))}function wy(n,e){for(;e<n.length;){if(n[e]!==0)return!1;e++}return!0}function gue(n,e){let t=n.parent,r=n.path.length-1,i=0;for(;r>=e;){if(n.path[r]+i!==t.maxOffset)return!1;i=1,r--,t=t.parent}return!0}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class V extends Vo{constructor(e,t){super(),this.start=J._createAt(e),this.end=t?J._createAt(t):J._createAt(e),this.start.stickiness=this.isCollapsed?"toNone":"toNext",this.end.stickiness=this.isCollapsed?"toNone":"toPrevious"}*[Symbol.iterator](){yield*new Hi({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){const e=this.start.getParentPath(),t=this.end.getParentPath();return Tn(e,t)=="same"}get root(){return this.start.root}containsPosition(e){return e.isAfter(this.start)&&e.isBefore(this.end)}containsRange(e,t=!1){e.isCollapsed&&(t=!1);const r=this.containsPosition(e.start)||t&&this.start.isEqual(e.start),i=this.containsPosition(e.end)||t&&this.end.isEqual(e.end);return r&&i}containsItem(e){const t=J._createBefore(e);return this.containsPosition(t)||this.start.isEqual(t)}isEqual(e){return this.start.isEqual(e.start)&&this.end.isEqual(e.end)}isIntersecting(e){return this.start.isBefore(e.end)&&this.end.isAfter(e.start)}getDifference(e){const t=[];return this.isIntersecting(e)?(this.containsPosition(e.start)&&t.push(new V(this.start,e.start)),this.containsPosition(e.end)&&t.push(new V(e.end,this.end))):t.push(new V(this.start,this.end)),t}getIntersection(e){if(this.isIntersecting(e)){let t=this.start,r=this.end;return this.containsPosition(e.start)&&(t=e.start),this.containsPosition(e.end)&&(r=e.end),new V(t,r)}return null}getJoined(e,t=!1){let r=this.isIntersecting(e);if(r||(this.start.isBefore(e.start)?r=t?this.end.isTouching(e.start):this.end.isEqual(e.start):r=t?e.end.isTouching(this.start):e.end.isEqual(this.start)),!r)return null;let i=this.start,o=this.end;return e.start.isBefore(i)&&(i=e.start),e.end.isAfter(o)&&(o=e.end),new V(i,o)}getMinimalFlatRanges(){const e=[],t=this.start.getCommonPath(this.end).length,r=J._createAt(this.start);let i=r.parent;for(;r.path.length>t+1;){const o=i.maxOffset-r.offset;o!==0&&e.push(new V(r,r.getShiftedBy(o))),r.path=r.path.slice(0,-1),r.offset++,i=i.parent}for(;r.path.length<=this.end.path.length;){const o=this.end.path[r.path.length-1],s=o-r.offset;s!==0&&e.push(new V(r,r.getShiftedBy(s))),r.offset=o,r.path.push(0)}return e}getWalker(e={}){return e.boundaries=this,new Hi(e)}*getItems(e={}){e.boundaries=this,e.ignoreElementEnd=!0;const t=new Hi(e);for(const r of t)yield r.item}*getPositions(e={}){e.boundaries=this;const t=new Hi(e);yield t.position;for(const r of t)yield r.nextPosition}getTransformedByOperation(e){switch(e.type){case"insert":return this._getTransformedByInsertOperation(e);case"move":case"remove":case"reinsert":return this._getTransformedByMoveOperation(e);case"split":return[this._getTransformedBySplitOperation(e)];case"merge":return[this._getTransformedByMergeOperation(e)]}return[new V(this.start,this.end)]}getTransformedByOperations(e){const t=[new V(this.start,this.end)];for(const r of e)for(let i=0;i<t.length;i++){const o=t[i].getTransformedByOperation(r);t.splice(i,1,...o),i+=o.length-1}for(let r=0;r<t.length;r++){const i=t[r];for(let o=r+1;o<t.length;o++){const s=t[o];(i.containsRange(s)||s.containsRange(i)||i.isEqual(s))&&t.splice(o,1)}}return t}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;const e=this.start.nodeAfter,t=this.end.nodeBefore;return e&&e.is("element")&&e===t?e:null}toJSON(){return{start:this.start.toJSON(),end:this.end.toJSON()}}clone(){return new this.constructor(this.start,this.end)}_getTransformedByInsertOperation(e,t=!1){return this._getTransformedByInsertion(e.position,e.howMany,t)}_getTransformedByMoveOperation(e,t=!1){const r=e.sourcePosition,i=e.howMany,o=e.targetPosition;return this._getTransformedByMove(r,o,i,t)}_getTransformedBySplitOperation(e){const t=this.start._getTransformedBySplitOperation(e);let r=this.end._getTransformedBySplitOperation(e);return this.end.isEqual(e.insertionPosition)&&(r=this.end.getShiftedBy(1)),t.root!=r.root&&(r=this.end.getShiftedBy(-1)),new V(t,r)}_getTransformedByMergeOperation(e){if(this.start.isEqual(e.targetPosition)&&this.end.isEqual(e.deletionPosition))return new V(this.start);let t=this.start._getTransformedByMergeOperation(e),r=this.end._getTransformedByMergeOperation(e);return t.root!=r.root&&(r=this.end.getShiftedBy(-1)),t.isAfter(r)?(e.sourcePosition.isBefore(e.targetPosition)?(t=J._createAt(r),t.offset=0):(e.deletionPosition.isEqual(t)||(r=e.deletionPosition),t=e.targetPosition),new V(t,r)):new V(t,r)}_getTransformedByInsertion(e,t,r=!1){if(r&&this.containsPosition(e))return[new V(this.start,e),new V(e.getShiftedBy(t),this.end._getTransformedByInsertion(e,t))];{const i=new V(this.start,this.end);return i.start=i.start._getTransformedByInsertion(e,t),i.end=i.end._getTransformedByInsertion(e,t),[i]}}_getTransformedByMove(e,t,r,i=!1){if(this.isCollapsed){const d=this.start._getTransformedByMove(e,t,r);return[new V(d)]}const o=V._createFromPositionAndShift(e,r),s=t._getTransformedByDeletion(e,r);if(this.containsPosition(t)&&!i&&(o.containsPosition(this.start)||o.containsPosition(this.end))){const d=this.start._getTransformedByMove(e,t,r),f=this.end._getTransformedByMove(e,t,r);return[new V(d,f)]}let a;const l=this.getDifference(o);let c=null;const u=this.getIntersection(o);if(l.length==1?c=new V(l[0].start._getTransformedByDeletion(e,r),l[0].end._getTransformedByDeletion(e,r)):l.length==2&&(c=new V(this.start,this.end._getTransformedByDeletion(e,r))),c?a=c._getTransformedByInsertion(s,r,u!==null||i):a=[],u){const d=new V(u.start._getCombined(o.start,s),u.end._getCombined(o.start,s));a.length==2?a.splice(1,0,d):a.push(d)}return a}_getTransformedByDeletion(e,t){let r=this.start._getTransformedByDeletion(e,t),i=this.end._getTransformedByDeletion(e,t);return r==null&&i==null?null:(r==null&&(r=e),i==null&&(i=e),new V(r,i))}static _createFromPositionAndShift(e,t){const r=e,i=e.getShiftedBy(t);return t>0?new this(r,i):new this(i,r)}static _createIn(e){return new this(J._createAt(e,0),J._createAt(e,e.maxOffset))}static _createOn(e){return this._createFromPositionAndShift(J._createBefore(e),e.offsetSize)}static _createFromRanges(e){if(e.length===0)throw new M("range-create-from-ranges-empty-array",null);if(e.length==1)return e[0].clone();const t=e[0];e.sort((o,s)=>o.start.isAfter(s.start)?1:-1);const r=e.indexOf(t),i=new this(t.start,t.end);if(r>0)for(let o=r-1;e[o].end.isEqual(i.start);o++)i.start=J._createAt(e[o].start);for(let o=r+1;o<e.length&&e[o].start.isEqual(i.end);o++)i.end=J._createAt(e[o].end);return i}static fromJSON(e,t){return new this(J.fromJSON(e.start,t),J.fromJSON(e.end,t))}}V.prototype.is=function(n){return n==="range"||n==="model:range"};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class tD extends pt(){constructor(){super(),this._modelToViewMapping=new WeakMap,this._viewToModelMapping=new WeakMap,this._viewToModelLengthCallbacks=new Map,this._markerNameToElements=new Map,this._elementToMarkerNames=new Map,this._deferredBindingRemovals=new Map,this._unboundMarkerNames=new Set,this.on("modelToViewPosition",(e,t)=>{if(t.viewPosition)return;const r=this._modelToViewMapping.get(t.modelPosition.parent);if(!r)throw new M("mapping-model-position-view-parent-not-found",this,{modelPosition:t.modelPosition});t.viewPosition=this.findPositionIn(r,t.modelPosition.offset)},{priority:"low"}),this.on("viewToModelPosition",(e,t)=>{if(t.modelPosition)return;const r=this.findMappedViewAncestor(t.viewPosition),i=this._viewToModelMapping.get(r),o=this._toModelOffset(t.viewPosition.parent,t.viewPosition.offset,r);t.modelPosition=J._createAt(i,o)},{priority:"low"})}bindElements(e,t){this._modelToViewMapping.set(e,t),this._viewToModelMapping.set(t,e)}unbindViewElement(e,t={}){const r=this.toModelElement(e);if(this._elementToMarkerNames.has(e))for(const i of this._elementToMarkerNames.get(e))this._unboundMarkerNames.add(i);t.defer?this._deferredBindingRemovals.set(e,e.root):(this._viewToModelMapping.delete(e),this._modelToViewMapping.get(r)==e&&this._modelToViewMapping.delete(r))}unbindModelElement(e){const t=this.toViewElement(e);this._modelToViewMapping.delete(e),this._viewToModelMapping.get(t)==e&&this._viewToModelMapping.delete(t)}bindElementToMarker(e,t){const r=this._markerNameToElements.get(t)||new Set;r.add(e);const i=this._elementToMarkerNames.get(e)||new Set;i.add(t),this._markerNameToElements.set(t,r),this._elementToMarkerNames.set(e,i)}unbindElementFromMarkerName(e,t){const r=this._markerNameToElements.get(t);r&&(r.delete(e),r.size==0&&this._markerNameToElements.delete(t));const i=this._elementToMarkerNames.get(e);i&&(i.delete(t),i.size==0&&this._elementToMarkerNames.delete(e))}flushUnboundMarkerNames(){const e=Array.from(this._unboundMarkerNames);return this._unboundMarkerNames.clear(),e}flushDeferredBindings(){for(const[e,t]of this._deferredBindingRemovals)e.root==t&&this.unbindViewElement(e);this._deferredBindingRemovals=new Map}clearBindings(){this._modelToViewMapping=new WeakMap,this._viewToModelMapping=new WeakMap,this._markerNameToElements=new Map,this._elementToMarkerNames=new Map,this._unboundMarkerNames=new Set,this._deferredBindingRemovals=new Map}toModelElement(e){return this._viewToModelMapping.get(e)}toViewElement(e){return this._modelToViewMapping.get(e)}toModelRange(e){return new V(this.toModelPosition(e.start),this.toModelPosition(e.end))}toViewRange(e){return new $e(this.toViewPosition(e.start),this.toViewPosition(e.end))}toModelPosition(e){const t={viewPosition:e,mapper:this};return this.fire("viewToModelPosition",t),t.modelPosition}toViewPosition(e,t={}){const r={modelPosition:e,mapper:this,isPhantom:t.isPhantom};return this.fire("modelToViewPosition",r),r.viewPosition}markerNameToElements(e){const t=this._markerNameToElements.get(e);if(!t)return null;const r=new Set;for(const i of t)if(i.is("attributeElement"))for(const o of i.getElementsWithSameId())r.add(o);else r.add(i);return r}registerViewToModelLength(e,t){this._viewToModelLengthCallbacks.set(e,t)}findMappedViewAncestor(e){let t=e.parent;for(;!this._viewToModelMapping.has(t);)t=t.parent;return t}_toModelOffset(e,t,r){if(r!=e){const o=this._toModelOffset(e.parent,e.index,r),s=this._toModelOffset(e,t,e);return o+s}if(e.is("$text"))return t;let i=0;for(let o=0;o<t;o++)i+=this.getModelLength(e.getChild(o));return i}getModelLength(e){if(this._viewToModelLengthCallbacks.get(e.name))return this._viewToModelLengthCallbacks.get(e.name)(e);if(this._viewToModelMapping.has(e))return 1;if(e.is("$text"))return e.data.length;if(e.is("uiElement"))return 0;{let t=0;for(const r of e.getChildren())t+=this.getModelLength(r);return t}}findPositionIn(e,t){let r,i=0,o=0,s=0;if(e.is("$text"))return new ue(e,t);for(;o<t;)r=e.getChild(s),i=this.getModelLength(r),o+=i,s++;return o==t?this._moveViewPositionToTextNode(new ue(e,s)):this.findPositionIn(r,t-(o-i))}_moveViewPositionToTextNode(e){const t=e.nodeBefore,r=e.nodeAfter;return t instanceof kt?new ue(t,t.data.length):r instanceof kt?new ue(r,0):e}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class pue{constructor(){this._consumable=new Map,this._textProxyRegistry=new Map}add(e,t){t=sf(t),e instanceof ei&&(e=this._getSymbolForTextProxy(e)),this._consumable.has(e)||this._consumable.set(e,new Map),this._consumable.get(e).set(t,!0)}consume(e,t){return t=sf(t),e instanceof ei&&(e=this._getSymbolForTextProxy(e)),this.test(e,t)?(this._consumable.get(e).set(t,!1),!0):!1}test(e,t){t=sf(t),e instanceof ei&&(e=this._getSymbolForTextProxy(e));const r=this._consumable.get(e);if(r===void 0)return null;const i=r.get(t);return i===void 0?null:i}revert(e,t){t=sf(t),e instanceof ei&&(e=this._getSymbolForTextProxy(e));const r=this.test(e,t);return r===!1?(this._consumable.get(e).set(t,!0),!0):r===!0?!1:null}verifyAllConsumed(e){const t=[];for(const[r,i]of this._consumable)for(const[o,s]of i){const a=o.split(":")[0];s&&e==a&&t.push({event:o,item:r.name||r.description})}if(t.length)throw new M("conversion-model-consumable-not-consumed",null,{items:t})}_getSymbolForTextProxy(e){let t=null;const r=this._textProxyRegistry.get(e.startOffset);if(r){const i=r.get(e.endOffset);i&&(t=i.get(e.parent))}return t||(t=this._addSymbolForTextProxy(e)),t}_addSymbolForTextProxy(e){const t=e.startOffset,r=e.endOffset,i=e.parent,o=Symbol("$textProxy:"+e.data);let s,a;return s=this._textProxyRegistry.get(t),s||(s=new Map,this._textProxyRegistry.set(t,s)),a=s.get(r),a||(a=new Map,s.set(r,a)),a.set(i,o),o}}function sf(n){const e=n.split(":");return e[0]=="insert"?e[0]:e[0]=="addMarker"||e[0]=="removeMarker"?n:e.length>1?e[0]+":"+e[1]:e[0]}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class nD extends pt(){constructor(e){super(),this._conversionApi={dispatcher:this,...e},this._firedEventsMap=new WeakMap}convertChanges(e,t,r){const i=this._createConversionApi(r,e.getRefreshedItems());for(const s of e.getMarkersToRemove())this._convertMarkerRemove(s.name,s.range,i);const o=this._reduceChanges(e.getChanges());for(const s of o)s.type==="insert"?this._convertInsert(V._createFromPositionAndShift(s.position,s.length),i):s.type==="reinsert"?this._convertReinsert(V._createFromPositionAndShift(s.position,s.length),i):s.type==="remove"?this._convertRemove(s.position,s.length,s.name,i):this._convertAttribute(s.range,s.attributeKey,s.attributeOldValue,s.attributeNewValue,i);i.mapper.flushDeferredBindings();for(const s of i.mapper.flushUnboundMarkerNames()){const a=t.get(s).getRange();this._convertMarkerRemove(s,a,i),this._convertMarkerAdd(s,a,i)}for(const s of e.getMarkersToAdd())this._convertMarkerAdd(s.name,s.range,i);i.consumable.verifyAllConsumed("insert")}convert(e,t,r,i={}){const o=this._createConversionApi(r,void 0,i);this._convertInsert(e,o);for(const[s,a]of t)this._convertMarkerAdd(s,a,o);o.consumable.verifyAllConsumed("insert")}convertSelection(e,t,r){const i=this._createConversionApi(r);this.fire("cleanSelection",{selection:e},i);const o=e.getFirstPosition().root;if(!i.mapper.toViewElement(o))return;const s=Array.from(t.getMarkersAtPosition(e.getFirstPosition()));if(this._addConsumablesForSelection(i.consumable,e,s),this.fire("selection",{selection:e},i),!!e.isCollapsed){for(const a of s)if(i.consumable.test(e,"addMarker:"+a.name)){const l=a.getRange();if(!vue(e.getFirstPosition(),a,i.mapper))continue;const c={item:e,markerName:a.name,markerRange:l};this.fire(`addMarker:${a.name}`,c,i)}for(const a of e.getAttributeKeys())if(i.consumable.test(e,"attribute:"+a)){const l={item:e,range:e.getFirstRange(),attributeKey:a,attributeOldValue:null,attributeNewValue:e.getAttribute(a)};this.fire(`attribute:${a}:$text`,l,i)}}}_convertInsert(e,t,r={}){r.doNotAddConsumables||this._addConsumablesForInsert(t.consumable,e);for(const i of Array.from(e.getWalker({shallow:!0})).map(hT))this._testAndFire("insert",i,t)}_convertRemove(e,t,r,i){this.fire(`remove:${r}`,{position:e,length:t},i)}_convertAttribute(e,t,r,i,o){this._addConsumablesForRange(o.consumable,e,`attribute:${t}`);for(const s of e){const a={item:s.item,range:V._createFromPositionAndShift(s.previousPosition,s.length),attributeKey:t,attributeOldValue:r,attributeNewValue:i};this._testAndFire(`attribute:${t}`,a,o)}}_convertReinsert(e,t){const r=Array.from(e.getWalker({shallow:!0}));this._addConsumablesForInsert(t.consumable,r);for(const i of r.map(hT))this._testAndFire("insert",{...i,reconversion:!0},t)}_convertMarkerAdd(e,t,r){if(t.root.rootName=="$graveyard")return;const i=`addMarker:${e}`;if(r.consumable.add(t,i),this.fire(i,{markerName:e,markerRange:t},r),!!r.consumable.consume(t,i)){this._addConsumablesForRange(r.consumable,t,i);for(const o of t.getItems()){if(!r.consumable.test(o,i))continue;const s={item:o,range:V._createOn(o),markerName:e,markerRange:t};this.fire(i,s,r)}}}_convertMarkerRemove(e,t,r){t.root.rootName!="$graveyard"&&this.fire(`removeMarker:${e}`,{markerName:e,markerRange:t},r)}_reduceChanges(e){const t={changes:e};return this.fire("reduceChanges",t),t.changes}_addConsumablesForInsert(e,t){for(const r of t){const i=r.item;if(e.test(i,"insert")===null){e.add(i,"insert");for(const o of i.getAttributeKeys())e.add(i,"attribute:"+o)}}return e}_addConsumablesForRange(e,t,r){for(const i of t.getItems())e.add(i,r);return e}_addConsumablesForSelection(e,t,r){e.add(t,"selection");for(const i of r)e.add(t,"addMarker:"+i.name);for(const i of t.getAttributeKeys())e.add(t,"attribute:"+i);return e}_testAndFire(e,t,r){const i=bue(e,t),o=t.item.is("$textProxy")?r.consumable._getSymbolForTextProxy(t.item):t.item,s=this._firedEventsMap.get(r),a=s.get(o);if(!a)s.set(o,new Set([i]));else if(!a.has(i))a.add(i);else return;this.fire(i,t,r)}_testAndFireAddAttributes(e,t){const r={item:e,range:V._createOn(e)};for(const i of r.item.getAttributeKeys())r.attributeKey=i,r.attributeOldValue=null,r.attributeNewValue=r.item.getAttribute(i),this._testAndFire(`attribute:${i}`,r,t)}_createConversionApi(e,t=new Set,r={}){const i={...this._conversionApi,consumable:new pue,writer:e,options:r,convertItem:o=>this._convertInsert(V._createOn(o),i),convertChildren:o=>this._convertInsert(V._createIn(o),i,{doNotAddConsumables:!0}),convertAttributes:o=>this._testAndFireAddAttributes(o,i),canReuseView:o=>!t.has(i.mapper.toModelElement(o))};return this._firedEventsMap.set(i,new Map),i}}function vue(n,e,t){const r=e.getRange(),i=Array.from(n.getAncestors());return i.shift(),i.reverse(),!i.some(s=>{if(r.containsItem(s))return!!t.toViewElement(s).getCustomProperty("addHighlight")})}function bue(n,e){const t=e.item.is("element")?e.item.name:"$text";return`${n}:${t}`}function hT(n){const e=n.item,t=V._createFromPositionAndShift(n.previousPosition,n.length);return{item:e,range:t}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class cr extends pt(Vo){constructor(...e){super(),this._lastRangeBackward=!1,this._attrs=new Map,this._ranges=[],e.length&&this.setTo(...e)}get anchor(){if(this._ranges.length>0){const e=this._ranges[this._ranges.length-1];return this._lastRangeBackward?e.end:e.start}return null}get focus(){if(this._ranges.length>0){const e=this._ranges[this._ranges.length-1];return this._lastRangeBackward?e.start:e.end}return null}get isCollapsed(){return this._ranges.length===1?this._ranges[0].isCollapsed:!1}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}isEqual(e){if(this.rangeCount!=e.rangeCount)return!1;if(this.rangeCount===0)return!0;if(!this.anchor.isEqual(e.anchor)||!this.focus.isEqual(e.focus))return!1;for(const t of this._ranges){let r=!1;for(const i of e._ranges)if(t.isEqual(i)){r=!0;break}if(!r)return!1}return!0}*getRanges(){for(const e of this._ranges)yield new V(e.start,e.end)}getFirstRange(){let e=null;for(const t of this._ranges)(!e||t.start.isBefore(e.start))&&(e=t);return e?new V(e.start,e.end):null}getLastRange(){let e=null;for(const t of this._ranges)(!e||t.end.isAfter(e.end))&&(e=t);return e?new V(e.start,e.end):null}getFirstPosition(){const e=this.getFirstRange();return e?e.start.clone():null}getLastPosition(){const e=this.getLastRange();return e?e.end.clone():null}setTo(...e){let[t,r,i]=e;if(typeof r=="object"&&(i=r,r=void 0),t===null)this._setRanges([]);else if(t instanceof cr)this._setRanges(t.getRanges(),t.isBackward);else if(t&&typeof t.getRanges=="function")this._setRanges(t.getRanges(),t.isBackward);else if(t instanceof V)this._setRanges([t],!!i&&!!i.backward);else if(t instanceof J)this._setRanges([new V(t)]);else if(t instanceof Ns){const o=!!i&&!!i.backward;let s;if(r=="in")s=V._createIn(t);else if(r=="on")s=V._createOn(t);else if(r!==void 0)s=new V(J._createAt(t,r));else throw new M("model-selection-setto-required-second-parameter",[this,t]);this._setRanges([s],o)}else if(pr(t))this._setRanges(t,i&&!!i.backward);else throw new M("model-selection-setto-not-selectable",[this,t])}_setRanges(e,t=!1){const r=Array.from(e),i=r.some(o=>{if(!(o instanceof V))throw new M("model-selection-set-ranges-not-range",[this,e]);return this._ranges.every(s=>!s.isEqual(o))});r.length===this._ranges.length&&!i||(this._replaceAllRanges(r),this._lastRangeBackward=!!t,this.fire("change:range",{directChange:!0}))}setFocus(e,t){if(this.anchor===null)throw new M("model-selection-setfocus-no-ranges",[this,e]);const r=J._createAt(e,t);if(r.compareWith(this.focus)=="same")return;const i=this.anchor;this._ranges.length&&this._popRange(),r.compareWith(i)=="before"?(this._pushRange(new V(r,i)),this._lastRangeBackward=!0):(this._pushRange(new V(i,r)),this._lastRangeBackward=!1),this.fire("change:range",{directChange:!0})}getAttribute(e){return this._attrs.get(e)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}hasAttribute(e){return this._attrs.has(e)}removeAttribute(e){this.hasAttribute(e)&&(this._attrs.delete(e),this.fire("change:attribute",{attributeKeys:[e],directChange:!0}))}setAttribute(e,t){this.getAttribute(e)!==t&&(this._attrs.set(e,t),this.fire("change:attribute",{attributeKeys:[e],directChange:!0}))}getSelectedElement(){return this.rangeCount!==1?null:this.getFirstRange().getContainedElement()}*getSelectedBlocks(){const e=new WeakSet;for(const t of this.getRanges()){const r=mT(t.start,e);wue(r,t)&&(yield r);for(const o of t.getWalker()){const s=o.item;o.type=="elementEnd"&&yue(s,e,t)&&(yield s)}const i=mT(t.end,e);_ue(i,t)&&(yield i)}}containsEntireContent(e=this.anchor.root){const t=J._createAt(e,0),r=J._createAt(e,"end");return t.isTouching(this.getFirstPosition())&&r.isTouching(this.getLastPosition())}_pushRange(e){this._checkRange(e),this._ranges.push(new V(e.start,e.end))}_checkRange(e){for(let t=0;t<this._ranges.length;t++)if(e.isIntersecting(this._ranges[t]))throw new M("model-selection-range-intersects",[this,e],{addedRange:e,intersectingRange:this._ranges[t]})}_replaceAllRanges(e){this._removeAllRanges();for(const t of e)this._pushRange(t)}_removeAllRanges(){for(;this._ranges.length>0;)this._popRange()}_popRange(){this._ranges.pop()}}cr.prototype.is=function(n){return n==="selection"||n==="model:selection"};function rD(n,e){return e.has(n)?!1:(e.add(n),n.root.document.model.schema.isBlock(n)&&!!n.parent)}function yue(n,e,t){return rD(n,e)&&M0(n,t)}function mT(n,e){const r=n.parent.root.document.model.schema,i=n.parent.getAncestors({parentFirst:!0,includeSelf:!0});let o=!1;const s=i.find(a=>o?!1:(o=r.isLimit(a),!o&&rD(a,e)));return i.forEach(a=>e.add(a)),s}function M0(n,e){const t=Cue(n);return t?!e.containsRange(V._createOn(t),!0):!0}function wue(n,e){return n?e.isCollapsed||n.isEmpty?!0:e.start.isTouching(J._createAt(n,n.maxOffset))?!1:M0(n,e):!1}function _ue(n,e){return n?e.isCollapsed||n.isEmpty?!0:e.end.isTouching(J._createAt(n,0))?!1:M0(n,e):!1}function Cue(n){const e=n.root.document.model.schema;let t=n.parent;for(;t;){if(e.isBlock(t))return t;t=t.parent}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Zn extends pt(V){constructor(e,t){super(e,t),Sue.call(this)}detach(){this.stopListening()}toRange(){return new V(this.start,this.end)}static fromRange(e){return new Zn(e.start,e.end)}}Zn.prototype.is=function(n){return n==="liveRange"||n==="model:liveRange"||n=="range"||n==="model:range"};function Sue(){this.listenTo(this.root.document.model,"applyOperation",(n,e)=>{const t=e[0];t.isDocumentOperation&&xue.call(this,t)},{priority:"low"})}function xue(n){const e=this.getTransformedByOperation(n),t=V._createFromRanges(e),r=!t.isEqual(this),i=Aue(this,n);let o=null;if(r){t.root.rootName=="$graveyard"&&(n.type=="remove"?o=n.sourcePosition:o=n.deletionPosition);const s=this.toRange();this.start=t.start,this.end=t.end,this.fire("change:range",s,{deletionPosition:o})}else i&&this.fire("change:content",this.toRange(),{deletionPosition:o})}function Aue(n,e){switch(e.type){case"insert":return n.containsPosition(e.position);case"move":case"remove":case"reinsert":case"merge":return n.containsPosition(e.sourcePosition)||n.start.isEqual(e.sourcePosition)||n.containsPosition(e.targetPosition);case"split":return n.containsPosition(e.splitPosition)||n.containsPosition(e.insertionPosition)}return!1}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Eu="selection:";class oi extends pt(Vo){constructor(e){super(),this._selection=new Tue(e),this._selection.delegate("change:range").to(this),this._selection.delegate("change:attribute").to(this),this._selection.delegate("change:marker").to(this)}get isCollapsed(){return this._selection.isCollapsed}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get rangeCount(){return this._selection.rangeCount}get hasOwnRange(){return this._selection.hasOwnRange}get isBackward(){return this._selection.isBackward}get isGravityOverridden(){return this._selection.isGravityOverridden}get markers(){return this._selection.markers}get _ranges(){return this._selection._ranges}getRanges(){return this._selection.getRanges()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getSelectedBlocks(){return this._selection.getSelectedBlocks()}getSelectedElement(){return this._selection.getSelectedElement()}containsEntireContent(e){return this._selection.containsEntireContent(e)}destroy(){this._selection.destroy()}getAttributeKeys(){return this._selection.getAttributeKeys()}getAttributes(){return this._selection.getAttributes()}getAttribute(e){return this._selection.getAttribute(e)}hasAttribute(e){return this._selection.hasAttribute(e)}refresh(){this._selection.updateMarkers(),this._selection._updateAttributes(!1)}observeMarkers(e){this._selection.observeMarkers(e)}_setFocus(e,t){this._selection.setFocus(e,t)}_setTo(...e){this._selection.setTo(...e)}_setAttribute(e,t){this._selection.setAttribute(e,t)}_removeAttribute(e){this._selection.removeAttribute(e)}_getStoredAttributes(){return this._selection.getStoredAttributes()}_overrideGravity(){return this._selection.overrideGravity()}_restoreGravity(e){this._selection.restoreGravity(e)}static _getStoreAttributeKey(e){return Eu+e}static _isStoreAttributeKey(e){return e.startsWith(Eu)}}oi.prototype.is=function(n){return n==="selection"||n=="model:selection"||n=="documentSelection"||n=="model:documentSelection"};class Tue extends cr{constructor(e){super(),this.markers=new Vn({idProperty:"name"}),this._attributePriority=new Map,this._selectionRestorePosition=null,this._hasChangedRange=!1,this._overriddenGravityRegister=new Set,this._observedMarkers=new Set,this._model=e.model,this._document=e,this.listenTo(this._model,"applyOperation",(t,r)=>{const i=r[0];!i.isDocumentOperation||i.type=="marker"||i.type=="rename"||i.type=="noop"||(this._ranges.length==0&&this._selectionRestorePosition&&this._fixGraveyardSelection(this._selectionRestorePosition),this._selectionRestorePosition=null,this._hasChangedRange&&(this._hasChangedRange=!1,this.fire("change:range",{directChange:!1})))},{priority:"lowest"}),this.on("change:range",()=>{this._validateSelectionRanges(this.getRanges())}),this.listenTo(this._model.markers,"update",(t,r,i,o)=>{this._updateMarker(r,o)}),this.listenTo(this._document,"change",(t,r)=>{Eue(this._model,r)})}get isCollapsed(){return this._ranges.length===0?this._document._getDefaultRange().isCollapsed:super.isCollapsed}get anchor(){return super.anchor||this._document._getDefaultRange().start}get focus(){return super.focus||this._document._getDefaultRange().end}get rangeCount(){return this._ranges.length?this._ranges.length:1}get hasOwnRange(){return this._ranges.length>0}get isGravityOverridden(){return!!this._overriddenGravityRegister.size}destroy(){for(let e=0;e<this._ranges.length;e++)this._ranges[e].detach();this.stopListening()}*getRanges(){this._ranges.length?yield*super.getRanges():yield this._document._getDefaultRange()}getFirstRange(){return super.getFirstRange()||this._document._getDefaultRange()}getLastRange(){return super.getLastRange()||this._document._getDefaultRange()}setTo(...e){super.setTo(...e),this._updateAttributes(!0),this.updateMarkers()}setFocus(e,t){super.setFocus(e,t),this._updateAttributes(!0),this.updateMarkers()}setAttribute(e,t){if(this._setAttribute(e,t)){const r=[e];this.fire("change:attribute",{attributeKeys:r,directChange:!0})}}removeAttribute(e){if(this._removeAttribute(e)){const t=[e];this.fire("change:attribute",{attributeKeys:t,directChange:!0})}}overrideGravity(){const e=Br();return this._overriddenGravityRegister.add(e),this._overriddenGravityRegister.size===1&&this._updateAttributes(!0),e}restoreGravity(e){if(!this._overriddenGravityRegister.has(e))throw new M("document-selection-gravity-wrong-restore",this,{uid:e});this._overriddenGravityRegister.delete(e),this.isGravityOverridden||this._updateAttributes(!0)}observeMarkers(e){this._observedMarkers.add(e),this.updateMarkers()}_replaceAllRanges(e){this._validateSelectionRanges(e),super._replaceAllRanges(e)}_popRange(){this._ranges.pop().detach()}_pushRange(e){const t=this._prepareRange(e);t&&this._ranges.push(t)}_validateSelectionRanges(e){for(const t of e)if(!this._document._validateSelectionRange(t))throw new M("document-selection-wrong-position",this,{range:t})}_prepareRange(e){if(this._checkRange(e),e.root==this._document.graveyard)return;const t=Zn.fromRange(e);return t.on("change:range",(r,i,o)=>{if(this._hasChangedRange=!0,t.root==this._document.graveyard){this._selectionRestorePosition=o.deletionPosition;const s=this._ranges.indexOf(t);this._ranges.splice(s,1),t.detach()}}),t}updateMarkers(){if(!this._observedMarkers.size)return;const e=[];let t=!1;for(const i of this._model.markers){const o=i.name.split(":",1)[0];if(!this._observedMarkers.has(o))continue;const s=i.getRange();for(const a of this.getRanges())s.containsRange(a,!a.isCollapsed)&&e.push(i)}const r=Array.from(this.markers);for(const i of e)this.markers.has(i)||(this.markers.add(i),t=!0);for(const i of Array.from(this.markers))e.includes(i)||(this.markers.remove(i),t=!0);t&&this.fire("change:marker",{oldMarkers:r,directChange:!1})}_updateMarker(e,t){const r=e.name.split(":",1)[0];if(!this._observedMarkers.has(r))return;let i=!1;const o=Array.from(this.markers),s=this.markers.has(e);if(!t)s&&(this.markers.remove(e),i=!0);else{let a=!1;for(const l of this.getRanges())if(t.containsRange(l,!l.isCollapsed)){a=!0;break}a&&!s?(this.markers.add(e),i=!0):!a&&s&&(this.markers.remove(e),i=!0)}i&&this.fire("change:marker",{oldMarkers:o,directChange:!1})}_updateAttributes(e){const t=to(this._getSurroundingAttributes()),r=to(this.getAttributes());if(e)this._attributePriority=new Map,this._attrs=new Map;else for(const[o,s]of this._attributePriority)s=="low"&&(this._attrs.delete(o),this._attributePriority.delete(o));this._setAttributesTo(t);const i=[];for(const[o,s]of this.getAttributes())(!r.has(o)||r.get(o)!==s)&&i.push(o);for(const[o]of r)this.hasAttribute(o)||i.push(o);i.length>0&&this.fire("change:attribute",{attributeKeys:i,directChange:!1})}_setAttribute(e,t,r=!0){const i=r?"normal":"low";return i=="low"&&this._attributePriority.get(e)=="normal"||super.getAttribute(e)===t?!1:(this._attrs.set(e,t),this._attributePriority.set(e,i),!0)}_removeAttribute(e,t=!0){const r=t?"normal":"low";return r=="low"&&this._attributePriority.get(e)=="normal"||(this._attributePriority.set(e,r),!super.hasAttribute(e))?!1:(this._attrs.delete(e),!0)}_setAttributesTo(e){const t=new Set;for(const[r,i]of this.getAttributes())e.get(r)!==i&&this._removeAttribute(r,!1);for(const[r,i]of e)this._setAttribute(r,i,!1)&&t.add(r);return t}*getStoredAttributes(){const e=this.getFirstPosition().parent;if(this.isCollapsed&&e.isEmpty)for(const t of e.getAttributeKeys())t.startsWith(Eu)&&(yield[t.substr(Eu.length),e.getAttribute(t)])}_getSurroundingAttributes(){const e=this.getFirstPosition(),t=this._model.schema;if(e.root.rootName=="$graveyard")return null;let r=null;if(this.isCollapsed){const i=e.textNode?e.textNode:e.nodeBefore,o=e.textNode?e.textNode:e.nodeAfter;if(this.isGravityOverridden||(r=ec(i,t)),r||(r=ec(o,t)),!this.isGravityOverridden&&!r){let s=i;for(;s&&!r;)s=s.previousSibling,r=ec(s,t)}if(!r){let s=o;for(;s&&!r;)s=s.nextSibling,r=ec(s,t)}r||(r=this.getStoredAttributes())}else{const i=this.getFirstRange();for(const o of i){if(o.item.is("element")&&t.isObject(o.item)){r=ec(o.item,t);break}if(o.type=="text"){r=o.item.getAttributes();break}}}return r}_fixGraveyardSelection(e){const t=this._model.schema.getNearestSelectionRange(e);t&&this._pushRange(t)}}function ec(n,e){if(!n)return null;if(n instanceof ei||n instanceof mt)return n.getAttributes();if(!e.isInline(n))return null;if(!e.isObject(n))return[];const t=[];for(const[r,i]of n.getAttributes())e.checkAttribute("$text",r)&&e.getAttributeProperties(r).copyFromObject!==!1&&t.push([r,i]);return t}function Eue(n,e){const t=n.document.differ;for(const r of t.getChanges()){if(r.type!="insert")continue;const i=r.position.parent;r.length===i.maxOffset&&n.enqueueChange(e,s=>{const a=Array.from(i.getAttributeKeys()).filter(l=>l.startsWith(Eu));for(const l of a)s.removeAttribute(l,i)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class iD{constructor(e){this._dispatchers=e}add(e){for(const t of this._dispatchers)e(t);return this}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class kue extends iD{elementToElement(e){return this.add(Gue(e))}elementToStructure(e){return this.add(que(e))}attributeToElement(e){return this.add(Kue(e))}attributeToAttribute(e){return this.add(Yue(e))}markerToElement(e){return this.add(Xue(e))}markerToHighlight(e){return this.add(Jue(e))}markerToData(e){return this.add(Zue(e))}}function oD(){return(n,e,t)=>{if(!t.consumable.consume(e.item,n.name))return;const r=t.writer,i=t.mapper.toViewPosition(e.range.start),o=r.createText(e.item.data);r.insert(i,o)}}function sD(){return(n,e,t)=>{t.convertAttributes(e.item),!e.reconversion&&e.item.is("element")&&!e.item.isEmpty&&t.convertChildren(e.item)}}function Pue(){return(n,e,t)=>{const r=t.mapper.toViewPosition(e.position),i=e.position.getShiftedBy(e.length),o=t.mapper.toViewPosition(i,{isPhantom:!0}),s=t.writer.createRange(r,o),a=t.writer.remove(s.getTrimmed());for(const l of t.writer.createRangeIn(a).getItems())t.mapper.unbindViewElement(l,{defer:!0})}}function aD(n,e){const t=n.createAttributeElement("span",e.attributes);return e.classes&&t._addClass(e.classes),typeof e.priority=="number"&&(t._priority=e.priority),t._id=e.id,t}function Iue(){return(n,e,t)=>{const r=e.selection;if(r.isCollapsed||!t.consumable.consume(r,"selection"))return;const i=[];for(const o of r.getRanges())i.push(t.mapper.toViewRange(o));t.writer.setSelection(i,{backward:r.isBackward})}}function Oue(){return(n,e,t)=>{const r=e.selection;if(!r.isCollapsed||!t.consumable.consume(r,"selection"))return;const i=t.writer,o=r.getFirstPosition(),s=t.mapper.toViewPosition(o),a=i.breakAttributes(s);i.setSelection(a)}}function Rue(){return(n,e,t)=>{const r=t.writer,i=r.document.selection;for(const o of i.getRanges())o.isCollapsed&&o.end.parent.isAttached()&&t.writer.mergeAttributes(o.start);r.setSelection(null)}}function Mue(n){return(e,t,r)=>{if(!r.consumable.test(t.item,e.name))return;const i=n(t.attributeOldValue,r,t),o=n(t.attributeNewValue,r,t);if(!i&&!o)return;r.consumable.consume(t.item,e.name);const s=r.writer,a=s.document.selection;if(t.item instanceof cr||t.item instanceof oi)s.wrap(a.getFirstRange(),o);else{let l=r.mapper.toViewRange(t.range);t.attributeOldValue!==null&&i&&(l=s.unwrap(l,i)),t.attributeNewValue!==null&&o&&s.wrap(l,o)}}}function Due(n,e=ode){return(t,r,i)=>{if(!e(r.item,i.consumable,{preflight:!0}))return;const o=n(r.item,i,r);if(!o)return;e(r.item,i.consumable);const s=i.mapper.toViewPosition(r.range.start);i.mapper.bindElements(r.item,o),i.writer.insert(s,o),i.convertAttributes(r.item),fD(o,r.item.getChildren(),i,{reconversion:r.reconversion})}}function Bue(n,e){return(t,r,i)=>{if(!e(r.item,i.consumable,{preflight:!0}))return;const o=new Map;i.writer._registerSlotFactory(tde(r.item,o,i));const s=n(r.item,i,r);if(i.writer._clearSlotFactory(),!s)return;nde(r.item,o,i),e(r.item,i.consumable);const a=i.mapper.toViewPosition(r.range.start);i.mapper.bindElements(r.item,s),i.writer.insert(a,s),i.convertAttributes(r.item),rde(s,o,i,{reconversion:r.reconversion})}}function Nue(n){return(e,t,r)=>{t.isOpening=!0;const i=n(t,r);t.isOpening=!1;const o=n(t,r);if(!i||!o)return;const s=t.markerRange;if(s.isCollapsed&&!r.consumable.consume(s,e.name))return;for(const c of s)if(!r.consumable.consume(c.item,e.name))return;const a=r.mapper,l=r.writer;l.insert(a.toViewPosition(s.start),i),r.mapper.bindElementToMarker(i,t.markerName),s.isCollapsed||(l.insert(a.toViewPosition(s.end),o),r.mapper.bindElementToMarker(o,t.markerName)),e.stop()}}function Lue(){return(n,e,t)=>{const r=t.mapper.markerNameToElements(e.markerName);if(r){for(const i of r)t.mapper.unbindElementFromMarkerName(i,e.markerName),t.writer.clear(t.writer.createRangeOn(i),i);t.writer.clearClonedElementsGroup(e.markerName),n.stop()}}}function Fue(n){return(e,t,r)=>{const i=n(t.markerName,r);if(!i)return;const o=t.markerRange;r.consumable.consume(o,e.name)&&(gT(o,!1,r,t,i),gT(o,!0,r,t,i),e.stop())}}function gT(n,e,t,r,i){const o=e?n.start:n.end,s=o.nodeAfter&&o.nodeAfter.is("element")?o.nodeAfter:null,a=o.nodeBefore&&o.nodeBefore.is("element")?o.nodeBefore:null;if(s||a){let c,u;e&&s||!e&&!a?(c=s,u=!0):(c=a,u=!1);const d=t.mapper.toViewElement(c);if(d){$ue(d,e,u,t,r,i);return}}const l=t.mapper.toViewPosition(o);Vue(l,e,t,r,i)}function $ue(n,e,t,r,i,o){const s=`data-${o.group}-${e?"start":"end"}-${t?"before":"after"}`,a=n.hasAttribute(s)?n.getAttribute(s).split(","):[];a.unshift(o.name),r.writer.setAttribute(s,a.join(","),n),r.mapper.bindElementToMarker(n,i.markerName)}function Vue(n,e,t,r,i){const o=`${i.group}-${e?"start":"end"}`,s=i.name?{name:i.name}:null,a=t.writer.createUIElement(o,s);t.writer.insert(n,a),t.mapper.bindElementToMarker(a,r.markerName)}function zue(n){return(e,t,r)=>{const i=n(t.markerName,r);if(!i)return;const o=r.mapper.markerNameToElements(t.markerName);if(!o)return;for(const a of o)r.mapper.unbindElementFromMarkerName(a,t.markerName),a.is("containerElement")?(s(`data-${i.group}-start-before`,a),s(`data-${i.group}-start-after`,a),s(`data-${i.group}-end-before`,a),s(`data-${i.group}-end-after`,a)):r.writer.clear(r.writer.createRangeOn(a),a);r.writer.clearClonedElementsGroup(t.markerName),e.stop();function s(a,l){if(l.hasAttribute(a)){const c=new Set(l.getAttribute(a).split(","));c.delete(i.name),c.size==0?r.writer.removeAttribute(a,l):r.writer.setAttribute(a,Array.from(c).join(","),l)}}}}function jue(n){return(e,t,r)=>{if(!r.consumable.test(t.item,e.name))return;const i=n(t.attributeOldValue,r,t),o=n(t.attributeNewValue,r,t);if(!i&&!o)return;r.consumable.consume(t.item,e.name);const s=r.mapper.toViewElement(t.item),a=r.writer;if(!s)throw new M("conversion-attribute-to-attribute-on-text",r.dispatcher,t);if(t.attributeOldValue!==null&&i)if(i.key=="class"){const l=typeof i.value=="string"?i.value.split(/\s+/):i.value;for(const c of l)a.removeClass(c,s)}else if(i.key=="style")if(typeof i.value=="string"){const l=new tm(a.document.stylesProcessor);l.setTo(i.value);for(const[c]of l.getStylesEntries())a.removeStyle(c,s)}else{const l=Object.keys(i.value);for(const c of l)a.removeStyle(c,s)}else a.removeAttribute(i.key,s);if(t.attributeNewValue!==null&&o)if(o.key=="class"){const l=typeof o.value=="string"?o.value.split(/\s+/):o.value;for(const c of l)a.addClass(c,s)}else if(o.key=="style")if(typeof o.value=="string"){const l=new tm(a.document.stylesProcessor);l.setTo(o.value);for(const[c,u]of l.getStylesEntries())a.setStyle(c,u,s)}else{const l=Object.keys(o.value);for(const c of l)a.setStyle(c,o.value[c],s)}else a.setAttribute(o.key,o.value,s)}}function Wue(n){return(e,t,r)=>{if(!t.item||!(t.item instanceof cr||t.item instanceof oi)&&!t.item.is("$textProxy"))return;const i=D0(n,t,r);if(!i||!r.consumable.consume(t.item,e.name))return;const o=r.writer,s=aD(o,i),a=o.document.selection;if(t.item instanceof cr||t.item instanceof oi)o.wrap(a.getFirstRange(),s);else{const l=r.mapper.toViewRange(t.range),c=o.wrap(l,s);for(const u of c.getItems())if(u.is("attributeElement")&&u.isSimilar(s)){r.mapper.bindElementToMarker(u,t.markerName);break}}}}function Hue(n){return(e,t,r)=>{if(!t.item||!(t.item instanceof Tt))return;const i=D0(n,t,r);if(!i||!r.consumable.test(t.item,e.name))return;const o=r.mapper.toViewElement(t.item);if(o&&o.getCustomProperty("addHighlight")){r.consumable.consume(t.item,e.name);for(const a of V._createIn(t.item))r.consumable.consume(a.item,e.name);o.getCustomProperty("addHighlight")(o,i,r.writer),r.mapper.bindElementToMarker(o,t.markerName)}}}function Uue(n){return(e,t,r)=>{if(t.markerRange.isCollapsed)return;const i=D0(n,t,r);if(!i)return;const o=aD(r.writer,i),s=r.mapper.markerNameToElements(t.markerName);if(s){for(const a of s)r.mapper.unbindElementFromMarkerName(a,t.markerName),a.is("attributeElement")?r.writer.unwrap(r.writer.createRangeOn(a),o):a.getCustomProperty("removeHighlight")(a,i.id,r.writer);r.writer.clearClonedElementsGroup(t.markerName),e.stop()}}}function Gue(n){const e=lD(n.model),t=ku(n.view,"container");return e.attributes.length&&(e.children=!0),r=>{r.on(`insert:${e.name}`,Due(t,dD(e)),{priority:n.converterPriority||"normal"}),(e.children||e.attributes.length)&&r.on("reduceChanges",uD(e),{priority:"low"})}}function que(n){const e=lD(n.model),t=ku(n.view,"container");return e.children=!0,r=>{if(r._conversionApi.schema.checkChild(e.name,"$text"))throw new M("conversion-element-to-structure-disallowed-text",r,{elementName:e.name});r.on(`insert:${e.name}`,Bue(t,dD(e)),{priority:n.converterPriority||"normal"}),r.on("reduceChanges",uD(e),{priority:"low"})}}function Kue(n){n=Lr(n);let e=n.model;typeof e=="string"&&(e={key:e});let t=`attribute:${e.key}`;if(e.name&&(t+=":"+e.name),e.values)for(const i of e.values)n.view[i]=ku(n.view[i],"attribute");else n.view=ku(n.view,"attribute");const r=cD(n);return i=>{i.on(t,Mue(r),{priority:n.converterPriority||"normal"})}}function Yue(n){n=Lr(n);let e=n.model;typeof e=="string"&&(e={key:e});let t=`attribute:${e.key}`;if(e.name&&(t+=":"+e.name),e.values)for(const i of e.values)n.view[i]=pT(n.view[i]);else n.view=pT(n.view);const r=cD(n);return i=>{i.on(t,jue(r),{priority:n.converterPriority||"normal"})}}function Xue(n){const e=ku(n.view,"ui");return t=>{t.on(`addMarker:${n.model}`,Nue(e),{priority:n.converterPriority||"normal"}),t.on(`removeMarker:${n.model}`,Lue(),{priority:n.converterPriority||"normal"})}}function Zue(n){n=Lr(n);const e=n.model;let t=n.view;return t||(t=r=>({group:e,name:r.substr(n.model.length+1)})),r=>{r.on(`addMarker:${e}`,Fue(t),{priority:n.converterPriority||"normal"}),r.on(`removeMarker:${e}`,zue(t),{priority:n.converterPriority||"normal"})}}function Jue(n){return e=>{e.on(`addMarker:${n.model}`,Wue(n.view),{priority:n.converterPriority||"normal"}),e.on(`addMarker:${n.model}`,Hue(n.view),{priority:n.converterPriority||"normal"}),e.on(`removeMarker:${n.model}`,Uue(n.view),{priority:n.converterPriority||"normal"})}}function lD(n){return typeof n=="string"&&(n={name:n}),{name:n.name,attributes:n.attributes?nt(n.attributes):[],children:!!n.children}}function ku(n,e){return typeof n=="function"?n:(t,r)=>Que(n,r,e)}function Que(n,e,t){typeof n=="string"&&(n={name:n});let r;const i=e.writer,o=Object.assign({},n.attributes);if(t=="container")r=i.createContainerElement(n.name,o);else if(t=="attribute"){const s={priority:n.priority||hs.DEFAULT_PRIORITY};r=i.createAttributeElement(n.name,o,s)}else r=i.createUIElement(n.name,o);if(n.styles){const s=Object.keys(n.styles);for(const a of s)i.setStyle(a,n.styles[a],r)}if(n.classes){const s=n.classes;if(typeof s=="string")i.addClass(s,r);else for(const a of s)i.addClass(a,r)}return r}function cD(n){return n.model.values?(e,t,r)=>{const i=n.view[e];return i?i(e,t,r):null}:n.view}function pT(n){return typeof n=="string"?e=>({key:n,value:e}):typeof n=="object"?n.value?()=>n:e=>({key:n.key,value:e}):n}function D0(n,e,t){const r=typeof n=="function"?n(e,t):n;return r?(r.priority||(r.priority=10),r.id||(r.id=e.markerName),r):null}function ede(n){return(e,t)=>{if(!e.is("element",n.name))return!1;if(t.type=="attribute"){if(n.attributes.includes(t.attributeKey))return!0}else{/* istanbul ignore else: This is always true because otherwise it would not register a reducer callback. -- @preserve */if(n.children)return!0}return!1}}function uD(n){const e=ede(n);return(t,r)=>{const i=[];r.reconvertedElements||(r.reconvertedElements=new Set);for(const o of r.changes){const s=o.type=="attribute"?o.range.start.nodeAfter:o.position.parent;if(!s||!e(s,o)){i.push(o);continue}if(!r.reconvertedElements.has(s)){r.reconvertedElements.add(s);const a=J._createBefore(s);let l=i.length;for(let c=i.length-1;c>=0;c--){const u=i[c],f=(u.type=="attribute"?u.range.start:u.position).compareWith(a);if(f=="before"||u.type=="remove"&&f=="same")break;l=c}i.splice(l,0,{type:"remove",name:s.name,position:a,length:1},{type:"reinsert",name:s.name,position:a,length:1})}}r.changes=i}}function dD(n){return(e,t,r={})=>{const i=["insert"];for(const o of n.attributes)e.hasAttribute(o)&&i.push(`attribute:${o}`);return i.every(o=>t.test(e,o))?(r.preflight||i.forEach(o=>t.consume(e,o)),!0):!1}}function tde(n,e,t){return(r,i)=>{const o=r.createContainerElement("$slot");let s=null;if(i==="children")s=Array.from(n.getChildren());else if(typeof i=="function")s=Array.from(n.getChildren()).filter(a=>i(a));else throw new M("conversion-slot-mode-unknown",t.dispatcher,{modeOrFilter:i});return e.set(o,s),o}}function nde(n,e,t){const r=Array.from(e.values()).flat(),i=new Set(r);if(i.size!=r.length)throw new M("conversion-slot-filter-overlap",t.dispatcher,{element:n});if(i.size!=n.childCount)throw new M("conversion-slot-filter-incomplete",t.dispatcher,{element:n})}function rde(n,e,t,r){t.mapper.on("modelToViewPosition",s,{priority:"highest"});let i=null,o=null;for([i,o]of e)fD(n,o,t,r),t.writer.move(t.writer.createRangeIn(i),t.writer.createPositionBefore(i)),t.writer.remove(i);t.mapper.off("modelToViewPosition",s);function s(a,l){const c=l.modelPosition.nodeAfter,u=o.indexOf(c);u<0||(l.viewPosition=l.mapper.findPositionIn(i,u))}}function fD(n,e,t,r){for(const i of e)ide(n.root,i,t,r)||t.convertItem(i)}function ide(n,e,t,r){const{writer:i,mapper:o}=t;if(!r.reconversion)return!1;const s=o.toViewElement(e);return!s||s.root==n||!t.canReuseView(s)?!1:(i.move(i.createRangeOn(s),o.toViewPosition(J._createBefore(e))),!0)}function ode(n,e,{preflight:t}={}){return t?e.test(n,"insert"):e.consume(n,"insert")}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function hD(n){const{schema:e,document:t}=n.model;for(const r of t.getRoots())if(r.isEmpty&&!e.checkChild(r,"$text")&&e.checkChild(r,"paragraph"))return n.insertElement("paragraph",r),!0;return!1}function mD(n,e,t){const r=t.createContext(n);return!(!t.checkChild(r,"paragraph")||!t.checkChild(r.push("paragraph"),e))}function gD(n,e){const t=e.createElement("paragraph");return e.insert(t,n),e.createPositionAt(t,0)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class sde extends iD{elementToElement(e){return this.add(pD(e))}elementToAttribute(e){return this.add(cde(e))}attributeToAttribute(e){return this.add(ude(e))}elementToMarker(e){return this.add(dde(e))}dataToMarker(e){return this.add(fde(e))}}function vT(){return(n,e,t)=>{if(!e.modelRange&&t.consumable.consume(e.viewItem,{name:!0})){const{modelRange:r,modelCursor:i}=t.convertChildren(e.viewItem,e.modelCursor);e.modelRange=r,e.modelCursor=i}}}function ade(){return(n,e,{schema:t,consumable:r,writer:i})=>{let o=e.modelCursor;if(!r.test(e.viewItem))return;if(!t.checkChild(o,"$text")){if(!mD(o,"$text",t)||e.viewItem.data.trim().length==0)return;const a=o.nodeBefore;o=gD(o,i),a&&a.is("element","$marker")&&(i.move(i.createRangeOn(a),o),o=i.createPositionAfter(a))}r.consume(e.viewItem);const s=i.createText(e.viewItem.data);i.insert(s,o),e.modelRange=i.createRange(o,o.getShiftedBy(s.offsetSize)),e.modelCursor=e.modelRange.end}}function lde(n,e){return(t,r)=>{const i=r.newSelection,o=[];for(const a of i.getRanges())o.push(e.toModelRange(a));const s=n.createSelection(o,{backward:i.isBackward});s.isEqual(n.document.selection)||n.change(a=>{a.setSelection(s)})}}function pD(n){n=Lr(n);const e=_y(n),t=B0(n.view),r=t?`element:${t}`:"element";return i=>{i.on(r,e,{priority:n.converterPriority||"normal"})}}function cde(n){n=Lr(n),vD(n);const e=bD(n,!1),t=B0(n.view),r=t?`element:${t}`:"element";return i=>{i.on(r,e,{priority:n.converterPriority||"low"})}}function ude(n){n=Lr(n);let e=null;(typeof n.view=="string"||n.view.key)&&(e=gde(n)),vD(n,e);const t=bD(n,!0);return r=>{r.on("element",t,{priority:n.converterPriority||"low"})}}function dde(n){const e=bde(n.model);return pD({...n,model:e})}function fde(n){n=Lr(n),n.model||(n.model=i=>i?n.view+":"+i:n.view);const e={view:n.view,model:n.model},t=_y(bT(e,"start")),r=_y(bT(e,"end"));return i=>{i.on(`element:${n.view}-start`,t,{priority:n.converterPriority||"normal"}),i.on(`element:${n.view}-end`,r,{priority:n.converterPriority||"normal"});const o=ur.low,s=ur.highest,a=ur.get(n.converterPriority)/s;i.on("element",hde(e),{priority:o+a})}}function hde(n){return(e,t,r)=>{const i=`data-${n.view}`;if(!r.consumable.test(t.viewItem,{attributes:i+"-end-after"})&&!r.consumable.test(t.viewItem,{attributes:i+"-start-after"})&&!r.consumable.test(t.viewItem,{attributes:i+"-end-before"})&&!r.consumable.test(t.viewItem,{attributes:i+"-start-before"}))return;t.modelRange||Object.assign(t,r.convertChildren(t.viewItem,t.modelCursor)),r.consumable.consume(t.viewItem,{attributes:i+"-end-after"})&&o(t.modelRange.end,t.viewItem.getAttribute(i+"-end-after").split(",")),r.consumable.consume(t.viewItem,{attributes:i+"-start-after"})&&o(t.modelRange.end,t.viewItem.getAttribute(i+"-start-after").split(",")),r.consumable.consume(t.viewItem,{attributes:i+"-end-before"})&&o(t.modelRange.start,t.viewItem.getAttribute(i+"-end-before").split(",")),r.consumable.consume(t.viewItem,{attributes:i+"-start-before"})&&o(t.modelRange.start,t.viewItem.getAttribute(i+"-start-before").split(","));function o(s,a){for(const l of a){const c=n.model(l,r),u=r.writer.createElement("$marker",{"data-name":c});r.writer.insert(u,s),t.modelCursor.isEqual(s)?t.modelCursor=t.modelCursor.getShiftedBy(1):t.modelCursor=t.modelCursor._getTransformedByInsertion(s,1),t.modelRange=t.modelRange._getTransformedByInsertion(s,1)[0]}}}}function B0(n){return typeof n=="string"?n:typeof n=="object"&&typeof n.name=="string"?n.name:null}function _y(n){const e=new Ss(n.view);return(t,r,i)=>{const o=e.match(r.viewItem);if(!o)return;const s=o.match;if(s.name=!0,!i.consumable.test(r.viewItem,s))return;const a=mde(n.model,r.viewItem,i);a&&i.safeInsert(a,r.modelCursor)&&(i.consumable.consume(r.viewItem,s),i.convertChildren(r.viewItem,a),i.updateConversionResult(a,r))}}function mde(n,e,t){return n instanceof Function?n(e,t):t.writer.createElement(n)}function gde(n){typeof n.view=="string"&&(n.view={key:n.view});const e=n.view.key,t=typeof n.view.value>"u"?/[\s\S]*/:n.view.value;let r;return e=="class"||e=="style"?r={[e=="class"?"classes":"styles"]:t}:r={attributes:{[e]:t}},n.view.name&&(r.name=n.view.name),n.view=r,e}function vD(n,e=null){const t=e===null?!0:o=>o.getAttribute(e),r=typeof n.model!="object"?n.model:n.model.key,i=typeof n.model!="object"||typeof n.model.value>"u"?t:n.model.value;n.model={key:r,value:i}}function bD(n,e){const t=new Ss(n.view);return(r,i,o)=>{if(!i.modelRange&&e)return;const s=t.match(i.viewItem);if(!s||(pde(n.view,i.viewItem)?s.match.name=!0:delete s.match.name,!o.consumable.test(i.viewItem,s.match)))return;const a=n.model.key,l=typeof n.model.value=="function"?n.model.value(i.viewItem,o):n.model.value;if(l===null)return;i.modelRange||Object.assign(i,o.convertChildren(i.viewItem,i.modelCursor)),vde(i.modelRange,{key:a,value:l},e,o)&&(o.consumable.test(i.viewItem,{name:!0})&&(s.match.name=!0),o.consumable.consume(i.viewItem,s.match))}}function pde(n,e){const t=typeof n=="function"?n(e):n;return typeof t=="object"&&!B0(t)?!1:!t.classes&&!t.attributes&&!t.styles}function vde(n,e,t,r){let i=!1;for(const o of Array.from(n.getItems({shallow:t})))r.schema.checkAttribute(o,e.key)&&(i=!0,!o.hasAttribute(e.key)&&r.writer.setAttribute(e.key,e.value,o));return i}function bde(n){return(e,t)=>{const r=typeof n=="string"?n:n(e,t);return t.writer.createElement("$marker",{"data-name":r})}}function bT(n,e){const t=(r,i)=>{const o=r.getAttribute("name"),s=n.model(o,i);return i.writer.createElement("$marker",{"data-name":s})};return{view:`${n.view}-${e}`,model:t}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function yde(n){n.document.registerPostFixer(e=>wde(e,n))}function wde(n,e){const t=e.document.selection,r=e.schema,i=[];let o=!1;for(const s of t.getRanges()){const a=yD(s,r);a&&!a.isEqual(s)?(i.push(a),o=!0):i.push(s)}return o&&n.setSelection(xde(i),{backward:t.isBackward}),!1}function yD(n,e){return n.isCollapsed?_de(n,e):Cde(n,e)}function _de(n,e){const t=n.start,r=e.getNearestSelectionRange(t);if(!r){const o=t.getAncestors().reverse().find(s=>e.isObject(s));return o?V._createOn(o):null}if(!r.isCollapsed)return r;const i=r.start;return t.isEqual(i)?null:new V(i)}function Cde(n,e){const{start:t,end:r}=n,i=e.checkChild(t,"$text"),o=e.checkChild(r,"$text"),s=e.getLimitElement(t),a=e.getLimitElement(r);if(s===a){if(i&&o)return null;if(Sde(t,r,e)){const d=t.nodeAfter&&e.isSelectable(t.nodeAfter)?null:e.getNearestSelectionRange(t,"forward"),h=r.nodeBefore&&e.isSelectable(r.nodeBefore)?null:e.getNearestSelectionRange(r,"backward"),m=d?d.start:t,g=h?h.end:r;return new V(m,g)}}const l=s&&!s.is("rootElement"),c=a&&!a.is("rootElement");if(l||c){const u=t.nodeAfter&&r.nodeBefore&&t.nodeAfter.parent===r.nodeBefore.parent,d=l&&(!u||!wT(t.nodeAfter,e)),f=c&&(!u||!wT(r.nodeBefore,e));let h=t,m=r;return d&&(h=J._createBefore(yT(s,e))),f&&(m=J._createAfter(yT(a,e))),new V(h,m)}return null}function yT(n,e){let t=n,r=t;for(;e.isLimit(r)&&r.parent;)t=r,r=r.parent;return t}function Sde(n,e,t){const r=n.nodeAfter&&!t.isLimit(n.nodeAfter)||t.checkChild(n,"$text"),i=e.nodeBefore&&!t.isLimit(e.nodeBefore)||t.checkChild(e,"$text");return r||i}function xde(n){const e=[...n],t=new Set;let r=1;for(;r<e.length;){const o=e[r],s=e.slice(0,r);for(const[a,l]of s.entries())if(!t.has(a)){if(o.isEqual(l))t.add(a);else if(o.isIntersecting(l)){t.add(a),t.add(r);const c=o.getJoined(l);e.push(c)}}r++}return e.filter((o,s)=>!t.has(s))}function wT(n,e){return n&&e.isSelectable(n)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ade extends ct(){constructor(e,t){super(),this.model=e,this.view=new hue(t),this.mapper=new tD,this.downcastDispatcher=new nD({mapper:this.mapper,schema:e.schema});const r=this.model.document,i=r.selection,o=this.model.markers;this.listenTo(this.model,"_beforeChanges",()=>{this.view._disableRendering(!0)},{priority:"highest"}),this.listenTo(this.model,"_afterChanges",()=>{this.view._disableRendering(!1)},{priority:"lowest"}),this.listenTo(r,"change",()=>{this.view.change(s=>{this.downcastDispatcher.convertChanges(r.differ,o,s),this.downcastDispatcher.convertSelection(i,o,s)})},{priority:"low"}),this.listenTo(this.view.document,"selectionChange",lde(this.model,this.mapper)),this.listenTo(this.view.document,"beforeinput",Tde(this.mapper,this.model.schema,this.view),{priority:"high"}),this.downcastDispatcher.on("insert:$text",oD(),{priority:"lowest"}),this.downcastDispatcher.on("insert",sD(),{priority:"lowest"}),this.downcastDispatcher.on("remove",Pue(),{priority:"low"}),this.downcastDispatcher.on("cleanSelection",Rue()),this.downcastDispatcher.on("selection",Iue(),{priority:"low"}),this.downcastDispatcher.on("selection",Oue(),{priority:"low"}),this.view.document.roots.bindTo(this.model.document.roots).using(s=>{if(s.rootName=="$graveyard")return null;const a=new $M(this.view.document,s.name);return a.rootName=s.rootName,this.mapper.bindElements(s,a),a})}destroy(){this.view.destroy(),this.stopListening()}reconvertMarker(e){const t=typeof e=="string"?e:e.name,r=this.model.markers.get(t);if(!r)throw new M("editingcontroller-reconvertmarker-marker-not-exist",this,{markerName:t});this.model.change(()=>{this.model.markers._refresh(r)})}reconvertItem(e){this.model.change(()=>{this.model.document.differ._refreshItem(e)})}}function Tde(n,e,t){return(r,i)=>{if(!(t.document.isComposing&&!Re.isAndroid))for(let o=0;o<i.targetRanges.length;o++){const s=i.targetRanges[o],a=n.toModelRange(s),l=yD(a,e);!l||l.isEqual(a)||(i.targetRanges[o]=n.toViewRange(l))}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ic{constructor(){this._consumables=new Map}add(e,t){let r;if(e.is("$text")||e.is("documentFragment")){this._consumables.set(e,!0);return}this._consumables.has(e)?r=this._consumables.get(e):(r=new Ede(e),this._consumables.set(e,r)),r.add(t)}test(e,t){const r=this._consumables.get(e);return r===void 0?null:e.is("$text")||e.is("documentFragment")?r:r.test(t)}consume(e,t){return this.test(e,t)?(e.is("$text")||e.is("documentFragment")?this._consumables.set(e,!1):this._consumables.get(e).consume(t),!0):!1}revert(e,t){const r=this._consumables.get(e);r!==void 0&&(e.is("$text")||e.is("documentFragment")?this._consumables.set(e,!0):r.revert(t))}static consumablesFromElement(e){const t={element:e,name:!0,attributes:[],classes:[],styles:[]},r=e.getAttributeKeys();for(const s of r)s=="style"||s=="class"||t.attributes.push(s);const i=e.getClassNames();for(const s of i)t.classes.push(s);const o=e.getStyleNames();for(const s of o)t.styles.push(s);return t}static createFrom(e,t){if(t||(t=new Ic),e.is("$text"))return t.add(e),t;e.is("element")&&t.add(e,Ic.consumablesFromElement(e)),e.is("documentFragment")&&t.add(e);for(const r of e.getChildren())t=Ic.createFrom(r,t);return t}}const af=["attributes","classes","styles"];class Ede{constructor(e){this.element=e,this._canConsumeName=null,this._consumables={attributes:new Map,styles:new Map,classes:new Map}}add(e){e.name&&(this._canConsumeName=!0);for(const t of af)t in e&&this._add(t,e[t])}test(e){if(e.name&&!this._canConsumeName)return this._canConsumeName;for(const t of af)if(t in e){const r=this._test(t,e[t]);if(r!==!0)return r}return!0}consume(e){e.name&&(this._canConsumeName=!1);for(const t of af)t in e&&this._consume(t,e[t])}revert(e){e.name&&(this._canConsumeName=!0);for(const t of af)t in e&&this._revert(t,e[t])}_add(e,t){const r=nt(t),i=this._consumables[e];for(const o of r){if(e==="attributes"&&(o==="class"||o==="style"))throw new M("viewconsumable-invalid-attribute",this);if(i.set(o,!0),e==="styles")for(const s of this.element.document.stylesProcessor.getRelatedStyles(o))i.set(s,!0)}}_test(e,t){const r=nt(t),i=this._consumables[e];for(const o of r)if(e==="attributes"&&(o==="class"||o==="style")){const s=o=="class"?"classes":"styles",a=this._test(s,[...this._consumables[s].keys()]);if(a!==!0)return a}else{const s=i.get(o);if(s===void 0)return null;if(!s)return!1}return!0}_consume(e,t){const r=nt(t),i=this._consumables[e];for(const o of r)if(e==="attributes"&&(o==="class"||o==="style")){const s=o=="class"?"classes":"styles";this._consume(s,[...this._consumables[s].keys()])}else if(i.set(o,!1),e=="styles")for(const s of this.element.document.stylesProcessor.getRelatedStyles(o))i.set(s,!1)}_revert(e,t){const r=nt(t),i=this._consumables[e];for(const o of r)if(e==="attributes"&&(o==="class"||o==="style")){const s=o=="class"?"classes":"styles";this._revert(s,[...this._consumables[s].keys()])}else i.get(o)===!1&&i.set(o,!0)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class kde extends ct(){constructor(){super(),this._sourceDefinitions={},this._attributeProperties={},this.decorate("checkChild"),this.decorate("checkAttribute"),this.on("checkAttribute",(e,t)=>{t[0]=new gs(t[0])},{priority:"highest"}),this.on("checkChild",(e,t)=>{t[0]=new gs(t[0]),t[1]=this.getDefinition(t[1])},{priority:"highest"})}register(e,t){if(this._sourceDefinitions[e])throw new M("schema-cannot-register-item-twice",this,{itemName:e});this._sourceDefinitions[e]=[Object.assign({},t)],this._clearCache()}extend(e,t){if(!this._sourceDefinitions[e])throw new M("schema-cannot-extend-missing-item",this,{itemName:e});this._sourceDefinitions[e].push(Object.assign({},t)),this._clearCache()}getDefinitions(){return this._compiledDefinitions||this._compile(),this._compiledDefinitions}getDefinition(e){let t;return typeof e=="string"?t=e:"is"in e&&(e.is("$text")||e.is("$textProxy"))?t="$text":t=e.name,this.getDefinitions()[t]}isRegistered(e){return!!this.getDefinition(e)}isBlock(e){const t=this.getDefinition(e);return!!(t&&t.isBlock)}isLimit(e){const t=this.getDefinition(e);return t?!!(t.isLimit||t.isObject):!1}isObject(e){const t=this.getDefinition(e);return t?!!(t.isObject||t.isLimit&&t.isSelectable&&t.isContent):!1}isInline(e){const t=this.getDefinition(e);return!!(t&&t.isInline)}isSelectable(e){const t=this.getDefinition(e);return t?!!(t.isSelectable||t.isObject):!1}isContent(e){const t=this.getDefinition(e);return t?!!(t.isContent||t.isObject):!1}checkChild(e,t){return t?this._checkContextMatch(t,e):!1}checkAttribute(e,t){const r=this.getDefinition(e.last);return r?r.allowAttributes.includes(t):!1}checkMerge(e,t){if(e instanceof J){const r=e.nodeBefore,i=e.nodeAfter;if(!(r instanceof Tt))throw new M("schema-check-merge-no-element-before",this);if(!(i instanceof Tt))throw new M("schema-check-merge-no-element-after",this);return this.checkMerge(r,i)}for(const r of t.getChildren())if(!this.checkChild(e,r))return!1;return!0}addChildCheck(e){this.on("checkChild",(t,[r,i])=>{if(!i)return;const o=e(r,i);typeof o=="boolean"&&(t.stop(),t.return=o)},{priority:"high"})}addAttributeCheck(e){this.on("checkAttribute",(t,[r,i])=>{const o=e(r,i);typeof o=="boolean"&&(t.stop(),t.return=o)},{priority:"high"})}setAttributeProperties(e,t){this._attributeProperties[e]=Object.assign(this.getAttributeProperties(e),t)}getAttributeProperties(e){return this._attributeProperties[e]||{}}getLimitElement(e){let t;for(e instanceof J?t=e.parent:t=(e instanceof V?[e]:Array.from(e.getRanges())).reduce((i,o)=>{const s=o.getCommonAncestor();return i?i.getCommonAncestor(s,{includeSelf:!0}):s},null);!this.isLimit(t)&&t.parent;)t=t.parent;return t}checkAttributeInSelection(e,t){if(e.isCollapsed){const i=[...e.getFirstPosition().getAncestors(),new mt("",e.getAttributes())];return this.checkAttribute(i,t)}else{const r=e.getRanges();for(const i of r)for(const o of i)if(this.checkAttribute(o.item,t))return!0}return!1}*getValidRanges(e,t){e=Hde(e);for(const r of e)yield*this._getValidRangesForRange(r,t)}getNearestSelectionRange(e,t="both"){if(e.root.rootName=="$graveyard")return null;if(this.checkChild(e,"$text"))return new V(e);let r,i;const o=e.getAncestors().reverse().find(s=>this.isLimit(s))||e.root;(t=="both"||t=="backward")&&(r=new Hi({boundaries:V._createIn(o),startPosition:e,direction:"backward"})),(t=="both"||t=="forward")&&(i=new Hi({boundaries:V._createIn(o),startPosition:e}));for(const s of Wde(r,i)){const a=s.walker==r?"elementEnd":"elementStart",l=s.value;if(l.type==a&&this.isObject(l.item))return V._createOn(l.item);if(this.checkChild(l.nextPosition,"$text"))return new V(l.nextPosition)}return null}findAllowedParent(e,t){let r=e.parent;for(;r;){if(this.checkChild(r,t))return r;if(this.isLimit(r))return null;r=r.parent}return null}setAllowedAttributes(e,t,r){const i=r.model;for(const[o,s]of Object.entries(t))i.schema.checkAttribute(e,o)&&r.setAttribute(o,s,e)}removeDisallowedAttributes(e,t){for(const r of e)if(r.is("$text"))_T(this,r,t);else{const o=V._createIn(r).getPositions();for(const s of o){const a=s.nodeBefore||s.parent;_T(this,a,t)}}}getAttributesWithProperty(e,t,r){const i={};for(const[o,s]of e.getAttributes()){const a=this.getAttributeProperties(o);a[t]!==void 0&&(r===void 0||r===a[t])&&(i[o]=s)}return i}createContext(e){return new gs(e)}_clearCache(){this._compiledDefinitions=null}_compile(){const e={},t=this._sourceDefinitions,r=Object.keys(t);for(const i of r)e[i]=Pde(t[i],i);for(const i of r)Ide(e,i);for(const i of r)Ode(e,i);for(const i of r)Rde(e,i);for(const i of r)Mde(e,i),Dde(e,i);for(const i of r)Bde(e,i),Nde(e,i),Lde(e,i);this._compiledDefinitions=e}_checkContextMatch(e,t,r=t.length-1){const i=t.getItem(r);if(e.allowIn.includes(i.name)){if(r==0)return!0;{const o=this.getDefinition(i);return this._checkContextMatch(o,t,r-1)}}else return!1}*_getValidRangesForRange(e,t){let r=e.start,i=e.start;for(const o of e.getItems({shallow:!0}))o.is("element")&&(yield*this._getValidRangesForRange(V._createIn(o),t)),this.checkAttribute(o,t)||(r.isEqual(i)||(yield new V(r,i)),r=J._createAfter(o)),i=J._createAfter(o);r.isEqual(i)||(yield new V(r,i))}findOptimalInsertionRange(e,t){const r=e.getSelectedElement();if(r&&this.isObject(r)&&!this.isInline(r))return t=="before"||t=="after"?new V(J._createAt(r,t)):V._createOn(r);const i=ln(e.getSelectedBlocks());if(!i)return new V(e.focus);if(i.isEmpty)return new V(J._createAt(i,0));const o=J._createAfter(i);return e.focus.isTouching(o)?new V(o):new V(J._createBefore(i))}}class gs{constructor(e){if(e instanceof gs)return e;let t;typeof e=="string"?t=[e]:Array.isArray(e)?t=e:t=e.getAncestors({includeSelf:!0}),this._items=t.map(jde)}get length(){return this._items.length}get last(){return this._items[this._items.length-1]}[Symbol.iterator](){return this._items[Symbol.iterator]()}push(e){const t=new gs([e]);return t._items=[...this._items,...t._items],t}getItem(e){return this._items[e]}*getNames(){yield*this._items.map(e=>e.name)}endsWith(e){return Array.from(this.getNames()).join(" ").endsWith(e)}startsWith(e){return Array.from(this.getNames()).join(" ").startsWith(e)}}function Pde(n,e){const t={name:e,allowIn:[],allowContentOf:[],allowWhere:[],allowAttributes:[],allowAttributesOf:[],allowChildren:[],inheritTypesFrom:[]};return Fde(n,t),Go(n,t,"allowIn"),Go(n,t,"allowContentOf"),Go(n,t,"allowWhere"),Go(n,t,"allowAttributes"),Go(n,t,"allowAttributesOf"),Go(n,t,"allowChildren"),Go(n,t,"inheritTypesFrom"),$de(n,t),t}function Ide(n,e){const t=n[e];for(const r of t.allowChildren){const i=n[r];i&&i.allowIn.push(e)}t.allowChildren.length=0}function Ode(n,e){for(const t of n[e].allowContentOf)n[t]&&Vde(n,t).forEach(i=>{i.allowIn.push(e)});delete n[e].allowContentOf}function Rde(n,e){for(const t of n[e].allowWhere){const r=n[t];if(r){const i=r.allowIn;n[e].allowIn.push(...i)}}delete n[e].allowWhere}function Mde(n,e){for(const t of n[e].allowAttributesOf){const r=n[t];if(r){const i=r.allowAttributes;n[e].allowAttributes.push(...i)}}delete n[e].allowAttributesOf}function Dde(n,e){const t=n[e];for(const r of t.inheritTypesFrom){const i=n[r];if(i){const o=Object.keys(i).filter(s=>s.startsWith("is"));for(const s of o)s in t||(t[s]=i[s])}}delete t.inheritTypesFrom}function Bde(n,e){const t=n[e],r=t.allowIn.filter(i=>n[i]);t.allowIn=Array.from(new Set(r))}function Nde(n,e){const t=n[e];for(const r of t.allowIn)n[r].allowChildren.push(e)}function Lde(n,e){const t=n[e];t.allowAttributes=Array.from(new Set(t.allowAttributes))}function Fde(n,e){for(const t of n){const r=Object.keys(t).filter(i=>i.startsWith("is"));for(const i of r)e[i]=!!t[i]}}function Go(n,e,t){for(const r of n){const i=r[t];typeof i=="string"?e[t].push(i):Array.isArray(i)&&e[t].push(...i)}}function $de(n,e){for(const t of n){const r=t.inheritAllFrom;r&&(e.allowContentOf.push(r),e.allowWhere.push(r),e.allowAttributesOf.push(r),e.inheritTypesFrom.push(r))}}function Vde(n,e){const t=n[e];return zde(n).filter(r=>r.allowIn.includes(t.name))}function zde(n){return Object.keys(n).map(e=>n[e])}function jde(n){return typeof n=="string"||n.is("documentFragment")?{name:typeof n=="string"?n:"$documentFragment",*getAttributeKeys(){},getAttribute(){}}:{name:n.is("element")?n.name:"$text",*getAttributeKeys(){yield*n.getAttributeKeys()},getAttribute(e){return n.getAttribute(e)}}}function*Wde(n,e){let t=!1;for(;!t;){if(t=!0,n){const r=n.next();r.done||(t=!1,yield{walker:n,value:r.value})}if(e){const r=e.next();r.done||(t=!1,yield{walker:e,value:r.value})}}}function*Hde(n){for(const e of n)yield*e.getMinimalFlatRanges()}function _T(n,e,t){for(const r of e.getAttributeKeys())n.checkAttribute(e,r)||t.removeAttribute(r,e)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ude extends pt(){constructor(e){super(),this._splitParts=new Map,this._cursorParents=new Map,this._modelCursor=null,this._emptyElementsToKeep=new Set,this.conversionApi={...e,consumable:null,writer:null,store:null,convertItem:(t,r)=>this._convertItem(t,r),convertChildren:(t,r)=>this._convertChildren(t,r),safeInsert:(t,r)=>this._safeInsert(t,r),updateConversionResult:(t,r)=>this._updateConversionResult(t,r),splitToAllowedParent:(t,r)=>this._splitToAllowedParent(t,r),getSplitParts:t=>this._getSplitParts(t),keepEmptyElement:t=>this._keepEmptyElement(t)}}convert(e,t,r=["$root"]){this.fire("viewCleanup",e),this._modelCursor=qde(r,t),this.conversionApi.writer=t,this.conversionApi.consumable=Ic.createFrom(e),this.conversionApi.store={};const{modelRange:i}=this._convertItem(e,this._modelCursor),o=t.createDocumentFragment();if(i){this._removeEmptyElements();for(const s of Array.from(this._modelCursor.parent.getChildren()))t.append(s,o);o.markers=Gde(o,t)}return this._modelCursor=null,this._splitParts.clear(),this._cursorParents.clear(),this._emptyElementsToKeep.clear(),this.conversionApi.writer=null,this.conversionApi.store=null,o}_convertItem(e,t){const r={viewItem:e,modelCursor:t,modelRange:null};if(e.is("element")?this.fire(`element:${e.name}`,r,this.conversionApi):e.is("$text")?this.fire("text",r,this.conversionApi):this.fire("documentFragment",r,this.conversionApi),r.modelRange&&!(r.modelRange instanceof V))throw new M("view-conversion-dispatcher-incorrect-result",this);return{modelRange:r.modelRange,modelCursor:r.modelCursor}}_convertChildren(e,t){let r=t.is("position")?t:J._createAt(t,0);const i=new V(r);for(const o of Array.from(e.getChildren())){const s=this._convertItem(o,r);s.modelRange instanceof V&&(i.end=s.modelRange.end,r=s.modelCursor)}return{modelRange:i,modelCursor:r}}_safeInsert(e,t){const r=this._splitToAllowedParent(e,t);return r?(this.conversionApi.writer.insert(e,r.position),!0):!1}_updateConversionResult(e,t){const r=this._getSplitParts(e),i=this.conversionApi.writer;t.modelRange||(t.modelRange=i.createRange(i.createPositionBefore(e),i.createPositionAfter(r[r.length-1])));const o=this._cursorParents.get(e);o?t.modelCursor=i.createPositionAt(o,0):t.modelCursor=t.modelRange.end}_splitToAllowedParent(e,t){const{schema:r,writer:i}=this.conversionApi;let o=r.findAllowedParent(t,e);if(o){if(o===t.parent)return{position:t};this._modelCursor.parent.getAncestors().includes(o)&&(o=null)}if(!o)return mD(t,e,r)?{position:gD(t,i)}:null;const s=this.conversionApi.writer.split(t,o),a=[];for(const c of s.range.getWalker())if(c.type=="elementEnd")a.push(c.item);else{const u=a.pop(),d=c.item;this._registerSplitPair(u,d)}const l=s.range.end.parent;return this._cursorParents.set(e,l),{position:s.position,cursorParent:l}}_registerSplitPair(e,t){this._splitParts.has(e)||this._splitParts.set(e,[e]);const r=this._splitParts.get(e);this._splitParts.set(t,r),r.push(t)}_getSplitParts(e){let t;return this._splitParts.has(e)?t=this._splitParts.get(e):t=[e],t}_keepEmptyElement(e){this._emptyElementsToKeep.add(e)}_removeEmptyElements(){let e=!1;for(const t of this._splitParts.keys())t.isEmpty&&!this._emptyElementsToKeep.has(t)&&(this.conversionApi.writer.remove(t),this._splitParts.delete(t),e=!0);e&&this._removeEmptyElements()}}function Gde(n,e){const t=new Set,r=new Map,i=V._createIn(n).getItems();for(const o of i)o.is("element","$marker")&&t.add(o);for(const o of t){const s=o.getAttribute("data-name"),a=e.createPositionBefore(o);r.has(s)?r.get(s).end=a.clone():r.set(s,new V(a.clone())),e.remove(o)}return r}function qde(n,e){let t;for(const r of new gs(n)){const i={};for(const s of r.getAttributeKeys())i[s]=r.getAttribute(s);const o=e.createElement(r.name,i);t&&e.insert(o,t),t=J._createAt(o,0)}return t}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Kde{getHtml(e){const r=he.document.implementation.createHTMLDocument("").createElement("div");return r.appendChild(e),r.innerHTML}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Yde{constructor(e){this.skipComments=!0,this.domParser=new DOMParser,this.domConverter=new YM(e,{renderingMode:"data"}),this.htmlWriter=new Kde}toData(e){const t=this.domConverter.viewToDom(e);return this.htmlWriter.getHtml(t)}toView(e){const t=this._toDom(e);return this.domConverter.domToView(t,{skipComments:this.skipComments})}registerRawContentMatcher(e){this.domConverter.registerRawContentMatcher(e)}useFillerType(e){this.domConverter.blockFillerMode=e=="marked"?"markedNbsp":"nbsp"}_toDom(e){e.match(/<(?:html|body|head|meta)(?:\s[^>]*)?>/i)||(e=`<body>${e}</body>`);const t=this.domParser.parseFromString(e,"text/html"),r=t.createDocumentFragment(),i=t.body.childNodes;for(;i.length>0;)r.appendChild(i[0]);return r}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Xde extends pt(){constructor(e,t){super(),this.model=e,this.mapper=new tD,this.downcastDispatcher=new nD({mapper:this.mapper,schema:e.schema}),this.downcastDispatcher.on("insert:$text",oD(),{priority:"lowest"}),this.downcastDispatcher.on("insert",sD(),{priority:"lowest"}),this.upcastDispatcher=new Ude({schema:e.schema}),this.viewDocument=new jM(t),this.stylesProcessor=t,this.htmlProcessor=new Yde(this.viewDocument),this.processor=this.htmlProcessor,this._viewWriter=new HM(this.viewDocument),this.upcastDispatcher.on("text",ade(),{priority:"lowest"}),this.upcastDispatcher.on("element",vT(),{priority:"lowest"}),this.upcastDispatcher.on("documentFragment",vT(),{priority:"lowest"}),ct().prototype.decorate.call(this,"init"),ct().prototype.decorate.call(this,"set"),ct().prototype.decorate.call(this,"get"),ct().prototype.decorate.call(this,"toView"),ct().prototype.decorate.call(this,"toModel"),this.on("init",()=>{this.fire("ready")},{priority:"lowest"}),this.on("ready",()=>{this.model.enqueueChange({isUndoable:!1},hD)},{priority:"lowest"})}get(e={}){const{rootName:t="main",trim:r="empty"}=e;if(!this._checkIfRootsExists([t]))throw new M("datacontroller-get-non-existent-root",this);const i=this.model.document.getRoot(t);return i.isAttached()||Ye("datacontroller-get-detached-root",this),r==="empty"&&!this.model.hasContent(i,{ignoreWhitespaces:!0})?"":this.stringify(i,e)}stringify(e,t={}){const r=this.toView(e,t);return this.processor.toData(r)}toView(e,t={}){const r=this.viewDocument,i=this._viewWriter;this.mapper.clearBindings();const o=V._createIn(e),s=new ms(r);this.mapper.bindElements(e,s);const a=e.is("documentFragment")?e.markers:Zde(e);return this.downcastDispatcher.convert(o,a,i,t),s}init(e){if(this.model.document.version)throw new M("datacontroller-init-document-not-empty",this);let t={};if(typeof e=="string"?t.main=e:t=e,!this._checkIfRootsExists(Object.keys(t)))throw new M("datacontroller-init-non-existent-root",this);return this.model.enqueueChange({isUndoable:!1},r=>{for(const i of Object.keys(t)){const o=this.model.document.getRoot(i);r.insert(this.parse(t[i],o),o,0)}}),Promise.resolve()}set(e,t={}){let r={};if(typeof e=="string"?r.main=e:r=e,!this._checkIfRootsExists(Object.keys(r)))throw new M("datacontroller-set-non-existent-root",this);this.model.enqueueChange(t.batchType||{},i=>{i.setSelection(null),i.removeSelectionAttribute(this.model.document.selection.getAttributeKeys());for(const o of Object.keys(r)){const s=this.model.document.getRoot(o);i.remove(i.createRangeIn(s)),i.insert(this.parse(r[o],s),s,0)}})}parse(e,t="$root"){const r=this.processor.toView(e);return this.toModel(r,t)}toModel(e,t="$root"){return this.model.change(r=>this.upcastDispatcher.convert(e,r,t))}addStyleProcessorRules(e){e(this.stylesProcessor)}registerRawContentMatcher(e){this.processor&&this.processor!==this.htmlProcessor&&this.processor.registerRawContentMatcher(e),this.htmlProcessor.registerRawContentMatcher(e)}destroy(){this.stopListening()}_checkIfRootsExists(e){for(const t of e)if(!this.model.document.getRoot(t))return!1;return!0}}function Zde(n){const e=[],t=n.root.document;if(!t)return new Map;const r=V._createIn(n);for(const i of t.model.markers){const o=i.getRange(),s=o.isCollapsed,a=o.start.isEqual(r.start)||o.end.isEqual(r.end);if(s&&a)e.push([i.name,o]);else{const l=r.getIntersection(o);l&&e.push([i.name,l])}}return e.sort(([i,o],[s,a])=>{if(o.end.compareWith(a.start)!=="after")return 1;if(o.start.compareWith(a.end)!=="before")return-1;switch(o.start.compareWith(a.start)){case"before":return 1;case"after":return-1;default:switch(o.end.compareWith(a.end)){case"before":return 1;case"after":return-1;default:return s.localeCompare(i)}}}),new Map(e)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Jde{constructor(e,t){this._helpers=new Map,this._downcast=nt(e),this._createConversionHelpers({name:"downcast",dispatchers:this._downcast,isDowncast:!0}),this._upcast=nt(t),this._createConversionHelpers({name:"upcast",dispatchers:this._upcast,isDowncast:!1})}addAlias(e,t){const r=this._downcast.includes(t);if(!this._upcast.includes(t)&&!r)throw new M("conversion-add-alias-dispatcher-not-registered",this);this._createConversionHelpers({name:e,dispatchers:[t],isDowncast:r})}for(e){if(!this._helpers.has(e))throw new M("conversion-for-unknown-group",this);return this._helpers.get(e)}elementToElement(e){this.for("downcast").elementToElement(e);for(const{model:t,view:r}of Zp(e))this.for("upcast").elementToElement({model:t,view:r,converterPriority:e.converterPriority})}attributeToElement(e){this.for("downcast").attributeToElement(e);for(const{model:t,view:r}of Zp(e))this.for("upcast").elementToAttribute({view:r,model:t,converterPriority:e.converterPriority})}attributeToAttribute(e){this.for("downcast").attributeToAttribute(e);for(const{model:t,view:r}of Zp(e))this.for("upcast").attributeToAttribute({view:r,model:t})}_createConversionHelpers({name:e,dispatchers:t,isDowncast:r}){if(this._helpers.has(e))throw new M("conversion-group-exists",this);const i=r?new kue(t):new sde(t);this._helpers.set(e,i)}}function*Zp(n){if(n.model.values)for(const e of n.model.values){const t={key:n.model.key,value:e},r=n.view[e],i=n.upcastAlso?n.upcastAlso[e]:void 0;yield*CT(t,r,i)}else yield*CT(n.model,n.view,n.upcastAlso)}function*CT(n,e,t){if(yield{model:n,view:e},t)for(const r of nt(t))yield{model:n,view:r}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class vr{constructor(e){this.baseVersion=e,this.isDocumentOperation=this.baseVersion!==null,this.batch=null}_validate(){}toJSON(){const e=Object.assign({},this);return e.__className=this.constructor.className,delete e.batch,delete e.isDocumentOperation,e}static get className(){return"Operation"}static fromJSON(e,t){return new this(e.baseVersion)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function N0(n,e){const t=_D(e),r=t.reduce((s,a)=>s+a.offsetSize,0),i=n.parent;Ou(n);const o=n.index;return i._insertChild(o,t),Iu(i,o+t.length),Iu(i,o),new V(n,n.getShiftedBy(r))}function wD(n){if(!n.isFlat)throw new M("operation-utils-remove-range-not-flat",this);const e=n.start.parent;Ou(n.start),Ou(n.end);const t=e._removeChildren(n.start.index,n.end.index-n.start.index);return Iu(e,n.start.index),t}function Pu(n,e){if(!n.isFlat)throw new M("operation-utils-move-range-not-flat",this);const t=wD(n);return e=e._getTransformedByDeletion(n.start,n.end.offset-n.start.offset),N0(e,t)}function Qde(n,e,t){Ou(n.start),Ou(n.end);for(const r of n.getItems({shallow:!0})){const i=r.is("$textProxy")?r.textNode:r;t!==null?i._setAttribute(e,t):i._removeAttribute(e),Iu(i.parent,i.index)}Iu(n.end.parent,n.end.index)}function _D(n){const e=[];function t(r){if(typeof r=="string")e.push(new mt(r));else if(r instanceof ei)e.push(new mt(r.data,r.getAttributes()));else if(r instanceof Ns)e.push(r);else if(pr(r))for(const i of r)t(i)}t(n);for(let r=1;r<e.length;r++){const i=e[r],o=e[r-1];i instanceof mt&&o instanceof mt&&CD(i,o)&&(e.splice(r-1,2,new mt(o.data+i.data,o.getAttributes())),r--)}return e}function Iu(n,e){const t=n.getChild(e-1),r=n.getChild(e);if(t&&r&&t.is("$text")&&r.is("$text")&&CD(t,r)){const i=new mt(t.data+r.data,t.getAttributes());n._removeChildren(e-1,2),n._insertChild(e-1,i)}}function Ou(n){const e=n.textNode,t=n.parent;if(e){const r=n.offset-e.startOffset,i=e.index;t._removeChildren(i,1);const o=new mt(e.data.substr(0,r),e.getAttributes()),s=new mt(e.data.substr(r),e.getAttributes());t._insertChild(i,[o,s])}}function CD(n,e){const t=n.getAttributes(),r=e.getAttributes();for(const i of t){if(i[1]!==e.getAttribute(i[0]))return!1;r.next()}return r.next().done}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class et extends vr{constructor(e,t,r,i){super(i),this.sourcePosition=e.clone(),this.sourcePosition.stickiness="toNext",this.howMany=t,this.targetPosition=r.clone(),this.targetPosition.stickiness="toNone"}get type(){return this.targetPosition.root.rootName=="$graveyard"?"remove":this.sourcePosition.root.rootName=="$graveyard"?"reinsert":"move"}get affectedSelectable(){return[V._createFromPositionAndShift(this.sourcePosition,this.howMany),V._createFromPositionAndShift(this.targetPosition,0)]}clone(){return new et(this.sourcePosition,this.howMany,this.targetPosition,this.baseVersion)}getMovedRangeStart(){return this.targetPosition._getTransformedByDeletion(this.sourcePosition,this.howMany)}getReversed(){const e=this.sourcePosition._getTransformedByInsertion(this.targetPosition,this.howMany);return new et(this.getMovedRangeStart(),this.howMany,e,this.baseVersion+1)}_validate(){const e=this.sourcePosition.parent,t=this.targetPosition.parent,r=this.sourcePosition.offset,i=this.targetPosition.offset;if(r+this.howMany>e.maxOffset)throw new M("move-operation-nodes-do-not-exist",this);if(e===t&&r<i&&i<r+this.howMany)throw new M("move-operation-range-into-itself",this);if(this.sourcePosition.root==this.targetPosition.root&&Tn(this.sourcePosition.getParentPath(),this.targetPosition.getParentPath())=="prefix"){const o=this.sourcePosition.path.length-1;if(this.targetPosition.path[o]>=r&&this.targetPosition.path[o]<r+this.howMany)throw new M("move-operation-node-into-itself",this)}}_execute(){Pu(V._createFromPositionAndShift(this.sourcePosition,this.howMany),this.targetPosition)}toJSON(){const e=super.toJSON();return e.sourcePosition=this.sourcePosition.toJSON(),e.targetPosition=this.targetPosition.toJSON(),e}static get className(){return"MoveOperation"}static fromJSON(e,t){const r=J.fromJSON(e.sourcePosition,t),i=J.fromJSON(e.targetPosition,t);return new this(r,e.howMany,i,e.baseVersion)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class cn extends vr{constructor(e,t,r){super(r),this.position=e.clone(),this.position.stickiness="toNone",this.nodes=new kc(_D(t)),this.shouldReceiveAttributes=!1}get type(){return"insert"}get howMany(){return this.nodes.maxOffset}get affectedSelectable(){return this.position.clone()}clone(){const e=new kc([...this.nodes].map(r=>r._clone(!0))),t=new cn(this.position,e,this.baseVersion);return t.shouldReceiveAttributes=this.shouldReceiveAttributes,t}getReversed(){const e=this.position.root.document.graveyard,t=new J(e,[0]);return new et(this.position,this.nodes.maxOffset,t,this.baseVersion+1)}_validate(){const e=this.position.parent;if(!e||e.maxOffset<this.position.offset)throw new M("insert-operation-position-invalid",this)}_execute(){const e=this.nodes;this.nodes=new kc([...e].map(t=>t._clone(!0))),N0(this.position,e)}toJSON(){const e=super.toJSON();return e.position=this.position.toJSON(),e.nodes=this.nodes.toJSON(),e}static get className(){return"InsertOperation"}static fromJSON(e,t){const r=[];for(const o of e.nodes)o.name?r.push(Tt.fromJSON(o)):r.push(mt.fromJSON(o));const i=new cn(J.fromJSON(e.position,t),r,e.baseVersion);return i.shouldReceiveAttributes=e.shouldReceiveAttributes,i}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class gt extends vr{constructor(e,t,r,i,o){super(o),this.splitPosition=e.clone(),this.splitPosition.stickiness="toNext",this.howMany=t,this.insertionPosition=r,this.graveyardPosition=i?i.clone():null,this.graveyardPosition&&(this.graveyardPosition.stickiness="toNext")}get type(){return"split"}get moveTargetPosition(){const e=this.insertionPosition.path.slice();return e.push(0),new J(this.insertionPosition.root,e)}get movedRange(){const e=this.splitPosition.getShiftedBy(Number.POSITIVE_INFINITY);return new V(this.splitPosition,e)}get affectedSelectable(){const e=[V._createFromPositionAndShift(this.splitPosition,0),V._createFromPositionAndShift(this.insertionPosition,0)];return this.graveyardPosition&&e.push(V._createFromPositionAndShift(this.graveyardPosition,0)),e}clone(){return new gt(this.splitPosition,this.howMany,this.insertionPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const e=this.splitPosition.root.document.graveyard,t=new J(e,[0]);return new Mt(this.moveTargetPosition,this.howMany,this.splitPosition,t,this.baseVersion+1)}_validate(){const e=this.splitPosition.parent,t=this.splitPosition.offset;if(!e||e.maxOffset<t)throw new M("split-operation-position-invalid",this);if(e.parent){if(this.howMany!=e.maxOffset-this.splitPosition.offset)throw new M("split-operation-how-many-invalid",this);if(this.graveyardPosition&&!this.graveyardPosition.nodeAfter)throw new M("split-operation-graveyard-position-invalid",this)}else throw new M("split-operation-split-in-root",this)}_execute(){const e=this.splitPosition.parent;if(this.graveyardPosition)Pu(V._createFromPositionAndShift(this.graveyardPosition,1),this.insertionPosition);else{const r=e._clone();N0(this.insertionPosition,r)}const t=new V(J._createAt(e,this.splitPosition.offset),J._createAt(e,e.maxOffset));Pu(t,this.moveTargetPosition)}toJSON(){const e=super.toJSON();return e.splitPosition=this.splitPosition.toJSON(),e.insertionPosition=this.insertionPosition.toJSON(),this.graveyardPosition&&(e.graveyardPosition=this.graveyardPosition.toJSON()),e}static get className(){return"SplitOperation"}static getInsertionPosition(e){const t=e.path.slice(0,-1);return t[t.length-1]++,new J(e.root,t,"toPrevious")}static fromJSON(e,t){const r=J.fromJSON(e.splitPosition,t),i=J.fromJSON(e.insertionPosition,t),o=e.graveyardPosition?J.fromJSON(e.graveyardPosition,t):null;return new this(r,e.howMany,i,o,e.baseVersion)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Mt extends vr{constructor(e,t,r,i,o){super(o),this.sourcePosition=e.clone(),this.sourcePosition.stickiness="toPrevious",this.howMany=t,this.targetPosition=r.clone(),this.targetPosition.stickiness="toNext",this.graveyardPosition=i.clone()}get type(){return"merge"}get deletionPosition(){return new J(this.sourcePosition.root,this.sourcePosition.path.slice(0,-1))}get movedRange(){const e=this.sourcePosition.getShiftedBy(Number.POSITIVE_INFINITY);return new V(this.sourcePosition,e)}get affectedSelectable(){const e=this.sourcePosition.parent;return[V._createOn(e),V._createFromPositionAndShift(this.targetPosition,0),V._createFromPositionAndShift(this.graveyardPosition,0)]}clone(){return new Mt(this.sourcePosition,this.howMany,this.targetPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const e=this.targetPosition._getTransformedByMergeOperation(this),t=this.sourcePosition.path.slice(0,-1),r=new J(this.sourcePosition.root,t)._getTransformedByMergeOperation(this);return new gt(e,this.howMany,r,this.graveyardPosition,this.baseVersion+1)}_validate(){const e=this.sourcePosition.parent,t=this.targetPosition.parent;if(e.parent)if(t.parent){if(this.howMany!=e.maxOffset)throw new M("merge-operation-how-many-invalid",this)}else throw new M("merge-operation-target-position-invalid",this);else throw new M("merge-operation-source-position-invalid",this)}_execute(){const e=this.sourcePosition.parent,t=V._createIn(e);Pu(t,this.targetPosition),Pu(V._createOn(e),this.graveyardPosition)}toJSON(){const e=super.toJSON();return e.sourcePosition=e.sourcePosition.toJSON(),e.targetPosition=e.targetPosition.toJSON(),e.graveyardPosition=e.graveyardPosition.toJSON(),e}static get className(){return"MergeOperation"}static fromJSON(e,t){const r=J.fromJSON(e.sourcePosition,t),i=J.fromJSON(e.targetPosition,t),o=J.fromJSON(e.graveyardPosition,t);return new this(r,e.howMany,i,o,e.baseVersion)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Qn extends vr{constructor(e,t,r,i,o,s){super(s),this.name=e,this.oldRange=t?t.clone():null,this.newRange=r?r.clone():null,this.affectsData=o,this._markers=i}get type(){return"marker"}get affectedSelectable(){const e=[];return this.oldRange&&e.push(this.oldRange.clone()),this.newRange&&(this.oldRange?e.push(...this.newRange.getDifference(this.oldRange)):e.push(this.newRange.clone())),e}clone(){return new Qn(this.name,this.oldRange,this.newRange,this._markers,this.affectsData,this.baseVersion)}getReversed(){return new Qn(this.name,this.newRange,this.oldRange,this._markers,this.affectsData,this.baseVersion+1)}_execute(){this.newRange?this._markers._set(this.name,this.newRange,!0,this.affectsData):this._markers._remove(this.name)}toJSON(){const e=super.toJSON();return this.oldRange&&(e.oldRange=this.oldRange.toJSON()),this.newRange&&(e.newRange=this.newRange.toJSON()),delete e._markers,e}static get className(){return"MarkerOperation"}static fromJSON(e,t){return new Qn(e.name,e.oldRange?V.fromJSON(e.oldRange,t):null,e.newRange?V.fromJSON(e.newRange,t):null,t.model.markers,e.affectsData,e.baseVersion)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Vt extends vr{constructor(e,t,r,i,o){super(o),this.range=e.clone(),this.key=t,this.oldValue=r===void 0?null:r,this.newValue=i===void 0?null:i}get type(){return this.oldValue===null?"addAttribute":this.newValue===null?"removeAttribute":"changeAttribute"}get affectedSelectable(){return this.range.clone()}clone(){return new Vt(this.range,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new Vt(this.range,this.key,this.newValue,this.oldValue,this.baseVersion+1)}toJSON(){const e=super.toJSON();return e.range=this.range.toJSON(),e}_validate(){if(!this.range.isFlat)throw new M("attribute-operation-range-not-flat",this);for(const e of this.range.getItems({shallow:!0})){if(this.oldValue!==null&&!Ta(e.getAttribute(this.key),this.oldValue))throw new M("attribute-operation-wrong-old-value",this,{item:e,key:this.key,value:this.oldValue});if(this.oldValue===null&&this.newValue!==null&&e.hasAttribute(this.key))throw new M("attribute-operation-attribute-exists",this,{node:e,key:this.key})}}_execute(){Ta(this.oldValue,this.newValue)||Qde(this.range,this.key,this.newValue)}static get className(){return"AttributeOperation"}static fromJSON(e,t){return new Vt(V.fromJSON(e.range,t),e.key,e.oldValue,e.newValue,e.baseVersion)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class tn extends vr{get type(){return"noop"}get affectedSelectable(){return null}clone(){return new tn(this.baseVersion)}getReversed(){return new tn(this.baseVersion+1)}_execute(){}static get className(){return"NoOperation"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class er extends vr{constructor(e,t,r,i){super(i),this.position=e,this.position.stickiness="toNext",this.oldName=t,this.newName=r}get type(){return"rename"}get affectedSelectable(){return this.position.nodeAfter}clone(){return new er(this.position.clone(),this.oldName,this.newName,this.baseVersion)}getReversed(){return new er(this.position.clone(),this.newName,this.oldName,this.baseVersion+1)}_validate(){const e=this.position.nodeAfter;if(e instanceof Tt){if(e.name!==this.oldName)throw new M("rename-operation-wrong-name",this)}else throw new M("rename-operation-wrong-position",this)}_execute(){const e=this.position.nodeAfter;e.name=this.newName}toJSON(){const e=super.toJSON();return e.position=this.position.toJSON(),e}static get className(){return"RenameOperation"}static fromJSON(e,t){return new er(J.fromJSON(e.position,t),e.oldName,e.newName,e.baseVersion)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ki extends vr{constructor(e,t,r,i,o){super(o),this.root=e,this.key=t,this.oldValue=r===void 0?null:r,this.newValue=i===void 0?null:i}get type(){return this.oldValue===null?"addRootAttribute":this.newValue===null?"removeRootAttribute":"changeRootAttribute"}get affectedSelectable(){return this.root}clone(){return new Ki(this.root,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new Ki(this.root,this.key,this.newValue,this.oldValue,this.baseVersion+1)}_validate(){if(this.root!=this.root.root||this.root.is("documentFragment"))throw new M("rootattribute-operation-not-a-root",this,{root:this.root,key:this.key});if(this.oldValue!==null&&this.root.getAttribute(this.key)!==this.oldValue)throw new M("rootattribute-operation-wrong-old-value",this,{root:this.root,key:this.key});if(this.oldValue===null&&this.newValue!==null&&this.root.hasAttribute(this.key))throw new M("rootattribute-operation-attribute-exists",this,{root:this.root,key:this.key})}_execute(){this.newValue!==null?this.root._setAttribute(this.key,this.newValue):this.root._removeAttribute(this.key)}toJSON(){const e=super.toJSON();return e.root=this.root.toJSON(),e}static get className(){return"RootAttributeOperation"}static fromJSON(e,t){if(!t.getRoot(e.root))throw new M("rootattribute-operation-fromjson-no-root",this,{rootName:e.root});return new Ki(t.getRoot(e.root),e.key,e.oldValue,e.newValue,e.baseVersion)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Si extends vr{constructor(e,t,r,i,o){if(super(o),this.rootName=e,this.elementName=t,this.isAdd=r,this._document=i,!this._document.getRoot(this.rootName)){const s=this._document.createRoot(this.elementName,this.rootName);s._isAttached=!1}}get type(){return this.isAdd?"addRoot":"detachRoot"}get affectedSelectable(){return this._document.getRoot(this.rootName)}clone(){return new Si(this.rootName,this.elementName,this.isAdd,this._document,this.baseVersion)}getReversed(){return new Si(this.rootName,this.elementName,!this.isAdd,this._document,this.baseVersion+1)}_execute(){this._document.getRoot(this.rootName)._isAttached=this.isAdd}toJSON(){const e=super.toJSON();return delete e._document,e}static get className(){return"RootOperation"}static fromJSON(e,t){return new Si(e.rootName,e.elementName,e.isAdd,t,e.baseVersion)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Vr={};Vr[Vt.className]=Vt;Vr[cn.className]=cn;Vr[Qn.className]=Qn;Vr[et.className]=et;Vr[tn.className]=tn;Vr[vr.className]=vr;Vr[er.className]=er;Vr[Ki.className]=Ki;Vr[Si.className]=Si;Vr[gt.className]=gt;Vr[Mt.className]=Mt;class efe{static fromJSON(e,t){return Vr[e.__className].fromJSON(e,t)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Cy=new Map;function Ze(n,e,t){let r=Cy.get(n);r||(r=new Map,Cy.set(n,r)),r.set(e,t)}function tfe(n,e){const t=Cy.get(n);return t&&t.has(e)?t.get(e):nfe}function nfe(n){return[n]}function ST(n,e,t={}){const r=tfe(n.constructor,e.constructor);try{return n=n.clone(),r(n,e,t)}catch(i){throw i}}function rfe(n,e,t){n=n.slice(),e=e.slice();const r=new ife(t.document,t.useRelations,t.forceWeakRemove);r.setOriginalOperations(n),r.setOriginalOperations(e);const i=r.originalOperations;if(n.length==0||e.length==0)return{operationsA:n,operationsB:e,originalOperations:i};const o=new WeakMap;for(const l of n)o.set(l,0);const s={nextBaseVersionA:n[n.length-1].baseVersion+1,nextBaseVersionB:e[e.length-1].baseVersion+1,originalOperationsACount:n.length,originalOperationsBCount:e.length};let a=0;for(;a<n.length;){const l=n[a],c=o.get(l);if(c==e.length){a++;continue}const u=e[c],d=ST(l,u,r.getContext(l,u,!0)),f=ST(u,l,r.getContext(u,l,!1));r.updateRelation(l,u),r.setOriginalOperations(d,l),r.setOriginalOperations(f,u);for(const h of d)o.set(h,c+f.length);n.splice(a,1,...d),e.splice(c,1,...f)}return xT(n,s.nextBaseVersionB),xT(e,s.nextBaseVersionA),{operationsA:n,operationsB:e,originalOperations:i}}class ife{constructor(e,t,r=!1){this.originalOperations=new Map,this._history=e.history,this._useRelations=t,this._forceWeakRemove=!!r,this._relations=new Map}setOriginalOperations(e,t=null){const r=t?this.originalOperations.get(t):null;for(const i of e)this.originalOperations.set(i,r||i)}updateRelation(e,t){if(e instanceof et)t instanceof Mt?e.targetPosition.isEqual(t.sourcePosition)||t.movedRange.containsPosition(e.targetPosition)?this._setRelation(e,t,"insertAtSource"):e.targetPosition.isEqual(t.deletionPosition)?this._setRelation(e,t,"insertBetween"):e.targetPosition.isAfter(t.sourcePosition)&&this._setRelation(e,t,"moveTargetAfter"):t instanceof et&&(e.targetPosition.isEqual(t.sourcePosition)||e.targetPosition.isBefore(t.sourcePosition)?this._setRelation(e,t,"insertBefore"):this._setRelation(e,t,"insertAfter"));else if(e instanceof gt){if(t instanceof Mt)e.splitPosition.isBefore(t.sourcePosition)&&this._setRelation(e,t,"splitBefore");else if(t instanceof et)if(e.splitPosition.isEqual(t.sourcePosition)||e.splitPosition.isBefore(t.sourcePosition))this._setRelation(e,t,"splitBefore");else{const r=V._createFromPositionAndShift(t.sourcePosition,t.howMany);if(e.splitPosition.hasSameParentAs(t.sourcePosition)&&r.containsPosition(e.splitPosition)){const i=r.end.offset-e.splitPosition.offset,o=e.splitPosition.offset-r.start.offset;this._setRelation(e,t,{howMany:i,offset:o})}}}else if(e instanceof Mt)t instanceof Mt?(e.targetPosition.isEqual(t.sourcePosition)||this._setRelation(e,t,"mergeTargetNotMoved"),e.sourcePosition.isEqual(t.targetPosition)&&this._setRelation(e,t,"mergeSourceNotMoved"),e.sourcePosition.isEqual(t.sourcePosition)&&this._setRelation(e,t,"mergeSameElement")):t instanceof gt?e.sourcePosition.isEqual(t.splitPosition)&&this._setRelation(e,t,"splitAtSource"):t instanceof et&&t.howMany>0&&(e.sourcePosition.isEqual(t.sourcePosition.getShiftedBy(t.howMany))&&this._setRelation(e,t,"mergeSourceAffected"),e.targetPosition.isEqual(t.sourcePosition)&&this._setRelation(e,t,"mergeTargetWasBefore"));else if(e instanceof Qn){const r=e.newRange;if(!r)return;if(t instanceof et){const i=V._createFromPositionAndShift(t.sourcePosition,t.howMany),o=i.containsPosition(r.start)||i.start.isEqual(r.start),s=i.containsPosition(r.end)||i.end.isEqual(r.end);(o||s)&&!i.containsRange(r)&&this._setRelation(e,t,{side:o?"left":"right",path:o?r.start.path.slice():r.end.path.slice()})}else if(t instanceof Mt){const i=r.start.isEqual(t.targetPosition),o=r.start.isEqual(t.deletionPosition),s=r.end.isEqual(t.deletionPosition),a=r.end.isEqual(t.sourcePosition);(i||o||s||a)&&this._setRelation(e,t,{wasInLeftElement:i,wasStartBeforeMergedElement:o,wasEndBeforeMergedElement:s,wasInRightElement:a})}}}getContext(e,t,r){return{aIsStrong:r,aWasUndone:this._wasUndone(e),bWasUndone:this._wasUndone(t),abRelation:this._useRelations?this._getRelation(e,t):null,baRelation:this._useRelations?this._getRelation(t,e):null,forceWeakRemove:this._forceWeakRemove}}_wasUndone(e){const t=this.originalOperations.get(e);return t.wasUndone||this._history.isUndoneOperation(t)}_getRelation(e,t){const r=this.originalOperations.get(t),i=this._history.getUndoneOperation(r);if(!i)return null;const o=this.originalOperations.get(e),s=this._relations.get(o);return s&&s.get(i)||null}_setRelation(e,t,r){const i=this.originalOperations.get(e),o=this.originalOperations.get(t);let s=this._relations.get(i);s||(s=new Map,this._relations.set(i,s)),s.set(o,r)}}function xT(n,e){for(const t of n)t.baseVersion=e++}Ze(Vt,Vt,(n,e,t)=>{if(n.key===e.key&&n.range.start.hasSameParentAs(e.range.start)){const r=n.range.getDifference(e.range).map(o=>new Vt(o,n.key,n.oldValue,n.newValue,0)),i=n.range.getIntersection(e.range);return i&&t.aIsStrong&&r.push(new Vt(i,e.key,e.newValue,n.newValue,0)),r.length==0?[new tn(0)]:r}else return[n]});Ze(Vt,cn,(n,e)=>{if(n.range.start.hasSameParentAs(e.position)&&n.range.containsPosition(e.position)){const r=n.range._getTransformedByInsertion(e.position,e.howMany,!e.shouldReceiveAttributes).map(i=>new Vt(i,n.key,n.oldValue,n.newValue,n.baseVersion));if(e.shouldReceiveAttributes){const i=SD(e,n.key,n.oldValue);i&&r.unshift(i)}return r}return n.range=n.range._getTransformedByInsertion(e.position,e.howMany,!1)[0],[n]});function SD(n,e,t){const i=n.nodes.getNode(0).getAttribute(e);if(i==t)return null;const o=new V(n.position,n.position.getShiftedBy(n.howMany));return new Vt(o,e,i,t,0)}Ze(Vt,Mt,(n,e)=>{const t=[];n.range.start.hasSameParentAs(e.deletionPosition)&&(n.range.containsPosition(e.deletionPosition)||n.range.start.isEqual(e.deletionPosition))&&t.push(V._createFromPositionAndShift(e.graveyardPosition,1));const r=n.range._getTransformedByMergeOperation(e);return r.isCollapsed||t.push(r),t.map(i=>new Vt(i,n.key,n.oldValue,n.newValue,n.baseVersion))});Ze(Vt,et,(n,e)=>ofe(n.range,e).map(r=>new Vt(r,n.key,n.oldValue,n.newValue,n.baseVersion)));function ofe(n,e){const t=V._createFromPositionAndShift(e.sourcePosition,e.howMany);let r=null,i=[];t.containsRange(n,!0)?r=n:n.start.hasSameParentAs(t.start)?(i=n.getDifference(t),r=n.getIntersection(t)):i=[n];const o=[];for(let s of i){s=s._getTransformedByDeletion(e.sourcePosition,e.howMany);const a=e.getMovedRangeStart(),l=s.start.hasSameParentAs(a),c=s._getTransformedByInsertion(a,e.howMany,l);o.push(...c)}return r&&o.push(r._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany,!1)[0]),o}Ze(Vt,gt,(n,e)=>{if(n.range.end.isEqual(e.insertionPosition))return e.graveyardPosition||n.range.end.offset++,[n];if(n.range.start.hasSameParentAs(e.splitPosition)&&n.range.containsPosition(e.splitPosition)){const t=n.clone();return t.range=new V(e.moveTargetPosition.clone(),n.range.end._getCombined(e.splitPosition,e.moveTargetPosition)),n.range.end=e.splitPosition.clone(),n.range.end.stickiness="toPrevious",[n,t]}return n.range=n.range._getTransformedBySplitOperation(e),[n]});Ze(cn,Vt,(n,e)=>{const t=[n];if(n.shouldReceiveAttributes&&n.position.hasSameParentAs(e.range.start)&&e.range.containsPosition(n.position)){const r=SD(n,e.key,e.newValue);r&&t.push(r)}return t});Ze(cn,cn,(n,e,t)=>n.position.isEqual(e.position)&&t.aIsStrong?[n]:(n.position=n.position._getTransformedByInsertOperation(e),[n]));Ze(cn,et,(n,e)=>(n.position=n.position._getTransformedByMoveOperation(e),[n]));Ze(cn,gt,(n,e)=>(n.position=n.position._getTransformedBySplitOperation(e),[n]));Ze(cn,Mt,(n,e)=>(n.position=n.position._getTransformedByMergeOperation(e),[n]));Ze(Qn,cn,(n,e)=>(n.oldRange&&(n.oldRange=n.oldRange._getTransformedByInsertOperation(e)[0]),n.newRange&&(n.newRange=n.newRange._getTransformedByInsertOperation(e)[0]),[n]));Ze(Qn,Qn,(n,e,t)=>{if(n.name==e.name)if(t.aIsStrong)n.oldRange=e.newRange?e.newRange.clone():null;else return[new tn(0)];return[n]});Ze(Qn,Mt,(n,e)=>(n.oldRange&&(n.oldRange=n.oldRange._getTransformedByMergeOperation(e)),n.newRange&&(n.newRange=n.newRange._getTransformedByMergeOperation(e)),[n]));Ze(Qn,et,(n,e,t)=>{if(n.oldRange&&(n.oldRange=V._createFromRanges(n.oldRange._getTransformedByMoveOperation(e))),n.newRange){if(t.abRelation){const r=V._createFromRanges(n.newRange._getTransformedByMoveOperation(e));if(t.abRelation.side=="left"&&e.targetPosition.isEqual(n.newRange.start))return n.newRange.end=r.end,n.newRange.start.path=t.abRelation.path,[n];if(t.abRelation.side=="right"&&e.targetPosition.isEqual(n.newRange.end))return n.newRange.start=r.start,n.newRange.end.path=t.abRelation.path,[n]}n.newRange=V._createFromRanges(n.newRange._getTransformedByMoveOperation(e))}return[n]});Ze(Qn,gt,(n,e,t)=>{if(n.oldRange&&(n.oldRange=n.oldRange._getTransformedBySplitOperation(e)),n.newRange){if(t.abRelation){const r=n.newRange._getTransformedBySplitOperation(e);return n.newRange.start.isEqual(e.splitPosition)&&t.abRelation.wasStartBeforeMergedElement?n.newRange.start=J._createAt(e.insertionPosition):n.newRange.start.isEqual(e.splitPosition)&&!t.abRelation.wasInLeftElement&&(n.newRange.start=J._createAt(e.moveTargetPosition)),n.newRange.end.isEqual(e.splitPosition)&&t.abRelation.wasInRightElement?n.newRange.end=J._createAt(e.moveTargetPosition):n.newRange.end.isEqual(e.splitPosition)&&t.abRelation.wasEndBeforeMergedElement?n.newRange.end=J._createAt(e.insertionPosition):n.newRange.end=r.end,[n]}n.newRange=n.newRange._getTransformedBySplitOperation(e)}return[n]});Ze(Mt,cn,(n,e)=>(n.sourcePosition.hasSameParentAs(e.position)&&(n.howMany+=e.howMany),n.sourcePosition=n.sourcePosition._getTransformedByInsertOperation(e),n.targetPosition=n.targetPosition._getTransformedByInsertOperation(e),[n]));Ze(Mt,Mt,(n,e,t)=>{if(n.sourcePosition.isEqual(e.sourcePosition)&&n.targetPosition.isEqual(e.targetPosition))if(t.bWasUndone){const r=e.graveyardPosition.path.slice();return r.push(0),n.sourcePosition=new J(e.graveyardPosition.root,r),n.howMany=0,[n]}else return[new tn(0)];if(n.sourcePosition.isEqual(e.sourcePosition)&&!n.targetPosition.isEqual(e.targetPosition)&&!t.bWasUndone&&t.abRelation!="splitAtSource"){const r=n.targetPosition.root.rootName=="$graveyard",i=e.targetPosition.root.rootName=="$graveyard";if(i&&!r||!(r&&!i)&&t.aIsStrong){const l=e.targetPosition._getTransformedByMergeOperation(e),c=n.targetPosition._getTransformedByMergeOperation(e);return[new et(l,n.howMany,c,0)]}else return[new tn(0)]}return n.sourcePosition.hasSameParentAs(e.targetPosition)&&(n.howMany+=e.howMany),n.sourcePosition=n.sourcePosition._getTransformedByMergeOperation(e),n.targetPosition=n.targetPosition._getTransformedByMergeOperation(e),(!n.graveyardPosition.isEqual(e.graveyardPosition)||!t.aIsStrong)&&(n.graveyardPosition=n.graveyardPosition._getTransformedByMergeOperation(e)),[n]});Ze(Mt,et,(n,e,t)=>{const r=V._createFromPositionAndShift(e.sourcePosition,e.howMany);return e.type=="remove"&&!t.bWasUndone&&!t.forceWeakRemove&&n.deletionPosition.hasSameParentAs(e.sourcePosition)&&r.containsPosition(n.sourcePosition)?[new tn(0)]:(e.sourcePosition.getShiftedBy(e.howMany).isEqual(n.sourcePosition)?n.sourcePosition.stickiness="toNone":e.targetPosition.isEqual(n.sourcePosition)&&t.abRelation=="mergeSourceAffected"?n.sourcePosition.stickiness="toNext":e.sourcePosition.isEqual(n.targetPosition)?(n.targetPosition.stickiness="toNone",n.howMany-=e.howMany):e.targetPosition.isEqual(n.targetPosition)&&t.abRelation=="mergeTargetWasBefore"?(n.targetPosition.stickiness="toPrevious",n.howMany+=e.howMany):(n.sourcePosition.hasSameParentAs(e.targetPosition)&&(n.howMany+=e.howMany),n.sourcePosition.hasSameParentAs(e.sourcePosition)&&(n.howMany-=e.howMany)),n.sourcePosition=n.sourcePosition._getTransformedByMoveOperation(e),n.targetPosition=n.targetPosition._getTransformedByMoveOperation(e),n.sourcePosition.stickiness="toPrevious",n.targetPosition.stickiness="toNext",n.graveyardPosition.isEqual(e.targetPosition)||(n.graveyardPosition=n.graveyardPosition._getTransformedByMoveOperation(e)),[n])});Ze(Mt,gt,(n,e,t)=>{if(e.graveyardPosition&&(n.graveyardPosition=n.graveyardPosition._getTransformedByDeletion(e.graveyardPosition,1),n.deletionPosition.isEqual(e.graveyardPosition)&&(n.howMany=e.howMany)),n.targetPosition.isEqual(e.splitPosition)){const r=e.howMany!=0,i=e.graveyardPosition&&n.deletionPosition.isEqual(e.graveyardPosition);if(r||i||t.abRelation=="mergeTargetNotMoved")return n.sourcePosition=n.sourcePosition._getTransformedBySplitOperation(e),[n]}if(n.sourcePosition.isEqual(e.splitPosition)){if(t.abRelation=="mergeSourceNotMoved")return n.howMany=0,n.targetPosition=n.targetPosition._getTransformedBySplitOperation(e),[n];if(t.abRelation=="mergeSameElement"||n.sourcePosition.offset>0)return n.sourcePosition=e.moveTargetPosition.clone(),n.targetPosition=n.targetPosition._getTransformedBySplitOperation(e),[n]}return n.sourcePosition.hasSameParentAs(e.splitPosition)&&(n.howMany=e.splitPosition.offset),n.sourcePosition=n.sourcePosition._getTransformedBySplitOperation(e),n.targetPosition=n.targetPosition._getTransformedBySplitOperation(e),[n]});Ze(et,cn,(n,e)=>{const r=V._createFromPositionAndShift(n.sourcePosition,n.howMany)._getTransformedByInsertOperation(e,!1)[0];return n.sourcePosition=r.start,n.howMany=r.end.offset-r.start.offset,n.targetPosition.isEqual(e.position)||(n.targetPosition=n.targetPosition._getTransformedByInsertOperation(e)),[n]});Ze(et,et,(n,e,t)=>{const r=V._createFromPositionAndShift(n.sourcePosition,n.howMany),i=V._createFromPositionAndShift(e.sourcePosition,e.howMany);let o=t.aIsStrong,s=!t.aIsStrong;t.abRelation=="insertBefore"||t.baRelation=="insertAfter"?s=!0:(t.abRelation=="insertAfter"||t.baRelation=="insertBefore")&&(s=!1);let a;if(n.targetPosition.isEqual(e.targetPosition)&&s?a=n.targetPosition._getTransformedByDeletion(e.sourcePosition,e.howMany):a=n.targetPosition._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),AT(n,e)&&AT(e,n))return[e.getReversed()];if(r.containsPosition(e.targetPosition)&&r.containsRange(i,!0))return r.start=r.start._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),r.end=r.end._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),va([r],a);if(i.containsPosition(n.targetPosition)&&i.containsRange(r,!0))return r.start=r.start._getCombined(e.sourcePosition,e.getMovedRangeStart()),r.end=r.end._getCombined(e.sourcePosition,e.getMovedRangeStart()),va([r],a);const u=Tn(n.sourcePosition.getParentPath(),e.sourcePosition.getParentPath());if(u=="prefix"||u=="extension")return r.start=r.start._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),r.end=r.end._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),va([r],a);n.type=="remove"&&e.type!="remove"&&!t.aWasUndone&&!t.forceWeakRemove?o=!0:n.type!="remove"&&e.type=="remove"&&!t.bWasUndone&&!t.forceWeakRemove&&(o=!1);const d=[],f=r.getDifference(i);for(const m of f){m.start=m.start._getTransformedByDeletion(e.sourcePosition,e.howMany),m.end=m.end._getTransformedByDeletion(e.sourcePosition,e.howMany);const g=Tn(m.start.getParentPath(),e.getMovedRangeStart().getParentPath())=="same",p=m._getTransformedByInsertion(e.getMovedRangeStart(),e.howMany,g);d.push(...p)}const h=r.getIntersection(i);return h!==null&&o&&(h.start=h.start._getCombined(e.sourcePosition,e.getMovedRangeStart()),h.end=h.end._getCombined(e.sourcePosition,e.getMovedRangeStart()),d.length===0?d.push(h):d.length==1?i.start.isBefore(r.start)||i.start.isEqual(r.start)?d.unshift(h):d.push(h):d.splice(1,0,h)),d.length===0?[new tn(n.baseVersion)]:va(d,a)});Ze(et,gt,(n,e,t)=>{let r=n.targetPosition.clone();(!n.targetPosition.isEqual(e.insertionPosition)||!e.graveyardPosition||t.abRelation=="moveTargetAfter")&&(r=n.targetPosition._getTransformedBySplitOperation(e));const i=V._createFromPositionAndShift(n.sourcePosition,n.howMany);if(i.end.isEqual(e.insertionPosition))return e.graveyardPosition||n.howMany++,n.targetPosition=r,[n];if(i.start.hasSameParentAs(e.splitPosition)&&i.containsPosition(e.splitPosition)){let a=new V(e.splitPosition,i.end);a=a._getTransformedBySplitOperation(e);const l=[new V(i.start,e.splitPosition),a];return va(l,r)}n.targetPosition.isEqual(e.splitPosition)&&t.abRelation=="insertAtSource"&&(r=e.moveTargetPosition),n.targetPosition.isEqual(e.insertionPosition)&&t.abRelation=="insertBetween"&&(r=n.targetPosition);const s=[i._getTransformedBySplitOperation(e)];if(e.graveyardPosition){const a=i.start.isEqual(e.graveyardPosition)||i.containsPosition(e.graveyardPosition);n.howMany>1&&a&&!t.aWasUndone&&s.push(V._createFromPositionAndShift(e.insertionPosition,1))}return va(s,r)});Ze(et,Mt,(n,e,t)=>{const r=V._createFromPositionAndShift(n.sourcePosition,n.howMany);if(e.deletionPosition.hasSameParentAs(n.sourcePosition)&&r.containsPosition(e.sourcePosition)){if(n.type=="remove"&&!t.forceWeakRemove){if(!t.aWasUndone){const s=[];let a=e.graveyardPosition.clone(),l=e.targetPosition._getTransformedByMergeOperation(e);n.howMany>1&&(s.push(new et(n.sourcePosition,n.howMany-1,n.targetPosition,0)),a=a._getTransformedByMove(n.sourcePosition,n.targetPosition,n.howMany-1),l=l._getTransformedByMove(n.sourcePosition,n.targetPosition,n.howMany-1));const c=e.deletionPosition._getCombined(n.sourcePosition,n.targetPosition),u=new et(a,1,c,0),d=u.getMovedRangeStart().path.slice();d.push(0);const f=new J(u.targetPosition.root,d);l=l._getTransformedByMove(a,c,1);const h=new et(l,e.howMany,f,0);return s.push(u),s.push(h),s}}else if(n.howMany==1)return t.bWasUndone?(n.sourcePosition=e.graveyardPosition.clone(),n.targetPosition=n.targetPosition._getTransformedByMergeOperation(e),[n]):[new tn(0)]}const o=V._createFromPositionAndShift(n.sourcePosition,n.howMany)._getTransformedByMergeOperation(e);return n.sourcePosition=o.start,n.howMany=o.end.offset-o.start.offset,n.targetPosition=n.targetPosition._getTransformedByMergeOperation(e),[n]});Ze(er,cn,(n,e)=>(n.position=n.position._getTransformedByInsertOperation(e),[n]));Ze(er,Mt,(n,e)=>n.position.isEqual(e.deletionPosition)?(n.position=e.graveyardPosition.clone(),n.position.stickiness="toNext",[n]):(n.position=n.position._getTransformedByMergeOperation(e),[n]));Ze(er,et,(n,e)=>(n.position=n.position._getTransformedByMoveOperation(e),[n]));Ze(er,er,(n,e,t)=>{if(n.position.isEqual(e.position))if(t.aIsStrong)n.oldName=e.newName;else return[new tn(0)];return[n]});Ze(er,gt,(n,e)=>{const t=n.position.path,r=e.splitPosition.getParentPath();if(Tn(t,r)=="same"&&!e.graveyardPosition){const i=new er(n.position.getShiftedBy(1),n.oldName,n.newName,0);return[n,i]}return n.position=n.position._getTransformedBySplitOperation(e),[n]});Ze(Ki,Ki,(n,e,t)=>{if(n.root===e.root&&n.key===e.key){if(!t.aIsStrong||n.newValue===e.newValue)return[new tn(0)];n.oldValue=e.newValue}return[n]});Ze(Si,Si,(n,e)=>n.rootName===e.rootName&&n.isAdd===e.isAdd?[new tn(0)]:[n]);Ze(gt,cn,(n,e)=>(n.splitPosition.hasSameParentAs(e.position)&&n.splitPosition.offset<e.position.offset&&(n.howMany+=e.howMany),n.splitPosition=n.splitPosition._getTransformedByInsertOperation(e),n.insertionPosition=n.insertionPosition._getTransformedByInsertOperation(e),[n]));Ze(gt,Mt,(n,e,t)=>{if(!n.graveyardPosition&&!t.bWasUndone&&n.splitPosition.hasSameParentAs(e.sourcePosition)){const r=e.graveyardPosition.path.slice();r.push(0);const i=new J(e.graveyardPosition.root,r),o=gt.getInsertionPosition(new J(e.graveyardPosition.root,r)),s=new gt(i,0,o,null,0);return n.splitPosition=n.splitPosition._getTransformedByMergeOperation(e),n.insertionPosition=gt.getInsertionPosition(n.splitPosition),n.graveyardPosition=s.insertionPosition.clone(),n.graveyardPosition.stickiness="toNext",[s,n]}return n.splitPosition.hasSameParentAs(e.deletionPosition)&&!n.splitPosition.isAfter(e.deletionPosition)&&n.howMany--,n.splitPosition.hasSameParentAs(e.targetPosition)&&(n.howMany+=e.howMany),n.splitPosition=n.splitPosition._getTransformedByMergeOperation(e),n.insertionPosition=gt.getInsertionPosition(n.splitPosition),n.graveyardPosition&&(n.graveyardPosition=n.graveyardPosition._getTransformedByMergeOperation(e)),[n]});Ze(gt,et,(n,e,t)=>{const r=V._createFromPositionAndShift(e.sourcePosition,e.howMany);if(n.graveyardPosition){const o=r.start.isEqual(n.graveyardPosition)||r.containsPosition(n.graveyardPosition);if(!t.bWasUndone&&o){const s=n.splitPosition._getTransformedByMoveOperation(e),a=n.graveyardPosition._getTransformedByMoveOperation(e),l=a.path.slice();l.push(0);const c=new J(a.root,l);return[new et(s,n.howMany,c,0)]}n.graveyardPosition=n.graveyardPosition._getTransformedByMoveOperation(e)}const i=n.splitPosition.isEqual(e.targetPosition);if(i&&(t.baRelation=="insertAtSource"||t.abRelation=="splitBefore"))return n.howMany+=e.howMany,n.splitPosition=n.splitPosition._getTransformedByDeletion(e.sourcePosition,e.howMany),n.insertionPosition=gt.getInsertionPosition(n.splitPosition),[n];if(i&&t.abRelation&&t.abRelation.howMany){const{howMany:o,offset:s}=t.abRelation;return n.howMany+=o,n.splitPosition=n.splitPosition.getShiftedBy(s),[n]}if(n.splitPosition.hasSameParentAs(e.sourcePosition)&&r.containsPosition(n.splitPosition)){const o=e.howMany-(n.splitPosition.offset-e.sourcePosition.offset);return n.howMany-=o,n.splitPosition.hasSameParentAs(e.targetPosition)&&n.splitPosition.offset<e.targetPosition.offset&&(n.howMany+=e.howMany),n.splitPosition=e.sourcePosition.clone(),n.insertionPosition=gt.getInsertionPosition(n.splitPosition),[n]}return e.sourcePosition.isEqual(e.targetPosition)||(n.splitPosition.hasSameParentAs(e.sourcePosition)&&n.splitPosition.offset<=e.sourcePosition.offset&&(n.howMany-=e.howMany),n.splitPosition.hasSameParentAs(e.targetPosition)&&n.splitPosition.offset<e.targetPosition.offset&&(n.howMany+=e.howMany)),n.splitPosition.stickiness="toNone",n.splitPosition=n.splitPosition._getTransformedByMoveOperation(e),n.splitPosition.stickiness="toNext",n.graveyardPosition?n.insertionPosition=n.insertionPosition._getTransformedByMoveOperation(e):n.insertionPosition=gt.getInsertionPosition(n.splitPosition),[n]});Ze(gt,gt,(n,e,t)=>{if(n.splitPosition.isEqual(e.splitPosition)){if(!n.graveyardPosition&&!e.graveyardPosition)return[new tn(0)];if(n.graveyardPosition&&e.graveyardPosition&&n.graveyardPosition.isEqual(e.graveyardPosition))return[new tn(0)];if(t.abRelation=="splitBefore")return n.howMany=0,n.graveyardPosition=n.graveyardPosition._getTransformedBySplitOperation(e),[n]}if(n.graveyardPosition&&e.graveyardPosition&&n.graveyardPosition.isEqual(e.graveyardPosition)){const r=n.splitPosition.root.rootName=="$graveyard",i=e.splitPosition.root.rootName=="$graveyard";if(i&&!r||!(r&&!i)&&t.aIsStrong){const l=[];return e.howMany&&l.push(new et(e.moveTargetPosition,e.howMany,e.splitPosition,0)),n.howMany&&l.push(new et(n.splitPosition,n.howMany,n.moveTargetPosition,0)),l}else return[new tn(0)]}if(n.graveyardPosition&&(n.graveyardPosition=n.graveyardPosition._getTransformedBySplitOperation(e)),n.splitPosition.isEqual(e.insertionPosition)&&t.abRelation=="splitBefore")return n.howMany++,[n];if(e.splitPosition.isEqual(n.insertionPosition)&&t.baRelation=="splitBefore"){const r=e.insertionPosition.path.slice();r.push(0);const i=new J(e.insertionPosition.root,r),o=new et(n.insertionPosition,1,i,0);return[n,o]}return n.splitPosition.hasSameParentAs(e.splitPosition)&&n.splitPosition.offset<e.splitPosition.offset&&(n.howMany-=e.howMany),n.splitPosition=n.splitPosition._getTransformedBySplitOperation(e),n.insertionPosition=gt.getInsertionPosition(n.splitPosition),[n]});function AT(n,e){return n.targetPosition._getTransformedByDeletion(e.sourcePosition,e.howMany)===null}function va(n,e){const t=[];for(let r=0;r<n.length;r++){const i=n[r],o=new et(i.start,i.end.offset-i.start.offset,e,0);t.push(o);for(let s=r+1;s<n.length;s++)n[s]=n[s]._getTransformedByMove(o.sourcePosition,o.targetPosition,o.howMany)[0];e=e._getTransformedByMove(o.sourcePosition,o.targetPosition,o.howMany)}return t}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Kt extends pt(J){constructor(e,t,r="toNone"){if(super(e,t,r),!this.root.is("rootElement"))throw new M("model-liveposition-root-not-rootelement",e);sfe.call(this)}detach(){this.stopListening()}toPosition(){return new J(this.root,this.path.slice(),this.stickiness)}static fromPosition(e,t){return new this(e.root,e.path.slice(),t||e.stickiness)}}Kt.prototype.is=function(n){return n==="livePosition"||n==="model:livePosition"||n=="position"||n==="model:position"};function sfe(){this.listenTo(this.root.document.model,"applyOperation",(n,e)=>{const t=e[0];t.isDocumentOperation&&afe.call(this,t)},{priority:"low"})}function afe(n){const e=this.getTransformedByOperation(n);if(!this.isEqual(e)){const t=this.toPosition();this.path=e.path,this.root=e.root,this.fire("change",t)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ys{constructor(e={}){typeof e=="string"&&(e=e==="transparent"?{isUndoable:!1}:{},Ye("batch-constructor-deprecated-string-type"));const{isUndoable:t=!0,isLocal:r=!0,isUndo:i=!1,isTyping:o=!1}=e;this.operations=[],this.isUndoable=t,this.isLocal=r,this.isUndo=i,this.isTyping=o}get type(){return Ye("batch-type-deprecated"),"default"}get baseVersion(){for(const e of this.operations)if(e.baseVersion!==null)return e.baseVersion;return null}addOperation(e){return e.batch=this,this.operations.push(e),e}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class lfe{constructor(e){this._changesInElement=new Map,this._elementSnapshots=new Map,this._changedMarkers=new Map,this._changedRoots=new Map,this._changeCount=0,this._cachedChanges=null,this._cachedChangesWithGraveyard=null,this._refreshedItems=new Set,this._markerCollection=e}get isEmpty(){return this._changesInElement.size==0&&this._changedMarkers.size==0&&this._changedRoots.size==0}bufferOperation(e){const t=e;switch(t.type){case"insert":{if(this._isInInsertedElement(t.position.parent))return;this._markInsert(t.position.parent,t.position.offset,t.nodes.maxOffset);break}case"addAttribute":case"removeAttribute":case"changeAttribute":{for(const r of t.range.getItems({shallow:!0}))this._isInInsertedElement(r.parent)||this._markAttribute(r);break}case"remove":case"move":case"reinsert":{if(t.sourcePosition.isEqual(t.targetPosition)||t.sourcePosition.getShiftedBy(t.howMany).isEqual(t.targetPosition))return;const r=this._isInInsertedElement(t.sourcePosition.parent),i=this._isInInsertedElement(t.targetPosition.parent);r||this._markRemove(t.sourcePosition.parent,t.sourcePosition.offset,t.howMany),i||this._markInsert(t.targetPosition.parent,t.getMovedRangeStart().offset,t.howMany);break}case"rename":{if(this._isInInsertedElement(t.position.parent))return;this._markRemove(t.position.parent,t.position.offset,1),this._markInsert(t.position.parent,t.position.offset,1);const r=V._createFromPositionAndShift(t.position,1);for(const i of this._markerCollection.getMarkersIntersectingRange(r)){const o=i.getData();this.bufferMarkerChange(i.name,o,o)}break}case"split":{const r=t.splitPosition.parent;this._isInInsertedElement(r)||this._markRemove(r,t.splitPosition.offset,t.howMany),this._isInInsertedElement(t.insertionPosition.parent)||this._markInsert(t.insertionPosition.parent,t.insertionPosition.offset,1),t.graveyardPosition&&this._markRemove(t.graveyardPosition.parent,t.graveyardPosition.offset,1);break}case"merge":{const r=t.sourcePosition.parent;this._isInInsertedElement(r.parent)||this._markRemove(r.parent,r.startOffset,1);const i=t.graveyardPosition.parent;this._markInsert(i,t.graveyardPosition.offset,1);const o=t.targetPosition.parent;this._isInInsertedElement(o)||this._markInsert(o,t.targetPosition.offset,r.maxOffset);break}case"detachRoot":case"addRoot":{const r=t.affectedSelectable;if(!r._isLoaded||r.isAttached()==t.isAdd)return;this._bufferRootStateChange(t.rootName,t.isAdd);break}case"addRootAttribute":case"removeRootAttribute":case"changeRootAttribute":{if(!t.root._isLoaded)return;const r=t.root.rootName;this._bufferRootAttributeChange(r,t.key,t.oldValue,t.newValue);break}}this._cachedChanges=null}bufferMarkerChange(e,t,r){t.range&&t.range.root.is("rootElement")&&!t.range.root._isLoaded&&(t.range=null),r.range&&r.range.root.is("rootElement")&&!r.range.root._isLoaded&&(r.range=null);let i=this._changedMarkers.get(e);i?i.newMarkerData=r:(i={newMarkerData:r,oldMarkerData:t},this._changedMarkers.set(e,i)),i.oldMarkerData.range==null&&r.range==null&&this._changedMarkers.delete(e)}getMarkersToRemove(){const e=[];for(const[t,r]of this._changedMarkers)r.oldMarkerData.range!=null&&e.push({name:t,range:r.oldMarkerData.range});return e}getMarkersToAdd(){const e=[];for(const[t,r]of this._changedMarkers)r.newMarkerData.range!=null&&e.push({name:t,range:r.newMarkerData.range});return e}getChangedMarkers(){return Array.from(this._changedMarkers).map(([e,t])=>({name:e,data:{oldRange:t.oldMarkerData.range,newRange:t.newMarkerData.range}}))}hasDataChanges(){if(this.getChanges().length||this._changedRoots.size>0)return!0;for(const{newMarkerData:e,oldMarkerData:t}of this._changedMarkers.values()){if(e.affectsData!==t.affectsData)return!0;if(e.affectsData){const r=e.range&&!t.range,i=!e.range&&t.range,o=e.range&&t.range&&!e.range.isEqual(t.range);if(r||i||o)return!0}}return!1}getChanges(e={}){if(this._cachedChanges)return e.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice();let t=[];for(const r of this._changesInElement.keys()){const i=this._changesInElement.get(r).sort((u,d)=>u.offset===d.offset?u.type!=d.type?u.type=="remove"?-1:1:0:u.offset<d.offset?-1:1),o=this._elementSnapshots.get(r),s=TT(r.getChildren()),a=cfe(o.length,i);let l=0,c=0;for(const u of a)if(u==="i")t.push(this._getInsertDiff(r,l,s[l])),l++;else if(u==="r")t.push(this._getRemoveDiff(r,l,o[c])),c++;else if(u==="a"){const d=s[l].attributes,f=o[c].attributes;let h;if(s[l].name=="$text")h=new V(J._createAt(r,l),J._createAt(r,l+1));else{const m=r.offsetToIndex(l);h=new V(J._createAt(r,l),J._createAt(r.getChild(m),0))}t.push(...this._getAttributesDiff(h,f,d)),l++,c++}else l++,c++}t.sort((r,i)=>r.position.root!=i.position.root?r.position.root.rootName<i.position.root.rootName?-1:1:r.position.isEqual(i.position)?r.changeCount-i.changeCount:r.position.isBefore(i.position)?-1:1);for(let r=1,i=0;r<t.length;r++){const o=t[i],s=t[r],a=o.type=="remove"&&s.type=="remove"&&o.name=="$text"&&s.name=="$text"&&o.position.isEqual(s.position),l=o.type=="insert"&&s.type=="insert"&&o.name=="$text"&&s.name=="$text"&&o.position.parent==s.position.parent&&o.position.offset+o.length==s.position.offset,c=o.type=="attribute"&&s.type=="attribute"&&o.position.parent==s.position.parent&&o.range.isFlat&&s.range.isFlat&&o.position.offset+o.length==s.position.offset&&o.attributeKey==s.attributeKey&&o.attributeOldValue==s.attributeOldValue&&o.attributeNewValue==s.attributeNewValue;a||l||c?(o.length++,c&&(o.range.end=o.range.end.getShiftedBy(1)),t[r]=null):i=r}t=t.filter(r=>r);for(const r of t)delete r.changeCount,r.type=="attribute"&&(delete r.position,delete r.length);return this._changeCount=0,this._cachedChangesWithGraveyard=t,this._cachedChanges=t.filter(ufe),e.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice()}getChangedRoots(){return Array.from(this._changedRoots.values()).map(e=>{const t={...e};return t.state!==void 0&&delete t.attributes,t})}getRefreshedItems(){return new Set(this._refreshedItems)}reset(){this._changesInElement.clear(),this._elementSnapshots.clear(),this._changedMarkers.clear(),this._changedRoots.clear(),this._refreshedItems=new Set,this._cachedChanges=null}_bufferRootStateChange(e,t){if(!this._changedRoots.has(e)){this._changedRoots.set(e,{name:e,state:t?"attached":"detached"});return}const r=this._changedRoots.get(e);r.state!==void 0?(delete r.state,r.attributes===void 0&&this._changedRoots.delete(e)):r.state=t?"attached":"detached"}_bufferRootAttributeChange(e,t,r,i){const o=this._changedRoots.get(e)||{name:e},s=o.attributes||{};if(s[t]){const a=s[t];i===a.oldValue?delete s[t]:a.newValue=i}else s[t]={oldValue:r,newValue:i};Object.entries(s).length===0?(delete o.attributes,o.state===void 0&&this._changedRoots.delete(e)):(o.attributes=s,this._changedRoots.set(e,o))}_refreshItem(e){if(this._isInInsertedElement(e.parent))return;this._markRemove(e.parent,e.startOffset,e.offsetSize),this._markInsert(e.parent,e.startOffset,e.offsetSize),this._refreshedItems.add(e);const t=V._createOn(e);for(const r of this._markerCollection.getMarkersIntersectingRange(t)){const i=r.getData();this.bufferMarkerChange(r.name,i,i)}this._cachedChanges=null}_bufferRootLoad(e){if(e.isAttached()){this._bufferRootStateChange(e.rootName,!0),this._markInsert(e,0,e.maxOffset);for(const t of e.getAttributeKeys())this._bufferRootAttributeChange(e.rootName,t,null,e.getAttribute(t));for(const t of this._markerCollection)if(t.getRange().root==e){const r=t.getData();this.bufferMarkerChange(t.name,{...r,range:null},r)}}}_markInsert(e,t,r){if(e.root.is("rootElement")&&!e.root._isLoaded)return;const i={type:"insert",offset:t,howMany:r,count:this._changeCount++};this._markChange(e,i)}_markRemove(e,t,r){if(e.root.is("rootElement")&&!e.root._isLoaded)return;const i={type:"remove",offset:t,howMany:r,count:this._changeCount++};this._markChange(e,i),this._removeAllNestedChanges(e,t,r)}_markAttribute(e){if(e.root.is("rootElement")&&!e.root._isLoaded)return;const t={type:"attribute",offset:e.startOffset,howMany:e.offsetSize,count:this._changeCount++};this._markChange(e.parent,t)}_markChange(e,t){this._makeSnapshot(e);const r=this._getChangesForElement(e);this._handleChange(t,r),r.push(t);for(let i=0;i<r.length;i++)r[i].howMany<1&&(r.splice(i,1),i--)}_getChangesForElement(e){let t;return this._changesInElement.has(e)?t=this._changesInElement.get(e):(t=[],this._changesInElement.set(e,t)),t}_makeSnapshot(e){this._elementSnapshots.has(e)||this._elementSnapshots.set(e,TT(e.getChildren()))}_handleChange(e,t){e.nodesToHandle=e.howMany;for(const r of t){const i=e.offset+e.howMany,o=r.offset+r.howMany;if(e.type=="insert"&&(r.type=="insert"&&(e.offset<=r.offset?r.offset+=e.howMany:e.offset<o&&(r.howMany+=e.nodesToHandle,e.nodesToHandle=0)),r.type=="remove"&&e.offset<r.offset&&(r.offset+=e.howMany),r.type=="attribute")){if(e.offset<=r.offset)r.offset+=e.howMany;else if(e.offset<o){const s=r.howMany;r.howMany=e.offset-r.offset,t.unshift({type:"attribute",offset:i,howMany:s-r.howMany,count:this._changeCount++})}}if(e.type=="remove"){if(r.type=="insert"){if(i<=r.offset)r.offset-=e.howMany;else if(i<=o)if(e.offset<r.offset){const s=i-r.offset;r.offset=e.offset,r.howMany-=s,e.nodesToHandle-=s}else r.howMany-=e.nodesToHandle,e.nodesToHandle=0;else if(e.offset<=r.offset)e.nodesToHandle-=r.howMany,r.howMany=0;else if(e.offset<o){const s=o-e.offset;r.howMany-=s,e.nodesToHandle-=s}}if(r.type=="remove"&&(i<=r.offset?r.offset-=e.howMany:e.offset<r.offset&&(e.nodesToHandle+=r.howMany,r.howMany=0)),r.type=="attribute"){if(i<=r.offset)r.offset-=e.howMany;else if(e.offset<r.offset){const s=i-r.offset;r.offset=e.offset,r.howMany-=s}else if(e.offset<o)if(i<=o){const s=r.howMany;r.howMany=e.offset-r.offset;const a=s-r.howMany-e.nodesToHandle;t.unshift({type:"attribute",offset:e.offset,howMany:a,count:this._changeCount++})}else r.howMany-=o-e.offset}}if(e.type=="attribute"){if(r.type=="insert")if(e.offset<r.offset&&i>r.offset){if(i>o){const s={type:"attribute",offset:o,howMany:i-o,count:this._changeCount++};this._handleChange(s,t),t.push(s)}e.nodesToHandle=r.offset-e.offset,e.howMany=e.nodesToHandle}else e.offset>=r.offset&&e.offset<o&&(i>o?(e.nodesToHandle=i-o,e.offset=o):e.nodesToHandle=0);if(r.type=="remove"&&e.offset<r.offset&&i>r.offset){const s={type:"attribute",offset:r.offset,howMany:i-r.offset,count:this._changeCount++};this._handleChange(s,t),t.push(s),e.nodesToHandle=r.offset-e.offset,e.howMany=e.nodesToHandle}r.type=="attribute"&&(e.offset>=r.offset&&i<=o?(e.nodesToHandle=0,e.howMany=0,e.offset=0):e.offset<=r.offset&&i>=o&&(r.howMany=0))}}e.howMany=e.nodesToHandle,delete e.nodesToHandle}_getInsertDiff(e,t,r){return{type:"insert",position:J._createAt(e,t),name:r.name,attributes:new Map(r.attributes),length:1,changeCount:this._changeCount++,_element:r.element}}_getRemoveDiff(e,t,r){return{type:"remove",position:J._createAt(e,t),name:r.name,attributes:new Map(r.attributes),length:1,changeCount:this._changeCount++,_element:r.element}}_getAttributesDiff(e,t,r){const i=[];r=new Map(r);for(const[o,s]of t){const a=r.has(o)?r.get(o):null;a!==s&&i.push({type:"attribute",position:e.start,range:e.clone(),length:1,attributeKey:o,attributeOldValue:s,attributeNewValue:a,changeCount:this._changeCount++}),r.delete(o)}for(const[o,s]of r)i.push({type:"attribute",position:e.start,range:e.clone(),length:1,attributeKey:o,attributeOldValue:null,attributeNewValue:s,changeCount:this._changeCount++});return i}_isInInsertedElement(e){const t=e.parent;if(!t)return!1;const r=this._changesInElement.get(t),i=e.startOffset;if(r){for(const o of r)if(o.type=="insert"&&i>=o.offset&&i<o.offset+o.howMany)return!0}return this._isInInsertedElement(t)}_removeAllNestedChanges(e,t,r){const i=new V(J._createAt(e,t),J._createAt(e,t+r));for(const o of i.getItems({shallow:!0}))o.is("element")&&(this._elementSnapshots.delete(o),this._changesInElement.delete(o),this._removeAllNestedChanges(o,0,o.maxOffset))}}function TT(n){const e=[];for(const t of n)if(t.is("$text"))for(let r=0;r<t.data.length;r++)e.push({name:"$text",attributes:new Map(t.getAttributes())});else e.push({name:t.name,attributes:new Map(t.getAttributes()),element:t});return e}function cfe(n,e){const t=[];let r=0,i=0;for(const o of e){if(o.offset>r){for(let s=0;s<o.offset-r;s++)t.push("e");i+=o.offset-r}if(o.type=="insert"){for(let s=0;s<o.howMany;s++)t.push("i");r=o.offset+o.howMany}else if(o.type=="remove"){for(let s=0;s<o.howMany;s++)t.push("r");r=o.offset,i+=o.howMany}else t.push(..."a".repeat(o.howMany).split("")),r=o.offset+o.howMany,i+=o.howMany}if(i<n)for(let o=0;o<n-i-r;o++)t.push("e");return t}function ufe(n){const e="position"in n&&n.position.root.rootName=="$graveyard",t="range"in n&&n.range.root.rootName=="$graveyard";return!e&&!t}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class dfe{constructor(){this._operations=[],this._undoPairs=new Map,this._undoneOperations=new Set,this._baseVersionToOperationIndex=new Map,this._version=0,this._gaps=new Map}get version(){return this._version}set version(e){this._operations.length&&e>this._version+1&&this._gaps.set(this._version,e),this._version=e}get lastOperation(){return this._operations[this._operations.length-1]}addOperation(e){if(e.baseVersion!==this.version)throw new M("model-document-history-addoperation-incorrect-version",this,{operation:e,historyVersion:this.version});this._operations.push(e),this._version++,this._baseVersionToOperationIndex.set(e.baseVersion,this._operations.length-1)}getOperations(e,t=this.version){if(!this._operations.length)return[];const r=this._operations[0];e===void 0&&(e=r.baseVersion);let i=t-1;for(const[a,l]of this._gaps)e>a&&e<l&&(e=l),i>a&&i<l&&(i=a-1);if(i<r.baseVersion||e>this.lastOperation.baseVersion)return[];let o=this._baseVersionToOperationIndex.get(e);o===void 0&&(o=0);let s=this._baseVersionToOperationIndex.get(i);return s===void 0&&(s=this._operations.length-1),this._operations.slice(o,s+1)}getOperation(e){const t=this._baseVersionToOperationIndex.get(e);if(t!==void 0)return this._operations[t]}setOperationAsUndone(e,t){this._undoPairs.set(t,e),this._undoneOperations.add(e)}isUndoingOperation(e){return this._undoPairs.has(e)}isUndoneOperation(e){return this._undoneOperations.has(e)}getUndoneOperation(e){return this._undoPairs.get(e)}reset(){this._version=0,this._undoPairs=new Map,this._operations=[],this._undoneOperations=new Set,this._gaps=new Map,this._baseVersionToOperationIndex=new Map}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class rm extends Tt{constructor(e,t,r="main"){super(t),this._isAttached=!0,this._isLoaded=!0,this._document=e,this.rootName=r}get document(){return this._document}isAttached(){return this._isAttached}toJSON(){return this.rootName}}rm.prototype.is=function(n,e){return e?e===this.name&&(n==="rootElement"||n==="model:rootElement"||n==="element"||n==="model:element"):n==="rootElement"||n==="model:rootElement"||n==="element"||n==="model:element"||n==="node"||n==="model:node"};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const ET="$graveyard";class ffe extends pt(){constructor(e){super(),this.model=e,this.history=new dfe,this.selection=new oi(this),this.roots=new Vn({idProperty:"rootName"}),this.differ=new lfe(e.markers),this.isReadOnly=!1,this._postFixers=new Set,this._hasSelectionChangedFromTheLastChangeBlock=!1,this.createRoot("$root",ET),this.listenTo(e,"applyOperation",(t,r)=>{const i=r[0];i.isDocumentOperation&&this.differ.bufferOperation(i)},{priority:"high"}),this.listenTo(e,"applyOperation",(t,r)=>{const i=r[0];i.isDocumentOperation&&this.history.addOperation(i)},{priority:"low"}),this.listenTo(this.selection,"change",()=>{this._hasSelectionChangedFromTheLastChangeBlock=!0}),this.listenTo(e.markers,"update",(t,r,i,o,s)=>{const a={...r.getData(),range:o};this.differ.bufferMarkerChange(r.name,s,a),i===null&&r.on("change",(l,c)=>{const u=r.getData();this.differ.bufferMarkerChange(r.name,{...u,range:c},u)})}),this.registerPostFixer(t=>{let r=!1;for(const i of this.roots)!i.isAttached()&&!i.isEmpty&&(t.remove(t.createRangeIn(i)),r=!0);for(const i of this.model.markers)i.getRange().root.isAttached()||(t.removeMarker(i),r=!0);return r})}get version(){return this.history.version}set version(e){this.history.version=e}get graveyard(){return this.getRoot(ET)}createRoot(e="$root",t="main"){if(this.roots.get(t))throw new M("model-document-createroot-name-exists",this,{name:t});const r=new rm(this,e,t);return this.roots.add(r),r}destroy(){this.selection.destroy(),this.stopListening()}getRoot(e="main"){return this.roots.get(e)}getRootNames(e=!1){return this.getRoots(e).map(t=>t.rootName)}getRoots(e=!1){return this.roots.filter(t=>t!=this.graveyard&&(e||t.isAttached())&&t._isLoaded)}registerPostFixer(e){this._postFixers.add(e)}toJSON(){const e=tI(this);return e.selection="[engine.model.DocumentSelection]",e.model="[engine.model.Model]",e}_handleChangeBlock(e){this._hasDocumentChangedFromTheLastChangeBlock()&&(this._callPostFixers(e),this.selection.refresh(),this.differ.hasDataChanges()?this.fire("change:data",e.batch):this.fire("change",e.batch),this.selection.refresh(),this.differ.reset()),this._hasSelectionChangedFromTheLastChangeBlock=!1}_hasDocumentChangedFromTheLastChangeBlock(){return!this.differ.isEmpty||this._hasSelectionChangedFromTheLastChangeBlock}_getDefaultRoot(){const e=this.getRoots();return e.length?e[0]:this.graveyard}_getDefaultRange(){const e=this._getDefaultRoot(),t=this.model,r=t.schema,i=t.createPositionFromPath(e,[0]);return r.getNearestSelectionRange(i)||t.createRange(i)}_validateSelectionRange(e){return kT(e.start)&&kT(e.end)}_callPostFixers(e){let t=!1;do for(const r of this._postFixers)if(this.selection.refresh(),t=r(e),t)break;while(t)}}function kT(n){const e=n.textNode;if(e){const t=e.data,r=n.offset-e.startOffset;return!A0(t,r)&&!T0(t,r)}return!0}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class hfe extends pt(){constructor(){super(...arguments),this._markers=new Map}[Symbol.iterator](){return this._markers.values()}has(e){const t=e instanceof la?e.name:e;return this._markers.has(t)}get(e){return this._markers.get(e)||null}_set(e,t,r=!1,i=!1){const o=e instanceof la?e.name:e;if(o.includes(","))throw new M("markercollection-incorrect-marker-name",this);const s=this._markers.get(o);if(s){const c=s.getData(),u=s.getRange();let d=!1;return u.isEqual(t)||(s._attachLiveRange(Zn.fromRange(t)),d=!0),r!=s.managedUsingOperations&&(s._managedUsingOperations=r,d=!0),typeof i=="boolean"&&i!=s.affectsData&&(s._affectsData=i,d=!0),d&&this.fire(`update:${o}`,s,u,t,c),s}const a=Zn.fromRange(t),l=new la(o,a,r,i);return this._markers.set(o,l),this.fire(`update:${o}`,l,null,t,{...l.getData(),range:null}),l}_remove(e){const t=e instanceof la?e.name:e,r=this._markers.get(t);return r?(this._markers.delete(t),this.fire(`update:${t}`,r,r.getRange(),null,r.getData()),this._destroyMarker(r),!0):!1}_refresh(e){const t=e instanceof la?e.name:e,r=this._markers.get(t);if(!r)throw new M("markercollection-refresh-marker-not-exists",this);const i=r.getRange();this.fire(`update:${t}`,r,i,i,r.getData())}*getMarkersAtPosition(e){for(const t of this)t.getRange().containsPosition(e)&&(yield t)}*getMarkersIntersectingRange(e){for(const t of this)t.getRange().getIntersection(e)!==null&&(yield t)}destroy(){for(const e of this._markers.values())this._destroyMarker(e);this._markers=null,this.stopListening()}*getMarkersGroup(e){for(const t of this._markers.values())t.name.startsWith(e+":")&&(yield t)}_destroyMarker(e){e.stopListening(),e._detachLiveRange()}}class la extends pt(Vo){constructor(e,t,r,i){super(),this.name=e,this._liveRange=this._attachLiveRange(t),this._managedUsingOperations=r,this._affectsData=i}get managedUsingOperations(){if(!this._liveRange)throw new M("marker-destroyed",this);return this._managedUsingOperations}get affectsData(){if(!this._liveRange)throw new M("marker-destroyed",this);return this._affectsData}getData(){return{range:this.getRange(),affectsData:this.affectsData,managedUsingOperations:this.managedUsingOperations}}getStart(){if(!this._liveRange)throw new M("marker-destroyed",this);return this._liveRange.start.clone()}getEnd(){if(!this._liveRange)throw new M("marker-destroyed",this);return this._liveRange.end.clone()}getRange(){if(!this._liveRange)throw new M("marker-destroyed",this);return this._liveRange.toRange()}_attachLiveRange(e){return this._liveRange&&this._detachLiveRange(),e.delegate("change:range").to(this),e.delegate("change:content").to(this),this._liveRange=e,e}_detachLiveRange(){this._liveRange.stopDelegating("change:range",this),this._liveRange.stopDelegating("change:content",this),this._liveRange.detach(),this._liveRange=null}}la.prototype.is=function(n){return n==="marker"||n==="model:marker"};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class mfe extends vr{constructor(e,t){super(null),this.sourcePosition=e.clone(),this.howMany=t}get type(){return"detach"}get affectedSelectable(){return null}toJSON(){const e=super.toJSON();return e.sourcePosition=this.sourcePosition.toJSON(),e}_validate(){if(this.sourcePosition.root.document)throw new M("detach-operation-on-document-node",this)}_execute(){wD(V._createFromPositionAndShift(this.sourcePosition,this.howMany))}static get className(){return"DetachOperation"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class zi extends Vo{constructor(e){super(),this.markers=new Map,this._children=new kc,e&&this._insertChild(0,e)}[Symbol.iterator](){return this.getChildren()}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return this.childCount===0}get nextSibling(){return null}get previousSibling(){return null}get root(){return this}get parent(){return null}get document(){return null}isAttached(){return!1}getAncestors(){return[]}getChild(e){return this._children.getNode(e)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(e){return this._children.getNodeIndex(e)}getChildStartOffset(e){return this._children.getNodeStartOffset(e)}getPath(){return[]}getNodeByPath(e){let t=this;for(const r of e)t=t.getChild(t.offsetToIndex(r));return t}offsetToIndex(e){return this._children.offsetToIndex(e)}toJSON(){const e=[];for(const t of this._children)e.push(t.toJSON());return e}static fromJSON(e){const t=[];for(const r of e)r.name?t.push(Tt.fromJSON(r)):t.push(mt.fromJSON(r));return new zi(t)}_appendChild(e){this._insertChild(this.childCount,e)}_insertChild(e,t){const r=gfe(t);for(const i of r)i.parent!==null&&i._remove(),i.parent=this;this._children._insertNodes(e,r)}_removeChildren(e,t=1){const r=this._children._removeNodes(e,t);for(const i of r)i.parent=null;return r}}zi.prototype.is=function(n){return n==="documentFragment"||n==="model:documentFragment"};function gfe(n){return typeof n=="string"?[new mt(n)]:(pr(n)||(n=[n]),Array.from(n).map(e=>typeof e=="string"?new mt(e):e instanceof ei?new mt(e.data,e.getAttributes()):e))}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class pfe{constructor(e,t){this.model=e,this.batch=t}createText(e,t){return new mt(e,t)}createElement(e,t){return new Tt(e,t)}createDocumentFragment(){return new zi}cloneElement(e,t=!0){return e._clone(t)}insert(e,t,r=0){if(this._assertWriterUsedCorrectly(),e instanceof mt&&e.data=="")return;const i=J._createAt(t,r);if(e.parent)if(OT(e.root,i.root)){this.move(V._createOn(e),i);return}else{if(e.root.document)throw new M("model-writer-insert-forbidden-move",this);this.remove(e)}const o=i.root.document?i.root.document.version:null,s=new cn(i,e,o);if(e instanceof mt&&(s.shouldReceiveAttributes=!0),this.batch.addOperation(s),this.model.applyOperation(s),e instanceof zi)for(const[a,l]of e.markers){const c=J._createAt(l.root,0),d={range:new V(l.start._getCombined(c,i),l.end._getCombined(c,i)),usingOperation:!0,affectsData:!0};this.model.markers.has(a)?this.updateMarker(a,d):this.addMarker(a,d)}}insertText(e,t,r,i){t instanceof zi||t instanceof Tt||t instanceof J?this.insert(this.createText(e),t,r):this.insert(this.createText(e,t),r,i)}insertElement(e,t,r,i){t instanceof zi||t instanceof Tt||t instanceof J?this.insert(this.createElement(e),t,r):this.insert(this.createElement(e,t),r,i)}append(e,t){this.insert(e,t,"end")}appendText(e,t,r){t instanceof zi||t instanceof Tt?this.insert(this.createText(e),t,"end"):this.insert(this.createText(e,t),r,"end")}appendElement(e,t,r){t instanceof zi||t instanceof Tt?this.insert(this.createElement(e),t,"end"):this.insert(this.createElement(e,t),r,"end")}setAttribute(e,t,r){if(this._assertWriterUsedCorrectly(),r instanceof V){const i=r.getMinimalFlatRanges();for(const o of i)PT(this,e,t,o)}else IT(this,e,t,r)}setAttributes(e,t){for(const[r,i]of to(e))this.setAttribute(r,i,t)}removeAttribute(e,t){if(this._assertWriterUsedCorrectly(),t instanceof V){const r=t.getMinimalFlatRanges();for(const i of r)PT(this,e,null,i)}else IT(this,e,null,t)}clearAttributes(e){this._assertWriterUsedCorrectly();const t=r=>{for(const i of r.getAttributeKeys())this.removeAttribute(i,r)};if(!(e instanceof V))t(e);else for(const r of e.getItems())t(r)}move(e,t,r){if(this._assertWriterUsedCorrectly(),!(e instanceof V))throw new M("writer-move-invalid-range",this);if(!e.isFlat)throw new M("writer-move-range-not-flat",this);const i=J._createAt(t,r);if(i.isEqual(e.start))return;if(this._addOperationForAffectedMarkers("move",e),!OT(e.root,i.root))throw new M("writer-move-different-document",this);const o=e.root.document?e.root.document.version:null,s=new et(e.start,e.end.offset-e.start.offset,i,o);this.batch.addOperation(s),this.model.applyOperation(s)}remove(e){this._assertWriterUsedCorrectly();const r=(e instanceof V?e:V._createOn(e)).getMinimalFlatRanges().reverse();for(const i of r)this._addOperationForAffectedMarkers("move",i),vfe(i.start,i.end.offset-i.start.offset,this.batch,this.model)}merge(e){this._assertWriterUsedCorrectly();const t=e.nodeBefore,r=e.nodeAfter;if(this._addOperationForAffectedMarkers("merge",e),!(t instanceof Tt))throw new M("writer-merge-no-element-before",this);if(!(r instanceof Tt))throw new M("writer-merge-no-element-after",this);e.root.document?this._merge(e):this._mergeDetached(e)}createPositionFromPath(e,t,r){return this.model.createPositionFromPath(e,t,r)}createPositionAt(e,t){return this.model.createPositionAt(e,t)}createPositionAfter(e){return this.model.createPositionAfter(e)}createPositionBefore(e){return this.model.createPositionBefore(e)}createRange(e,t){return this.model.createRange(e,t)}createRangeIn(e){return this.model.createRangeIn(e)}createRangeOn(e){return this.model.createRangeOn(e)}createSelection(...e){return this.model.createSelection(...e)}_mergeDetached(e){const t=e.nodeBefore,r=e.nodeAfter;this.move(V._createIn(r),J._createAt(t,"end")),this.remove(r)}_merge(e){const t=J._createAt(e.nodeBefore,"end"),r=J._createAt(e.nodeAfter,0),i=e.root.document.graveyard,o=new J(i,[0]),s=e.root.document.version,a=new Mt(r,e.nodeAfter.maxOffset,t,o,s);this.batch.addOperation(a),this.model.applyOperation(a)}rename(e,t){if(this._assertWriterUsedCorrectly(),!(e instanceof Tt))throw new M("writer-rename-not-element-instance",this);const r=e.root.document?e.root.document.version:null,i=new er(J._createBefore(e),e.name,t,r);this.batch.addOperation(i),this.model.applyOperation(i)}split(e,t){this._assertWriterUsedCorrectly();let r=e.parent;if(!r.parent)throw new M("writer-split-element-no-parent",this);if(t||(t=r.parent),!e.parent.getAncestors({includeSelf:!0}).includes(t))throw new M("writer-split-invalid-limit-element",this);let i,o;do{const s=r.root.document?r.root.document.version:null,a=r.maxOffset-e.offset,l=gt.getInsertionPosition(e),c=new gt(e,a,l,null,s);this.batch.addOperation(c),this.model.applyOperation(c),!i&&!o&&(i=r,o=e.parent.nextSibling),e=this.createPositionAfter(e.parent),r=e.parent}while(r!==t);return{position:e,range:new V(J._createAt(i,"end"),J._createAt(o,0))}}wrap(e,t){if(this._assertWriterUsedCorrectly(),!e.isFlat)throw new M("writer-wrap-range-not-flat",this);const r=t instanceof Tt?t:new Tt(t);if(r.childCount>0)throw new M("writer-wrap-element-not-empty",this);if(r.parent!==null)throw new M("writer-wrap-element-attached",this);this.insert(r,e.start);const i=new V(e.start.getShiftedBy(1),e.end.getShiftedBy(1));this.move(i,J._createAt(r,0))}unwrap(e){if(this._assertWriterUsedCorrectly(),e.parent===null)throw new M("writer-unwrap-element-no-parent",this);this.move(V._createIn(e),this.createPositionAfter(e)),this.remove(e)}addMarker(e,t){if(this._assertWriterUsedCorrectly(),!t||typeof t.usingOperation!="boolean")throw new M("writer-addmarker-no-usingoperation",this);const r=t.usingOperation,i=t.range,o=t.affectsData===void 0?!1:t.affectsData;if(this.model.markers.has(e))throw new M("writer-addmarker-marker-exists",this);if(!i)throw new M("writer-addmarker-no-range",this);return r?(tc(this,e,null,i,o),this.model.markers.get(e)):this.model.markers._set(e,i,r,o)}updateMarker(e,t){this._assertWriterUsedCorrectly();const r=typeof e=="string"?e:e.name,i=this.model.markers.get(r);if(!i)throw new M("writer-updatemarker-marker-not-exists",this);if(!t){Ye("writer-updatemarker-reconvert-using-editingcontroller",{markerName:r}),this.model.markers._refresh(i);return}const o=typeof t.usingOperation=="boolean",s=typeof t.affectsData=="boolean",a=s?t.affectsData:i.affectsData;if(!o&&!t.range&&!s)throw new M("writer-updatemarker-wrong-options",this);const l=i.getRange(),c=t.range?t.range:l;if(o&&t.usingOperation!==i.managedUsingOperations){t.usingOperation?tc(this,r,null,c,a):(tc(this,r,l,null,a),this.model.markers._set(r,c,void 0,a));return}i.managedUsingOperations?tc(this,r,l,c,a):this.model.markers._set(r,c,void 0,a)}removeMarker(e){this._assertWriterUsedCorrectly();const t=typeof e=="string"?e:e.name;if(!this.model.markers.has(t))throw new M("writer-removemarker-no-marker",this);const r=this.model.markers.get(t);if(!r.managedUsingOperations){this.model.markers._remove(t);return}const i=r.getRange();tc(this,t,i,null,r.affectsData)}addRoot(e,t="$root"){this._assertWriterUsedCorrectly();const r=this.model.document.getRoot(e);if(r&&r.isAttached())throw new M("writer-addroot-root-exists",this);const i=this.model.document,o=new Si(e,t,!0,i,i.version);return this.batch.addOperation(o),this.model.applyOperation(o),this.model.document.getRoot(e)}detachRoot(e){this._assertWriterUsedCorrectly();const t=typeof e=="string"?this.model.document.getRoot(e):e;if(!t||!t.isAttached())throw new M("writer-detachroot-no-root",this);for(const o of this.model.markers)o.getRange().root===t&&this.removeMarker(o);for(const o of t.getAttributeKeys())this.removeAttribute(o,t);this.remove(this.createRangeIn(t));const r=this.model.document,i=new Si(t.rootName,t.name,!1,r,r.version);this.batch.addOperation(i),this.model.applyOperation(i)}setSelection(...e){this._assertWriterUsedCorrectly(),this.model.document.selection._setTo(...e)}setSelectionFocus(e,t){this._assertWriterUsedCorrectly(),this.model.document.selection._setFocus(e,t)}setSelectionAttribute(e,t){if(this._assertWriterUsedCorrectly(),typeof e=="string")this._setSelectionAttribute(e,t);else for(const[r,i]of to(e))this._setSelectionAttribute(r,i)}removeSelectionAttribute(e){if(this._assertWriterUsedCorrectly(),typeof e=="string")this._removeSelectionAttribute(e);else for(const t of e)this._removeSelectionAttribute(t)}overrideSelectionGravity(){return this.model.document.selection._overrideGravity()}restoreSelectionGravity(e){this.model.document.selection._restoreGravity(e)}_setSelectionAttribute(e,t){const r=this.model.document.selection;if(r.isCollapsed&&r.anchor.parent.isEmpty){const i=oi._getStoreAttributeKey(e);this.setAttribute(i,t,r.anchor.parent)}r._setAttribute(e,t)}_removeSelectionAttribute(e){const t=this.model.document.selection;if(t.isCollapsed&&t.anchor.parent.isEmpty){const r=oi._getStoreAttributeKey(e);this.removeAttribute(r,t.anchor.parent)}t._removeAttribute(e)}_assertWriterUsedCorrectly(){if(this.model._currentWriter!==this)throw new M("writer-incorrect-use",this)}_addOperationForAffectedMarkers(e,t){for(const r of this.model.markers){if(!r.managedUsingOperations)continue;const i=r.getRange();let o=!1;if(e==="move"){const s=t;o=s.containsPosition(i.start)||s.start.isEqual(i.start)||s.containsPosition(i.end)||s.end.isEqual(i.end)}else{const s=t,a=s.nodeBefore,l=s.nodeAfter,c=i.start.parent==a&&i.start.isAtEnd,u=i.end.parent==l&&i.end.offset==0,d=i.end.nodeAfter==l,f=i.start.nodeAfter==l;o=c||u||d||f}o&&this.updateMarker(r.name,{range:i})}}}function PT(n,e,t,r){const i=n.model,o=i.document;let s=r.start,a,l,c;for(const d of r.getWalker({shallow:!0}))c=d.item.getAttribute(e),a&&l!=c&&(l!=t&&u(),s=a),a=d.nextPosition,l=c;a instanceof J&&a!=s&&l!=t&&u();function u(){const d=new V(s,a),f=d.root.document?o.version:null,h=new Vt(d,e,l,t,f);n.batch.addOperation(h),i.applyOperation(h)}}function IT(n,e,t,r){const i=n.model,o=i.document,s=r.getAttribute(e);let a,l;if(s!=t){if(r.root===r){const u=r.document?o.version:null;l=new Ki(r,e,s,t,u)}else{a=new V(J._createBefore(r),n.createPositionAfter(r));const u=a.root.document?o.version:null;l=new Vt(a,e,s,t,u)}n.batch.addOperation(l),i.applyOperation(l)}}function tc(n,e,t,r,i){const o=n.model,s=o.document,a=new Qn(e,t,r,o.markers,!!i,s.version);n.batch.addOperation(a),o.applyOperation(a)}function vfe(n,e,t,r){let i;if(n.root.document){const o=r.document,s=new J(o.graveyard,[0]);i=new et(n,e,s,o.version)}else i=new mfe(n,e);t.addOperation(i),r.applyOperation(i)}function OT(n,e){return n===e||n instanceof rm&&e instanceof rm}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function bfe(n,e,t={}){if(e.isCollapsed)return;const r=e.getFirstRange();if(r.root.rootName=="$graveyard")return;const i=n.schema;n.change(o=>{if(!t.doNotResetEntireContent&&Efe(i,e)){Tfe(o,e);return}const s={};if(!t.doNotAutoparagraph){const c=e.getSelectedElement();c&&Object.assign(s,i.getAttributesWithProperty(c,"copyOnReplace",!0))}const[a,l]=yfe(r);a.isTouching(l)||o.remove(o.createRange(a,l)),t.leaveUnmerged||(_fe(o,a,l),i.removeDisallowedAttributes(a.parent.getChildren(),o)),ED(o,e,a),!t.doNotAutoparagraph&&xfe(i,a)&&TD(o,a,e,s),a.detach(),l.detach()})}function yfe(n){const e=n.root.document.model,t=n.start;let r=n.end;if(e.hasContent(n,{ignoreMarkers:!0})){const i=wfe(r);if(i&&r.isTouching(e.createPositionAt(i,0))){const o=e.createSelection(n);e.modifySelection(o,{direction:"backward"});const s=o.getLastPosition(),a=e.createRange(s,r);e.hasContent(a,{ignoreMarkers:!0})||(r=s)}}return[Kt.fromPosition(t,"toPrevious"),Kt.fromPosition(r,"toNext")]}function wfe(n){const e=n.parent,t=e.root.document.model.schema,r=e.getAncestors({parentFirst:!0,includeSelf:!0});for(const i of r){if(t.isLimit(i))return null;if(t.isBlock(i))return i}}function _fe(n,e,t){const r=n.model;if(!L0(n.model.schema,e,t))return;const[i,o]=Sfe(e,t);!i||!o||(!r.hasContent(i,{ignoreMarkers:!0})&&r.hasContent(o,{ignoreMarkers:!0})?AD(n,e,t,i.parent):xD(n,e,t,i.parent))}function xD(n,e,t,r){const i=e.parent,o=t.parent;if(!(i==r||o==r)){for(e=n.createPositionAfter(i),t=n.createPositionBefore(o),t.isEqual(e)||n.insert(o,e),n.merge(e);t.parent.isEmpty;){const s=t.parent;t=n.createPositionBefore(s),n.remove(s)}L0(n.model.schema,e,t)&&xD(n,e,t,r)}}function AD(n,e,t,r){const i=e.parent,o=t.parent;if(!(i==r||o==r)){for(e=n.createPositionAfter(i),t=n.createPositionBefore(o),t.isEqual(e)||n.insert(i,t);e.parent.isEmpty;){const s=e.parent;e=n.createPositionBefore(s),n.remove(s)}t=n.createPositionBefore(o),Cfe(n,t),L0(n.model.schema,e,t)&&AD(n,e,t,r)}}function Cfe(n,e){const t=e.nodeBefore,r=e.nodeAfter;t.name!=r.name&&n.rename(t,r.name),n.clearAttributes(t),n.setAttributes(Object.fromEntries(r.getAttributes()),t),n.merge(e)}function L0(n,e,t){const r=e.parent,i=t.parent;return r==i||n.isLimit(r)||n.isLimit(i)?!1:Afe(e,t,n)}function Sfe(n,e){const t=n.getAncestors(),r=e.getAncestors();let i=0;for(;t[i]&&t[i]==r[i];)i++;return[t[i],r[i]]}function xfe(n,e){const t=n.checkChild(e,"$text"),r=n.checkChild(e,"paragraph");return!t&&r}function Afe(n,e,t){const r=new V(n,e);for(const i of r.getWalker())if(t.isLimit(i.item))return!1;return!0}function TD(n,e,t,r={}){const i=n.createElement("paragraph");n.model.schema.setAllowedAttributes(i,r,n),n.insert(i,e),ED(n,t,n.createPositionAt(i,0))}function Tfe(n,e){const t=n.model.schema.getLimitElement(e);n.remove(n.createRangeIn(t)),TD(n,n.createPositionAt(t,0),e)}function Efe(n,e){const t=n.getLimitElement(e);if(!e.containsEntireContent(t))return!1;const r=e.getFirstRange();return r.start.parent==r.end.parent?!1:n.checkChild(t,"paragraph")}function ED(n,e,t){e instanceof oi?n.setSelection(t):e.setTo(t)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function kfe(n,e){return n.change(t=>{const r=t.createDocumentFragment(),i=e.getFirstRange();if(!i||i.isCollapsed)return r;const o=i.start.root,s=i.start.getCommonPath(i.end),a=o.getNodeByPath(s);let l;i.start.parent==i.end.parent?l=i:l=t.createRange(t.createPositionAt(a,i.start.path[s.length]),t.createPositionAt(a,i.end.path[s.length]+1));const c=l.end.offset-l.start.offset;for(const u of l.getItems({shallow:!0}))u.is("$textProxy")?t.appendText(u.data,u.getAttributes(),r):t.append(t.cloneElement(u,!0),r);if(l!=i){const u=i._getTransformedByMove(l.start,t.createPositionAt(r,0),c)[0],d=t.createRange(t.createPositionAt(r,0),u.start),f=t.createRange(u.end,t.createPositionAt(r,"end"));RT(f,t),RT(d,t)}return r})}function RT(n,e){const t=[];Array.from(n.getItems({direction:"backward"})).map(r=>e.createRangeOn(r)).filter(r=>(r.start.isAfter(n.start)||r.start.isEqual(n.start))&&(r.end.isBefore(n.end)||r.end.isEqual(n.end))).forEach(r=>{t.push(r.start.parent),e.remove(r)}),t.forEach(r=>{let i=r;for(;i.parent&&i.isEmpty;){const o=e.createRangeOn(i);i=i.parent,e.remove(o)}})}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Pfe(n,e,t){return n.change(r=>{const i=t||n.document.selection;i.isCollapsed||n.deleteContent(i,{doNotAutoparagraph:!0});const o=new Ife(n,r,i.anchor),s=[];let a;if(e.is("documentFragment")){if(e.markers.size){const u=[];for(const[d,f]of e.markers){const{start:h,end:m}=f,g=h.isEqual(m);u.push({position:h,name:d,isCollapsed:g},{position:m,name:d,isCollapsed:g})}u.sort(({position:d},{position:f})=>d.isBefore(f)?1:-1);for(const{position:d,name:f,isCollapsed:h}of u){let m=null,g=null;const p=d.parent===e&&d.isAtStart,b=d.parent===e&&d.isAtEnd;!p&&!b?(m=r.createElement("$marker"),r.insert(m,d)):h&&(g=p?"start":"end"),s.push({name:f,element:m,collapsed:g})}}a=e.getChildren()}else a=[e];o.handleNodes(a);let l=o.getSelectionRange();if(e.is("documentFragment")&&s.length){const u=l?Zn.fromRange(l):null,d={};for(let f=s.length-1;f>=0;f--){const{name:h,element:m,collapsed:g}=s[f],p=!d[h];if(p&&(d[h]=[]),m){const b=r.createPositionAt(m,"before");d[h].push(b),r.remove(m)}else{const b=o.getAffectedRange();if(!b){g&&d[h].push(o.position);continue}g?d[h].push(b[g]):d[h].push(p?b.start:b.end)}}for(const[f,[h,m]]of Object.entries(d))h&&m&&h.root===m.root&&h.root.document&&!r.model.markers.has(f)&&r.addMarker(f,{usingOperation:!0,affectsData:!0,range:new V(h,m)});u&&(l=u.toRange(),u.detach())}/* istanbul ignore else -- @preserve */l&&(i instanceof oi?r.setSelection(l):i.setTo(l));const c=o.getAffectedRange()||n.createRange(i.anchor);return o.destroy(),c})}class Ife{constructor(e,t,r){this._firstNode=null,this._lastNode=null,this._lastAutoParagraph=null,this._filterAttributesOf=[],this._affectedStart=null,this._affectedEnd=null,this._nodeToSelect=null,this.model=e,this.writer=t,this.position=r,this.canMergeWith=new Set([this.position.parent]),this.schema=e.schema,this._documentFragment=t.createDocumentFragment(),this._documentFragmentPosition=t.createPositionAt(this._documentFragment,0)}handleNodes(e){for(const t of Array.from(e))this._handleNode(t);this._insertPartialFragment(),this._lastAutoParagraph&&this._updateLastNodeFromAutoParagraph(this._lastAutoParagraph),this._mergeOnRight(),this.schema.removeDisallowedAttributes(this._filterAttributesOf,this.writer),this._filterAttributesOf=[]}_updateLastNodeFromAutoParagraph(e){const t=this.writer.createPositionAfter(this._lastNode),r=this.writer.createPositionAfter(e);if(r.isAfter(t)){this._lastNode=e;/* istanbul ignore if -- @preserve */if(this.position.parent!=e||!this.position.isAtEnd)throw new M("insertcontent-invalid-insertion-position",this);this.position=r,this._setAffectedBoundaries(this.position)}}getSelectionRange(){return this._nodeToSelect?V._createOn(this._nodeToSelect):this.model.schema.getNearestSelectionRange(this.position)}getAffectedRange(){return this._affectedStart?new V(this._affectedStart,this._affectedEnd):null}destroy(){this._affectedStart&&this._affectedStart.detach(),this._affectedEnd&&this._affectedEnd.detach()}_handleNode(e){if(this.schema.isObject(e)){this._handleObject(e);return}let t=this._checkAndAutoParagraphToAllowedPosition(e);if(!t&&(t=this._checkAndSplitToAllowedPosition(e),!t)){this._handleDisallowedNode(e);return}this._appendToFragment(e),this._firstNode||(this._firstNode=e),this._lastNode=e}_insertPartialFragment(){if(this._documentFragment.isEmpty)return;const e=Kt.fromPosition(this.position,"toNext");this._setAffectedBoundaries(this.position),this._documentFragment.getChild(0)==this._firstNode&&(this.writer.insert(this._firstNode,this.position),this._mergeOnLeft(),this.position=e.toPosition()),this._documentFragment.isEmpty||this.writer.insert(this._documentFragment,this.position),this._documentFragmentPosition=this.writer.createPositionAt(this._documentFragment,0),this.position=e.toPosition(),e.detach()}_handleObject(e){this._checkAndSplitToAllowedPosition(e)?this._appendToFragment(e):this._tryAutoparagraphing(e)}_handleDisallowedNode(e){e.is("element")?this.handleNodes(e.getChildren()):this._tryAutoparagraphing(e)}_appendToFragment(e){/* istanbul ignore if -- @preserve */if(!this.schema.checkChild(this.position,e))throw new M("insertcontent-wrong-position",this,{node:e,position:this.position});this.writer.insert(e,this._documentFragmentPosition),this._documentFragmentPosition=this._documentFragmentPosition.getShiftedBy(e.offsetSize),this.schema.isObject(e)&&!this.schema.checkChild(this.position,"$text")?this._nodeToSelect=e:this._nodeToSelect=null,this._filterAttributesOf.push(e)}_setAffectedBoundaries(e){this._affectedStart||(this._affectedStart=Kt.fromPosition(e,"toPrevious")),(!this._affectedEnd||this._affectedEnd.isBefore(e))&&(this._affectedEnd&&this._affectedEnd.detach(),this._affectedEnd=Kt.fromPosition(e,"toNext"))}_mergeOnLeft(){const e=this._firstNode;if(!(e instanceof Tt)||!this._canMergeLeft(e))return;const t=Kt._createBefore(e);t.stickiness="toNext";const r=Kt.fromPosition(this.position,"toNext");this._affectedStart.isEqual(t)&&(this._affectedStart.detach(),this._affectedStart=Kt._createAt(t.nodeBefore,"end","toPrevious")),this._firstNode===this._lastNode&&(this._firstNode=t.nodeBefore,this._lastNode=t.nodeBefore),this.writer.merge(t),t.isEqual(this._affectedEnd)&&this._firstNode===this._lastNode&&(this._affectedEnd.detach(),this._affectedEnd=Kt._createAt(t.nodeBefore,"end","toNext")),this.position=r.toPosition(),r.detach(),this._filterAttributesOf.push(this.position.parent),t.detach()}_mergeOnRight(){const e=this._lastNode;if(!(e instanceof Tt)||!this._canMergeRight(e))return;const t=Kt._createAfter(e);t.stickiness="toNext";/* istanbul ignore if -- @preserve */if(!this.position.isEqual(t))throw new M("insertcontent-invalid-insertion-position",this);this.position=J._createAt(t.nodeBefore,"end");const r=Kt.fromPosition(this.position,"toPrevious");this._affectedEnd.isEqual(t)&&(this._affectedEnd.detach(),this._affectedEnd=Kt._createAt(t.nodeBefore,"end","toNext")),this._firstNode===this._lastNode&&(this._firstNode=t.nodeBefore,this._lastNode=t.nodeBefore),this.writer.merge(t),t.getShiftedBy(-1).isEqual(this._affectedStart)&&this._firstNode===this._lastNode&&(this._affectedStart.detach(),this._affectedStart=Kt._createAt(t.nodeBefore,0,"toPrevious")),this.position=r.toPosition(),r.detach(),this._filterAttributesOf.push(this.position.parent),t.detach()}_canMergeLeft(e){const t=e.previousSibling;return t instanceof Tt&&this.canMergeWith.has(t)&&this.model.schema.checkMerge(t,e)}_canMergeRight(e){const t=e.nextSibling;return t instanceof Tt&&this.canMergeWith.has(t)&&this.model.schema.checkMerge(e,t)}_tryAutoparagraphing(e){const t=this.writer.createElement("paragraph");this._getAllowedIn(this.position.parent,t)&&this.schema.checkChild(t,e)&&(t._appendChild(e),this._handleNode(t))}_checkAndAutoParagraphToAllowedPosition(e){if(this.schema.checkChild(this.position.parent,e))return!0;if(!this.schema.checkChild(this.position.parent,"paragraph")||!this.schema.checkChild("paragraph",e))return!1;this._insertPartialFragment();const t=this.writer.createElement("paragraph");return this.writer.insert(t,this.position),this._setAffectedBoundaries(this.position),this._lastAutoParagraph=t,this.position=this.writer.createPositionAt(t,0),!0}_checkAndSplitToAllowedPosition(e){const t=this._getAllowedIn(this.position.parent,e);if(!t)return!1;for(t!=this.position.parent&&this._insertPartialFragment();t!=this.position.parent;)if(this.position.isAtStart){const r=this.position.parent;this.position=this.writer.createPositionBefore(r),r.isEmpty&&r.parent===t&&this.writer.remove(r)}else if(this.position.isAtEnd)this.position=this.writer.createPositionAfter(this.position.parent);else{const r=this.writer.createPositionAfter(this.position.parent);this._setAffectedBoundaries(this.position),this.writer.split(this.position),this.position=r,this.canMergeWith.add(this.position.nodeAfter)}return!0}_getAllowedIn(e,t){return this.schema.checkChild(e,t)?e:this.schema.isLimit(e)?null:this._getAllowedIn(e.parent,t)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Ofe(n,e,t,r={}){if(!n.schema.isObject(e))throw new M("insertobject-element-not-an-object",n,{object:e});const i=t||n.document.selection;let o=i;r.findOptimalPosition&&n.schema.isBlock(e)&&(o=n.createSelection(n.schema.findOptimalInsertionRange(i,r.findOptimalPosition)));const s=ln(i.getSelectedBlocks()),a={};return s&&Object.assign(a,n.schema.getAttributesWithProperty(s,"copyOnReplace",!0)),n.change(l=>{o.isCollapsed||n.deleteContent(o,{doNotAutoparagraph:!0});let c=e;const u=o.anchor.parent;!n.schema.checkChild(u,e)&&n.schema.checkChild(u,"paragraph")&&n.schema.checkChild("paragraph",e)&&(c=l.createElement("paragraph"),l.insert(e,c)),n.schema.setAllowedAttributes(c,a,l);const d=n.insertContent(c,o);return d.isCollapsed||r.setSelection&&Rfe(l,e,r.setSelection,a),d})}function Rfe(n,e,t,r){const i=n.model;if(t=="on"){n.setSelection(e,"on");return}if(t!="after")throw new M("insertobject-invalid-place-parameter-value",i);let o=e.nextSibling;if(i.schema.isInline(e)){n.setSelection(e,"after");return}!(o&&i.schema.checkChild(o,"$text"))&&i.schema.checkChild(e.parent,"paragraph")&&(o=n.createElement("paragraph"),i.schema.setAllowedAttributes(o,r,n),i.insertContent(o,n.createPositionAfter(e))),o&&n.setSelection(o,0)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Mfe=' ,.?!:;"-()';function Dfe(n,e,t={}){const r=n.schema,i=t.direction!="backward",o=t.unit?t.unit:"character",s=!!t.treatEmojiAsSingleUnit,a=e.focus,l=new Hi({boundaries:Ffe(a,i),singleCharacters:!0,direction:i?"forward":"backward"}),c={walker:l,schema:r,isForward:i,unit:o,treatEmojiAsSingleUnit:s};let u;for(;u=l.next();){if(u.done)return;const d=Bfe(c,u.value);if(d){e instanceof oi?n.change(f=>{f.setSelectionFocus(d)}):e.setFocus(d);return}}}function Bfe(n,e){const{isForward:t,walker:r,unit:i,schema:o,treatEmojiAsSingleUnit:s}=n,{type:a,item:l,nextPosition:c}=e;if(a=="text")return n.unit==="word"?Lfe(r,t):Nfe(r,i,s);if(a==(t?"elementStart":"elementEnd")){if(o.isSelectable(l))return J._createAt(l,t?"after":"before");if(o.checkChild(c,"$text"))return c}else{if(o.isLimit(l)){r.skip(()=>!0);return}if(o.checkChild(c,"$text"))return c}}function Nfe(n,e,t){const r=n.position.textNode;if(r){const i=r.data;let o=n.position.offset-r.startOffset;for(;A0(i,o)||e=="character"&&T0(i,o)||t&&EM(i,o);)n.next(),o=n.position.offset-r.startOffset}return n.position}function Lfe(n,e){let t=n.position.textNode;for(t||(t=e?n.position.nodeAfter:n.position.nodeBefore);t&&t.is("$text");){const r=n.position.offset-t.startOffset;if(Vfe(t,r,e))t=e?n.position.nodeAfter:n.position.nodeBefore;else{if($fe(t.data,r,e))break;n.next()}}return n.position}function Ffe(n,e){const t=n.root,r=J._createAt(t,e?"end":0);return e?new V(n,r):new V(r,n)}function $fe(n,e,t){const r=e+(t?0:-1);return Mfe.includes(n.charAt(r))}function Vfe(n,e,t){return e===(t?n.offsetSize:0)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let zfe=class extends ct(){constructor(){super(),this.markers=new hfe,this.document=new ffe(this),this.schema=new kde,this._pendingChanges=[],this._currentWriter=null,["deleteContent","modifySelection","getSelectedContent","applyOperation"].forEach(e=>this.decorate(e)),this.on("applyOperation",(e,t)=>{t[0]._validate()},{priority:"highest"}),this.schema.register("$root",{isLimit:!0}),this.schema.register("$container",{allowIn:["$root","$container"]}),this.schema.register("$block",{allowIn:["$root","$container"],isBlock:!0}),this.schema.register("$blockObject",{allowWhere:"$block",isBlock:!0,isObject:!0}),this.schema.register("$inlineObject",{allowWhere:"$text",allowAttributesOf:"$text",isInline:!0,isObject:!0}),this.schema.register("$text",{allowIn:"$block",isInline:!0,isContent:!0}),this.schema.register("$clipboardHolder",{allowContentOf:"$root",allowChildren:"$text",isLimit:!0}),this.schema.register("$documentFragment",{allowContentOf:"$root",allowChildren:"$text",isLimit:!0}),this.schema.register("$marker"),this.schema.addChildCheck((e,t)=>{if(t.name==="$marker")return!0}),yde(this),this.document.registerPostFixer(hD),this.on("insertContent",(e,[t,r])=>{e.return=Pfe(this,t,r)}),this.on("insertObject",(e,[t,r,i])=>{e.return=Ofe(this,t,r,i)}),this.on("canEditAt",e=>{const t=!this.document.isReadOnly;e.return=t,t||e.stop()})}change(e){try{return this._pendingChanges.length===0?(this._pendingChanges.push({batch:new Ys,callback:e}),this._runPendingChanges()[0]):e(this._currentWriter)}catch(t){/* istanbul ignore next -- @preserve */M.rethrowUnexpectedError(t,this)}}enqueueChange(e,t){try{e?typeof e=="function"?(t=e,e=new Ys):e instanceof Ys||(e=new Ys(e)):e=new Ys,this._pendingChanges.push({batch:e,callback:t}),this._pendingChanges.length==1&&this._runPendingChanges()}catch(r){/* istanbul ignore next -- @preserve */M.rethrowUnexpectedError(r,this)}}applyOperation(e){e._execute()}insertContent(e,t,r,...i){const o=Jp(t,r);return this.fire("insertContent",[e,o,r,...i])}insertObject(e,t,r,i,...o){const s=Jp(t,r);return this.fire("insertObject",[e,s,i,i,...o])}deleteContent(e,t){bfe(this,e,t)}modifySelection(e,t){Dfe(this,e,t)}getSelectedContent(e){return kfe(this,e)}hasContent(e,t={}){const r=e instanceof V?e:V._createIn(e);if(r.isCollapsed)return!1;const{ignoreWhitespaces:i=!1,ignoreMarkers:o=!1}=t;if(!o){for(const s of this.markers.getMarkersIntersectingRange(r))if(s.affectsData)return!0}for(const s of r.getItems())if(this.schema.isContent(s))if(s.is("$textProxy"))if(i){if(s.data.search(/\S/)!==-1)return!0}else return!0;else return!0;return!1}canEditAt(e){const t=Jp(e);return this.fire("canEditAt",[t])}createPositionFromPath(e,t,r){return new J(e,t,r)}createPositionAt(e,t){return J._createAt(e,t)}createPositionAfter(e){return J._createAfter(e)}createPositionBefore(e){return J._createBefore(e)}createRange(e,t){return new V(e,t)}createRangeIn(e){return V._createIn(e)}createRangeOn(e){return V._createOn(e)}createSelection(...e){return new cr(...e)}createBatch(e){return new Ys(e)}createOperationFromJSON(e){return efe.fromJSON(e,this.document)}destroy(){this.document.destroy(),this.stopListening()}_runPendingChanges(){const e=[];this.fire("_beforeChanges");try{for(;this._pendingChanges.length;){const t=this._pendingChanges[0].batch;this._currentWriter=new pfe(this,t);const r=this._pendingChanges[0].callback(this._currentWriter);e.push(r),this.document._handleChangeBlock(this._currentWriter),this._pendingChanges.shift(),this._currentWriter=null}}finally{this._pendingChanges.length=0,this._currentWriter=null,this.fire("_afterChanges")}return e}};function Jp(n,e){if(n)return n instanceof cr||n instanceof oi?n:n instanceof Ns?e||e===0?new cr(n,e):n.is("rootElement")?new cr(n,"in"):new cr(n,"on"):new cr(n)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class jfe extends $o{constructor(){super(...arguments),this.domEventType="click"}onDomEvent(e){this.fire(e.type,e)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Sg extends $o{constructor(){super(...arguments),this.domEventType=["mousedown","mouseup","mouseover","mouseout"]}onDomEvent(e){this.fire(e.type,e)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ad{constructor(e){this.document=e}createDocumentFragment(e){return new ms(this.document,e)}createElement(e,t,r){return new ii(this.document,e,t,r)}createText(e){return new kt(this.document,e)}clone(e,t=!1){return e._clone(t)}appendChild(e,t){return t._appendChild(e)}insertChild(e,t,r){return r._insertChild(e,t)}removeChildren(e,t,r){return r._removeChildren(e,t)}remove(e){const t=e.parent;return t?this.removeChildren(t.getChildIndex(e),1,t):[]}replace(e,t){const r=e.parent;if(r){const i=r.getChildIndex(e);return this.removeChildren(i,1,r),this.insertChild(i,t,r),!0}return!1}unwrapElement(e){const t=e.parent;if(t){const r=t.getChildIndex(e);this.remove(e),this.insertChild(r,e.getChildren(),t)}}rename(e,t){const r=new ii(this.document,e,t.getAttributes(),t.getChildren());return this.replace(t,r)?r:null}setAttribute(e,t,r){r._setAttribute(e,t)}removeAttribute(e,t){t._removeAttribute(e)}addClass(e,t){t._addClass(e)}removeClass(e,t){t._removeClass(e)}setStyle(e,t,r){Er(e)&&r===void 0?t._setStyle(e):r._setStyle(e,t)}removeStyle(e,t){t._removeStyle(e)}setCustomProperty(e,t,r){r._setCustomProperty(e,t)}removeCustomProperty(e,t){return t._removeCustomProperty(e)}createPositionAt(e,t){return ue._createAt(e,t)}createPositionAfter(e){return ue._createAfter(e)}createPositionBefore(e){return ue._createBefore(e)}createRange(e,t){return new $e(e,t)}createRangeOn(e){return $e._createOn(e)}createRangeIn(e){return $e._createIn(e)}createSelection(...e){return new qi(...e)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Wfe=/^([+-]?[0-9]*([.][0-9]+)?(px|cm|mm|in|pc|pt|ch|em|ex|rem|vh|vw|vmin|vmax)|0)$/;function Hfe(n){return Wfe.test(n)}const Ufe=/^[+-]?[0-9]*([.][0-9]+)?%$/;function Gfe(n){return Ufe.test(n)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class qfe{constructor(){this._commands=new Map}add(e,t){this._commands.set(e,t)}get(e){return this._commands.get(e)}execute(e,...t){const r=this.get(e);if(!r)throw new M("commandcollection-command-not-found",this,{commandName:e});return r.execute(...t)}*names(){yield*this._commands.keys()}*commands(){yield*this._commands.values()}[Symbol.iterator](){return this._commands[Symbol.iterator]()}destroy(){for(const e of this.commands())e.destroy()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Kfe extends mn{constructor(e){super(),this.editor=e}set(e,t,r={}){if(typeof t=="string"){const i=t;t=(o,s)=>{this.editor.execute(i),s()}}super.set(e,t,r)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Qp="contentEditing",MT="common";class Yfe{constructor(e){this.keystrokeInfos=new Map,this._editor=e;const t=e.config.get("menuBar.isVisible"),r=e.locale.t;this.addKeystrokeInfoCategory({id:Qp,label:r("Content editing keystrokes"),description:r("These keyboard shortcuts allow for quick access to content editing features.")});const i=[{label:r("Close contextual balloons, dropdowns, and dialogs"),keystroke:"Esc"},{label:r("Open the accessibility help dialog"),keystroke:"Alt+0"},{label:r("Move focus between form fields (inputs, buttons, etc.)"),keystroke:[["Tab"],["Shift+Tab"]]},{label:r("Move focus to the toolbar, navigate between toolbars"),keystroke:"Alt+F10",mayRequireFn:!0},{label:r("Navigate through the toolbar or menu bar"),keystroke:[["arrowup"],["arrowright"],["arrowdown"],["arrowleft"]]},{label:r("Execute the currently focused button. Executing buttons that interact with the editor content moves the focus back to the content."),keystroke:[["Enter"],["Space"]]}];t&&i.push({label:r("Move focus to the menu bar, navigate between menu bars"),keystroke:"Alt+F9",mayRequireFn:!0}),this.addKeystrokeInfoCategory({id:"navigation",label:r("User interface and content navigation keystrokes"),description:r("Use the following keystrokes for more efficient navigation in the CKEditor 5 user interface."),groups:[{id:"common",keystrokes:i}]})}addKeystrokeInfoCategory({id:e,label:t,description:r,groups:i}){this.keystrokeInfos.set(e,{id:e,label:t,description:r,groups:new Map}),this.addKeystrokeInfoGroup({categoryId:e,id:MT}),i&&i.forEach(o=>{this.addKeystrokeInfoGroup({categoryId:e,...o})})}addKeystrokeInfoGroup({categoryId:e=Qp,id:t,label:r,keystrokes:i}){const o=this.keystrokeInfos.get(e);if(!o)throw new M("accessibility-unknown-keystroke-info-category",this._editor,{groupId:t,categoryId:e});o.groups.set(t,{id:t,label:r,keystrokes:i||[]})}addKeystrokeInfos({categoryId:e=Qp,groupId:t=MT,keystrokes:r}){if(!this.keystrokeInfos.has(e))throw new M("accessibility-unknown-keystroke-info-category",this._editor,{categoryId:e,keystrokes:r});const i=this.keystrokeInfos.get(e);if(!i.groups.has(t))throw new M("accessibility-unknown-keystroke-info-group",this._editor,{groupId:t,categoryId:e,keystrokes:r});i.groups.get(t).keystrokes.push(...r)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Xfe extends ct(){constructor(e={}){super();const t=this.constructor,{translations:r,...i}=t.defaultConfig||{},{translations:o=r,...s}=e,a=e.language||i.language;this._context=e.context||new BM({language:a,translations:o}),this._context._addEditor(this,!e.context);const l=Array.from(t.builtinPlugins||[]);this.config=new mM(s,i),this.config.define("plugins",l),this.config.define(this._context._getEditorConfig()),this.plugins=new DM(this,l,this._context.plugins),this.locale=this._context.locale,this.t=this.locale.t,this._readOnlyLocks=new Set,this.commands=new qfe,this.set("state","initializing"),this.once("ready",()=>this.state="ready",{priority:"high"}),this.once("destroy",()=>this.state="destroyed",{priority:"high"}),this.model=new zfe,this.on("change:isReadOnly",()=>{this.model.document.isReadOnly=this.isReadOnly});const c=new Ece;this.data=new Xde(this.model,c),this.editing=new Ade(this.model,c),this.editing.view.document.bind("isReadOnly").to(this),this.conversion=new Jde([this.editing.downcastDispatcher,this.data.downcastDispatcher],this.data.upcastDispatcher),this.conversion.addAlias("dataDowncast",this.data.downcastDispatcher),this.conversion.addAlias("editingDowncast",this.editing.downcastDispatcher),this.keystrokes=new Kfe(this),this.keystrokes.listenTo(this.editing.view.document),this.accessibility=new Yfe(this)}get isReadOnly(){return this._readOnlyLocks.size>0}set isReadOnly(e){throw new M("editor-isreadonly-has-no-setter")}enableReadOnlyMode(e){if(typeof e!="string"&&typeof e!="symbol")throw new M("editor-read-only-lock-id-invalid",null,{lockId:e});this._readOnlyLocks.has(e)||(this._readOnlyLocks.add(e),this._readOnlyLocks.size===1&&this.fire("change:isReadOnly","isReadOnly",!0,!1))}disableReadOnlyMode(e){if(typeof e!="string"&&typeof e!="symbol")throw new M("editor-read-only-lock-id-invalid",null,{lockId:e});this._readOnlyLocks.has(e)&&(this._readOnlyLocks.delete(e),this._readOnlyLocks.size===0&&this.fire("change:isReadOnly","isReadOnly",!1,!0))}setData(e){this.data.set(e)}getData(e){return this.data.get(e)}initPlugins(){const e=this.config,t=e.get("plugins"),r=e.get("removePlugins")||[],i=e.get("extraPlugins")||[],o=e.get("substitutePlugins")||[];return this.plugins.init(t.concat(i),r,o)}destroy(){let e=Promise.resolve();return this.state=="initializing"&&(e=new Promise(t=>this.once("ready",t))),e.then(()=>{this.fire("destroy"),this.stopListening(),this.commands.destroy()}).then(()=>this.plugins.destroy()).then(()=>{this.model.destroy(),this.data.destroy(),this.editing.destroy(),this.keystrokes.destroy()}).then(()=>this._context._removeEditor(this))}execute(e,...t){try{return this.commands.execute(e,...t)}catch(r){/* istanbul ignore next -- @preserve */M.rethrowUnexpectedError(r,this)}}focus(){this.editing.view.focus()}static create(...e){throw new Error("This is an abstract method.")}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Zfe(n){if(!Wf(n.updateSourceElement))throw new M("attachtoform-missing-elementapi-interface",n);const e=n.sourceElement;if(Jfe(e)&&e.form){let t;const r=e.form,i=()=>n.updateSourceElement();Wf(r.submit)&&(t=r.submit,r.submit=()=>{i(),t.apply(r)}),r.addEventListener("submit",i),n.on("destroy",()=>{r.removeEventListener("submit",i),t&&(r.submit=t)})}}function Jfe(n){return!!n&&n.tagName.toLowerCase()==="textarea"}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Sy(n){class e extends n{updateSourceElement(r){if(!this.sourceElement)throw new M("editor-missing-sourceelement",this);const i=this.config.get("updateSourceElementOnDestroy"),o=this.sourceElement instanceof HTMLTextAreaElement;if(!i&&!o){BA(this.sourceElement,"");return}const s=typeof r=="string"?r:this.data.get();BA(this.sourceElement,s)}}return e}Sy.updateSourceElement=Sy(Object).prototype.updateSourceElement;/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class DT extends NM{static get pluginName(){return"PendingActions"}init(){this.set("hasAny",!1),this._actions=new Vn({idProperty:"_id"}),this._actions.delegate("add","remove").to(this)}add(e){if(typeof e!="string")throw new M("pendingactions-add-invalid-message",this);const t=new(ct());return t.set("message",e),this._actions.add(t),this.hasAny=!0,t}remove(e){this._actions.remove(e),this.hasAny=!!this._actions.length}get first(){return this._actions.get(0)}[Symbol.iterator](){return this._actions[Symbol.iterator]()}}const Qfe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.591 10.177 4.243 4.242a1 1 0 0 1-1.415 1.415l-4.242-4.243-4.243 4.243a1 1 0 0 1-1.414-1.415l4.243-4.242L4.52 5.934A1 1 0 0 1 5.934 4.52l4.243 4.243 4.242-4.243a1 1 0 1 1 1.415 1.414l-4.243 4.243z"/></svg>',ehe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 16h9a1 1 0 0 1 0 2H2a1 1 0 0 1 0-2z"/><path d="M17 1a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h14zm0 1.5H3a.5.5 0 0 0-.492.41L2.5 3v9a.5.5 0 0 0 .41.492L3 12.5h14a.5.5 0 0 0 .492-.41L17.5 12V3a.5.5 0 0 0-.41-.492L17 2.5z" fill-opacity=".6"/></svg>',the='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.972 16.615a.997.997 0 0 1-.744-.292l-4.596-4.596a1 1 0 1 1 1.414-1.414l3.926 3.926 9.937-9.937a1 1 0 0 1 1.414 1.415L7.717 16.323a.997.997 0 0 1-.745.292z"/></svg>',nhe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.209 18.717A8.5 8.5 0 1 1 18.686 9.6h-.008l.002.12a3 3 0 0 1-2.866 2.997h-.268l-.046-.002v.002h-4.791a2 2 0 1 0 0 4 1 1 0 1 1-.128 1.992 8.665 8.665 0 0 1-.372.008Zm-3.918-7.01a1.25 1.25 0 1 0-2.415-.648 1.25 1.25 0 0 0 2.415.647ZM5.723 8.18a1.25 1.25 0 1 0 .647-2.414 1.25 1.25 0 0 0-.647 2.414ZM9.76 6.155a1.25 1.25 0 1 0 .647-2.415 1.25 1.25 0 0 0-.647 2.415Zm4.028 1.759a1.25 1.25 0 1 0 .647-2.415 1.25 1.25 0 0 0-.647 2.415Z"/></svg>',rhe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m8.636 9.531-2.758 3.94a.5.5 0 0 0 .122.696l3.224 2.284h1.314l2.636-3.736L8.636 9.53zm.288 8.451L5.14 15.396a2 2 0 0 1-.491-2.786l6.673-9.53a2 2 0 0 1 2.785-.49l3.742 2.62a2 2 0 0 1 .491 2.785l-7.269 10.053-2.147-.066z"/><path d="M4 18h5.523v-1H4zm-2 0h1v-1H2z"/></svg>',ihe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.035 1C2.446 1 2 1.54 2 2.098V10.5h1.5v-8h13v8H18V2.098C18 1.539 17.48 1 16.9 1H3.035Zm10.453 2.61a1.885 1.885 0 0 0-1.442.736 1.89 1.89 0 0 0 1.011 2.976 1.903 1.903 0 0 0 2.253-1.114 1.887 1.887 0 0 0-1.822-2.598ZM7.463 8.163a.611.611 0 0 0-.432.154L5.071 10.5h5.119L7.88 8.348a.628.628 0 0 0-.417-.185Zm6.236 1.059a.62.62 0 0 0-.42.164L12.07 10.5h2.969l-.92-1.113a.618.618 0 0 0-.42-.165ZM.91 11.5a.91.91 0 0 0-.91.912v6.877c0 .505.405.91.91.91h18.178a.91.91 0 0 0 .912-.91v-6.877a.908.908 0 0 0-.912-.912H.91ZM3.668 13h1.947l2.135 5.7H5.898l-.28-.946H3.601l-.278.945H1.516L3.668 13Zm4.947 0h1.801v4.3h2.7v1.4h-4.5V13h-.001Zm4.5 0h5.4v1.4h-1.798v4.3h-1.701v-4.3h-1.9V13h-.001Zm-8.517 1.457-.614 2.059h1.262l-.648-2.059Z"/></svg>',ohe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.68 13.74h-.001l4.209 4.208a1 1 0 1 0 1.414-1.414l-4.267-4.268a6 6 0 1 0-1.355 1.474ZM13 9a4 4 0 1 1-8 0 4 4 0 0 1 8 0Z"/></svg>',she='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.463 5.187a.888.888 0 1 1 1.254 1.255L9.16 10l3.557 3.557a.888.888 0 1 1-1.254 1.255L7.26 10.61a.888.888 0 0 1 .16-1.382l4.043-4.042z"/></svg>',ahe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8.537 14.813a.888.888 0 1 1-1.254-1.255L10.84 10 7.283 6.442a.888.888 0 1 1 1.254-1.255L12.74 9.39a.888.888 0 0 1-.16 1.382l-4.043 4.042z"/></svg>',lhe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M1.201 1C.538 1 0 1.47 0 2.1v14.363c0 .64.534 1.037 1.186 1.037h9.494a2.97 2.97 0 0 1-.414-.287 2.998 2.998 0 0 1-1.055-2.03 3.003 3.003 0 0 1 .693-2.185l.383-.455-.02.018-3.65-3.41a.695.695 0 0 0-.957-.034L1.5 13.6V2.5h15v5.535a2.97 2.97 0 0 1 1.412.932l.088.105V2.1c0-.63-.547-1.1-1.2-1.1H1.202Zm11.713 2.803a2.146 2.146 0 0 0-2.049 1.992 2.14 2.14 0 0 0 1.28 2.096 2.13 2.13 0 0 0 2.644-3.11 2.134 2.134 0 0 0-1.875-.978Z"/><path d="M15.522 19.1a.79.79 0 0 0 .79-.79v-5.373l2.059 2.455a.79.79 0 1 0 1.211-1.015l-3.352-3.995a.79.79 0 0 0-.995-.179.784.784 0 0 0-.299.221l-3.35 3.99a.79.79 0 1 0 1.21 1.017l1.936-2.306v5.185c0 .436.353.79.79.79Z"/><path d="M15.522 19.1a.79.79 0 0 0 .79-.79v-5.373l2.059 2.455a.79.79 0 1 0 1.211-1.015l-3.352-3.995a.79.79 0 0 0-.995-.179.784.784 0 0 0-.299.221l-3.35 3.99a.79.79 0 1 0 1.21 1.017l1.936-2.306v5.185c0 .436.353.79.79.79Z"/></svg>',che='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>',uhe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm2.286 4c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75z"/></svg>',dhe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M18 3.75a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 8a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 4a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75zm0-8a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75z"/></svg>',fhe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>',hhe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',mhe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M15.003 7v5.5a1 1 0 0 1-1 1H5.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H6.5V12h6.997V7.5z"/></svg>',ghe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M18.003 7v5.5a1 1 0 0 1-1 1H8.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H9.5V12h6.997V7.5z"/></svg>',phe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M18 7v5.5a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1zm-1.505.5H3.504V12h12.991V7.5z"/></svg>',vhe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm11.5 9H18v1.5h-4.5zM2 15h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',bhe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm11.5 9H18v1.5h-4.5zm0-3H18v1.5h-4.5zm0-3H18v1.5h-4.5zM2 15h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',yhe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2zm0-9h5v1.5H2zm0 3h5v1.5H2zm0 3h5v1.5H2z"/><path d="M18.003 7v5.5a1 1 0 0 1-1 1H8.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H9.5V12h6.997V7.5z"/></svg>',whe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 17v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zM1 15.5v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm0-2v1h-1v-1h1zm-19 0v1H0v-1h1zM14.5 2v1h-1V2h1zm2 0v1h-1V2h1zm2 0v1h-1V2h1zm-8 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm8 0v1h-1V2h1zm-10 0v1h-1V2h1z"/><path d="M18.095 2H1.905C.853 2 0 2.895 0 4v12c0 1.105.853 2 1.905 2h16.19C19.147 18 20 17.105 20 16V4c0-1.105-.853-2-1.905-2zm0 1.5c.263 0 .476.224.476.5v12c0 .276-.213.5-.476.5H1.905a.489.489 0 0 1-.476-.5V4c0-.276.213-.5.476-.5h16.19z"/></svg>',_he='<svg xmlns="http://www.w3.org/2000/svg" xmlns:v="https://vecta.io/nano" viewBox="0 0 20 20"><path d="M.95 1.43a.95.95 0 0 0-.95.95v3.1a.95.95 0 0 0 .95.95h.75v6.3H.95a.95.95 0 0 0-.95.95v3.1a.95.95 0 0 0 .95.95h3.1a.95.95 0 0 0 .95-.95v-.65h1.932l1.539-1.5H5v-.95a.95.95 0 0 0-.95-.95H3.2v-6.3h.85A.95.95 0 0 0 5 5.48v-.55h10v.55a.95.95 0 0 0 .95.95h3.1a.95.95 0 0 0 .95-.95v-3.1a.95.95 0 0 0-.95-.95h-3.1a.95.95 0 0 0-.95.95v1.05H5V2.38a.95.95 0 0 0-.95-.95H.95zm.55 3.5v-2h2v2h-2zm0 9.3v2h2v-2h-2zm15-11.3v2h2v-2h-2z"/><path d="M8.139 20.004v-2.388l7.045-7.048 2.391 2.391-7.046 7.046h-2.39zm11.421-9.101a.64.64 0 0 1-.138.206l-1.165 1.168-2.391-2.391 1.167-1.163a.63.63 0 0 1 .206-.138.635.635 0 0 1 .243-.049.63.63 0 0 1 .449.187l1.491 1.488c.059.059.108.129.138.206s.049.16.049.243a.6.6 0 0 1-.049.243z"/></svg>',Che='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 16.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1ZM1 15v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 13v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 11v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 9v1H0V9h1Zm19 0v1h-1V9h1ZM1 7v1H0V7h1Zm19 0v1h-1V7h1ZM1 5v1H0V5h1Zm19 0v1h-1V5h1Zm0-2v1h-1V3h1ZM1 3v1H0V3h1Zm13.5-1.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm-8 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm8 0v1h-1v-1h1Zm-10 0v1h-1v-1h1Z"/><path d="M13 5.5H2a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2v-8a2 2 0 0 0-2-2ZM13 7a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-8A.5.5 0 0 1 2 7h11Z"/></svg>',She='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 16.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1ZM1 15v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 13v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 11v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 9v1H0V9h1Zm19 0v1h-1V9h1ZM1 7v1H0V7h1Zm19 0v1h-1V7h1ZM1 5v1H0V5h1Zm19 0v1h-1V5h1Zm0-2v1h-1V3h1ZM1 3v1H0V3h1Zm13.5-1.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm-8 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm8 0v1h-1v-1h1Zm-10 0v1h-1v-1h1Z"/><path d="M7 9.5H2a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2ZM7 11a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-4A.5.5 0 0 1 2 11h5Z"/></svg>',xhe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 16.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1ZM1 15v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 13v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 11v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 9v1H0V9h1Zm19 0v1h-1V9h1ZM1 7v1H0V7h1Zm19 0v1h-1V7h1ZM1 5v1H0V5h1Zm19 0v1h-1V5h1Zm0-2v1h-1V3h1ZM1 3v1H0V3h1Zm13.5-1.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm-8 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm8 0v1h-1v-1h1Zm-10 0v1h-1v-1h1Z"/><path d="M10 7.5H2a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2v-6a2 2 0 0 0-2-2ZM10 9a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-6A.5.5 0 0 1 2 9h8Z"/></svg>',Ahe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m7.3 17.37-.061.088a1.518 1.518 0 0 1-.934.535l-4.178.663-.806-4.153a1.495 1.495 0 0 1 .187-1.058l.056-.086L8.77 2.639c.958-1.351 2.803-1.076 4.296-.03 1.497 1.047 2.387 2.693 1.433 4.055L7.3 17.37zM9.14 4.728l-5.545 8.346 3.277 2.294 5.544-8.346L9.14 4.728zM6.07 16.512l-3.276-2.295.53 2.73 2.746-.435zM9.994 3.506 13.271 5.8c.316-.452-.16-1.333-1.065-1.966-.905-.634-1.895-.78-2.212-.328zM8 18.5 9.375 17H19v1.5H8z"/></svg>',The='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.999 2H15a1 1 0 0 1 0 2h-1.004v13a1 1 0 1 1-2 0V4H8.999v13a1 1 0 1 1-2 0v-7A4 4 0 0 1 3 6a4 4 0 0 1 3.999-4z"/></svg>',Ehe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 10.423a6.5 6.5 0 0 1 6.056-6.408l.038.67C6.448 5.423 5.354 7.663 5.22 10H9c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574zm8 0a6.5 6.5 0 0 1 6.056-6.408l.038.67c-2.646.739-3.74 2.979-3.873 5.315H17c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574z"/></svg>',khe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><circle cx="9.5" cy="4.5" r="1.5"/><circle cx="9.5" cy="10.5" r="1.5"/><circle cx="9.5" cy="16.5" r="1.5"/></svg>',Phe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5 3.25a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M12 3.25a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M5 10a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M12 10a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M5 16.75a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M12 16.75a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/></svg>',Ihe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.187 17H5.773c-.637 0-1.092-.138-1.364-.415-.273-.277-.409-.718-.409-1.323V4.738c0-.617.14-1.062.419-1.332.279-.27.73-.406 1.354-.406h4.68c.69 0 1.288.041 1.793.124.506.083.96.242 1.36.478.341.197.644.447.906.75a3.262 3.262 0 0 1 .808 2.162c0 1.401-.722 2.426-2.167 3.075C15.05 10.175 16 11.315 16 13.01a3.756 3.756 0 0 1-2.296 3.504 6.1 6.1 0 0 1-1.517.377c-.571.073-1.238.11-2 .11zm-.217-6.217H7v4.087h3.069c1.977 0 2.965-.69 2.965-2.072 0-.707-.256-1.22-.768-1.537-.512-.319-1.277-.478-2.296-.478zM7 5.13v3.619h2.606c.729 0 1.292-.067 1.69-.2a1.6 1.6 0 0 0 .91-.765c.165-.267.247-.566.247-.897 0-.707-.26-1.176-.778-1.409-.519-.232-1.31-.348-2.375-.348H7z"/></svg>',Ohe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.5 5.5H7v5h3.5a2.5 2.5 0 1 0 0-5zM5 3h6.5v.025a5 5 0 0 1 0 9.95V13H7v4a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1z"/></svg>',Rhe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 2a1 1 0 0 0-1 1v6H3a1 1 0 1 0 0 2h6v6a1 1 0 1 0 2 0v-6h6a1 1 0 1 0 0-2h-6V3a1 1 0 0 0-1-1Z"/></svg>',Mhe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.816 11.5 7.038 4.785 4.261 11.5h5.555Zm.62 1.5H3.641l-1.666 4.028H.312l5.789-14h1.875l5.789 14h-1.663L10.436 13Z"/><path d="m12.09 17-.534-1.292.848-1.971.545 1.319L12.113 17h-.023Zm1.142-5.187.545 1.319L15.5 9.13l1.858 4.316h-3.45l.398.965h3.467L18.887 17H20l-3.873-9h-1.254l-1.641 3.813Z"/></svg>',Dhe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M19 4.5 14 0H3v12.673l.868-1.041c.185-.222.4-.402.632-.54V1.5h8v5h5v7.626a2.24 2.24 0 0 1 1.5.822V4.5ZM14 5V2l3.3 3H14Zm-3.692 12.5c.062.105.133.206.213.303L11.52 19H8v-.876a2.243 2.243 0 0 0 1.82-.624h.488Zm7.518-.657a.75.75 0 0 0-1.152-.96L15.5 17.29V12H14v5.29l-1.174-1.408a.75.75 0 0 0-1.152.96l2.346 2.816a.95.95 0 0 0 1.46 0l2.346-2.815Zm-15.056-.38a.75.75 0 0 1-.096-1.056l2.346-2.815a.95.95 0 0 1 1.46 0l2.346 2.815a.75.75 0 1 1-1.152.96L6.5 14.96V20H5v-5.04l-1.174 1.408a.75.75 0 0 1-1.056.096Z"/></svg>',Bhe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m14.958 9.367-2.189 1.837a.75.75 0 0 0 .965 1.149l3.788-3.18a.747.747 0 0 0 .21-.284.75.75 0 0 0-.17-.945L13.77 4.762a.75.75 0 1 0-.964 1.15l2.331 1.955H6.22A.75.75 0 0 0 6 7.9a4 4 0 1 0 1.477 7.718l-.344-1.489A2.5 2.5 0 1 1 6.039 9.4l-.008-.032h8.927z"/></svg>',Nhe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m5.042 9.367 2.189 1.837a.75.75 0 0 1-.965 1.149l-3.788-3.18a.747.747 0 0 1-.21-.284.75.75 0 0 1 .17-.945L6.23 4.762a.75.75 0 1 1 .964 1.15L4.863 7.866h8.917A.75.75 0 0 1 14 7.9a4 4 0 1 1-1.477 7.718l.344-1.489a2.5 2.5 0 1 0 1.094-4.73l.008-.032H5.042z"/></svg>',Lhe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0C1 4.784 1.777 4 2.75 4c.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75C1.784 7.5 1 6.723 1 5.75zm6 9c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0c0-.966.777-1.75 1.75-1.75.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75-.966 0-1.75-.777-1.75-1.75z"/></svg>',Fhe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM3.5 3v5H2V3.7H1v-1h2.5V3zM.343 17.857l2.59-3.257H2.92a.6.6 0 1 0-1.04 0H.302a2 2 0 1 1 3.995 0h-.001c-.048.405-.16.734-.333.988-.175.254-.59.692-1.244 1.312H4.3v1h-4l.043-.043zM7 14.75a.75.75 0 0 1 .75-.75h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75z"/></svg>',$he='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm5 6c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM2.75 16.5h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 1 0 0 1.5zM1.632 6.95 5.02 9.358a.4.4 0 0 1-.013.661l-3.39 2.207A.4.4 0 0 1 1 11.892V7.275a.4.4 0 0 1 .632-.326z"/></svg>',Vhe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm5 6c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM2.75 16.5h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 1 0 0 1.5zm1.618-9.55L.98 9.358a.4.4 0 0 0 .013.661l3.39 2.207A.4.4 0 0 0 5 11.892V7.275a.4.4 0 0 0-.632-.326z"/></svg>',zhe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 5.5v3h4v-3H3Zm0 4v3h4v-3H3Zm0 4v3h4v-3H3Zm5 3h4v-3H8v3Zm5 0h4v-3h-4v3Zm4-4v-3h-4v3h4Zm0-4v-3h-4v3h4Zm1.5 8A1.5 1.5 0 0 1 17 18H3a1.5 1.5 0 0 1-1.5-1.5V3c.222-.863 1.068-1.5 2-1.5h13c.932 0 1.778.637 2 1.5v13.5Zm-6.5-4v-3H8v3h4Zm0-4v-3H8v3h4Z"/></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Ee={bold:Ihe,cancel:Qfe,caption:ehe,check:the,colorPalette:nhe,eraser:rhe,imageUpload:lhe,textAlternative:ihe,loupe:ohe,previousArrow:she,nextArrow:ahe,importExport:Dhe,paragraph:Ohe,plus:Rhe,text:Mhe,alignLeft:che,alignCenter:uhe,alignRight:dhe,alignJustify:fhe,objectLeft:bhe,objectCenter:mhe,objectRight:yhe,objectFullWidth:phe,objectInline:vhe,objectBlockLeft:hhe,objectBlockRight:ghe,objectSizeCustom:_he,objectSizeFull:whe,objectSizeLarge:Che,objectSizeSmall:She,objectSizeMedium:xhe,pencil:Ahe,pilcrow:The,quote:Ehe,threeVerticalDots:khe,dragIndicator:Phe,redo:Bhe,undo:Nhe,bulletedList:Lhe,numberedList:Fhe,indent:$he,outdent:Vhe,table:zhe};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ld extends be{constructor(e){super(e),this.set("text",void 0),this.set("for",void 0),this.id=`ck-editor__label_${Br()}`;const t=this.bindTemplate;this.setTemplate({tag:"label",attributes:{class:["ck","ck-label"],id:this.id,for:t.to("for")},children:[{text:t.to("text")}]})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class jhe extends be{constructor(e,t){super(e);const r=e.t,i=new ld;i.text=r("Help Contents. To close this dialog press ESC."),this.setTemplate({tag:"div",attributes:{class:["ck","ck-accessibility-help-dialog__content"],"aria-labelledby":i.id,role:"document",tabindex:-1},children:[Gr(document,"p",{},r("Below, you can find a list of keyboard shortcuts that can be used in the editor.")),...this._createCategories(Array.from(t.values())),i]})}focus(){this.element.focus()}_createCategories(e){return e.map(t=>{const r=[Gr(document,"h3",{},t.label),...Array.from(t.groups.values()).map(i=>this._createGroup(i)).flat()];return t.description&&r.splice(1,0,Gr(document,"p",{},t.description)),Gr(document,"section",{},r)})}_createGroup(e){const t=e.keystrokes.sort((i,o)=>i.label.localeCompare(o.label)).map(i=>this._createGroupRow(i)).flat(),r=[Gr(document,"dl",{},t)];return e.label&&r.unshift(Gr(document,"h4",{},e.label)),r}_createGroupRow(e){const t=this.locale.t,r=Gr(document,"dt"),i=Gr(document,"dd"),o=Hhe(e.keystroke),s=[];for(const a of o)s.push(a.map(Whe).join(""));return r.innerHTML=e.label,i.innerHTML=s.join(", ")+(e.mayRequireFn&&Re.isMac?` ${t("(may require <kbd>Fn</kbd>)")}`:""),[r,i]}}function Whe(n){return Qh(n).split("+").map(e=>`<kbd>${e}</kbd>`).join("+")}function Hhe(n){return typeof n=="string"?[[n]]:typeof n[0]=="string"?[n]:n}const BT='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 6.628a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z"/><path d="M8.5 9.125a.3.3 0 0 0-.253-.296L5.11 8.327a.75.75 0 1 1 .388-1.449l4.04.716c.267.072.624.08.893.009l4.066-.724a.75.75 0 1 1 .388 1.45l-3.132.5a.3.3 0 0 0-.253.296v1.357a.3.3 0 0 0 .018.102l1.615 4.438a.75.75 0 0 1-1.41.513l-1.35-3.71a.3.3 0 0 0-.281-.197h-.209a.3.3 0 0 0-.282.198l-1.35 3.711a.75.75 0 0 1-1.41-.513l1.64-4.509a.3.3 0 0 0 .019-.103V9.125Z"/><path clip-rule="evenodd" d="M10 18.5a8.5 8.5 0 1 1 0-17 8.5 8.5 0 0 1 0 17Zm0 1.5c5.523 0 10-4.477 10-10S15.523 0 10 0 0 4.477 0 10s4.477 10 10 10Z"/></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Uhe extends W{constructor(){super(...arguments),this.contentView=null}static get requires(){return[Vi]}static get pluginName(){return"AccessibilityHelp"}init(){const e=this.editor,t=e.locale.t;e.ui.componentFactory.add("accessibilityHelp",()=>{const r=this._createButton(Ne);return r.set({tooltip:!0,withText:!1,label:t("Accessibility help")}),r}),e.ui.componentFactory.add("menuBar:accessibilityHelp",()=>{const r=this._createButton(un);return r.label=t("Accessibility"),r}),e.keystrokes.set("Alt+0",(r,i)=>{this._showDialog(),i()}),this._setupRootLabels()}_createButton(e){const r=this.editor.locale,i=new e(r);return i.set({keystroke:"Alt+0",icon:BT}),i.on("execute",()=>this._showDialog()),i}_setupRootLabels(){const e=this.editor,t=e.editing.view,r=e.t;e.ui.on("ready",()=>{t.change(o=>{for(const s of t.document.roots)i(o,s)}),e.on("addRoot",(o,s)=>{const a=e.editing.view.document.getRoot(s.rootName);t.change(l=>i(l,a))},{priority:"low"})});function i(o,s){const l=`${s.getAttribute("aria-label")}. ${r("Press %0 for help.",[Qh("Alt+0")])}`;o.setAttribute("aria-label",l,s)}}_showDialog(){const e=this.editor,t=e.plugins.get("Dialog"),r=e.locale.t;this.contentView||(this.contentView=new jhe(e.locale,e.accessibility.keystrokeInfos)),t.show({id:"accessibilityHelp",className:"ck-accessibility-help-dialog",title:r("Accessibility help"),icon:BT,hasCloseButton:!0,content:this.contentView})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ghe extends rr{constructor(e,t=[]){super(t),this.locale=e}get bodyCollectionContainer(){return this._bodyCollectionContainer}attachToDom(){this._bodyCollectionContainer=new Jn({tag:"div",attributes:{class:["ck","ck-reset_all","ck-body","ck-rounded-corners"],dir:this.locale.uiLanguageDirection},children:this}).render();let e=document.querySelector(".ck-body-wrapper");e||(e=Gr(document,"div",{class:"ck-body-wrapper"}),document.body.appendChild(e)),e.appendChild(this._bodyCollectionContainer)}detachFromDom(){super.destroy(),this._bodyCollectionContainer&&this._bodyCollectionContainer.remove();const e=document.querySelector(".ck-body-wrapper");e&&e.childElementCount==0&&e.remove()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class li extends be{constructor(){super();const e=this.bindTemplate;this.set("content",""),this.set("viewBox","0 0 20 20"),this.set("fillColor",""),this.set("isColorInherited",!0),this.set("isVisible",!0),this.setTemplate({tag:"svg",ns:"http://www.w3.org/2000/svg",attributes:{class:["ck","ck-icon",e.if("isVisible","ck-hidden",t=>!t),"ck-reset_all-excluded",e.if("isColorInherited","ck-icon_inherit-color")],viewBox:e.to("viewBox")}})}render(){super.render(),this._updateXMLContent(),this._colorFillPaths(),this.on("change:content",()=>{this._updateXMLContent(),this._colorFillPaths()}),this.on("change:fillColor",()=>{this._colorFillPaths()})}_updateXMLContent(){if(this.content){const t=new DOMParser().parseFromString(this.content.trim(),"image/svg+xml").querySelector("svg"),r=t.getAttribute("viewBox");r&&(this.viewBox=r);for(const{name:i,value:o}of Array.from(t.attributes))li.presentationalAttributeNames.includes(i)&&this.element.setAttribute(i,o);for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(;t.childNodes.length>0;)this.element.appendChild(t.childNodes[0])}}_colorFillPaths(){this.fillColor&&this.element.querySelectorAll(".ck-icon__fill").forEach(e=>{e.style.fill=this.fillColor})}}li.presentationalAttributeNames=["alignment-baseline","baseline-shift","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-rendering","cursor","direction","display","dominant-baseline","fill","fill-opacity","fill-rule","filter","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","mask","opacity","overflow","paint-order","pointer-events","shape-rendering","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-overflow","text-rendering","transform","unicode-bidi","vector-effect","visibility","white-space","word-spacing","writing-mode"];/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class qhe extends be{constructor(){super(),this.set({style:void 0,text:void 0,id:void 0});const e=this.bindTemplate;this.setTemplate({tag:"span",attributes:{class:["ck","ck-button__label"],style:e.to("style"),id:e.to("id")},children:[{text:e.to("text")}]})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ne extends be{constructor(e,t=new qhe){super(e),this._focusDelayed=null;const r=this.bindTemplate,i=Br();this.set("ariaLabel",void 0),this.set("ariaLabelledBy",`ck-editor__aria-label_${i}`),this.set("class",void 0),this.set("labelStyle",void 0),this.set("icon",void 0),this.set("isEnabled",!0),this.set("isOn",!1),this.set("isVisible",!0),this.set("isToggleable",!1),this.set("keystroke",void 0),this.set("label",void 0),this.set("role",void 0),this.set("tabindex",-1),this.set("tooltip",!1),this.set("tooltipPosition","s"),this.set("type","button"),this.set("withText",!1),this.set("withKeystroke",!1),this.children=this.createCollection(),this.labelView=this._setupLabelView(t),this.iconView=new li,this.iconView.extendTemplate({attributes:{class:"ck-button__icon"}}),this.keystrokeView=this._createKeystrokeView(),this.bind("_tooltipString").to(this,"tooltip",this,"label",this,"keystroke",this._getTooltipString.bind(this));const o={tag:"button",attributes:{class:["ck","ck-button",r.to("class"),r.if("isEnabled","ck-disabled",s=>!s),r.if("isVisible","ck-hidden",s=>!s),r.to("isOn",s=>s?"ck-on":"ck-off"),r.if("withText","ck-button_with-text"),r.if("withKeystroke","ck-button_with-keystroke")],role:r.to("role"),type:r.to("type",s=>s||"button"),tabindex:r.to("tabindex"),"aria-checked":r.to("ariaChecked"),"aria-label":r.to("ariaLabel"),"aria-labelledby":r.to("ariaLabelledBy"),"aria-disabled":r.if("isEnabled",!0,s=>!s),"aria-pressed":r.to("isOn",s=>this.isToggleable?String(!!s):!1),"data-cke-tooltip-text":r.to("_tooltipString"),"data-cke-tooltip-position":r.to("tooltipPosition")},children:this.children,on:{click:r.to(s=>{this.isEnabled?this.fire("execute"):s.preventDefault()})}};Re.isSafari&&(this._focusDelayed||(this._focusDelayed=x0(()=>this.focus(),0)),o.on.mousedown=r.to(()=>{this._focusDelayed()}),o.on.mouseup=r.to(()=>{this._focusDelayed.cancel()})),this.setTemplate(o)}render(){super.render(),this.icon&&(this.iconView.bind("content").to(this,"icon"),this.children.add(this.iconView)),this.children.add(this.labelView),this.withKeystroke&&this.keystroke&&this.children.add(this.keystrokeView)}focus(){this.element.focus()}destroy(){this._focusDelayed&&this._focusDelayed.cancel(),super.destroy()}_setupLabelView(e){return e.bind("text","style","id").to(this,"label","labelStyle","ariaLabelledBy"),e}_createKeystrokeView(){const e=new be;return e.setTemplate({tag:"span",attributes:{class:["ck","ck-button__keystroke"]},children:[{text:this.bindTemplate.to("keystroke",t=>Qh(t))}]}),e}_getTooltipString(e,t,r){return e?typeof e=="string"?e:(r&&(r=Qh(r)),e instanceof Function?e(t,r):`${t}${r?` (${r})`:""}`):""}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class xg extends Ne{constructor(e){super(e),this.isToggleable=!0,this.toggleSwitchView=this._createToggleView(),this.extendTemplate({attributes:{class:"ck-switchbutton"}})}render(){super.render(),this.children.add(this.toggleSwitchView)}_createToggleView(){const e=new be;return e.setTemplate({tag:"span",attributes:{class:["ck","ck-button__toggle"]},children:[{tag:"span",attributes:{class:["ck","ck-button__toggle__inner"]}}]}),e}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class kD extends Ne{constructor(e){super(e),this.buttonView=this,this._fileInputView=new Khe(e),this._fileInputView.bind("acceptedType").to(this),this._fileInputView.bind("allowMultipleFiles").to(this),this._fileInputView.delegate("done").to(this),this.on("execute",()=>{this._fileInputView.open()}),this.extendTemplate({attributes:{class:"ck-file-dialog-button"}})}render(){super.render(),this.children.add(this._fileInputView)}}class Khe extends be{constructor(e){super(e),this.set("acceptedType",void 0),this.set("allowMultipleFiles",!1);const t=this.bindTemplate;this.setTemplate({tag:"input",attributes:{class:["ck-hidden"],type:"file",tabindex:"-1",accept:t.to("acceptedType"),multiple:t.to("allowMultipleFiles")},on:{change:t.to(()=>{this.element&&this.element.files&&this.element.files.length&&this.fire("done",this.element.files),this.element.value=""})}})}open(){this.element.click()}}const Ag='<svg viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg"><path d="M.941 4.523a.75.75 0 1 1 1.06-1.06l3.006 3.005 3.005-3.005a.75.75 0 1 1 1.06 1.06l-3.549 3.55a.75.75 0 0 1-1.168-.136L.941 4.523z"/></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Yhe extends be{constructor(e,t){super(e);const r=this.bindTemplate;this.set("isCollapsed",!1),this.set("label",""),this.buttonView=this._createButtonView(),this.children=this.createCollection(),this.set("_collapsibleAriaLabelUid",void 0),t&&this.children.addMany(t),this.setTemplate({tag:"div",attributes:{class:["ck","ck-collapsible",r.if("isCollapsed","ck-collapsible_collapsed")]},children:[this.buttonView,{tag:"div",attributes:{class:["ck","ck-collapsible__children"],role:"region",hidden:r.if("isCollapsed","hidden"),"aria-labelledby":r.to("_collapsibleAriaLabelUid")},children:this.children}]})}render(){super.render(),this._collapsibleAriaLabelUid=this.buttonView.labelView.element.id}focus(){this.buttonView.focus()}_createButtonView(){const e=new Ne(this.locale),t=e.bindTemplate;return e.set({withText:!0,icon:Ag}),e.extendTemplate({attributes:{"aria-expanded":t.to("isOn",r=>String(r))}}),e.bind("label").to(this),e.bind("isOn").to(this,"isCollapsed",r=>!r),e.on("execute",()=>{this.isCollapsed=!this.isCollapsed}),e}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Xhe(n,e){const t=n.t,r={Black:t("Black"),"Dim grey":t("Dim grey"),Grey:t("Grey"),"Light grey":t("Light grey"),White:t("White"),Red:t("Red"),Orange:t("Orange"),Yellow:t("Yellow"),"Light green":t("Light green"),Green:t("Green"),Aquamarine:t("Aquamarine"),Turquoise:t("Turquoise"),"Light blue":t("Light blue"),Blue:t("Blue"),Purple:t("Purple")};return e.map(i=>{const o=r[i.label];return o&&o!=i.label&&(i.label=o),i})}function Zhe(n){return n.map(Jhe).filter(e=>!!e)}function Jhe(n){return typeof n=="string"?{model:n,label:n,hasBorder:!1,view:{name:"span",styles:{color:n}}}:{model:n.color,label:n.label||n.color,hasBorder:n.hasBorder===void 0?!1:n.hasBorder,view:{name:"span",styles:{color:`${n.color}`}}}}const Qhe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path class="ck-icon__fill" d="M16.935 5.328a2 2 0 0 1 0 2.829l-7.778 7.778a2 2 0 0 1-2.829 0L3.5 13.107a1.999 1.999 0 1 1 2.828-2.829l.707.707a1 1 0 0 0 1.414 0l5.658-5.657a2 2 0 0 1 2.828 0z"/><path d="M14.814 6.035 8.448 12.4a1 1 0 0 1-1.414 0l-1.413-1.415A1 1 0 1 0 4.207 12.4l2.829 2.829a1 1 0 0 0 1.414 0l7.778-7.778a1 1 0 1 0-1.414-1.415z"/></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class PD extends Ne{constructor(e){super(e);const t=this.bindTemplate;this.set("color",void 0),this.set("hasBorder",!1),this.icon=Qhe,this.extendTemplate({attributes:{style:{backgroundColor:t.to("color",r=>Re.isMediaForcedColors?null:r)},class:["ck","ck-color-grid__tile",t.if("hasBorder","ck-color-selector__color-tile_bordered")]}})}render(){super.render(),this.iconView.fillColor="hsl(0, 0%, 100%)"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class NT extends be{constructor(e,t){super(e);const r=t&&t.colorDefinitions?t.colorDefinitions:[];this.columns=t&&t.columns?t.columns:5;const i={gridTemplateColumns:`repeat( ${this.columns}, 1fr)`};this.set("selectedColor",void 0),this.items=this.createCollection(),this.focusTracker=new Ut,this.keystrokes=new mn,this.items.on("add",(o,s)=>{s.isOn=s.color===this.selectedColor}),r.forEach(o=>{const s=new PD;s.set({color:o.color,label:o.label,tooltip:!0,hasBorder:o.options.hasBorder}),s.on("execute",()=>{this.fire("execute",{value:o.color,hasBorder:o.options.hasBorder,label:o.label})}),this.items.add(s)}),this.setTemplate({tag:"div",children:this.items,attributes:{class:["ck","ck-color-grid"],style:i}}),this.on("change:selectedColor",(o,s,a)=>{for(const l of this.items)l.isOn=l.color===a})}focus(){this.items.length&&this.items.first.focus()}focusLast(){this.items.length&&this.items.last.focus()}render(){super.render();for(const e of this.items)this.focusTracker.add(e.element);this.items.on("add",(e,t)=>{this.focusTracker.add(t.element)}),this.items.on("remove",(e,t)=>{this.focusTracker.remove(t.element)}),this.keystrokes.listenTo(this.element),MM({keystrokeHandler:this.keystrokes,focusTracker:this.focusTracker,gridItems:this.items,numberOfColumns:this.columns,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}}var ID={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};const LT=ot(ID);var FT={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function $T(n){var e,t=[],r=1,i;if(typeof n=="string")if(LT[n])t=LT[n].slice(),i="rgb";else if(n==="transparent")r=0,i="rgb",t=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(n)){var o=n.slice(1),s=o.length,a=s<=4;r=1,a?(t=[parseInt(o[0]+o[0],16),parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16)],s===4&&(r=parseInt(o[3]+o[3],16)/255)):(t=[parseInt(o[0]+o[1],16),parseInt(o[2]+o[3],16),parseInt(o[4]+o[5],16)],s===8&&(r=parseInt(o[6]+o[7],16)/255)),t[0]||(t[0]=0),t[1]||(t[1]=0),t[2]||(t[2]=0),i="rgb"}else if(e=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(n)){var l=e[1],c=l==="rgb",o=l.replace(/a$/,"");i=o;var s=o==="cmyk"?4:o==="gray"?1:3;t=e[2].trim().split(/\s*[,\/]\s*|\s+/).map(function(f,h){if(/%$/.test(f))return h===s?parseFloat(f)/100:o==="rgb"?parseFloat(f)*255/100:parseFloat(f);if(o[h]==="h"){if(/deg$/.test(f))return parseFloat(f);if(FT[f]!==void 0)return FT[f]}return parseFloat(f)}),l===o&&t.push(1),r=c||t[s]===void 0?1:t[s],t=t.slice(0,s)}else n.length>10&&/[0-9](?:\s|\/)/.test(n)&&(t=n.match(/([0-9]+)/g).map(function(u){return parseFloat(u)}),i=n.match(/([a-z])/ig).join("").toLowerCase());else isNaN(n)?Array.isArray(n)||n.length?(t=[n[0],n[1],n[2]],i="rgb",r=n.length===4?n[3]:1):n instanceof Object&&(n.r!=null||n.red!=null||n.R!=null?(i="rgb",t=[n.r||n.red||n.R||0,n.g||n.green||n.G||0,n.b||n.blue||n.B||0]):(i="hsl",t=[n.h||n.hue||n.H||0,n.s||n.saturation||n.S||0,n.l||n.lightness||n.L||n.b||n.brightness]),r=n.a||n.alpha||n.opacity||1,n.opacity!=null&&(r/=100)):(i="rgb",t=[n>>>16,(n&65280)>>>8,n&255]);return{space:i,values:t,alpha:r}}const Ru=ID,OD={};for(const n of Object.keys(Ru))OD[Ru[n]]=n;const _e={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};var RD=_e;for(const n of Object.keys(_e)){if(!("channels"in _e[n]))throw new Error("missing channels property: "+n);if(!("labels"in _e[n]))throw new Error("missing channel labels property: "+n);if(_e[n].labels.length!==_e[n].channels)throw new Error("channel and label counts mismatch: "+n);const{channels:e,labels:t}=_e[n];delete _e[n].channels,delete _e[n].labels,Object.defineProperty(_e[n],"channels",{value:e}),Object.defineProperty(_e[n],"labels",{value:t})}_e.rgb.hsl=function(n){const e=n[0]/255,t=n[1]/255,r=n[2]/255,i=Math.min(e,t,r),o=Math.max(e,t,r),s=o-i;let a,l;o===i?a=0:e===o?a=(t-r)/s:t===o?a=2+(r-e)/s:r===o&&(a=4+(e-t)/s),a=Math.min(a*60,360),a<0&&(a+=360);const c=(i+o)/2;return o===i?l=0:c<=.5?l=s/(o+i):l=s/(2-o-i),[a,l*100,c*100]};_e.rgb.hsv=function(n){let e,t,r,i,o;const s=n[0]/255,a=n[1]/255,l=n[2]/255,c=Math.max(s,a,l),u=c-Math.min(s,a,l),d=function(f){return(c-f)/6/u+1/2};return u===0?(i=0,o=0):(o=u/c,e=d(s),t=d(a),r=d(l),s===c?i=r-t:a===c?i=1/3+e-r:l===c&&(i=2/3+t-e),i<0?i+=1:i>1&&(i-=1)),[i*360,o*100,c*100]};_e.rgb.hwb=function(n){const e=n[0],t=n[1];let r=n[2];const i=_e.rgb.hsl(n)[0],o=1/255*Math.min(e,Math.min(t,r));return r=1-1/255*Math.max(e,Math.max(t,r)),[i,o*100,r*100]};_e.rgb.cmyk=function(n){const e=n[0]/255,t=n[1]/255,r=n[2]/255,i=Math.min(1-e,1-t,1-r),o=(1-e-i)/(1-i)||0,s=(1-t-i)/(1-i)||0,a=(1-r-i)/(1-i)||0;return[o*100,s*100,a*100,i*100]};function eme(n,e){return(n[0]-e[0])**2+(n[1]-e[1])**2+(n[2]-e[2])**2}_e.rgb.keyword=function(n){const e=OD[n];if(e)return e;let t=1/0,r;for(const i of Object.keys(Ru)){const o=Ru[i],s=eme(n,o);s<t&&(t=s,r=i)}return r};_e.keyword.rgb=function(n){return Ru[n]};_e.rgb.xyz=function(n){let e=n[0]/255,t=n[1]/255,r=n[2]/255;e=e>.04045?((e+.055)/1.055)**2.4:e/12.92,t=t>.04045?((t+.055)/1.055)**2.4:t/12.92,r=r>.04045?((r+.055)/1.055)**2.4:r/12.92;const i=e*.4124+t*.3576+r*.1805,o=e*.2126+t*.7152+r*.0722,s=e*.0193+t*.1192+r*.9505;return[i*100,o*100,s*100]};_e.rgb.lab=function(n){const e=_e.rgb.xyz(n);let t=e[0],r=e[1],i=e[2];t/=95.047,r/=100,i/=108.883,t=t>.008856?t**(1/3):7.787*t+16/116,r=r>.008856?r**(1/3):7.787*r+16/116,i=i>.008856?i**(1/3):7.787*i+16/116;const o=116*r-16,s=500*(t-r),a=200*(r-i);return[o,s,a]};_e.hsl.rgb=function(n){const e=n[0]/360,t=n[1]/100,r=n[2]/100;let i,o,s;if(t===0)return s=r*255,[s,s,s];r<.5?i=r*(1+t):i=r+t-r*t;const a=2*r-i,l=[0,0,0];for(let c=0;c<3;c++)o=e+1/3*-(c-1),o<0&&o++,o>1&&o--,6*o<1?s=a+(i-a)*6*o:2*o<1?s=i:3*o<2?s=a+(i-a)*(2/3-o)*6:s=a,l[c]=s*255;return l};_e.hsl.hsv=function(n){const e=n[0];let t=n[1]/100,r=n[2]/100,i=t;const o=Math.max(r,.01);r*=2,t*=r<=1?r:2-r,i*=o<=1?o:2-o;const s=(r+t)/2,a=r===0?2*i/(o+i):2*t/(r+t);return[e,a*100,s*100]};_e.hsv.rgb=function(n){const e=n[0]/60,t=n[1]/100;let r=n[2]/100;const i=Math.floor(e)%6,o=e-Math.floor(e),s=255*r*(1-t),a=255*r*(1-t*o),l=255*r*(1-t*(1-o));switch(r*=255,i){case 0:return[r,l,s];case 1:return[a,r,s];case 2:return[s,r,l];case 3:return[s,a,r];case 4:return[l,s,r];case 5:return[r,s,a]}};_e.hsv.hsl=function(n){const e=n[0],t=n[1]/100,r=n[2]/100,i=Math.max(r,.01);let o,s;s=(2-t)*r;const a=(2-t)*i;return o=t*i,o/=a<=1?a:2-a,o=o||0,s/=2,[e,o*100,s*100]};_e.hwb.rgb=function(n){const e=n[0]/360;let t=n[1]/100,r=n[2]/100;const i=t+r;let o;i>1&&(t/=i,r/=i);const s=Math.floor(6*e),a=1-r;o=6*e-s,s&1&&(o=1-o);const l=t+o*(a-t);let c,u,d;switch(s){default:case 6:case 0:c=a,u=l,d=t;break;case 1:c=l,u=a,d=t;break;case 2:c=t,u=a,d=l;break;case 3:c=t,u=l,d=a;break;case 4:c=l,u=t,d=a;break;case 5:c=a,u=t,d=l;break}return[c*255,u*255,d*255]};_e.cmyk.rgb=function(n){const e=n[0]/100,t=n[1]/100,r=n[2]/100,i=n[3]/100,o=1-Math.min(1,e*(1-i)+i),s=1-Math.min(1,t*(1-i)+i),a=1-Math.min(1,r*(1-i)+i);return[o*255,s*255,a*255]};_e.xyz.rgb=function(n){const e=n[0]/100,t=n[1]/100,r=n[2]/100;let i,o,s;return i=e*3.2406+t*-1.5372+r*-.4986,o=e*-.9689+t*1.8758+r*.0415,s=e*.0557+t*-.204+r*1.057,i=i>.0031308?1.055*i**(1/2.4)-.055:i*12.92,o=o>.0031308?1.055*o**(1/2.4)-.055:o*12.92,s=s>.0031308?1.055*s**(1/2.4)-.055:s*12.92,i=Math.min(Math.max(0,i),1),o=Math.min(Math.max(0,o),1),s=Math.min(Math.max(0,s),1),[i*255,o*255,s*255]};_e.xyz.lab=function(n){let e=n[0],t=n[1],r=n[2];e/=95.047,t/=100,r/=108.883,e=e>.008856?e**(1/3):7.787*e+16/116,t=t>.008856?t**(1/3):7.787*t+16/116,r=r>.008856?r**(1/3):7.787*r+16/116;const i=116*t-16,o=500*(e-t),s=200*(t-r);return[i,o,s]};_e.lab.xyz=function(n){const e=n[0],t=n[1],r=n[2];let i,o,s;o=(e+16)/116,i=t/500+o,s=o-r/200;const a=o**3,l=i**3,c=s**3;return o=a>.008856?a:(o-16/116)/7.787,i=l>.008856?l:(i-16/116)/7.787,s=c>.008856?c:(s-16/116)/7.787,i*=95.047,o*=100,s*=108.883,[i,o,s]};_e.lab.lch=function(n){const e=n[0],t=n[1],r=n[2];let i;i=Math.atan2(r,t)*360/2/Math.PI,i<0&&(i+=360);const s=Math.sqrt(t*t+r*r);return[e,s,i]};_e.lch.lab=function(n){const e=n[0],t=n[1],i=n[2]/360*2*Math.PI,o=t*Math.cos(i),s=t*Math.sin(i);return[e,o,s]};_e.rgb.ansi16=function(n,e=null){const[t,r,i]=n;let o=e===null?_e.rgb.hsv(n)[2]:e;if(o=Math.round(o/50),o===0)return 30;let s=30+(Math.round(i/255)<<2|Math.round(r/255)<<1|Math.round(t/255));return o===2&&(s+=60),s};_e.hsv.ansi16=function(n){return _e.rgb.ansi16(_e.hsv.rgb(n),n[2])};_e.rgb.ansi256=function(n){const e=n[0],t=n[1],r=n[2];return e===t&&t===r?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(t/255*5)+Math.round(r/255*5)};_e.ansi16.rgb=function(n){let e=n%10;if(e===0||e===7)return n>50&&(e+=3.5),e=e/10.5*255,[e,e,e];const t=(~~(n>50)+1)*.5,r=(e&1)*t*255,i=(e>>1&1)*t*255,o=(e>>2&1)*t*255;return[r,i,o]};_e.ansi256.rgb=function(n){if(n>=232){const o=(n-232)*10+8;return[o,o,o]}n-=16;let e;const t=Math.floor(n/36)/5*255,r=Math.floor((e=n%36)/6)/5*255,i=e%6/5*255;return[t,r,i]};_e.rgb.hex=function(n){const t=(((Math.round(n[0])&255)<<16)+((Math.round(n[1])&255)<<8)+(Math.round(n[2])&255)).toString(16).toUpperCase();return"000000".substring(t.length)+t};_e.hex.rgb=function(n){const e=n.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];let t=e[0];e[0].length===3&&(t=t.split("").map(a=>a+a).join(""));const r=parseInt(t,16),i=r>>16&255,o=r>>8&255,s=r&255;return[i,o,s]};_e.rgb.hcg=function(n){const e=n[0]/255,t=n[1]/255,r=n[2]/255,i=Math.max(Math.max(e,t),r),o=Math.min(Math.min(e,t),r),s=i-o;let a,l;return s<1?a=o/(1-s):a=0,s<=0?l=0:i===e?l=(t-r)/s%6:i===t?l=2+(r-e)/s:l=4+(e-t)/s,l/=6,l%=1,[l*360,s*100,a*100]};_e.hsl.hcg=function(n){const e=n[1]/100,t=n[2]/100,r=t<.5?2*e*t:2*e*(1-t);let i=0;return r<1&&(i=(t-.5*r)/(1-r)),[n[0],r*100,i*100]};_e.hsv.hcg=function(n){const e=n[1]/100,t=n[2]/100,r=e*t;let i=0;return r<1&&(i=(t-r)/(1-r)),[n[0],r*100,i*100]};_e.hcg.rgb=function(n){const e=n[0]/360,t=n[1]/100,r=n[2]/100;if(t===0)return[r*255,r*255,r*255];const i=[0,0,0],o=e%1*6,s=o%1,a=1-s;let l=0;switch(Math.floor(o)){case 0:i[0]=1,i[1]=s,i[2]=0;break;case 1:i[0]=a,i[1]=1,i[2]=0;break;case 2:i[0]=0,i[1]=1,i[2]=s;break;case 3:i[0]=0,i[1]=a,i[2]=1;break;case 4:i[0]=s,i[1]=0,i[2]=1;break;default:i[0]=1,i[1]=0,i[2]=a}return l=(1-t)*r,[(t*i[0]+l)*255,(t*i[1]+l)*255,(t*i[2]+l)*255]};_e.hcg.hsv=function(n){const e=n[1]/100,t=n[2]/100,r=e+t*(1-e);let i=0;return r>0&&(i=e/r),[n[0],i*100,r*100]};_e.hcg.hsl=function(n){const e=n[1]/100,r=n[2]/100*(1-e)+.5*e;let i=0;return r>0&&r<.5?i=e/(2*r):r>=.5&&r<1&&(i=e/(2*(1-r))),[n[0],i*100,r*100]};_e.hcg.hwb=function(n){const e=n[1]/100,t=n[2]/100,r=e+t*(1-e);return[n[0],(r-e)*100,(1-r)*100]};_e.hwb.hcg=function(n){const e=n[1]/100,r=1-n[2]/100,i=r-e;let o=0;return i<1&&(o=(r-i)/(1-i)),[n[0],i*100,o*100]};_e.apple.rgb=function(n){return[n[0]/65535*255,n[1]/65535*255,n[2]/65535*255]};_e.rgb.apple=function(n){return[n[0]/255*65535,n[1]/255*65535,n[2]/255*65535]};_e.gray.rgb=function(n){return[n[0]/100*255,n[0]/100*255,n[0]/100*255]};_e.gray.hsl=function(n){return[0,0,n[0]]};_e.gray.hsv=_e.gray.hsl;_e.gray.hwb=function(n){return[0,100,n[0]]};_e.gray.cmyk=function(n){return[0,0,0,n[0]]};_e.gray.lab=function(n){return[n[0],0,0]};_e.gray.hex=function(n){const e=Math.round(n[0]/100*255)&255,r=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".substring(r.length)+r};_e.rgb.gray=function(n){return[(n[0]+n[1]+n[2])/3/255*100]};const im=RD;function tme(){const n={},e=Object.keys(im);for(let t=e.length,r=0;r<t;r++)n[e[r]]={distance:-1,parent:null};return n}function nme(n){const e=tme(),t=[n];for(e[n].distance=0;t.length;){const r=t.pop(),i=Object.keys(im[r]);for(let o=i.length,s=0;s<o;s++){const a=i[s],l=e[a];l.distance===-1&&(l.distance=e[r].distance+1,l.parent=r,t.unshift(a))}}return e}function rme(n,e){return function(t){return e(n(t))}}function ime(n,e){const t=[e[n].parent,n];let r=im[e[n].parent][n],i=e[n].parent;for(;e[i].parent;)t.unshift(e[i].parent),r=rme(im[e[i].parent][i],r),i=e[i].parent;return r.conversion=t,r}var ome=function(n){const e=nme(n),t={},r=Object.keys(e);for(let i=r.length,o=0;o<i;o++){const s=r[o];e[s].parent!==null&&(t[s]=ime(s,e))}return t};const xy=RD,sme=ome,ca={},ame=Object.keys(xy);function lme(n){const e=function(...t){const r=t[0];return r==null?r:(r.length>1&&(t=r),n(t))};return"conversion"in n&&(e.conversion=n.conversion),e}function cme(n){const e=function(...t){const r=t[0];if(r==null)return r;r.length>1&&(t=r);const i=n(t);if(typeof i=="object")for(let o=i.length,s=0;s<o;s++)i[s]=Math.round(i[s]);return i};return"conversion"in n&&(e.conversion=n.conversion),e}ame.forEach(n=>{ca[n]={},Object.defineProperty(ca[n],"channels",{value:xy[n].channels}),Object.defineProperty(ca[n],"labels",{value:xy[n].labels});const e=sme(n);Object.keys(e).forEach(r=>{const i=e[r];ca[n][r]=cme(i),ca[n][r].raw=lme(i)})});var MD=ca;const ume=ot(MD),DD=TF({__proto__:null,default:ume},[MD]);/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function BD(n,e){if(!n)return"";const t=ND(n);if(!t)return"";if(t.space===e)return n;if(!mme(t))return"";const i=DD[t.space][e];if(!i)return"";const o=i(t.space==="hex"?t.hexValue:t.values);return hme(o,e)}function dme(n){if(!n)return"";const e=ND(n);return e?e.space==="hex"?e.hexValue:BD(n,"hex"):"#000"}function fme(n,e){customElements.get(n)===void 0&&customElements.define(n,e)}function hme(n,e){switch(e){case"hex":return`#${n}`;case"rgb":return`rgb( ${n[0]}, ${n[1]}, ${n[2]} )`;case"hsl":return`hsl( ${n[0]}, ${n[1]}%, ${n[2]}% )`;case"hwb":return`hwb( ${n[0]}, ${n[1]}, ${n[2]} )`;case"lab":return`lab( ${n[0]}% ${n[1]} ${n[2]} )`;case"lch":return`lch( ${n[0]}% ${n[1]} ${n[2]} )`;default:return""}}function ND(n){if(n.startsWith("#")){const t=$T(n);return{space:"hex",values:t.values,hexValue:n,alpha:t.alpha}}const e=$T(n);return e.space?e:null}function mme(n){return Object.keys(DD).includes(n.space)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class El extends be{constructor(e,t){super(e);const r=`ck-labeled-field-view-${Br()}`,i=`ck-labeled-field-view-status-${Br()}`;this.fieldView=t(this,r,i),this.set("label",void 0),this.set("isEnabled",!0),this.set("isEmpty",!0),this.set("isFocused",!1),this.set("errorText",null),this.set("infoText",null),this.set("class",void 0),this.set("placeholder",void 0),this.labelView=this._createLabelView(r),this.statusView=this._createStatusView(i),this.fieldWrapperChildren=this.createCollection([this.fieldView,this.labelView]),this.bind("_statusText").to(this,"errorText",this,"infoText",(s,a)=>s||a);const o=this.bindTemplate;this.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view",o.to("class"),o.if("isEnabled","ck-disabled",s=>!s),o.if("isEmpty","ck-labeled-field-view_empty"),o.if("isFocused","ck-labeled-field-view_focused"),o.if("placeholder","ck-labeled-field-view_placeholder"),o.if("errorText","ck-error")]},children:[{tag:"div",attributes:{class:["ck","ck-labeled-field-view__input-wrapper"]},children:this.fieldWrapperChildren},this.statusView]})}_createLabelView(e){const t=new ld(this.locale);return t.for=e,t.bind("text").to(this,"label"),t}_createStatusView(e){const t=new be(this.locale),r=this.bindTemplate;return t.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view__status",r.if("errorText","ck-labeled-field-view__status_error"),r.if("_statusText","ck-hidden",i=>!i)],id:e,role:r.if("errorText","alert")},children:[{text:r.to("_statusText")}]}),t}focus(e){this.fieldView.focus(e)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class gme extends be{constructor(e){super(e),this.set("value",void 0),this.set("id",void 0),this.set("placeholder",void 0),this.set("tabIndex",void 0),this.set("isReadOnly",!1),this.set("hasError",!1),this.set("ariaDescribedById",void 0),this.set("ariaLabel",void 0),this.focusTracker=new Ut,this.bind("isFocused").to(this.focusTracker),this.set("isEmpty",!0);const t=this.bindTemplate;this.setTemplate({tag:"input",attributes:{class:["ck","ck-input",t.if("isFocused","ck-input_focused"),t.if("isEmpty","ck-input-text_empty"),t.if("hasError","ck-error")],id:t.to("id"),placeholder:t.to("placeholder"),tabindex:t.to("tabIndex"),readonly:t.to("isReadOnly"),"aria-invalid":t.if("hasError",!0),"aria-describedby":t.to("ariaDescribedById"),"aria-label":t.to("ariaLabel")},on:{input:t.to((...r)=>{this.fire("input",...r),this._updateIsEmpty()}),change:t.to(this._updateIsEmpty.bind(this))}})}render(){super.render(),this.focusTracker.add(this.element),this._setDomElementValue(this.value),this._updateIsEmpty(),this.on("change:value",(e,t,r)=>{this._setDomElementValue(r),this._updateIsEmpty()})}destroy(){super.destroy(),this.focusTracker.destroy()}select(){this.element.select()}focus(){this.element.focus()}reset(){this.value=this.element.value="",this._updateIsEmpty()}_updateIsEmpty(){this.isEmpty=pme(this.element)}_setDomElementValue(e){this.element.value=!e&&e!==0?"":e}}function pme(n){return!n.value}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class LD extends gme{constructor(e){super(e),this.set("inputMode","text");const t=this.bindTemplate;this.extendTemplate({attributes:{inputmode:t.to("inputMode")}})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class vme extends LD{constructor(e){super(e),this.extendTemplate({attributes:{type:"text",class:["ck-input-text"]}})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class bme extends LD{constructor(e,{min:t,max:r,step:i}={}){super(e);const o=this.bindTemplate;this.set("min",t),this.set("max",r),this.set("step",i),this.extendTemplate({attributes:{type:"number",class:["ck-input-number"],min:o.to("min"),max:o.to("max"),step:o.to("step")}})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class yme extends be{constructor(e){super(e);const t=this.bindTemplate;this.set("isVisible",!1),this.set("position","se"),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-dropdown__panel",t.to("position",r=>`ck-dropdown__panel_${r}`),t.if("isVisible","ck-dropdown__panel-visible")],tabindex:"-1"},children:this.children,on:{selectstart:t.to(r=>{r.target.tagName.toLocaleLowerCase()!=="input"&&r.preventDefault()})}})}focus(){if(this.children.length){const e=this.children.first;typeof e.focus=="function"?e.focus():Ye("ui-dropdown-panel-focus-child-missing-focus",{childView:this.children.first,dropdownPanel:this})}}focusLast(){if(this.children.length){const e=this.children.last;typeof e.focusLast=="function"?e.focusLast():e.focus()}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class el extends be{constructor(e,t,r){super(e);const i=this.bindTemplate;this.buttonView=t,this.panelView=r,this.set("isOpen",!1),this.set("isEnabled",!0),this.set("class",void 0),this.set("id",void 0),this.set("panelPosition","auto"),this.panelView.bind("isVisible").to(this,"isOpen"),this.keystrokes=new mn,this.focusTracker=new Ut,this.setTemplate({tag:"div",attributes:{class:["ck","ck-dropdown",i.to("class"),i.if("isEnabled","ck-disabled",o=>!o)],id:i.to("id"),"aria-describedby":i.to("ariaDescribedById")},children:[t,r]}),t.extendTemplate({attributes:{class:["ck-dropdown__button"],"data-cke-tooltip-disabled":i.to("isOpen")}})}render(){super.render(),this.focusTracker.add(this.buttonView.element),this.focusTracker.add(this.panelView.element),this.listenTo(this.buttonView,"open",()=>{this.isOpen=!this.isOpen}),this.on("change:isOpen",(t,r,i)=>{if(i)if(this.panelPosition==="auto"){const o=el._getOptimalPosition({element:this.panelView.element,target:this.buttonView.element,fitInViewport:!0,positions:this._panelPositions});this.panelView.position=o?o.name:this._panelPositions[0].name}else this.panelView.position=this.panelPosition}),this.keystrokes.listenTo(this.element);const e=(t,r)=>{this.isOpen&&(this.isOpen=!1,r())};this.keystrokes.set("arrowdown",(t,r)=>{this.buttonView.isEnabled&&!this.isOpen&&(this.isOpen=!0,r())}),this.keystrokes.set("arrowright",(t,r)=>{this.isOpen&&r()}),this.keystrokes.set("arrowleft",e),this.keystrokes.set("esc",e)}focus(){this.buttonView.focus()}get _panelPositions(){const{south:e,north:t,southEast:r,southWest:i,northEast:o,northWest:s,southMiddleEast:a,southMiddleWest:l,northMiddleEast:c,northMiddleWest:u}=el.defaultPanelPositions;return this.locale.uiLanguageDirection!=="rtl"?[r,i,a,l,e,o,s,c,u,t]:[i,r,l,a,e,s,o,u,c,t]}}el.defaultPanelPositions={south:(n,e)=>({top:n.bottom,left:n.left-(e.width-n.width)/2,name:"s"}),southEast:n=>({top:n.bottom,left:n.left,name:"se"}),southWest:(n,e)=>({top:n.bottom,left:n.left-e.width+n.width,name:"sw"}),southMiddleEast:(n,e)=>({top:n.bottom,left:n.left-(e.width-n.width)/4,name:"sme"}),southMiddleWest:(n,e)=>({top:n.bottom,left:n.left-(e.width-n.width)*3/4,name:"smw"}),north:(n,e)=>({top:n.top-e.height,left:n.left-(e.width-n.width)/2,name:"n"}),northEast:(n,e)=>({top:n.top-e.height,left:n.left,name:"ne"}),northWest:(n,e)=>({top:n.top-e.height,left:n.left-e.width+n.width,name:"nw"}),northMiddleEast:(n,e)=>({top:n.top-e.height,left:n.left-(e.width-n.width)/4,name:"nme"}),northMiddleWest:(n,e)=>({top:n.top-e.height,left:n.left-(e.width-n.width)*3/4,name:"nmw"})};el._getOptimalPosition=yg;/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class FD extends Ne{constructor(e){super(e),this.arrowView=this._createArrowView(),this.extendTemplate({attributes:{"aria-haspopup":!0,"aria-expanded":this.bindTemplate.to("isOn",t=>String(t))}}),this.delegate("execute").to(this,"open")}render(){super.render(),this.children.add(this.arrowView)}_createArrowView(){const e=new li;return e.content=Ag,e.extendTemplate({attributes:{class:"ck-dropdown__arrow"}}),e}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ir extends pt(){constructor(e){if(super(),this.focusables=e.focusables,this.focusTracker=e.focusTracker,this.keystrokeHandler=e.keystrokeHandler,this.actions=e.actions,e.actions&&e.keystrokeHandler)for(const t in e.actions){let r=e.actions[t];typeof r=="string"&&(r=[r]);for(const i of r)e.keystrokeHandler.set(i,(o,s)=>{this[t](),s()})}this.on("forwardCycle",()=>this.focusFirst(),{priority:"low"}),this.on("backwardCycle",()=>this.focusLast(),{priority:"low"})}get first(){return this.focusables.find(ev)||null}get last(){return this.focusables.filter(ev).slice(-1)[0]||null}get next(){return this._getDomFocusableItem(1)}get previous(){return this._getDomFocusableItem(-1)}get current(){let e=null;return this.focusTracker.focusedElement===null?null:(this.focusables.find((t,r)=>{const i=t.element===this.focusTracker.focusedElement;return i&&(e=r),i}),e)}focusFirst(){this._focus(this.first,1)}focusLast(){this._focus(this.last,-1)}focusNext(){const e=this.next;if(e&&this.focusables.getIndex(e)===this.current){this.fire("forwardCycle");return}e===this.first?this.fire("forwardCycle"):this._focus(e,1)}focusPrevious(){const e=this.previous;if(e&&this.focusables.getIndex(e)===this.current){this.fire("backwardCycle");return}e===this.last?this.fire("backwardCycle"):this._focus(e,-1)}_focus(e,t){e&&this.focusTracker.focusedElement!==e.element&&e.focus(t)}_getDomFocusableItem(e){const t=this.focusables.length;if(!t)return null;const r=this.current;if(r===null)return this[e===1?"first":"last"];let i=this.focusables.get(r),o=(r+t+e)%t;do{const s=this.focusables.get(o);if(ev(s)){i=s;break}o=(o+t+e)%t}while(o!==r);return i}}function ev(n){return cd(n)&&Cs(n.element)}function cd(n){return"focus"in n&&typeof n.focus=="function"}function wme(n){return cd(n)&&"focusCycler"in n&&n.focusCycler instanceof ir}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class F0 extends be{constructor(e){super(e),this.setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__separator"]}})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class _me extends be{constructor(e){super(e),this.setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__line-break"]}})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Cme(n){return n.bindTemplate.to(e=>{e.target===n.element&&e.preventDefault()})}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function $D(n){if(Array.isArray(n))return{items:n,removeItems:[]};const e={items:[],removeItems:[]};return n?{...e,...n}:e}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Sme={alignLeft:Ee.alignLeft,bold:Ee.bold,importExport:Ee.importExport,paragraph:Ee.paragraph,plus:Ee.plus,text:Ee.text,threeVerticalDots:Ee.threeVerticalDots,pilcrow:Ee.pilcrow,dragIndicator:Ee.dragIndicator};class $0 extends be{constructor(e,t){super(e);const r=this.bindTemplate,i=this.t;this.options=t||{},this.set("ariaLabel",i("Editor toolbar")),this.set("maxWidth","auto"),this.items=this.createCollection(),this.focusTracker=new Ut,this.keystrokes=new mn,this.set("class",void 0),this.set("isCompact",!1),this.itemsView=new xme(e),this.children=this.createCollection(),this.children.add(this.itemsView),this.focusables=this.createCollection();const o=e.uiLanguageDirection==="rtl";this._focusCycler=new ir({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:[o?"arrowright":"arrowleft","arrowup"],focusNext:[o?"arrowleft":"arrowright","arrowdown"]}});const s=["ck","ck-toolbar",r.to("class"),r.if("isCompact","ck-toolbar_compact")];this.options.shouldGroupWhenFull&&this.options.isFloating&&s.push("ck-toolbar_floating"),this.setTemplate({tag:"div",attributes:{class:s,role:"toolbar","aria-label":r.to("ariaLabel"),style:{maxWidth:r.to("maxWidth")},tabindex:-1},children:this.children,on:{mousedown:Cme(this)}}),this._behavior=this.options.shouldGroupWhenFull?new Tme(this):new Ame(this)}render(){super.render(),this.focusTracker.add(this.element);for(const e of this.items)this.focusTracker.add(e.element);this.items.on("add",(e,t)=>{this.focusTracker.add(t.element)}),this.items.on("remove",(e,t)=>{this.focusTracker.remove(t.element)}),this.keystrokes.listenTo(this.element),this._behavior.render(this)}destroy(){return this._behavior.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy(),super.destroy()}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}fillFromConfig(e,t,r){this.items.addMany(this._buildItemsFromConfig(e,t,r))}_buildItemsFromConfig(e,t,r){const i=$D(e),o=r||i.removeItems;return this._cleanItemsConfiguration(i.items,t,o).map(a=>ri(a)?this._createNestedToolbarDropdown(a,t,o):a==="|"?new F0:a==="-"?new _me:t.create(a)).filter(a=>!!a)}_cleanItemsConfiguration(e,t,r){const i=e.filter((o,s,a)=>o==="|"?!0:r.indexOf(o)!==-1?!1:o==="-"?this.options.shouldGroupWhenFull?(Ye("toolbarview-line-break-ignored-when-grouping-items",a),!1):!0:!ri(o)&&!t.has(o)?(Ye("toolbarview-item-unavailable",{item:o}),!1):!0);return this._cleanSeparatorsAndLineBreaks(i)}_cleanSeparatorsAndLineBreaks(e){const t=s=>s!=="-"&&s!=="|",r=e.length,i=e.findIndex(t);if(i===-1)return[];const o=r-e.slice().reverse().findIndex(t);return e.slice(i,o).filter((s,a,l)=>t(s)?!0:!(a>0&&l[a-1]===s))}_createNestedToolbarDropdown(e,t,r){let{label:i,icon:o,items:s,tooltip:a=!0,withText:l=!1}=e;if(s=this._cleanItemsConfiguration(s,t,r),!s.length)return null;const c=this.locale,u=Ln(c);return i||Ye("toolbarview-nested-toolbar-dropdown-missing-label",e),u.class="ck-toolbar__nested-toolbar-dropdown",u.buttonView.set({label:i,tooltip:a,withText:!!l}),o!==!1?u.buttonView.icon=Sme[o]||o||Ee.threeVerticalDots:u.buttonView.withText=!0,dd(u,()=>u.toolbarView._buildItemsFromConfig(s,t,r)),u}}class xme extends be{constructor(e){super(e),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-toolbar__items"]},children:this.children})}}class Ame{constructor(e){const t=e.bindTemplate;e.set("isVertical",!1),e.itemsView.children.bindTo(e.items).using(r=>r),e.focusables.bindTo(e.items).using(r=>cd(r)?r:null),e.extendTemplate({attributes:{class:[t.if("isVertical","ck-toolbar_vertical")]}})}render(){}destroy(){}}class Tme{constructor(e){this.resizeObserver=null,this.cachedPadding=null,this.shouldUpdateGroupingOnNextResize=!1,this.view=e,this.viewChildren=e.children,this.viewFocusables=e.focusables,this.viewItemsView=e.itemsView,this.viewFocusTracker=e.focusTracker,this.viewLocale=e.locale,this.ungroupedItems=e.createCollection(),this.groupedItems=e.createCollection(),this.groupedItemsDropdown=this._createGroupedItemsDropdown(),e.itemsView.children.bindTo(this.ungroupedItems).using(t=>t),this.ungroupedItems.on("change",this._updateFocusCyclableItems.bind(this)),e.children.on("change",this._updateFocusCyclableItems.bind(this)),e.items.on("change",(t,r)=>{const i=r.index,o=Array.from(r.added);for(const s of r.removed)i>=this.ungroupedItems.length?this.groupedItems.remove(s):this.ungroupedItems.remove(s);for(let s=i;s<i+o.length;s++){const a=o[s-i];s>this.ungroupedItems.length?this.groupedItems.add(a,s-this.ungroupedItems.length):this.ungroupedItems.add(a,s)}this._updateGrouping()}),e.extendTemplate({attributes:{class:["ck-toolbar_grouping"]}})}render(e){this.viewElement=e.element,this._enableGroupingOnResize(),this._enableGroupingOnMaxWidthChange(e)}destroy(){this.groupedItemsDropdown.destroy(),this.resizeObserver.destroy()}_updateGrouping(){if(!this.viewElement.ownerDocument.body.contains(this.viewElement))return;if(!Cs(this.viewElement)){this.shouldUpdateGroupingOnNextResize=!0;return}const e=this.groupedItems.length;let t;for(;this._areItemsOverflowing;)this._groupLastItem(),t=!0;if(!t&&this.groupedItems.length){for(;this.groupedItems.length&&!this._areItemsOverflowing;)this._ungroupFirstItem();this._areItemsOverflowing&&this._groupLastItem()}this.groupedItems.length!==e&&this.view.fire("groupedItemsUpdate")}get _areItemsOverflowing(){if(!this.ungroupedItems.length)return!1;const e=this.viewElement,t=this.viewLocale.uiLanguageDirection,r=new De(e.lastChild),i=new De(e);if(!this.cachedPadding){const o=he.window.getComputedStyle(e),s=t==="ltr"?"paddingRight":"paddingLeft";this.cachedPadding=Number.parseInt(o[s])}return t==="ltr"?r.right>i.right-this.cachedPadding:r.left<i.left+this.cachedPadding}_enableGroupingOnResize(){let e;this.resizeObserver=new nd(this.viewElement,t=>{(!e||e!==t.contentRect.width||this.shouldUpdateGroupingOnNextResize)&&(this.shouldUpdateGroupingOnNextResize=!1,this._updateGrouping(),e=t.contentRect.width)}),this._updateGrouping()}_enableGroupingOnMaxWidthChange(e){e.on("change:maxWidth",()=>{this._updateGrouping()})}_groupLastItem(){this.groupedItems.length||(this.viewChildren.add(new F0),this.viewChildren.add(this.groupedItemsDropdown),this.viewFocusTracker.add(this.groupedItemsDropdown.element)),this.groupedItems.add(this.ungroupedItems.remove(this.ungroupedItems.last),0)}_ungroupFirstItem(){this.ungroupedItems.add(this.groupedItems.remove(this.groupedItems.first)),this.groupedItems.length||(this.viewChildren.remove(this.groupedItemsDropdown),this.viewChildren.remove(this.viewChildren.last),this.viewFocusTracker.remove(this.groupedItemsDropdown.element))}_createGroupedItemsDropdown(){const e=this.viewLocale,t=e.t,r=Ln(e);return r.class="ck-toolbar__grouped-dropdown",r.panelPosition=e.uiLanguageDirection==="ltr"?"sw":"se",dd(r,this.groupedItems),r.buttonView.set({label:t("Show more items"),tooltip:!0,tooltipPosition:e.uiLanguageDirection==="rtl"?"se":"sw",icon:Ee.threeVerticalDots}),r}_updateFocusCyclableItems(){this.viewFocusables.clear(),this.ungroupedItems.map(e=>{cd(e)&&this.viewFocusables.add(e)}),this.groupedItems.length&&this.viewFocusables.add(this.groupedItemsDropdown)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class tl extends be{constructor(e){super(e);const t=this.bindTemplate;this.set("isVisible",!0),this.children=this.createCollection(),this.setTemplate({tag:"li",attributes:{class:["ck","ck-list__item",t.if("isVisible","ck-hidden",r=>!r)],role:"presentation"},children:this.children})}focus(){this.children.first&&this.children.first.focus()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Tg extends be{constructor(e){super(e),this.setTemplate({tag:"li",attributes:{class:["ck","ck-list__separator"]}})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Bf extends be{constructor(e,t=new ld){super(e);const r=this.bindTemplate,i=new V0(e);this.set({label:"",isVisible:!0}),this.labelView=t,this.labelView.bind("text").to(this,"label"),this.children=this.createCollection(),this.children.addMany([this.labelView,i]),i.set({role:"group",ariaLabelledBy:t.id}),i.focusTracker.destroy(),i.keystrokes.destroy(),this.items=i.items,this.setTemplate({tag:"li",attributes:{role:"presentation",class:["ck","ck-list__group",r.if("isVisible","ck-hidden",o=>!o)]},children:this.children})}focus(){if(this.items){const e=this.items.find(t=>!(t instanceof Tg));e&&e.focus()}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class V0 extends be{constructor(e){super(e),this._listItemGroupToChangeListeners=new WeakMap;const t=this.bindTemplate;this.focusables=new rr,this.items=this.createCollection(),this.focusTracker=new Ut,this.keystrokes=new mn,this._focusCycler=new ir({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"arrowup",focusNext:"arrowdown"}}),this.set("ariaLabel",void 0),this.set("ariaLabelledBy",void 0),this.set("role",void 0),this.setTemplate({tag:"ul",attributes:{class:["ck","ck-reset","ck-list"],role:t.to("role"),"aria-label":t.to("ariaLabel"),"aria-labelledby":t.to("ariaLabelledBy")},children:this.items})}render(){super.render();for(const e of this.items)e instanceof Bf?this._registerFocusableItemsGroup(e):e instanceof tl&&this._registerFocusableListItem(e);this.items.on("change",(e,t)=>{for(const r of t.removed)r instanceof Bf?this._deregisterFocusableItemsGroup(r):r instanceof tl&&this._deregisterFocusableListItem(r);for(const r of Array.from(t.added).reverse())r instanceof Bf?this._registerFocusableItemsGroup(r,t.index):this._registerFocusableListItem(r,t.index)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}focusFirst(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}_registerFocusableListItem(e,t){this.focusTracker.add(e.element),this.focusables.add(e,t)}_deregisterFocusableListItem(e){this.focusTracker.remove(e.element),this.focusables.remove(e)}_getOnGroupItemsChangeCallback(e){return(t,r)=>{for(const i of r.removed)this._deregisterFocusableListItem(i);for(const i of Array.from(r.added).reverse())this._registerFocusableListItem(i,this.items.getIndex(e)+r.index)}}_registerFocusableItemsGroup(e,t){Array.from(e.items).forEach((i,o)=>{const s=typeof t<"u"?t+o:void 0;this._registerFocusableListItem(i,s)});const r=this._getOnGroupItemsChangeCallback(e);this._listItemGroupToChangeListeners.set(e,r),e.items.on("change",r)}_deregisterFocusableItemsGroup(e){for(const t of e.items)this._deregisterFocusableListItem(t);e.items.off("change",this._listItemGroupToChangeListeners.get(e)),this._listItemGroupToChangeListeners.delete(e)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ud extends be{constructor(e,t){super(e);const r=this.bindTemplate;this.set("class",void 0),this.set("labelStyle",void 0),this.set("icon",void 0),this.set("isEnabled",!0),this.set("isOn",!1),this.set("isToggleable",!1),this.set("isVisible",!0),this.set("keystroke",void 0),this.set("withKeystroke",!1),this.set("label",void 0),this.set("tabindex",-1),this.set("tooltip",!1),this.set("tooltipPosition","s"),this.set("type","button"),this.set("withText",!1),this.children=this.createCollection(),this.actionView=this._createActionView(t),this.arrowView=this._createArrowView(),this.keystrokes=new mn,this.focusTracker=new Ut,this.setTemplate({tag:"div",attributes:{class:["ck","ck-splitbutton",r.to("class"),r.if("isVisible","ck-hidden",i=>!i),this.arrowView.bindTemplate.if("isOn","ck-splitbutton_open")]},children:this.children})}render(){super.render(),this.children.add(this.actionView),this.children.add(this.arrowView),this.focusTracker.add(this.actionView.element),this.focusTracker.add(this.arrowView.element),this.keystrokes.listenTo(this.element),this.keystrokes.set("arrowright",(e,t)=>{this.focusTracker.focusedElement===this.actionView.element&&(this.arrowView.focus(),t())}),this.keystrokes.set("arrowleft",(e,t)=>{this.focusTracker.focusedElement===this.arrowView.element&&(this.actionView.focus(),t())})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this.actionView.focus()}_createActionView(e){const t=e||new Ne;return e||t.bind("icon","isEnabled","isOn","isToggleable","keystroke","label","tabindex","tooltip","tooltipPosition","type","withText").to(this),t.extendTemplate({attributes:{class:"ck-splitbutton__action"}}),t.delegate("execute").to(this),t}_createArrowView(){const e=new Ne,t=e.bindTemplate;return e.icon=Ag,e.extendTemplate({attributes:{class:["ck-splitbutton__arrow"],"data-cke-tooltip-disabled":t.to("isOn"),"aria-haspopup":!0,"aria-expanded":t.to("isOn",r=>String(r))}}),e.bind("isEnabled").to(this),e.bind("label").to(this),e.bind("tooltip").to(this),e.delegate("execute").to(this,"open"),e}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Ln(n,e=FD){const t=typeof e=="function"?new e(n):e,r=new yme(n),i=new el(n,t,r);return t.bind("isEnabled").to(i),t instanceof ud?t.arrowView.bind("isOn").to(i,"isOpen"):t.bind("isOn").to(i,"isOpen"),Eme(i),i}function dd(n,e,t={}){n.extendTemplate({attributes:{class:["ck-toolbar-dropdown"]}}),n.isOpen?VT(n,e,t):n.once("change:isOpen",()=>VT(n,e,t),{priority:"highest"}),t.enableActiveItemFocusOnDropdownOpen&&z0(n,()=>n.toolbarView.items.find(r=>r.isOn))}function VT(n,e,t){const r=n.locale,i=r.t,o=n.toolbarView=new $0(r),s=typeof e=="function"?e():e;o.ariaLabel=t.ariaLabel||i("Dropdown toolbar"),t.maxWidth&&(o.maxWidth=t.maxWidth),t.class&&(o.class=t.class),t.isCompact&&(o.isCompact=t.isCompact),t.isVertical&&(o.isVertical=!0),s instanceof rr?o.items.bindTo(s).using(a=>a):o.items.addMany(s),n.panelView.children.add(o),o.items.delegate("execute").to(n)}function fd(n,e,t={}){n.isOpen?zT(n,e,t):n.once("change:isOpen",()=>zT(n,e,t),{priority:"highest"}),z0(n,()=>n.listView.items.find(r=>r instanceof tl?r.children.first.isOn:!1))}function zT(n,e,t){const r=n.locale,i=n.listView=new V0(r),o=typeof e=="function"?e():e;i.ariaLabel=t.ariaLabel,i.role=t.role,VD(n,i.items,o,r),n.panelView.children.add(i),i.items.delegate("execute").to(n)}function z0(n,e){n.on("change:isOpen",()=>{if(!n.isOpen)return;const t=e();t&&(typeof t.focus=="function"?t.focus():Ye("ui-dropdown-focus-child-on-open-child-missing-focus",{view:t}))},{priority:ur.low-10})}function Eme(n){kme(n),Pme(n),Ime(n),Ome(n),Rme(n),Mme(n)}function kme(n){n.on("render",()=>{od({emitter:n,activator:()=>n.isOpen,callback:()=>{n.isOpen=!1},contextElements:()=>[n.element,...n.focusTracker._elements]})})}function Pme(n){n.on("execute",e=>{e.source instanceof xg||(n.isOpen=!1)})}function Ime(n){n.focusTracker.on("change:isFocused",(e,t,r)=>{n.isOpen&&!r&&(n.isOpen=!1)})}function Ome(n){n.keystrokes.set("arrowdown",(e,t)=>{n.isOpen&&(n.panelView.focus(),t())}),n.keystrokes.set("arrowup",(e,t)=>{n.isOpen&&(n.panelView.focusLast(),t())})}function Rme(n){n.on("change:isOpen",(e,t,r)=>{if(r)return;const i=n.panelView.element;i&&i.contains(he.document.activeElement)&&n.buttonView.focus()})}function Mme(n){n.on("change:isOpen",(e,t,r)=>{r&&n.panelView.focus()},{priority:"low"})}function VD(n,e,t,r){e.bindTo(t).using(i=>{if(i.type==="separator")return new Tg(r);if(i.type==="group"){const o=new Bf(r);return o.set({label:i.label}),VD(n,o.items,i.items,r),o.items.delegate("execute").to(n),o}else if(i.type==="button"||i.type==="switchbutton"){const o=new tl(r);let s;return i.type==="button"?(s=new Ne(r),s.bind("ariaChecked").to(s,"isOn")):s=new xg(r),s.bind(...Object.keys(i.model)).to(i.model),s.delegate("execute").to(o),o.children.add(s),o}return null})}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const hd=(n,e,t)=>{const r=new vme(n.locale);return r.set({id:e,ariaDescribedById:t}),r.bind("isReadOnly").to(n,"isEnabled",i=>!i),r.bind("hasError").to(n,"errorText",i=>!!i),r.on("input",()=>{n.errorText=null}),n.bind("isEmpty","isFocused","placeholder").to(r),r},Dme=(n,e,t)=>{const r=new bme(n.locale);return r.set({id:e,ariaDescribedById:t,inputMode:"numeric"}),r.bind("isReadOnly").to(n,"isEnabled",i=>!i),r.bind("hasError").to(n,"errorText",i=>!!i),r.on("input",()=>{n.errorText=null}),n.bind("isEmpty","isFocused","placeholder").to(r),r},Mu=(n,e=0,t=1)=>n>t?t:n<e?e:n,wn=(n,e=0,t=Math.pow(10,e))=>Math.round(t*n)/t,Bme=n=>Vme(Ay(n)),Ay=n=>(n[0]==="#"&&(n=n.substring(1)),n.length<6?{r:parseInt(n[0]+n[0],16),g:parseInt(n[1]+n[1],16),b:parseInt(n[2]+n[2],16),a:n.length===4?wn(parseInt(n[3]+n[3],16)/255,2):1}:{r:parseInt(n.substring(0,2),16),g:parseInt(n.substring(2,4),16),b:parseInt(n.substring(4,6),16),a:n.length===8?wn(parseInt(n.substring(6,8),16)/255,2):1}),Nme=n=>$me(Fme(n)),Lme=({h:n,s:e,v:t,a:r})=>{const i=(200-e)*t/100;return{h:wn(n),s:wn(i>0&&i<200?e*t/100/(i<=100?i:200-i)*100:0),l:wn(i/2),a:wn(r,2)}},Ty=n=>{const{h:e,s:t,l:r}=Lme(n);return`hsl(${e}, ${t}%, ${r}%)`},Fme=({h:n,s:e,v:t,a:r})=>{n=n/360*6,e=e/100,t=t/100;const i=Math.floor(n),o=t*(1-e),s=t*(1-(n-i)*e),a=t*(1-(1-n+i)*e),l=i%6;return{r:wn([t,s,o,o,a,t][l]*255),g:wn([a,t,t,s,o,o][l]*255),b:wn([o,o,a,t,t,s][l]*255),a:wn(r,2)}},lf=n=>{const e=n.toString(16);return e.length<2?"0"+e:e},$me=({r:n,g:e,b:t,a:r})=>{const i=r<1?lf(wn(r*255)):"";return"#"+lf(n)+lf(e)+lf(t)+i},Vme=({r:n,g:e,b:t,a:r})=>{const i=Math.max(n,e,t),o=i-Math.min(n,e,t),s=o?i===n?(e-t)/o:i===e?2+(t-n)/o:4+(n-e)/o:0;return{h:wn(60*(s<0?s+6:s)),s:wn(i?o/i*100:0),v:wn(i/255*100),a:r}},zD=(n,e)=>{if(n===e)return!0;for(const t in n)if(n[t]!==e[t])return!1;return!0},zme=(n,e)=>n.toLowerCase()===e.toLowerCase()?!0:zD(Ay(n),Ay(e)),jT={},jD=n=>{let e=jT[n];return e||(e=document.createElement("template"),e.innerHTML=n,jT[n]=e),e},j0=(n,e,t)=>{n.dispatchEvent(new CustomEvent(e,{bubbles:!0,detail:t}))};let xa=!1;const Ey=n=>"touches"in n,jme=n=>xa&&!Ey(n)?!1:(xa||(xa=Ey(n)),!0),WT=(n,e)=>{const t=Ey(e)?e.touches[0]:e,r=n.el.getBoundingClientRect();j0(n.el,"move",n.getMove({x:Mu((t.pageX-(r.left+window.pageXOffset))/r.width),y:Mu((t.pageY-(r.top+window.pageYOffset))/r.height)}))},Wme=(n,e)=>{const t=e.keyCode;t>40||n.xy&&t<37||t<33||(e.preventDefault(),j0(n.el,"move",n.getMove({x:t===39?.01:t===37?-.01:t===34?.05:t===33?-.05:t===35?1:t===36?-1:0,y:t===40?.01:t===38?-.01:0},!0)))};class WD{constructor(e,t,r,i){const o=jD(`<div role="slider" tabindex="0" part="${t}" ${r}><div part="${t}-pointer"></div></div>`);e.appendChild(o.content.cloneNode(!0));const s=e.querySelector(`[part=${t}]`);s.addEventListener("mousedown",this),s.addEventListener("touchstart",this),s.addEventListener("keydown",this),this.el=s,this.xy=i,this.nodes=[s.firstChild,s]}set dragging(e){const t=e?document.addEventListener:document.removeEventListener;t(xa?"touchmove":"mousemove",this),t(xa?"touchend":"mouseup",this)}handleEvent(e){switch(e.type){case"mousedown":case"touchstart":if(e.preventDefault(),!jme(e)||!xa&&e.button!=0)return;this.el.focus(),WT(this,e),this.dragging=!0;break;case"mousemove":case"touchmove":e.preventDefault(),WT(this,e);break;case"mouseup":case"touchend":this.dragging=!1;break;case"keydown":Wme(this,e);break}}style(e){e.forEach((t,r)=>{for(const i in t)this.nodes[r].style.setProperty(i,t[i])})}}class Hme extends WD{constructor(e){super(e,"hue",'aria-label="Hue" aria-valuemin="0" aria-valuemax="360"',!1)}update({h:e}){this.h=e,this.style([{left:`${e/360*100}%`,color:Ty({h:e,s:100,v:100,a:1})}]),this.el.setAttribute("aria-valuenow",`${wn(e)}`)}getMove(e,t){return{h:t?Mu(this.h+e.x*360,0,360):360*e.x}}}class Ume extends WD{constructor(e){super(e,"saturation",'aria-label="Color"',!0)}update(e){this.hsva=e,this.style([{top:`${100-e.v}%`,left:`${e.s}%`,color:Ty(e)},{"background-color":Ty({h:e.h,s:100,v:100,a:1})}]),this.el.setAttribute("aria-valuetext",`Saturation ${wn(e.s)}%, Brightness ${wn(e.v)}%`)}getMove(e,t){return{s:t?Mu(this.hsva.s+e.x*100,0,100):e.x*100,v:t?Mu(this.hsva.v-e.y*100,0,100):Math.round(100-e.y*100)}}}const Gme=':host{display:flex;flex-direction:column;position:relative;width:200px;height:200px;user-select:none;-webkit-user-select:none;cursor:default}:host([hidden]){display:none!important}[role=slider]{position:relative;touch-action:none;user-select:none;-webkit-user-select:none;outline:0}[role=slider]:last-child{border-radius:0 0 8px 8px}[part$=pointer]{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;display:flex;place-content:center center;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}[part$=pointer]::after{content:"";width:100%;height:100%;border-radius:inherit;background-color:currentColor}[role=slider]:focus [part$=pointer]{transform:translate(-50%,-50%) scale(1.1)}',qme="[part=hue]{flex:0 0 24px;background:linear-gradient(to right,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red 100%)}[part=hue-pointer]{top:50%;z-index:2}",Kme="[part=saturation]{flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(to top,#000,transparent),linear-gradient(to right,#fff,rgba(255,255,255,0));box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}[part=saturation-pointer]{z-index:3}",cf=Symbol("same"),tv=Symbol("color"),HT=Symbol("hsva"),nv=Symbol("update"),UT=Symbol("parts"),GT=Symbol("css"),qT=Symbol("sliders");class Yme extends HTMLElement{static get observedAttributes(){return["color"]}get[GT](){return[Gme,qme,Kme]}get[qT](){return[Ume,Hme]}get color(){return this[tv]}set color(e){if(!this[cf](e)){const t=this.colorModel.toHsva(e);this[nv](t),this[tv]=e}}constructor(){super();const e=jD(`<style>${this[GT].join("")}</style>`),t=this.attachShadow({mode:"open"});t.appendChild(e.content.cloneNode(!0)),t.addEventListener("move",this),this[UT]=this[qT].map(r=>new r(t))}connectedCallback(){if(this.hasOwnProperty("color")){const e=this.color;delete this.color,this.color=e}else this.color||(this.color=this.colorModel.defaultColor)}attributeChangedCallback(e,t,r){const i=this.colorModel.fromAttr(r);this[cf](i)||(this.color=i)}handleEvent(e){const t=this[HT],r={...t,...e.detail};this[nv](r);let i;!zD(r,t)&&!this[cf](i=this.colorModel.fromHsva(r))&&(this[tv]=i,j0(this,"color-changed",{value:i}))}[cf](e){return this.color&&this.colorModel.equal(e,this.color)}[nv](e){this[HT]=e,this[UT].forEach(t=>t.update(e))}}const Xme={defaultColor:"#000",toHsva:Bme,fromHsva:({h:n,s:e,v:t})=>Nme({h:n,s:e,v:t,a:1}),equal:zme,fromAttr:n=>n};class Zme extends Yme{get colorModel(){return Xme}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Jme=150;class Qme extends be{constructor(e,t={}){super(e),this.set({color:"",_hexColor:""}),this.hexInputRow=this._createInputRow();const r=this.createCollection();t.hideInput||r.add(this.hexInputRow),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-picker"],tabindex:-1},children:r}),this._config=t,this._debounceColorPickerEvent=Aa(i=>{this.set("color",i),this.fire("colorSelected",{color:this.color})},Jme,{leading:!0}),this.on("set:color",(i,o,s)=>{i.return=BD(s,this._config.format||"hsl")}),this.on("change:color",()=>{this._hexColor=rv(this.color)}),this.on("change:_hexColor",()=>{document.activeElement!==this.picker&&this.picker.setAttribute("color",this._hexColor),rv(this.color)!=rv(this._hexColor)&&(this.color=this._hexColor)})}render(){if(super.render(),fme("hex-color-picker",Zme),this.picker=he.document.createElement("hex-color-picker"),this.picker.setAttribute("class","hex-color-picker"),this.picker.setAttribute("tabindex","-1"),this._createSlidersView(),this.element){this.hexInputRow.element?this.element.insertBefore(this.picker,this.hexInputRow.element):this.element.appendChild(this.picker);const e=document.createElement("style");e.textContent='[role="slider"]:focus [part$="pointer"] {border: 1px solid #fff;outline: 1px solid var(--ck-color-focus-border);box-shadow: 0 0 0 2px #fff;}',this.picker.shadowRoot.appendChild(e)}this.picker.addEventListener("color-changed",e=>{const t=e.detail.value;this._debounceColorPickerEvent(t)})}focus(){/* istanbul ignore next -- @preserve */!this._config.hideInput&&(Re.isGecko||Re.isiOS||Re.isSafari)&&this.hexInputRow.children.get(1).focus(),this.slidersView.first.focus()}_createSlidersView(){const r=[...this.picker.shadowRoot.children].filter(i=>i.getAttribute("role")==="slider").map(i=>new ege(i));this.slidersView=this.createCollection(),r.forEach(i=>{this.slidersView.add(i)})}_createInputRow(){const e=this._createColorInput();return new nge(this.locale,e)}_createColorInput(){const e=new El(this.locale,hd),{t}=this.locale;return e.set({label:t("HEX"),class:"color-picker-hex-input"}),e.fieldView.bind("value").to(this,"_hexColor",r=>e.isFocused?e.fieldView.value:r.startsWith("#")?r.substring(1):r),e.fieldView.on("input",()=>{const r=e.fieldView.element.value;if(r){const i=HD(r);i&&this._debounceColorPickerEvent(i)}}),e}isValid(){const{t:e}=this.locale;return this.resetValidationStatus(),this.hexInputRow.getParsedColor()?!0:(this.hexInputRow.inputView.errorText=e('Please enter a valid color (e.g. "ff0000").'),!1)}resetValidationStatus(){this.hexInputRow.inputView.errorText=null}}function rv(n){let e=dme(n);return e||(e="#000"),e.length===4&&(e="#"+[e[1],e[1],e[2],e[2],e[3],e[3]].join("")),e.toLowerCase()}class ege extends be{constructor(e){super(),this.element=e}focus(){this.element.focus()}}class tge extends be{constructor(e){super(e),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-picker__hash-view"]},children:"#"})}}class nge extends be{constructor(e,t){super(e),this.inputView=t,this.children=this.createCollection([new tge,this.inputView]),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-picker__row"]},children:this.children})}getParsedColor(){return HD(this.inputView.fieldView.element.value)}}function HD(n){if(!n)return null;const e=n.trim().replace(/^#/,"");return![3,4,6,8].includes(e.length)||!/^(([0-9a-fA-F]{2}){3,4}|([0-9a-fA-F]){3,4})$/.test(e)?null:`#${e}`}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class rge extends ct(Vn){constructor(e){super(e),this.set("isEmpty",!0),this.on("change",()=>{this.set("isEmpty",this.length===0)})}add(e,t){return this.find(r=>r.color===e.color)?this:super.add(e,t)}hasColor(e){return!!this.find(t=>t.color===e)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const{eraser:ige,colorPalette:oge}=Ee;class sge extends be{constructor(e,{colors:t,columns:r,removeButtonLabel:i,documentColorsLabel:o,documentColorsCount:s,colorPickerLabel:a,focusTracker:l,focusables:c}){super(e);const u=this.bindTemplate;this.set("isVisible",!0),this.focusTracker=l,this.items=this.createCollection(),this.colorDefinitions=t,this.columns=r,this.documentColors=new rge,this.documentColorsCount=s,this._focusables=c,this._removeButtonLabel=i,this._colorPickerLabel=a,this._documentColorsLabel=o,this.setTemplate({tag:"div",attributes:{class:["ck-color-grids-fragment",u.if("isVisible","ck-hidden",d=>!d)]},children:this.items}),this.removeColorButtonView=this._createRemoveColorButton(),this.items.add(this.removeColorButtonView)}updateDocumentColors(e,t){const r=e.document,i=this.documentColorsCount;this.documentColors.clear();for(const o of r.getRoots()){const s=e.createRangeIn(o);for(const a of s.getItems())if(a.is("$textProxy")&&a.hasAttribute(t)&&(this._addColorToDocumentColors(a.getAttribute(t)),this.documentColors.length>=i))return}}updateSelectedColors(){const e=this.documentColorsGrid,t=this.staticColorsGrid,r=this.selectedColor;t.selectedColor=r,e&&(e.selectedColor=r)}render(){if(super.render(),this.staticColorsGrid=this._createStaticColorsGrid(),this.items.add(this.staticColorsGrid),this.documentColorsCount){const e=Jn.bind(this.documentColors,this.documentColors),t=new ld(this.locale);t.text=this._documentColorsLabel,t.extendTemplate({attributes:{class:["ck","ck-color-grid__label",e.if("isEmpty","ck-hidden")]}}),this.items.add(t),this.documentColorsGrid=this._createDocumentColorsGrid(),this.items.add(this.documentColorsGrid)}this._createColorPickerButton(),this._addColorSelectorElementsToFocusTracker()}focus(){this.removeColorButtonView.focus()}destroy(){super.destroy()}addColorPickerButton(){this.colorPickerButtonView&&(this.items.add(this.colorPickerButtonView),this.focusTracker.add(this.colorPickerButtonView.element),this._focusables.add(this.colorPickerButtonView))}_addColorSelectorElementsToFocusTracker(){this.focusTracker.add(this.removeColorButtonView.element),this._focusables.add(this.removeColorButtonView),this.staticColorsGrid&&(this.focusTracker.add(this.staticColorsGrid.element),this._focusables.add(this.staticColorsGrid)),this.documentColorsGrid&&(this.focusTracker.add(this.documentColorsGrid.element),this._focusables.add(this.documentColorsGrid))}_createColorPickerButton(){this.colorPickerButtonView=new Ne,this.colorPickerButtonView.set({label:this._colorPickerLabel,withText:!0,icon:oge,class:"ck-color-selector__color-picker"}),this.colorPickerButtonView.on("execute",()=>{this.fire("colorPicker:show")})}_createRemoveColorButton(){const e=new Ne;return e.set({withText:!0,icon:ige,label:this._removeButtonLabel}),e.class="ck-color-selector__remove-color",e.on("execute",()=>{this.fire("execute",{value:null,source:"removeColorButton"})}),e.render(),e}_createStaticColorsGrid(){const e=new NT(this.locale,{colorDefinitions:this.colorDefinitions,columns:this.columns});return e.on("execute",(t,r)=>{this.fire("execute",{value:r.value,source:"staticColorsGrid"})}),e}_createDocumentColorsGrid(){const e=Jn.bind(this.documentColors,this.documentColors),t=new NT(this.locale,{columns:this.columns});return t.extendTemplate({attributes:{class:e.if("isEmpty","ck-hidden")}}),t.items.bindTo(this.documentColors).using(r=>{const i=new PD;return i.set({color:r.color,hasBorder:r.options&&r.options.hasBorder}),r.label&&i.set({label:r.label,tooltip:!0}),i.on("execute",()=>{this.fire("execute",{value:r.color,source:"documentColorsGrid"})}),i}),this.documentColors.on("change:isEmpty",(r,i,o)=>{o&&(t.selectedColor=null)}),t}_addColorToDocumentColors(e){const t=this.colorDefinitions.find(r=>r.color===e);t?this.documentColors.add(Object.assign({},t)):this.documentColors.add({color:e,label:e,options:{hasBorder:!1}})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class age extends be{constructor(e,{focusTracker:t,focusables:r,keystrokes:i,colorPickerViewConfig:o}){super(e),this.items=this.createCollection(),this.focusTracker=t,this.keystrokes=i,this.set("isVisible",!1),this.set("selectedColor",void 0),this._focusables=r,this._colorPickerViewConfig=o;const s=this.bindTemplate,{saveButtonView:a,cancelButtonView:l}=this._createActionButtons();this.saveButtonView=a,this.cancelButtonView=l,this.actionBarView=this._createActionBarView({saveButtonView:a,cancelButtonView:l}),this.setTemplate({tag:"div",attributes:{class:["ck-color-picker-fragment",s.if("isVisible","ck-hidden",c=>!c)]},children:this.items})}render(){super.render();const e=new Qme(this.locale,{...this._colorPickerViewConfig});this.colorPickerView=e,this.colorPickerView.render(),this.selectedColor&&(e.color=this.selectedColor),this.listenTo(this,"change:selectedColor",(t,r,i)=>{e.color=i}),this.items.add(this.colorPickerView),this.items.add(this.actionBarView),this._addColorPickersElementsToFocusTracker(),this._stopPropagationOnArrowsKeys(),this._executeOnEnterPress(),this._executeUponColorChange()}destroy(){super.destroy()}focus(){this.colorPickerView.focus()}resetValidationStatus(){this.colorPickerView.resetValidationStatus()}_executeOnEnterPress(){this.keystrokes.set("enter",e=>{this.isVisible&&this.focusTracker.focusedElement!==this.cancelButtonView.element&&this.colorPickerView.isValid()&&(this.fire("execute",{value:this.selectedColor}),e.stopPropagation(),e.preventDefault())})}_stopPropagationOnArrowsKeys(){const e=t=>t.stopPropagation();this.keystrokes.set("arrowright",e),this.keystrokes.set("arrowleft",e),this.keystrokes.set("arrowup",e),this.keystrokes.set("arrowdown",e)}_addColorPickersElementsToFocusTracker(){for(const t of this.colorPickerView.slidersView)this.focusTracker.add(t.element),this._focusables.add(t);const e=this.colorPickerView.hexInputRow.children.get(1);e.element&&(this.focusTracker.add(e.element),this._focusables.add(e)),this.focusTracker.add(this.saveButtonView.element),this._focusables.add(this.saveButtonView),this.focusTracker.add(this.cancelButtonView.element),this._focusables.add(this.cancelButtonView)}_createActionBarView({saveButtonView:e,cancelButtonView:t}){const r=new be,i=this.createCollection();return i.add(e),i.add(t),r.setTemplate({tag:"div",attributes:{class:["ck","ck-color-selector_action-bar"]},children:i}),r}_createActionButtons(){const e=this.locale,t=e.t,r=new Ne(e),i=new Ne(e);return r.set({icon:Ee.check,class:"ck-button-save",type:"button",withText:!1,label:t("Accept")}),i.set({icon:Ee.cancel,class:"ck-button-cancel",type:"button",withText:!1,label:t("Cancel")}),r.on("execute",()=>{this.colorPickerView.isValid()&&this.fire("execute",{source:"colorPickerSaveButton",value:this.selectedColor})}),i.on("execute",()=>{this.fire("colorPicker:cancel")}),{saveButtonView:r,cancelButtonView:i}}_executeUponColorChange(){this.colorPickerView.on("colorSelected",(e,t)=>{this.fire("execute",{value:t.color,source:"colorPicker"}),this.set("selectedColor",t.color)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class UD extends be{constructor(e,{colors:t,columns:r,removeButtonLabel:i,documentColorsLabel:o,documentColorsCount:s,colorPickerLabel:a,colorPickerViewConfig:l}){super(e),this.items=this.createCollection(),this.focusTracker=new Ut,this.keystrokes=new mn,this._focusables=new rr,this._colorPickerViewConfig=l,this._focusCycler=new ir({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.colorGridsFragmentView=new sge(e,{colors:t,columns:r,removeButtonLabel:i,documentColorsLabel:o,documentColorsCount:s,colorPickerLabel:a,focusTracker:this.focusTracker,focusables:this._focusables}),this.colorPickerFragmentView=new age(e,{focusables:this._focusables,focusTracker:this.focusTracker,keystrokes:this.keystrokes,colorPickerViewConfig:l}),this.set("_isColorGridsFragmentVisible",!0),this.set("_isColorPickerFragmentVisible",!1),this.set("selectedColor",void 0),this.colorGridsFragmentView.bind("isVisible").to(this,"_isColorGridsFragmentVisible"),this.colorPickerFragmentView.bind("isVisible").to(this,"_isColorPickerFragmentVisible"),this.on("change:selectedColor",(c,u,d)=>{this.colorGridsFragmentView.set("selectedColor",d),this.colorPickerFragmentView.set("selectedColor",d)}),this.colorGridsFragmentView.on("change:selectedColor",(c,u,d)=>{this.set("selectedColor",d)}),this.colorPickerFragmentView.on("change:selectedColor",(c,u,d)=>{this.set("selectedColor",d)}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-selector"]},children:this.items})}render(){super.render(),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}appendUI(){this._appendColorGridsFragment(),this._colorPickerViewConfig&&this._appendColorPickerFragment()}showColorPickerFragment(){!this.colorPickerFragmentView.colorPickerView||this._isColorPickerFragmentVisible||(this._isColorPickerFragmentVisible=!0,this.colorPickerFragmentView.focus(),this.colorPickerFragmentView.resetValidationStatus(),this._isColorGridsFragmentVisible=!1)}showColorGridsFragment(){this._isColorGridsFragmentVisible||(this._isColorGridsFragmentVisible=!0,this.colorGridsFragmentView.focus(),this._isColorPickerFragmentVisible=!1)}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}updateDocumentColors(e,t){this.colorGridsFragmentView.updateDocumentColors(e,t)}updateSelectedColors(){this.colorGridsFragmentView.updateSelectedColors()}_appendColorGridsFragment(){this.items.length||(this.items.add(this.colorGridsFragmentView),this.colorGridsFragmentView.delegate("execute").to(this),this.colorGridsFragmentView.delegate("colorPicker:show").to(this))}_appendColorPickerFragment(){this.items.length!==2&&(this.items.add(this.colorPickerFragmentView),this.colorGridsFragmentView.colorPickerButtonView&&this.colorGridsFragmentView.colorPickerButtonView.on("execute",()=>{this.showColorPickerFragment()}),this.colorGridsFragmentView.addColorPickerButton(),this.colorPickerFragmentView.delegate("execute").to(this),this.colorPickerFragmentView.delegate("colorPicker:cancel").to(this))}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class lge{constructor(e){this._components=new Map,this.editor=e}*names(){for(const e of this._components.values())yield e.originalName}add(e,t){this._components.set(iv(e),{callback:t,originalName:e})}create(e){if(!this.has(e))throw new M("componentfactory-item-missing",this,{name:e});return this._components.get(iv(e)).callback(this.editor.locale)}has(e){return this._components.has(iv(e))}}function iv(n){return String(n).toLowerCase()}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class cge extends be{constructor(e,t={}){super(e);const r=this.bindTemplate;this.set("label",t.label||""),this.set("class",t.class||null),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-form__header",r.to("class")]},children:this.children}),t.icon&&(this.iconView=new li,this.iconView.content=t.icon,this.children.add(this.iconView));const i=new be(e);i.setTemplate({tag:"h2",attributes:{class:["ck","ck-form__header__label"],role:"presentation"},children:[{text:r.to("label")}]}),this.children.add(i)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function uge(n){class e extends n{constructor(...r){super(...r),this._onDragBound=this._onDrag.bind(this),this._onDragEndBound=this._onDragEnd.bind(this),this._lastDraggingCoordinates={x:0,y:0},this.on("render",()=>{this._attachListeners()}),this.set("isDragging",!1)}_attachListeners(){this.listenTo(this.element,"mousedown",this._onDragStart.bind(this)),this.listenTo(this.element,"touchstart",this._onDragStart.bind(this))}_attachDragListeners(){this.listenTo(he.document,"mouseup",this._onDragEndBound),this.listenTo(he.document,"touchend",this._onDragEndBound),this.listenTo(he.document,"mousemove",this._onDragBound),this.listenTo(he.document,"touchmove",this._onDragBound)}_detachDragListeners(){this.stopListening(he.document,"mouseup",this._onDragEndBound),this.stopListening(he.document,"touchend",this._onDragEndBound),this.stopListening(he.document,"mousemove",this._onDragBound),this.stopListening(he.document,"touchmove",this._onDragBound)}_onDragStart(r,i){if(!this._isHandleElementPressed(i))return;this._attachDragListeners();let o=0,s=0;i instanceof MouseEvent?(o=i.clientX,s=i.clientY):(o=i.touches[0].clientX,s=i.touches[0].clientY),this._lastDraggingCoordinates={x:o,y:s},this.isDragging=!0}_onDrag(r,i){if(!this.isDragging){this._detachDragListeners();return}let o=0,s=0;i instanceof MouseEvent?(o=i.clientX,s=i.clientY):(o=i.touches[0].clientX,s=i.touches[0].clientY),i.preventDefault(),this.fire("drag",{deltaX:Math.round(o-this._lastDraggingCoordinates.x),deltaY:Math.round(s-this._lastDraggingCoordinates.y)}),this._lastDraggingCoordinates={x:o,y:s}}_onDragEnd(){this._detachDragListeners(),this.isDragging=!1}_isHandleElementPressed(r){return this.dragHandleElement?this.dragHandleElement===r.target||r.target instanceof HTMLElement&&this.dragHandleElement.contains(r.target):!1}}return e}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class dge extends be{constructor(e){super(e),this.children=this.createCollection(),this.keystrokes=new mn,this._focusTracker=new Ut,this._focusables=new rr,this.focusCycler=new ir({focusables:this._focusables,focusTracker:this._focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog__actions"]},children:this.children})}render(){super.render(),this.keystrokes.listenTo(this.element)}setButtons(e){for(const t of e){const r=new Ne(this.locale);let i;r.on("execute",()=>t.onExecute()),t.onCreate&&t.onCreate(r);for(i in t)i!="onExecute"&&i!="onCreate"&&r.set(i,t[i]);this.children.add(r)}this._updateFocusCyclableItems()}focus(e){e===-1?this.focusCycler.focusLast():this.focusCycler.focusFirst()}_updateFocusCyclableItems(){Array.from(this.children).forEach(e=>{this._focusables.add(e),this._focusTracker.add(e.element)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class fge extends be{constructor(e){super(e),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog__content"]},children:this.children})}reset(){for(;this.children.length;)this.children.remove(0)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Ur={SCREEN_CENTER:"screen-center",EDITOR_CENTER:"editor-center",EDITOR_TOP_SIDE:"editor-top-side",EDITOR_TOP_CENTER:"editor-top-center",EDITOR_BOTTOM_CENTER:"editor-bottom-center",EDITOR_ABOVE_CENTER:"editor-above-center",EDITOR_BELOW_CENTER:"editor-below-center"},KT=Al("px");class nl extends uge(be){constructor(e,{getCurrentDomRoot:t,getViewportOffset:r}){super(e),this.wasMoved=!1;const i=this.bindTemplate,o=e.t;this.set("className",""),this.set("ariaLabel",o("Editor dialog")),this.set("isModal",!1),this.set("position",Ur.SCREEN_CENTER),this.set("_isVisible",!1),this.set("_isTransparent",!1),this.set("_top",0),this.set("_left",0),this._getCurrentDomRoot=t,this._getViewportOffset=r,this.decorate("moveTo"),this.parts=this.createCollection(),this.keystrokes=new mn,this.focusTracker=new Ut,this._focusables=new rr,this._focusCycler=new ir({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog-overlay",i.if("isModal","ck-dialog-overlay__transparent",s=>!s),i.if("_isVisible","ck-hidden",s=>!s)],tabindex:"-1"},children:[{tag:"div",attributes:{tabindex:"-1",class:["ck","ck-dialog",i.to("className")],role:"dialog","aria-label":i.to("ariaLabel"),style:{top:i.to("_top",s=>KT(s)),left:i.to("_left",s=>KT(s)),visibility:i.if("_isTransparent","hidden")}},children:this.parts}]})}render(){super.render(),this.keystrokes.set("Esc",(e,t)=>{this.fire("close",{source:"escKeyPress"}),t()}),this.on("drag",(e,{deltaX:t,deltaY:r})=>{this.wasMoved=!0,this.moveBy(t,r)}),this.listenTo(he.window,"resize",()=>{this._isVisible&&!this.wasMoved&&this.updatePosition()}),this.listenTo(he.document,"scroll",()=>{this._isVisible&&!this.wasMoved&&this.updatePosition()}),this.on("change:_isVisible",(e,t,r)=>{r&&(this._isTransparent=!0,setTimeout(()=>{this.updatePosition(),this._isTransparent=!1,this.focus()},10))}),this.keystrokes.listenTo(this.element)}get dragHandleElement(){return this.headerView?this.headerView.element:null}setupParts({icon:e,title:t,hasCloseButton:r=!0,content:i,actionButtons:o}){t&&(this.headerView=new cge(this.locale,{icon:e}),r&&(this.closeButtonView=this._createCloseButton(),this.headerView.children.add(this.closeButtonView)),this.headerView.label=t,this.ariaLabel=t,this.parts.add(this.headerView,0)),i&&(i instanceof be&&(i=[i]),this.contentView=new fge(this.locale),this.contentView.children.addMany(i),this.parts.add(this.contentView)),o&&(this.actionsView=new dge(this.locale),this.actionsView.setButtons(o),this.parts.add(this.actionsView)),this._updateFocusCyclableItems()}focus(){this._focusCycler.focusFirst()}moveTo(e,t){const r=this._getViewportRect(),i=this._getDialogRect();e+i.width>r.right&&(e=r.right-i.width),e<r.left&&(e=r.left),t<r.top&&(t=r.top),this._moveTo(e,t)}_moveTo(e,t){this._left=e,this._top=t}moveBy(e,t){this.moveTo(this._left+e,this._top+t)}_moveOffScreen(){this._moveTo(-9999,-9999)}updatePosition(){if(!this.element||!this.element.parentNode)return;const e=this._getViewportRect();let t=this.position,r;this._getCurrentDomRoot()?r=this._getVisibleDomRootRect(e):t=Ur.SCREEN_CENTER;const i=nl.defaultOffset,o=this._getDialogRect();switch(t){case Ur.EDITOR_TOP_SIDE:{if(r){const s=this.locale.contentLanguageDirection==="ltr"?r.right-o.width-i:r.left+i;this.moveTo(s,r.top+i)}else this._moveOffScreen();break}case Ur.EDITOR_CENTER:{r?this.moveTo(Math.round(r.left+r.width/2-o.width/2),Math.round(r.top+r.height/2-o.height/2)):this._moveOffScreen();break}case Ur.SCREEN_CENTER:{this.moveTo(Math.round((e.width-o.width)/2),Math.round((e.height-o.height)/2));break}case Ur.EDITOR_TOP_CENTER:{r?this.moveTo(Math.round(r.left+r.width/2-o.width/2),r.top+i):this._moveOffScreen();break}case Ur.EDITOR_BOTTOM_CENTER:{r?this.moveTo(Math.round(r.left+r.width/2-o.width/2),r.bottom-o.height-i):this._moveOffScreen();break}case Ur.EDITOR_ABOVE_CENTER:{r?this.moveTo(Math.round(r.left+r.width/2-o.width/2),r.top-o.height-i):this._moveOffScreen();break}case Ur.EDITOR_BELOW_CENTER:{r?this.moveTo(Math.round(r.left+r.width/2-o.width/2),r.bottom+i):this._moveOffScreen();break}}}_getVisibleDomRootRect(e){let t=new De(this._getCurrentDomRoot()).getVisible();if(t){if(t=e.getIntersection(t),!t)return null}else return null;return t}_getDialogRect(){return new De(this.element.firstElementChild)}_getViewportRect(){return hge(this._getViewportOffset())}_updateFocusCyclableItems(){const e=[];if(this.contentView)for(const t of this.contentView.children)cd(t)&&e.push(t);this.actionsView&&e.push(this.actionsView),this.closeButtonView&&e.push(this.closeButtonView),e.forEach(t=>{this._focusables.add(t),this.focusTracker.add(t.element),wme(t)&&(this.listenTo(t.focusCycler,"forwardCycle",r=>{this._focusCycler.focusNext(),this._focusCycler.next!==this._focusCycler.focusables.get(this._focusCycler.current)&&r.stop()}),this.listenTo(t.focusCycler,"backwardCycle",r=>{this._focusCycler.focusPrevious(),this._focusCycler.previous!==this._focusCycler.focusables.get(this._focusCycler.current)&&r.stop()}))})}_createCloseButton(){const e=new Ne(this.locale),t=this.locale.t;return e.set({label:t("Close"),tooltip:!0,icon:Ee.cancel}),e.on("execute",()=>this.fire("close",{source:"closeButton"})),e}}nl.defaultOffset=15;function hge(n){n=Object.assign({top:0,bottom:0,left:0,right:0},n);const e=new De(he.window);return e.top+=n.top,e.height-=n.top,e.bottom-=n.bottom,e.height-=n.bottom,e.left+=n.left,e.right-=n.right,e.width-=n.left+n.right,e}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Vi extends W{static get pluginName(){return"Dialog"}constructor(e){super(e);const t=e.t;this._initShowHideListeners(),this._initFocusToggler(),this._initMultiRootIntegration(),this.set("id",null),e.accessibility.addKeystrokeInfos({categoryId:"navigation",keystrokes:[{label:t("Move focus in and out of an active dialog window"),keystroke:"Ctrl+F6",mayRequireFn:!0}]})}_initShowHideListeners(){this.on("show",(e,t)=>{this._show(t)}),this.on("show",(e,t)=>{t.onShow&&t.onShow(this)},{priority:"low"}),this.on("hide",()=>{Vi._visibleDialogPlugin&&Vi._visibleDialogPlugin._hide()}),this.on("hide",()=>{this._onHide&&(this._onHide(this),this._onHide=void 0)},{priority:"low"})}_initFocusToggler(){const e=this.editor;e.keystrokes.set("Ctrl+F6",(t,r)=>{!this.isOpen||this.view.isModal||(this.view.focusTracker.isFocused?e.editing.view.focus():this.view.focus(),r())})}_initMultiRootIntegration(){const e=this.editor.model;e.document.on("change:data",()=>{if(!this.view)return;const t=e.document.differ.getChangedRoots();for(const r of t)r.state&&this.view.updatePosition()})}show(e){this.hide(),this.fire(`show:${e.id}`,e)}_show({id:e,icon:t,title:r,hasCloseButton:i=!0,content:o,actionButtons:s,className:a,isModal:l,position:c,onHide:u}){const d=this.editor;this.view=new nl(d.locale,{getCurrentDomRoot:()=>d.editing.view.getDomRoot(d.model.document.selection.anchor.root.rootName),getViewportOffset:()=>d.ui.viewportOffset});const f=this.view;f.on("close",()=>{this.hide()}),d.ui.view.body.add(f),d.ui.focusTracker.add(f.element),d.keystrokes.listenTo(f.element),c||(c=l?Ur.SCREEN_CENTER:Ur.EDITOR_CENTER),f.set({position:c,_isVisible:!0,className:a,isModal:l}),f.setupParts({icon:t,title:r,hasCloseButton:i,content:o,actionButtons:s}),this.id=e,u&&(this._onHide=u),this.isOpen=!0,Vi._visibleDialogPlugin=this}hide(){Vi._visibleDialogPlugin&&Vi._visibleDialogPlugin.fire(`hide:${Vi._visibleDialogPlugin.id}`)}_hide(){if(!this.view)return;const e=this.editor,t=this.view;t.contentView&&t.contentView.reset(),e.ui.view.body.remove(t),e.ui.focusTracker.remove(t.element),e.keystrokes.stopListening(t.element),t.destroy(),e.editing.view.focus(),this.id=null,this.isOpen=!1,Vi._visibleDialogPlugin=null}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const YT=Al("px"),XT=he.document.body,mge={top:-99999,left:-99999,name:"arrowless",config:{withArrow:!1}};class Cn extends be{constructor(e){super(e);const t=this.bindTemplate;this.set("top",0),this.set("left",0),this.set("position","arrow_nw"),this.set("isVisible",!1),this.set("withArrow",!0),this.set("class",void 0),this._pinWhenIsVisibleCallback=null,this.content=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-panel",t.to("position",r=>`ck-balloon-panel_${r}`),t.if("isVisible","ck-balloon-panel_visible"),t.if("withArrow","ck-balloon-panel_with-arrow"),t.to("class")],style:{top:t.to("top",YT),left:t.to("left",YT)}},children:this.content})}show(){this.isVisible=!0}hide(){this.isVisible=!1}attachTo(e){this.show();const t=Cn.defaultPositions,r=Object.assign({},{element:this.element,positions:[t.southArrowNorth,t.southArrowNorthMiddleWest,t.southArrowNorthMiddleEast,t.southArrowNorthWest,t.southArrowNorthEast,t.northArrowSouth,t.northArrowSouthMiddleWest,t.northArrowSouthMiddleEast,t.northArrowSouthWest,t.northArrowSouthEast,t.viewportStickyNorth],limiter:XT,fitInViewport:!0},e),i=Cn._getOptimalPosition(r)||mge,o=parseInt(i.left),s=parseInt(i.top),a=i.name,l=i.config||{},{withArrow:c=!0}=l;this.top=s,this.left=o,this.position=a,this.withArrow=c}pin(e){this.unpin(),this._pinWhenIsVisibleCallback=()=>{this.isVisible?this._startPinning(e):this._stopPinning()},this._startPinning(e),this.listenTo(this,"change:isVisible",this._pinWhenIsVisibleCallback)}unpin(){this._pinWhenIsVisibleCallback&&(this._stopPinning(),this.stopListening(this,"change:isVisible",this._pinWhenIsVisibleCallback),this._pinWhenIsVisibleCallback=null,this.hide())}_startPinning(e){this.attachTo(e);const t=ky(e.target),r=e.limiter?ky(e.limiter):XT;this.listenTo(he.document,"scroll",(i,o)=>{const s=o.target,a=t&&s.contains(t),l=r&&s.contains(r);(a||l||!t||!r)&&this.attachTo(e)},{useCapture:!0}),this.listenTo(he.window,"resize",()=>{this.attachTo(e)})}_stopPinning(){this.stopListening(he.document,"scroll"),this.stopListening(he.window,"resize")}}Cn.arrowSideOffset=25;Cn.arrowHeightOffset=10;Cn.stickyVerticalOffset=20;Cn._getOptimalPosition=yg;Cn.defaultPositions=GD();function ky(n){return ys(n)?n:bg(n)?n.commonAncestorContainer:typeof n=="function"?ky(n()):null}function GD(n={}){const{sideOffset:e=Cn.arrowSideOffset,heightOffset:t=Cn.arrowHeightOffset,stickyVerticalOffset:r=Cn.stickyVerticalOffset,config:i}=n;return{northWestArrowSouthWest:(a,l)=>({top:o(a,l),left:a.left-e,name:"arrow_sw",...i&&{config:i}}),northWestArrowSouthMiddleWest:(a,l)=>({top:o(a,l),left:a.left-l.width*.25-e,name:"arrow_smw",...i&&{config:i}}),northWestArrowSouth:(a,l)=>({top:o(a,l),left:a.left-l.width/2,name:"arrow_s",...i&&{config:i}}),northWestArrowSouthMiddleEast:(a,l)=>({top:o(a,l),left:a.left-l.width*.75+e,name:"arrow_sme",...i&&{config:i}}),northWestArrowSouthEast:(a,l)=>({top:o(a,l),left:a.left-l.width+e,name:"arrow_se",...i&&{config:i}}),northArrowSouthWest:(a,l)=>({top:o(a,l),left:a.left+a.width/2-e,name:"arrow_sw",...i&&{config:i}}),northArrowSouthMiddleWest:(a,l)=>({top:o(a,l),left:a.left+a.width/2-l.width*.25-e,name:"arrow_smw",...i&&{config:i}}),northArrowSouth:(a,l)=>({top:o(a,l),left:a.left+a.width/2-l.width/2,name:"arrow_s",...i&&{config:i}}),northArrowSouthMiddleEast:(a,l)=>({top:o(a,l),left:a.left+a.width/2-l.width*.75+e,name:"arrow_sme",...i&&{config:i}}),northArrowSouthEast:(a,l)=>({top:o(a,l),left:a.left+a.width/2-l.width+e,name:"arrow_se",...i&&{config:i}}),northEastArrowSouthWest:(a,l)=>({top:o(a,l),left:a.right-e,name:"arrow_sw",...i&&{config:i}}),northEastArrowSouthMiddleWest:(a,l)=>({top:o(a,l),left:a.right-l.width*.25-e,name:"arrow_smw",...i&&{config:i}}),northEastArrowSouth:(a,l)=>({top:o(a,l),left:a.right-l.width/2,name:"arrow_s",...i&&{config:i}}),northEastArrowSouthMiddleEast:(a,l)=>({top:o(a,l),left:a.right-l.width*.75+e,name:"arrow_sme",...i&&{config:i}}),northEastArrowSouthEast:(a,l)=>({top:o(a,l),left:a.right-l.width+e,name:"arrow_se",...i&&{config:i}}),southWestArrowNorthWest:a=>({top:s(a),left:a.left-e,name:"arrow_nw",...i&&{config:i}}),southWestArrowNorthMiddleWest:(a,l)=>({top:s(a),left:a.left-l.width*.25-e,name:"arrow_nmw",...i&&{config:i}}),southWestArrowNorth:(a,l)=>({top:s(a),left:a.left-l.width/2,name:"arrow_n",...i&&{config:i}}),southWestArrowNorthMiddleEast:(a,l)=>({top:s(a),left:a.left-l.width*.75+e,name:"arrow_nme",...i&&{config:i}}),southWestArrowNorthEast:(a,l)=>({top:s(a),left:a.left-l.width+e,name:"arrow_ne",...i&&{config:i}}),southArrowNorthWest:a=>({top:s(a),left:a.left+a.width/2-e,name:"arrow_nw",...i&&{config:i}}),southArrowNorthMiddleWest:(a,l)=>({top:s(a),left:a.left+a.width/2-l.width*.25-e,name:"arrow_nmw",...i&&{config:i}}),southArrowNorth:(a,l)=>({top:s(a),left:a.left+a.width/2-l.width/2,name:"arrow_n",...i&&{config:i}}),southArrowNorthMiddleEast:(a,l)=>({top:s(a),left:a.left+a.width/2-l.width*.75+e,name:"arrow_nme",...i&&{config:i}}),southArrowNorthEast:(a,l)=>({top:s(a),left:a.left+a.width/2-l.width+e,name:"arrow_ne",...i&&{config:i}}),southEastArrowNorthWest:a=>({top:s(a),left:a.right-e,name:"arrow_nw",...i&&{config:i}}),southEastArrowNorthMiddleWest:(a,l)=>({top:s(a),left:a.right-l.width*.25-e,name:"arrow_nmw",...i&&{config:i}}),southEastArrowNorth:(a,l)=>({top:s(a),left:a.right-l.width/2,name:"arrow_n",...i&&{config:i}}),southEastArrowNorthMiddleEast:(a,l)=>({top:s(a),left:a.right-l.width*.75+e,name:"arrow_nme",...i&&{config:i}}),southEastArrowNorthEast:(a,l)=>({top:s(a),left:a.right-l.width+e,name:"arrow_ne",...i&&{config:i}}),westArrowEast:(a,l)=>({top:a.top+a.height/2-l.height/2,left:a.left-l.width-t,name:"arrow_e",...i&&{config:i}}),eastArrowWest:(a,l)=>({top:a.top+a.height/2-l.height/2,left:a.right+t,name:"arrow_w",...i&&{config:i}}),viewportStickyNorth:(a,l,c,u)=>{const d=u||c;return!a.getIntersection(d)||d.height-a.height>r?null:{top:d.top+r,left:a.left+a.width/2-l.width/2,name:"arrowless",config:{withArrow:!1,...i}}}};function o(a,l){return a.top-l.height-t}function s(a){return a.bottom+t}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const ZT="ck-tooltip";class on extends nr(){constructor(e){if(super(),this._currentElementWithTooltip=null,this._currentTooltipPosition=null,this._resizeObserver=null,this._mutationObserver=null,on._editors.add(e),on._instance)return on._instance;on._instance=this,this.tooltipTextView=new be(e.locale),this.tooltipTextView.set("text",""),this.tooltipTextView.setTemplate({tag:"span",attributes:{class:["ck","ck-tooltip__text"]},children:[{text:this.tooltipTextView.bindTemplate.to("text")}]}),this.balloonPanelView=new Cn(e.locale),this.balloonPanelView.class=ZT,this.balloonPanelView.content.add(this.tooltipTextView),this._mutationObserver=gge(()=>{this._updateTooltipPosition()}),this._pinTooltipDebounced=Aa(this._pinTooltip,600),this._unpinTooltipDebounced=Aa(this._unpinTooltip,400),this.listenTo(he.document,"keydown",this._onKeyDown.bind(this),{useCapture:!0}),this.listenTo(he.document,"mouseenter",this._onEnterOrFocus.bind(this),{useCapture:!0}),this.listenTo(he.document,"mouseleave",this._onLeaveOrBlur.bind(this),{useCapture:!0}),this.listenTo(he.document,"focus",this._onEnterOrFocus.bind(this),{useCapture:!0}),this.listenTo(he.document,"blur",this._onLeaveOrBlur.bind(this),{useCapture:!0}),this.listenTo(he.document,"scroll",this._onScroll.bind(this),{useCapture:!0}),this._watchdogExcluded=!0}destroy(e){const t=e.ui.view&&e.ui.view.body;on._editors.delete(e),this.stopListening(e.ui),t&&t.has(this.balloonPanelView)&&t.remove(this.balloonPanelView),on._editors.size||(this._unpinTooltip(),this.balloonPanelView.destroy(),this.stopListening(),on._instance=null)}static getPositioningFunctions(e){const t=on.defaultBalloonPositions;return{s:[t.southArrowNorth,t.southArrowNorthEast,t.southArrowNorthWest],n:[t.northArrowSouth],e:[t.eastArrowWest],w:[t.westArrowEast],sw:[t.southArrowNorthEast],se:[t.southArrowNorthWest]}[e]}_onKeyDown(e,t){t.key==="Escape"&&this._currentElementWithTooltip&&(this._unpinTooltip(),t.stopPropagation())}_onEnterOrFocus(e,{target:t}){const r=ov(t);if(!r){e.name==="focus"&&this._unpinTooltip();return}r!==this._currentElementWithTooltip&&(this._unpinTooltip(),this._pinTooltipDebounced(r,JT(r)))}_onLeaveOrBlur(e,{target:t,relatedTarget:r}){if(e.name==="mouseleave"){if(!ys(t))return;const i=this.balloonPanelView.element,o=i&&(i===r||i.contains(r)),s=!o&&t===i;if(o){this._unpinTooltipDebounced.cancel();return}if(!s&&this._currentElementWithTooltip&&t!==this._currentElementWithTooltip)return;const a=ov(t),l=ov(r);(s||a&&a!==l)&&this._unpinTooltipDebounced()}else{if(this._currentElementWithTooltip&&t!==this._currentElementWithTooltip)return;this._unpinTooltipDebounced()}}_onScroll(e,{target:t}){this._currentElementWithTooltip&&(t.contains(this.balloonPanelView.element)&&t.contains(this._currentElementWithTooltip)||this._unpinTooltip())}_pinTooltip(e,{text:t,position:r,cssClass:i}){this._unpinTooltip();const o=ln(on._editors.values()).ui.view.body;o.has(this.balloonPanelView)||o.add(this.balloonPanelView),this.tooltipTextView.text=t,this.balloonPanelView.pin({target:e,positions:on.getPositioningFunctions(r)}),this._resizeObserver=new nd(e,()=>{Cs(e)||this._unpinTooltip()}),this._mutationObserver.attach(e),this.balloonPanelView.class=[ZT,i].filter(s=>s).join(" ");for(const s of on._editors)this.listenTo(s.ui,"update",this._updateTooltipPosition.bind(this),{priority:"low"});this._currentElementWithTooltip=e,this._currentTooltipPosition=r}_unpinTooltip(){this._unpinTooltipDebounced.cancel(),this._pinTooltipDebounced.cancel(),this.balloonPanelView.unpin();for(const e of on._editors)this.stopListening(e.ui,"update");this._currentElementWithTooltip=null,this._currentTooltipPosition=null,this.tooltipTextView.text="",this._resizeObserver&&this._resizeObserver.destroy(),this._mutationObserver.detach()}_updateTooltipPosition(){if(!this._currentElementWithTooltip)return;const e=JT(this._currentElementWithTooltip);if(!Cs(this._currentElementWithTooltip)||!e.text){this._unpinTooltip();return}this.balloonPanelView.pin({target:this._currentElementWithTooltip,positions:on.getPositioningFunctions(e.position)})}}on.defaultBalloonPositions=GD({heightOffset:5,sideOffset:13});on._editors=new Set;on._instance=null;function ov(n){return ys(n)?n.closest("[data-cke-tooltip-text]:not([data-cke-tooltip-disabled])"):null}function JT(n){return{text:n.dataset.ckeTooltipText,position:n.dataset.ckeTooltipPosition||"s",cssClass:n.dataset.ckeTooltipClass||""}}function gge(n){const e=new MutationObserver(()=>{n()});return{attach(t){e.observe(t,{attributes:!0,attributeFilter:["data-cke-tooltip-text","data-cke-tooltip-position"]})},detach(){e.disconnect()}}}const pge=`<svg xmlns="http://www.w3.org/2000/svg" width="53" height="10" viewBox="0 0 53 10"><path fill="#1C2331" d="M31.724 1.492a15.139 15.139 0 0 0 .045 1.16 2.434 2.434 0 0 0-.687-.34 3.68 3.68 0 0 0-1.103-.166 2.332 2.332 0 0 0-1.14.255 1.549 1.549 0 0 0-.686.87c-.15.41-.225.98-.225 1.712 0 .939.148 1.659.444 2.161.297.503.792.754 1.487.754.452.015.9-.094 1.294-.316.296-.174.557-.4.771-.669l.14.852h1.282V.007h-1.623v1.485ZM31 6.496a1.77 1.77 0 0 1-.494.061.964.964 0 0 1-.521-.127.758.758 0 0 1-.296-.466 3.984 3.984 0 0 1-.093-.992 4.208 4.208 0 0 1 .098-1.052.753.753 0 0 1 .307-.477 1.08 1.08 0 0 1 .55-.122c.233-.004.466.026.69.089l.483.144v2.553c-.11.076-.213.143-.307.2a1.73 1.73 0 0 1-.417.189ZM35.68 0l-.702.004c-.322.002-.482.168-.48.497l.004.581c.002.33.164.493.486.49l.702-.004c.322-.002.481-.167.48-.496L36.165.49c-.002-.33-.164-.493-.486-.491ZM36.145 2.313l-1.612.01.034 5.482 1.613-.01-.035-5.482ZM39.623.79 37.989.8 38 2.306l-.946.056.006 1.009.949-.006.024 2.983c.003.476.143.844.419 1.106.275.26.658.39 1.148.387.132 0 .293-.01.483-.03.19-.02.38-.046.57-.08.163-.028.324-.068.482-.119l-.183-1.095-.702.004a.664.664 0 0 1-.456-.123.553.553 0 0 1-.14-.422l-.016-2.621 1.513-.01-.006-1.064-1.514.01-.01-1.503ZM46.226 2.388c-.41-.184-.956-.274-1.636-.27-.673.004-1.215.101-1.627.29-.402.179-.72.505-.888.91-.18.419-.268.979-.264 1.68.004.688.1 1.24.285 1.655.172.404.495.724.9.894.414.18.957.268 1.63.264.68-.004 1.224-.099 1.632-.284.4-.176.714-.501.878-.905.176-.418.263-.971.258-1.658-.004-.702-.097-1.261-.28-1.677a1.696 1.696 0 0 0-.888-.9Zm-.613 3.607a.77.77 0 0 1-.337.501 1.649 1.649 0 0 1-1.317.009.776.776 0 0 1-.343-.497 4.066 4.066 0 0 1-.105-1.02 4.136 4.136 0 0 1 .092-1.03.786.786 0 0 1 .337-.507 1.59 1.59 0 0 1 1.316-.008.79.79 0 0 1 .344.502c.078.337.113.683.105 1.03.012.343-.019.685-.092 1.02ZM52.114 2.07a2.67 2.67 0 0 0-1.128.278c-.39.191-.752.437-1.072.73l-.157-.846-1.273.008.036 5.572 1.623-.01-.024-3.78c.35-.124.646-.22.887-.286.26-.075.53-.114.8-.118l.45-.003.144-1.546-.286.001ZM22.083 7.426l-1.576-2.532a2.137 2.137 0 0 0-.172-.253 1.95 1.95 0 0 0-.304-.29.138.138 0 0 1 .042-.04 1.7 1.7 0 0 0 .328-.374l1.75-2.71c.01-.015.025-.028.024-.048-.01-.01-.021-.007-.031-.007L20.49 1.17a.078.078 0 0 0-.075.045l-.868 1.384c-.23.366-.46.732-.688 1.099a.108.108 0 0 1-.112.06c-.098-.005-.196-.001-.294-.002-.018 0-.038.006-.055-.007.002-.02.002-.039.005-.058a4.6 4.6 0 0 0 .046-.701V1.203c0-.02-.009-.032-.03-.03h-.033L16.93 1.17c-.084 0-.073-.01-.073.076v6.491c-.001.018.006.028.025.027h1.494c.083 0 .072.007.072-.071v-2.19c0-.055-.003-.11-.004-.166a3.366 3.366 0 0 0-.05-.417h.06c.104 0 .209.002.313-.002a.082.082 0 0 1 .084.05c.535.913 1.07 1.824 1.607 2.736a.104.104 0 0 0 .103.062c.554-.003 1.107-.002 1.66-.002l.069-.003-.019-.032-.188-.304ZM27.112 6.555c-.005-.08-.004-.08-.082-.08h-2.414c-.053 0-.106-.003-.159-.011a.279.279 0 0 1-.246-.209.558.558 0 0 1-.022-.15c0-.382 0-.762-.002-1.143 0-.032.007-.049.042-.044h2.504c.029.003.037-.012.034-.038V3.814c0-.089.013-.078-.076-.078h-2.44c-.07 0-.062.003-.062-.06v-.837c0-.047.004-.093.013-.14a.283.283 0 0 1 .241-.246.717.717 0 0 1 .146-.011h2.484c.024.002.035-.009.036-.033l.003-.038.03-.496c.01-.183.024-.365.034-.548.005-.085.003-.087-.082-.094-.218-.018-.437-.038-.655-.05a17.845 17.845 0 0 0-.657-.026 72.994 72.994 0 0 0-1.756-.016 1.7 1.7 0 0 0-.471.064 1.286 1.286 0 0 0-.817.655c-.099.196-.149.413-.145.633v3.875c0 .072.003.144.011.216a1.27 1.27 0 0 0 .711 1.029c.228.113.48.167.734.158.757-.005 1.515.002 2.272-.042.274-.016.548-.034.82-.053.03-.002.043-.008.04-.041-.008-.104-.012-.208-.019-.312a69.964 69.964 0 0 1-.05-.768ZM16.14 7.415l-.127-1.075c-.004-.03-.014-.04-.044-.037a13.125 13.125 0 0 1-.998.073c-.336.01-.672.02-1.008.016-.116-.001-.233-.014-.347-.039a.746.746 0 0 1-.45-.262c-.075-.1-.132-.211-.167-.33a3.324 3.324 0 0 1-.126-.773 9.113 9.113 0 0 1-.015-.749c0-.285.022-.57.065-.852.023-.158.066-.312.127-.46a.728.728 0 0 1 .518-.443 1.64 1.64 0 0 1 .397-.048c.628-.001 1.255.003 1.882.05.022.001.033-.006.036-.026l.003-.031.06-.55c.019-.177.036-.355.057-.532.004-.034-.005-.046-.04-.056a5.595 5.595 0 0 0-1.213-.21 10.783 10.783 0 0 0-.708-.02c-.24-.003-.48.01-.719.041a3.477 3.477 0 0 0-.625.14 1.912 1.912 0 0 0-.807.497c-.185.2-.33.433-.424.688a4.311 4.311 0 0 0-.24 1.096c-.031.286-.045.572-.042.86-.006.43.024.86.091 1.286.04.25.104.497.193.734.098.279.26.53.473.734.214.205.473.358.756.446.344.11.702.17 1.063.177a8.505 8.505 0 0 0 1.578-.083 6.11 6.11 0 0 0 .766-.18c.03-.008.047-.023.037-.057a.157.157 0 0 1-.003-.025Z"/><path fill="#AFE229" d="M6.016 6.69a1.592 1.592 0 0 0-.614.21c-.23.132-.422.32-.56.546-.044.072-.287.539-.287.539l-.836 1.528.009.006c.038.025.08.046.123.063.127.046.26.07.395.073.505.023 1.011-.007 1.517-.003.29.009.58.002.869-.022a.886.886 0 0 0 .395-.116.962.962 0 0 0 .312-.286c.056-.083.114-.163.164-.249.24-.408.48-.816.718-1.226.075-.128.148-.257.222-.386l.112-.192a1.07 1.07 0 0 0 .153-.518l-1.304.023s-1.258-.005-1.388.01Z"/><path fill="#771BFF" d="m2.848 9.044.76-1.39.184-.352c-.124-.067-.245-.14-.367-.21-.346-.204-.706-.384-1.045-.6a.984.984 0 0 1-.244-.207c-.108-.134-.136-.294-.144-.46-.021-.409-.002-.818-.009-1.227-.003-.195 0-.39.003-.585.004-.322.153-.553.427-.713l.833-.488c.22-.13.44-.257.662-.385.05-.029.105-.052.158-.077.272-.128.519-.047.76.085l.044.028c.123.06.242.125.358.196.318.178.635.357.952.537.095.056.187.117.275.184.194.144.254.35.266.578.016.284.007.569.006.853-.001.28.004.558 0 .838.592-.003 1.259 0 1.259 0l.723-.013c-.003-.292-.007-.584-.007-.876 0-.524.015-1.048-.016-1.571-.024-.42-.135-.8-.492-1.067a5.02 5.02 0 0 0-.506-.339A400.52 400.52 0 0 0 5.94.787C5.722.664 5.513.524 5.282.423 5.255.406 5.228.388 5.2.373 4.758.126 4.305-.026 3.807.21c-.097.046-.197.087-.29.14A699.896 699.896 0 0 0 .783 1.948c-.501.294-.773.717-.778 1.31-.004.36-.009.718-.001 1.077.016.754-.017 1.508.024 2.261.016.304.07.6.269.848.127.15.279.28.448.382.622.4 1.283.734 1.92 1.11l.183.109Z"/></svg>
`;/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const vge=53,bge=10,yge=50,wge=350,_ge="Powered by";class Cge extends nr(){constructor(e){super(),this.editor=e,this._balloonView=null,this._lastFocusedEditableElement=null,this._showBalloonThrottled=Ea(this._showBalloon.bind(this),50,{leading:!0}),e.on("ready",this._handleEditorReady.bind(this))}destroy(){const e=this._balloonView;e&&(e.unpin(),this._balloonView=null),this._showBalloonThrottled.cancel(),this.stopListening()}_handleEditorReady(){const e=this.editor,t=!!e.config.get("ui.poweredBy.forceVisible");/* istanbul ignore next -- @preserve */!t&&Jle(e.config.get("licenseKey"))==="VALID"||e.ui.view&&(e.ui.focusTracker.on("change:isFocused",(r,i,o)=>{this._updateLastFocusedEditableElement(),o?this._showBalloon():this._hideBalloon()}),e.ui.focusTracker.on("change:focusedElement",(r,i,o)=>{this._updateLastFocusedEditableElement(),o&&this._showBalloon()}),e.ui.on("update",()=>{this._showBalloonThrottled()}))}_createBalloonView(){const e=this.editor,t=this._balloonView=new Cn,r=KD(e),i=new Sge(e.locale,r.label);t.content.add(i),t.set({class:"ck-powered-by-balloon"}),e.ui.view.body.add(t),e.ui.focusTracker.add(t.element),this._balloonView=t}_showBalloon(){if(!this._lastFocusedEditableElement)return;const e=xge(this.editor,this._lastFocusedEditableElement);e&&(this._balloonView||this._createBalloonView(),this._balloonView.pin(e))}_hideBalloon(){this._balloonView&&this._balloonView.unpin()}_updateLastFocusedEditableElement(){const e=this.editor,t=e.ui.focusTracker.isFocused,r=e.ui.focusTracker.focusedElement;if(!t||!r){this._lastFocusedEditableElement=null;return}const i=Array.from(e.ui.getEditableElementsNames()).map(o=>e.ui.getEditableElement(o));i.includes(r)?this._lastFocusedEditableElement=r:this._lastFocusedEditableElement=i[0]}}class Sge extends be{constructor(e,t){super(e);const r=new li,i=this.bindTemplate;r.set({content:pge,isColorInherited:!1}),r.extendTemplate({attributes:{style:{width:vge+"px",height:bge+"px"}}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-powered-by"],"aria-hidden":!0},children:[{tag:"a",attributes:{href:"https://ckeditor.com/?utm_source=ckeditor&utm_medium=referral&utm_campaign=701Dn000000hVgmIAE_powered_by_ckeditor_logo",target:"_blank",tabindex:"-1"},children:[...t?[{tag:"span",attributes:{class:["ck","ck-powered-by__label"]},children:[t]}]:[],r],on:{dragstart:i.to(o=>o.preventDefault())}}]})}}function xge(n,e){const t=KD(n),r=t.side==="right"?Age(e,t):Tge(e,t);return{target:e,positions:[r]}}function Age(n,e){return qD(n,e,(t,r)=>t.left+t.width-r.width-e.horizontalOffset)}function Tge(n,e){return qD(n,e,t=>t.left+e.horizontalOffset)}function qD(n,e,t){return(r,i)=>{const o=new De(n);if(o.width<wge||o.height<yge)return null;let s;e.position==="inside"?s=o.bottom-i.height:s=o.bottom-i.height/2,s-=e.verticalOffset;const a=t(o,i),c=r.clone().moveTo(a,s).getIntersection(i.clone().moveTo(a,s)).getVisible();return!c||c.getArea()<i.getArea()?null:{top:s,left:a,name:`position_${e.position}-side_${e.side}`,config:{withArrow:!1}}}}function KD(n){const e=n.config.get("ui.poweredBy"),t=e&&e.position||"border";return{position:t,label:_ge,verticalOffset:t==="inside"?5:0,horizontalOffset:5,side:n.locale.contentLanguageDirection==="ltr"?"right":"left",...e}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const QT={POLITE:"polite",ASSERTIVE:"assertive"};class Ege{constructor(e){this.editor=e,e.once("ready",()=>{for(const t of Object.values(QT))this.announce("",t)})}announce(e,t=QT.POLITE){const r=this.editor;if(!r.ui.view)return;this.view||(this.view=new kge(r.locale),r.ui.view.body.add(this.view));const{politeness:i,isUnsafeHTML:o}=typeof t=="string"?{politeness:t}:t;let s=this.view.regionViews.find(a=>a.politeness===i);s||(s=new Pge(r,i),this.view.regionViews.add(s)),s.announce({announcement:e,isUnsafeHTML:o})}}class kge extends be{constructor(e){super(e),this.regionViews=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-aria-live-announcer"]},children:this.regionViews})}}class Pge extends be{constructor(e,t){super(e.locale),this.setTemplate({tag:"div",attributes:{role:"region","aria-live":t,"aria-relevant":"additions"},children:[{tag:"ul",attributes:{class:["ck","ck-aria-live-region-list"]}}]}),e.on("destroy",()=>{this._pruneAnnouncementsInterval!==null&&(clearInterval(this._pruneAnnouncementsInterval),this._pruneAnnouncementsInterval=null)}),this.politeness=t,this._domConverter=e.data.htmlProcessor.domConverter,this._pruneAnnouncementsInterval=setInterval(()=>{this.element&&this._listElement.firstChild&&this._listElement.firstChild.remove()},5e3)}announce({announcement:e,isUnsafeHTML:t}){if(!e.trim().length)return;const r=document.createElement("li");t?this._domConverter.setContentOf(r,e):r.innerText=e,this._listElement.appendChild(r)}get _listElement(){return this.element.querySelector("ul")}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ige extends ct(){constructor(e){super(),this.isReady=!1,this._editableElementsMap=new Map,this._focusableToolbarDefinitions=[];const t=e.editing.view;this.editor=e,this.componentFactory=new lge(e),this.focusTracker=new Ut,this.tooltipManager=new on(e),this.poweredBy=new Cge(e),this.ariaLiveAnnouncer=new Ege(e),this.set("viewportOffset",this._readViewportOffsetFromConfig()),this.once("ready",()=>{this.isReady=!0}),this.listenTo(t.document,"layoutChanged",this.update.bind(this)),this.listenTo(t,"scrollToTheSelection",this._handleScrollToTheSelection.bind(this)),this._initFocusTracking()}get element(){return null}update(){this.fire("update")}destroy(){this.stopListening(),this.focusTracker.destroy(),this.tooltipManager.destroy(this.editor),this.poweredBy.destroy();for(const e of this._editableElementsMap.values())e.ckeditorInstance=null,this.editor.keystrokes.stopListening(e);this._editableElementsMap=new Map,this._focusableToolbarDefinitions=[]}setEditableElement(e,t){this._editableElementsMap.set(e,t),t.ckeditorInstance||(t.ckeditorInstance=this.editor),this.focusTracker.add(t);const r=()=>{this.editor.editing.view.getDomRoot(e)||this.editor.keystrokes.listenTo(t)};this.isReady?r():this.once("ready",r)}removeEditableElement(e){const t=this._editableElementsMap.get(e);t&&(this._editableElementsMap.delete(e),this.editor.keystrokes.stopListening(t),this.focusTracker.remove(t),t.ckeditorInstance=null)}getEditableElement(e="main"){return this._editableElementsMap.get(e)}getEditableElementsNames(){return this._editableElementsMap.keys()}addToolbar(e,t={}){e.isRendered?(this.focusTracker.add(e.element),this.editor.keystrokes.listenTo(e.element)):e.once("render",()=>{this.focusTracker.add(e.element),this.editor.keystrokes.listenTo(e.element)}),this._focusableToolbarDefinitions.push({toolbarView:e,options:t})}get _editableElements(){return console.warn("editor-ui-deprecated-editable-elements: The EditorUI#_editableElements property has been deprecated and will be removed in the near future.",{editorUI:this}),this._editableElementsMap}_readViewportOffsetFromConfig(){const e=this.editor,t=e.config.get("ui.viewportOffset");if(t)return t;const r=e.config.get("toolbar.viewportTopOffset");return r?(console.warn("editor-ui-deprecated-viewport-offset-config: The `toolbar.vieportTopOffset` configuration option is deprecated. It will be removed from future CKEditor versions. Use `ui.viewportOffset.top` instead."),{top:r}):{top:0}}_initFocusTracking(){const e=this.editor,t=e.editing.view;let r,i;e.keystrokes.set("Alt+F10",(o,s)=>{const a=this.focusTracker.focusedElement;Array.from(this._editableElementsMap.values()).includes(a)&&!Array.from(t.domRoots.values()).includes(a)&&(r=a);const l=this._getCurrentFocusedToolbarDefinition();(!l||!i)&&(i=this._getFocusableCandidateToolbarDefinitions());for(let c=0;c<i.length;c++){const u=i.shift();if(i.push(u),u!==l&&this._focusFocusableCandidateToolbar(u)){l&&l.options.afterBlur&&l.options.afterBlur();break}}s()}),e.keystrokes.set("Esc",(o,s)=>{const a=this._getCurrentFocusedToolbarDefinition();a&&(r?(r.focus(),r=null):e.editing.view.focus(),a.options.afterBlur&&a.options.afterBlur(),s())})}_getFocusableCandidateToolbarDefinitions(){const e=[];for(const t of this._focusableToolbarDefinitions){const{toolbarView:r,options:i}=t;(Cs(r.element)||i.beforeFocus)&&e.push(t)}return e.sort((t,r)=>eE(t)-eE(r)),e}_getCurrentFocusedToolbarDefinition(){for(const e of this._focusableToolbarDefinitions)if(e.toolbarView.element&&e.toolbarView.element.contains(this.focusTracker.focusedElement))return e;return null}_focusFocusableCandidateToolbar(e){const{toolbarView:t,options:{beforeFocus:r}}=e;return r&&r(),Cs(t.element)?(t.focus(),!0):!1}_handleScrollToTheSelection(e,t){const r={top:0,bottom:0,left:0,right:0,...this.viewportOffset};t.viewportOffset.top+=r.top,t.viewportOffset.bottom+=r.bottom,t.viewportOffset.left+=r.left,t.viewportOffset.right+=r.right}}function eE(n){const{toolbarView:e,options:t}=n;let r=10;return Cs(e.element)&&r--,t.isContextual&&r--,r}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Oge extends be{constructor(e){super(e),this.body=new Ghe(e)}render(){super.render(),this.body.attachToDom()}destroy(){return this.body.detachFromDom(),super.destroy()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Rge extends Oge{constructor(e){super(e),this.top=this.createCollection(),this.main=this.createCollection(),this._voiceLabelView=this._createVoiceLabel(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-editor","ck-rounded-corners"],role:"application",dir:e.uiLanguageDirection,lang:e.uiLanguage,"aria-labelledby":this._voiceLabelView.id},children:[this._voiceLabelView,{tag:"div",attributes:{class:["ck","ck-editor__top","ck-reset_all"],role:"presentation"},children:this.top},{tag:"div",attributes:{class:["ck","ck-editor__main"],role:"presentation"},children:this.main}]})}_createVoiceLabel(){const e=this.t,t=new ld;return t.text=e("Rich Text Editor"),t.extendTemplate({attributes:{class:"ck-voice-label"}}),t}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Mge extends be{constructor(e,t,r){super(e),this.name=null,this.setTemplate({tag:"div",attributes:{class:["ck","ck-content","ck-editor__editable","ck-rounded-corners"],lang:e.contentLanguage,dir:e.contentLanguageDirection}}),this.set("isFocused",!1),this._editableElement=r,this._hasExternalElement=!!this._editableElement,this._editingView=t}render(){super.render(),this._hasExternalElement?this.template.apply(this.element=this._editableElement):this._editableElement=this.element,this.on("change:isFocused",()=>this._updateIsFocusedClasses()),this._updateIsFocusedClasses()}destroy(){this._hasExternalElement&&this.template.revert(this._editableElement),super.destroy()}get hasExternalElement(){return this._hasExternalElement}_updateIsFocusedClasses(){const e=this._editingView;e.isRenderingInProgress?r(this):t(this);function t(i){e.change(o=>{const s=e.document.getRoot(i.name);o.addClass(i.isFocused?"ck-focused":"ck-blurred",s),o.removeClass(i.isFocused?"ck-blurred":"ck-focused",s)})}function r(i){e.once("change:isRenderingInProgress",(o,s,a)=>{a?r(i):t(i)})}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Dge extends Mge{constructor(e,t,r,i={}){super(e,t,r);const o=e.t;this.extendTemplate({attributes:{role:"textbox",class:"ck-editor__editable_inline"}}),this._generateLabel=i.label||(()=>o("Editor editing area: %0",this.name))}render(){super.render();const e=this._editingView;e.change(t=>{const r=e.document.getRoot(this.name);t.setAttribute("aria-label",this._generateLabel(this),r)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class tE extends NM{static get pluginName(){return"Notification"}init(){this.on("show:warning",(e,t)=>{window.alert(t.message)},{priority:"lowest"})}showSuccess(e,t={}){this._showNotification({message:e,type:"success",namespace:t.namespace,title:t.title})}showInfo(e,t={}){this._showNotification({message:e,type:"info",namespace:t.namespace,title:t.title})}showWarning(e,t={}){this._showNotification({message:e,type:"warning",namespace:t.namespace,title:t.title})}_showNotification(e){const t=e.namespace?`show:${e.type}:${e.namespace}`:`show:${e.type}`;this.fire(t,{message:e.message,type:e.type,title:e.title||""})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class rl extends ct(){constructor(e,t){super(),t&&nI(this,t),e&&this.set(e)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const uf=Al("px");class Du extends W{static get pluginName(){return"ContextualBalloon"}constructor(e){super(e),this._viewToStack=new Map,this._idToStack=new Map,this._view=null,this._rotatorView=null,this._fakePanelsView=null,this.positionLimiter=()=>{const t=this.editor.editing.view,i=t.document.selection.editableElement;return i?t.domConverter.mapViewToDom(i.root):null},this.set("visibleView",null),this.set("_numberOfStacks",0),this.set("_singleViewMode",!1)}destroy(){super.destroy(),this._view&&this._view.destroy(),this._rotatorView&&this._rotatorView.destroy(),this._fakePanelsView&&this._fakePanelsView.destroy()}get view(){return this._view||this._createPanelView(),this._view}hasView(e){return Array.from(this._viewToStack.keys()).includes(e)}add(e){if(this._view||this._createPanelView(),this.hasView(e.view))throw new M("contextualballoon-add-view-exist",[this,e]);const t=e.stackId||"main";if(!this._idToStack.has(t)){this._idToStack.set(t,new Map([[e.view,e]])),this._viewToStack.set(e.view,this._idToStack.get(t)),this._numberOfStacks=this._idToStack.size,(!this._visibleStack||e.singleViewMode)&&this.showStack(t);return}const r=this._idToStack.get(t);e.singleViewMode&&this.showStack(t),r.set(e.view,e),this._viewToStack.set(e.view,r),r===this._visibleStack&&this._showView(e)}remove(e){if(!this.hasView(e))throw new M("contextualballoon-remove-view-not-exist",[this,e]);const t=this._viewToStack.get(e);this._singleViewMode&&this.visibleView===e&&(this._singleViewMode=!1),this.visibleView===e&&(t.size===1?this._idToStack.size>1?this._showNextStack():(this.view.hide(),this.visibleView=null,this._rotatorView.hideView()):this._showView(Array.from(t.values())[t.size-2])),t.size===1?(this._idToStack.delete(this._getStackId(t)),this._numberOfStacks=this._idToStack.size):t.delete(e),this._viewToStack.delete(e)}updatePosition(e){e&&(this._visibleStack.get(this.visibleView).position=e),this.view.pin(this._getBalloonPosition()),this._fakePanelsView.updatePosition()}showStack(e){this.visibleStack=e;const t=this._idToStack.get(e);if(!t)throw new M("contextualballoon-showstack-stack-not-exist",this);this._visibleStack!==t&&this._showView(Array.from(t.values()).pop())}_createPanelView(){this._view=new Cn(this.editor.locale),this.editor.ui.view.body.add(this._view),this.editor.ui.focusTracker.add(this._view.element),this._rotatorView=this._createRotatorView(),this._fakePanelsView=this._createFakePanelsView()}get _visibleStack(){return this._viewToStack.get(this.visibleView)}_getStackId(e){return Array.from(this._idToStack.entries()).find(r=>r[1]===e)[0]}_showNextStack(){const e=Array.from(this._idToStack.values());let t=e.indexOf(this._visibleStack)+1;e[t]||(t=0),this.showStack(this._getStackId(e[t]))}_showPrevStack(){const e=Array.from(this._idToStack.values());let t=e.indexOf(this._visibleStack)-1;e[t]||(t=e.length-1),this.showStack(this._getStackId(e[t]))}_createRotatorView(){const e=new Bge(this.editor.locale),t=this.editor.locale.t;return this.view.content.add(e),e.bind("isNavigationVisible").to(this,"_numberOfStacks",this,"_singleViewMode",(r,i)=>!i&&r>1),e.on("change:isNavigationVisible",()=>this.updatePosition(),{priority:"low"}),e.bind("counter").to(this,"visibleView",this,"_numberOfStacks",(r,i)=>{if(i<2)return"";const o=Array.from(this._idToStack.values()).indexOf(this._visibleStack)+1;return t("%0 of %1",[o,i])}),e.buttonNextView.on("execute",()=>{e.focusTracker.isFocused&&this.editor.editing.view.focus(),this._showNextStack()}),e.buttonPrevView.on("execute",()=>{e.focusTracker.isFocused&&this.editor.editing.view.focus(),this._showPrevStack()}),e}_createFakePanelsView(){const e=new Nge(this.editor.locale,this.view);return e.bind("numberOfPanels").to(this,"_numberOfStacks",this,"_singleViewMode",(t,r)=>!r&&t>=2?Math.min(t-1,2):0),e.listenTo(this.view,"change:top",()=>e.updatePosition()),e.listenTo(this.view,"change:left",()=>e.updatePosition()),this.editor.ui.view.body.add(e),e}_showView({view:e,balloonClassName:t="",withArrow:r=!0,singleViewMode:i=!1}){this.view.class=t,this.view.withArrow=r,this._rotatorView.showView(e),this.visibleView=e,this.view.pin(this._getBalloonPosition()),this._fakePanelsView.updatePosition(),i&&(this._singleViewMode=!0)}_getBalloonPosition(){let e=Array.from(this._visibleStack.values()).pop().position;return e&&(e.limiter||(e=Object.assign({},e,{limiter:this.positionLimiter})),e=Object.assign({},e,{viewportOffsetConfig:this.editor.ui.viewportOffset})),e}}class Bge extends be{constructor(e){super(e);const t=e.t,r=this.bindTemplate;this.set("isNavigationVisible",!0),this.focusTracker=new Ut,this.buttonPrevView=this._createButtonView(t("Previous"),Ee.previousArrow),this.buttonNextView=this._createButtonView(t("Next"),Ee.nextArrow),this.content=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-rotator"],"z-index":"-1"},children:[{tag:"div",attributes:{class:["ck-balloon-rotator__navigation",r.to("isNavigationVisible",i=>i?"":"ck-hidden")]},children:[this.buttonPrevView,{tag:"span",attributes:{class:["ck-balloon-rotator__counter"]},children:[{text:r.to("counter")}]},this.buttonNextView]},{tag:"div",attributes:{class:"ck-balloon-rotator__content"},children:this.content}]})}render(){super.render(),this.focusTracker.add(this.element)}destroy(){super.destroy(),this.focusTracker.destroy()}showView(e){this.hideView(),this.content.add(e)}hideView(){this.content.clear()}_createButtonView(e,t){const r=new Ne(this.locale);return r.set({label:e,icon:t,tooltip:!0}),r}}class Nge extends be{constructor(e,t){super(e);const r=this.bindTemplate;this.set("top",0),this.set("left",0),this.set("height",0),this.set("width",0),this.set("numberOfPanels",0),this.content=this.createCollection(),this._balloonPanelView=t,this.setTemplate({tag:"div",attributes:{class:["ck-fake-panel",r.to("numberOfPanels",i=>i?"":"ck-hidden")],style:{top:r.to("top",uf),left:r.to("left",uf),width:r.to("width",uf),height:r.to("height",uf)}},children:this.content}),this.on("change:numberOfPanels",(i,o,s,a)=>{s>a?this._addPanels(s-a):this._removePanels(a-s),this.updatePosition()})}_addPanels(e){for(;e--;){const t=new be;t.setTemplate({tag:"div"}),this.content.add(t),this.registerChild(t)}}_removePanels(e){for(;e--;){const t=this.content.last;this.content.remove(t),this.deregisterChild(t),t.destroy()}}updatePosition(){if(this.numberOfPanels){const{top:e,left:t}=this._balloonPanelView,{width:r,height:i}=new De(this._balloonPanelView.element);Object.assign(this,{top:e,left:t,width:r,height:i})}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Xs=Al("px");class Lge extends be{constructor(e){super(e);const t=this.bindTemplate;this.set("isActive",!1),this.set("isSticky",!1),this.set("limiterElement",null),this.set("limiterBottomOffset",50),this.set("viewportTopOffset",0),this.set("_marginLeft",null),this.set("_isStickyToTheBottomOfLimiter",!1),this.set("_stickyTopOffset",null),this.set("_stickyBottomOffset",null),this.content=this.createCollection(),this._contentPanelPlaceholder=new Jn({tag:"div",attributes:{class:["ck","ck-sticky-panel__placeholder"],style:{display:t.to("isSticky",r=>r?"block":"none"),height:t.to("isSticky",r=>r?Xs(this._contentPanelRect.height):null)}}}).render(),this.contentPanelElement=new Jn({tag:"div",attributes:{class:["ck","ck-sticky-panel__content",t.if("isSticky","ck-sticky-panel__content_sticky"),t.if("_isStickyToTheBottomOfLimiter","ck-sticky-panel__content_sticky_bottom-limit")],style:{width:t.to("isSticky",r=>r?Xs(this._contentPanelPlaceholder.getBoundingClientRect().width):null),top:t.to("_stickyTopOffset",r=>r&&Xs(r)),bottom:t.to("_stickyBottomOffset",r=>r&&Xs(r)),marginLeft:t.to("_marginLeft")}},children:this.content}).render(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-sticky-panel"]},children:[this._contentPanelPlaceholder,this.contentPanelElement]})}render(){super.render(),this.checkIfShouldBeSticky(),this.listenTo(he.document,"scroll",()=>{this.checkIfShouldBeSticky()},{useCapture:!0}),this.listenTo(this,"change:isActive",()=>{this.checkIfShouldBeSticky()})}checkIfShouldBeSticky(){if(!this.limiterElement||!this.isActive){this._unstick();return}const e=new De(this.limiterElement);let t=e.getVisible();if(t){const r=new De(he.window);r.top+=this.viewportTopOffset,r.height-=this.viewportTopOffset,t=t.getIntersection(r)}if(t&&e.top<t.top){const r=t.top;if(r+this._contentPanelRect.height+this.limiterBottomOffset>t.bottom){const i=Math.max(e.bottom-t.bottom,0)+this.limiterBottomOffset;e.bottom-i>e.top+this._contentPanelRect.height?this._stickToBottomOfLimiter(i):this._unstick()}else this._contentPanelRect.height+this.limiterBottomOffset<e.height?this._stickToTopOfAncestors(r):this._unstick()}else this._unstick()}_stickToTopOfAncestors(e){this.isSticky=!0,this._isStickyToTheBottomOfLimiter=!1,this._stickyTopOffset=e,this._stickyBottomOffset=null,this._marginLeft=Xs(-he.window.scrollX)}_stickToBottomOfLimiter(e){this.isSticky=!0,this._isStickyToTheBottomOfLimiter=!0,this._stickyTopOffset=null,this._stickyBottomOffset=e,this._marginLeft=Xs(-he.window.scrollX)}_unstick(){this.isSticky=!1,this._isStickyToTheBottomOfLimiter=!1,this._stickyTopOffset=null,this._stickyBottomOffset=null,this._marginLeft=null}get _contentPanelRect(){return new De(this.contentPanelElement)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Fge extends El{constructor(e,t){const r=e.t,i=Object.assign({},{showResetButton:!0,showIcon:!0,creator:hd},t);super(e,i.creator),this.label=t.label,this._viewConfig=i,this._viewConfig.showIcon&&(this.iconView=new li,this.iconView.content=Ee.loupe,this.fieldWrapperChildren.add(this.iconView,0),this.extendTemplate({attributes:{class:"ck-search__query_with-icon"}})),this._viewConfig.showResetButton&&(this.resetButtonView=new Ne(e),this.resetButtonView.set({label:r("Clear"),icon:Ee.cancel,class:"ck-search__reset",isVisible:!1,tooltip:!0}),this.resetButtonView.on("execute",()=>{this.reset(),this.focus(),this.fire("reset")}),this.resetButtonView.bind("isVisible").to(this.fieldView,"isEmpty",o=>!o),this.fieldWrapperChildren.add(this.resetButtonView),this.extendTemplate({attributes:{class:"ck-search__query_with-reset"}}))}reset(){this.fieldView.reset(),this._viewConfig.showResetButton&&(this.resetButtonView.isVisible=!1)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class $ge extends be{constructor(){super();const e=this.bindTemplate;this.set({isVisible:!1,primaryText:"",secondaryText:""}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-search__info",e.if("isVisible","ck-hidden",t=>!t)],tabindex:-1},children:[{tag:"span",children:[{text:[e.to("primaryText")]}]},{tag:"span",children:[{text:[e.to("secondaryText")]}]}]})}focus(){this.element.focus()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Vge extends be{constructor(e){super(e),this.children=this.createCollection(),this.focusTracker=new Ut,this.setTemplate({tag:"div",attributes:{class:["ck","ck-search__results"],tabindex:-1},children:this.children}),this._focusCycler=new ir({focusables:this.children,focusTracker:this.focusTracker})}render(){super.render();for(const e of this.children)this.focusTracker.add(e.element)}focus(){this._focusCycler.focusFirst()}focusFirst(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class zge extends be{constructor(e,t){super(e),this._config=t,this.filteredView=t.filteredView,this.queryView=this._createSearchTextQueryView(),this.focusTracker=new Ut,this.keystrokes=new mn,this.resultsView=new Vge(e),this.children=this.createCollection(),this.focusableChildren=this.createCollection([this.queryView,this.resultsView]),this.set("isEnabled",!0),this.set("resultsCount",0),this.set("totalItemsCount",0),t.infoView&&t.infoView.instance?this.infoView=t.infoView.instance:(this.infoView=new $ge,this._enableDefaultInfoViewBehavior(),this.on("render",()=>{this.search("")})),this.resultsView.children.addMany([this.infoView,this.filteredView]),this.focusCycler=new ir({focusables:this.focusableChildren,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.on("search",(r,{resultsCount:i,totalItemsCount:o})=>{this.resultsCount=i,this.totalItemsCount=o}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-search",t.class||null],tabindex:"-1"},children:this.children})}render(){super.render(),this.children.addMany([this.queryView,this.resultsView]);const e=t=>t.stopPropagation();for(const t of this.focusableChildren)this.focusTracker.add(t.element);this.keystrokes.listenTo(this.element),this.keystrokes.set("arrowright",e),this.keystrokes.set("arrowleft",e),this.keystrokes.set("arrowup",e),this.keystrokes.set("arrowdown",e)}focus(){this.queryView.focus()}reset(){this.queryView.reset(),this.search("")}search(e){const t=e?new RegExp(rI(e),"ig"):null,r=this.filteredView.filter(t);this.fire("search",{query:e,...r})}_createSearchTextQueryView(){const e=new Fge(this.locale,this._config.queryView);return this.listenTo(e.fieldView,"input",()=>{this.search(e.fieldView.element.value)}),e.on("reset",()=>this.reset()),e.bind("isEnabled").to(this),e}_enableDefaultInfoViewBehavior(){const e=this.locale.t,t=this.infoView;this.on("search",(i,o)=>{if(o.resultsCount)t.set({isVisible:!1});else{const s=this._config.infoView&&this._config.infoView.text;let a,l;o.totalItemsCount?s&&s.notFound?(a=s.notFound.primary,l=s.notFound.secondary):(a=e("No results found"),l=""):s&&s.noSearchableItems?(a=s.noSearchableItems.primary,l=s.noSearchableItems.secondary):(a=e("No searchable items"),l=""),t.set({primaryText:r(a,o),secondaryText:r(l,o),isVisible:!0})}});function r(i,{query:o,resultsCount:s,totalItemsCount:a}){return typeof i=="function"?i(o,s,a):i}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Bu extends zge{constructor(e,t){super(e,t),this._config=t;const r=Al("px");this.extendTemplate({attributes:{class:["ck-autocomplete"]}});const i=this.resultsView.bindTemplate;this.resultsView.set("isVisible",!1),this.resultsView.set("_position","s"),this.resultsView.set("_width",0),this.resultsView.extendTemplate({attributes:{class:[i.if("isVisible","ck-hidden",o=>!o),i.to("_position",o=>`ck-search__results_${o}`)],style:{width:i.to("_width",r)}}}),this.focusTracker.on("change:isFocused",(o,s,a)=>{this._updateResultsVisibility(),a?this.resultsView.element.scrollTop=0:t.resetOnBlur&&this.queryView.reset()}),this.on("search",()=>{this._updateResultsVisibility(),this._updateResultsViewWidthAndPosition()}),this.keystrokes.set("esc",(o,s)=>{this.resultsView.isVisible&&(this.queryView.focus(),this.resultsView.isVisible=!1,s())}),this.listenTo(he.document,"scroll",()=>{this._updateResultsViewWidthAndPosition()}),this.on("change:isEnabled",()=>{this._updateResultsVisibility()}),this.filteredView.on("execute",(o,{value:s})=>{this.focus(),this.reset(),this.queryView.fieldView.value=this.queryView.fieldView.element.value=s,this.resultsView.isVisible=!1}),this.resultsView.on("change:isVisible",()=>{this._updateResultsViewWidthAndPosition()})}_updateResultsViewWidthAndPosition(){if(!this.resultsView.isVisible)return;this.resultsView._width=new De(this.queryView.fieldView.element).width;const e=Bu._getOptimalPosition({element:this.resultsView.element,target:this.queryView.element,fitInViewport:!0,positions:Bu.defaultResultsPositions});this.resultsView._position=e?e.name:"s"}_updateResultsVisibility(){const e=typeof this._config.queryMinChars>"u"?0:this._config.queryMinChars,t=this.queryView.fieldView.element.value.length;this.resultsView.isVisible=this.focusTracker.isFocused&&this.isEnabled&&t>=e}}Bu.defaultResultsPositions=[n=>({top:n.bottom,left:n.left,name:"s"}),(n,e)=>({top:n.top-e.height,left:n.left,name:"n"})];Bu._getOptimalPosition=yg;/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class jge extends Ne{constructor(e){super(e);const t=this.bindTemplate;this.set({withText:!0,role:"menuitem"}),this.arrowView=this._createArrowView(),this.extendTemplate({attributes:{class:["ck-menu-bar__menu__button"],"aria-haspopup":!0,"aria-expanded":this.bindTemplate.to("isOn",r=>String(r)),"data-cke-tooltip-disabled":t.to("isOn")},on:{mouseenter:t.to("mouseenter")}})}render(){super.render(),this.children.add(this.arrowView)}_createArrowView(){const e=new li;return e.content=Ag,e.extendTemplate({attributes:{class:"ck-menu-bar__menu__button__arrow"}}),e}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Oo extends tl{constructor(e,t){super(e);const r=this.bindTemplate;this.extendTemplate({attributes:{class:["ck-menu-bar__menu__item"]},on:{mouseenter:r.to("mouseenter")}}),this.delegate("mouseenter").to(t)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const df=5,nc={toggleMenusAndFocusItemsOnHover(n){n.on("menu:mouseenter",e=>{if(n.isOpen){for(const t of n.menus){const r=e.path[0],i=r instanceof Oo&&r.children.first===t;t.isOpen=(e.path.includes(t)||i)&&t.isEnabled}e.source.focus()}})},focusCycleMenusOnArrows(n){const e=n.locale.uiLanguageDirection==="rtl";n.on("menu:arrowright",r=>{t(r.source,e?-1:1)}),n.on("menu:arrowleft",r=>{t(r.source,e?1:-1)});function t(r,i){const o=n.children.getIndex(r),s=r.isOpen,a=n.children.length,l=n.children.get((o+a+i)%a);r.isOpen=!1,s&&(l.isOpen=!0),l.buttonView.focus()}},closeMenusWhenTheBarCloses(n){n.on("change:isOpen",()=>{n.isOpen||n.menus.forEach(e=>{e.isOpen=!1})})},closeMenuWhenAnotherOnTheSameLevelOpens(n){n.on("menu:change:isOpen",(e,t,r)=>{r&&n.menus.filter(i=>e.source.parentMenuView===i.parentMenuView&&e.source!==i&&i.isOpen).forEach(i=>{i.isOpen=!1})})},closeOnClickOutside(n){od({emitter:n,activator:()=>n.isOpen,callback:()=>n.close(),contextElements:()=>n.children.map(e=>e.element)})}},qo={openAndFocusPanelOnArrowDownKey(n){n.keystrokes.set("arrowdown",(e,t)=>{n.focusTracker.focusedElement===n.buttonView.element&&(n.isOpen||(n.isOpen=!0),n.panelView.focus(),t())})},openOnArrowRightKey(n){const e=n.locale.uiLanguageDirection==="rtl"?"arrowleft":"arrowright";n.keystrokes.set(e,(t,r)=>{n.focusTracker.focusedElement!==n.buttonView.element||!n.isEnabled||(n.isOpen||(n.isOpen=!0),n.panelView.focus(),r())})},openOnButtonClick(n){n.buttonView.on("execute",()=>{n.isOpen=!0,n.panelView.focus()})},toggleOnButtonClick(n){n.buttonView.on("execute",()=>{n.isOpen=!n.isOpen,n.isOpen&&n.panelView.focus()})},closeOnArrowLeftKey(n){const e=n.locale.uiLanguageDirection==="rtl"?"arrowright":"arrowleft";n.keystrokes.set(e,(t,r)=>{n.isOpen&&(n.isOpen=!1,n.focus(),r())})},closeOnEscKey(n){n.keystrokes.set("esc",(e,t)=>{n.isOpen&&(n.isOpen=!1,n.focus(),t())})},closeOnParentClose(n){n.parentMenuView.on("change:isOpen",(e,t,r)=>{!r&&e.source===n.parentMenuView&&(n.isOpen=!1)})}},Wge={southEast:n=>({top:n.bottom,left:n.left,name:"se"}),southWest:(n,e)=>({top:n.bottom,left:n.left-e.width+n.width,name:"sw"}),northEast:(n,e)=>({top:n.top-e.height,left:n.left,name:"ne"}),northWest:(n,e)=>({top:n.top-e.height,left:n.left-e.width+n.width,name:"nw"}),eastSouth:n=>({top:n.top,left:n.right-df,name:"es"}),eastNorth:(n,e)=>({top:n.top-e.height,left:n.right-df,name:"en"}),westSouth:(n,e)=>({top:n.top,left:n.left-e.width+df,name:"ws"}),westNorth:(n,e)=>({top:n.top-e.height,left:n.left-e.width+df,name:"wn"})},Hge=[{menuId:"file",label:"File",groups:[{groupId:"export",items:["menuBar:exportPdf","menuBar:exportWord"]},{groupId:"import",items:["menuBar:importWord"]},{groupId:"revisionHistory",items:["menuBar:revisionHistory"]}]},{menuId:"edit",label:"Edit",groups:[{groupId:"undo",items:["menuBar:undo","menuBar:redo"]},{groupId:"selectAll",items:["menuBar:selectAll"]},{groupId:"findAndReplace",items:["menuBar:findAndReplace"]}]},{menuId:"view",label:"View",groups:[{groupId:"sourceEditing",items:["menuBar:sourceEditing"]},{groupId:"showBlocks",items:["menuBar:showBlocks"]},{groupId:"restrictedEditingException",items:["menuBar:restrictedEditingException"]}]},{menuId:"insert",label:"Insert",groups:[{groupId:"insertMainWidgets",items:["menuBar:uploadImage","menuBar:ckbox","menuBar:ckfinder","menuBar:insertTable"]},{groupId:"insertInline",items:["menuBar:link","menuBar:comment"]},{groupId:"insertMinorWidgets",items:["menuBar:insertTemplate","menuBar:blockQuote","menuBar:codeBlock","menuBar:htmlEmbed"]},{groupId:"insertStructureWidgets",items:["menuBar:horizontalLine","menuBar:pageBreak","menuBar:tableOfContents"]},{groupId:"restrictedEditing",items:["menuBar:restrictedEditing"]}]},{menuId:"format",label:"Format",groups:[{groupId:"textAndFont",items:[{menuId:"text",label:"Text",groups:[{groupId:"basicStyles",items:["menuBar:bold","menuBar:italic","menuBar:underline","menuBar:strikethrough","menuBar:superscript","menuBar:subscript","menuBar:code"]},{groupId:"textPartLanguage",items:["menuBar:textPartLanguage"]}]},{menuId:"font",label:"Font",groups:[{groupId:"fontProperties",items:["menuBar:fontSize","menuBar:fontFamily"]},{groupId:"fontColors",items:["menuBar:fontColor","menuBar:fontBackgroundColor"]},{groupId:"highlight",items:["menuBar:highlight"]}]},"menuBar:heading"]},{groupId:"list",items:["menuBar:bulletedList","menuBar:numberedList","menuBar:todoList"]},{groupId:"indent",items:["menuBar:alignment","menuBar:indent","menuBar:outdent"]},{groupId:"caseChange",items:["menuBar:caseChange"]},{groupId:"removeFormat",items:["menuBar:removeFormat"]}]},{menuId:"tools",label:"Tools",groups:[{groupId:"aiTools",items:["menuBar:aiAssistant","menuBar:aiCommands"]},{groupId:"tools",items:["menuBar:trackChanges","menuBar:commentsArchive"]}]},{menuId:"help",label:"Help",groups:[{groupId:"help",items:["menuBar:accessibilityHelp"]}]}];function Uge(n){let e;return!("items"in n)||!n.items?e={items:Lr(Hge),addItems:[],removeItems:[],isVisible:!0,isUsingDefaultConfig:!0,...n}:e={items:n.items,removeItems:[],addItems:[],isVisible:!0,isUsingDefaultConfig:!1,...n},e}function Gge({normalizedConfig:n,locale:e,componentFactory:t}){const r=Lr(n);return qge(n,r),Kge(n,r),Yge(n,r,t),YD(n,r),Xge(r,e),r}function qge(n,e){const t=e.removeItems,r=[];e.items=e.items.filter(({menuId:i})=>t.includes(i)?(r.push(i),!1):!0),kl(e.items,i=>{i.groups=i.groups.filter(({groupId:o})=>t.includes(o)?(r.push(o),!1):!0);for(const o of i.groups)o.items=o.items.filter(s=>{const a=XD(s);return t.includes(a)?(r.push(a),!1):!0})});for(const i of t)r.includes(i)||Ye("menu-bar-item-could-not-be-removed",{menuBarConfig:n,itemName:i})}function Kge(n,e){const t=e.addItems,r=[];for(const i of t){const o=Qge(i.position),s=epe(i.position);if(Zge(i))if(!s)o==="start"?(e.items.unshift(i.menu),r.push(i)):o==="end"&&(e.items.push(i.menu),r.push(i));else{const a=e.items.findIndex(l=>l.menuId===s);a!=-1?o==="before"?(e.items.splice(a,0,i.menu),r.push(i)):o==="after"&&(e.items.splice(a+1,0,i.menu),r.push(i)):nE(e,i.menu,s,o)&&r.push(i)}else Jge(i)?kl(e.items,a=>{if(a.menuId===s)o==="start"?(a.groups.unshift(i.group),r.push(i)):o==="end"&&(a.groups.push(i.group),r.push(i));else{const l=a.groups.findIndex(c=>c.groupId===s);l!==-1&&(o==="before"?(a.groups.splice(l,0,i.group),r.push(i)):o==="after"&&(a.groups.splice(l+1,0,i.group),r.push(i)))}}):nE(e,i.item,s,o)&&r.push(i)}for(const i of t)r.includes(i)||Ye("menu-bar-item-could-not-be-added",{menuBarConfig:n,addedItemConfig:i})}function nE(n,e,t,r){let i=!1;return kl(n.items,o=>{for(const{groupId:s,items:a}of o.groups){if(i)return;if(s===t)r==="start"?(a.unshift(e),i=!0):r==="end"&&(a.push(e),i=!0);else{const l=a.findIndex(c=>XD(c)===t);l!==-1&&(r==="before"?(a.splice(l,0,e),i=!0):r==="after"&&(a.splice(l+1,0,e),i=!0))}}}),i}function Yge(n,e,t){kl(e.items,r=>{for(const i of r.groups)i.items=i.items.filter(o=>{const s=typeof o=="string"&&!t.has(o);return s&&!e.isUsingDefaultConfig&&Ye("menu-bar-item-unavailable",{menuBarConfig:n,parentMenuConfig:Lr(r),componentName:o}),!s})})}function YD(n,e){const t=e.isUsingDefaultConfig;let r=!1;if(e.items=e.items.filter(i=>i.groups.length?!0:(sv(n,i,t),!1)),!e.items.length){sv(n,n,t);return}kl(e.items,i=>{i.groups=i.groups.filter(o=>o.items.length?!0:(r=!0,!1));for(const o of i.groups)o.items=o.items.filter(s=>ZD(s)&&!s.groups.length?(sv(n,s,t),r=!0,!1):!0)}),r&&YD(n,e)}function sv(n,e,t){t||Ye("menu-bar-menu-empty",{menuBarConfig:n,emptyMenuConfig:e})}function Xge(n,e){const t=e.t,r={File:t({string:"File",id:"MENU_BAR_MENU_FILE"}),Edit:t({string:"Edit",id:"MENU_BAR_MENU_EDIT"}),View:t({string:"View",id:"MENU_BAR_MENU_VIEW"}),Insert:t({string:"Insert",id:"MENU_BAR_MENU_INSERT"}),Format:t({string:"Format",id:"MENU_BAR_MENU_FORMAT"}),Tools:t({string:"Tools",id:"MENU_BAR_MENU_TOOLS"}),Help:t({string:"Help",id:"MENU_BAR_MENU_HELP"}),Text:t({string:"Text",id:"MENU_BAR_MENU_TEXT"}),Font:t({string:"Font",id:"MENU_BAR_MENU_FONT"})};kl(n.items,i=>{i.label in r&&(i.label=r[i.label])})}function kl(n,e){if(Array.isArray(n))for(const r of n)t(r);function t(r){e(r);for(const i of r.groups)for(const o of i.items)ZD(o)&&t(o)}}function Zge(n){return typeof n=="object"&&"menu"in n}function Jge(n){return typeof n=="object"&&"group"in n}function Qge(n){return n.startsWith("start")?"start":n.startsWith("end")?"end":n.startsWith("after")?"after":"before"}function epe(n){const e=n.match(/^[^:]+:(.+)/);return e?e[1]:null}function XD(n){return typeof n=="string"?n:n.menuId}function ZD(n){return typeof n=="object"&&"menuId"in n}function tpe(n,e){const t=e.element;n.ui.focusTracker.add(t),n.keystrokes.listenTo(t);const r=Uge(n.config.get("menuBar")||{});e.fillFromConfig(r,n.ui.componentFactory),n.keystrokes.set("Esc",(i,o)=>{t.contains(n.ui.focusTracker.focusedElement)&&(n.editing.view.focus(),o())}),n.keystrokes.set("Alt+F9",(i,o)=>{t.contains(n.ui.focusTracker.focusedElement)||(e.focus(),o())})}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class npe extends be{constructor(e){super(e);const t=this.bindTemplate;this.set("isVisible",!1),this.set("position","se"),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-menu-bar__menu__panel",t.to("position",r=>`ck-menu-bar__menu__panel_position_${r}`),t.if("isVisible","ck-hidden",r=>!r)],tabindex:"-1"},children:this.children,on:{selectstart:t.to(r=>{r.target.tagName.toLocaleLowerCase()!=="input"&&r.preventDefault()})}})}focus(e=1){this.children.length&&(e===1?this.children.first.focus():this.children.last.focus())}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class fr extends be{constructor(e){super(e);const t=this.bindTemplate;this.buttonView=new jge(e),this.buttonView.delegate("mouseenter").to(this),this.buttonView.bind("isOn","isEnabled").to(this,"isOpen","isEnabled"),this.panelView=new npe(e),this.panelView.bind("isVisible").to(this,"isOpen"),this.keystrokes=new mn,this.focusTracker=new Ut,this.set("isOpen",!1),this.set("isEnabled",!0),this.set("panelPosition","w"),this.set("class",void 0),this.set("parentMenuView",null),this.setTemplate({tag:"div",attributes:{class:["ck","ck-menu-bar__menu",t.to("class"),t.if("isEnabled","ck-disabled",r=>!r),t.if("parentMenuView","ck-menu-bar__menu_top-level",r=>!r)]},children:[this.buttonView,this.panelView]})}render(){super.render(),this.focusTracker.add(this.buttonView.element),this.focusTracker.add(this.panelView.element),this.keystrokes.listenTo(this.element),qo.closeOnEscKey(this),this._repositionPanelOnOpen()}_attachBehaviors(){this.parentMenuView?(qo.openOnButtonClick(this),qo.openOnArrowRightKey(this),qo.closeOnArrowLeftKey(this),qo.closeOnParentClose(this)):(this._propagateArrowKeystrokeEvents(),qo.openAndFocusPanelOnArrowDownKey(this),qo.toggleOnButtonClick(this))}_propagateArrowKeystrokeEvents(){this.keystrokes.set("arrowright",(e,t)=>{this.fire("arrowright"),t()}),this.keystrokes.set("arrowleft",(e,t)=>{this.fire("arrowleft"),t()})}_repositionPanelOnOpen(){this.on("change:isOpen",(e,t,r)=>{if(!r)return;const i=fr._getOptimalPosition({element:this.panelView.element,target:this.buttonView.element,fitInViewport:!0,positions:this._panelPositions});this.panelView.position=i?i.name:this._panelPositions[0].name})}focus(){this.buttonView.focus()}get _panelPositions(){const{southEast:e,southWest:t,northEast:r,northWest:i,westSouth:o,eastSouth:s,westNorth:a,eastNorth:l}=Wge;return this.locale.uiLanguageDirection==="ltr"?this.parentMenuView?[s,l,o,a]:[e,t,r,i]:this.parentMenuView?[o,a,s,l]:[t,e,i,r]}}fr._getOptimalPosition=yg;/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class xs extends V0{constructor(e){super(e),this.role="menu"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class un extends Ne{constructor(e){super(e),this.set({withText:!0,withKeystroke:!0,tooltip:!1,role:"menuitem"}),this.extendTemplate({attributes:{class:["ck-menu-bar__menu__item__button"]}})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class JD extends kD{constructor(e){super(e),this.set({withText:!0,withKeystroke:!0,tooltip:!1,role:"menuitem"}),this.extendTemplate({attributes:{class:["ck-menu-bar__menu__item__button"]}})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const rE=["mouseenter","arrowleft","arrowright","change:isOpen"];class rpe extends be{constructor(e){super(e),this.menus=[];const t=e.t;this.set("isOpen",!1),this._setupIsOpenUpdater(),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-menu-bar"],"aria-label":t("Editor menu bar"),role:"menubar"},children:this.children})}fillFromConfig(e,t){const r=this.locale,o=Gge({normalizedConfig:e,locale:r,componentFactory:t}).items.map(s=>this._createMenu({componentFactory:t,menuDefinition:s}));this.children.addMany(o)}render(){super.render(),nc.toggleMenusAndFocusItemsOnHover(this),nc.closeMenusWhenTheBarCloses(this),nc.closeMenuWhenAnotherOnTheSameLevelOpens(this),nc.focusCycleMenusOnArrows(this),nc.closeOnClickOutside(this)}focus(){this.children.first&&this.children.first.focus()}close(){for(const e of this.children)e.isOpen=!1}registerMenu(e,t=null){t?(e.delegate(...rE).to(t),e.parentMenuView=t):e.delegate(...rE).to(this,r=>"menu:"+r),e._attachBehaviors(),this.menus.push(e)}_createMenu({componentFactory:e,menuDefinition:t,parentMenuView:r}){const i=this.locale,o=new fr(i);return this.registerMenu(o,r),o.buttonView.set({label:t.label}),o.once("change:isOpen",()=>{const s=new xs(i);s.ariaLabel=t.label,o.panelView.children.add(s),s.items.addMany(this._createMenuItems({menuDefinition:t,parentMenuView:o,componentFactory:e}))}),o}_createMenuItems({menuDefinition:e,parentMenuView:t,componentFactory:r}){const i=this.locale,o=[];for(const s of e.groups){for(const a of s.items){const l=new Oo(i,t);if(ri(a))l.children.add(this._createMenu({componentFactory:r,menuDefinition:a,parentMenuView:t}));else{const c=this._createMenuItemContentFromFactory({componentName:a,componentFactory:r,parentMenuView:t});if(!c)continue;l.children.add(c)}o.push(l)}s!==e.groups[e.groups.length-1]&&o.push(new Tg(i))}return o}_createMenuItemContentFromFactory({componentName:e,parentMenuView:t,componentFactory:r}){const i=r.create(e);return i instanceof fr||i instanceof un||i instanceof JD?(this._registerMenuTree(i,t),i.on("execute",()=>{this.close()}),i):(Ye("menu-bar-component-unsupported",{componentName:e,componentView:i}),null)}_registerMenuTree(e,t){if(!(e instanceof fr)){e.delegate("mouseenter").to(t);return}this.registerMenu(e,t);const r=e.panelView.children.filter(o=>o instanceof xs)[0];if(!r){e.delegate("mouseenter").to(t);return}const i=r.items.filter(o=>o instanceof tl);for(const o of i)this._registerMenuTree(o.children.get(0),e)}_setupIsOpenUpdater(){let e;this.on("menu:change:isOpen",(t,r,i)=>{clearTimeout(e),i?this.isOpen=!0:e=setTimeout(()=>{this.isOpen=Array.from(this.children).some(o=>o.isOpen)},0)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ipe extends Ige{constructor(e,t){super(e),this.view=t,this._toolbarConfig=$D(e.config.get("toolbar")),this._elementReplacer=new wle,this.listenTo(e.editing.view,"scrollToTheSelection",this._handleScrollToTheSelectionWithStickyPanel.bind(this))}get element(){return this.view.element}init(e){const t=this.editor,r=this.view,i=t.editing.view,o=r.editable,s=i.document.getRoot();o.name=s.rootName,r.render();const a=o.element;this.setEditableElement(o.name,a),r.editable.bind("isFocused").to(this.focusTracker),i.attachDomRoot(a),e&&this._elementReplacer.replace(e,this.element),this._initPlaceholder(),this._initToolbar(),r.menuBarView&&tpe(t,r.menuBarView),this._initDialogPluginIntegration(),this.fire("ready")}destroy(){super.destroy();const e=this.view,t=this.editor.editing.view;this._elementReplacer.restore(),t.detachDomRoot(e.editable.name),e.destroy()}_initToolbar(){const e=this.view;e.stickyPanel.bind("isActive").to(this.focusTracker,"isFocused"),e.stickyPanel.limiterElement=e.element,e.stickyPanel.bind("viewportTopOffset").to(this,"viewportOffset",({top:t})=>t||0),e.toolbar.fillFromConfig(this._toolbarConfig,this.componentFactory),this.addToolbar(e.toolbar)}_initPlaceholder(){const e=this.editor,t=e.editing.view,r=t.document.getRoot(),i=e.sourceElement;let o;const s=e.config.get("placeholder");s&&(o=typeof s=="string"?s:s[this.view.editable.name]),!o&&i&&i.tagName.toLowerCase()==="textarea"&&(o=i.getAttribute("placeholder")),o&&(r.placeholder=o),LM({view:t,element:r,isDirectHost:!1,keepOnFocus:!0})}_handleScrollToTheSelectionWithStickyPanel(e,t,r){const i=this.view.stickyPanel;if(i.isSticky){const o=new De(i.element).height;t.viewportOffset.top+=o}else{const o=()=>{this.editor.editing.view.scrollToTheSelection(r)};this.listenTo(i,"change:isSticky",o),setTimeout(()=>{this.stopListening(i,"change:isSticky",o)},20)}}_initDialogPluginIntegration(){if(!this.editor.plugins.has("Dialog"))return;const e=this.view.stickyPanel,t=this.editor.plugins.get("Dialog");t.on("show",()=>{const r=t.view;r.on("moveTo",(i,o)=>{if(!e.isSticky||r.wasMoved)return;const s=new De(e.contentPanelElement);o[1]<s.bottom+nl.defaultOffset&&(o[1]=s.bottom+nl.defaultOffset)},{priority:"high"})},{priority:"low"})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ope extends Rge{constructor(e,t,r={}){super(e),this.stickyPanel=new Lge(e),this.toolbar=new $0(e,{shouldGroupWhenFull:r.shouldToolbarGroupWhenFull}),r.useMenuBar&&(this.menuBarView=new rpe(e)),this.editable=new Dge(e,t)}render(){super.render(),this.menuBarView?this.stickyPanel.content.addMany([this.menuBarView,this.toolbar]):this.stickyPanel.content.add(this.toolbar),this.top.add(this.stickyPanel),this.main.add(this.editable)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class QD{constructor(e){if(this.crashes=[],this.state="initializing",this._now=Date.now,this.crashes=[],this._crashNumberLimit=typeof e.crashNumberLimit=="number"?e.crashNumberLimit:3,this._minimumNonErrorTimePeriod=typeof e.minimumNonErrorTimePeriod=="number"?e.minimumNonErrorTimePeriod:5e3,this._boundErrorHandler=t=>{const r="error"in t?t.error:t.reason;r instanceof Error&&this._handleError(r,t)},this._listeners={},!this._restart)throw new Error("The Watchdog class was split into the abstract `Watchdog` class and the `EditorWatchdog` class. Please, use `EditorWatchdog` if you have used the `Watchdog` class previously.")}destroy(){this._stopErrorHandling(),this._listeners={}}on(e,t){this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(t)}off(e,t){this._listeners[e]=this._listeners[e].filter(r=>r!==t)}_fire(e,...t){const r=this._listeners[e]||[];for(const i of r)i.apply(this,[null,...t])}_startErrorHandling(){window.addEventListener("error",this._boundErrorHandler),window.addEventListener("unhandledrejection",this._boundErrorHandler)}_stopErrorHandling(){window.removeEventListener("error",this._boundErrorHandler),window.removeEventListener("unhandledrejection",this._boundErrorHandler)}_handleError(e,t){if(this._shouldReactToError(e)){this.crashes.push({message:e.message,stack:e.stack,filename:t instanceof ErrorEvent?t.filename:void 0,lineno:t instanceof ErrorEvent?t.lineno:void 0,colno:t instanceof ErrorEvent?t.colno:void 0,date:this._now()});const r=this._shouldRestart();this.state="crashed",this._fire("stateChange"),this._fire("error",{error:e,causesRestart:r}),r?this._restart():(this.state="crashedPermanently",this._fire("stateChange"))}}_shouldReactToError(e){return e.is&&e.is("CKEditorError")&&e.context!==void 0&&e.context!==null&&this.state==="ready"&&this._isErrorComingFromThisItem(e)}_shouldRestart(){if(this.crashes.length<=this._crashNumberLimit)return!0;const e=this.crashes[this.crashes.length-1].date,t=this.crashes[this.crashes.length-1-this._crashNumberLimit].date;return(e-t)/this._crashNumberLimit>this._minimumNonErrorTimePeriod}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Py(n,e=new Set){const t=[n],r=new Set;let i=0;for(;t.length>i;){const o=t[i++];if(!(r.has(o)||!spe(o)||e.has(o)))if(r.add(o),Symbol.iterator in o)try{for(const s of o)t.push(s)}catch{}else for(const s in o)s!=="defaultValue"&&t.push(o[s])}return r}function spe(n){const e=Object.prototype.toString.call(n),t=typeof n;return!(t==="number"||t==="boolean"||t==="string"||t==="symbol"||t==="function"||e==="[object Date]"||e==="[object RegExp]"||e==="[object Module]"||n===void 0||n===null||n._watchdogExcluded||n instanceof EventTarget||n instanceof Event)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function e5(n,e,t=new Set){if(n===e&&ape(n))return!0;const r=Py(n,t),i=Py(e,t);for(const o of r)if(i.has(o))return!0;return!1}function ape(n){return typeof n=="object"&&n!==null}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class t5 extends QD{constructor(e,t={}){super(t),this._editor=null,this._lifecyclePromise=null,this._initUsingData=!0,this._editables={},this._throttledSave=Ea(this._save.bind(this),typeof t.saveInterval=="number"?t.saveInterval:5e3),e&&(this._creator=(r,i)=>e.create(r,i)),this._destructor=r=>r.destroy()}get editor(){return this._editor}get _item(){return this._editor}setCreator(e){this._creator=e}setDestructor(e){this._destructor=e}_restart(){return Promise.resolve().then(()=>(this.state="initializing",this._fire("stateChange"),this._destroy())).catch(e=>{console.error("An error happened during the editor destroying.",e)}).then(()=>{const e={},t=[],r=this._config.rootsAttributes||{},i={};for(const[s,a]of Object.entries(this._data.roots))a.isLoaded?(e[s]="",i[s]=r[s]||{}):t.push(s);const o={...this._config,extraPlugins:this._config.extraPlugins||[],lazyRoots:t,rootsAttributes:i,_watchdogInitialData:this._data};return delete o.initialData,o.extraPlugins.push(lpe),this._initUsingData?this.create(e,o,o.context):ys(this._elementOrData)?this.create(this._elementOrData,o,o.context):this.create(this._editables,o,o.context)}).then(()=>{this._fire("restart")})}create(e=this._elementOrData,t=this._config,r){return this._lifecyclePromise=Promise.resolve(this._lifecyclePromise).then(()=>(super._startErrorHandling(),this._elementOrData=e,this._initUsingData=typeof e=="string"||Object.keys(e).length>0&&typeof Object.values(e)[0]=="string",this._config=this._cloneEditorConfiguration(t)||{},this._config.context=r,this._creator(e,this._config))).then(i=>{this._editor=i,i.model.document.on("change:data",this._throttledSave),this._lastDocumentVersion=i.model.document.version,this._data=this._getData(),this._initUsingData||(this._editables=this._getEditables()),this.state="ready",this._fire("stateChange")}).finally(()=>{this._lifecyclePromise=null}),this._lifecyclePromise}destroy(){return this._lifecyclePromise=Promise.resolve(this._lifecyclePromise).then(()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy())).finally(()=>{this._lifecyclePromise=null}),this._lifecyclePromise}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling(),this._throttledSave.cancel();const e=this._editor;return this._editor=null,e.model.document.off("change:data",this._throttledSave),this._destructor(e)})}_save(){const e=this._editor.model.document.version;try{this._data=this._getData(),this._initUsingData||(this._editables=this._getEditables()),this._lastDocumentVersion=e}catch(t){console.error(t,"An error happened during restoring editor data. Editor will be restored from the previously saved data.")}}_setExcludedProperties(e){this._excludedProps=e}_getData(){const e=this._editor,t=e.model.document.roots.filter(a=>a.isAttached()&&a.rootName!="$graveyard"),{plugins:r}=e,i=r.has("CommentsRepository")&&r.get("CommentsRepository"),o=r.has("TrackChanges")&&r.get("TrackChanges"),s={roots:{},markers:{},commentThreads:JSON.stringify([]),suggestions:JSON.stringify([])};t.forEach(a=>{s.roots[a.rootName]={content:JSON.stringify(Array.from(a.getChildren())),attributes:JSON.stringify(Array.from(a.getAttributes())),isLoaded:a._isLoaded}});for(const a of e.model.markers)a._affectsData&&(s.markers[a.name]={rangeJSON:a.getRange().toJSON(),usingOperation:a._managedUsingOperations,affectsData:a._affectsData});return i&&(s.commentThreads=JSON.stringify(i.getCommentThreads({toJSON:!0,skipNotAttached:!0}))),o&&(s.suggestions=JSON.stringify(o.getSuggestions({toJSON:!0,skipNotAttached:!0}))),s}_getEditables(){const e={};for(const t of this.editor.model.document.getRootNames()){const r=this.editor.ui.getEditableElement(t);r&&(e[t]=r)}return e}_isErrorComingFromThisItem(e){return e5(this._editor,e.context,this._excludedProps)}_cloneEditorConfiguration(e){return rw(e,(t,r)=>{if(ys(t)||r==="context")return t})}}class lpe{constructor(e){this.editor=e,this._data=e.config.get("_watchdogInitialData")}init(){this.editor.data.on("init",e=>{e.stop(),this.editor.model.enqueueChange({isUndoable:!1},t=>{this._restoreCollaborationData(),this._restoreEditorData(t)}),this.editor.data.fire("ready")},{priority:999})}_createNode(e,t){if("name"in t){const r=e.createElement(t.name,t.attributes);if(t.children)for(const i of t.children)r._appendChild(this._createNode(e,i));return r}else return e.createText(t.data,t.attributes)}_restoreEditorData(e){const t=this.editor;Object.entries(this._data.roots).forEach(([r,{content:i,attributes:o}])=>{const s=JSON.parse(i),a=JSON.parse(o),l=t.model.document.getRoot(r);for(const[c,u]of a)e.setAttribute(c,u,l);for(const c of s){const u=this._createNode(e,c);e.insert(u,l,"end")}}),Object.entries(this._data.markers).forEach(([r,i])=>{const{document:o}=t.model,{rangeJSON:{start:s,end:a},...l}=i,c=o.getRoot(s.root),u=e.createPositionFromPath(c,s.path,s.stickiness),d=e.createPositionFromPath(c,a.path,a.stickiness),f=e.createRange(u,d);e.addMarker(r,{range:f,...l})})}_restoreCollaborationData(){const e=JSON.parse(this._data.commentThreads),t=JSON.parse(this._data.suggestions);e.forEach(r=>{const i=this.editor.config.get("collaboration.channelId"),o=this.editor.plugins.get("CommentsRepository");o.hasCommentThread(r.threadId)&&o.getCommentThread(r.threadId).remove(),o.addCommentThread({channelId:i,...r})}),t.forEach(r=>{const i=this.editor.plugins.get("TrackChangesEditing");if(i.hasSuggestion(r.id)){const o=i.getSuggestion(r.id);o.attributes=r.attributes}else i.addSuggestionData(r)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Oc=Symbol("MainQueueId");class cpe extends QD{constructor(e,t={}){super(t),this._watchdogs=new Map,this._context=null,this._contextProps=new Set,this._actionQueues=new upe,this._watchdogConfig=t,this._creator=r=>e.create(r),this._destructor=r=>r.destroy(),this._actionQueues.onEmpty(()=>{this.state==="initializing"&&(this.state="ready",this._fire("stateChange"))})}setCreator(e){this._creator=e}setDestructor(e){this._destructor=e}get context(){return this._context}create(e={}){return this._actionQueues.enqueue(Oc,()=>(this._contextConfig=e,this._create()))}getItem(e){return this._getWatchdog(e)._item}getItemState(e){return this._getWatchdog(e).state}add(e){const t=iE(e);return Promise.all(t.map(r=>this._actionQueues.enqueue(r.id,()=>{if(this.state==="destroyed")throw new Error("Cannot add items to destroyed watchdog.");if(!this._context)throw new Error("Context was not created yet. You should call the `ContextWatchdog#create()` method first.");let i;if(this._watchdogs.has(r.id))throw new Error(`Item with the given id is already added: '${r.id}'.`);if(r.type==="editor")return i=new t5(null,this._watchdogConfig),i.setCreator(r.creator),i._setExcludedProperties(this._contextProps),r.destructor&&i.setDestructor(r.destructor),this._watchdogs.set(r.id,i),i.on("error",(o,{error:s,causesRestart:a})=>{this._fire("itemError",{itemId:r.id,error:s}),a&&this._actionQueues.enqueue(r.id,()=>new Promise(l=>{const c=()=>{i.off("restart",c),this._fire("itemRestart",{itemId:r.id}),l()};i.on("restart",c)}))}),i.create(r.sourceElementOrData,r.config,this._context);throw new Error(`Not supported item type: '${r.type}'.`)})))}remove(e){const t=iE(e);return Promise.all(t.map(r=>this._actionQueues.enqueue(r,()=>{const i=this._getWatchdog(r);return this._watchdogs.delete(r),i.destroy()})))}destroy(){return this._actionQueues.enqueue(Oc,()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy()))}_restart(){return this._actionQueues.enqueue(Oc,()=>(this.state="initializing",this._fire("stateChange"),this._destroy().catch(e=>{console.error("An error happened during destroying the context or items.",e)}).then(()=>this._create()).then(()=>this._fire("restart"))))}_create(){return Promise.resolve().then(()=>(this._startErrorHandling(),this._creator(this._contextConfig))).then(e=>(this._context=e,this._contextProps=Py(this._context),Promise.all(Array.from(this._watchdogs.values()).map(t=>(t._setExcludedProperties(this._contextProps),t.create(void 0,void 0,this._context))))))}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling();const e=this._context;return this._context=null,this._contextProps=new Set,Promise.all(Array.from(this._watchdogs.values()).map(t=>t.destroy())).then(()=>this._destructor(e))})}_getWatchdog(e){const t=this._watchdogs.get(e);if(!t)throw new Error(`Item with the given id was not registered: ${e}.`);return t}_isErrorComingFromThisItem(e){for(const t of this._watchdogs.values())if(t._isErrorComingFromThisItem(e))return!1;return e5(this._context,e.context)}}class upe{constructor(){this._onEmptyCallbacks=[],this._queues=new Map,this._activeActions=0}onEmpty(e){this._onEmptyCallbacks.push(e)}enqueue(e,t){const r=e===Oc;this._activeActions++,this._queues.get(e)||this._queues.set(e,Promise.resolve());const o=(r?Promise.all(this._queues.values()):Promise.all([this._queues.get(Oc),this._queues.get(e)])).then(t),s=o.catch(()=>{});return this._queues.set(e,s),o.finally(()=>{this._activeActions--,this._queues.get(e)===s&&this._activeActions===0&&this._onEmptyCallbacks.forEach(a=>a())})}}function iE(n){return Array.isArray(n)?n:[n]}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Eg extends Sy(Xfe){constructor(e,t={}){if(!Nf(e)&&t.initialData!==void 0)throw new M("editor-create-initial-data",null);super(t),this.config.define("menuBar.isVisible",!1),this.config.get("initialData")===void 0&&this.config.set("initialData",dpe(e)),Nf(e)&&(this.sourceElement=e),this.model.document.createRoot();const r=!this.config.get("toolbar.shouldNotGroupWhenFull"),i=this.config.get("menuBar"),o=new ope(this.locale,this.editing.view,{shouldToolbarGroupWhenFull:r,useMenuBar:i.isVisible});this.ui=new ipe(this,o),Zfe(this)}destroy(){return this.sourceElement&&this.updateSourceElement(),this.ui.destroy(),super.destroy()}static create(e,t={}){return new Promise(r=>{const i=new this(e,t);r(i.initPlugins().then(()=>i.ui.init(Nf(e)?e:null)).then(()=>i.data.init(i.config.get("initialData"))).then(()=>i.fire("ready")).then(()=>i))})}}Eg.Context=BM;Eg.EditorWatchdog=t5;Eg.ContextWatchdog=cpe;function dpe(n){return Nf(n)?Ale(n):n}function Nf(n){return ys(n)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class W0 extends Me{constructor(e,t){super(e),this.attributeKey=t}refresh(){const e=this.editor.model,t=e.document;this.value=t.selection.getAttribute(this.attributeKey),this.isEnabled=e.schema.checkAttributeInSelection(t.selection,this.attributeKey)}execute(e={}){const t=this.editor.model,i=t.document.selection,o=e.value,s=e.batch,a=l=>{if(i.isCollapsed)o?l.setSelectionAttribute(this.attributeKey,o):l.removeSelectionAttribute(this.attributeKey);else{const c=t.schema.getValidRanges(i.getRanges(),this.attributeKey);for(const u of c)o?l.setAttribute(this.attributeKey,o,u):l.removeAttribute(this.attributeKey,u)}};s?t.enqueueChange(s,l=>{a(l)}):t.change(l=>{a(l)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const qn="fontSize",Kn="fontFamily",pi="fontColor";function n5(n,e){const t={model:{key:n,values:[]},view:{},upcastAlso:{}};for(const r of e)t.model.values.push(r.model),t.view[r.model]=r.view,r.upcastAlso&&(t.upcastAlso[r.model]=r.upcastAlso);return t}function fpe(n){return e=>gpe(e.getStyle(n))}function hpe(n){return(e,{writer:t})=>t.createAttributeElement("span",{style:`${n}:${e}`},{priority:7})}function mpe({dropdownView:n,colors:e,columns:t,removeButtonLabel:r,colorPickerLabel:i,documentColorsLabel:o,documentColorsCount:s,colorPickerViewConfig:a}){const l=n.locale,c=new UD(l,{colors:e,columns:t,removeButtonLabel:r,colorPickerLabel:i,documentColorsLabel:o,documentColorsCount:s,colorPickerViewConfig:a});return n.colorSelectorView=c,n.panelView.children.add(c),c}function gpe(n){return n.replace(/\s/g,"")}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ppe extends W0{constructor(e){super(e,Kn)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function r5(n){return n.map(vpe).filter(e=>e!==void 0)}function vpe(n){if(typeof n=="object")return n;if(n==="default")return{title:"Default",model:void 0};if(typeof n=="string")return bpe(n)}function bpe(n){const e=n.replace(/"|'/g,"").split(","),t=e[0],r=e.map(ype).join(", ");return{title:t,model:r,view:{name:"span",styles:{"font-family":r},priority:7}}}function ype(n){return n=n.trim(),n.indexOf(" ")>0&&(n=`'${n}'`),n}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class wpe extends W{static get pluginName(){return"FontFamilyEditing"}constructor(e){super(e),e.config.define(Kn,{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!1})}init(){const e=this.editor;e.model.schema.extend("$text",{allowAttributes:Kn}),e.model.schema.setAttributeProperties(Kn,{isFormatting:!0,copyOnEnter:!0});const t=r5(e.config.get("fontFamily.options")).filter(i=>i.model),r=n5(Kn,t);e.config.get("fontFamily.supportAllValues")?(this._prepareAnyValueConverters(),this._prepareCompatibilityConverter()):e.conversion.attributeToElement(r),e.commands.add(Kn,new ppe(e))}_prepareAnyValueConverters(){const e=this.editor;e.conversion.for("downcast").attributeToElement({model:Kn,view:(t,{writer:r})=>r.createAttributeElement("span",{style:"font-family:"+t},{priority:7})}),e.conversion.for("upcast").elementToAttribute({model:{key:Kn,value:t=>t.getStyle("font-family")},view:{name:"span",styles:{"font-family":/.*/}}})}_prepareCompatibilityConverter(){this.editor.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{face:/.*/}},model:{key:Kn,value:t=>t.getAttribute("face")}})}}const oE='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.03 3h6.149a.75.75 0 1 1 0 1.5h-5.514L11.03 3zm1.27 3h4.879a.75.75 0 1 1 0 1.5h-4.244L12.3 6zm1.27 3h3.609a.75.75 0 1 1 0 1.5h-2.973L13.57 9zm-2.754 2.5L8.038 4.785 5.261 11.5h5.555zm.62 1.5H4.641l-1.666 4.028H1.312l5.789-14h1.875l5.789 14h-1.663L11.436 13z"/></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class _pe extends W{static get pluginName(){return"FontFamilyUI"}init(){const e=this.editor,t=e.t,r=this._getLocalizedOptions(),i=e.commands.get(Kn),o=t("Font Family"),s=Cpe(r,i);e.ui.componentFactory.add(Kn,a=>{const l=Ln(a);return fd(l,s,{role:"menu",ariaLabel:o}),l.buttonView.set({label:o,icon:oE,tooltip:!0}),l.extendTemplate({attributes:{class:"ck-font-family-dropdown"}}),l.bind("isEnabled").to(i),this.listenTo(l,"execute",c=>{e.execute(c.source.commandName,{value:c.source.commandParam}),e.editing.view.focus()}),l}),e.ui.componentFactory.add(`menuBar:${Kn}`,a=>{const l=new fr(a);l.buttonView.set({label:o,icon:oE}),l.bind("isEnabled").to(i);const c=new xs(a);for(const u of s){const d=new Oo(a,l),f=new un(a);f.bind(...Object.keys(u.model)).to(u.model),f.bind("ariaChecked").to(f,"isOn"),f.delegate("execute").to(l),f.on("execute",()=>{e.execute(u.model.commandName,{value:u.model.commandParam}),e.editing.view.focus()}),d.children.add(f),c.items.add(d)}return l.panelView.children.add(c),l})}_getLocalizedOptions(){const e=this.editor,t=e.t;return r5(e.config.get(Kn).options).map(i=>(i.title==="Default"&&(i.title=t("Default")),i))}}function Cpe(n,e){const t=new Vn;for(const r of n){const i={type:"button",model:new rl({commandName:Kn,commandParam:r.model,label:r.title,role:"menuitemradio",withText:!0})};i.model.bind("isOn").to(e,"value",o=>o===r.model?!0:!o||!r.model?!1:o.split(",")[0].replace(/'/g,"").toLowerCase()===r.model.toLowerCase()),r.view&&typeof r.view!="string"&&r.view.styles&&i.model.set("labelStyle",`font-family: ${r.view.styles["font-family"]}`),t.add(i)}return t}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Spe extends W{static get requires(){return[wpe,_pe]}static get pluginName(){return"FontFamily"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class xpe extends W0{constructor(e){super(e,qn)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function H0(n){return n.map(e=>Ape(e)).filter(e=>e!==void 0)}const sE={get tiny(){return{title:"Tiny",model:"tiny",view:{name:"span",classes:"text-tiny",priority:7}}},get small(){return{title:"Small",model:"small",view:{name:"span",classes:"text-small",priority:7}}},get big(){return{title:"Big",model:"big",view:{name:"span",classes:"text-big",priority:7}}},get huge(){return{title:"Huge",model:"huge",view:{name:"span",classes:"text-huge",priority:7}}}};function Ape(n){if(typeof n=="number"&&(n=String(n)),typeof n=="object"&&kpe(n))return Iy(n);const e=Epe(n);if(e)return Iy(e);if(n==="default")return{model:void 0,title:"Default"};if(!Ppe(n))return Tpe(n)}function Tpe(n){return typeof n=="string"&&(n={title:n,model:`${parseFloat(n)}px`}),n.view={name:"span",styles:{"font-size":n.model}},Iy(n)}function Iy(n){return n.view&&typeof n.view!="string"&&!n.view.priority&&(n.view.priority=7),n}function Epe(n){return typeof n=="string"?sE[n]:sE[n.model]}function kpe(n){return n.title&&n.model&&n.view}function Ppe(n){let e;if(typeof n=="object")if(n.model)e=parseFloat(n.model);else throw new M("font-size-invalid-definition",null,n);else e=parseFloat(n);return isNaN(e)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const aE=["x-small","x-small","small","medium","large","x-large","xx-large","xxx-large"];class Ipe extends W{static get pluginName(){return"FontSizeEditing"}constructor(e){super(e),e.config.define(qn,{options:["tiny","small","default","big","huge"],supportAllValues:!1})}init(){const e=this.editor;e.model.schema.extend("$text",{allowAttributes:qn}),e.model.schema.setAttributeProperties(qn,{isFormatting:!0,copyOnEnter:!0});const t=e.config.get("fontSize.supportAllValues"),r=H0(this.editor.config.get("fontSize.options")).filter(o=>o.model),i=n5(qn,r);t?(this._prepareAnyValueConverters(i),this._prepareCompatibilityConverter()):e.conversion.attributeToElement(i),e.commands.add(qn,new xpe(e))}_prepareAnyValueConverters(e){const t=this.editor,r=e.model.values.filter(i=>!Hfe(String(i))&&!Gfe(String(i)));if(r.length)throw new M("font-size-invalid-use-of-named-presets",null,{presets:r});t.conversion.for("downcast").attributeToElement({model:qn,view:(i,{writer:o})=>{if(i)return o.createAttributeElement("span",{style:"font-size:"+i},{priority:7})}}),t.conversion.for("upcast").elementToAttribute({model:{key:qn,value:i=>i.getStyle("font-size")},view:{name:"span",styles:{"font-size":/.*/}}})}_prepareCompatibilityConverter(){this.editor.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{size:/^[+-]?\d{1,3}$/}},model:{key:qn,value:t=>{const r=t.getAttribute("size"),i=r[0]==="-"||r[0]==="+";let o=parseInt(r,10);i&&(o=3+o);const s=aE.length-1,a=Math.min(Math.max(o,0),s);return aE[a]}}})}}const lE='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.816 11.5 7.038 4.785 4.261 11.5h5.555zm.62 1.5H3.641l-1.666 4.028H.312l5.789-14h1.875l5.789 14h-1.663L10.436 13zm7.55 2.279.779-.779.707.707-2.265 2.265-2.193-2.265.707-.707.765.765V4.825c0-.042 0-.083.002-.123l-.77.77-.707-.707L17.207 2.5l2.265 2.265-.707.707-.782-.782c.002.043.003.089.003.135v10.454z"/></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ope extends W{static get pluginName(){return"FontSizeUI"}init(){const e=this.editor,t=e.t,r=this._getLocalizedOptions(),i=e.commands.get(qn),o=t("Font Size"),s=Rpe(r,i);e.ui.componentFactory.add(qn,a=>{const l=Ln(a);return fd(l,s,{role:"menu",ariaLabel:o}),l.buttonView.set({label:o,icon:lE,tooltip:!0}),l.extendTemplate({attributes:{class:["ck-font-size-dropdown"]}}),l.bind("isEnabled").to(i),this.listenTo(l,"execute",c=>{e.execute(c.source.commandName,{value:c.source.commandParam}),e.editing.view.focus()}),l}),e.ui.componentFactory.add(`menuBar:${qn}`,a=>{const l=new fr(a);l.buttonView.set({label:o,icon:lE}),l.bind("isEnabled").to(i);const c=new xs(a);for(const u of s){const d=new Oo(a,l),f=new un(a);f.bind(...Object.keys(u.model)).to(u.model),f.bind("ariaChecked").to(f,"isOn"),f.delegate("execute").to(l),f.on("execute",()=>{e.execute(u.model.commandName,{value:u.model.commandParam}),e.editing.view.focus()}),d.children.add(f),c.items.add(d)}return l.panelView.children.add(c),l})}_getLocalizedOptions(){const e=this.editor,t=e.t,r={Default:t("Default"),Tiny:t("Tiny"),Small:t("Small"),Big:t("Big"),Huge:t("Huge")};return H0(e.config.get(qn).options).map(o=>{const s=r[o.title];return s&&s!=o.title&&(o=Object.assign({},o,{title:s})),o})}}function Rpe(n,e){const t=new Vn;for(const r of n){const i={type:"button",model:new rl({commandName:qn,commandParam:r.model,label:r.title,class:"ck-fontsize-option",role:"menuitemradio",withText:!0})};r.view&&typeof r.view!="string"&&(r.view.styles&&i.model.set("labelStyle",`font-size:${r.view.styles["font-size"]}`),r.view.classes&&i.model.set("class",`${i.model.class} ${r.view.classes}`)),i.model.bind("isOn").to(e,"value",o=>o===r.model),t.add(i)}return t}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Mpe extends W{static get requires(){return[Ipe,Ope]}static get pluginName(){return"FontSize"}normalizeSizeOptions(e){return H0(e)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Dpe extends W0{constructor(e){super(e,pi)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Bpe extends W{static get pluginName(){return"FontColorEditing"}constructor(e){super(e),e.config.define(pi,{colors:[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}],columns:5}),e.conversion.for("upcast").elementToAttribute({view:{name:"span",styles:{color:/[\s\S]+/}},model:{key:pi,value:fpe("color")}}),e.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{color:/^#?\w+$/}},model:{key:pi,value:t=>t.getAttribute("color")}}),e.conversion.for("downcast").attributeToElement({model:pi,view:hpe("color")}),e.commands.add(pi,new Dpe(e)),e.model.schema.extend("$text",{allowAttributes:pi}),e.model.schema.setAttributeProperties(pi,{isFormatting:!0,copyOnEnter:!0})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Npe extends W{constructor(e,{commandName:t,componentName:r,icon:i,dropdownLabel:o}){super(e),this.commandName=t,this.componentName=r,this.icon=i,this.dropdownLabel=o,this.columns=e.config.get(`${this.componentName}.columns`)}init(){const e=this.editor,t=e.locale,r=t.t,i=e.commands.get(this.commandName),o=e.config.get(this.componentName),s=Zhe(o.colors),a=Xhe(t,s),l=o.documentColors,c=o.colorPicker!==!1;e.ui.componentFactory.add(this.componentName,u=>{const d=Ln(u);let f=!1;const h=mpe({dropdownView:d,colors:a.map(m=>({label:m.label,color:m.model,options:{hasBorder:m.hasBorder}})),columns:this.columns,removeButtonLabel:r("Remove color"),colorPickerLabel:r("Color picker"),documentColorsLabel:l!==0?r("Document colors"):"",documentColorsCount:l===void 0?this.columns:l,colorPickerViewConfig:c?o.colorPicker||{}:!1});return h.bind("selectedColor").to(i,"value"),d.buttonView.set({label:this.dropdownLabel,icon:this.icon,tooltip:!0}),d.extendTemplate({attributes:{class:"ck-color-ui-dropdown"}}),d.bind("isEnabled").to(i),h.on("execute",(m,g)=>{d.isOpen&&e.execute(this.commandName,{value:g.value,batch:this._undoStepBatch}),g.source!=="colorPicker"&&e.editing.view.focus(),g.source==="colorPickerSaveButton"&&(d.isOpen=!1)}),h.on("colorPicker:show",()=>{this._undoStepBatch=e.model.createBatch()}),h.on("colorPicker:cancel",()=>{this._undoStepBatch.operations.length&&(d.isOpen=!1,e.execute("undo",this._undoStepBatch)),e.editing.view.focus()}),d.on("change:isOpen",(m,g,p)=>{f||(f=!0,d.colorSelectorView.appendUI()),p&&(l!==0&&h.updateDocumentColors(e.model,this.componentName),h.updateSelectedColors(),h.showColorGridsFragment())}),z0(d,()=>d.colorSelectorView.colorGridsFragmentView.staticColorsGrid.items.find(m=>m.isOn)),d}),e.ui.componentFactory.add(`menuBar:${this.componentName}`,u=>{const d=new fr(u);d.buttonView.set({label:this.dropdownLabel,icon:this.icon}),d.bind("isEnabled").to(i);let f=!1;const h=new UD(u,{colors:a.map(m=>({label:m.label,color:m.model,options:{hasBorder:m.hasBorder}})),columns:this.columns,removeButtonLabel:r("Remove color"),colorPickerLabel:r("Color picker"),documentColorsLabel:l!==0?r("Document colors"):"",documentColorsCount:l===void 0?this.columns:l,colorPickerViewConfig:!1});return h.bind("selectedColor").to(i,"value"),h.delegate("execute").to(d),h.on("execute",(m,g)=>{e.execute(this.commandName,{value:g.value,batch:this._undoStepBatch}),e.editing.view.focus()}),d.on("change:isOpen",(m,g,p)=>{f||(f=!0,h.appendUI()),p&&(l!==0&&h.updateDocumentColors(e.model,this.componentName),h.updateSelectedColors(),h.showColorGridsFragment())}),d.panelView.children.add(h),d})}}const Lpe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.4 10.3 10 4.5l-2.4 5.8h4.8zm.5 1.2H7.1L5.7 15H4.2l5-12h1.6l5 12h-1.5L13 11.5zm3.1 7H4a1 1 0 0 1 0-2h12a1 1 0 0 1 0 2z"/></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Fpe extends Npe{constructor(e){const t=e.locale.t;super(e,{commandName:pi,componentName:pi,icon:Lpe,dropdownLabel:t("Font Color")})}static get pluginName(){return"FontColorUI"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class $pe extends W{static get requires(){return[Bpe,Fpe]}static get pluginName(){return"FontColor"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const U0=["left","right","center","justify"];function i5(n){return U0.includes(n)}function o5(n,e){return e.contentLanguageDirection=="rtl"?n==="right":n==="left"}function s5(n){const e=n.map(r=>{let i;return typeof r=="string"?i={name:r}:i=r,i}).filter(r=>{const i=U0.includes(r.name);return i||Ye("alignment-config-name-not-recognized",{option:r}),i}),t=e.filter(r=>!!r.className).length;if(t&&t<e.length)throw new M("alignment-config-classnames-are-missing",{configuredOptions:n});return e.forEach((r,i,o)=>{const s=o.slice(i+1);if(s.some(l=>l.name==r.name))throw new M("alignment-config-name-already-defined",{option:r,configuredOptions:n});if(r.className&&s.some(c=>c.className==r.className))throw new M("alignment-config-classname-already-defined",{option:r,configuredOptions:n})}),e}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const G0="alignment";class Vpe extends Me{refresh(){const t=this.editor.locale,r=ln(this.editor.model.document.selection.getSelectedBlocks());this.isEnabled=!!r&&this._canBeAligned(r),this.isEnabled&&r.hasAttribute("alignment")?this.value=r.getAttribute("alignment"):this.value=t.contentLanguageDirection==="rtl"?"right":"left"}execute(e={}){const t=this.editor,r=t.locale,i=t.model,o=i.document,s=e.value;i.change(a=>{const l=Array.from(o.selection.getSelectedBlocks()).filter(d=>this._canBeAligned(d)),c=l[0].getAttribute("alignment");o5(s,r)||c===s||!s?zpe(l,a):jpe(l,a,s)})}_canBeAligned(e){return this.editor.model.schema.checkAttribute(e,G0)}}function zpe(n,e){for(const t of n)e.removeAttribute(G0,t)}function jpe(n,e,t){for(const r of n)e.setAttribute(G0,t,r)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Wpe extends W{static get pluginName(){return"AlignmentEditing"}constructor(e){super(e),e.config.define("alignment",{options:U0.map(t=>({name:t}))})}init(){const e=this.editor,t=e.locale,r=e.model.schema,o=s5(e.config.get("alignment.options")).filter(c=>i5(c.name)&&!o5(c.name,t)),s=o.some(c=>!!c.className);r.extend("$block",{allowAttributes:"alignment"}),e.model.schema.setAttributeProperties("alignment",{isFormatting:!0}),s?e.conversion.attributeToAttribute(qpe(o)):e.conversion.for("downcast").attributeToAttribute(Hpe(o));const a=Upe(o);for(const c of a)e.conversion.for("upcast").attributeToAttribute(c);const l=Gpe(o);for(const c of l)e.conversion.for("upcast").attributeToAttribute(c);e.commands.add("alignment",new Vpe(e))}}function Hpe(n){const e={};for(const{name:r}of n)e[r]={key:"style",value:{"text-align":r}};return{model:{key:"alignment",values:n.map(r=>r.name)},view:e}}function Upe(n){const e=[];for(const{name:t}of n)e.push({view:{key:"style",value:{"text-align":t}},model:{key:"alignment",value:t}});return e}function Gpe(n){const e=[];for(const{name:t}of n)e.push({view:{key:"align",value:t},model:{key:"alignment",value:t}});return e}function qpe(n){const e={};for(const r of n)e[r.name]={key:"class",value:r.className};return{model:{key:"alignment",values:n.map(r=>r.name)},view:e}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const rc=new Map([["left",Ee.alignLeft],["right",Ee.alignRight],["center",Ee.alignCenter],["justify",Ee.alignJustify]]);class Kpe extends W{get localizedOptionTitles(){const e=this.editor.t;return{left:e("Align left"),right:e("Align right"),center:e("Align center"),justify:e("Justify")}}static get pluginName(){return"AlignmentUI"}init(){const e=this.editor,t=s5(e.config.get("alignment.options"));t.map(r=>r.name).filter(i5).forEach(r=>this._addButton(r)),this._addToolbarDropdown(t),this._addMenuBarMenu(t)}_addButton(e){this.editor.ui.componentFactory.add(`alignment:${e}`,r=>this._createButton(r,e))}_createButton(e,t,r={}){const i=this.editor,o=i.commands.get("alignment"),s=new Ne(e);return s.set({label:this.localizedOptionTitles[t],icon:rc.get(t),tooltip:!0,isToggleable:!0,...r}),s.bind("isEnabled").to(o),s.bind("isOn").to(o,"value",a=>a===t),this.listenTo(s,"execute",()=>{i.execute("alignment",{value:t}),i.editing.view.focus()}),s}_addToolbarDropdown(e){const t=this.editor;t.ui.componentFactory.add("alignment",i=>{const o=Ln(i),s=i.uiLanguageDirection==="rtl"?"w":"e",a=i.t;dd(o,()=>e.map(u=>this._createButton(i,u.name,{tooltipPosition:s})),{enableActiveItemFocusOnDropdownOpen:!0,isVertical:!0,ariaLabel:a("Text alignment toolbar")}),o.buttonView.set({label:a("Text alignment"),tooltip:!0}),o.extendTemplate({attributes:{class:"ck-alignment-dropdown"}});const l=i.contentLanguageDirection==="rtl"?rc.get("right"):rc.get("left"),c=t.commands.get("alignment");return o.buttonView.bind("icon").to(c,"value",u=>rc.get(u)||l),o.bind("isEnabled").to(c,"isEnabled"),this.listenTo(o,"execute",()=>{t.editing.view.focus()}),o})}_addMenuBarMenu(e){const t=this.editor;t.ui.componentFactory.add("menuBar:alignment",r=>{const i=t.commands.get("alignment"),o=r.t,s=new fr(r),a=new xs(r);s.bind("isEnabled").to(i),a.set({ariaLabel:o("Text alignment"),role:"menu"}),s.buttonView.set({label:o("Text alignment")});for(const l of e){const c=new Oo(r,s),u=new un(r);u.extendTemplate({attributes:{"aria-checked":u.bindTemplate.to("isOn")}}),u.delegate("execute").to(s),u.set({label:this.localizedOptionTitles[l.name],icon:rc.get(l.name)}),u.on("execute",()=>{t.execute("alignment",{value:l.name}),t.editing.view.focus()}),u.bind("isOn").to(i,"value",d=>d===l.name),u.bind("isEnabled").to(i,"isEnabled"),c.children.add(u),a.items.add(c)}return s.panelView.children.add(a),s})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ype extends W{static get requires(){return[Wpe,Kpe]}static get pluginName(){return"Alignment"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class a5{constructor(e,t=20){this._batch=null,this.model=e,this._size=0,this.limit=t,this._isLocked=!1,this._changeCallback=(r,i)=>{i.isLocal&&i.isUndoable&&i!==this._batch&&this._reset(!0)},this._selectionChangeCallback=()=>{this._reset()},this.model.document.on("change",this._changeCallback),this.model.document.selection.on("change:range",this._selectionChangeCallback),this.model.document.selection.on("change:attribute",this._selectionChangeCallback)}get batch(){return this._batch||(this._batch=this.model.createBatch({isTyping:!0})),this._batch}get size(){return this._size}input(e){this._size+=e,this._size>=this.limit&&this._reset(!0)}get isLocked(){return this._isLocked}lock(){this._isLocked=!0}unlock(){this._isLocked=!1}destroy(){this.model.document.off("change",this._changeCallback),this.model.document.selection.off("change:range",this._selectionChangeCallback),this.model.document.selection.off("change:attribute",this._selectionChangeCallback)}_reset(e=!1){(!this.isLocked||e)&&(this._batch=null,this._size=0)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Xpe extends Me{constructor(e,t){super(e),this._buffer=new a5(e.model,t),this._isEnabledBasedOnSelection=!1}get buffer(){return this._buffer}destroy(){super.destroy(),this._buffer.destroy()}execute(e={}){const t=this.editor.model,r=t.document,i=e.text||"",o=i.length;let s=r.selection;if(e.selection?s=e.selection:e.range&&(s=t.createSelection(e.range)),!t.canEditAt(s))return;const a=e.resultRange;t.enqueueChange(this._buffer.batch,l=>{this._buffer.lock();const c=Array.from(r.selection.getAttributes());t.deleteContent(s),i&&t.insertContent(l.createText(i,c),s),a?l.setSelection(a):s.is("documentSelection")||l.setSelection(s),this._buffer.unlock(),this._buffer.input(o)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const cE=["insertText","insertReplacementText"];class Zpe extends ki{constructor(e){super(e),this.focusObserver=e.getObserver(nm),Re.isAndroid&&cE.push("insertCompositionText");const t=e.document;t.on("beforeinput",(r,i)=>{if(!this.isEnabled)return;const{data:o,targetRanges:s,inputType:a,domEvent:l}=i;if(!cE.includes(a))return;this.focusObserver.flush();const c=new eo(t,"insertText");t.fire(c,new Qa(e,l,{text:o,selection:e.createSelection(s)})),c.stop.called&&r.stop()}),t.on("compositionend",(r,{data:i,domEvent:o})=>{!this.isEnabled||Re.isAndroid||i&&t.fire("insertText",new Qa(e,o,{text:i,selection:t.selection}))},{priority:"lowest"})}observe(){}stopObserving(){}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class l5 extends W{static get pluginName(){return"Input"}init(){const e=this.editor,t=e.model,r=e.editing.view,i=t.document.selection;r.addObserver(Zpe);const o=new Xpe(e,e.config.get("typing.undoStep")||20);e.commands.add("insertText",o),e.commands.add("input",o),this.listenTo(r.document,"insertText",(s,a)=>{r.document.isComposing||a.preventDefault();const{text:l,selection:c,resultRange:u}=a,d=Array.from(c.getRanges()).map(m=>e.editing.mapper.toModelRange(m));let f=l;if(Re.isAndroid){const m=Array.from(d[0].getItems()).reduce((g,p)=>g+(p.is("$textProxy")?p.data:""),"");m&&(m.length<=f.length?f.startsWith(m)&&(f=f.substring(m.length),d[0].start=d[0].start.getShiftedBy(m.length)):m.startsWith(f)&&(d[0].start=d[0].start.getShiftedBy(f.length),f=""))}const h={text:f,selection:t.createSelection(d)};u&&(h.resultRange=e.editing.mapper.toModelRange(u)),e.execute("insertText",h),r.scrollToTheSelection()}),Re.isAndroid?this.listenTo(r.document,"keydown",(s,a)=>{i.isCollapsed||a.keyCode!=229||!r.document.isComposing||uE(t,o)}):this.listenTo(r.document,"compositionstart",()=>{i.isCollapsed||uE(t,o)})}}function uE(n,e){if(!e.isEnabled)return;const t=e.buffer;t.lock(),n.enqueueChange(t.batch,()=>{n.deleteContent(n.document.selection)}),t.unlock()}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class dE extends Me{constructor(e,t){super(e),this.direction=t,this._buffer=new a5(e.model,e.config.get("typing.undoStep")),this._isEnabledBasedOnSelection=!1}get buffer(){return this._buffer}execute(e={}){const t=this.editor.model,r=t.document;t.enqueueChange(this._buffer.batch,i=>{this._buffer.lock();const o=i.createSelection(e.selection||r.selection);if(!t.canEditAt(o))return;const s=e.sequence||1,a=o.isCollapsed;if(o.isCollapsed&&t.modifySelection(o,{direction:this.direction,unit:e.unit,treatEmojiAsSingleUnit:!0}),this._shouldEntireContentBeReplacedWithParagraph(s)){this._replaceEntireContentWithParagraph(i);return}if(this._shouldReplaceFirstBlockWithParagraph(o,s)){this.editor.execute("paragraph",{selection:o});return}if(o.isCollapsed)return;let l=0;o.getFirstRange().getMinimalFlatRanges().forEach(c=>{l+=hy(c.getWalker({singleCharacters:!0,ignoreElementEnd:!0,shallow:!0}))}),t.deleteContent(o,{doNotResetEntireContent:a,direction:this.direction}),this._buffer.input(l),i.setSelection(o),this._buffer.unlock()})}_shouldEntireContentBeReplacedWithParagraph(e){if(e>1)return!1;const t=this.editor.model,i=t.document.selection,o=t.schema.getLimitElement(i);if(!(i.isCollapsed&&i.containsEntireContent(o))||!t.schema.checkChild(o,"paragraph"))return!1;const a=o.getChild(0);return!(a&&a.is("element","paragraph"))}_replaceEntireContentWithParagraph(e){const t=this.editor.model,i=t.document.selection,o=t.schema.getLimitElement(i),s=e.createElement("paragraph");e.remove(e.createRangeIn(o)),e.insert(s,o),e.setSelection(s,0)}_shouldReplaceFirstBlockWithParagraph(e,t){const r=this.editor.model;if(t>1||this.direction!="backward"||!e.isCollapsed)return!1;const i=e.getFirstPosition(),o=r.schema.getLimitElement(i),s=o.getChild(0);return!(i.parent!=s||!e.containsEntireContent(s)||!r.schema.checkChild(o,"paragraph")||s.name=="paragraph")}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Jpe="character",fE="word",Qpe="codePoint",po="selection",ua="backward",bc="forward",c5={deleteContent:{unit:po,direction:ua},deleteContentBackward:{unit:Qpe,direction:ua},deleteWordBackward:{unit:fE,direction:ua},deleteHardLineBackward:{unit:po,direction:ua},deleteSoftLineBackward:{unit:po,direction:ua},deleteContentForward:{unit:Jpe,direction:bc},deleteWordForward:{unit:fE,direction:bc},deleteHardLineForward:{unit:po,direction:bc},deleteSoftLineForward:{unit:po,direction:bc}};class eve extends ki{constructor(e){super(e);const t=e.document;let r=0;t.on("keydown",()=>{r++}),t.on("keyup",()=>{r=0}),t.on("beforeinput",(i,o)=>{if(!this.isEnabled)return;const{targetRanges:s,domEvent:a,inputType:l}=o,c=c5[l];if(!c)return;const u={direction:c.direction,unit:c.unit,sequence:r};u.unit==po&&(u.selectionToRemove=e.createSelection(s[0])),l==="deleteContentBackward"&&(Re.isAndroid&&(u.sequence=1),nve(s)&&(u.unit=po,u.selectionToRemove=e.createSelection(s)));const d=new Tl(t,"delete",s[0]);t.fire(d,new Qa(e,a,u)),d.stop.called&&i.stop()}),Re.isBlink&&tve(this)}observe(){}stopObserving(){}}function tve(n){const e=n.view,t=e.document;let r=null,i=!1;t.on("keydown",(a,{keyCode:l})=>{r=l,i=!1}),t.on("keyup",(a,{keyCode:l,domEvent:c})=>{const u=t.selection,d=n.isEnabled&&l==r&&o(l)&&!u.isCollapsed&&!i;if(r=null,d){const f=u.getFirstRange(),h=new Tl(t,"delete",f),m={unit:po,direction:s(l),selectionToRemove:u};t.fire(h,new Qa(e,c,m))}}),t.on("beforeinput",(a,{inputType:l})=>{const c=c5[l];o(r)&&c&&c.direction==s(r)&&(i=!0)},{priority:"high"}),t.on("beforeinput",(a,{inputType:l,data:c})=>{r==qe.delete&&l=="insertText"&&c==""&&a.stop()},{priority:"high"});function o(a){return a==qe.backspace||a==qe.delete}function s(a){return a==qe.backspace?ua:bc}}function nve(n){if(n.length!=1||n[0].isCollapsed)return!1;const e=n[0].getWalker({direction:"backward",singleCharacters:!0,ignoreElementEnd:!0});let t=0;for(const{nextPosition:r,item:i}of e){if(r.parent.is("$text")){const o=r.parent.data,s=r.offset;if(A0(o,s)||T0(o,s)||EM(o,s))continue;t++}else(i.is("containerElement")||i.is("emptyElement"))&&t++;if(t>1)return!0}return!1}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ti extends W{static get pluginName(){return"Delete"}init(){const e=this.editor,t=e.editing.view,r=t.document,i=e.model.document;t.addObserver(eve),this._undoOnBackspace=!1;const o=new dE(e,"forward");e.commands.add("deleteForward",o),e.commands.add("forwardDelete",o),e.commands.add("delete",new dE(e,"backward")),this.listenTo(r,"delete",(s,a)=>{r.isComposing||a.preventDefault();const{direction:l,sequence:c,selectionToRemove:u,unit:d}=a,f=l==="forward"?"deleteForward":"delete",h={sequence:c};if(d=="selection"){const m=Array.from(u.getRanges()).map(g=>e.editing.mapper.toModelRange(g));h.selection=e.model.createSelection(m)}else h.unit=d;e.execute(f,h),t.scrollToTheSelection()},{priority:"low"}),this.editor.plugins.has("UndoEditing")&&(this.listenTo(r,"delete",(s,a)=>{this._undoOnBackspace&&a.direction=="backward"&&a.sequence==1&&a.unit=="codePoint"&&(this._undoOnBackspace=!1,e.execute("undo"),a.preventDefault(),s.stop())},{context:"$capture"}),this.listenTo(i,"change",()=>{this._undoOnBackspace=!1}))}requestUndoOnBackspace(){this.editor.plugins.has("UndoEditing")&&(this._undoOnBackspace=!0)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class rve extends W{static get requires(){return[l5,Ti]}static get pluginName(){return"Typing"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function u5(n,e){let t=n.start;return{text:Array.from(n.getWalker({ignoreElementEnd:!1})).reduce((i,{item:o})=>o.is("$text")||o.is("$textProxy")?i+o.data:(t=e.createPositionAfter(o),""),""),range:e.createRange(t,n.end)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class d5 extends ct(){constructor(e,t){super(),this.model=e,this.testCallback=t,this._hasMatch=!1,this.set("isEnabled",!0),this.on("change:isEnabled",()=>{this.isEnabled?this._startListening():(this.stopListening(e.document.selection),this.stopListening(e.document))}),this._startListening()}get hasMatch(){return this._hasMatch}_startListening(){const t=this.model.document;this.listenTo(t.selection,"change:range",(r,{directChange:i})=>{if(i){if(!t.selection.isCollapsed){this.hasMatch&&(this.fire("unmatched"),this._hasMatch=!1);return}this._evaluateTextBeforeSelection("selection")}}),this.listenTo(t,"change:data",(r,i)=>{i.isUndo||!i.isLocal||this._evaluateTextBeforeSelection("data",{batch:i})})}_evaluateTextBeforeSelection(e,t={}){const r=this.model,o=r.document.selection,s=r.createRange(r.createPositionAt(o.focus.parent,0),o.focus),{text:a,range:l}=u5(s,r),c=this.testCallback(a);if(!c&&this.hasMatch&&this.fire("unmatched"),this._hasMatch=!!c,c){const u=Object.assign(t,{text:a,range:l});typeof c=="object"&&Object.assign(u,c),this.fire(`matched:${e}`,u)}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class hE extends W{static get pluginName(){return"TwoStepCaretMovement"}constructor(e){super(e),this._isNextGravityRestorationSkipped=!1,this.attributes=new Set,this._overrideUid=null}init(){const e=this.editor,t=e.model,r=e.editing.view,i=e.locale,o=t.document.selection;this.listenTo(r.document,"arrowKey",(s,a)=>{if(!o.isCollapsed||a.shiftKey||a.altKey||a.ctrlKey)return;const l=a.keyCode==qe.arrowright,c=a.keyCode==qe.arrowleft;if(!l&&!c)return;const u=i.contentLanguageDirection;let d=!1;u==="ltr"&&l||u==="rtl"&&c?d=this._handleForwardMovement(a):d=this._handleBackwardMovement(a),d===!0&&s.stop()},{context:"$text",priority:"highest"}),this.listenTo(o,"change:range",(s,a)=>{if(this._isNextGravityRestorationSkipped){this._isNextGravityRestorationSkipped=!1;return}this._isGravityOverridden&&(!a.directChange&&xr(o.getFirstPosition(),this.attributes)||this._restoreGravity())}),this._enableClickingAfterNode(),this._enableInsertContentSelectionAttributesFixer(),this._handleDeleteContentAfterNode()}registerAttribute(e){this.attributes.add(e)}_handleForwardMovement(e){const t=this.attributes,r=this.editor.model,i=r.document.selection,o=i.getFirstPosition();return this._isGravityOverridden||o.isAtStart&&Di(i,t)?!1:xr(o,t)?(oc(e),Di(i,t)&&xr(o,t,!0)?ic(r,t):this._overrideGravity(),!0):!1}_handleBackwardMovement(e){const t=this.attributes,r=this.editor.model,i=r.document.selection,o=i.getFirstPosition();return this._isGravityOverridden?(oc(e),this._restoreGravity(),xr(o,t,!0)?ic(r,t):ff(r,t,o),!0):o.isAtStart?Di(i,t)?(oc(e),ff(r,t,o),!0):!1:!Di(i,t)&&xr(o,t,!0)?(oc(e),ff(r,t,o),!0):mE(o,t)?o.isAtEnd&&!Di(i,t)&&xr(o,t)?(oc(e),ff(r,t,o),!0):(this._isNextGravityRestorationSkipped=!0,this._overrideGravity(),!1):!1}_enableClickingAfterNode(){const e=this.editor,t=e.model,r=t.document.selection,i=e.editing.view.document;e.editing.view.addObserver(Sg);let o=!1;this.listenTo(i,"mousedown",()=>{o=!0}),this.listenTo(i,"selectionChange",()=>{const s=this.attributes;if(!o||(o=!1,!r.isCollapsed)||!Di(r,s))return;const a=r.getFirstPosition();xr(a,s)&&(a.isAtStart||xr(a,s,!0)?ic(t,s):this._isGravityOverridden||this._overrideGravity())})}_enableInsertContentSelectionAttributesFixer(){const t=this.editor.model,r=t.document.selection,i=this.attributes;this.listenTo(t,"insertContent",()=>{const o=r.getFirstPosition();Di(r,i)&&xr(o,i)&&ic(t,i)},{priority:"low"})}_handleDeleteContentAfterNode(){const e=this.editor,t=e.model,r=t.document.selection,i=e.editing.view;let o=!1,s=!1;this.listenTo(i.document,"delete",(a,l)=>{o=l.direction==="backward"},{priority:"high"}),this.listenTo(t,"deleteContent",()=>{if(!o)return;const a=r.getFirstPosition();s=Di(r,this.attributes)&&!mE(a,this.attributes)},{priority:"high"}),this.listenTo(t,"deleteContent",()=>{o&&(o=!1,!s&&e.model.enqueueChange(()=>{const a=r.getFirstPosition();Di(r,this.attributes)&&xr(a,this.attributes)&&(a.isAtStart||xr(a,this.attributes,!0)?ic(t,this.attributes):this._isGravityOverridden||this._overrideGravity())}))},{priority:"low"})}get _isGravityOverridden(){return!!this._overrideUid}_overrideGravity(){this._overrideUid=this.editor.model.change(e=>e.overrideSelectionGravity())}_restoreGravity(){this.editor.model.change(e=>{e.restoreSelectionGravity(this._overrideUid),this._overrideUid=null})}}function Di(n,e){for(const t of e)if(n.hasAttribute(t))return!0;return!1}function ff(n,e,t){const r=t.nodeBefore;n.change(i=>{if(r){const o=[],s=n.schema.isObject(r)&&n.schema.isInline(r);for(const[a,l]of r.getAttributes())n.schema.checkAttribute("$text",a)&&(!s||n.schema.getAttributeProperties(a).copyFromObject!==!1)&&o.push([a,l]);i.setSelectionAttribute(o)}else i.removeSelectionAttribute(e)})}function ic(n,e){n.change(t=>{t.removeSelectionAttribute(e)})}function oc(n){n.preventDefault()}function mE(n,e){const t=n.getShiftedBy(-1);return xr(t,e)}function xr(n,e,t=!1){const{nodeBefore:r,nodeAfter:i}=n;for(const o of e){const s=r?r.getAttribute(o):void 0,a=i?i.getAttribute(o):void 0;if(!(t&&(s===void 0||a===void 0))&&a!==s)return!0}return!1}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const gE={copyright:{from:"(c)",to:"©"},registeredTrademark:{from:"(r)",to:"®"},trademark:{from:"(tm)",to:"™"},oneHalf:{from:/(^|[^/a-z0-9])(1\/2)([^/a-z0-9])$/i,to:[null,"½",null]},oneThird:{from:/(^|[^/a-z0-9])(1\/3)([^/a-z0-9])$/i,to:[null,"⅓",null]},twoThirds:{from:/(^|[^/a-z0-9])(2\/3)([^/a-z0-9])$/i,to:[null,"⅔",null]},oneForth:{from:/(^|[^/a-z0-9])(1\/4)([^/a-z0-9])$/i,to:[null,"¼",null]},threeQuarters:{from:/(^|[^/a-z0-9])(3\/4)([^/a-z0-9])$/i,to:[null,"¾",null]},lessThanOrEqual:{from:"<=",to:"≤"},greaterThanOrEqual:{from:">=",to:"≥"},notEqual:{from:"!=",to:"≠"},arrowLeft:{from:"<-",to:"←"},arrowRight:{from:"->",to:"→"},horizontalEllipsis:{from:"...",to:"…"},enDash:{from:/(^| )(--)( )$/,to:[null,"–",null]},emDash:{from:/(^| )(---)( )$/,to:[null,"—",null]},quotesPrimary:{from:Zs('"'),to:[null,"“",null,"”"]},quotesSecondary:{from:Zs("'"),to:[null,"‘",null,"’"]},quotesPrimaryEnGb:{from:Zs("'"),to:[null,"‘",null,"’"]},quotesSecondaryEnGb:{from:Zs('"'),to:[null,"“",null,"”"]},quotesPrimaryPl:{from:Zs('"'),to:[null,"„",null,"”"]},quotesSecondaryPl:{from:Zs("'"),to:[null,"‚",null,"’"]}},pE={symbols:["copyright","registeredTrademark","trademark"],mathematical:["oneHalf","oneThird","twoThirds","oneForth","threeQuarters","lessThanOrEqual","greaterThanOrEqual","notEqual","arrowLeft","arrowRight"],typography:["horizontalEllipsis","enDash","emDash"],quotes:["quotesPrimary","quotesSecondary"]},ive=["symbols","mathematical","typography","quotes"];class ove extends W{static get requires(){return["Delete","Input"]}static get pluginName(){return"TextTransformation"}constructor(e){super(e),e.config.define("typing",{transformations:{include:ive}})}init(){const t=this.editor.model.document.selection;t.on("change:range",()=>{this.isEnabled=!t.anchor.parent.is("element","codeBlock")}),this._enableTransformationWatchers()}_enableTransformationWatchers(){const e=this.editor,t=e.model,r=e.plugins.get("Delete"),i=cve(e.config.get("typing.transformations")),o=a=>{for(const l of i)if(l.from.test(a))return{normalizedTransformation:l}},s=new d5(e.model,o);s.on("matched:data",(a,l)=>{if(!l.batch.isTyping)return;const{from:c,to:u}=l.normalizedTransformation,d=c.exec(l.text),f=u(d.slice(1)),h=l.range;let m=d.index;t.enqueueChange(g=>{for(let p=1;p<d.length;p++){const b=d[p],y=f[p-1];if(y==null){m+=b.length;continue}const C=h.start.getShiftedBy(m),A=t.createRange(C,C.getShiftedBy(b.length)),w=lve(C);t.insertContent(g.createText(y,w),A),m+=y.length}t.enqueueChange(()=>{r.requestUndoOnBackspace()})})}),s.bind("isEnabled").to(this)}}function sve(n){return typeof n=="string"?new RegExp(`(${rI(n)})$`):n}function ave(n){return typeof n=="string"?()=>[n]:n instanceof Array?()=>n:n}function lve(n){return(n.textNode?n.textNode:n.nodeAfter).getAttributes()}function Zs(n){return new RegExp(`(^|\\s)(${n})([^${n}]*)(${n})$`)}function cve(n){const e=n.extra||[],t=n.remove||[],r=o=>!t.includes(o),i=n.include.concat(e).filter(r);return uve(i).filter(r).map(o=>typeof o=="string"&&gE[o]?gE[o]:o).filter(o=>typeof o=="object").map(o=>({from:sve(o.from),to:ave(o.to)}))}function uve(n){const e=new Set;for(const t of n)if(typeof t=="string"&&pE[t])for(const r of pE[t])e.add(r);else e.add(t);return Array.from(e)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function kg(n,e,t,r){return r.createRange(vE(n,e,t,!0,r),vE(n,e,t,!1,r))}function vE(n,e,t,r,i){let o=n.textNode||(r?n.nodeBefore:n.nodeAfter),s=null;for(;o&&o.getAttribute(e)==t;)s=o,o=r?o.previousSibling:o.nextSibling;return s?i.createPositionAt(s,r?"before":"after"):n}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function dve(n,e,t,r){const i=n.editing.view,o=new Set;i.document.registerPostFixer(s=>{const a=n.model.document.selection;let l=!1;if(a.hasAttribute(e)){const c=kg(a.getFirstPosition(),e,a.getAttribute(e),n.model),u=n.editing.mapper.toViewRange(c);for(const d of u.getItems())d.is("element",t)&&!d.hasClass(r)&&(s.addClass(r,d),o.add(d),l=!0)}return l}),n.conversion.for("editingDowncast").add(s=>{s.on("insert",a,{priority:"highest"}),s.on("remove",a,{priority:"highest"}),s.on("attribute",a,{priority:"highest"}),s.on("selection",a,{priority:"highest"});function a(){i.change(l=>{for(const c of o.values())l.removeClass(r,c),o.delete(c)})}})}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function uo(n,e,t,r){let i,o=null;typeof r=="function"?i=r:(o=n.commands.get(r),i=()=>{n.execute(r)}),n.model.document.on("change:data",(s,a)=>{if(o&&!o.isEnabled||!e.isEnabled)return;const l=ln(n.model.document.selection.getRanges());if(!l.isCollapsed||a.isUndo||!a.isLocal)return;const c=Array.from(n.model.document.differ.getChanges()),u=c[0];if(c.length!=1||u.type!=="insert"||u.name!="$text"||u.length!=1)return;const d=u.position.parent;if(d.is("element","codeBlock")||d.is("element","listItem")&&typeof r!="function"&&!["numberedList","bulletedList","todoList"].includes(r)||o&&o.value===!0)return;const f=d.getChild(0),h=n.model.createRangeOn(f);if(!h.containsRange(l)&&!l.end.isEqual(h.end))return;const m=t.exec(f.data.substr(0,l.end.offset));m&&n.model.enqueueChange(g=>{const p=g.createPositionAt(d,0),b=g.createPositionAt(d,m[0].length),y=new Zn(p,b);if(i({match:m})!==!1){g.remove(y);const A=n.model.document.selection.getFirstRange(),w=g.createRangeIn(d);d.isEmpty&&!w.isEqual(A)&&!w.containsRange(A,!0)&&g.remove(d)}y.detach(),n.model.enqueueChange(()=>{n.plugins.get("Delete").requestUndoOnBackspace()})})})}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Js(n,e,t,r){let i,o;t instanceof RegExp?i=t:o=t,o=o||(s=>{let a;const l=[],c=[];for(;(a=i.exec(s))!==null&&!(a&&a.length<4);){let{index:u,"1":d,"2":f,"3":h}=a;const m=d+f+h;u+=a[0].length-m.length;const g=[u,u+d.length],p=[u+d.length+f.length,u+d.length+f.length+h.length];l.push(g),l.push(p),c.push([u+d.length,u+d.length+f.length])}return{remove:l,format:c}}),n.model.document.on("change:data",(s,a)=>{if(a.isUndo||!a.isLocal||!e.isEnabled)return;const l=n.model,c=l.document.selection;if(!c.isCollapsed)return;const u=Array.from(l.document.differ.getChanges()),d=u[0];if(u.length!=1||d.type!=="insert"||d.name!="$text"||d.length!=1)return;const f=c.focus,h=f.parent,{text:m,range:g}=fve(l.createRange(l.createPositionAt(h,0),f),l),p=o(m),b=bE(g.start,p.format,l),y=bE(g.start,p.remove,l);b.length&&y.length&&l.enqueueChange(C=>{if(r(C,b)!==!1){for(const w of y.reverse())C.remove(w);l.enqueueChange(()=>{n.plugins.get("Delete").requestUndoOnBackspace()})}})})}function bE(n,e,t){return e.filter(r=>r[0]!==void 0&&r[1]!==void 0).map(r=>t.createRange(n.getShiftedBy(r[0]),n.getShiftedBy(r[1])))}function fve(n,e){let t=n.start;return{text:Array.from(n.getItems()).reduce((i,o)=>!(o.is("$text")||o.is("$textProxy"))||o.getAttribute("code")?(t=e.createPositionAfter(o),""):i+o.data,""),range:e.createRange(t,n.end)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class hve extends W{static get requires(){return[Ti]}static get pluginName(){return"Autoformat"}afterInit(){const e=this.editor,t=this.editor.t;this._addListAutoformats(),this._addBasicStylesAutoformats(),this._addHeadingAutoformats(),this._addBlockQuoteAutoformats(),this._addCodeBlockAutoformats(),this._addHorizontalLineAutoformats(),e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Revert autoformatting action"),keystroke:"Backspace"}]})}_addListAutoformats(){const e=this.editor.commands;e.get("bulletedList")&&uo(this.editor,this,/^[*-]\s$/,"bulletedList"),e.get("numberedList")&&uo(this.editor,this,/^1[.|)]\s$/,"numberedList"),e.get("todoList")&&uo(this.editor,this,/^\[\s?\]\s$/,"todoList"),e.get("checkTodoList")&&uo(this.editor,this,/^\[\s?x\s?\]\s$/,()=>{this.editor.execute("todoList"),this.editor.execute("checkTodoList")})}_addBasicStylesAutoformats(){const e=this.editor.commands;if(e.get("bold")){const t=hf(this.editor,"bold");Js(this.editor,this,/(?:^|\s)(\*\*)([^*]+)(\*\*)$/g,t),Js(this.editor,this,/(?:^|\s)(__)([^_]+)(__)$/g,t)}if(e.get("italic")){const t=hf(this.editor,"italic");Js(this.editor,this,/(?:^|\s)(\*)([^*_]+)(\*)$/g,t),Js(this.editor,this,/(?:^|\s)(_)([^_]+)(_)$/g,t)}if(e.get("code")){const t=hf(this.editor,"code");Js(this.editor,this,/(`)([^`]+)(`)$/g,t)}if(e.get("strikethrough")){const t=hf(this.editor,"strikethrough");Js(this.editor,this,/(~~)([^~]+)(~~)$/g,t)}}_addHeadingAutoformats(){const e=this.editor.commands.get("heading");e&&e.modelElements.filter(t=>t.match(/^heading[1-6]$/)).forEach(t=>{const r=t[7],i=new RegExp(`^(#{${r}})\\s$`);uo(this.editor,this,i,()=>{if(!e.isEnabled||e.value===t)return!1;this.editor.execute("heading",{value:t})})})}_addBlockQuoteAutoformats(){this.editor.commands.get("blockQuote")&&uo(this.editor,this,/^>\s$/,"blockQuote")}_addCodeBlockAutoformats(){const e=this.editor,t=e.model.document.selection;e.commands.get("codeBlock")&&uo(e,this,/^```$/,()=>{if(t.getFirstPosition().parent.is("element","listItem"))return!1;this.editor.execute("codeBlock",{usePreviousLanguageChoice:!0})})}_addHorizontalLineAutoformats(){this.editor.commands.get("horizontalLine")&&uo(this.editor,this,/^---$/,"horizontalLine")}}function hf(n,e){return(t,r)=>{if(!n.commands.get(e).isEnabled)return!1;const o=n.model.schema.getValidRanges(r,e);for(const s of o)t.setAttribute(e,!0,s);t.removeSelectionAttribute(e)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class q0 extends Me{constructor(e,t){super(e),this.attributeKey=t}refresh(){const e=this.editor.model,t=e.document;this.value=this._getValueFromFirstAllowedNode(),this.isEnabled=e.schema.checkAttributeInSelection(t.selection,this.attributeKey)}execute(e={}){const t=this.editor.model,i=t.document.selection,o=e.forceValue===void 0?!this.value:e.forceValue;t.change(s=>{if(i.isCollapsed)o?s.setSelectionAttribute(this.attributeKey,!0):s.removeSelectionAttribute(this.attributeKey);else{const a=t.schema.getValidRanges(i.getRanges(),this.attributeKey);for(const l of a)o?s.setAttribute(this.attributeKey,o,l):s.removeAttribute(this.attributeKey,l)}})}_getValueFromFirstAllowedNode(){const e=this.editor.model,t=e.schema,r=e.document.selection;if(r.isCollapsed)return r.hasAttribute(this.attributeKey);for(const i of r.getRanges())for(const o of i.getItems())if(t.checkAttribute(o,this.attributeKey))return o.hasAttribute(this.attributeKey);return!1}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Qs="bold";class mve extends W{static get pluginName(){return"BoldEditing"}init(){const e=this.editor,t=this.editor.t;e.model.schema.extend("$text",{allowAttributes:Qs}),e.model.schema.setAttributeProperties(Qs,{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:Qs,view:"strong",upcastAlso:["b",r=>{const i=r.getStyle("font-weight");return i&&(i=="bold"||Number(i)>=600)?{name:!0,styles:["font-weight"]}:null}]}),e.commands.add(Qs,new q0(e,Qs)),e.keystrokes.set("CTRL+B",Qs),e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Bold text"),keystroke:"CTRL+B"}]})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function K0({editor:n,commandName:e,plugin:t,icon:r,label:i,keystroke:o}){return s=>{const a=n.commands.get(e),l=new s(n.locale);return l.set({label:i,icon:r,keystroke:o,isToggleable:!0}),l.bind("isEnabled").to(a,"isEnabled"),t.listenTo(l,"execute",()=>{n.execute(e),n.editing.view.focus()}),l}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const mf="bold";class gve extends W{static get pluginName(){return"BoldUI"}init(){const e=this.editor,t=e.locale.t,r=e.commands.get(mf),i=K0({editor:e,commandName:mf,plugin:this,icon:Ee.bold,label:t("Bold"),keystroke:"CTRL+B"});e.ui.componentFactory.add(mf,()=>{const o=i(Ne);return o.set({tooltip:!0}),o.bind("isOn").to(r,"value"),o}),e.ui.componentFactory.add("menuBar:"+mf,()=>i(un))}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class pve extends W{static get requires(){return[mve,gve]}static get pluginName(){return"Bold"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const ea="italic";class vve extends W{static get pluginName(){return"ItalicEditing"}init(){const e=this.editor,t=this.editor.t;e.model.schema.extend("$text",{allowAttributes:ea}),e.model.schema.setAttributeProperties(ea,{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:ea,view:"i",upcastAlso:["em",{styles:{"font-style":"italic"}}]}),e.commands.add(ea,new q0(e,ea)),e.keystrokes.set("CTRL+I",ea),e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Italic text"),keystroke:"CTRL+I"}]})}}const bve='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m9.586 14.633.021.004c-.036.335.095.655.393.962.082.083.173.15.274.201h1.474a.6.6 0 1 1 0 1.2H5.304a.6.6 0 0 1 0-1.2h1.15c.474-.07.809-.182 1.005-.334.157-.122.291-.32.404-.597l2.416-9.55a1.053 1.053 0 0 0-.281-.823 1.12 1.12 0 0 0-.442-.296H8.15a.6.6 0 0 1 0-1.2h6.443a.6.6 0 1 1 0 1.2h-1.195c-.376.056-.65.155-.823.296-.215.175-.423.439-.623.79l-2.366 9.347z"/></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const gf="italic";class yve extends W{static get pluginName(){return"ItalicUI"}init(){const e=this.editor,t=e.commands.get(gf),r=e.locale.t,i=K0({editor:e,commandName:gf,plugin:this,icon:bve,keystroke:"CTRL+I",label:r("Italic")});e.ui.componentFactory.add(gf,()=>{const o=i(Ne);return o.set({tooltip:!0}),o.bind("isOn").to(t,"value"),o}),e.ui.componentFactory.add("menuBar:"+gf,()=>i(un))}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class wve extends W{static get requires(){return[vve,yve]}static get pluginName(){return"Italic"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const sc="underline";class _ve extends W{static get pluginName(){return"UnderlineEditing"}init(){const e=this.editor,t=this.editor.t;e.model.schema.extend("$text",{allowAttributes:sc}),e.model.schema.setAttributeProperties(sc,{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:sc,view:"u",upcastAlso:{styles:{"text-decoration":"underline"}}}),e.commands.add(sc,new q0(e,sc)),e.keystrokes.set("CTRL+U","underline"),e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Underline text"),keystroke:"CTRL+U"}]})}}const Cve='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 18v-1.5h14V18zm2.2-8V3.6c0-.4.4-.6.8-.6.3 0 .7.2.7.6v6.2c0 2 1.3 2.8 3.2 2.8 1.9 0 3.4-.9 3.4-2.9V3.6c0-.3.4-.5.8-.5.3 0 .7.2.7.5V10c0 2.7-2.2 4-4.9 4-2.6 0-4.7-1.2-4.7-4z"/></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const pf="underline";class Sve extends W{static get pluginName(){return"UnderlineUI"}init(){const e=this.editor,t=e.commands.get(pf),r=e.locale.t,i=K0({editor:e,commandName:pf,plugin:this,icon:Cve,label:r("Underline"),keystroke:"CTRL+U"});e.ui.componentFactory.add(pf,()=>{const o=i(Ne);return o.set({tooltip:!0}),o.bind("isOn").to(t,"value"),o}),e.ui.componentFactory.add("menuBar:"+pf,()=>i(un))}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class xve extends W{static get requires(){return[_ve,Sve]}static get pluginName(){return"Underline"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function*f5(n,e){for(const t of e)t&&n.getAttributeProperties(t[0]).copyOnEnter&&(yield t)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ave extends Me{execute(){this.editor.model.change(e=>{this.enterBlock(e),this.fire("afterExecute",{writer:e})})}enterBlock(e){const t=this.editor.model,r=t.document.selection,i=t.schema,o=r.isCollapsed,s=r.getFirstRange(),a=s.start.parent,l=s.end.parent;if(i.isLimit(a)||i.isLimit(l))return!o&&a==l&&t.deleteContent(r),!1;if(o){const c=f5(e.model.schema,r.getAttributes());return yE(e,s.start),e.setSelectionAttribute(c),!0}else{const c=!(s.start.isAtStart&&s.end.isAtEnd),u=a==l;if(t.deleteContent(r,{leaveUnmerged:c}),c){if(u)return yE(e,r.focus),!0;e.setSelection(l,0)}}return!1}}function yE(n,e){n.split(e),n.setSelection(e.parent.nextSibling,0)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Tve={insertParagraph:{isSoft:!1},insertLineBreak:{isSoft:!0}};class h5 extends ki{constructor(e){super(e);const t=this.document;let r=!1;t.on("keydown",(i,o)=>{r=o.shiftKey}),t.on("beforeinput",(i,o)=>{if(!this.isEnabled)return;let s=o.inputType;Re.isSafari&&r&&s=="insertParagraph"&&(s="insertLineBreak");const a=o.domEvent,l=Tve[s];if(!l)return;const c=new Tl(t,"enter",o.targetRanges[0]);t.fire(c,new Qa(e,a,{isSoft:l.isSoft})),c.stop.called&&i.stop()})}observe(){}stopObserving(){}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class md extends W{static get pluginName(){return"Enter"}init(){const e=this.editor,t=e.editing.view,r=t.document,i=this.editor.t;t.addObserver(h5),e.commands.add("enter",new Ave(e)),this.listenTo(r,"enter",(o,s)=>{r.isComposing||s.preventDefault(),!s.isSoft&&(e.execute("enter"),t.scrollToTheSelection())},{priority:"low"}),e.accessibility.addKeystrokeInfos({keystrokes:[{label:i("Insert a hard break (a new paragraph)"),keystroke:"Enter"}]})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Eve extends Me{execute(){const e=this.editor.model,t=e.document;e.change(r=>{Pve(e,r,t.selection),this.fire("afterExecute",{writer:r})})}refresh(){const e=this.editor.model,t=e.document;this.isEnabled=kve(e.schema,t.selection)}}function kve(n,e){if(e.rangeCount>1)return!1;const t=e.anchor;if(!t||!n.checkChild(t,"softBreak"))return!1;const r=e.getFirstRange(),i=r.start.parent,o=r.end.parent;return!((Oy(i,n)||Oy(o,n))&&i!==o)}function Pve(n,e,t){const r=t.isCollapsed,i=t.getFirstRange(),o=i.start.parent,s=i.end.parent,a=o==s;if(r){const l=f5(n.schema,t.getAttributes());wE(n,e,i.end),e.removeSelectionAttribute(t.getAttributeKeys()),e.setSelectionAttribute(l)}else{const l=!(i.start.isAtStart&&i.end.isAtEnd);n.deleteContent(t,{leaveUnmerged:l}),a?wE(n,e,t.focus):l&&e.setSelection(s,0)}}function wE(n,e,t){const r=e.createElement("softBreak");n.insertContent(r,t),e.setSelection(r,"after")}function Oy(n,e){return n.is("rootElement")?!1:e.isLimit(n)||Oy(n.parent,e)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ive extends W{static get pluginName(){return"ShiftEnter"}init(){const e=this.editor,t=e.model.schema,r=e.conversion,i=e.editing.view,o=i.document,s=this.editor.t;t.register("softBreak",{allowWhere:"$text",isInline:!0}),r.for("upcast").elementToElement({model:"softBreak",view:"br"}),r.for("downcast").elementToElement({model:"softBreak",view:(a,{writer:l})=>l.createEmptyElement("br")}),i.addObserver(h5),e.commands.add("shiftEnter",new Eve(e)),this.listenTo(o,"enter",(a,l)=>{o.isComposing||l.preventDefault(),l.isSoft&&(e.execute("shiftEnter"),i.scrollToTheSelection())},{priority:"low"}),e.accessibility.addKeystrokeInfos({keystrokes:[{label:s("Insert a soft break (a <code>&lt;br&gt;</code> element)"),keystroke:"Shift+Enter"}]})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ove extends Me{refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(e={}){const t=this.editor.model,r=t.schema,i=t.document.selection,o=Array.from(i.getSelectedBlocks()),s=e.forceValue===void 0?!this.value:e.forceValue;t.change(a=>{if(!s)this._removeQuote(a,o.filter(vf));else{const l=o.filter(c=>vf(c)||CE(r,c));this._applyQuote(a,l)}})}_getValue(){const e=this.editor.model.document.selection,t=ln(e.getSelectedBlocks());return!!(t&&vf(t))}_checkEnabled(){if(this.value)return!0;const e=this.editor.model.document.selection,t=this.editor.model.schema,r=ln(e.getSelectedBlocks());return r?CE(t,r):!1}_removeQuote(e,t){_E(e,t).reverse().forEach(r=>{if(r.start.isAtStart&&r.end.isAtEnd){e.unwrap(r.start.parent);return}if(r.start.isAtStart){const o=e.createPositionBefore(r.start.parent);e.move(r,o);return}r.end.isAtEnd||e.split(r.end);const i=e.createPositionAfter(r.end.parent);e.move(r,i)})}_applyQuote(e,t){const r=[];_E(e,t).reverse().forEach(i=>{let o=vf(i.start);o||(o=e.createElement("blockQuote"),e.wrap(i,o)),r.push(o)}),r.reverse().reduce((i,o)=>i.nextSibling==o?(e.merge(e.createPositionAfter(i)),i):o)}}function vf(n){return n.parent.name=="blockQuote"?n.parent:null}function _E(n,e){let t,r=0;const i=[];for(;r<e.length;){const o=e[r],s=e[r+1];t||(t=n.createPositionBefore(o)),(!s||o.nextSibling!=s)&&(i.push(n.createRange(t,n.createPositionAfter(o))),t=null),r++}return i}function CE(n,e){const t=n.checkChild(e.parent,"blockQuote"),r=n.checkChild(["$root","blockQuote"],e);return t&&r}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Rve extends W{static get pluginName(){return"BlockQuoteEditing"}static get requires(){return[md,Ti]}init(){const e=this.editor,t=e.model.schema;e.commands.add("blockQuote",new Ove(e)),t.register("blockQuote",{inheritAllFrom:"$container"}),e.conversion.elementToElement({model:"blockQuote",view:"blockquote"}),e.model.document.registerPostFixer(s=>{const a=e.model.document.differ.getChanges();for(const l of a)if(l.type=="insert"){const c=l.position.nodeAfter;if(!c)continue;if(c.is("element","blockQuote")&&c.isEmpty)return s.remove(c),!0;if(c.is("element","blockQuote")&&!t.checkChild(l.position,c))return s.unwrap(c),!0;if(c.is("element")){const u=s.createRangeIn(c);for(const d of u.getItems())if(d.is("element","blockQuote")&&!t.checkChild(s.createPositionBefore(d),d))return s.unwrap(d),!0}}else if(l.type=="remove"){const c=l.position.parent;if(c.is("element","blockQuote")&&c.isEmpty)return s.remove(c),!0}return!1});const r=this.editor.editing.view.document,i=e.model.document.selection,o=e.commands.get("blockQuote");this.listenTo(r,"enter",(s,a)=>{if(!i.isCollapsed||!o.value)return;i.getLastPosition().parent.isEmpty&&(e.execute("blockQuote"),e.editing.view.scrollToTheSelection(),a.preventDefault(),s.stop())},{context:"blockquote"}),this.listenTo(r,"delete",(s,a)=>{if(a.direction!="backward"||!i.isCollapsed||!o.value)return;const l=i.getLastPosition().parent;l.isEmpty&&!l.previousSibling&&(e.execute("blockQuote"),e.editing.view.scrollToTheSelection(),a.preventDefault(),s.stop())},{context:"blockquote"})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Mve extends W{static get pluginName(){return"BlockQuoteUI"}init(){const e=this.editor,t=e.commands.get("blockQuote");e.ui.componentFactory.add("blockQuote",()=>{const r=this._createButton(Ne);return r.set({tooltip:!0}),r.bind("isOn").to(t,"value"),r}),e.ui.componentFactory.add("menuBar:blockQuote",()=>this._createButton(un))}_createButton(e){const t=this.editor,r=t.locale,i=t.commands.get("blockQuote"),o=new e(t.locale),s=r.t;return o.set({label:s("Block quote"),icon:Ee.quote,isToggleable:!0}),o.bind("isEnabled").to(i,"isEnabled"),this.listenTo(o,"execute",()=>{t.execute("blockQuote"),t.editing.view.focus()}),o}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Dve extends W{static get requires(){return[Rve,Mve]}static get pluginName(){return"BlockQuote"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Nu extends $o{constructor(e){super(e),this.domEventType=["paste","copy","cut","drop","dragover","dragstart","dragend","dragenter","dragleave"];const t=this.document;this.listenTo(t,"paste",r("clipboardInput"),{priority:"low"}),this.listenTo(t,"drop",r("clipboardInput"),{priority:"low"}),this.listenTo(t,"dragover",r("dragging"),{priority:"low"});function r(i){return(o,s)=>{s.preventDefault();const a=s.dropRange?[s.dropRange]:null,l=new eo(t,i);t.fire(l,{dataTransfer:s.dataTransfer,method:o.name,targetRanges:a,target:s.target,domEvent:s.domEvent}),l.stop.called&&s.stopPropagation()}}}onDomEvent(e){const t="clipboardData"in e?e.clipboardData:e.dataTransfer,r=e.type=="drop"||e.type=="paste",i={dataTransfer:new JM(t,{cacheFiles:r})};(e.type=="drop"||e.type=="dragover")&&(i.dropRange=Bve(this.view,e)),this.fire(e.type,e,i)}}function Bve(n,e){const t=e.target.ownerDocument,r=e.clientX,i=e.clientY;let o;return t.caretRangeFromPoint&&t.caretRangeFromPoint(r,i)?o=t.caretRangeFromPoint(r,i):e.rangeParent&&(o=t.createRange(),o.setStart(e.rangeParent,e.rangeOffset),o.collapse(!0)),o?n.domConverter.domRangeToView(o):null}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Nve(n){return n=n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r?\n\r?\n/g,"</p><p>").replace(/\r?\n/g,"<br>").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;").replace(/^\s/,"&nbsp;").replace(/\s$/,"&nbsp;").replace(/\s\s/g," &nbsp;"),(n.includes("</p><p>")||n.includes("<br>"))&&(n=`<p>${n}</p>`),n}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Lve(n){return n.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,(e,t)=>t.length==1?" ":t).replace(/<!--[\s\S]*?-->/g,"")}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const SE=["figcaption","li"],xE=["ol","ul"];function m5(n){if(n.is("$text")||n.is("$textProxy"))return n.data;if(n.is("element","img")&&n.hasAttribute("alt"))return n.getAttribute("alt");if(n.is("element","br"))return`
`;let e="",t=null;for(const r of n.getChildren())e+=Fve(r,t)+m5(r),t=r;return e}function Fve(n,e){return e?n.is("element","li")&&!n.isEmpty&&n.getChild(0).is("containerElement")||xE.includes(n.name)&&xE.includes(e.name)?`

`:!n.is("containerElement")&&!e.is("containerElement")?"":SE.includes(n.name)||SE.includes(e.name)?`
`:`

`:""}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Rc extends W{constructor(){super(...arguments),this._markersToCopy=new Map}static get pluginName(){return"ClipboardMarkersUtils"}_registerMarkerToCopy(e,t){this._markersToCopy.set(e,t)}_copySelectedFragmentWithMarkers(e,t,r=i=>i.model.getSelectedContent(i.model.document.selection)){return this.editor.model.change(i=>{const o=i.model.document.selection;i.setSelection(t);const s=this._insertFakeMarkersIntoSelection(i,i.model.document.selection,e),a=r(i),l=this._removeFakeMarkersInsideElement(i,a);for(const[c,u]of Object.entries(s)){l[c]||(l[c]=i.createRangeIn(a));for(const d of u)i.remove(d)}a.markers.clear();for(const[c,u]of Object.entries(l))a.markers.set(c,u);return i.setSelection(o),a})}_pasteMarkersIntoTransformedElement(e,t){const r=this._getPasteMarkersFromRangeMap(e);return this.editor.model.change(i=>{const o=this._insertFakeMarkersElements(i,r),s=t(i),a=this._removeFakeMarkersInsideElement(i,s);for(const l of Object.values(o).flat())i.remove(l);for(const[l,c]of Object.entries(a))i.model.markers.has(l)||i.addMarker(l,{usingOperation:!0,affectsData:!0,range:c});return s})}_pasteFragmentWithMarkers(e){const t=this._getPasteMarkersFromRangeMap(e.markers);e.markers.clear();for(const r of t)e.markers.set(r.name,r.range);return this.editor.model.insertContent(e)}_forceMarkersCopy(e,t,r={allowedActions:"all",copyPartiallySelected:!0,duplicateOnPaste:!0}){const i=this._markersToCopy.get(e);this._markersToCopy.set(e,r),t(),i?this._markersToCopy.set(e,i):this._markersToCopy.delete(e)}_isMarkerCopyable(e,t){const r=this._getMarkerClipboardConfig(e);if(!r)return!1;if(!t)return!0;const{allowedActions:i}=r;return i==="all"||i.includes(t)}_hasMarkerConfiguration(e){return!!this._getMarkerClipboardConfig(e)}_getMarkerClipboardConfig(e){const[t]=e.split(":");return this._markersToCopy.get(t)||null}_insertFakeMarkersIntoSelection(e,t,r){const i=this._getCopyableMarkersFromSelection(e,t,r);return this._insertFakeMarkersElements(e,i)}_getCopyableMarkersFromSelection(e,t,r){const i=Array.from(t.getRanges()),o=new Set(i.flatMap(a=>Array.from(e.model.markers.getMarkersIntersectingRange(a)))),s=a=>{if(!this._isMarkerCopyable(a.name,r))return!1;const{copyPartiallySelected:c}=this._getMarkerClipboardConfig(a.name);if(!c){const u=a.getRange();return i.some(d=>d.containsRange(u,!0))}return!0};return Array.from(o).filter(s).map(a=>({name:r==="dragstart"?this._getUniqueMarkerName(a.name):a.name,range:a.getRange()}))}_getPasteMarkersFromRangeMap(e,t=null){const{model:r}=this.editor;return(e instanceof Map?Array.from(e.entries()):Object.entries(e)).flatMap(([o,s])=>{if(!this._hasMarkerConfiguration(o))return[{name:o,range:s}];if(this._isMarkerCopyable(o,t)){const a=this._getMarkerClipboardConfig(o),l=r.markers.has(o)&&r.markers.get(o).getRange().root.rootName==="$graveyard";return(a.duplicateOnPaste||l)&&(o=this._getUniqueMarkerName(o)),[{name:o,range:s}]}return[]})}_insertFakeMarkersElements(e,t){const r={},i=t.flatMap(o=>{const{start:s,end:a}=o.range;return[{position:s,marker:o,type:"start"},{position:a,marker:o,type:"end"}]}).sort(({position:o},{position:s})=>o.isBefore(s)?1:-1);for(const{position:o,marker:s,type:a}of i){const l=e.createElement("$marker",{"data-name":s.name,"data-type":a});r[s.name]||(r[s.name]=[]),r[s.name].push(l),e.insert(l,o)}return r}_removeFakeMarkersInsideElement(e,t){const i=this._getAllFakeMarkersFromElement(e,t).reduce((o,s)=>{const a=s.markerElement&&e.createPositionBefore(s.markerElement);let l=o[s.name],c=!1;return l&&l.start&&l.end&&(this._getMarkerClipboardConfig(s.name).duplicateOnPaste?o[this._getUniqueMarkerName(s.name)]=o[s.name]:c=!0,l=null),c||(o[s.name]={...l,[s.type]:a}),s.markerElement&&e.remove(s.markerElement),o},{});return YL(i,o=>new V(o.start||e.createPositionFromPath(t,[0]),o.end||e.createPositionAt(t,"end")))}_getAllFakeMarkersFromElement(e,t){const r=Array.from(e.createRangeIn(t)).flatMap(({item:s})=>{if(!s.is("element","$marker"))return[];const a=s.getAttribute("data-name"),l=s.getAttribute("data-type");return[{markerElement:s,name:a,type:l}]}),i=[],o=[];for(const s of r)s.type==="end"&&(r.some(l=>l.name===s.name&&l.type==="start")||i.push({markerElement:null,name:s.name,type:"start"})),s.type==="start"&&(r.some(l=>l.name===s.name&&l.type==="end")||o.unshift({markerElement:null,name:s.name,type:"end"}));return[...i,...r,...o]}_getUniqueMarkerName(e){const t=e.split(":"),r=Br().substring(1,6);return t.length===3?`${t.slice(0,2).join(":")}:${r}`:`${t.join(":")}:${r}`}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class si extends W{static get pluginName(){return"ClipboardPipeline"}static get requires(){return[Rc]}init(){this.editor.editing.view.addObserver(Nu),this._setupPasteDrop(),this._setupCopyCut()}_fireOutputTransformationEvent(e,t,r){const i=this.editor.plugins.get("ClipboardMarkersUtils");this.editor.model.enqueueChange({isUndoable:r==="cut"},()=>{const o=i._copySelectedFragmentWithMarkers(r,t);this.fire("outputTransformation",{dataTransfer:e,content:o,method:r})})}_setupPasteDrop(){const e=this.editor,t=e.model,r=e.editing.view,i=r.document,o=this.editor.plugins.get("ClipboardMarkersUtils");this.listenTo(i,"clipboardInput",(s,a)=>{a.method=="paste"&&!e.model.canEditAt(e.model.document.selection)&&s.stop()},{priority:"highest"}),this.listenTo(i,"clipboardInput",(s,a)=>{const l=a.dataTransfer;let c;if(a.content)c=a.content;else{let d="";l.getData("text/html")?d=Lve(l.getData("text/html")):l.getData("text/plain")&&(d=Nve(l.getData("text/plain"))),c=this.editor.data.htmlProcessor.toView(d)}const u=new eo(this,"inputTransformation");this.fire(u,{content:c,dataTransfer:l,targetRanges:a.targetRanges,method:a.method}),u.stop.called&&s.stop(),r.scrollToTheSelection()},{priority:"low"}),this.listenTo(this,"inputTransformation",(s,a)=>{if(a.content.isEmpty)return;const c=this.editor.data.toModel(a.content,"$clipboardHolder");c.childCount!=0&&(s.stop(),t.change(()=>{this.fire("contentInsertion",{content:c,method:a.method,dataTransfer:a.dataTransfer,targetRanges:a.targetRanges})}))},{priority:"low"}),this.listenTo(this,"contentInsertion",(s,a)=>{a.resultRange=o._pasteFragmentWithMarkers(a.content)},{priority:"low"})}_setupCopyCut(){const e=this.editor,t=e.model.document,i=e.editing.view.document,o=(s,a)=>{const l=a.dataTransfer;a.preventDefault(),this._fireOutputTransformationEvent(l,t.selection,s.name)};this.listenTo(i,"copy",o,{priority:"low"}),this.listenTo(i,"cut",(s,a)=>{e.model.canEditAt(e.model.document.selection)?o(s,a):a.preventDefault()},{priority:"low"}),this.listenTo(this,"outputTransformation",(s,a)=>{const l=e.data.toView(a.content);i.fire("clipboardOutput",{dataTransfer:a.dataTransfer,content:l,method:a.method})},{priority:"low"}),this.listenTo(i,"clipboardOutput",(s,a)=>{a.content.isEmpty||(a.dataTransfer.setData("text/html",this.editor.data.htmlProcessor.toData(a.content)),a.dataTransfer.setData("text/plain",m5(a.content))),a.method=="cut"&&e.model.deleteContent(t.selection)},{priority:"low"})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class $ve extends pt(){constructor(){super(...arguments),this._stack=[]}add(e,t){const r=this._stack,i=r[0];this._insertDescriptor(e);const o=r[0];i!==o&&!av(i,o)&&this.fire("change:top",{oldDescriptor:i,newDescriptor:o,writer:t})}remove(e,t){const r=this._stack,i=r[0];this._removeDescriptor(e);const o=r[0];i!==o&&!av(i,o)&&this.fire("change:top",{oldDescriptor:i,newDescriptor:o,writer:t})}_insertDescriptor(e){const t=this._stack,r=t.findIndex(o=>o.id===e.id);if(av(e,t[r]))return;r>-1&&t.splice(r,1);let i=0;for(;t[i]&&Vve(t[i],e);)i++;t.splice(i,0,e)}_removeDescriptor(e){const t=this._stack,r=t.findIndex(i=>i.id===e);r>-1&&t.splice(r,1)}}function av(n,e){return n&&e&&n.priority==e.priority&&om(n.classes)==om(e.classes)}function Vve(n,e){return n.priority>e.priority?!0:n.priority<e.priority?!1:om(n.classes)>om(e.classes)}function om(n){return Array.isArray(n)?n.sort().join(","):n}const zve='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M4 0v1H1v3H0V.5A.5.5 0 0 1 .5 0H4zm8 0h3.5a.5.5 0 0 1 .5.5V4h-1V1h-3V0zM4 16H.5a.5.5 0 0 1-.5-.5V12h1v3h3v1zm8 0v-1h3v-3h1v3.5a.5.5 0 0 1-.5.5H12z"/><path fill-opacity=".256" d="M1 1h14v14H1z"/><g class="ck-icon__selected-indicator"><path d="M7 0h2v1H7V0zM0 7h1v2H0V7zm15 0h1v2h-1V7zm-8 8h2v1H7v-1z"/><path fill-opacity=".254" d="M1 1h14v14H1z"/></g></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const jve="ck-widget",AE="ck-widget_selected";function $t(n){return n.is("element")?!!n.getCustomProperty("widget"):!1}function Pl(n,e,t={}){if(!n.is("containerElement"))throw new M("widget-to-widget-wrong-element-type",null,{element:n});return e.setAttribute("contenteditable","false",n),e.addClass(jve,n),e.setCustomProperty("widget",!0,n),n.getFillerOffset=qve,e.setCustomProperty("widgetLabel",[],n),t.label&&Uve(n,t.label),t.hasSelectionHandle&&Kve(n,e),g5(n,e),n}function Wve(n,e,t){if(e.classes&&t.addClass(nt(e.classes),n),e.attributes)for(const r in e.attributes)t.setAttribute(r,e.attributes[r],n)}function Hve(n,e,t){if(e.classes&&t.removeClass(nt(e.classes),n),e.attributes)for(const r in e.attributes)t.removeAttribute(r,n)}function g5(n,e,t=Wve,r=Hve){const i=new $ve;i.on("change:top",(a,l)=>{l.oldDescriptor&&r(n,l.oldDescriptor,l.writer),l.newDescriptor&&t(n,l.newDescriptor,l.writer)});const o=(a,l,c)=>i.add(l,c),s=(a,l,c)=>i.remove(l,c);e.setCustomProperty("addHighlight",o,n),e.setCustomProperty("removeHighlight",s,n)}function Uve(n,e){n.getCustomProperty("widgetLabel").push(e)}function Gve(n){return n.getCustomProperty("widgetLabel").reduce((t,r)=>typeof r=="function"?t?t+". "+r():r():t?t+". "+r:r,"")}function p5(n,e,t={}){return e.addClass(["ck-editor__editable","ck-editor__nested-editable"],n),e.setAttribute("role","textbox",n),e.setAttribute("tabindex","-1",n),t.label&&e.setAttribute("aria-label",t.label,n),e.setAttribute("contenteditable",n.isReadOnly?"false":"true",n),n.on("change:isReadOnly",(r,i,o)=>{e.setAttribute("contenteditable",o?"false":"true",n)}),n.on("change:isFocused",(r,i,o)=>{o?e.addClass("ck-editor__nested-editable_focused",n):e.removeClass("ck-editor__nested-editable_focused",n)}),g5(n,e),n}function Y0(n,e){const t=n.getSelectedElement();if(t){const r=mo(n);if(r)return e.createRange(e.createPositionAt(t,r))}return e.schema.findOptimalInsertionRange(n)}function qve(){return null}function Kve(n,e){const t=e.createUIElement("div",{class:"ck ck-widget__selection-handle"},function(r){const i=this.toDomElement(r),o=new li;return o.set("content",zve),o.render(),i.appendChild(o.element),i});e.insert(e.createPositionAt(n,0),t),e.addClass(["ck-widget_with-selection-handle"],n)}function X0(n){const e=a=>{const{width:l,paddingLeft:c,paddingRight:u}=a.ownerDocument.defaultView.getComputedStyle(a);return parseFloat(l)-(parseFloat(c)||0)-(parseFloat(u)||0)},t=n.parentElement;if(!t)return 0;let r=e(t);const i=5;let o=0,s=t;for(;isNaN(r);){if(s=s.parentElement,++o>i)return 0;r=e(s)}return r}function Yve(n,e=new De(n)){const t=X0(n);return t?e.width/t*100:0}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Li="widget-type-around";function Ko(n,e,t){return!!n&&$t(n)&&!t.isInline(e)}function Xve(n){return n.closest(".ck-widget__type-around__button")}function Zve(n){return n.classList.contains("ck-widget__type-around__button_before")?"before":"after"}function Jve(n,e){const t=n.closest(".ck-widget");return e.mapDomToView(t)}function mo(n){return n.getAttribute(Li)}const Qve='<svg viewBox="0 0 10 8" xmlns="http://www.w3.org/2000/svg"><path d="M9.055.263v3.972h-6.77M1 4.216l2-2.038m-2 2 2 2.038"/></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const v5=["before","after"],ebe=new DOMParser().parseFromString(Qve,"image/svg+xml").firstChild,TE="ck-widget__type-around_disabled";class tbe extends W{constructor(){super(...arguments),this._currentFakeCaretModelElement=null}static get pluginName(){return"WidgetTypeAround"}static get requires(){return[md,Ti]}init(){const e=this.editor,t=e.editing.view;this.on("change:isEnabled",(r,i,o)=>{t.change(s=>{for(const a of t.document.roots)o?s.removeClass(TE,a):s.addClass(TE,a)}),o||e.model.change(s=>{s.removeSelectionAttribute(Li)})}),this._enableTypeAroundUIInjection(),this._enableInsertingParagraphsOnButtonClick(),this._enableInsertingParagraphsOnEnterKeypress(),this._enableInsertingParagraphsOnTypingKeystroke(),this._enableTypeAroundFakeCaretActivationUsingKeyboardArrows(),this._enableDeleteIntegration(),this._enableInsertContentIntegration(),this._enableInsertObjectIntegration(),this._enableDeleteContentIntegration()}destroy(){super.destroy(),this._currentFakeCaretModelElement=null}_insertParagraph(e,t){const r=this.editor,i=r.editing.view,o=r.model.schema.getAttributesWithProperty(e,"copyOnReplace",!0);r.execute("insertParagraph",{position:r.model.createPositionAt(e,t),attributes:o}),i.focus(),i.scrollToTheSelection()}_listenToIfEnabled(e,t,r,i){this.listenTo(e,t,(...o)=>{this.isEnabled&&r(...o)},i)}_insertParagraphAccordingToFakeCaretPosition(){const r=this.editor.model.document.selection,i=mo(r);if(!i)return!1;const o=r.getSelectedElement();return this._insertParagraph(o,i),!0}_enableTypeAroundUIInjection(){const e=this.editor,t=e.model.schema,r=e.locale.t,i={before:r("Insert paragraph before block"),after:r("Insert paragraph after block")};e.editing.downcastDispatcher.on("insert",(o,s,a)=>{const l=a.mapper.toViewElement(s.item);l&&Ko(l,s.item,t)&&(nbe(a.writer,i,l),l.getCustomProperty("widgetLabel").push(()=>this.isEnabled?r("Press Enter to type after or press Shift + Enter to type before the widget"):""))},{priority:"low"})}_enableTypeAroundFakeCaretActivationUsingKeyboardArrows(){const e=this.editor,t=e.model,r=t.document.selection,i=t.schema,o=e.editing.view;this._listenToIfEnabled(o.document,"arrowKey",(a,l)=>{this._handleArrowKeyPress(a,l)},{context:[$t,"$text"],priority:"high"}),this._listenToIfEnabled(r,"change:range",(a,l)=>{l.directChange&&e.model.change(c=>{c.removeSelectionAttribute(Li)})}),this._listenToIfEnabled(t.document,"change:data",()=>{const a=r.getSelectedElement();if(a){const l=e.editing.mapper.toViewElement(a);if(Ko(l,a,i))return}e.model.change(l=>{l.removeSelectionAttribute(Li)})}),this._listenToIfEnabled(e.editing.downcastDispatcher,"selection",(a,l,c)=>{const u=c.writer;if(this._currentFakeCaretModelElement){const m=c.mapper.toViewElement(this._currentFakeCaretModelElement);m&&(u.removeClass(v5.map(s),m),this._currentFakeCaretModelElement=null)}const d=l.selection.getSelectedElement();if(!d)return;const f=c.mapper.toViewElement(d);if(!Ko(f,d,i))return;const h=mo(l.selection);h&&(u.addClass(s(h),f),this._currentFakeCaretModelElement=d)}),this._listenToIfEnabled(e.ui.focusTracker,"change:isFocused",(a,l,c)=>{c||e.model.change(u=>{u.removeSelectionAttribute(Li)})});function s(a){return`ck-widget_type-around_show-fake-caret_${a}`}}_handleArrowKeyPress(e,t){const r=this.editor,i=r.model,o=i.document.selection,s=i.schema,a=r.editing.view,l=t.keyCode,c=$le(l,r.locale.contentLanguageDirection),u=a.document.selection.getSelectedElement(),d=r.editing.mapper.toModelElement(u);let f;Ko(u,d,s)?f=this._handleArrowKeyPressOnSelectedWidget(c):o.isCollapsed?f=this._handleArrowKeyPressWhenSelectionNextToAWidget(c):t.shiftKey||(f=this._handleArrowKeyPressWhenNonCollapsedSelection(c)),f&&(t.preventDefault(),e.stop())}_handleArrowKeyPressOnSelectedWidget(e){const r=this.editor.model,i=r.document.selection,o=mo(i);return r.change(s=>{if(o){if(!(o===(e?"after":"before")))return s.removeSelectionAttribute(Li),!0}else return s.setSelectionAttribute(Li,e?"after":"before"),!0;return!1})}_handleArrowKeyPressWhenSelectionNextToAWidget(e){const t=this.editor,r=t.model,i=r.schema,o=t.plugins.get("Widget"),s=o._getObjectElementNextToSelection(e),a=t.editing.mapper.toViewElement(s);return Ko(a,s,i)?(r.change(l=>{o._setSelectionOverElement(s),l.setSelectionAttribute(Li,e?"before":"after")}),!0):!1}_handleArrowKeyPressWhenNonCollapsedSelection(e){const t=this.editor,r=t.model,i=r.schema,o=t.editing.mapper,s=r.document.selection,a=e?s.getLastPosition().nodeBefore:s.getFirstPosition().nodeAfter,l=o.toViewElement(a);return Ko(l,a,i)?(r.change(c=>{c.setSelection(a,"on"),c.setSelectionAttribute(Li,e?"after":"before")}),!0):!1}_enableInsertingParagraphsOnButtonClick(){const e=this.editor,t=e.editing.view;this._listenToIfEnabled(t.document,"mousedown",(r,i)=>{const o=Xve(i.domTarget);if(!o)return;const s=Zve(o),a=Jve(o,t.domConverter),l=e.editing.mapper.toModelElement(a);this._insertParagraph(l,s),i.preventDefault(),r.stop()})}_enableInsertingParagraphsOnEnterKeypress(){const e=this.editor,t=e.model.document.selection,r=e.editing.view;this._listenToIfEnabled(r.document,"enter",(i,o)=>{if(i.eventPhase!="atTarget")return;const s=t.getSelectedElement(),a=e.editing.mapper.toViewElement(s),l=e.model.schema;let c;this._insertParagraphAccordingToFakeCaretPosition()?c=!0:Ko(a,s,l)&&(this._insertParagraph(s,o.isSoft?"before":"after"),c=!0),c&&(o.preventDefault(),i.stop())},{context:$t})}_enableInsertingParagraphsOnTypingKeystroke(){const t=this.editor.editing.view.document;this._listenToIfEnabled(t,"insertText",(r,i)=>{this._insertParagraphAccordingToFakeCaretPosition()&&(i.selection=t.selection)},{priority:"high"}),Re.isAndroid?this._listenToIfEnabled(t,"keydown",(r,i)=>{i.keyCode==229&&this._insertParagraphAccordingToFakeCaretPosition()}):this._listenToIfEnabled(t,"compositionstart",()=>{this._insertParagraphAccordingToFakeCaretPosition()},{priority:"high"})}_enableDeleteIntegration(){const e=this.editor,t=e.editing.view,r=e.model,i=r.schema;this._listenToIfEnabled(t.document,"delete",(o,s)=>{if(o.eventPhase!="atTarget")return;const a=mo(r.document.selection);if(!a)return;const l=s.direction,c=r.document.selection.getSelectedElement(),u=a==="before",d=l=="forward";if(u===d)e.execute("delete",{selection:r.createSelection(c,"on")});else{const h=i.getNearestSelectionRange(r.createPositionAt(c,a),l);if(h)if(!h.isCollapsed)r.change(m=>{m.setSelection(h),e.execute(d?"deleteForward":"delete")});else{const m=r.createSelection(h.start);if(r.modifySelection(m,{direction:l}),!m.focus.isEqual(h.start))r.change(g=>{g.setSelection(h),e.execute(d?"deleteForward":"delete")});else{const g=obe(i,h.start.parent);r.deleteContent(r.createSelection(g,"on"),{doNotAutoparagraph:!0})}}}s.preventDefault(),o.stop()},{context:$t})}_enableInsertContentIntegration(){const e=this.editor,t=this.editor.model,r=t.document.selection;this._listenToIfEnabled(e.model,"insertContent",(i,[o,s])=>{if(s&&!s.is("documentSelection"))return;const a=mo(r);if(a)return i.stop(),t.change(l=>{const c=r.getSelectedElement(),u=t.createPositionAt(c,a),d=l.createSelection(u),f=t.insertContent(o,d);return l.setSelection(d),f})},{priority:"high"})}_enableInsertObjectIntegration(){const e=this.editor,r=this.editor.model.document.selection;this._listenToIfEnabled(e.model,"insertObject",(i,o)=>{const[,s,a={}]=o;if(s&&!s.is("documentSelection"))return;const l=mo(r);l&&(a.findOptimalPosition=l,o[3]=a)},{priority:"high"})}_enableDeleteContentIntegration(){const e=this.editor,r=this.editor.model.document.selection;this._listenToIfEnabled(e.model,"deleteContent",(i,[o])=>{if(o&&!o.is("documentSelection"))return;mo(r)&&i.stop()},{priority:"high"})}}function nbe(n,e,t){const r=n.createUIElement("div",{class:"ck ck-reset_all ck-widget__type-around"},function(i){const o=this.toDomElement(i);return rbe(o,e),ibe(o),o});n.insert(n.createPositionAt(t,"end"),r)}function rbe(n,e){for(const t of v5){const r=new Jn({tag:"div",attributes:{class:["ck","ck-widget__type-around__button",`ck-widget__type-around__button_${t}`],title:e[t],"aria-hidden":"true"},children:[n.ownerDocument.importNode(ebe,!0)]});n.appendChild(r.render())}}function ibe(n){const e=new Jn({tag:"div",attributes:{class:["ck","ck-widget__type-around__fake-caret"]}});n.appendChild(e.render())}function obe(n,e){let t=e;for(const r of e.getAncestors({parentFirst:!0})){if(r.childCount>1||n.isLimit(r))break;t=r}return t}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function sbe(n){const e=n.model;return(t,r)=>{const i=r.keyCode==qe.arrowup,o=r.keyCode==qe.arrowdown,s=r.shiftKey,a=e.document.selection;if(!i&&!o)return;const l=o;if(s&&cbe(a,l))return;const c=abe(n,a,l);if(c){if(c.isCollapsed){if(a.isCollapsed)return;if(s)return}(c.isCollapsed||lbe(n,c,l))&&(e.change(u=>{const d=l?c.end:c.start;if(s){const f=e.createSelection(a.anchor);f.setFocus(d),u.setSelection(f)}else u.setSelection(d)}),t.stop(),r.preventDefault(),r.stopPropagation())}}}function abe(n,e,t){const r=n.model;if(t){const i=e.isCollapsed?e.focus:e.getLastPosition(),o=EE(r,i,"forward");if(!o)return null;const s=r.createRange(i,o),a=kE(r.schema,s,"backward");return a?r.createRange(i,a):null}else{const i=e.isCollapsed?e.focus:e.getFirstPosition(),o=EE(r,i,"backward");if(!o)return null;const s=r.createRange(o,i),a=kE(r.schema,s,"forward");return a?r.createRange(a,i):null}}function EE(n,e,t){const r=n.schema,i=n.createRangeIn(e.root),o=t=="forward"?"elementStart":"elementEnd";for(const{previousPosition:s,item:a,type:l}of i.getWalker({startPosition:e,direction:t})){if(r.isLimit(a)&&!r.isInline(a))return s;if(l==o&&r.isBlock(a))return null}return null}function kE(n,e,t){const r=t=="backward"?e.end:e.start;if(n.checkChild(r,"$text"))return r;for(const{nextPosition:i}of e.getWalker({direction:t}))if(n.checkChild(i,"$text"))return i;return null}function lbe(n,e,t){const r=n.model,i=n.view.domConverter;if(t){const c=r.createSelection(e.start);r.modifySelection(c),!c.focus.isAtEnd&&!e.start.isEqual(c.focus)&&(e=r.createRange(c.focus,e.end))}const o=n.mapper.toViewRange(e),s=i.viewRangeToDom(o),a=De.getDomRangeRects(s);let l;for(const c of a){if(l===void 0){l=Math.round(c.bottom);continue}if(Math.round(c.top)>=l)return!1;l=Math.max(l,Math.round(c.bottom))}return!0}function cbe(n,e){return!n.isCollapsed&&n.isBackward==e}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ls extends W{constructor(){super(...arguments),this._previouslySelected=new Set}static get pluginName(){return"Widget"}static get requires(){return[tbe,Ti]}init(){const e=this.editor,t=e.editing.view,r=t.document,i=e.t;this.editor.editing.downcastDispatcher.on("selection",(o,s,a)=>{const l=a.writer,c=s.selection;if(c.isCollapsed)return;const u=c.getSelectedElement();if(!u)return;const d=e.editing.mapper.toViewElement(u);$t(d)&&a.consumable.consume(c,"selection")&&l.setSelection(l.createRangeOn(d),{fake:!0,label:Gve(d)})}),this.editor.editing.downcastDispatcher.on("selection",(o,s,a)=>{this._clearPreviouslySelectedWidgets(a.writer);const l=a.writer,c=l.document.selection;let u=null;for(const d of c.getRanges())for(const f of d){const h=f.item;$t(h)&&!dbe(h,u)&&(l.addClass(AE,h),this._previouslySelected.add(h),u=h)}},{priority:"low"}),t.addObserver(Sg),this.listenTo(r,"mousedown",(...o)=>this._onMousedown(...o)),this.listenTo(r,"arrowKey",(...o)=>{this._handleSelectionChangeOnArrowKeyPress(...o)},{context:[$t,"$text"]}),this.listenTo(r,"arrowKey",(...o)=>{this._preventDefaultOnArrowKeyPress(...o)},{context:"$root"}),this.listenTo(r,"arrowKey",sbe(this.editor.editing),{context:"$text"}),this.listenTo(r,"delete",(o,s)=>{this._handleDelete(s.direction=="forward")&&(s.preventDefault(),o.stop())},{context:"$root"}),this.listenTo(r,"tab",(o,s)=>{o.eventPhase=="atTarget"&&(s.shiftKey||this._selectFirstNestedEditable()&&(s.preventDefault(),o.stop()))},{context:$t,priority:"low"}),this.listenTo(r,"tab",(o,s)=>{s.shiftKey&&this._selectAncestorWidget()&&(s.preventDefault(),o.stop())},{priority:"low"}),this.listenTo(r,"keydown",(o,s)=>{s.keystroke==qe.esc&&this._selectAncestorWidget()&&(s.preventDefault(),o.stop())},{priority:"low"}),e.accessibility.addKeystrokeInfoGroup({id:"widget",label:i("Keystrokes that can be used when a widget is selected (for example: image, table, etc.)"),keystrokes:[{label:i("Insert a new paragraph directly after a widget"),keystroke:"Enter"},{label:i("Insert a new paragraph directly before a widget"),keystroke:"Shift+Enter"},{label:i("Move the caret to allow typing directly before a widget"),keystroke:[["arrowup"],["arrowleft"]]},{label:i("Move the caret to allow typing directly after a widget"),keystroke:[["arrowdown"],["arrowright"]]}]})}_onMousedown(e,t){const r=this.editor,i=r.editing.view,o=i.document;let s=t.target;if(t.domEvent.detail>=3){this._selectBlockContent(s)&&t.preventDefault();return}if(ube(s)||!$t(s)&&(s=s.findAncestor($t),!s))return;Re.isAndroid&&t.preventDefault(),o.isFocused||i.focus();const a=r.editing.mapper.toModelElement(s);this._setSelectionOverElement(a)}_selectBlockContent(e){const t=this.editor,r=t.model,i=t.editing.mapper,o=r.schema,s=i.findMappedViewAncestor(this.editor.editing.view.createPositionAt(e,0)),a=fbe(i.toModelElement(s),r.schema);return a?(r.change(l=>{const c=o.isLimit(a)?null:hbe(l.createPositionAfter(a),o),u=l.createPositionAt(a,0),d=c?l.createPositionAt(c,0):l.createPositionAt(a,"end");l.setSelection(l.createRange(u,d))}),!0):!1}_handleSelectionChangeOnArrowKeyPress(e,t){const r=t.keyCode,i=this.editor.model,o=i.schema,s=i.document.selection,a=s.getSelectedElement(),l=S0(r,this.editor.locale.contentLanguageDirection),c=l=="down"||l=="right",u=l=="up"||l=="down";if(a&&o.isObject(a)){const f=c?s.getLastPosition():s.getFirstPosition(),h=o.getNearestSelectionRange(f,c?"forward":"backward");h&&(i.change(m=>{m.setSelection(h)}),t.preventDefault(),e.stop());return}if(!s.isCollapsed&&!t.shiftKey){const f=s.getFirstPosition(),h=s.getLastPosition(),m=f.nodeAfter,g=h.nodeBefore;(m&&o.isObject(m)||g&&o.isObject(g))&&(i.change(p=>{p.setSelection(c?h:f)}),t.preventDefault(),e.stop());return}if(!s.isCollapsed)return;const d=this._getObjectElementNextToSelection(c);if(d&&o.isObject(d)){if(o.isInline(d)&&u)return;this._setSelectionOverElement(d),t.preventDefault(),e.stop()}}_preventDefaultOnArrowKeyPress(e,t){const r=this.editor.model,i=r.schema,o=r.document.selection.getSelectedElement();o&&i.isObject(o)&&(t.preventDefault(),e.stop())}_handleDelete(e){const r=this.editor.model.document.selection;if(!this.editor.model.canEditAt(r)||!r.isCollapsed)return;const i=this._getObjectElementNextToSelection(e);if(i)return this.editor.model.change(o=>{let s=r.anchor.parent;for(;s.isEmpty;){const a=s;s=a.parent,o.remove(a)}this._setSelectionOverElement(i)}),!0}_setSelectionOverElement(e){this.editor.model.change(t=>{t.setSelection(t.createRangeOn(e))})}_getObjectElementNextToSelection(e){const t=this.editor.model,r=t.schema,i=t.document.selection,o=t.createSelection(i);if(t.modifySelection(o,{direction:e?"forward":"backward"}),o.isEqual(i))return null;const s=e?o.focus.nodeBefore:o.focus.nodeAfter;return s&&r.isObject(s)?s:null}_clearPreviouslySelectedWidgets(e){for(const t of this._previouslySelected)e.removeClass(AE,t);this._previouslySelected.clear()}_selectFirstNestedEditable(){const e=this.editor,r=this.editor.editing.view.document;for(const i of r.selection.getFirstRange().getItems())if(i.is("editableElement")){const o=e.editing.mapper.toModelElement(i);/* istanbul ignore next -- @preserve */if(!o)continue;const s=e.model.createPositionAt(o,0),a=e.model.schema.getNearestSelectionRange(s,"forward");return e.model.change(l=>{l.setSelection(a)}),!0}return!1}_selectAncestorWidget(){const e=this.editor,t=e.editing.mapper,i=e.editing.view.document.selection.getFirstPosition().parent,s=(i.is("$text")?i.parent:i).findAncestor($t);if(!s)return!1;const a=t.toModelElement(s);/* istanbul ignore next -- @preserve */return a?(e.model.change(l=>{l.setSelection(a,"on")}),!0):!1}}function ube(n){let e=n;for(;e;){if(e.is("editableElement")&&!e.is("rootElement"))return!0;if($t(e))return!1;e=e.parent}return!1}function dbe(n,e){return e?Array.from(n.getAncestors()).includes(e):!1}function fbe(n,e){for(const t of n.getAncestors({includeSelf:!0,parentFirst:!0})){if(e.checkChild(t,"$text"))return t;if(e.isLimit(t)&&!e.isObject(t))break}return null}function hbe(n,e){const t=new Hi({startPosition:n});for(const{item:r}of t){if(e.isLimit(r)||!r.is("element"))return null;if(e.checkChild(r,"$text"))return r}return null}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class sm extends W{constructor(){super(...arguments),this._toolbarDefinitions=new Map}static get requires(){return[Du]}static get pluginName(){return"WidgetToolbarRepository"}init(){const e=this.editor;if(e.plugins.has("BalloonToolbar")){const t=e.plugins.get("BalloonToolbar");this.listenTo(t,"show",r=>{mbe(e.editing.view.document.selection)&&r.stop()},{priority:"high"})}this._balloon=this.editor.plugins.get("ContextualBalloon"),this.on("change:isEnabled",()=>{this._updateToolbarsVisibility()}),this.listenTo(e.ui,"update",()=>{this._updateToolbarsVisibility()}),this.listenTo(e.ui.focusTracker,"change:isFocused",()=>{this._updateToolbarsVisibility()},{priority:"low"})}destroy(){super.destroy();for(const e of this._toolbarDefinitions.values())e.view.destroy()}register(e,{ariaLabel:t,items:r,getRelatedElement:i,balloonClassName:o="ck-toolbar-container"}){if(!r.length){Ye("widget-toolbar-no-items",{toolbarId:e});return}const s=this.editor,a=s.t,l=new $0(s.locale);if(l.ariaLabel=t||a("Widget toolbar"),this._toolbarDefinitions.has(e))throw new M("widget-toolbar-duplicated",this,{toolbarId:e});const c={view:l,getRelatedElement:i,balloonClassName:o,itemsConfig:r,initialized:!1};s.ui.addToolbar(l,{isContextual:!0,beforeFocus:()=>{const u=i(s.editing.view.document.selection);u&&this._showToolbar(c,u)},afterBlur:()=>{this._hideToolbar(c)}}),this._toolbarDefinitions.set(e,c)}_updateToolbarsVisibility(){let e=0,t=null,r=null;for(const i of this._toolbarDefinitions.values()){const o=i.getRelatedElement(this.editor.editing.view.document.selection);if(!this.isEnabled||!o)this._isToolbarInBalloon(i)&&this._hideToolbar(i);else if(!this.editor.ui.focusTracker.isFocused)this._isToolbarVisible(i)&&this._hideToolbar(i);else{const s=o.getAncestors().length;s>e&&(e=s,t=o,r=i)}}r&&this._showToolbar(r,t)}_hideToolbar(e){this._balloon.remove(e.view),this.stopListening(this._balloon,"change:visibleView")}_showToolbar(e,t){this._isToolbarVisible(e)?PE(this.editor,t):this._isToolbarInBalloon(e)||(e.initialized||(e.initialized=!0,e.view.fillFromConfig(e.itemsConfig,this.editor.ui.componentFactory)),this._balloon.add({view:e.view,position:b5(this.editor,t),balloonClassName:e.balloonClassName}),this.listenTo(this._balloon,"change:visibleView",()=>{for(const r of this._toolbarDefinitions.values())if(this._isToolbarVisible(r)){const i=r.getRelatedElement(this.editor.editing.view.document.selection);PE(this.editor,i)}}))}_isToolbarVisible(e){return this._balloon.visibleView===e.view}_isToolbarInBalloon(e){return this._balloon.hasView(e.view)}}function PE(n,e){const t=n.plugins.get("ContextualBalloon"),r=b5(n,e);t.updatePosition(r)}function b5(n,e){const t=n.editing.view,r=Cn.defaultPositions;return{target:t.domConverter.mapViewToDom(e),positions:[r.northArrowSouth,r.northArrowSouthWest,r.northArrowSouthEast,r.southArrowNorth,r.southArrowNorthWest,r.southArrowNorthEast,r.viewportStickyNorth]}}function mbe(n){const e=n.getSelectedElement();return!!(e&&$t(e))}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class gbe extends ct(){constructor(e){super(),this.set("activeHandlePosition",null),this.set("proposedWidthPercents",null),this.set("proposedWidth",null),this.set("proposedHeight",null),this.set("proposedHandleHostWidth",null),this.set("proposedHandleHostHeight",null),this._options=e,this._referenceCoordinates=null}get originalWidth(){return this._originalWidth}get originalHeight(){return this._originalHeight}get originalWidthPercents(){return this._originalWidthPercents}get aspectRatio(){return this._aspectRatio}begin(e,t,r){const i=new De(t);this.activeHandlePosition=bbe(e),this._referenceCoordinates=pbe(t,ybe(this.activeHandlePosition)),this._originalWidth=i.width,this._originalHeight=i.height,this._aspectRatio=i.width/i.height;const o=r.style.width;o&&o.match(/^\d+(\.\d*)?%$/)?this._originalWidthPercents=parseFloat(o):this._originalWidthPercents=Yve(r,i)}update(e){this.proposedWidth=e.width,this.proposedHeight=e.height,this.proposedWidthPercents=e.widthPercents,this.proposedHandleHostWidth=e.handleHostWidth,this.proposedHandleHostHeight=e.handleHostHeight}}function pbe(n,e){const t=new De(n),r=e.split("-"),i={x:r[1]=="right"?t.right:t.left,y:r[0]=="bottom"?t.bottom:t.top};return i.x+=n.ownerDocument.defaultView.scrollX,i.y+=n.ownerDocument.defaultView.scrollY,i}function vbe(n){return`ck-widget__resizer__handle-${n}`}function bbe(n){const e=["top-left","top-right","bottom-right","bottom-left"];for(const t of e)if(n.classList.contains(vbe(t)))return t}function ybe(n){const e=n.split("-"),t={top:"bottom",bottom:"top",left:"right",right:"left"};return`${t[e[0]]}-${t[e[1]]}`}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class wbe extends be{constructor(){super();const e=this.bindTemplate;this.setTemplate({tag:"div",attributes:{class:["ck","ck-size-view",e.to("_viewPosition",t=>t?`ck-orientation-${t}`:"")],style:{display:e.if("_isVisible","none",t=>!t)}},children:[{text:e.to("_label")}]})}_bindToState(e,t){this.bind("_isVisible").to(t,"proposedWidth",t,"proposedHeight",(r,i)=>r!==null&&i!==null),this.bind("_label").to(t,"proposedHandleHostWidth",t,"proposedHandleHostHeight",t,"proposedWidthPercents",(r,i,o)=>e.unit==="px"?`${r}×${i}`:`${o}%`),this.bind("_viewPosition").to(t,"activeHandlePosition",t,"proposedHandleHostWidth",t,"proposedHandleHostHeight",(r,i,o)=>i<50||o<50?"above-center":r)}_dismiss(){this.unbind(),this._isVisible=!1}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class IE extends ct(){constructor(e){super(),this._viewResizerWrapper=null,this._options=e,this.set("isEnabled",!0),this.set("isSelected",!1),this.bind("isVisible").to(this,"isEnabled",this,"isSelected",(t,r)=>t&&r),this.decorate("begin"),this.decorate("cancel"),this.decorate("commit"),this.decorate("updateSize"),this.on("commit",t=>{!this.state.proposedWidth&&!this.state.proposedWidthPercents&&(this._cleanup(),t.stop())},{priority:"high"})}get state(){return this._state}show(){this._options.editor.editing.view.change(t=>{t.removeClass("ck-hidden",this._viewResizerWrapper)})}hide(){this._options.editor.editing.view.change(t=>{t.addClass("ck-hidden",this._viewResizerWrapper)})}attach(){const e=this,t=this._options.viewElement;this._options.editor.editing.view.change(i=>{const o=i.createUIElement("div",{class:"ck ck-reset_all ck-widget__resizer"},function(s){const a=this.toDomElement(s);return e._appendHandles(a),e._appendSizeUI(a),a});i.insert(i.createPositionAt(t,"end"),o),i.addClass("ck-widget_with-resizer",t),this._viewResizerWrapper=o,this.isVisible||this.hide()}),this.on("change:isVisible",()=>{this.isVisible?(this.show(),this.redraw()):this.hide()})}begin(e){this._state=new gbe(this._options),this._sizeView._bindToState(this._options,this.state),this._initialViewWidth=this._options.viewElement.getStyle("width"),this.state.begin(e,this._getHandleHost(),this._getResizeHost())}updateSize(e){const t=this._proposeNewSize(e);this._options.editor.editing.view.change(c=>{const u=this._options.unit||"%",d=(u==="%"?t.widthPercents:t.width)+u;c.setStyle("width",d,this._options.viewElement)});const i=this._getHandleHost(),o=new De(i),s=Math.round(o.width),a=Math.round(o.height),l=new De(i);t.width=Math.round(l.width),t.height=Math.round(l.height),this.redraw(o),this.state.update({...t,handleHostWidth:s,handleHostHeight:a})}commit(){const e=this._options.unit||"%",t=(e==="%"?this.state.proposedWidthPercents:this.state.proposedWidth)+e;this._options.editor.editing.view.change(()=>{this._cleanup(),this._options.onCommit(t)})}cancel(){this._cleanup()}destroy(){this.cancel()}redraw(e){const t=this._domResizerWrapper;if(!Sbe(t))return;const r=t.parentElement,i=this._getHandleHost(),o=this._viewResizerWrapper,s=[o.getStyle("width"),o.getStyle("height"),o.getStyle("left"),o.getStyle("top")];let a;if(r.isSameNode(i)){const l=e||new De(i);a=[l.width+"px",l.height+"px",void 0,void 0]}else a=[i.offsetWidth+"px",i.offsetHeight+"px",i.offsetLeft+"px",i.offsetTop+"px"];Tn(s,a)!=="same"&&this._options.editor.editing.view.change(l=>{l.setStyle({width:a[0],height:a[1],left:a[2],top:a[3]},o)})}containsHandle(e){return this._domResizerWrapper.contains(e)}static isResizeHandle(e){return e.classList.contains("ck-widget__resizer__handle")}_cleanup(){this._sizeView._dismiss(),this._options.editor.editing.view.change(t=>{t.setStyle("width",this._initialViewWidth,this._options.viewElement)})}_proposeNewSize(e){const t=this.state,r=Cbe(e),i=this._options.isCentered?this._options.isCentered(this):!0,o={x:t._referenceCoordinates.x-(r.x+t.originalWidth),y:r.y-t.originalHeight-t._referenceCoordinates.y};i&&t.activeHandlePosition.endsWith("-right")&&(o.x=r.x-(t._referenceCoordinates.x+t.originalWidth)),i&&(o.x*=2);let s=Math.abs(t.originalWidth+o.x),a=Math.abs(t.originalHeight+o.y);return(s/t.aspectRatio>a?"width":"height")=="width"?a=s/t.aspectRatio:s=a*t.aspectRatio,{width:Math.round(s),height:Math.round(a),widthPercents:Math.min(Math.round(t.originalWidthPercents/t.originalWidth*s*100)/100,100)}}_getResizeHost(){const e=this._domResizerWrapper.parentElement;return this._options.getResizeHost(e)}_getHandleHost(){const e=this._domResizerWrapper.parentElement;return this._options.getHandleHost(e)}get _domResizerWrapper(){return this._options.editor.editing.view.domConverter.mapViewToDom(this._viewResizerWrapper)}_appendHandles(e){const t=["top-left","top-right","bottom-right","bottom-left"];for(const r of t)e.appendChild(new Jn({tag:"div",attributes:{class:`ck-widget__resizer__handle ${_be(r)}`}}).render())}_appendSizeUI(e){this._sizeView=new wbe,this._sizeView.render(),e.appendChild(this._sizeView.element)}}function _be(n){return`ck-widget__resizer__handle-${n}`}function Cbe(n){return{x:n.pageX,y:n.pageY}}function Sbe(n){return n&&n.ownerDocument&&n.ownerDocument.contains(n)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class lv extends W{constructor(){super(...arguments),this._resizers=new Map}static get pluginName(){return"WidgetResize"}init(){const e=this.editor.editing,t=he.window.document;this.set("selectedResizer",null),this.set("_activeResizer",null),e.view.addObserver(Sg),this._observer=new(nr()),this.listenTo(e.view.document,"mousedown",this._mouseDownListener.bind(this),{priority:"high"}),this._observer.listenTo(t,"mousemove",this._mouseMoveListener.bind(this)),this._observer.listenTo(t,"mouseup",this._mouseUpListener.bind(this)),this._redrawSelectedResizerThrottled=Ea(()=>this.redrawSelectedResizer(),200),this.editor.ui.on("update",this._redrawSelectedResizerThrottled),this.editor.model.document.on("change",()=>{for(const[i,o]of this._resizers)i.isAttached()||(this._resizers.delete(i),o.destroy())},{priority:"lowest"}),this._observer.listenTo(he.window,"resize",this._redrawSelectedResizerThrottled);const r=this.editor.editing.view.document.selection;r.on("change",()=>{const i=r.getSelectedElement(),o=this.getResizerByViewElement(i)||null;o?this.select(o):this.deselect()})}redrawSelectedResizer(){this.selectedResizer&&this.selectedResizer.isVisible&&this.selectedResizer.redraw()}destroy(){super.destroy(),this._observer.stopListening();for(const e of this._resizers.values())e.destroy();this._redrawSelectedResizerThrottled.cancel()}select(e){this.deselect(),this.selectedResizer=e,this.selectedResizer.isSelected=!0}deselect(){this.selectedResizer&&(this.selectedResizer.isSelected=!1),this.selectedResizer=null}attachTo(e){const t=new IE(e),r=this.editor.plugins;if(t.attach(),r.has("WidgetToolbarRepository")){const s=r.get("WidgetToolbarRepository");t.on("begin",()=>{s.forceDisabled("resize")},{priority:"lowest"}),t.on("cancel",()=>{s.clearForceDisabled("resize")},{priority:"highest"}),t.on("commit",()=>{s.clearForceDisabled("resize")},{priority:"highest"})}this._resizers.set(e.viewElement,t);const o=this.editor.editing.view.document.selection.getSelectedElement();return this.getResizerByViewElement(o)==t&&this.select(t),t}getResizerByViewElement(e){return this._resizers.get(e)}_getResizerByHandle(e){for(const t of this._resizers.values())if(t.containsHandle(e))return t}_mouseDownListener(e,t){const r=t.domTarget;IE.isResizeHandle(r)&&(this._activeResizer=this._getResizerByHandle(r)||null,this._activeResizer&&(this._activeResizer.begin(r),e.stop(),t.preventDefault()))}_mouseMoveListener(e,t){this._activeResizer&&this._activeResizer.updateSize(t)}_mouseUpListener(){this._activeResizer&&(this._activeResizer.commit(),this._activeResizer=null)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 *//* istanbul ignore file -- @preserve */const cv=Al("px");class xbe extends be{constructor(){super();const e=this.bindTemplate;this.set({isVisible:!1,left:null,top:null,width:null}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-clipboard-drop-target-line",e.if("isVisible","ck-hidden",t=>!t)],style:{left:e.to("left",t=>cv(t)),top:e.to("top",t=>cv(t)),width:e.to("width",t=>cv(t))}}})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class bf extends W{constructor(){super(...arguments),this.removeDropMarkerDelayed=x0(()=>this.removeDropMarker(),40),this._updateDropMarkerThrottled=Ea(e=>this._updateDropMarker(e),40),this._reconvertMarkerThrottled=Ea(()=>{this.editor.model.markers.has("drop-target")&&this.editor.editing.reconvertMarker("drop-target")},0),this._dropTargetLineView=new xbe,this._domEmitter=new(nr()),this._scrollables=new Map}static get pluginName(){return"DragDropTarget"}init(){this._setupDropMarker()}destroy(){this._domEmitter.stopListening();for(const{resizeObserver:e}of this._scrollables.values())e.destroy();return this._updateDropMarkerThrottled.cancel(),this.removeDropMarkerDelayed.cancel(),this._reconvertMarkerThrottled.cancel(),super.destroy()}updateDropMarker(e,t,r,i,o,s){this.removeDropMarkerDelayed.cancel();const a=OE(this.editor,e,t,r,i,o,s);/* istanbul ignore next -- @preserve */if(a){if(s&&s.containsRange(a))return this.removeDropMarker();this._updateDropMarkerThrottled(a)}}getFinalDropRange(e,t,r,i,o,s){const a=OE(this.editor,e,t,r,i,o,s);return this.removeDropMarker(),a}removeDropMarker(){const e=this.editor.model;this.removeDropMarkerDelayed.cancel(),this._updateDropMarkerThrottled.cancel(),this._dropTargetLineView.isVisible=!1,e.markers.has("drop-target")&&e.change(t=>{t.removeMarker("drop-target")})}_setupDropMarker(){const e=this.editor;e.ui.view.body.add(this._dropTargetLineView),e.conversion.for("editingDowncast").markerToHighlight({model:"drop-target",view:{classes:["ck-clipboard-drop-target-range"]}}),e.conversion.for("editingDowncast").markerToElement({model:"drop-target",view:(t,{writer:r})=>{if(e.model.schema.checkChild(t.markerRange.start,"$text"))return this._dropTargetLineView.isVisible=!1,this._createDropTargetPosition(r);t.markerRange.isCollapsed?this._updateDropTargetLine(t.markerRange):this._dropTargetLineView.isVisible=!1}})}_updateDropMarker(e){const t=this.editor,r=t.model.markers;t.model.change(i=>{r.has("drop-target")?r.get("drop-target").getRange().isEqual(e)||i.updateMarker("drop-target",{range:e}):i.addMarker("drop-target",{range:e,usingOperation:!1,affectsData:!1})})}_createDropTargetPosition(e){return e.createUIElement("span",{class:"ck ck-clipboard-drop-target-position"},function(t){const r=this.toDomElement(t);return r.append("⁠",t.createElement("span"),"⁠"),r})}_updateDropTargetLine(e){const t=this.editor.editing,r=e.start.nodeBefore,i=e.start.nodeAfter,o=e.start.parent,s=r?t.mapper.toViewElement(r):null,a=s?t.view.domConverter.mapViewToDom(s):null,l=i?t.mapper.toViewElement(i):null,c=l?t.view.domConverter.mapViewToDom(l):null,u=t.mapper.toViewElement(o);if(!u)return;const d=t.view.domConverter.mapViewToDom(u),f=this._getScrollableRect(u),{scrollX:h,scrollY:m}=he.window,g=a?new De(a):null,p=c?new De(c):null,b=new De(d).excludeScrollbarsAndBorders(),y=g?g.bottom:b.top,C=p?p.top:b.bottom,A=he.window.getComputedStyle(d),w=y<=C?(y+C)/2:C;if(f.top<w&&w<f.bottom){const S=b.left+parseFloat(A.paddingLeft),_=b.right-parseFloat(A.paddingRight),v=Math.max(S+h,f.left),x=Math.min(_+h,f.right);this._dropTargetLineView.set({isVisible:!0,left:v,top:w+m,width:x-v})}else this._dropTargetLineView.isVisible=!1}_getScrollableRect(e){const t=e.root.rootName;let r;if(this._scrollables.has(t))r=this._scrollables.get(t).domElement;else{const i=this.editor.editing.view.domConverter.mapViewToDom(e);r=Tbe(i),this._domEmitter.listenTo(r,"scroll",this._reconvertMarkerThrottled,{usePassive:!0});const o=new nd(r,this._reconvertMarkerThrottled);this._scrollables.set(t,{domElement:r,resizeObserver:o})}return new De(r).excludeScrollbarsAndBorders()}}function OE(n,e,t,r,i,o,s){const a=n.model,l=n.editing.mapper;let u=RE(n,e);for(;u;){if(!o){if(a.schema.checkChild(u,"$text")){if(t){const d=t[0].start,f=l.toModelPosition(d);if(!s||Array.from(s.getItems()).every(m=>a.schema.checkChild(f,m))){if(a.schema.checkChild(f,"$text"))return a.createRange(f);if(d)return yf(n,RE(n,d.parent),r,i)}}}else if(a.schema.isInline(u))return yf(n,u,r,i)}if(a.schema.isBlock(u))return yf(n,u,r,i);if(a.schema.checkChild(u,"$block")){const d=Array.from(u.getChildren()).filter(m=>m.is("element")&&!Abe(n,m));let f=0,h=d.length;if(h==0)return a.createRange(a.createPositionAt(u,"end"));for(;f<h-1;){const m=Math.floor((f+h)/2);y5(n,d[m],r,i)=="before"?h=m:f=m}return yf(n,d[f],r,i)}u=u.parent}return null}function Abe(n,e){const t=n.editing.mapper,r=n.editing.view.domConverter,i=t.toViewElement(e);if(!i)return!0;const o=r.mapViewToDom(i);return he.window.getComputedStyle(o).float!="none"}function yf(n,e,t,r){const i=n.model;return i.createRange(i.createPositionAt(e,y5(n,e,t,r)))}function y5(n,e,t,r){const i=n.editing.mapper,o=n.editing.view.domConverter,s=i.toViewElement(e),a=o.mapViewToDom(s),l=new De(a);return n.model.schema.isInline(e)?t<(l.left+l.right)/2?"before":"after":r<(l.top+l.bottom)/2?"before":"after"}function RE(n,e){const t=n.editing.mapper,r=n.editing.view,i=t.toModelElement(e);if(i)return i;const o=r.createPositionBefore(e),s=t.findMappedViewAncestor(o);return t.toModelElement(s)}function Tbe(n){let e=n;do{e=e.parentElement;const t=he.window.getComputedStyle(e).overflowY;if(t=="auto"||t=="scroll")break}while(e.tagName!="BODY");return e}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ebe extends W{constructor(){super(...arguments),this._isBlockDragging=!1,this._domEmitter=new(nr())}static get pluginName(){return"DragDropBlockToolbar"}init(){const e=this.editor;if(this.listenTo(e,"change:isReadOnly",(t,r,i)=>{i?(this.forceDisabled("readOnlyMode"),this._isBlockDragging=!1):this.clearForceDisabled("readOnlyMode")}),Re.isAndroid&&this.forceDisabled("noAndroidSupport"),e.plugins.has("BlockToolbar")){const r=e.plugins.get("BlockToolbar").buttonView.element;this._domEmitter.listenTo(r,"dragstart",(i,o)=>this._handleBlockDragStart(o)),this._domEmitter.listenTo(he.document,"dragover",(i,o)=>this._handleBlockDragging(o)),this._domEmitter.listenTo(he.document,"drop",(i,o)=>this._handleBlockDragging(o)),this._domEmitter.listenTo(he.document,"dragend",()=>this._handleBlockDragEnd(),{useCapture:!0}),this.isEnabled&&r.setAttribute("draggable","true"),this.on("change:isEnabled",(i,o,s)=>{r.setAttribute("draggable",s?"true":"false")})}}destroy(){return this._domEmitter.stopListening(),super.destroy()}_handleBlockDragStart(e){if(!this.isEnabled)return;const t=this.editor.model,r=t.document.selection,i=this.editor.editing.view,o=Array.from(r.getSelectedBlocks()),s=t.createRange(t.createPositionBefore(o[0]),t.createPositionAfter(o[o.length-1]));t.change(a=>a.setSelection(s)),this._isBlockDragging=!0,i.focus(),i.getObserver(Nu).onDomEvent(e)}_handleBlockDragging(e){if(!this.isEnabled||!this._isBlockDragging)return;const t=e.clientX+(this.editor.locale.contentLanguageDirection=="ltr"?100:-100),r=e.clientY,i=document.elementFromPoint(t,r),o=this.editor.editing.view;!i||!i.closest(".ck-editor__editable")||o.getObserver(Nu).onDomEvent({...e,type:e.type,dataTransfer:e.dataTransfer,target:i,clientX:t,clientY:r,preventDefault:()=>e.preventDefault(),stopPropagation:()=>e.stopPropagation()})}_handleBlockDragEnd(){this._isBlockDragging=!1}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class kbe extends W{constructor(){super(...arguments),this._clearDraggableAttributesDelayed=x0(()=>this._clearDraggableAttributes(),40),this._blockMode=!1,this._domEmitter=new(nr())}static get pluginName(){return"DragDrop"}static get requires(){return[si,Ls,bf,Ebe]}init(){const e=this.editor,t=e.editing.view;this._draggedRange=null,this._draggingUid="",this._draggableElement=null,t.addObserver(Nu),t.addObserver(Sg),this._setupDragging(),this._setupContentInsertionIntegration(),this._setupClipboardInputIntegration(),this._setupDraggableAttributeHandling(),this.listenTo(e,"change:isReadOnly",(r,i,o)=>{o?this.forceDisabled("readOnlyMode"):this.clearForceDisabled("readOnlyMode")}),this.on("change:isEnabled",(r,i,o)=>{o||this._finalizeDragging(!1)}),Re.isAndroid&&this.forceDisabled("noAndroidSupport")}destroy(){return this._draggedRange&&(this._draggedRange.detach(),this._draggedRange=null),this._previewContainer&&this._previewContainer.remove(),this._domEmitter.stopListening(),this._clearDraggableAttributesDelayed.cancel(),super.destroy()}_setupDragging(){const e=this.editor,t=e.model,r=e.editing.view,i=r.document,o=e.plugins.get(bf);this.listenTo(i,"dragstart",(s,a)=>{if(a.target&&a.target.is("editableElement")){a.preventDefault();return}if(this._prepareDraggedRange(a.target),!this._draggedRange){a.preventDefault();return}this._draggingUid=Br(),a.dataTransfer.effectAllowed=this.isEnabled?"copyMove":"copy",a.dataTransfer.setData("application/ckeditor5-dragging-uid",this._draggingUid);const l=t.createSelection(this._draggedRange.toRange());this.editor.plugins.get("ClipboardPipeline")._fireOutputTransformationEvent(a.dataTransfer,l,"dragstart");const{dataTransfer:u,domTarget:d,domEvent:f}=a,{clientX:h}=f;this._updatePreview({dataTransfer:u,domTarget:d,clientX:h}),a.stopPropagation(),this.isEnabled||(this._draggedRange.detach(),this._draggedRange=null,this._draggingUid="")},{priority:"low"}),this.listenTo(i,"dragend",(s,a)=>{this._finalizeDragging(!a.dataTransfer.isCanceled&&a.dataTransfer.dropEffect=="move")},{priority:"low"}),this._domEmitter.listenTo(he.document,"dragend",()=>{this._blockMode=!1},{useCapture:!0}),this.listenTo(i,"dragenter",()=>{this.isEnabled&&r.focus()}),this.listenTo(i,"dragleave",()=>{o.removeDropMarkerDelayed()}),this.listenTo(i,"dragging",(s,a)=>{if(!this.isEnabled){a.dataTransfer.dropEffect="none";return}const{clientX:l,clientY:c}=a.domEvent;o.updateDropMarker(a.target,a.targetRanges,l,c,this._blockMode,this._draggedRange),this._draggedRange||(a.dataTransfer.dropEffect="copy"),Re.isGecko||(a.dataTransfer.effectAllowed=="copy"?a.dataTransfer.dropEffect="copy":["all","copyMove"].includes(a.dataTransfer.effectAllowed)&&(a.dataTransfer.dropEffect="move")),s.stop()},{priority:"low"})}_setupClipboardInputIntegration(){const e=this.editor,r=e.editing.view.document,i=e.plugins.get(bf);this.listenTo(r,"clipboardInput",(o,s)=>{if(s.method!="drop")return;const{clientX:a,clientY:l}=s.domEvent,c=i.getFinalDropRange(s.target,s.targetRanges,a,l,this._blockMode,this._draggedRange);if(!c){this._finalizeDragging(!1),o.stop();return}if(this._draggedRange&&this._draggingUid!=s.dataTransfer.getData("application/ckeditor5-dragging-uid")&&(this._draggedRange.detach(),this._draggedRange=null,this._draggingUid=""),ME(s.dataTransfer)=="move"&&this._draggedRange&&this._draggedRange.containsRange(c,!0)){this._finalizeDragging(!1),o.stop();return}s.targetRanges=[e.editing.mapper.toViewRange(c)]},{priority:"high"})}_setupContentInsertionIntegration(){const e=this.editor.plugins.get(si);e.on("contentInsertion",(t,r)=>{if(!this.isEnabled||r.method!=="drop")return;const i=r.targetRanges.map(o=>this.editor.editing.mapper.toModelRange(o));this.editor.model.change(o=>o.setSelection(i))},{priority:"high"}),e.on("contentInsertion",(t,r)=>{if(!this.isEnabled||r.method!=="drop")return;const i=ME(r.dataTransfer)=="move",o=!r.resultRange||!r.resultRange.isCollapsed;this._finalizeDragging(o&&i)},{priority:"lowest"})}_setupDraggableAttributeHandling(){const e=this.editor,t=e.editing.view,r=t.document;this.listenTo(r,"mousedown",(i,o)=>{if(Re.isAndroid||!o)return;this._clearDraggableAttributesDelayed.cancel();let s=DE(o.target);if(Re.isBlink&&!e.isReadOnly&&!s&&!r.selection.isCollapsed){const a=r.selection.getSelectedElement();(!a||!$t(a))&&(s=r.selection.editableElement)}s&&(t.change(a=>{a.setAttribute("draggable","true",s)}),this._draggableElement=e.editing.mapper.toModelElement(s))}),this.listenTo(r,"mouseup",()=>{Re.isAndroid||this._clearDraggableAttributesDelayed()})}_clearDraggableAttributes(){const e=this.editor.editing;e.view.change(t=>{this._draggableElement&&this._draggableElement.root.rootName!="$graveyard"&&t.removeAttribute("draggable",e.mapper.toViewElement(this._draggableElement)),this._draggableElement=null})}_finalizeDragging(e){const t=this.editor,r=t.model;t.plugins.get(bf).removeDropMarker(),this._clearDraggableAttributes(),t.plugins.has("WidgetToolbarRepository")&&t.plugins.get("WidgetToolbarRepository").clearForceDisabled("dragDrop"),this._draggingUid="",this._previewContainer&&(this._previewContainer.remove(),this._previewContainer=void 0),this._draggedRange&&(e&&this.isEnabled&&r.change(o=>{const s=r.createSelection(this._draggedRange);r.deleteContent(s,{doNotAutoparagraph:!0});const a=s.getFirstPosition().parent;a.isEmpty&&!r.schema.checkChild(a,"$text")&&r.schema.checkChild(a,"paragraph")&&o.insertElement("paragraph",a,0)}),this._draggedRange.detach(),this._draggedRange=null)}_prepareDraggedRange(e){const t=this.editor,r=t.model,i=r.document.selection,o=e?DE(e):null;if(o){const c=t.editing.mapper.toModelElement(o);this._draggedRange=Zn.fromRange(r.createRangeOn(c)),this._blockMode=r.schema.isBlock(c),t.plugins.has("WidgetToolbarRepository")&&t.plugins.get("WidgetToolbarRepository").forceDisabled("dragDrop");return}if(i.isCollapsed&&!i.getFirstPosition().parent.isEmpty)return;const s=Array.from(i.getSelectedBlocks()),a=i.getFirstRange();if(s.length==0){this._draggedRange=Zn.fromRange(a);return}const l=w5(r,s);if(s.length>1)this._draggedRange=Zn.fromRange(l),this._blockMode=!0;else if(s.length==1){const c=a.start.isTouching(l.start)&&a.end.isTouching(l.end);this._draggedRange=Zn.fromRange(c?l:a),this._blockMode=c}r.change(c=>c.setSelection(this._draggedRange.toRange()))}_updatePreview({dataTransfer:e,domTarget:t,clientX:r}){const i=this.editor.editing.view,o=i.document.selection.editableElement,s=i.domConverter.mapViewToDom(o),a=he.window.getComputedStyle(s);this._previewContainer?this._previewContainer.firstElementChild&&this._previewContainer.removeChild(this._previewContainer.firstElementChild):(this._previewContainer=Gr(he.document,"div",{style:"position: fixed; left: -999999px;"}),he.document.body.appendChild(this._previewContainer));const l=new De(s);if(s.contains(t))return;const c=parseFloat(a.paddingLeft),u=Gr(he.document,"div");u.className="ck ck-content",u.style.width=a.width,u.style.paddingLeft=`${l.left-r+c}px`,Re.isiOS&&(u.style.backgroundColor="white"),u.innerHTML=e.getData("text/html"),e.setDragImage(u,0,0),this._previewContainer.appendChild(u)}}function ME(n){return Re.isGecko?n.dropEffect:["all","copyMove"].includes(n.effectAllowed)?"move":"copy"}function DE(n){if(n.is("editableElement"))return null;if(n.hasClass("ck-widget__selection-handle"))return n.findAncestor($t);if($t(n))return n;const e=n.findAncestor(t=>$t(t)||t.is("editableElement"));return $t(e)?e:null}function w5(n,e){const t=e[0],r=e[e.length-1],i=t.getCommonAncestor(r),o=n.createPositionBefore(t),s=n.createPositionAfter(r);if(i&&i.is("element")&&!n.schema.isLimit(i)){const a=n.createRangeOn(i),l=o.isTouching(a.start),c=s.isTouching(a.end);if(l&&c)return w5(n,[i])}return n.createRange(o,s)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Pbe extends W{static get pluginName(){return"PastePlainText"}static get requires(){return[si]}init(){const e=this.editor,t=e.model,r=e.editing.view,i=r.document,o=t.document.selection;let s=!1;r.addObserver(Nu),this.listenTo(i,"keydown",(a,l)=>{s=l.shiftKey}),e.plugins.get(si).on("contentInsertion",(a,l)=>{!s&&!Ibe(l.content,t.schema)||t.change(c=>{const u=Array.from(o.getAttributes()).filter(([f])=>t.schema.getAttributeProperties(f).isFormatting);o.isCollapsed||t.deleteContent(o,{doNotAutoparagraph:!0}),u.push(...o.getAttributes());const d=c.createRangeIn(l.content);for(const f of d.getItems())f.is("$textProxy")&&c.setAttributes(u,f)})})}}function Ibe(n,e){if(n.childCount>1)return!1;const t=n.getChild(0);return e.isObject(t)?!1:Array.from(t.getAttributeKeys()).length==0}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Z0 extends W{static get pluginName(){return"Clipboard"}static get requires(){return[Rc,si,kbe,Pbe]}init(){const e=this.editor,t=this.editor.t;e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Copy selected content"),keystroke:"CTRL+C"},{label:t("Paste content"),keystroke:"CTRL+V"},{label:t("Paste content as plain text"),keystroke:"CTRL+SHIFT+V"}]})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Obe extends Me{constructor(e){super(e),this.affectsData=!1}execute(){const e=this.editor.model,t=e.document.selection;let r=e.schema.getLimitElement(t);if(t.containsEntireContent(r)||!BE(e.schema,r))do if(r=r.parent,!r)return;while(!BE(e.schema,r));e.change(i=>{i.setSelection(r,"in")})}}function BE(n,e){return n.isLimit(e)&&(n.checkChild(e,"$text")||n.checkChild(e,"paragraph"))}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Rbe=rd("Ctrl+A");class Mbe extends W{static get pluginName(){return"SelectAllEditing"}init(){const e=this.editor,t=e.t,i=e.editing.view.document;e.commands.add("selectAll",new Obe(e)),this.listenTo(i,"keydown",(o,s)=>{Za(s)===Rbe&&(e.execute("selectAll"),s.preventDefault())}),e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Select all"),keystroke:"CTRL+A"}]})}}const Dbe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M.75 15.5a.75.75 0 0 1 .75.75V18l.008.09A.5.5 0 0 0 2 18.5h1.75a.75.75 0 1 1 0 1.5H1.5l-.144-.007a1.5 1.5 0 0 1-1.35-1.349L0 18.5v-2.25a.75.75 0 0 1 .75-.75zm18.5 0a.75.75 0 0 1 .75.75v2.25l-.007.144a1.5 1.5 0 0 1-1.349 1.35L18.5 20h-2.25a.75.75 0 1 1 0-1.5H18a.5.5 0 0 0 .492-.41L18.5 18v-1.75a.75.75 0 0 1 .75-.75zm-10.45 3c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm.45-5.5a.75.75 0 1 1 0 1.5h-8.5a.75.75 0 1 1 0-1.5h8.5zM1.3 11c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5h10.5zM1.3 7c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5h-2.5a.75.75 0 1 1 0-1.5h2.5zm-5 0a.75.75 0 1 1 0 1.5h-5.5a.75.75 0 0 1 0-1.5h5.5zm-6.5-5a.75.75 0 0 1 0 1.5H2a.5.5 0 0 0-.492.41L1.5 2v1.75a.75.75 0 0 1-1.5 0V1.5l.007-.144A1.5 1.5 0 0 1 1.356.006L1.5 0h2.25zM18.5 0l.144.007a1.5 1.5 0 0 1 1.35 1.349L20 1.5v2.25a.75.75 0 1 1-1.5 0V2l-.008-.09A.5.5 0 0 0 18 1.5h-1.75a.75.75 0 1 1 0-1.5h2.25zM8.8 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6z"/></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Bbe extends W{static get pluginName(){return"SelectAllUI"}init(){const e=this.editor;e.ui.componentFactory.add("selectAll",()=>{const t=this._createButton(Ne);return t.set({tooltip:!0}),t}),e.ui.componentFactory.add("menuBar:selectAll",()=>this._createButton(un))}_createButton(e){const t=this.editor,r=t.locale,i=t.commands.get("selectAll"),o=new e(t.locale),s=r.t;return o.set({label:s("Select all"),icon:Dbe,keystroke:"Ctrl+A"}),o.bind("isEnabled").to(i,"isEnabled"),this.listenTo(o,"execute",()=>{t.execute("selectAll"),t.editing.view.focus()}),o}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Nbe extends W{static get requires(){return[Mbe,Bbe]}static get pluginName(){return"SelectAll"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class _5 extends Me{constructor(e){super(e),this._stack=[],this._createdBatches=new WeakSet,this.refresh(),this._isEnabledBasedOnSelection=!1,this.listenTo(e.data,"set",(t,r)=>{r[1]={...r[1]};const i=r[1];i.batchType||(i.batchType={isUndoable:!1})},{priority:"high"}),this.listenTo(e.data,"set",(t,r)=>{r[1].batchType.isUndoable||this.clearStack()})}refresh(){this.isEnabled=this._stack.length>0}get createdBatches(){return this._createdBatches}addBatch(e){const t=this.editor.model.document.selection,r={ranges:t.hasOwnRange?Array.from(t.getRanges()):[],isBackward:t.isBackward};this._stack.push({batch:e,selection:r}),this.refresh()}clearStack(){this._stack=[],this.refresh()}_restoreSelection(e,t,r){const i=this.editor.model,o=i.document,s=[],a=e.map(c=>c.getTransformedByOperations(r)),l=a.flat();for(const c of a){const u=c.filter(d=>d.root!=o.graveyard).filter(d=>!Fbe(d,l));u.length&&(Lbe(u),s.push(u[0]))}s.length&&i.change(c=>{c.setSelection(s,{backward:t})})}_undo(e,t){const r=this.editor.model,i=r.document;this._createdBatches.add(t);const o=e.operations.slice().filter(s=>s.isDocumentOperation);o.reverse();for(const s of o){const a=s.baseVersion+1,l=Array.from(i.history.getOperations(a)),u=rfe([s.getReversed()],l,{useRelations:!0,document:this.editor.model.document,forceWeakRemove:!0}).operationsA;for(let d of u){const f=d.affectedSelectable;f&&!r.canEditAt(f)&&(d=new tn(d.baseVersion)),t.addOperation(d),r.applyOperation(d),i.history.setOperationAsUndone(s,d)}}}}function Lbe(n){n.sort((e,t)=>e.start.isBefore(t.start)?-1:1);for(let e=1;e<n.length;e++){const r=n[e-1].getJoined(n[e],!0);r&&(e--,n.splice(e,2,r))}}function Fbe(n,e){return e.some(t=>t!==n&&t.containsRange(n,!0))}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class $be extends _5{execute(e=null){const t=e?this._stack.findIndex(o=>o.batch==e):this._stack.length-1,r=this._stack.splice(t,1)[0],i=this.editor.model.createBatch({isUndo:!0});this.editor.model.enqueueChange(i,()=>{this._undo(r.batch,i);const o=this.editor.model.document.history.getOperations(r.batch.baseVersion);this._restoreSelection(r.selection.ranges,r.selection.isBackward,o)}),this.fire("revert",r.batch,i),this.refresh()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Vbe extends _5{execute(){const e=this._stack.pop(),t=this.editor.model.createBatch({isUndo:!0});this.editor.model.enqueueChange(t,()=>{const i=e.batch.operations[e.batch.operations.length-1].baseVersion+1,o=this.editor.model.document.history.getOperations(i);this._restoreSelection(e.selection.ranges,e.selection.isBackward,o),this._undo(e.batch,t)}),this.refresh()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class zbe extends W{constructor(){super(...arguments),this._batchRegistry=new WeakSet}static get pluginName(){return"UndoEditing"}init(){const e=this.editor,t=e.t;this._undoCommand=new $be(e),this._redoCommand=new Vbe(e),e.commands.add("undo",this._undoCommand),e.commands.add("redo",this._redoCommand),this.listenTo(e.model,"applyOperation",(r,i)=>{const o=i[0];if(!o.isDocumentOperation)return;const s=o.batch,a=this._redoCommand.createdBatches.has(s),l=this._undoCommand.createdBatches.has(s);this._batchRegistry.has(s)||(this._batchRegistry.add(s),s.isUndoable&&(a?this._undoCommand.addBatch(s):l||(this._undoCommand.addBatch(s),this._redoCommand.clearStack())))},{priority:"highest"}),this.listenTo(this._undoCommand,"revert",(r,i,o)=>{this._redoCommand.addBatch(o)}),e.keystrokes.set("CTRL+Z","undo"),e.keystrokes.set("CTRL+Y","redo"),e.keystrokes.set("CTRL+SHIFT+Z","redo"),e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Undo"),keystroke:"CTRL+Z"},{label:t("Redo"),keystroke:[["CTRL+Y"],["CTRL+SHIFT+Z"]]}]})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class jbe extends W{static get pluginName(){return"UndoUI"}init(){const e=this.editor,t=e.locale,r=e.t,i=t.uiLanguageDirection=="ltr"?Ee.undo:Ee.redo,o=t.uiLanguageDirection=="ltr"?Ee.redo:Ee.undo;this._addButtonsToFactory("undo",r("Undo"),"CTRL+Z",i),this._addButtonsToFactory("redo",r("Redo"),"CTRL+Y",o)}_addButtonsToFactory(e,t,r,i){const o=this.editor;o.ui.componentFactory.add(e,()=>{const s=this._createButton(Ne,e,t,r,i);return s.set({tooltip:!0}),s}),o.ui.componentFactory.add("menuBar:"+e,()=>this._createButton(un,e,t,r,i))}_createButton(e,t,r,i,o){const s=this.editor,a=s.locale,l=s.commands.get(t),c=new e(a);return c.set({label:r,icon:o,keystroke:i}),c.bind("isEnabled").to(l,"isEnabled"),this.listenTo(c,"execute",()=>{s.execute(t),s.editing.view.focus()}),c}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Pg extends W{static get requires(){return[zbe,jbe]}static get pluginName(){return"Undo"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Wbe extends W{static get requires(){return[Uhe,Z0,md,Nbe,Ive,rve,Pg]}static get pluginName(){return"Essentials"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Hbe extends Me{constructor(e){super(e),this._isEnabledBasedOnSelection=!1}refresh(){const e=this.editor.model,t=e.document,r=ln(t.selection.getSelectedBlocks());this.value=!!r&&r.is("element","paragraph"),this.isEnabled=!!r&&NE(r,e.schema)}execute(e={}){const t=this.editor.model,r=t.document,i=e.selection||r.selection;t.canEditAt(i)&&t.change(o=>{const s=i.getSelectedBlocks();for(const a of s)!a.is("element","paragraph")&&NE(a,t.schema)&&o.rename(a,"paragraph")})}}function NE(n,e){return e.checkChild(n.parent,"paragraph")&&!e.isObject(n)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ube extends Me{constructor(e){super(e),this._isEnabledBasedOnSelection=!1}execute(e){const t=this.editor.model,r=e.attributes;let i=e.position;t.canEditAt(i)&&t.change(o=>{if(i=this._findPositionToInsertParagraph(i,o),!i)return;const s=o.createElement("paragraph");r&&t.schema.setAllowedAttributes(s,r,o),t.insertContent(s,i),o.setSelection(s,"in")})}_findPositionToInsertParagraph(e,t){const r=this.editor.model;if(r.schema.checkChild(e,"paragraph"))return e;const i=r.schema.findAllowedParent(e,"paragraph");if(!i)return null;const o=e.parent,s=r.schema.checkChild(o,"$text");return o.isEmpty||s&&e.isAtEnd?r.createPositionAfter(o):!o.isEmpty&&s&&e.isAtStart?r.createPositionBefore(o):t.split(e,i).position}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class gd extends W{static get pluginName(){return"Paragraph"}init(){const e=this.editor,t=e.model;e.commands.add("paragraph",new Hbe(e)),e.commands.add("insertParagraph",new Ube(e)),t.schema.register("paragraph",{inheritAllFrom:"$block"}),e.conversion.elementToElement({model:"paragraph",view:"p"}),e.conversion.for("upcast").elementToElement({model:(r,{writer:i})=>!gd.paragraphLikeElements.has(r.name)||r.isEmpty?null:i.createElement("paragraph"),view:/.+/,converterPriority:"low"})}}gd.paragraphLikeElements=new Set(["blockquote","dd","div","dt","h1","h2","h3","h4","h5","h6","li","p","td","th"]);/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Gbe extends Me{constructor(e,t){super(e),this.modelElements=t}refresh(){const e=ln(this.editor.model.document.selection.getSelectedBlocks());this.value=!!e&&this.modelElements.includes(e.name)&&e.name,this.isEnabled=!!e&&this.modelElements.some(t=>LE(e,t,this.editor.model.schema))}execute(e){const t=this.editor.model,r=t.document,i=e.value;t.change(o=>{const s=Array.from(r.selection.getSelectedBlocks()).filter(a=>LE(a,i,t.schema));for(const a of s)a.is("element",i)||o.rename(a,i)})}}function LE(n,e,t){return t.checkChild(n.parent,e)&&!t.isObject(n)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const FE="paragraph";class qbe extends W{static get pluginName(){return"HeadingEditing"}constructor(e){super(e),e.config.define("heading",{options:[{model:"paragraph",title:"Paragraph",class:"ck-heading_paragraph"},{model:"heading1",view:"h2",title:"Heading 1",class:"ck-heading_heading1"},{model:"heading2",view:"h3",title:"Heading 2",class:"ck-heading_heading2"},{model:"heading3",view:"h4",title:"Heading 3",class:"ck-heading_heading3"}]})}static get requires(){return[gd]}init(){const e=this.editor,t=e.config.get("heading.options"),r=[];for(const i of t)i.model!=="paragraph"&&(e.model.schema.register(i.model,{inheritAllFrom:"$block"}),e.conversion.elementToElement(i),r.push(i.model));this._addDefaultH1Conversion(e),e.commands.add("heading",new Gbe(e,r))}afterInit(){const e=this.editor,t=e.commands.get("enter"),r=e.config.get("heading.options");t&&this.listenTo(t,"afterExecute",(i,o)=>{const s=e.model.document.selection.getFirstPosition().parent;r.some(l=>s.is("element",l.model))&&!s.is("element",FE)&&s.childCount===0&&o.writer.rename(s,FE)})}_addDefaultH1Conversion(e){e.conversion.for("upcast").elementToElement({model:"heading1",view:"h1",converterPriority:ur.low+1})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Kbe(n){const e=n.t,t={Paragraph:e("Paragraph"),"Heading 1":e("Heading 1"),"Heading 2":e("Heading 2"),"Heading 3":e("Heading 3"),"Heading 4":e("Heading 4"),"Heading 5":e("Heading 5"),"Heading 6":e("Heading 6")};return n.config.get("heading.options").map(r=>{const i=t[r.title];return i&&i!=r.title&&(r.title=i),r})}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ybe extends W{static get pluginName(){return"HeadingUI"}init(){const e=this.editor,t=e.t,r=Kbe(e),i=t("Choose heading"),o=t("Heading");e.ui.componentFactory.add("heading",s=>{const a={},l=new Vn,c=e.commands.get("heading"),u=e.commands.get("paragraph"),d=[c];for(const h of r){const m={type:"button",model:new rl({label:h.title,class:h.class,role:"menuitemradio",withText:!0})};h.model==="paragraph"?(m.model.bind("isOn").to(u,"value"),m.model.set("commandName","paragraph"),d.push(u)):(m.model.bind("isOn").to(c,"value",g=>g===h.model),m.model.set({commandName:"heading",commandValue:h.model})),l.add(m),a[h.model]=h.title}const f=Ln(s);return fd(f,l,{ariaLabel:o,role:"menu"}),f.buttonView.set({ariaLabel:o,ariaLabelledBy:void 0,isOn:!1,withText:!0,tooltip:o}),f.extendTemplate({attributes:{class:["ck-heading-dropdown"]}}),f.bind("isEnabled").toMany(d,"isEnabled",(...h)=>h.some(m=>m)),f.buttonView.bind("label").to(c,"value",u,"value",(h,m)=>{const g=m?"paragraph":h;return typeof g=="boolean"||!a[g]?i:a[g]}),f.buttonView.bind("ariaLabel").to(c,"value",u,"value",(h,m)=>{const g=m?"paragraph":h;return typeof g=="boolean"||!a[g]?o:`${a[g]}, ${o}`}),this.listenTo(f,"execute",h=>{const{commandName:m,commandValue:g}=h.source;e.execute(m,g?{value:g}:void 0),e.editing.view.focus()}),f}),e.ui.componentFactory.add("menuBar:heading",s=>{const a=new fr(s),l=e.commands.get("heading"),c=e.commands.get("paragraph"),u=[l],d=new xs(s);a.set({class:"ck-heading-dropdown"}),d.set({ariaLabel:t("Heading"),role:"menu"}),a.buttonView.set({label:t("Heading")}),a.panelView.children.add(d);for(const f of r){const h=new Oo(s,a),m=new un(s);h.children.add(m),d.items.add(h),m.set({label:f.title,role:"menuitemradio",class:f.class}),m.bind("ariaChecked").to(m,"isOn"),m.delegate("execute").to(a),m.on("execute",()=>{const g=f.model==="paragraph"?"paragraph":"heading";e.execute(g,{value:f.model}),e.editing.view.focus()}),f.model==="paragraph"?(m.bind("isOn").to(c,"value"),u.push(c)):m.bind("isOn").to(l,"value",g=>g===f.model)}return a.bind("isEnabled").toMany(u,"isEnabled",(...f)=>f.some(h=>h)),a})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Xbe extends W{static get requires(){return[qbe,Ybe]}static get pluginName(){return"Heading"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Zbe extends Me{refresh(){const e=this.editor.model,t=e.document;this.value=t.selection.getAttribute("highlight"),this.isEnabled=e.schema.checkAttributeInSelection(t.selection,"highlight")}execute(e={}){const t=this.editor.model,i=t.document.selection,o=e.value;t.change(s=>{if(i.isCollapsed){const a=i.getFirstPosition();if(i.hasAttribute("highlight")){const l=f=>f.item.hasAttribute("highlight")&&f.item.getAttribute("highlight")===this.value,c=a.getLastMatchingPosition(l,{direction:"backward"}),u=a.getLastMatchingPosition(l),d=s.createRange(c,u);!o||this.value===o?(a.isEqual(u)||s.removeAttribute("highlight",d),s.removeSelectionAttribute("highlight")):(a.isEqual(u)||s.setAttribute("highlight",o,d),s.setSelectionAttribute("highlight",o))}else o&&s.setSelectionAttribute("highlight",o)}else{const a=t.schema.getValidRanges(i.getRanges(),"highlight");for(const l of a)o?s.setAttribute("highlight",o,l):s.removeAttribute("highlight",l)}})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Jbe extends W{static get pluginName(){return"HighlightEditing"}constructor(e){super(e),e.config.define("highlight",{options:[{model:"yellowMarker",class:"marker-yellow",title:"Yellow marker",color:"var(--ck-highlight-marker-yellow)",type:"marker"},{model:"greenMarker",class:"marker-green",title:"Green marker",color:"var(--ck-highlight-marker-green)",type:"marker"},{model:"pinkMarker",class:"marker-pink",title:"Pink marker",color:"var(--ck-highlight-marker-pink)",type:"marker"},{model:"blueMarker",class:"marker-blue",title:"Blue marker",color:"var(--ck-highlight-marker-blue)",type:"marker"},{model:"redPen",class:"pen-red",title:"Red pen",color:"var(--ck-highlight-pen-red)",type:"pen"},{model:"greenPen",class:"pen-green",title:"Green pen",color:"var(--ck-highlight-pen-green)",type:"pen"}]})}init(){const e=this.editor;e.model.schema.extend("$text",{allowAttributes:"highlight"});const t=e.config.get("highlight.options");e.conversion.attributeToElement(Qbe(t)),e.commands.add("highlight",new Zbe(e))}}function Qbe(n){const e={model:{key:"highlight",values:[]},view:{}};for(const t of n)e.model.values.push(t.model),e.view[t.model]={name:"mark",classes:t.class};return e}const eye='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path class="ck-icon__fill" d="M10.798 1.59 3.002 12.875l1.895 1.852 2.521 1.402 6.997-12.194z"/><path d="m2.556 16.727.234-.348c-.297-.151-.462-.293-.498-.426-.036-.137.002-.416.115-.837.094-.25.15-.449.169-.595a4.495 4.495 0 0 0 0-.725c-.209-.621-.303-1.041-.284-1.26.02-.218.178-.506.475-.862l6.77-9.414c.539-.91 1.605-.85 3.199.18 1.594 1.032 2.188 1.928 1.784 2.686l-5.877 10.36c-.158.412-.333.673-.526.782-.193.108-.604.179-1.232.21-.362.131-.608.237-.738.318-.13.081-.305.238-.526.47-.293.265-.504.397-.632.397-.096 0-.27-.075-.524-.226l-.31.41-1.6-1.12zm-.279.415 1.575 1.103-.392.515H1.19l1.087-1.618zm8.1-13.656-4.953 6.9L8.75 12.57l4.247-7.574c.175-.25-.188-.647-1.092-1.192-.903-.546-1.412-.652-1.528-.32zM8.244 18.5 9.59 17h9.406v1.5H8.245z"/></svg>',tye='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path class="ck-icon__fill" d="M10.126 2.268 2.002 13.874l1.895 1.852 2.521 1.402L14.47 5.481l-1.543-2.568-2.801-.645z"/><path d="m4.5 18.088-2.645-1.852-.04-2.95-.006-.005.006-.008v-.025l.011.008L8.73 2.97c.165-.233.356-.417.567-.557l-1.212.308L4.604 7.9l-.83-.558 3.694-5.495 2.708-.69 1.65 1.145.046.018.85-1.216 2.16 1.512-.856 1.222c.828.967 1.144 2.141.432 3.158L7.55 17.286l.006.005-3.055.797H4.5zm-.634.166-1.976.516-.026-1.918 2.002 1.402zM9.968 3.817l-.006-.004-6.123 9.184 3.277 2.294 6.108-9.162.005.003c.317-.452-.16-1.332-1.064-1.966-.891-.624-1.865-.776-2.197-.349zM8.245 18.5 9.59 17h9.406v1.5H8.245z"/></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class nye extends W{get localizedOptionTitles(){const e=this.editor.t;return{"Yellow marker":e("Yellow marker"),"Green marker":e("Green marker"),"Pink marker":e("Pink marker"),"Blue marker":e("Blue marker"),"Red pen":e("Red pen"),"Green pen":e("Green pen")}}static get pluginName(){return"HighlightUI"}init(){const e=this.editor.config.get("highlight.options");for(const t of e)this._addHighlighterButton(t);this._addRemoveHighlightButton(),this._addDropdown(e),this._addMenuBarButton(e)}_addRemoveHighlightButton(){const e=this.editor.t,t=this.editor.commands.get("highlight");this._addButton("removeHighlight",e("Remove highlight"),Ee.eraser,null,r=>{r.bind("isEnabled").to(t,"isEnabled")})}_addHighlighterButton(e){const t=this.editor.commands.get("highlight");this._addButton("highlight:"+e.model,e.title,wf(e.type),e.model,r);function r(i){i.bind("isEnabled").to(t,"isEnabled"),i.bind("isOn").to(t,"value",o=>o===e.model),i.iconView.fillColor=e.color,i.isToggleable=!0}}_addButton(e,t,r,i,o){const s=this.editor;s.ui.componentFactory.add(e,a=>{const l=new Ne(a),c=this.localizedOptionTitles[t]?this.localizedOptionTitles[t]:t;return l.set({label:c,icon:r,tooltip:!0}),l.on("execute",()=>{s.execute("highlight",{value:i}),s.editing.view.focus()}),o(l),l})}_addDropdown(e){const t=this.editor,r=t.t,i=t.ui.componentFactory,o=e[0],s=e.reduce((a,l)=>(a[l.model]=l,a),{});i.add("highlight",a=>{const l=t.commands.get("highlight"),c=Ln(a,ud),u=c.buttonView;u.set({label:r("Highlight"),tooltip:!0,lastExecuted:o.model,commandValue:o.model,isToggleable:!0}),u.bind("icon").to(l,"value",h=>wf(f(h,"type"))),u.bind("color").to(l,"value",h=>f(h,"color")),u.bind("commandValue").to(l,"value",h=>f(h,"model")),u.bind("isOn").to(l,"value",h=>!!h),u.delegate("execute").to(c);const d=()=>{const h=e.map(m=>{const g=i.create("highlight:"+m.model);return this.listenTo(g,"execute",()=>{c.buttonView.set({lastExecuted:m.model})}),g});return h.push(new F0),h.push(i.create("removeHighlight")),h};c.bind("isEnabled").to(l,"isEnabled"),dd(c,d,{enableActiveItemFocusOnDropdownOpen:!0,ariaLabel:r("Text highlight toolbar")}),rye(c),u.on("execute",()=>{t.execute("highlight",{value:u.commandValue})}),this.listenTo(c,"execute",()=>{t.editing.view.focus()});function f(h,m){const g=!h||h===u.lastExecuted?u.lastExecuted:h;return s[g][m]}return c})}_addMenuBarButton(e){const t=this.editor,r=t.t;t.ui.componentFactory.add("menuBar:highlight",i=>{const o=t.commands.get("highlight"),s=new fr(i);s.buttonView.set({label:r("Highlight"),icon:wf("marker")}),s.bind("isEnabled").to(o),s.buttonView.iconView.fillColor="transparent";const a=new xs(i);for(const u of e){const d=new Oo(i,s),f=new un(i);f.set({label:u.title,icon:wf(u.type)}),f.delegate("execute").to(s),f.bind("isOn").to(o,"value",h=>h===u.model),f.bind("ariaChecked").to(f,"isOn"),f.iconView.bind("fillColor").to(f,"isOn",h=>h?"transparent":u.color),f.on("execute",()=>{t.execute("highlight",{value:u.model}),t.editing.view.focus()}),d.children.add(f),a.items.add(d)}a.items.add(new Tg(i));const l=new Oo(i,s),c=new un(i);return c.set({label:r("Remove highlight"),icon:Ee.eraser}),c.delegate("execute").to(s),c.on("execute",()=>{t.execute("highlight",{value:null}),t.editing.view.focus()}),l.children.add(c),a.items.add(l),s.panelView.children.add(a),s})}}function rye(n){n.buttonView.actionView.iconView.bind("fillColor").to(n.buttonView,"color")}function wf(n){return n==="marker"?eye:tye}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class iye extends W{static get requires(){return[Jbe,nye]}static get pluginName(){return"Highlight"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function As(n,e,t,r){e&&oye(n,e,r),t&&xi(n,t,r)}function xi(n,e,t){if(e.attributes)for(const[r,i]of Object.entries(e.attributes))n.setAttribute(r,i,t);e.styles&&n.setStyle(e.styles,t),e.classes&&n.addClass(e.classes,t)}function oye(n,e,t){if(e.attributes)for(const[r]of Object.entries(e.attributes))n.removeAttribute(r,t);if(e.styles)for(const r of Object.keys(e.styles))n.removeStyle(r,t);e.classes&&n.removeClass(e.classes,t)}function sye(n,e){const t=Lr(n);let r="attributes";for(r in e)r=="classes"?t[r]=Array.from(new Set([...n[r]||[],...e[r]])):t[r]={...n[r],...e[r]};return t}function ta(n,e,t,r,i){const o=e.getAttribute(t),s={};for(const a of["attributes","styles","classes"]){if(a!=r){o&&o[a]&&(s[a]=o[a]);continue}if(r=="classes"){const c=new Set(o&&o.classes||[]);i(c),c.size&&(s[a]=Array.from(c));continue}const l=new Map(Object.entries(o&&o[a]||{}));i(l),l.size&&(s[a]=Object.fromEntries(l))}Object.keys(s).length?e.is("documentSelection")?n.setSelectionAttribute(t,s):n.setAttribute(t,s,e):o&&(e.is("documentSelection")?n.removeSelectionAttribute(t):n.removeAttribute(t,e))}function aye(n){return XL(n).replace(/ /g,"")}function Rr(n){return`html${aye(n)}Attributes`}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function J0({model:n}){return(e,t)=>t.writer.createElement(n,{htmlContent:e.getCustomProperty("$rawContent")})}function lye(n,{view:e,isInline:t}){const r=n.t;return(i,{writer:o})=>{const s=r("HTML object"),a=Ig(e,i,o),l=i.getAttribute(Rr(e));o.addClass("html-object-embed__content",a),l&&xi(o,l,a);const c=o.createContainerElement(t?"span":"div",{class:"html-object-embed","data-html-object-embed-label":s},a);return Pl(c,o,{label:s})}}function Ig(n,e,t){return t.createRawElement(n,null,(r,i)=>{i.setContentOf(r,e.getAttribute("htmlContent"))})}function cye({view:n,model:e,allowEmpty:t},r){return o=>{o.on(`element:${n}`,(s,a,l)=>{let c=r.processViewAttributes(a.viewItem,l);if(!(!c&&!l.consumable.test(a.viewItem,{name:!0}))){if(c=c||{},l.consumable.consume(a.viewItem,{name:!0}),a.modelRange||(a=Object.assign(a,l.convertChildren(a.viewItem,a.modelCursor))),t&&a.modelRange.isCollapsed&&Object.keys(c).length){const u=l.writer.createElement("htmlEmptyElement");if(!l.safeInsert(u,a.modelCursor))return;const d=l.getSplitParts(u);a.modelRange=l.writer.createRange(a.modelRange.start,l.writer.createPositionAfter(d[d.length-1])),l.updateConversionResult(u,a),i(u,c,l);return}for(const u of a.modelRange.getItems())i(u,c,l)}},{priority:"low"})};function i(o,s,a){if(a.schema.checkAttribute(o,e)){const l=o.getAttribute(e),c=sye(s,l||{});a.writer.setAttribute(e,c,o)}}}function $E({model:n,view:e},t){return(r,{writer:i,consumable:o})=>{if(!r.hasAttribute(n))return null;const s=i.createContainerElement(e),a=r.getAttribute(n);return o.consume(r,`attribute:${n}`),xi(i,a,s),s.getFillerOffset=()=>null,t?Pl(s,i):s}}function uye({priority:n,view:e}){return(t,r)=>{if(!t)return;const{writer:i}=r,o=i.createAttributeElement(e,null,{priority:n});return xi(i,t,o),o}}function Lu({view:n},e){return t=>{t.on(`element:${n}`,(r,i,o)=>{if(!i.modelRange||i.modelRange.isCollapsed)return;const s=e.processViewAttributes(i.viewItem,o);s&&o.writer.setAttribute(Rr(i.viewItem.name),s,i.modelRange)},{priority:"low"})}}function Fu({view:n,model:e}){return t=>{t.on(`attribute:${Rr(n)}:${e}`,(r,i,o)=>{if(!o.consumable.consume(i.item,r.name))return;const{attributeOldValue:s,attributeNewValue:a}=i,l=o.writer,c=o.mapper.toViewElement(i.item);As(l,s,a,c)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const VE={block:[{model:"codeBlock",view:"pre"},{model:"paragraph",view:"p"},{model:"blockQuote",view:"blockquote"},{model:"listItem",view:"li"},{model:"pageBreak",view:"div"},{model:"rawHtml",view:"div"},{model:"table",view:"table"},{model:"tableRow",view:"tr"},{model:"tableCell",view:"td"},{model:"tableCell",view:"th"},{model:"tableColumnGroup",view:"colgroup"},{model:"tableColumn",view:"col"},{model:"caption",view:"caption"},{model:"caption",view:"figcaption"},{model:"imageBlock",view:"img"},{model:"imageInline",view:"img"},{model:"htmlP",view:"p",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlBlockquote",view:"blockquote",modelSchema:{inheritAllFrom:"$container"}},{model:"htmlTable",view:"table",modelSchema:{allowWhere:"$block",isBlock:!0}},{model:"htmlTbody",view:"tbody",modelSchema:{allowIn:"htmlTable",isBlock:!1}},{model:"htmlThead",view:"thead",modelSchema:{allowIn:"htmlTable",isBlock:!1}},{model:"htmlTfoot",view:"tfoot",modelSchema:{allowIn:"htmlTable",isBlock:!1}},{model:"htmlCaption",view:"caption",modelSchema:{allowIn:"htmlTable",allowChildren:"$text",isBlock:!1}},{model:"htmlColgroup",view:"colgroup",modelSchema:{allowIn:"htmlTable",allowChildren:"col",isBlock:!1}},{model:"htmlCol",view:"col",modelSchema:{allowIn:"htmlColgroup",isBlock:!1}},{model:"htmlTr",view:"tr",modelSchema:{allowIn:["htmlTable","htmlThead","htmlTbody"],isLimit:!0}},{model:"htmlTd",view:"td",modelSchema:{allowIn:"htmlTr",allowContentOf:"$container",isLimit:!0,isBlock:!1}},{model:"htmlTh",view:"th",modelSchema:{allowIn:"htmlTr",allowContentOf:"$container",isLimit:!0,isBlock:!1}},{model:"htmlFigure",view:"figure",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlFigcaption",view:"figcaption",modelSchema:{allowIn:"htmlFigure",allowChildren:"$text",isBlock:!1}},{model:"htmlAddress",view:"address",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlAside",view:"aside",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlMain",view:"main",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlDetails",view:"details",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlSummary",view:"summary",modelSchema:{allowChildren:"$text",allowIn:"htmlDetails",isBlock:!1}},{model:"htmlDiv",view:"div",paragraphLikeModel:"htmlDivParagraph",modelSchema:{inheritAllFrom:"$container"}},{model:"htmlFieldset",view:"fieldset",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlLegend",view:"legend",modelSchema:{allowIn:"htmlFieldset",allowChildren:"$text"}},{model:"htmlHeader",view:"header",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlFooter",view:"footer",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlForm",view:"form",modelSchema:{inheritAllFrom:"$container",isBlock:!0}},{model:"htmlHgroup",view:"hgroup",modelSchema:{allowChildren:["htmlH1","htmlH2","htmlH3","htmlH4","htmlH5","htmlH6"],isBlock:!1}},{model:"htmlH1",view:"h1",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH2",view:"h2",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH3",view:"h3",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH4",view:"h4",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH5",view:"h5",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH6",view:"h6",modelSchema:{inheritAllFrom:"$block"}},{model:"$htmlList",modelSchema:{allowWhere:"$container",allowChildren:["$htmlList","htmlLi"],isBlock:!1}},{model:"htmlDir",view:"dir",modelSchema:{inheritAllFrom:"$htmlList"}},{model:"htmlMenu",view:"menu",modelSchema:{inheritAllFrom:"$htmlList"}},{model:"htmlUl",view:"ul",modelSchema:{inheritAllFrom:"$htmlList"}},{model:"htmlOl",view:"ol",modelSchema:{inheritAllFrom:"$htmlList"}},{model:"htmlLi",view:"li",modelSchema:{allowIn:"$htmlList",allowChildren:"$text",isBlock:!1}},{model:"htmlPre",view:"pre",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlArticle",view:"article",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlSection",view:"section",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlNav",view:"nav",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlDivDl",view:"div",modelSchema:{allowChildren:["htmlDt","htmlDd"],allowIn:"htmlDl"}},{model:"htmlDl",view:"dl",modelSchema:{allowWhere:"$container",allowChildren:["htmlDt","htmlDd","htmlDivDl"],isBlock:!1}},{model:"htmlDt",view:"dt",modelSchema:{allowChildren:"$block",isBlock:!1}},{model:"htmlDd",view:"dd",modelSchema:{allowChildren:"$block",isBlock:!1}},{model:"htmlCenter",view:"center",modelSchema:{inheritAllFrom:"$container",isBlock:!1}}],inline:[{model:"htmlLiAttributes",view:"li",appliesToBlock:!0,coupledAttribute:"listItemId"},{model:"htmlOlAttributes",view:"ol",appliesToBlock:!0,coupledAttribute:"listItemId"},{model:"htmlUlAttributes",view:"ul",appliesToBlock:!0,coupledAttribute:"listItemId"},{model:"htmlFigureAttributes",view:"figure",appliesToBlock:"table"},{model:"htmlTheadAttributes",view:"thead",appliesToBlock:"table"},{model:"htmlTbodyAttributes",view:"tbody",appliesToBlock:"table"},{model:"htmlFigureAttributes",view:"figure",appliesToBlock:"imageBlock"},{model:"htmlAcronym",view:"acronym",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlTt",view:"tt",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlFont",view:"font",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlTime",view:"time",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlVar",view:"var",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlBig",view:"big",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlSmall",view:"small",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlSamp",view:"samp",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlQ",view:"q",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlOutput",view:"output",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlKbd",view:"kbd",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlBdi",view:"bdi",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlBdo",view:"bdo",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlAbbr",view:"abbr",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlA",view:"a",priority:5,coupledAttribute:"linkHref"},{model:"htmlStrong",view:"strong",coupledAttribute:"bold",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlB",view:"b",coupledAttribute:"bold",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlI",view:"i",coupledAttribute:"italic",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlEm",view:"em",coupledAttribute:"italic",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlS",view:"s",coupledAttribute:"strikethrough",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlDel",view:"del",coupledAttribute:"strikethrough",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlIns",view:"ins",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlU",view:"u",coupledAttribute:"underline",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlSub",view:"sub",coupledAttribute:"subscript",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlSup",view:"sup",coupledAttribute:"superscript",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlCode",view:"code",coupledAttribute:"code",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlMark",view:"mark",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlSpan",view:"span",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlCite",view:"cite",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlLabel",view:"label",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlDfn",view:"dfn",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlObject",view:"object",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlIframe",view:"iframe",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlInput",view:"input",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlButton",view:"button",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlTextarea",view:"textarea",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlSelect",view:"select",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlVideo",view:"video",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlEmbed",view:"embed",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlOembed",view:"oembed",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlAudio",view:"audio",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlImg",view:"img",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlCanvas",view:"canvas",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlMeter",view:"meter",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlProgress",view:"progress",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlScript",view:"script",modelSchema:{allowWhere:["$text","$block"],isInline:!0}},{model:"htmlStyle",view:"style",modelSchema:{allowWhere:["$text","$block"],isInline:!0}},{model:"htmlCustomElement",view:"$customElement",modelSchema:{allowWhere:["$text","$block"],allowAttributesOf:"$inlineObject",isInline:!0}}]};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class il extends W{constructor(){super(...arguments),this._definitions=[]}static get pluginName(){return"DataSchema"}init(){for(const e of VE.block)this.registerBlockElement(e);for(const e of VE.inline)this.registerInlineElement(e)}registerBlockElement(e){this._definitions.push({...e,isBlock:!0})}registerInlineElement(e){this._definitions.push({...e,isInline:!0})}extendBlockElement(e){this._extendDefinition({...e,isBlock:!0})}extendInlineElement(e){this._extendDefinition({...e,isInline:!0})}getDefinitionsForView(e,t=!1){const r=new Set;for(const i of this._getMatchingViewDefinitions(e)){if(t)for(const o of this._getReferences(i.model))r.add(o);r.add(i)}return r}getDefinitionsForModel(e){return this._definitions.filter(t=>t.model==e)}_getMatchingViewDefinitions(e){return this._definitions.filter(t=>t.view&&dye(e,t.view))}*_getReferences(e){const t=["inheritAllFrom","inheritTypesFrom","allowWhere","allowContentOf","allowAttributesOf"],r=this._definitions.filter(i=>i.model==e);for(const{modelSchema:i}of r)if(i)for(const o of t)for(const s of nt(i[o]||[])){const a=this._definitions.filter(l=>l.model==s);for(const l of a)s!==e&&(yield*this._getReferences(l.model),yield l)}}_extendDefinition(e){const t=Array.from(this._definitions.entries()).filter(([,r])=>r.model==e.model);if(t.length==0){this._definitions.push(e);return}for(const[r,i]of t)this._definitions[r]=ZL({},i,e,(o,s)=>Array.isArray(o)?o.concat(s):void 0)}}function dye(n,e){return typeof n=="string"?n===e:n instanceof RegExp?n.test(e):!1}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class zt extends W{constructor(e){super(e),this._dataSchema=e.plugins.get("DataSchema"),this._allowedAttributes=new Ss,this._disallowedAttributes=new Ss,this._allowedElements=new Set,this._disallowedElements=new Set,this._dataInitialized=!1,this._coupledAttributes=null,this._registerElementsAfterInit(),this._registerElementHandlers(),this._registerCoupledAttributesPostFixer(),this._registerAssociatedHtmlAttributesPostFixer()}static get pluginName(){return"DataFilter"}static get requires(){return[il,Ls]}loadAllowedConfig(e){for(const t of e){const r=t.name||/[\s\S]+/,i=jE(t);this.allowElement(r),i.forEach(o=>this.allowAttributes(o))}}loadDisallowedConfig(e){for(const t of e){const r=t.name||/[\s\S]+/,i=jE(t);i.length==0?this.disallowElement(r):i.forEach(o=>this.disallowAttributes(o))}}loadAllowedEmptyElementsConfig(e){for(const t of e)this.allowEmptyElement(t)}allowElement(e){for(const t of this._dataSchema.getDefinitionsForView(e,!0))this._addAllowedElement(t),this._coupledAttributes=null}disallowElement(e){for(const t of this._dataSchema.getDefinitionsForView(e,!1))this._disallowedElements.add(t.view)}allowEmptyElement(e){for(const t of this._dataSchema.getDefinitionsForView(e,!0))t.isInline&&this._dataSchema.extendInlineElement({...t,allowEmpty:!0})}allowAttributes(e){this._allowedAttributes.add(e)}disallowAttributes(e){this._disallowedAttributes.add(e)}processViewAttributes(e,t){const{consumable:r}=t;return zE(e,this._disallowedAttributes,r),fye(e,zE(e,this._allowedAttributes,r))}_addAllowedElement(e){if(!this._allowedElements.has(e)){if(this._allowedElements.add(e),"appliesToBlock"in e&&typeof e.appliesToBlock=="string")for(const t of this._dataSchema.getDefinitionsForModel(e.appliesToBlock))t.isBlock&&this._addAllowedElement(t);this._dataInitialized&&this.editor.data.once("set",()=>{this._fireRegisterEvent(e)},{priority:ur.highest+1})}}_registerElementsAfterInit(){this.editor.data.on("init",()=>{this._dataInitialized=!0;for(const e of this._allowedElements)this._fireRegisterEvent(e)},{priority:ur.highest+1})}_registerElementHandlers(){this.on("register",(e,t)=>{const r=this.editor.model.schema;if(t.isObject&&!r.isRegistered(t.model))this._registerObjectElement(t);else if(t.isBlock)this._registerBlockElement(t);else if(t.isInline)this._registerInlineElement(t);else throw new M("data-filter-invalid-definition",null,t);e.stop()},{priority:"lowest"})}_registerCoupledAttributesPostFixer(){const e=this.editor.model,t=e.document.selection;e.document.registerPostFixer(r=>{const i=e.document.differ.getChanges();let o=!1;const s=this._getCoupledAttributesMap();for(const a of i){if(a.type!="attribute"||a.attributeNewValue!==null)continue;const l=s.get(a.attributeKey);if(l)for(const{item:c}of a.range.getWalker())for(const u of l)c.hasAttribute(u)&&(r.removeAttribute(u,c),o=!0)}return o}),this.listenTo(t,"change:attribute",(r,{attributeKeys:i})=>{const o=new Set,s=this._getCoupledAttributesMap();for(const a of i){if(t.hasAttribute(a))continue;const l=s.get(a);if(l)for(const c of l)t.hasAttribute(c)&&o.add(c)}o.size!=0&&e.change(a=>{for(const l of o)a.removeSelectionAttribute(l)})})}_registerAssociatedHtmlAttributesPostFixer(){const e=this.editor.model;e.document.registerPostFixer(t=>{const r=e.document.differ.getChanges();let i=!1;for(const o of r)if(!(o.type!=="insert"||o.name==="$text"))for(const s of o.attributes.keys())!s.startsWith("html")||!s.endsWith("Attributes")||e.schema.checkAttribute(o.name,s)||(t.removeAttribute(s,o.position.nodeAfter),i=!0);return i})}_getCoupledAttributesMap(){if(this._coupledAttributes)return this._coupledAttributes;this._coupledAttributes=new Map;for(const e of this._allowedElements)if(e.coupledAttribute&&e.model){const t=this._coupledAttributes.get(e.coupledAttribute);t?t.push(e.model):this._coupledAttributes.set(e.coupledAttribute,[e.model])}return this._coupledAttributes}_fireRegisterEvent(e){e.view&&this._disallowedElements.has(e.view)||this.fire(e.view?`register:${e.view}`:"register",e)}_registerObjectElement(e){const t=this.editor,r=t.model.schema,i=t.conversion,{view:o,model:s}=e;r.register(s,e.modelSchema);/* istanbul ignore next: paranoid check -- @preserve */o&&(r.extend(e.model,{allowAttributes:[Rr(o),"htmlContent"]}),t.data.registerRawContentMatcher({name:o}),i.for("upcast").elementToElement({view:o,model:J0(e),converterPriority:ur.low+2}),i.for("upcast").add(Lu(e,this)),i.for("editingDowncast").elementToStructure({model:{name:s,attributes:[Rr(o)]},view:lye(t,e)}),i.for("dataDowncast").elementToElement({model:s,view:(a,{writer:l})=>Ig(o,a,l)}),i.for("dataDowncast").add(Fu(e)))}_registerBlockElement(e){const t=this.editor,r=t.model.schema,i=t.conversion,{view:o,model:s}=e;if(!r.isRegistered(e.model)){if(r.register(e.model,e.modelSchema),!o)return;i.for("upcast").elementToElement({model:s,view:o,converterPriority:ur.low+2}),i.for("downcast").elementToElement({model:s,view:o})}o&&(r.extend(e.model,{allowAttributes:Rr(o)}),i.for("upcast").add(Lu(e,this)),i.for("downcast").add(Fu(e)))}_registerInlineElement(e){const t=this.editor,r=t.model.schema,i=t.conversion,o=e.model;e.appliesToBlock||(r.extend("$text",{allowAttributes:o}),e.attributeProperties&&r.setAttributeProperties(o,e.attributeProperties),i.for("upcast").add(cye(e,this)),i.for("downcast").attributeToElement({model:o,view:uye(e)}),e.allowEmpty&&(r.setAttributeProperties(o,{copyFromObject:!1}),r.isRegistered("htmlEmptyElement")||r.register("htmlEmptyElement",{inheritAllFrom:"$inlineObject"}),t.data.htmlProcessor.domConverter.registerInlineObjectMatcher(s=>s.name==e.view&&s.isEmpty&&Array.from(s.getAttributeKeys()).length?{name:!0}:null),i.for("editingDowncast").elementToElement({model:"htmlEmptyElement",view:$E(e,!0)}),i.for("dataDowncast").elementToElement({model:"htmlEmptyElement",view:$E(e)})))}}function zE(n,e,t){const r=e.matchAll(n)||[],i=n.document.stylesProcessor;return r.reduce((o,{match:s})=>{for(const a of s.styles||[]){const l=i.getRelatedStyles(a).filter(c=>c.split("-").length>a.split("-").length).sort((c,u)=>u.split("-").length-c.split("-").length);for(const c of l)t.consume(n,{styles:[c]})&&o.styles.push(c);t.consume(n,{styles:[a]})&&o.styles.push(a)}for(const a of s.classes||[])t.consume(n,{classes:[a]})&&o.classes.push(a);for(const a of s.attributes||[])t.consume(n,{attributes:[a]})&&o.attributes.push(a);return o},{attributes:[],classes:[],styles:[]})}function fye(n,{attributes:e,classes:t,styles:r}){return!e.length&&!t.length&&!r.length?null:{...e.length&&{attributes:hye(n,e)},...r.length&&{styles:mye(n,r)},...t.length&&{classes:t}}}function hye(n,e){const t={};for(const r of e){const i=n.getAttribute(r);i!==void 0&&_M(r)&&(t[r]=i)}return t}function mye(n,e){const t=new tm(n.document.stylesProcessor);for(const r of e){const i=n.getStyle(r);i!==void 0&&t.set(r,i)}return Object.fromEntries(t.getStylesEntries())}function uv(n,e){const{name:t}=n,r=n[e];return Er(r)?Object.entries(r).map(([i,o])=>({name:t,[e]:{[i]:o}})):Array.isArray(r)?r.map(i=>({name:t,[e]:[i]})):[n]}function jE(n){const{name:e,attributes:t,classes:r,styles:i}=n,o=[];return t&&o.push(...uv({name:e,attributes:t},"attributes")),r&&o.push(...uv({name:e,classes:r},"classes")),i&&o.push(...uv({name:e,styles:i},"styles")),o}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class gye extends W{static get requires(){return[zt]}static get pluginName(){return"CodeBlockElementSupport"}init(){if(!this.editor.plugins.has("CodeBlockEditing"))return;const e=this.editor.plugins.get(zt);e.on("register:pre",(t,r)=>{if(r.model!=="codeBlock")return;const i=this.editor,o=i.model.schema,s=i.conversion;o.extend("codeBlock",{allowAttributes:["htmlPreAttributes","htmlContentAttributes"]}),s.for("upcast").add(pye(e)),s.for("downcast").add(vye()),t.stop()})}}function pye(n){return e=>{e.on("element:code",(t,r,i)=>{const o=r.viewItem,s=o.parent;if(!s||!s.is("element","pre"))return;a(s,"htmlPreAttributes"),a(o,"htmlContentAttributes");function a(l,c){const u=n.processViewAttributes(l,i);u&&i.writer.setAttribute(c,u,r.modelRange)}},{priority:"low"})}}function vye(){return n=>{n.on("attribute:htmlPreAttributes:codeBlock",(e,t,r)=>{if(!r.consumable.consume(t.item,e.name))return;const{attributeOldValue:i,attributeNewValue:o}=t,a=r.mapper.toViewElement(t.item).parent;As(r.writer,i,o,a)}),n.on("attribute:htmlContentAttributes:codeBlock",(e,t,r)=>{if(!r.consumable.consume(t.item,e.name))return;const{attributeOldValue:i,attributeNewValue:o}=t,s=r.mapper.toViewElement(t.item);As(r.writer,i,o,s)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class bye extends W{static get requires(){return[zt]}static get pluginName(){return"DualContentModelElementSupport"}init(){this.editor.plugins.get(zt).on("register",(t,r)=>{const i=r,o=this.editor,s=o.model.schema,a=o.conversion;if(!i.paragraphLikeModel||s.isRegistered(i.model)||s.isRegistered(i.paragraphLikeModel))return;const l={model:i.paragraphLikeModel,view:i.view};s.register(i.model,i.modelSchema),s.register(l.model,{inheritAllFrom:"$block"}),a.for("upcast").elementToElement({view:i.view,model:(c,{writer:u})=>this._hasBlockContent(c)?u.createElement(i.model):u.createElement(l.model),converterPriority:ur.low+.5}),a.for("downcast").elementToElement({view:i.view,model:i.model}),this._addAttributeConversion(i),a.for("downcast").elementToElement({view:l.view,model:l.model}),this._addAttributeConversion(l),t.stop()})}_hasBlockContent(e){const t=this.editor.editing.view,r=t.domConverter.blockElements;for(const i of t.createRangeIn(e).getItems())if(i.is("element")&&r.includes(i.name))return!0;return!1}_addAttributeConversion(e){const t=this.editor,r=t.conversion,i=t.plugins.get(zt);t.model.schema.extend(e.model,{allowAttributes:Rr(e.view)}),r.for("upcast").add(Lu(e,i)),r.for("downcast").add(Fu(e))}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class yye extends W{static get requires(){return[il,md]}static get pluginName(){return"HeadingElementSupport"}init(){const e=this.editor;if(!e.plugins.has("HeadingEditing"))return;const t=e.config.get("heading.options");this.registerHeadingElements(e,t)}registerHeadingElements(e,t){const r=e.plugins.get(il),i=[];for(const o of t)"model"in o&&"view"in o&&(r.registerBlockElement({view:o.view,model:o.model}),i.push(o.model));r.extendBlockElement({model:"htmlHgroup",modelSchema:{allowChildren:i}})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function am(n,e,t){const r=n.createRangeOn(e);for(const{item:i}of r.getWalker())if(i.is("element",t))return i}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class wye extends W{static get requires(){return[zt]}static get pluginName(){return"ImageElementSupport"}init(){const e=this.editor;if(!e.plugins.has("ImageInlineEditing")&&!e.plugins.has("ImageBlockEditing"))return;const t=e.model.schema,r=e.conversion,i=e.plugins.get(zt);i.on("register:figure",()=>{r.for("upcast").add(Sye(i))}),i.on("register:img",(o,s)=>{s.model!=="imageBlock"&&s.model!=="imageInline"||(t.isRegistered("imageBlock")&&t.extend("imageBlock",{allowAttributes:["htmlImgAttributes","htmlFigureAttributes","htmlLinkAttributes"]}),t.isRegistered("imageInline")&&t.extend("imageInline",{allowAttributes:["htmlA","htmlImgAttributes"]}),r.for("upcast").add(_ye(i)),r.for("downcast").add(xye()),e.plugins.has("LinkImage")&&r.for("upcast").add(Cye(i,e)),o.stop())})}}function _ye(n){return e=>{e.on("element:img",(t,r,i)=>{if(!r.modelRange)return;const o=r.viewItem,s=n.processViewAttributes(o,i);s&&i.writer.setAttribute("htmlImgAttributes",s,r.modelRange)},{priority:"low"})}}function Cye(n,e){const t=e.plugins.get("ImageUtils");return r=>{r.on("element:a",(i,o,s)=>{const a=o.viewItem;if(!t.findViewImgElement(a))return;const c=o.modelCursor.parent;if(!c.is("element","imageBlock"))return;const u=n.processViewAttributes(a,s);u&&s.writer.setAttribute("htmlLinkAttributes",u,c)},{priority:"low"})}}function Sye(n){return e=>{e.on("element:figure",(t,r,i)=>{const o=r.viewItem;if(!r.modelRange||!o.hasClass("image"))return;const s=n.processViewAttributes(o,i);s&&i.writer.setAttribute("htmlFigureAttributes",s,r.modelRange)},{priority:"low"})}}function xye(){return n=>{e("htmlImgAttributes"),t("img","htmlImgAttributes"),t("figure","htmlFigureAttributes"),t("a","htmlLinkAttributes");function e(r){n.on(`attribute:${r}:imageInline`,(i,o,s)=>{if(!s.consumable.consume(o.item,i.name))return;const{attributeOldValue:a,attributeNewValue:l}=o,c=s.mapper.toViewElement(o.item);As(s.writer,a,l,c)},{priority:"low"})}function t(r,i){n.on(`attribute:${i}:imageBlock`,(o,s,a)=>{if(!a.consumable.test(s.item,o.name))return;const{attributeOldValue:l,attributeNewValue:c}=s,u=a.mapper.toViewElement(s.item),d=am(a.writer,u,r);d&&(As(a.writer,l,c,d),a.consumable.consume(s.item,o.name))},{priority:"low"}),r==="a"&&n.on("attribute:linkHref:imageBlock",(o,s,a)=>{if(!a.consumable.consume(s.item,"attribute:htmlLinkAttributes:imageBlock"))return;const l=a.mapper.toViewElement(s.item),c=am(a.writer,l,"a");xi(a.writer,s.item.getAttribute("htmlLinkAttributes"),c)},{priority:"low"})}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Aye extends W{static get requires(){return[zt]}static get pluginName(){return"MediaEmbedElementSupport"}init(){const e=this.editor;if(!e.plugins.has("MediaEmbed")||e.config.get("mediaEmbed.previewsInData"))return;const t=e.model.schema,r=e.conversion,i=this.editor.plugins.get(zt),o=this.editor.plugins.get(il),s=e.config.get("mediaEmbed.elementName");o.registerBlockElement({model:"media",view:s}),i.on("register:figure",()=>{r.for("upcast").add(Eye(i))}),i.on(`register:${s}`,(a,l)=>{l.model==="media"&&(t.extend("media",{allowAttributes:[Rr(s),"htmlFigureAttributes"]}),r.for("upcast").add(Tye(i,s)),r.for("dataDowncast").add(kye(s)),a.stop())})}}function Tye(n,e){const t=(r,i,o)=>{const s=i.viewItem;a(s,Rr(e));function a(l,c){const u=n.processViewAttributes(l,o);u&&o.writer.setAttribute(c,u,i.modelRange)}};return r=>{r.on(`element:${e}`,t,{priority:"low"})}}function Eye(n){return e=>{e.on("element:figure",(t,r,i)=>{const o=r.viewItem;if(!r.modelRange||!o.hasClass("media"))return;const s=n.processViewAttributes(o,i);s&&i.writer.setAttribute("htmlFigureAttributes",s,r.modelRange)},{priority:"low"})}}function kye(n){return e=>{t(n,Rr(n)),t("figure","htmlFigureAttributes");function t(r,i){e.on(`attribute:${i}:media`,(o,s,a)=>{if(!a.consumable.consume(s.item,o.name))return;const{attributeOldValue:l,attributeNewValue:c}=s,u=a.mapper.toViewElement(s.item),d=am(a.writer,u,r);As(a.writer,l,c,d)})}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Pye extends W{static get requires(){return[zt]}static get pluginName(){return"ScriptElementSupport"}init(){const e=this.editor.plugins.get(zt);e.on("register:script",(t,r)=>{const i=this.editor,o=i.model.schema,s=i.conversion;o.register("htmlScript",r.modelSchema),o.extend("htmlScript",{allowAttributes:["htmlScriptAttributes","htmlContent"],isContent:!0}),i.data.registerRawContentMatcher({name:"script"}),s.for("upcast").elementToElement({view:"script",model:J0(r)}),s.for("upcast").add(Lu(r,e)),s.for("downcast").elementToElement({model:"htmlScript",view:(a,{writer:l})=>Ig("script",a,l)}),s.for("downcast").add(Fu(r)),t.stop()})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Iye extends W{static get requires(){return[zt]}static get pluginName(){return"TableElementSupport"}init(){const e=this.editor;if(!e.plugins.has("TableEditing"))return;const t=e.model.schema,r=e.conversion,i=e.plugins.get(zt),o=e.plugins.get("TableUtils");i.on("register:figure",()=>{r.for("upcast").add(Mye(i))}),i.on("register:table",(s,a)=>{a.model==="table"&&(t.extend("table",{allowAttributes:["htmlTableAttributes","htmlFigureAttributes","htmlTheadAttributes","htmlTbodyAttributes"]}),r.for("upcast").add(Rye(i)),r.for("downcast").add(Dye()),e.model.document.registerPostFixer(Oye(e.model,o)),s.stop())})}}function Oye(n,e){return t=>{const r=n.document.differ.getChanges();let i=!1;for(const o of r){if(o.type!="attribute"||o.attributeKey!="headingRows")continue;const s=o.range.start.nodeAfter,a=s.getAttribute("htmlTheadAttributes"),l=s.getAttribute("htmlTbodyAttributes");a&&!o.attributeNewValue?(t.removeAttribute("htmlTheadAttributes",s),i=!0):l&&o.attributeNewValue==e.getRows(s)&&(t.removeAttribute("htmlTbodyAttributes",s),i=!0)}return i}}function Rye(n){return e=>{e.on("element:table",(t,r,i)=>{if(!r.modelRange)return;const o=r.viewItem;s(o,"htmlTableAttributes");for(const a of o.getChildren())a.is("element","thead")&&s(a,"htmlTheadAttributes"),a.is("element","tbody")&&s(a,"htmlTbodyAttributes");function s(a,l){const c=n.processViewAttributes(a,i);c&&i.writer.setAttribute(l,c,r.modelRange)}},{priority:"low"})}}function Mye(n){return e=>{e.on("element:figure",(t,r,i)=>{const o=r.viewItem;if(!r.modelRange||!o.hasClass("table"))return;const s=n.processViewAttributes(o,i);s&&i.writer.setAttribute("htmlFigureAttributes",s,r.modelRange)},{priority:"low"})}}function Dye(){return n=>{e("table","htmlTableAttributes"),e("figure","htmlFigureAttributes"),e("thead","htmlTheadAttributes"),e("tbody","htmlTbodyAttributes");function e(t,r){n.on(`attribute:${r}:table`,(i,o,s)=>{if(!s.consumable.test(o.item,i.name))return;const a=s.mapper.toViewElement(o.item),l=am(s.writer,a,t);l&&(s.consumable.consume(o.item,i.name),As(s.writer,o.attributeOldValue,o.attributeNewValue,l))})}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Bye extends W{static get requires(){return[zt]}static get pluginName(){return"StyleElementSupport"}init(){const e=this.editor.plugins.get(zt);e.on("register:style",(t,r)=>{const i=this.editor,o=i.model.schema,s=i.conversion;o.register("htmlStyle",r.modelSchema),o.extend("htmlStyle",{allowAttributes:["htmlStyleAttributes","htmlContent"],isContent:!0}),i.data.registerRawContentMatcher({name:"style"}),s.for("upcast").elementToElement({view:"style",model:J0(r)}),s.for("upcast").add(Lu(r,e)),s.for("downcast").elementToElement({model:"htmlStyle",view:(a,{writer:l})=>Ig("style",a,l)}),s.for("downcast").add(Fu(r)),t.stop()})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Nye extends W{static get requires(){return[zt]}static get pluginName(){return"ListElementSupport"}init(){const e=this.editor;if(!e.plugins.has("ListEditing"))return;const t=e.model.schema,r=e.conversion,i=e.plugins.get(zt),o=e.plugins.get("ListEditing"),s=e.plugins.get("ListUtils"),a=["ul","ol","li"];o.registerDowncastStrategy({scope:"item",attributeName:"htmlLiAttributes",setAttributeOnDowncast:xi}),o.registerDowncastStrategy({scope:"list",attributeName:"htmlUlAttributes",setAttributeOnDowncast:xi}),o.registerDowncastStrategy({scope:"list",attributeName:"htmlOlAttributes",setAttributeOnDowncast:xi}),i.on("register",(l,c)=>{if(!a.includes(c.view)||(l.stop(),t.checkAttribute("$block","htmlLiAttributes")))return;const u=a.map(d=>Rr(d));t.extend("$listItem",{allowAttributes:u}),r.for("upcast").add(d=>{d.on("element:ul",dv("htmlUlAttributes",i),{priority:"low"}),d.on("element:ol",dv("htmlOlAttributes",i),{priority:"low"}),d.on("element:li",dv("htmlLiAttributes",i),{priority:"low"})})}),o.on("postFixer",(l,{listNodes:c,writer:u})=>{for(const{node:d,previousNodeInList:f}of c)if(f){if(f.getAttribute("listType")==d.getAttribute("listType")){const h=WE(f.getAttribute("listType")),m=f.getAttribute(h);!Ta(d.getAttribute(h),m)&&u.model.schema.checkAttribute(d,h)&&(u.setAttribute(h,m,d),l.return=!0)}if(f.getAttribute("listItemId")==d.getAttribute("listItemId")){const h=f.getAttribute("htmlLiAttributes");!Ta(d.getAttribute("htmlLiAttributes"),h)&&u.model.schema.checkAttribute(d,"htmlLiAttributes")&&(u.setAttribute("htmlLiAttributes",h,d),l.return=!0)}}}),o.on("postFixer",(l,{listNodes:c,writer:u})=>{for(const{node:d}of c){const f=d.getAttribute("listType");!s.isNumberedListType(f)&&d.getAttribute("htmlOlAttributes")&&(u.removeAttribute("htmlOlAttributes",d),l.return=!0),s.isNumberedListType(f)&&d.getAttribute("htmlUlAttributes")&&(u.removeAttribute("htmlUlAttributes",d),l.return=!0)}})}afterInit(){const e=this.editor;if(!e.commands.get("indentList"))return;const t=e.commands.get("indentList");this.listenTo(t,"afterExecute",(r,i)=>{e.model.change(o=>{for(const s of i){const a=WE(s.getAttribute("listType"));e.model.schema.checkAttribute(s,a)&&o.setAttribute(a,{},s)}})})}}function dv(n,e){return(t,r,i)=>{const o=r.viewItem;r.modelRange||Object.assign(r,i.convertChildren(r.viewItem,r.modelCursor));const s=e.processViewAttributes(o,i);for(const a of r.modelRange.getItems({shallow:!0}))a.hasAttribute("listItemId")&&(a.hasAttribute("htmlUlAttributes")||a.hasAttribute("htmlOlAttributes")||i.writer.model.schema.checkAttribute(a,n)&&i.writer.setAttribute(n,s||{},a))}}function WE(n){return n==="numbered"||n=="customNumbered"?"htmlOlAttributes":"htmlUlAttributes"}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Lye extends W{static get requires(){return[zt,il]}static get pluginName(){return"CustomElementSupport"}init(){const e=this.editor.plugins.get(zt),t=this.editor.plugins.get(il);e.on("register:$customElement",(r,i)=>{r.stop();const o=this.editor,s=o.model.schema,a=o.conversion,l=o.editing.view.domConverter.unsafeElements,c=o.data.htmlProcessor.domConverter.preElements;s.register(i.model,i.modelSchema),s.extend(i.model,{allowAttributes:["htmlElementName","htmlCustomElementAttributes","htmlContent"],isContent:!0}),o.data.htmlProcessor.domConverter.registerRawContentMatcher({name:"template"}),a.for("upcast").elementToElement({view:/.*/,model:(u,d)=>{if(u.name=="$comment"||!Fye(u.name)||t.getDefinitionsForView(u.name).size)return null;l.includes(u.name)||l.push(u.name),c.includes(u.name)||c.push(u.name);const f=d.writer.createElement(i.model,{htmlElementName:u.name}),h=e.processViewAttributes(u,d);h&&d.writer.setAttribute("htmlCustomElementAttributes",h,f);let m;if(u.is("element","template")&&u.getCustomProperty("$rawContent"))m=u.getCustomProperty("$rawContent");else{const p=new ad(u.document).createDocumentFragment(u),b=o.data.htmlProcessor.domConverter.viewToDom(p),y=b.firstChild;for(;y.firstChild;)b.appendChild(y.firstChild);y.remove(),m=o.data.htmlProcessor.htmlWriter.getHtml(b)}d.writer.setAttribute("htmlContent",m,f);for(const{item:g}of o.editing.view.createRangeIn(u))d.consumable.consume(g,{name:!0});return f},converterPriority:"low"}),a.for("editingDowncast").elementToElement({model:{name:i.model,attributes:["htmlElementName","htmlCustomElementAttributes","htmlContent"]},view:(u,{writer:d})=>{const f=u.getAttribute("htmlElementName"),h=d.createRawElement(f);return u.hasAttribute("htmlCustomElementAttributes")&&xi(d,u.getAttribute("htmlCustomElementAttributes"),h),h}}),a.for("dataDowncast").elementToElement({model:{name:i.model,attributes:["htmlElementName","htmlCustomElementAttributes","htmlContent"]},view:(u,{writer:d})=>{const f=u.getAttribute("htmlElementName"),h=u.getAttribute("htmlContent"),m=d.createRawElement(f,null,(g,p)=>{p.setContentOf(g,h)});return u.hasAttribute("htmlCustomElementAttributes")&&xi(d,u.getAttribute("htmlCustomElementAttributes"),m),m}})})}}function Fye(n){try{document.createElement(n)}catch{return!1}return!0}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class $ye extends W{static get pluginName(){return"GeneralHtmlSupport"}static get requires(){return[zt,gye,bye,yye,wye,Aye,Pye,Iye,Bye,Nye,Lye]}init(){const e=this.editor,t=e.plugins.get(zt);t.loadAllowedEmptyElementsConfig(e.config.get("htmlSupport.allowEmpty")||[]),t.loadAllowedConfig(e.config.get("htmlSupport.allow")||[]),t.loadDisallowedConfig(e.config.get("htmlSupport.disallow")||[])}getGhsAttributeNameForElement(e){const t=this.editor.plugins.get("DataSchema"),r=Array.from(t.getDefinitionsForView(e,!1)),i=r.find(o=>o.isInline&&!r[0].isObject);return i?i.model:Rr(e)}addModelHtmlClass(e,t,r){const i=this.editor.model,o=this.getGhsAttributeNameForElement(e);i.change(s=>{for(const a of na(i,r,o))ta(s,a,o,"classes",l=>{for(const c of nt(t))l.add(c)})})}removeModelHtmlClass(e,t,r){const i=this.editor.model,o=this.getGhsAttributeNameForElement(e);i.change(s=>{for(const a of na(i,r,o))ta(s,a,o,"classes",l=>{for(const c of nt(t))l.delete(c)})})}setModelHtmlAttributes(e,t,r){const i=this.editor.model,o=this.getGhsAttributeNameForElement(e);i.change(s=>{for(const a of na(i,r,o))ta(s,a,o,"attributes",l=>{for(const[c,u]of Object.entries(t))l.set(c,u)})})}removeModelHtmlAttributes(e,t,r){const i=this.editor.model,o=this.getGhsAttributeNameForElement(e);i.change(s=>{for(const a of na(i,r,o))ta(s,a,o,"attributes",l=>{for(const c of nt(t))l.delete(c)})})}setModelHtmlStyles(e,t,r){const i=this.editor.model,o=this.getGhsAttributeNameForElement(e);i.change(s=>{for(const a of na(i,r,o))ta(s,a,o,"styles",l=>{for(const[c,u]of Object.entries(t))l.set(c,u)})})}removeModelHtmlStyles(e,t,r){const i=this.editor.model,o=this.getGhsAttributeNameForElement(e);i.change(s=>{for(const a of na(i,r,o))ta(s,a,o,"styles",l=>{for(const c of nt(t))l.delete(c)})})}}function*na(n,e,t){if(e)if(!(Symbol.iterator in e)&&e.is("documentSelection")&&e.isCollapsed)n.schema.checkAttributeInSelection(e,t)&&(yield e);else for(const r of Vye(n,e,t))yield*r.getItems({shallow:!0})}function Vye(n,e,t){return!(Symbol.iterator in e)&&(e.is("node")||e.is("$text")||e.is("$textProxy"))?n.schema.checkAttribute(e,t)?[n.createRangeOn(e)]:[]:n.schema.getValidRanges(n.createSelection(e).getRanges(),t)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function zye(n){return n.createContainerElement("span",{class:"image-inline"},n.createEmptyElement("img"))}function HE(n){return n.createContainerElement("figure",{class:"image"},[n.createEmptyElement("img"),n.createSlot("children")])}function C5(n,e){const t=n.plugins.get("ImageUtils"),r=n.plugins.has("ImageInlineEditing")&&n.plugins.has("ImageBlockEditing");return o=>t.isInlineImageView(o)?r&&(o.getStyle("display")=="block"||o.findAncestor(t.isBlockImageView)?"imageBlock":"imageInline")!==e?null:i(o):null;function i(o){const s={name:!0};return o.hasAttribute("src")&&(s.attributes=["src"]),s}}function Q0(n,e){const t=ln(e.getSelectedBlocks());return!t||n.isObject(t)||t.isEmpty&&t.name!="listItem"?"imageBlock":"imageInline"}function lm(n){return n&&n.endsWith("px")?parseInt(n):null}function cm(n){const e=lm(n.getStyle("width")),t=lm(n.getStyle("height"));return!!(e&&t)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const jye=/^(image|image-inline)$/;class kn extends W{constructor(){super(...arguments),this._domEmitter=new(nr())}static get pluginName(){return"ImageUtils"}isImage(e){return this.isInlineImage(e)||this.isBlockImage(e)}isInlineImageView(e){return!!e&&e.is("element","img")}isBlockImageView(e){return!!e&&e.is("element","figure")&&e.hasClass("image")}insertImage(e={},t=null,r=null,i={}){const o=this.editor,s=o.model,a=s.document.selection,l=S5(o,t||a,r);e={...Object.fromEntries(a.getAttributes()),...e};for(const c in e)s.schema.checkAttribute(l,c)||delete e[c];return s.change(c=>{const{setImageSizes:u=!0}=i,d=c.createElement(l,e);return s.insertObject(d,t,null,{setSelection:"on",findOptimalPosition:!t&&l!="imageInline"?"auto":void 0}),d.parent?(u&&this.setImageNaturalSizeAttributes(d),d):null})}setImageNaturalSizeAttributes(e){const t=e.getAttribute("src");t&&(e.getAttribute("width")||e.getAttribute("height")||this.editor.model.change(r=>{const i=new he.window.Image;this._domEmitter.listenTo(i,"load",()=>{!e.getAttribute("width")&&!e.getAttribute("height")&&this.editor.model.enqueueChange(r.batch,o=>{o.setAttribute("width",i.naturalWidth,e),o.setAttribute("height",i.naturalHeight,e)}),this._domEmitter.stopListening(i,"load")}),i.src=t}))}getClosestSelectedImageWidget(e){const t=e.getFirstPosition();if(!t)return null;const r=e.getSelectedElement();if(r&&this.isImageWidget(r))return r;let i=t.parent;for(;i;){if(i.is("element")&&this.isImageWidget(i))return i;i=i.parent}return null}getClosestSelectedImageElement(e){const t=e.getSelectedElement();return this.isImage(t)?t:e.getFirstPosition().findAncestor("imageBlock")}getImageWidgetFromImageView(e){return e.findAncestor({classes:jye})}isImageAllowed(){const t=this.editor.model.document.selection;return Wye(this.editor,t)&&Hye(t)}toImageWidget(e,t,r){return t.setCustomProperty("image",!0,e),Pl(e,t,{label:()=>{const s=this.findViewImgElement(e).getAttribute("alt");return s?`${s} ${r}`:r}})}isImageWidget(e){return!!e.getCustomProperty("image")&&$t(e)}isBlockImage(e){return!!e&&e.is("element","imageBlock")}isInlineImage(e){return!!e&&e.is("element","imageInline")}findViewImgElement(e){if(this.isInlineImageView(e))return e;const t=this.editor.editing.view;for(const{item:r}of t.createRangeIn(e))if(this.isInlineImageView(r))return r}destroy(){return this._domEmitter.stopListening(),super.destroy()}}function Wye(n,e){if(S5(n,e,null)=="imageBlock"){const r=Uye(e,n.model);if(n.model.schema.checkChild(r,"imageBlock"))return!0}else if(n.model.schema.checkChild(e.focus,"imageInline"))return!0;return!1}function Hye(n){return[...n.focus.getAncestors()].every(e=>!e.is("element","imageBlock"))}function Uye(n,e){const r=Y0(n,e).start.parent;return r.isEmpty&&!r.is("element","$root")?r.parent:r}function S5(n,e,t){const r=n.model.schema,i=n.config.get("image.insert.type");return n.plugins.has("ImageBlockEditing")?n.plugins.has("ImageInlineEditing")?t||(i==="inline"?"imageInline":i!=="auto"?"imageBlock":e.is("selection")?Q0(r,e):r.checkChild(e,"imageInline")?"imageInline":"imageBlock"):"imageBlock":"imageInline"}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Gye=new RegExp(String(/^(http(s)?:\/\/)?[\w-]+\.[\w.~:/[\]@!$&'()*+,;=%-]+/.source+/\.(jpg|jpeg|png|gif|ico|webp|JPG|JPEG|PNG|GIF|ICO|WEBP)/.source+/(\?[\w.~:/[\]@!$&'()*+,;=%-]*)?/.source+/(#[\w.~:/[\]@!$&'()*+,;=%-]*)?$/.source));class qye extends W{static get requires(){return[Z0,kn,Pg,Ti]}static get pluginName(){return"AutoImage"}constructor(e){super(e),this._timeoutId=null,this._positionToInsert=null}init(){const e=this.editor,t=e.model.document,r=e.plugins.get("ClipboardPipeline");this.listenTo(r,"inputTransformation",()=>{const i=t.selection.getFirstRange(),o=Kt.fromPosition(i.start);o.stickiness="toPrevious";const s=Kt.fromPosition(i.end);s.stickiness="toNext",t.once("change:data",()=>{this._embedImageBetweenPositions(o,s),o.detach(),s.detach()},{priority:"high"})}),e.commands.get("undo").on("execute",()=>{this._timeoutId&&(he.window.clearTimeout(this._timeoutId),this._positionToInsert.detach(),this._timeoutId=null,this._positionToInsert=null)},{priority:"high"})}_embedImageBetweenPositions(e,t){const r=this.editor,i=new Zn(e,t),o=i.getWalker({ignoreElementEnd:!0}),s=Object.fromEntries(r.model.document.selection.getAttributes()),a=this.editor.plugins.get("ImageUtils");let l="";for(const c of o)c.item.is("$textProxy")&&(l+=c.item.data);if(l=l.trim(),!l.match(Gye)){i.detach();return}this._positionToInsert=Kt.fromPosition(e),this._timeoutId=setTimeout(()=>{if(!r.commands.get("insertImage").isEnabled){i.detach();return}r.model.change(d=>{this._timeoutId=null,d.remove(i),i.detach();let f;this._positionToInsert.root.rootName!=="$graveyard"&&(f=this._positionToInsert.toPosition()),a.insertImage({...s,src:l},f),this._positionToInsert.detach(),this._positionToInsert=null}),r.plugins.get("Delete").requestUndoOnBackspace()},100)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Kye extends Me{refresh(){const r=this.editor.plugins.get("ImageUtils").getClosestSelectedImageElement(this.editor.model.document.selection);this.isEnabled=!!r,this.isEnabled&&r.hasAttribute("alt")?this.value=r.getAttribute("alt"):this.value=!1}execute(e){const t=this.editor,r=t.plugins.get("ImageUtils"),i=t.model,o=r.getClosestSelectedImageElement(i.document.selection);i.change(s=>{s.setAttribute("alt",e.newValue,o)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Yye extends W{static get requires(){return[kn]}static get pluginName(){return"ImageTextAlternativeEditing"}init(){this.editor.commands.add("imageTextAlternative",new Kye(this.editor))}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Xye extends be{constructor(e){super(e);const t=this.locale.t;this.focusTracker=new Ut,this.keystrokes=new mn,this.labeledInput=this._createLabeledInputView(),this.saveButtonView=this._createButton(t("Save"),Ee.check,"ck-button-save"),this.saveButtonView.type="submit",this.cancelButtonView=this._createButton(t("Cancel"),Ee.cancel,"ck-button-cancel","cancel"),this._focusables=new rr,this._focusCycler=new ir({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"form",attributes:{class:["ck","ck-text-alternative-form","ck-responsive-form"],tabindex:"-1"},children:[this.labeledInput,this.saveButtonView,this.cancelButtonView]})}render(){super.render(),this.keystrokes.listenTo(this.element),sd({view:this}),[this.labeledInput,this.saveButtonView,this.cancelButtonView].forEach(e=>{this._focusables.add(e),this.focusTracker.add(e.element)})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createButton(e,t,r,i){const o=new Ne(this.locale);return o.set({label:e,icon:t,tooltip:!0}),o.extendTemplate({attributes:{class:r}}),i&&o.delegate("execute").to(this,i),o}_createLabeledInputView(){const e=this.locale.t,t=new El(this.locale,hd);return t.label=e("Text alternative"),t}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Zye(n){const e=n.plugins.get("ContextualBalloon");if(n.plugins.get("ImageUtils").getClosestSelectedImageWidget(n.editing.view.document.selection)){const r=e_(n);e.updatePosition(r)}}function e_(n){const e=n.editing.view,t=Cn.defaultPositions,r=n.plugins.get("ImageUtils");return{target:e.domConverter.mapViewToDom(r.getClosestSelectedImageWidget(e.document.selection)),positions:[t.northArrowSouth,t.northArrowSouthWest,t.northArrowSouthEast,t.southArrowNorth,t.southArrowNorthWest,t.southArrowNorthEast,t.viewportStickyNorth]}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Jye extends W{static get requires(){return[Du]}static get pluginName(){return"ImageTextAlternativeUI"}init(){this._createButton()}destroy(){super.destroy(),this._form&&this._form.destroy()}_createButton(){const e=this.editor,t=e.t;e.ui.componentFactory.add("imageTextAlternative",r=>{const i=e.commands.get("imageTextAlternative"),o=new Ne(r);return o.set({label:t("Change image text alternative"),icon:Ee.textAlternative,tooltip:!0}),o.bind("isEnabled").to(i,"isEnabled"),o.bind("isOn").to(i,"value",s=>!!s),this.listenTo(o,"execute",()=>{this._showForm()}),o})}_createForm(){const e=this.editor,r=e.editing.view.document,i=e.plugins.get("ImageUtils");this._balloon=this.editor.plugins.get("ContextualBalloon"),this._form=new(wg(Xye))(e.locale),this._form.render(),this.listenTo(this._form,"submit",()=>{e.execute("imageTextAlternative",{newValue:this._form.labeledInput.fieldView.element.value}),this._hideForm(!0)}),this.listenTo(this._form,"cancel",()=>{this._hideForm(!0)}),this._form.keystrokes.set("Esc",(o,s)=>{this._hideForm(!0),s()}),this.listenTo(e.ui,"update",()=>{i.getClosestSelectedImageWidget(r.selection)?this._isVisible&&Zye(e):this._hideForm(!0)}),od({emitter:this._form,activator:()=>this._isVisible,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideForm()})}_showForm(){if(this._isVisible)return;this._form||this._createForm();const e=this.editor,t=e.commands.get("imageTextAlternative"),r=this._form.labeledInput;this._form.disableCssTransitions(),this._isInBalloon||this._balloon.add({view:this._form,position:e_(e)}),r.fieldView.value=r.fieldView.element.value=t.value||"",this._form.labeledInput.fieldView.select(),this._form.enableCssTransitions()}_hideForm(e=!1){this._isInBalloon&&(this._form.focusTracker.isFocused&&this._form.saveButtonView.focus(),this._balloon.remove(this._form),e&&this.editor.editing.view.focus())}get _isVisible(){return!!this._balloon&&this._balloon.visibleView===this._form}get _isInBalloon(){return!!this._balloon&&this._balloon.hasView(this._form)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class x5 extends W{static get requires(){return[Yye,Jye]}static get pluginName(){return"ImageTextAlternative"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Qye(n){const e=(t,r,i)=>{if(!i.consumable.test(r.viewItem,{name:!0,classes:"image"}))return;const o=n.findViewImgElement(r.viewItem);if(!o||!i.consumable.test(o,{name:!0}))return;i.consumable.consume(r.viewItem,{name:!0,classes:"image"});const s=i.convertItem(o,r.modelCursor),a=ln(s.modelRange.getItems());if(!a){i.consumable.revert(r.viewItem,{name:!0,classes:"image"});return}i.convertChildren(r.viewItem,a),i.updateConversionResult(a,r)};return t=>{t.on("element:figure",e)}}function A5(n,e){const t=(r,i,o)=>{if(!o.consumable.consume(i.item,r.name))return;const s=o.writer,a=o.mapper.toViewElement(i.item),l=n.findViewImgElement(a);i.attributeNewValue===null?(s.removeAttribute("srcset",l),s.removeAttribute("sizes",l)):i.attributeNewValue&&(s.setAttribute("srcset",i.attributeNewValue,l),s.setAttribute("sizes","100vw",l))};return r=>{r.on(`attribute:srcset:${e}`,t)}}function um(n,e,t){const r=(i,o,s)=>{if(!s.consumable.consume(o.item,i.name))return;const a=s.writer,l=s.mapper.toViewElement(o.item),c=n.findViewImgElement(l);a.setAttribute(o.attributeKey,o.attributeNewValue||"",c)};return i=>{i.on(`attribute:${t}:${e}`,r)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class t_ extends ki{observe(e){this.listenTo(e,"load",(t,r)=>{const i=r.target;this.checkShouldIgnoreEventFromTarget(i)||i.tagName=="IMG"&&this._fireEvents(r)},{useCapture:!0})}stopObserving(e){this.stopListening(e)}_fireEvents(e){this.isEnabled&&(this.document.fire("layoutChanged"),this.document.fire("imageLoaded",e))}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ewe extends Me{constructor(e){super(e);const t=e.config.get("image.insert.type");e.plugins.has("ImageBlockEditing")||t==="block"&&Ye("image-block-plugin-required"),e.plugins.has("ImageInlineEditing")||t==="inline"&&Ye("image-inline-plugin-required")}refresh(){const e=this.editor.plugins.get("ImageUtils");this.isEnabled=e.isImageAllowed()}execute(e){const t=nt(e.source),r=this.editor.model.document.selection,i=this.editor.plugins.get("ImageUtils"),o=Object.fromEntries(r.getAttributes());t.forEach((s,a)=>{const l=r.getSelectedElement();if(typeof s=="string"&&(s={src:s}),a&&l&&i.isImage(l)){const c=this.editor.model.createPositionAfter(l);i.insertImage({...s,...o},c)}else i.insertImage({...s,...o})})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class twe extends Me{constructor(e){super(e),this.decorate("cleanupImage")}refresh(){const t=this.editor.plugins.get("ImageUtils"),r=this.editor.model.document.selection.getSelectedElement();this.isEnabled=t.isImage(r),this.value=this.isEnabled?r.getAttribute("src"):null}execute(e){const t=this.editor.model.document.selection.getSelectedElement(),r=this.editor.plugins.get("ImageUtils");this.editor.model.change(i=>{i.setAttribute("src",e.source,t),this.cleanupImage(i,t),r.setImageNaturalSizeAttributes(t)})}cleanupImage(e,t){e.removeAttribute("srcset",t),e.removeAttribute("sizes",t),e.removeAttribute("sources",t),e.removeAttribute("width",t),e.removeAttribute("height",t),e.removeAttribute("alt",t)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class T5 extends W{static get requires(){return[kn]}static get pluginName(){return"ImageEditing"}init(){const e=this.editor,t=e.conversion;e.editing.view.addObserver(t_),t.for("upcast").attributeToAttribute({view:{name:"img",key:"alt"},model:"alt"}).attributeToAttribute({view:{name:"img",key:"srcset"},model:"srcset"});const r=new ewe(e),i=new twe(e);e.commands.add("insertImage",r),e.commands.add("replaceImageSource",i),e.commands.add("imageInsert",r)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class E5 extends W{static get requires(){return[kn]}static get pluginName(){return"ImageSizeAttributes"}afterInit(){this._registerSchema(),this._registerConverters("imageBlock"),this._registerConverters("imageInline")}_registerSchema(){this.editor.plugins.has("ImageBlockEditing")&&this.editor.model.schema.extend("imageBlock",{allowAttributes:["width","height"]}),this.editor.plugins.has("ImageInlineEditing")&&this.editor.model.schema.extend("imageInline",{allowAttributes:["width","height"]})}_registerConverters(e){const t=this.editor,r=t.plugins.get("ImageUtils"),i=e==="imageBlock"?"figure":"img";t.conversion.for("upcast").attributeToAttribute({view:{name:i,styles:{width:/.+/}},model:{key:"width",value:s=>cm(s)?lm(s.getStyle("width")):null}}).attributeToAttribute({view:{name:i,key:"width"},model:"width"}).attributeToAttribute({view:{name:i,styles:{height:/.+/}},model:{key:"height",value:s=>cm(s)?lm(s.getStyle("height")):null}}).attributeToAttribute({view:{name:i,key:"height"},model:"height"}),t.conversion.for("editingDowncast").add(s=>{o(s,"width","width",!0),o(s,"height","height",!0)}),t.conversion.for("dataDowncast").add(s=>{o(s,"width","width",!1),o(s,"height","height",!1)});function o(s,a,l,c){s.on(`attribute:${a}:${e}`,(u,d,f)=>{if(!f.consumable.consume(d.item,u.name))return;const h=f.writer,m=f.mapper.toViewElement(d.item),g=r.findViewImgElement(m);if(d.attributeNewValue!==null?h.setAttribute(l,d.attributeNewValue,g):h.removeAttribute(l,g),d.item.hasAttribute("sources"))return;const p=d.item.hasAttribute("resizedWidth");if(e==="imageInline"&&!p&&!c)return;const b=d.item.getAttribute("width"),y=d.item.getAttribute("height");b&&y&&h.setStyle("aspect-ratio",`${b}/${y}`,g)})}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class k5 extends Me{constructor(e,t){super(e),this._modelElementName=t}refresh(){const t=this.editor.plugins.get("ImageUtils"),r=t.getClosestSelectedImageElement(this.editor.model.document.selection);this._modelElementName==="imageBlock"?this.isEnabled=t.isInlineImage(r):this.isEnabled=t.isBlockImage(r)}execute(e={}){const t=this.editor,r=this.editor.model,i=t.plugins.get("ImageUtils"),o=i.getClosestSelectedImageElement(r.document.selection),s=Object.fromEntries(o.getAttributes());return!s.src&&!s.uploadId?null:r.change(a=>{const{setImageSizes:l=!0}=e,c=Array.from(r.markers).filter(f=>f.getRange().containsItem(o)),u=i.insertImage(s,r.createSelection(o,"on"),this._modelElementName,{setImageSizes:l});if(!u)return null;const d=a.createRangeOn(u);for(const f of c){const h=f.getRange(),m=h.root.rootName!="$graveyard"?h.getJoined(d,!0):d;a.updateMarker(f,{range:m})}return{oldElement:o,newElement:u}})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class P5 extends W{static get requires(){return[kn]}static get pluginName(){return"ImagePlaceholder"}afterInit(){this._setupSchema(),this._setupConversion(),this._setupLoadListener()}_setupSchema(){const e=this.editor.model.schema;e.isRegistered("imageBlock")&&e.extend("imageBlock",{allowAttributes:["placeholder"]}),e.isRegistered("imageInline")&&e.extend("imageInline",{allowAttributes:["placeholder"]})}_setupConversion(){const e=this.editor,t=e.conversion,r=e.plugins.get("ImageUtils");t.for("editingDowncast").add(i=>{i.on("attribute:placeholder",(o,s,a)=>{if(!a.consumable.test(s.item,o.name)||!s.item.is("element","imageBlock")&&!s.item.is("element","imageInline"))return;a.consumable.consume(s.item,o.name);const l=a.writer,c=a.mapper.toViewElement(s.item),u=r.findViewImgElement(c);s.attributeNewValue?(l.addClass("image_placeholder",u),l.setStyle("background-image",`url(${s.attributeNewValue})`,u),l.setCustomProperty("editingPipeline:doNotReuseOnce",!0,u)):(l.removeClass("image_placeholder",u),l.removeStyle("background-image",u))})})}_setupLoadListener(){const e=this.editor,t=e.model,r=e.editing,i=r.view,o=e.plugins.get("ImageUtils");i.addObserver(t_),this.listenTo(i.document,"imageLoaded",(s,a)=>{const l=i.domConverter.mapDomToView(a.target);if(!l)return;const c=o.getImageWidgetFromImageView(l);if(!c)return;const u=r.mapper.toModelElement(c);!u||!u.hasAttribute("placeholder")||t.enqueueChange({isUndoable:!1},d=>{d.removeAttribute("placeholder",u)})})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class I5 extends W{static get requires(){return[T5,E5,kn,P5,si]}static get pluginName(){return"ImageBlockEditing"}init(){const e=this.editor;e.model.schema.register("imageBlock",{inheritAllFrom:"$blockObject",allowAttributes:["alt","src","srcset"]}),this._setupConversion(),e.plugins.has("ImageInlineEditing")&&(e.commands.add("imageTypeBlock",new k5(this.editor,"imageBlock")),this._setupClipboardIntegration())}_setupConversion(){const e=this.editor,t=e.t,r=e.conversion,i=e.plugins.get("ImageUtils");r.for("dataDowncast").elementToStructure({model:"imageBlock",view:(o,{writer:s})=>HE(s)}),r.for("editingDowncast").elementToStructure({model:"imageBlock",view:(o,{writer:s})=>i.toImageWidget(HE(s),s,t("image widget"))}),r.for("downcast").add(um(i,"imageBlock","src")).add(um(i,"imageBlock","alt")).add(A5(i,"imageBlock")),r.for("upcast").elementToElement({view:C5(e,"imageBlock"),model:(o,{writer:s})=>s.createElement("imageBlock",o.hasAttribute("src")?{src:o.getAttribute("src")}:void 0)}).add(Qye(i))}_setupClipboardIntegration(){const e=this.editor,t=e.model,r=e.editing.view,i=e.plugins.get("ImageUtils"),o=e.plugins.get("ClipboardPipeline");this.listenTo(o,"inputTransformation",(s,a)=>{const l=Array.from(a.content.getChildren());let c;if(!l.every(i.isInlineImageView))return;a.targetRanges?c=e.editing.mapper.toModelRange(a.targetRanges[0]):c=t.document.selection.getFirstRange();const u=t.createSelection(c);if(Q0(t.schema,u)==="imageBlock"){const d=new ad(r.document),f=l.map(h=>d.createElement("figure",{class:"image"},h));a.content=d.createDocumentFragment(f)}}),this.listenTo(o,"contentInsertion",(s,a)=>{a.method==="paste"&&t.change(l=>{const c=l.createRangeIn(a.content);for(const u of c.getItems())u.is("element","imageBlock")&&i.setImageNaturalSizeAttributes(u)})})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class nwe extends be{constructor(e,t=[]){super(e),this.focusTracker=new Ut,this.keystrokes=new mn,this._focusables=new rr,this.children=this.createCollection(),this._focusCycler=new ir({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}});for(const r of t)this.children.add(r),this._focusables.add(r),r instanceof Yhe&&this._focusables.addMany(r.children);if(this._focusables.length>1)for(const r of this._focusables)rwe(r)&&(r.focusCycler.on("forwardCycle",i=>{this._focusCycler.focusNext(),i.stop()}),r.focusCycler.on("backwardCycle",i=>{this._focusCycler.focusPrevious(),i.stop()}));this.setTemplate({tag:"form",attributes:{class:["ck","ck-image-insert-form"],tabindex:-1},children:this.children})}render(){super.render(),sd({view:this});for(const t of this._focusables)this.focusTracker.add(t.element);this.keystrokes.listenTo(this.element);const e=t=>t.stopPropagation();this.keystrokes.set("arrowright",e),this.keystrokes.set("arrowleft",e),this.keystrokes.set("arrowup",e),this.keystrokes.set("arrowdown",e)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}}function rwe(n){return"focusCycler"in n}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class O5 extends W{static get pluginName(){return"ImageInsertUI"}static get requires(){return[kn]}constructor(e){super(e),this._integrations=new Map,e.config.define("image.insert.integrations",["upload","assetManager","url"])}init(){const e=this.editor,t=e.model.document.selection,r=e.plugins.get("ImageUtils");this.set("isImageSelected",!1),this.listenTo(e.model.document,"change",()=>{this.isImageSelected=r.isImage(t.getSelectedElement())});const i=o=>this._createToolbarComponent(o);e.ui.componentFactory.add("insertImage",i),e.ui.componentFactory.add("imageInsert",i)}registerIntegration({name:e,observable:t,buttonViewCreator:r,formViewCreator:i,requiresForm:o}){this._integrations.has(e)&&Ye("image-insert-integration-exists",{name:e}),this._integrations.set(e,{observable:t,buttonViewCreator:r,formViewCreator:i,requiresForm:!!o})}_createToolbarComponent(e){const t=this.editor,r=e.t,i=this._prepareIntegrations();if(!i.length)return null;let o;const s=i[0];if(i.length==1){if(!s.requiresForm)return s.buttonViewCreator(!0);o=s.buttonViewCreator(!0)}else{const c=s.buttonViewCreator(!1);o=new ud(e,c),o.tooltip=!0,o.bind("label").to(this,"isImageSelected",u=>r(u?"Replace image":"Insert image"))}const a=this.dropdownView=Ln(e,o),l=i.map(({observable:c})=>typeof c=="function"?c():c);return a.bind("isEnabled").toMany(l,"isEnabled",(...c)=>c.some(u=>u)),a.once("change:isOpen",()=>{const c=i.map(({formViewCreator:d})=>d(i.length==1)),u=new nwe(t.locale,c);a.panelView.children.add(u)}),a}_prepareIntegrations(){const t=this.editor.config.get("image.insert.integrations"),r=[];if(!t.length)return Ye("image-insert-integrations-not-specified"),r;for(const i of t){if(!this._integrations.has(i)){["upload","assetManager","url"].includes(i)||Ye("image-insert-unknown-integration",{item:i});continue}r.push(this._integrations.get(i))}return r.length||Ye("image-insert-integrations-not-registered"),r}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class iwe extends W{static get requires(){return[I5,Ls,x5,O5]}static get pluginName(){return"ImageBlock"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class owe extends W{static get requires(){return[T5,E5,kn,P5,si]}static get pluginName(){return"ImageInlineEditing"}init(){const e=this.editor,t=e.model.schema;t.register("imageInline",{inheritAllFrom:"$inlineObject",allowAttributes:["alt","src","srcset"]}),t.addChildCheck((r,i)=>{if(r.endsWith("caption")&&i.name==="imageInline")return!1}),this._setupConversion(),e.plugins.has("ImageBlockEditing")&&(e.commands.add("imageTypeInline",new k5(this.editor,"imageInline")),this._setupClipboardIntegration())}_setupConversion(){const e=this.editor,t=e.t,r=e.conversion,i=e.plugins.get("ImageUtils");r.for("dataDowncast").elementToElement({model:"imageInline",view:(o,{writer:s})=>s.createEmptyElement("img")}),r.for("editingDowncast").elementToStructure({model:"imageInline",view:(o,{writer:s})=>i.toImageWidget(zye(s),s,t("image widget"))}),r.for("downcast").add(um(i,"imageInline","src")).add(um(i,"imageInline","alt")).add(A5(i,"imageInline")),r.for("upcast").elementToElement({view:C5(e,"imageInline"),model:(o,{writer:s})=>s.createElement("imageInline",o.hasAttribute("src")?{src:o.getAttribute("src")}:void 0)})}_setupClipboardIntegration(){const e=this.editor,t=e.model,r=e.editing.view,i=e.plugins.get("ImageUtils"),o=e.plugins.get("ClipboardPipeline");this.listenTo(o,"inputTransformation",(s,a)=>{const l=Array.from(a.content.getChildren());let c;if(!l.every(i.isBlockImageView))return;a.targetRanges?c=e.editing.mapper.toModelRange(a.targetRanges[0]):c=t.document.selection.getFirstRange();const u=t.createSelection(c);if(Q0(t.schema,u)==="imageInline"){const d=new ad(r.document),f=l.map(h=>h.childCount===1?(Array.from(h.getAttributes()).forEach(m=>d.setAttribute(...m,i.findViewImgElement(h))),h.getChild(0)):h);a.content=d.createDocumentFragment(f)}}),this.listenTo(o,"contentInsertion",(s,a)=>{a.method==="paste"&&t.change(l=>{const c=l.createRangeIn(a.content);for(const u of c.getItems())u.is("element","imageInline")&&i.setImageNaturalSizeAttributes(u)})})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class swe extends W{static get requires(){return[owe,Ls,x5,O5]}static get pluginName(){return"ImageInline"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class awe extends W{static get requires(){return[iwe,swe]}static get pluginName(){return"Image"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class R5 extends W{static get pluginName(){return"ImageCaptionUtils"}static get requires(){return[kn]}getCaptionFromImageModelElement(e){for(const t of e.getChildren())if(t&&t.is("element","caption"))return t;return null}getCaptionFromModelSelection(e){const t=this.editor.plugins.get("ImageUtils"),r=e.getFirstPosition().findAncestor("caption");return r&&t.isBlockImage(r.parent)?r:null}matchImageCaptionViewElement(e){const t=this.editor.plugins.get("ImageUtils");return e.name=="figcaption"&&t.isBlockImageView(e.parent)?{name:!0}:null}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class lwe extends Me{refresh(){const e=this.editor,t=e.plugins.get("ImageCaptionUtils"),r=e.plugins.get("ImageUtils");if(!e.plugins.has(I5)){this.isEnabled=!1,this.value=!1;return}const i=e.model.document.selection,o=i.getSelectedElement();if(!o){const s=t.getCaptionFromModelSelection(i);this.isEnabled=!!s,this.value=!!s;return}this.isEnabled=r.isImage(o),this.isEnabled?this.value=!!t.getCaptionFromImageModelElement(o):this.value=!1}execute(e={}){const{focusCaptionOnShow:t}=e;this.editor.model.change(r=>{this.value?this._hideImageCaption(r):this._showImageCaption(r,t)})}_showImageCaption(e,t){const i=this.editor.model.document.selection,o=this.editor.plugins.get("ImageCaptionEditing"),s=this.editor.plugins.get("ImageUtils");let a=i.getSelectedElement();const l=o._getSavedCaption(a);s.isInlineImage(a)&&(this.editor.execute("imageTypeBlock"),a=i.getSelectedElement());const c=l||e.createElement("caption");e.append(c,a),t&&e.setSelection(c,"in")}_hideImageCaption(e){const t=this.editor,r=t.model.document.selection,i=t.plugins.get("ImageCaptionEditing"),o=t.plugins.get("ImageCaptionUtils");let s=r.getSelectedElement(),a;s?a=o.getCaptionFromImageModelElement(s):(a=o.getCaptionFromModelSelection(r),s=a.parent),i._saveCaption(s,a),e.setSelection(s,"on"),e.remove(a)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class cwe extends W{static get requires(){return[kn,R5]}static get pluginName(){return"ImageCaptionEditing"}constructor(e){super(e),this._savedCaptionsMap=new WeakMap}init(){const e=this.editor,t=e.model.schema;t.isRegistered("caption")?t.extend("caption",{allowIn:"imageBlock"}):t.register("caption",{allowIn:"imageBlock",allowContentOf:"$block",isLimit:!0}),e.commands.add("toggleImageCaption",new lwe(this.editor)),this._setupConversion(),this._setupImageTypeCommandsIntegration(),this._registerCaptionReconversion()}_setupConversion(){const e=this.editor,t=e.editing.view,r=e.plugins.get("ImageUtils"),i=e.plugins.get("ImageCaptionUtils"),o=e.t;e.conversion.for("upcast").elementToElement({view:s=>i.matchImageCaptionViewElement(s),model:"caption"}),e.conversion.for("dataDowncast").elementToElement({model:"caption",view:(s,{writer:a})=>r.isBlockImage(s.parent)?a.createContainerElement("figcaption"):null}),e.conversion.for("editingDowncast").elementToElement({model:"caption",view:(s,{writer:a})=>{if(!r.isBlockImage(s.parent))return null;const l=a.createEditableElement("figcaption");a.setCustomProperty("imageCaption",!0,l),l.placeholder=o("Enter image caption"),LM({view:t,element:l,keepOnFocus:!0});const c=s.parent.getAttribute("alt"),u=c?o("Caption for image: %0",[c]):o("Caption for the image");return p5(l,a,{label:u})}})}_setupImageTypeCommandsIntegration(){const e=this.editor,t=e.plugins.get("ImageUtils"),r=e.plugins.get("ImageCaptionUtils"),i=e.commands.get("imageTypeInline"),o=e.commands.get("imageTypeBlock"),s=a=>{if(!a.return)return;const{oldElement:l,newElement:c}=a.return;/* istanbul ignore if: paranoid check -- @preserve */if(!l)return;if(t.isBlockImage(l)){const d=r.getCaptionFromImageModelElement(l);if(d){this._saveCaption(c,d);return}}const u=this._getSavedCaption(l);u&&this._saveCaption(c,u)};i&&this.listenTo(i,"execute",s,{priority:"low"}),o&&this.listenTo(o,"execute",s,{priority:"low"})}_getSavedCaption(e){const t=this._savedCaptionsMap.get(e);return t?Tt.fromJSON(t):null}_saveCaption(e,t){this._savedCaptionsMap.set(e,t.toJSON())}_registerCaptionReconversion(){const e=this.editor,t=e.model,r=e.plugins.get("ImageUtils"),i=e.plugins.get("ImageCaptionUtils");t.document.on("change:data",()=>{const o=t.document.differ.getChanges();for(const s of o){if(s.attributeKey!=="alt")continue;const a=s.range.start.nodeAfter;if(r.isBlockImage(a)){const l=i.getCaptionFromImageModelElement(a);if(!l)return;e.editing.reconvertItem(l)}}})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class uwe extends W{static get requires(){return[R5]}static get pluginName(){return"ImageCaptionUI"}init(){const e=this.editor,t=e.editing.view,r=e.plugins.get("ImageCaptionUtils"),i=e.t;e.ui.componentFactory.add("toggleImageCaption",o=>{const s=e.commands.get("toggleImageCaption"),a=new Ne(o);return a.set({icon:Ee.caption,tooltip:!0,isToggleable:!0}),a.bind("isOn","isEnabled").to(s,"value","isEnabled"),a.bind("label").to(s,"value",l=>i(l?"Toggle caption off":"Toggle caption on")),this.listenTo(a,"execute",()=>{e.execute("toggleImageCaption",{focusCaptionOnShow:!0});const l=r.getCaptionFromModelSelection(e.model.document.selection);if(l){const c=e.editing.mapper.toViewElement(l);t.scrollToTheSelection(),t.change(u=>{u.addClass("image__caption_highlighted",c)})}e.editing.view.focus()}),a})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class dwe extends W{static get requires(){return[cwe,uwe]}static get pluginName(){return"ImageCaption"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function M5(n){const e=n.map(t=>t.replace("+","\\+"));return new RegExp(`^image\\/(${e.join("|")})$`)}function fwe(n){return new Promise((e,t)=>{const r=n.getAttribute("src");fetch(r).then(i=>i.blob()).then(i=>{const o=D5(i,r),a=`image.${o.replace("image/","")}`,l=new File([i],a,{type:o});e(l)}).catch(i=>i&&i.name==="TypeError"?mwe(r).then(e).catch(t):t(i))})}function hwe(n,e){return!n.isInlineImageView(e)||!e.getAttribute("src")?!1:!!e.getAttribute("src").match(/^data:image\/\w+;base64,/g)||!!e.getAttribute("src").match(/^blob:/g)}function D5(n,e){return n.type?n.type:e.match(/data:(image\/\w+);base64/)?e.match(/data:(image\/\w+);base64/)[1].toLowerCase():"image/jpeg"}function mwe(n){return gwe(n).then(e=>{const t=D5(e,n),i=`image.${t.replace("image/","")}`;return new File([e],i,{type:t})})}function gwe(n){return new Promise((e,t)=>{const r=he.document.createElement("img");r.addEventListener("load",()=>{const i=he.document.createElement("canvas");i.width=r.width,i.height=r.height,i.getContext("2d").drawImage(r,0,0),i.toBlob(s=>s?e(s):t())}),r.addEventListener("error",()=>t()),r.src=n})}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class pwe extends W{static get pluginName(){return"ImageUploadUI"}init(){const e=this.editor,t=e.t,r=()=>{const i=this._createButton(kD);return i.set({label:t("Upload image from computer"),tooltip:!0}),i};if(e.ui.componentFactory.add("uploadImage",r),e.ui.componentFactory.add("imageUpload",r),e.ui.componentFactory.add("menuBar:uploadImage",()=>{const i=this._createButton(JD);return i.label=t("Image from computer"),i}),e.plugins.has("ImageInsertUI")){const i=e.plugins.get("ImageInsertUI");i.registerIntegration({name:"upload",observable:()=>e.commands.get("uploadImage"),buttonViewCreator:()=>{const o=e.ui.componentFactory.create("uploadImage");return o.bind("label").to(i,"isImageSelected",s=>t(s?"Replace image from computer":"Upload image from computer")),o},formViewCreator:()=>{const o=e.ui.componentFactory.create("uploadImage");return o.withText=!0,o.bind("label").to(i,"isImageSelected",s=>t(s?"Replace from computer":"Upload from computer")),o.on("execute",()=>{i.dropdownView.isOpen=!1}),o}})}}_createButton(e){const t=this.editor,r=t.locale,i=t.commands.get("uploadImage"),o=t.config.get("image.upload.types"),s=M5(o),a=new e(t.locale),l=r.t;return a.set({acceptedType:o.map(c=>`image/${c}`).join(","),allowMultipleFiles:!0,label:l("Upload image from computer"),icon:Ee.imageUpload}),a.bind("isEnabled").to(i),a.on("done",(c,u)=>{const d=Array.from(u).filter(f=>s.test(f.type));d.length&&(t.execute("uploadImage",{file:d}),t.editing.view.focus())}),a}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let vwe=class extends ct(){constructor(){super();const e=new window.FileReader;this._reader=e,this._data=void 0,this.set("loaded",0),e.onprogress=t=>{this.loaded=t.loaded}}get error(){return this._reader.error}get data(){return this._data}read(e){const t=this._reader;return this.total=e.size,new Promise((r,i)=>{t.onload=()=>{const o=t.result;this._data=o,r(o)},t.onerror=()=>{i("error")},t.onabort=()=>{i("aborted")},this._reader.readAsDataURL(e)})}abort(){this._reader.abort()}};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ps extends W{constructor(){super(...arguments),this.loaders=new Vn,this._loadersMap=new Map,this._pendingAction=null}static get pluginName(){return"FileRepository"}static get requires(){return[DT]}init(){this.loaders.on("change",()=>this._updatePendingAction()),this.set("uploaded",0),this.set("uploadTotal",null),this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",(e,t)=>t?e/t*100:0)}getLoader(e){return this._loadersMap.get(e)||null}createLoader(e){if(!this.createUploadAdapter)return Ye("filerepository-no-upload-adapter"),null;const t=new UE(Promise.resolve(e),this.createUploadAdapter);return this.loaders.add(t),this._loadersMap.set(e,t),e instanceof Promise&&t.file.then(r=>{this._loadersMap.set(r,t)}).catch(()=>{}),t.on("change:uploaded",()=>{let r=0;for(const i of this.loaders)r+=i.uploaded;this.uploaded=r}),t.on("change:uploadTotal",()=>{let r=0;for(const i of this.loaders)i.uploadTotal&&(r+=i.uploadTotal);this.uploadTotal=r}),t}destroyLoader(e){const t=e instanceof UE?e:this.getLoader(e);t._destroy(),this.loaders.remove(t),this._loadersMap.forEach((r,i)=>{r===t&&this._loadersMap.delete(i)})}_updatePendingAction(){const e=this.editor.plugins.get(DT);if(this.loaders.length){if(!this._pendingAction){const t=this.editor.t,r=i=>`${t("Upload in progress")} ${parseInt(i)}%.`;this._pendingAction=e.add(r(this.uploadedPercent)),this._pendingAction.bind("message").to(this,"uploadedPercent",r)}}else e.remove(this._pendingAction),this._pendingAction=null}}class UE extends ct(){constructor(e,t){super(),this.id=Br(),this._filePromiseWrapper=this._createFilePromiseWrapper(e),this._adapter=t(this),this._reader=new vwe,this.set("status","idle"),this.set("uploaded",0),this.set("uploadTotal",null),this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",(r,i)=>i?r/i*100:0),this.set("uploadResponse",null)}get file(){return this._filePromiseWrapper?this._filePromiseWrapper.promise.then(e=>this._filePromiseWrapper?e:null):Promise.resolve(null)}get data(){return this._reader.data}read(){if(this.status!="idle")throw new M("filerepository-read-wrong-status",this);return this.status="reading",this.file.then(e=>this._reader.read(e)).then(e=>{if(this.status!=="reading")throw this.status;return this.status="idle",e}).catch(e=>{throw e==="aborted"?(this.status="aborted","aborted"):(this.status="error",this._reader.error?this._reader.error:e)})}upload(){if(this.status!="idle")throw new M("filerepository-upload-wrong-status",this);return this.status="uploading",this.file.then(()=>this._adapter.upload()).then(e=>(this.uploadResponse=e,this.status="idle",e)).catch(e=>{throw this.status==="aborted"?"aborted":(this.status="error",e)})}abort(){const e=this.status;this.status="aborted",this._filePromiseWrapper.isFulfilled?e=="reading"?this._reader.abort():e=="uploading"&&this._adapter.abort&&this._adapter.abort():(this._filePromiseWrapper.promise.catch(()=>{}),this._filePromiseWrapper.rejecter("aborted")),this._destroy()}_destroy(){this._filePromiseWrapper=void 0,this._reader=void 0,this._adapter=void 0,this.uploadResponse=void 0}_createFilePromiseWrapper(e){const t={};return t.promise=new Promise((r,i)=>{t.rejecter=i,t.isFulfilled=!1,e.then(o=>{t.isFulfilled=!0,r(o)}).catch(o=>{t.isFulfilled=!0,i(o)})}),t}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class bwe extends W{static get requires(){return[ps]}static get pluginName(){return"Base64UploadAdapter"}init(){this.editor.plugins.get(ps).createUploadAdapter=e=>new ywe(e)}}class ywe{constructor(e){this.loader=e}upload(){return new Promise((e,t)=>{const r=this.reader=new window.FileReader;r.addEventListener("load",()=>{e({default:r.result})}),r.addEventListener("error",i=>{t(i)}),r.addEventListener("abort",()=>{t()}),this.loader.file.then(i=>{r.readAsDataURL(i)})})}abort(){this.reader.abort()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class wwe extends W{static get pluginName(){return"ImageUploadProgress"}constructor(e){super(e),this.uploadStatusChange=(t,r,i)=>{const o=this.editor,s=r.item,a=s.getAttribute("uploadId");if(!i.consumable.consume(r.item,t.name))return;const l=o.plugins.get("ImageUtils"),c=o.plugins.get(ps),u=a?r.attributeNewValue:null,d=this.placeholder,f=o.editing.mapper.toViewElement(s),h=i.writer;if(u=="reading"){GE(f,h),qE(l,d,f,h);return}if(u=="uploading"){const m=c.loaders.get(a);GE(f,h),m?(KE(f,h),Cwe(f,h,m,o.editing.view),Ewe(l,f,h,m)):qE(l,d,f,h);return}u=="complete"&&c.loaders.get(a)&&xwe(f,h,o.editing.view),Swe(f,h),KE(f,h),_we(f,h)},this.placeholder="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="}init(){const e=this.editor;e.plugins.has("ImageBlockEditing")&&e.editing.downcastDispatcher.on("attribute:uploadStatus:imageBlock",this.uploadStatusChange),e.plugins.has("ImageInlineEditing")&&e.editing.downcastDispatcher.on("attribute:uploadStatus:imageInline",this.uploadStatusChange)}}function GE(n,e){n.hasClass("ck-appear")||e.addClass("ck-appear",n)}function _we(n,e){e.removeClass("ck-appear",n)}function qE(n,e,t,r){t.hasClass("ck-image-upload-placeholder")||r.addClass("ck-image-upload-placeholder",t);const i=n.findViewImgElement(t);i.getAttribute("src")!==e&&r.setAttribute("src",e,i),B5(t,"placeholder")||r.insert(r.createPositionAfter(i),Twe(r))}function KE(n,e){n.hasClass("ck-image-upload-placeholder")&&e.removeClass("ck-image-upload-placeholder",n),N5(n,e,"placeholder")}function Cwe(n,e,t,r){const i=Awe(e);e.insert(e.createPositionAt(n,"end"),i),t.on("change:uploadedPercent",(o,s,a)=>{r.change(l=>{l.setStyle("width",a+"%",i)})})}function Swe(n,e){N5(n,e,"progressBar")}function xwe(n,e,t){const r=e.createUIElement("div",{class:"ck-image-upload-complete-icon"});e.insert(e.createPositionAt(n,"end"),r),setTimeout(()=>{t.change(i=>i.remove(i.createRangeOn(r)))},3e3)}function Awe(n){const e=n.createUIElement("div",{class:"ck-progress-bar"});return n.setCustomProperty("progressBar",!0,e),e}function Twe(n){const e=n.createUIElement("div",{class:"ck-upload-placeholder-loader"});return n.setCustomProperty("placeholder",!0,e),e}function B5(n,e){for(const t of n.getChildren())if(t.getCustomProperty(e))return t}function N5(n,e,t){const r=B5(n,t);r&&e.remove(e.createRangeOn(r))}function Ewe(n,e,t,r){if(r.data){const i=n.findViewImgElement(e);t.setAttribute("src",r.data,i)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class kwe extends Me{refresh(){const e=this.editor,t=e.plugins.get("ImageUtils"),r=e.model.document.selection.getSelectedElement();this.isEnabled=t.isImageAllowed()||t.isImage(r)}execute(e){const t=nt(e.file),r=this.editor.model.document.selection,i=this.editor.plugins.get("ImageUtils"),o=Object.fromEntries(r.getAttributes());t.forEach((s,a)=>{const l=r.getSelectedElement();if(a&&l&&i.isImage(l)){const c=this.editor.model.createPositionAfter(l);this._uploadImage(s,o,c)}else this._uploadImage(s,o)})}_uploadImage(e,t,r){const i=this.editor,s=i.plugins.get(ps).createLoader(e),a=i.plugins.get("ImageUtils");s&&a.insertImage({...t,uploadId:s.id},r)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Pwe extends W{static get requires(){return[ps,tE,si,kn]}static get pluginName(){return"ImageUploadEditing"}constructor(e){super(e),e.config.define("image",{upload:{types:["jpeg","png","gif","bmp","webp","tiff"]}}),this._uploadImageElements=new Map}init(){const e=this.editor,t=e.model.document,r=e.conversion,i=e.plugins.get(ps),o=e.plugins.get("ImageUtils"),s=e.plugins.get("ClipboardPipeline"),a=M5(e.config.get("image.upload.types")),l=new kwe(e);e.commands.add("uploadImage",l),e.commands.add("imageUpload",l),r.for("upcast").attributeToAttribute({view:{name:"img",key:"uploadId"},model:"uploadId"}),this.listenTo(e.editing.view.document,"clipboardInput",(c,u)=>{if(Iwe(u.dataTransfer))return;const d=Array.from(u.dataTransfer.files).filter(f=>f?a.test(f.type):!1);d.length&&(c.stop(),e.model.change(f=>{u.targetRanges&&f.setSelection(u.targetRanges.map(h=>e.editing.mapper.toModelRange(h))),e.execute("uploadImage",{file:d})}))}),this.listenTo(s,"inputTransformation",(c,u)=>{const d=Array.from(e.editing.view.createRangeIn(u.content)).map(h=>h.item).filter(h=>hwe(o,h)&&!h.getAttribute("uploadProcessed")).map(h=>({promise:fwe(h),imageElement:h}));if(!d.length)return;const f=new ad(e.editing.view.document);for(const h of d){f.setAttribute("uploadProcessed",!0,h.imageElement);const m=i.createLoader(h.promise);m&&(f.setAttribute("src","",h.imageElement),f.setAttribute("uploadId",m.id,h.imageElement))}}),e.editing.view.document.on("dragover",(c,u)=>{u.preventDefault()}),t.on("change",()=>{const c=t.differ.getChanges({includeChangesInGraveyard:!0}).reverse(),u=new Set;for(const d of c)if(d.type=="insert"&&d.name!="$text"){const f=d.position.nodeAfter,h=d.position.root.rootName=="$graveyard";for(const m of Owe(e,f)){const g=m.getAttribute("uploadId");if(!g)continue;const p=i.loaders.get(g);p&&(h?u.has(g)||p.abort():(u.add(g),this._uploadImageElements.set(g,m),p.status=="idle"&&this._readAndUpload(p)))}}}),this.on("uploadComplete",(c,{imageElement:u,data:d})=>{const f=d.urls?d.urls:d;this.editor.model.change(h=>{h.setAttribute("src",f.default,u),this._parseAndSetSrcsetAttributeOnImage(f,u,h),o.setImageNaturalSizeAttributes(u)})},{priority:"low"})}afterInit(){const e=this.editor.model.schema;this.editor.plugins.has("ImageBlockEditing")&&e.extend("imageBlock",{allowAttributes:["uploadId","uploadStatus"]}),this.editor.plugins.has("ImageInlineEditing")&&e.extend("imageInline",{allowAttributes:["uploadId","uploadStatus"]})}_readAndUpload(e){const t=this.editor,r=t.model,i=t.locale.t,o=t.plugins.get(ps),s=t.plugins.get(tE),a=t.plugins.get("ImageUtils"),l=this._uploadImageElements;return r.enqueueChange({isUndoable:!1},u=>{u.setAttribute("uploadStatus","reading",l.get(e.id))}),e.read().then(()=>{const u=e.upload(),d=l.get(e.id);/* istanbul ignore next -- @preserve */if(Re.isSafari){const f=t.editing.mapper.toViewElement(d),h=a.findViewImgElement(f);t.editing.view.once("render",()=>{if(!h.parent)return;const m=t.editing.view.domConverter.mapViewToDom(h.parent);if(!m)return;const g=m.style.display;m.style.display="none",m._ckHack=m.offsetHeight,m.style.display=g})}return t.ui&&t.ui.ariaLiveAnnouncer.announce(i("Uploading image")),r.enqueueChange({isUndoable:!1},f=>{f.setAttribute("uploadStatus","uploading",d)}),u}).then(u=>{r.enqueueChange({isUndoable:!1},d=>{const f=l.get(e.id);d.setAttribute("uploadStatus","complete",f),t.ui&&t.ui.ariaLiveAnnouncer.announce(i("Image upload complete")),this.fire("uploadComplete",{data:u,imageElement:f})}),c()}).catch(u=>{if(t.ui&&t.ui.ariaLiveAnnouncer.announce(i("Error during image upload")),e.status!=="error"&&e.status!=="aborted")throw u;e.status=="error"&&u&&s.showWarning(u,{title:i("Upload failed"),namespace:"upload"}),r.enqueueChange({isUndoable:!1},d=>{d.remove(l.get(e.id))}),c()});function c(){r.enqueueChange({isUndoable:!1},u=>{const d=l.get(e.id);u.removeAttribute("uploadId",d),u.removeAttribute("uploadStatus",d),l.delete(e.id)}),o.destroyLoader(e)}}_parseAndSetSrcsetAttributeOnImage(e,t,r){let i=0;const o=Object.keys(e).filter(s=>{const a=parseInt(s,10);if(!isNaN(a))return i=Math.max(i,a),!0}).map(s=>`${e[s]} ${s}w`).join(", ");if(o!=""){const s={srcset:o};!t.hasAttribute("width")&&!t.hasAttribute("height")&&(s.width=i),r.setAttributes(s,t)}}}function Iwe(n){return Array.from(n.types).includes("text/html")&&n.getData("text/html")!==""}function Owe(n,e){const t=n.plugins.get("ImageUtils");return Array.from(n.model.createRangeOn(e)).filter(r=>t.isImage(r.item)).map(r=>r.item)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Rwe extends W{static get pluginName(){return"ImageUpload"}static get requires(){return[Pwe,pwe,wwe]}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Mwe extends Me{refresh(){const e=this.editor,r=e.plugins.get("ImageUtils").getClosestSelectedImageElement(e.model.document.selection);this.isEnabled=!!r,!r||!r.hasAttribute("resizedWidth")?this.value=null:this.value={width:r.getAttribute("resizedWidth"),height:null}}execute(e){const t=this.editor,r=t.model,i=t.plugins.get("ImageUtils"),o=i.getClosestSelectedImageElement(r.document.selection);this.value={width:e.width,height:null},o&&r.change(s=>{s.setAttribute("resizedWidth",e.width,o),s.removeAttribute("resizedHeight",o),i.setImageNaturalSizeAttributes(o)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class L5 extends W{static get requires(){return[kn]}static get pluginName(){return"ImageResizeEditing"}constructor(e){super(e),e.config.define("image",{resizeUnit:"%",resizeOptions:[{name:"resizeImage:original",value:null,icon:"original"},{name:"resizeImage:custom",value:"custom",icon:"custom"},{name:"resizeImage:25",value:"25",icon:"small"},{name:"resizeImage:50",value:"50",icon:"medium"},{name:"resizeImage:75",value:"75",icon:"large"}]})}init(){const e=this.editor,t=new Mwe(e);this._registerConverters("imageBlock"),this._registerConverters("imageInline"),e.commands.add("resizeImage",t),e.commands.add("imageResize",t)}afterInit(){this._registerSchema()}_registerSchema(){this.editor.plugins.has("ImageBlockEditing")&&this.editor.model.schema.extend("imageBlock",{allowAttributes:["resizedWidth","resizedHeight"]}),this.editor.plugins.has("ImageInlineEditing")&&this.editor.model.schema.extend("imageInline",{allowAttributes:["resizedWidth","resizedHeight"]})}_registerConverters(e){const t=this.editor,r=t.plugins.get("ImageUtils");t.conversion.for("downcast").add(i=>i.on(`attribute:resizedWidth:${e}`,(o,s,a)=>{if(!a.consumable.consume(s.item,o.name))return;const l=a.writer,c=a.mapper.toViewElement(s.item);s.attributeNewValue!==null?(l.setStyle("width",s.attributeNewValue,c),l.addClass("image_resized",c)):(l.removeStyle("width",c),l.removeClass("image_resized",c))})),t.conversion.for("dataDowncast").attributeToAttribute({model:{name:e,key:"resizedHeight"},view:i=>({key:"style",value:{height:i}})}),t.conversion.for("editingDowncast").add(i=>i.on(`attribute:resizedHeight:${e}`,(o,s,a)=>{if(!a.consumable.consume(s.item,o.name))return;const l=a.writer,c=a.mapper.toViewElement(s.item),u=e==="imageInline"?r.findViewImgElement(c):c;s.attributeNewValue!==null?l.setStyle("height",s.attributeNewValue,u):l.removeStyle("height",u)})),t.conversion.for("upcast").attributeToAttribute({view:{name:e==="imageBlock"?"figure":"img",styles:{width:/.+/}},model:{key:"resizedWidth",value:i=>cm(i)?null:i.getStyle("width")}}),t.conversion.for("upcast").attributeToAttribute({view:{name:e==="imageBlock"?"figure":"img",styles:{height:/.+/}},model:{key:"resizedHeight",value:i=>cm(i)?null:i.getStyle("height")}})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const fv={small:Ee.objectSizeSmall,medium:Ee.objectSizeMedium,large:Ee.objectSizeLarge,custom:Ee.objectSizeCustom,original:Ee.objectSizeFull};class Dwe extends W{static get requires(){return[L5]}static get pluginName(){return"ImageResizeButtons"}constructor(e){super(e),this._resizeUnit=e.config.get("image.resizeUnit")}init(){const e=this.editor,t=e.config.get("image.resizeOptions"),r=e.commands.get("resizeImage");this.bind("isEnabled").to(r);for(const i of t)this._registerImageResizeButton(i);this._registerImageResizeDropdown(t)}_registerImageResizeButton(e){const t=this.editor,{name:r,value:i,icon:o}=e;t.ui.componentFactory.add(r,s=>{const a=new Ne(s),l=t.commands.get("resizeImage"),c=this._getOptionLabelValue(e,!0);if(!fv[o])throw new M("imageresizebuttons-missing-icon",t,e);if(a.set({label:c,icon:fv[o],tooltip:c,isToggleable:!0}),a.bind("isEnabled").to(this),t.plugins.has("ImageCustomResizeUI")&&ac(e)){const u=t.plugins.get("ImageCustomResizeUI");this.listenTo(a,"execute",()=>{u._showForm(this._resizeUnit)})}else{const u=i?i+this._resizeUnit:null;a.bind("isOn").to(l,"value",Ry(u)),this.listenTo(a,"execute",()=>{t.execute("resizeImage",{width:u})})}return a})}_registerImageResizeDropdown(e){const t=this.editor,r=t.t,i=e.find(s=>!s.value),o=s=>{const a=t.commands.get("resizeImage"),l=Ln(s,FD),c=l.buttonView,u=r("Resize image");return c.set({tooltip:u,commandValue:i.value,icon:fv.medium,isToggleable:!0,label:this._getOptionLabelValue(i),withText:!0,class:"ck-resize-image-button",ariaLabel:u,ariaLabelledBy:void 0}),c.bind("label").to(a,"value",d=>d&&d.width?d.width:this._getOptionLabelValue(i)),l.bind("isEnabled").to(this),fd(l,()=>this._getResizeDropdownListItemDefinitions(e,a),{ariaLabel:r("Image resize list"),role:"menu"}),this.listenTo(l,"execute",d=>{"onClick"in d.source?d.source.onClick():(t.execute(d.source.commandName,{width:d.source.commandValue}),t.editing.view.focus())}),l};t.ui.componentFactory.add("resizeImage",o),t.ui.componentFactory.add("imageResize",o)}_getOptionLabelValue(e,t=!1){const r=this.editor.t;return e.label?e.label:t?ac(e)?r("Custom image size"):e.value?r("Resize image to %0",e.value+this._resizeUnit):r("Resize image to the original size"):ac(e)?r("Custom"):e.value?e.value+this._resizeUnit:r("Original")}_getResizeDropdownListItemDefinitions(e,t){const{editor:r}=this,i=new Vn,o=e.map(s=>ac(s)?{...s,valueWithUnits:"custom"}:s.value?{...s,valueWithUnits:`${s.value}${this._resizeUnit}`}:{...s,valueWithUnits:null});for(const s of o){let a=null;if(r.plugins.has("ImageCustomResizeUI")&&ac(s)){const l=r.plugins.get("ImageCustomResizeUI");a={type:"button",model:new rl({label:this._getOptionLabelValue(s),role:"menuitemradio",withText:!0,icon:null,onClick:()=>{l._showForm(this._resizeUnit)}})};const c=JL(o,"valueWithUnits");a.model.bind("isOn").to(t,"value",Bwe(c))}else a={type:"button",model:new rl({commandName:"resizeImage",commandValue:s.valueWithUnits,label:this._getOptionLabelValue(s),role:"menuitemradio",withText:!0,icon:null})},a.model.bind("isOn").to(t,"value",Ry(s.valueWithUnits));a.model.bind("isEnabled").to(t,"isEnabled"),i.add(a)}return i}}function ac(n){return n.value==="custom"}function Ry(n){return e=>{const t=e;return n===null&&t===n?!0:t!==null&&t.width===n}}function Bwe(n){return e=>!n.some(t=>Ry(t)(e))}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Nwe="figure.image.ck-widget > img,figure.image.ck-widget > picture > img,figure.image.ck-widget > a > img,figure.image.ck-widget > a > picture > img,span.image-inline.ck-widget > img,span.image-inline.ck-widget > picture > img",hv="image_resized";class Lwe extends W{static get requires(){return[lv,kn]}static get pluginName(){return"ImageResizeHandles"}init(){const e=this.editor.commands.get("resizeImage");this.bind("isEnabled").to(e),this._setupResizerCreator()}_setupResizerCreator(){const e=this.editor,t=e.editing.view,r=e.plugins.get("ImageUtils");t.addObserver(t_),this.listenTo(t.document,"imageLoaded",(i,o)=>{if(!o.target.matches(Nwe))return;const s=e.editing.view.domConverter,a=s.domToView(o.target),l=r.getImageWidgetFromImageView(a);let c=this.editor.plugins.get(lv).getResizerByViewElement(l);if(c){c.redraw();return}const u=e.editing.mapper,d=u.toModelElement(l);c=e.plugins.get(lv).attachTo({unit:e.config.get("image.resizeUnit"),modelElement:d,viewElement:l,editor:e,getHandleHost(f){return f.querySelector("img")},getResizeHost(){return s.mapViewToDom(u.toViewElement(d))},isCentered(){return d.getAttribute("imageStyle")=="alignCenter"},onCommit(f){t.change(h=>{h.removeClass(hv,l)}),e.execute("resizeImage",{width:f})}}),c.on("updateSize",()=>{l.hasClass(hv)||t.change(h=>{h.addClass(hv,l)});const f=d.name==="imageInline"?a:l;f.getStyle("height")&&t.change(h=>{h.removeStyle("height",f)})}),c.bind("isEnabled").to(this)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function F5(n){if(!n)return null;const[,e,t]=n.trim().match(/([.,\d]+)(%|px)$/)||[],r=Number.parseFloat(e);return Number.isNaN(r)?null:{value:r,unit:t}}function $5(n,e,t){return t==="px"?{value:e.value,unit:"px"}:{value:e.value/n*100,unit:"%"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function V5(n){const{editing:e}=n,r=n.plugins.get("ImageUtils").getClosestSelectedImageElement(n.model.document.selection);if(!r)return null;const i=e.mapper.toViewElement(r),o=e.view.domConverter.mapViewToDom(i);return{model:r,view:i,dom:o}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Fwe(n,e){const t=V5(n);if(!t)return null;const r=F5(t.model.getAttribute("resizedWidth")||null);if(!r)return null;if(r.unit===e)return r;const i=X0(t.dom),o={value:new De(t.dom).width};return $5(i,o,e)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class $we extends be{constructor(e,t,r){super(e);const i=this.locale.t;this.focusTracker=new Ut,this.keystrokes=new mn,this.unit=t,this.labeledInput=this._createLabeledInputView(),this.saveButtonView=this._createButton(i("Save"),Ee.check,"ck-button-save"),this.saveButtonView.type="submit",this.cancelButtonView=this._createButton(i("Cancel"),Ee.cancel,"ck-button-cancel","cancel"),this._focusables=new rr,this._validators=r,this._focusCycler=new ir({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"form",attributes:{class:["ck","ck-image-custom-resize-form","ck-responsive-form"],tabindex:"-1"},children:[this.labeledInput,this.saveButtonView,this.cancelButtonView]})}render(){super.render(),this.keystrokes.listenTo(this.element),sd({view:this}),[this.labeledInput,this.saveButtonView,this.cancelButtonView].forEach(e=>{this._focusables.add(e),this.focusTracker.add(e.element)})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createButton(e,t,r,i){const o=new Ne(this.locale);return o.set({label:e,icon:t,tooltip:!0}),o.extendTemplate({attributes:{class:r}}),i&&o.delegate("execute").to(this,i),o}_createLabeledInputView(){const e=this.locale.t,t=new El(this.locale,Dme);return t.label=e("Resize image (in %0)",this.unit),t.fieldView.set({step:.1}),t}isValid(){this.resetFormStatus();for(const e of this._validators){const t=e(this);if(t)return this.labeledInput.errorText=t,!1}return!0}resetFormStatus(){this.labeledInput.errorText=null}get rawSize(){const{element:e}=this.labeledInput.fieldView;return e?e.value:null}get parsedSize(){const{rawSize:e}=this;if(e===null)return null;const t=Number.parseFloat(e);return Number.isNaN(t)?null:t}get sizeWithUnits(){const{parsedSize:e,unit:t}=this;return e===null?null:`${e}${t}`}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Vwe(n,e){const t=V5(n);if(!t)return null;const r=X0(t.dom),i=F5(window.getComputedStyle(t.dom).minWidth)||{value:1},o=Math.max(.1,$5(r,i,e).value);return{unit:e,lower:o,upper:e==="px"?r:100}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class zwe extends W{static get requires(){return[Du]}static get pluginName(){return"ImageCustomResizeUI"}destroy(){super.destroy(),this._form&&this._form.destroy()}_createForm(e){const t=this.editor;this._balloon=this.editor.plugins.get("ContextualBalloon"),this._form=new(wg($we))(t.locale,e,jwe(t)),this._form.render(),this.listenTo(this._form,"submit",()=>{this._form.isValid()&&(t.execute("resizeImage",{width:this._form.sizeWithUnits}),this._hideForm(!0))}),this.listenTo(this._form.labeledInput,"change:errorText",()=>{t.ui.update()}),this.listenTo(this._form,"cancel",()=>{this._hideForm(!0)}),this._form.keystrokes.set("Esc",(r,i)=>{this._hideForm(!0),i()}),od({emitter:this._form,activator:()=>this._isVisible,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideForm()})}_showForm(e){if(this._isVisible)return;this._form||this._createForm(e);const t=this.editor,r=this._form.labeledInput;this._form.disableCssTransitions(),this._form.resetFormStatus(),this._isInBalloon||this._balloon.add({view:this._form,position:e_(t)});const i=Fwe(t,e),o=i?i.value.toFixed(1):"",s=Vwe(t,e);r.fieldView.value=r.fieldView.element.value=o,s&&Object.assign(r.fieldView,{min:s.lower.toFixed(1),max:Math.ceil(s.upper).toFixed(1)}),this._form.labeledInput.fieldView.select(),this._form.enableCssTransitions()}_hideForm(e=!1){this._isInBalloon&&(this._form.focusTracker.isFocused&&this._form.saveButtonView.focus(),this._balloon.remove(this._form),e&&this.editor.editing.view.focus())}get _isVisible(){return!!this._balloon&&this._balloon.visibleView===this._form}get _isInBalloon(){return!!this._balloon&&this._balloon.hasView(this._form)}}function jwe(n){const e=n.t;return[t=>{if(t.rawSize.trim()==="")return e("The value must not be empty.");if(t.parsedSize===null)return e("The value should be a plain number.")}]}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Wwe extends W{static get requires(){return[L5,Lwe,zwe,Dwe]}static get pluginName(){return"ImageResize"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Hwe extends Me{constructor(e,t){super(e),this._defaultStyles={imageBlock:!1,imageInline:!1},this._styles=new Map(t.map(r=>{if(r.isDefault)for(const i of r.modelElements)this._defaultStyles[i]=r.name;return[r.name,r]}))}refresh(){const r=this.editor.plugins.get("ImageUtils").getClosestSelectedImageElement(this.editor.model.document.selection);this.isEnabled=!!r,this.isEnabled?r.hasAttribute("imageStyle")?this.value=r.getAttribute("imageStyle"):this.value=this._defaultStyles[r.name]:this.value=!1}execute(e={}){const t=this.editor,r=t.model,i=t.plugins.get("ImageUtils");r.change(o=>{const s=e.value,{setImageSizes:a=!0}=e;let l=i.getClosestSelectedImageElement(r.document.selection);s&&this.shouldConvertImageType(s,l)&&(this.editor.execute(i.isBlockImage(l)?"imageTypeInline":"imageTypeBlock",{setImageSizes:a}),l=i.getClosestSelectedImageElement(r.document.selection)),!s||this._styles.get(s).isDefault?o.removeAttribute("imageStyle",l):o.setAttribute("imageStyle",s,l),a&&i.setImageNaturalSizeAttributes(l)})}shouldConvertImageType(e,t){return!this._styles.get(e).modelElements.includes(t.name)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const{objectFullWidth:Uwe,objectInline:z5,objectLeft:j5,objectRight:My,objectCenter:Dy,objectBlockLeft:W5,objectBlockRight:H5}=Ee,Lf={get inline(){return{name:"inline",title:"In line",icon:z5,modelElements:["imageInline"],isDefault:!0}},get alignLeft(){return{name:"alignLeft",title:"Left aligned image",icon:j5,modelElements:["imageBlock","imageInline"],className:"image-style-align-left"}},get alignBlockLeft(){return{name:"alignBlockLeft",title:"Left aligned image",icon:W5,modelElements:["imageBlock"],className:"image-style-block-align-left"}},get alignCenter(){return{name:"alignCenter",title:"Centered image",icon:Dy,modelElements:["imageBlock"],className:"image-style-align-center"}},get alignRight(){return{name:"alignRight",title:"Right aligned image",icon:My,modelElements:["imageBlock","imageInline"],className:"image-style-align-right"}},get alignBlockRight(){return{name:"alignBlockRight",title:"Right aligned image",icon:H5,modelElements:["imageBlock"],className:"image-style-block-align-right"}},get block(){return{name:"block",title:"Centered image",icon:Dy,modelElements:["imageBlock"],isDefault:!0}},get side(){return{name:"side",title:"Side image",icon:My,modelElements:["imageBlock"],className:"image-style-side"}}},U5={full:Uwe,left:W5,right:H5,center:Dy,inlineLeft:j5,inlineRight:My,inline:z5},G5=[{name:"imageStyle:wrapText",title:"Wrap text",defaultItem:"imageStyle:alignLeft",items:["imageStyle:alignLeft","imageStyle:alignRight"]},{name:"imageStyle:breakText",title:"Break text",defaultItem:"imageStyle:block",items:["imageStyle:alignBlockLeft","imageStyle:block","imageStyle:alignBlockRight"]}];function Gwe(n){return(n.configuredStyles.options||[]).map(r=>Ywe(r)).filter(r=>Xwe(r,n))}function qwe(n,e){return n&&e?{options:["inline","alignLeft","alignRight","alignCenter","alignBlockLeft","alignBlockRight","block","side"]}:n?{options:["block","side"]}:e?{options:["inline","alignLeft","alignRight"]}:{}}function Kwe(n){return n.has("ImageBlockEditing")&&n.has("ImageInlineEditing")?[...G5]:[]}function Ywe(n){return typeof n=="string"?Lf[n]?n={...Lf[n]}:n={name:n}:n=Zwe(Lf[n.name],n),typeof n.icon=="string"&&(n.icon=U5[n.icon]||n.icon),n}function Xwe(n,{isBlockPluginLoaded:e,isInlinePluginLoaded:t}){const{modelElements:r,name:i}=n;if(!r||!r.length||!i)return q5({style:n}),!1;{const o=[e?"imageBlock":null,t?"imageInline":null];if(!r.some(s=>o.includes(s)))return Ye("image-style-missing-dependency",{style:n,missingPlugins:r.map(s=>s==="imageBlock"?"ImageBlockEditing":"ImageInlineEditing")}),!1}return!0}function Zwe(n,e){const t={...e};for(const r in n)Object.prototype.hasOwnProperty.call(e,r)||(t[r]=n[r]);return t}function q5(n){Ye("image-style-configuration-definition-invalid",n)}const By={normalizeStyles:Gwe,getDefaultStylesConfiguration:qwe,getDefaultDropdownDefinitions:Kwe,warnInvalidStyle:q5,DEFAULT_OPTIONS:Lf,DEFAULT_ICONS:U5,DEFAULT_DROPDOWN_DEFINITIONS:G5};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Jwe(n){return(e,t,r)=>{if(!r.consumable.consume(t.item,e.name))return;const i=YE(t.attributeNewValue,n),o=YE(t.attributeOldValue,n),s=r.mapper.toViewElement(t.item),a=r.writer;o&&a.removeClass(o.className,s),i&&a.addClass(i.className,s)}}function Qwe(n){const e={imageInline:n.filter(t=>!t.isDefault&&t.modelElements.includes("imageInline")),imageBlock:n.filter(t=>!t.isDefault&&t.modelElements.includes("imageBlock"))};return(t,r,i)=>{if(!r.modelRange)return;const o=r.viewItem,s=ln(r.modelRange.getItems());if(s&&i.schema.checkAttribute(s,"imageStyle"))for(const a of e[s.name])i.consumable.consume(o,{classes:a.className})&&i.writer.setAttribute("imageStyle",a.name,s)}}function YE(n,e){for(const t of e)if(t.name===n)return t}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class K5 extends W{static get pluginName(){return"ImageStyleEditing"}static get requires(){return[kn]}init(){const{normalizeStyles:e,getDefaultStylesConfiguration:t}=By,r=this.editor,i=r.plugins.has("ImageBlockEditing"),o=r.plugins.has("ImageInlineEditing");r.config.define("image.styles",t(i,o)),this.normalizedStyles=e({configuredStyles:r.config.get("image.styles"),isBlockPluginLoaded:i,isInlinePluginLoaded:o}),this._setupConversion(i,o),this._setupPostFixer(),r.commands.add("imageStyle",new Hwe(r,this.normalizedStyles))}_setupConversion(e,t){const r=this.editor,i=r.model.schema,o=Jwe(this.normalizedStyles),s=Qwe(this.normalizedStyles);r.editing.downcastDispatcher.on("attribute:imageStyle",o),r.data.downcastDispatcher.on("attribute:imageStyle",o),e&&(i.extend("imageBlock",{allowAttributes:"imageStyle"}),r.data.upcastDispatcher.on("element:figure",s,{priority:"low"})),t&&(i.extend("imageInline",{allowAttributes:"imageStyle"}),r.data.upcastDispatcher.on("element:img",s,{priority:"low"}))}_setupPostFixer(){const e=this.editor,t=e.model.document,r=e.plugins.get(kn),i=new Map(this.normalizedStyles.map(o=>[o.name,o]));t.registerPostFixer(o=>{let s=!1;for(const a of t.differ.getChanges())if(a.type=="insert"||a.type=="attribute"&&a.attributeKey=="imageStyle"){let l=a.type=="insert"?a.position.nodeAfter:a.range.start.nodeAfter;if(l&&l.is("element","paragraph")&&l.childCount>0&&(l=l.getChild(0)),!r.isImage(l))continue;const c=l.getAttribute("imageStyle");if(!c)continue;const u=i.get(c);(!u||!u.modelElements.includes(l.name))&&(o.removeAttribute("imageStyle",l),s=!0)}return s})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class e0e extends W{static get requires(){return[K5]}static get pluginName(){return"ImageStyleUI"}get localizedDefaultStylesTitles(){const e=this.editor.t;return{"Wrap text":e("Wrap text"),"Break text":e("Break text"),"In line":e("In line"),"Full size image":e("Full size image"),"Side image":e("Side image"),"Left aligned image":e("Left aligned image"),"Centered image":e("Centered image"),"Right aligned image":e("Right aligned image")}}init(){const e=this.editor.plugins,t=this.editor.config.get("image.toolbar")||[],r=e.get("ImageStyleEditing"),i=XE(r.normalizedStyles,this.localizedDefaultStylesTitles);for(const s of i)this._createButton(s);const o=XE([...t.filter(ri),...By.getDefaultDropdownDefinitions(e)],this.localizedDefaultStylesTitles);for(const s of o)this._createDropdown(s,i)}_createDropdown(e,t){const r=this.editor.ui.componentFactory;r.add(e.name,i=>{let o;const{defaultItem:s,items:a,title:l}=e,c=a.filter(h=>t.find(({name:m})=>ZE(m)===h)).map(h=>{const m=r.create(h);return h===s&&(o=m),m});a.length!==c.length&&By.warnInvalidStyle({dropdown:e});const u=Ln(i,ud),d=u.buttonView,f=d.arrowView;return dd(u,c,{enableActiveItemFocusOnDropdownOpen:!0}),d.set({label:JE(l,o.label),class:null,tooltip:!0}),f.unbind("label"),f.set({label:l}),d.bind("icon").toMany(c,"isOn",(...h)=>{const m=h.findIndex($l);return m<0?o.icon:c[m].icon}),d.bind("label").toMany(c,"isOn",(...h)=>{const m=h.findIndex($l);return JE(l,m<0?o.label:c[m].label)}),d.bind("isOn").toMany(c,"isOn",(...h)=>h.some($l)),d.bind("class").toMany(c,"isOn",(...h)=>h.some($l)?"ck-splitbutton_flatten":void 0),d.on("execute",()=>{c.some(({isOn:h})=>h)?u.isOpen=!u.isOpen:o.fire("execute")}),u.bind("isEnabled").toMany(c,"isEnabled",(...h)=>h.some($l)),this.listenTo(u,"execute",()=>{this.editor.editing.view.focus()}),u})}_createButton(e){const t=e.name;this.editor.ui.componentFactory.add(ZE(t),r=>{const i=this.editor.commands.get("imageStyle"),o=new Ne(r);return o.set({label:e.title,icon:e.icon,tooltip:!0,isToggleable:!0}),o.bind("isEnabled").to(i,"isEnabled"),o.bind("isOn").to(i,"value",s=>s===t),o.on("execute",this._executeCommand.bind(this,t)),o})}_executeCommand(e){this.editor.execute("imageStyle",{value:e}),this.editor.editing.view.focus()}}function XE(n,e){for(const t of n)e[t.title]&&(t.title=e[t.title]);return n}function ZE(n){return`imageStyle:${n}`}function JE(n,e){return(n?n+": ":"")+e}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class t0e extends W{static get requires(){return[K5,e0e]}static get pluginName(){return"ImageStyle"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class n0e extends W{static get requires(){return[sm,kn]}static get pluginName(){return"ImageToolbar"}afterInit(){const e=this.editor,t=e.t,r=e.plugins.get(sm),i=e.plugins.get("ImageUtils");r.register("image",{ariaLabel:t("Image toolbar"),items:r0e(e.config.get("image.toolbar")||[]),getRelatedElement:o=>i.getClosestSelectedImageWidget(o)})}}function r0e(n){return n.map(e=>ri(e)?e.name:e)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class i0e extends W{static get pluginName(){return"IndentEditing"}init(){const e=this.editor;e.commands.add("indent",new XA(e)),e.commands.add("outdent",new XA(e))}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class o0e extends W{static get pluginName(){return"IndentUI"}init(){const e=this.editor,t=e.locale,r=e.t,i=t.uiLanguageDirection=="ltr"?Ee.indent:Ee.outdent,o=t.uiLanguageDirection=="ltr"?Ee.outdent:Ee.indent;this._defineButton("indent",r("Increase indent"),i),this._defineButton("outdent",r("Decrease indent"),o)}_defineButton(e,t,r){const i=this.editor;i.ui.componentFactory.add(e,()=>{const o=this._createButton(Ne,e,t,r);return o.set({tooltip:!0}),o}),i.ui.componentFactory.add("menuBar:"+e,()=>this._createButton(un,e,t,r))}_createButton(e,t,r,i){const o=this.editor,s=o.commands.get(t),a=new e(o.locale);return a.set({label:r,icon:i}),a.bind("isEnabled").to(s,"isEnabled"),this.listenTo(a,"execute",()=>{o.execute(t),o.editing.view.focus()}),a}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class s0e extends W{static get pluginName(){return"Indent"}static get requires(){return[i0e,o0e]}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class a0e{constructor(){this._definitions=new Set}get length(){return this._definitions.size}add(e){Array.isArray(e)?e.forEach(t=>this._definitions.add(t)):this._definitions.add(e)}getDispatcher(){return e=>{e.on("attribute:linkHref",(t,r,i)=>{if(!i.consumable.test(r.item,"attribute:linkHref")||!(r.item.is("selection")||i.schema.isInline(r.item)))return;const o=i.writer,s=o.document.selection;for(const a of this._definitions){const l=o.createAttributeElement("a",a.attributes,{priority:5});a.classes&&o.addClass(a.classes,l);for(const c in a.styles)o.setStyle(c,a.styles[c],l);o.setCustomProperty("link",!0,l),a.callback(r.attributeNewValue)?r.item.is("selection")?o.wrap(s.getFirstRange(),l):o.wrap(i.mapper.toViewRange(r.range),l):o.unwrap(i.mapper.toViewRange(r.range),l)}},{priority:"high"})}}getDispatcherForLinkedImage(){return e=>{e.on("attribute:linkHref:imageBlock",(t,r,{writer:i,mapper:o})=>{const s=o.toViewElement(r.item),a=Array.from(s.getChildren()).find(l=>l.is("element","a"));for(const l of this._definitions){const c=to(l.attributes);if(l.callback(r.attributeNewValue)){for(const[u,d]of c)u==="class"?i.addClass(d,a):i.setAttribute(u,d,a);l.classes&&i.addClass(l.classes,a);for(const u in l.styles)i.setStyle(u,l.styles[u],a)}else{for(const[u,d]of c)u==="class"?i.removeClass(d,a):i.removeAttribute(u,a);l.classes&&i.removeClass(l.classes,a);for(const u in l.styles)i.removeStyle(u,a)}}})}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const l0e=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,c0e="^(?:(?:<protocols>):|[^a-z]|[a-z+.-]+(?:[^a-z+.:-]|$))",u0e=/^[\S]+@((?![-_])(?:[-\w\u00a1-\uffff]{0,63}[^-_]\.))+(?:[a-z\u00a1-\uffff]{2,})$/i,d0e=/^((\w+:(\/{2,})?)|(\W))/i,f0e=["https?","ftps?","mailto"],_f="Ctrl+K";function h0e(n){return n.is("attributeElement")&&!!n.getCustomProperty("link")}function QE(n,{writer:e}){const t=e.createAttributeElement("a",{href:n},{priority:5});return e.setCustomProperty("link",!0,t),t}function Y5(n,e=f0e){const t=String(n),r=e.join("|"),i=new RegExp(`${c0e.replace("<protocols>",r)}`,"i");return m0e(t,i)?t:"#"}function m0e(n,e){return!!n.replace(l0e,"").match(e)}function g0e(n,e){const t={"Open in a new tab":n("Open in a new tab"),Downloadable:n("Downloadable")};return e.forEach(r=>("label"in r&&t[r.label]&&(r.label=t[r.label]),r)),e}function p0e(n){const e=[];if(n)for(const[t,r]of Object.entries(n)){const i=Object.assign({},r,{id:`link${QL(t)}`});e.push(i)}return e}function Ny(n,e){return n?e.checkAttribute(n.name,"linkHref"):!1}function v0e(n){return u0e.test(n)}function n_(n,e){const t=v0e(n)?"mailto:":e,r=!!t&&!X5(n);return n&&r?t+n:n}function X5(n){return d0e.test(n)}function ek(n){window.open(n,"_blank","noopener")}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class b0e extends Me{constructor(){super(...arguments),this.manualDecorators=new Vn,this.automaticDecorators=new a0e}restoreManualDecoratorStates(){for(const e of this.manualDecorators)e.value=this._getDecoratorStateFromModel(e.id)}refresh(){const e=this.editor.model,t=e.document.selection,r=t.getSelectedElement()||ln(t.getSelectedBlocks());Ny(r,e.schema)?(this.value=r.getAttribute("linkHref"),this.isEnabled=e.schema.checkAttribute(r,"linkHref")):(this.value=t.getAttribute("linkHref"),this.isEnabled=e.schema.checkAttributeInSelection(t,"linkHref"));for(const i of this.manualDecorators)i.value=this._getDecoratorStateFromModel(i.id)}execute(e,t={}){const r=this.editor.model,i=r.document.selection,o=[],s=[];for(const a in t)t[a]?o.push(a):s.push(a);r.change(a=>{if(i.isCollapsed){const l=i.getFirstPosition();if(i.hasAttribute("linkHref")){const c=tk(i);let u=kg(l,"linkHref",i.getAttribute("linkHref"),r);i.getAttribute("linkHref")===c&&(u=this._updateLinkContent(r,a,u,e)),a.setAttribute("linkHref",e,u),o.forEach(d=>{a.setAttribute(d,!0,u)}),s.forEach(d=>{a.removeAttribute(d,u)}),a.setSelection(a.createPositionAfter(u.end.nodeBefore))}else if(e!==""){const c=to(i.getAttributes());c.set("linkHref",e),o.forEach(d=>{c.set(d,!0)});const{end:u}=r.insertContent(a.createText(e,c),l);a.setSelection(u)}["linkHref",...o,...s].forEach(c=>{a.removeSelectionAttribute(c)})}else{const l=r.schema.getValidRanges(i.getRanges(),"linkHref"),c=[];for(const d of i.getSelectedBlocks())r.schema.checkAttribute(d,"linkHref")&&c.push(a.createRangeOn(d));const u=c.slice();for(const d of l)this._isRangeToUpdate(d,c)&&u.push(d);for(const d of u){let f=d;if(u.length===1){const h=tk(i);i.getAttribute("linkHref")===h&&(f=this._updateLinkContent(r,a,d,e),a.setSelection(a.createSelection(f)))}a.setAttribute("linkHref",e,f),o.forEach(h=>{a.setAttribute(h,!0,f)}),s.forEach(h=>{a.removeAttribute(h,f)})}}})}_getDecoratorStateFromModel(e){const t=this.editor.model,r=t.document.selection,i=r.getSelectedElement();return Ny(i,t.schema)?i.getAttribute(e):r.getAttribute(e)}_isRangeToUpdate(e,t){for(const r of t)if(r.containsRange(e))return!1;return!0}_updateLinkContent(e,t,r,i){const o=t.createText(i,{linkHref:i});return e.insertContent(o,r)}}function tk(n){if(n.isCollapsed){const e=n.getFirstPosition();return e.textNode&&e.textNode.data}else{const e=Array.from(n.getFirstRange().getItems());if(e.length>1)return null;const t=e[0];return t.is("$text")||t.is("$textProxy")?t.data:null}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class y0e extends Me{refresh(){const e=this.editor.model,t=e.document.selection,r=t.getSelectedElement();Ny(r,e.schema)?this.isEnabled=e.schema.checkAttribute(r,"linkHref"):this.isEnabled=e.schema.checkAttributeInSelection(t,"linkHref")}execute(){const e=this.editor,t=this.editor.model,r=t.document.selection,i=e.commands.get("link");t.change(o=>{const s=r.isCollapsed?[kg(r.getFirstPosition(),"linkHref",r.getAttribute("linkHref"),t)]:t.schema.getValidRanges(r.getRanges(),"linkHref");for(const a of s)if(o.removeAttribute("linkHref",a),i)for(const l of i.manualDecorators)o.removeAttribute(l.id,a)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class w0e extends ct(){constructor({id:e,label:t,attributes:r,classes:i,styles:o,defaultValue:s}){super(),this.id=e,this.set("value",void 0),this.defaultValue=s,this.label=t,this.attributes=r,this.classes=i,this.styles=o}_createPattern(){return{attributes:this.attributes,classes:this.classes,styles:this.styles}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const _0e="ck-link_selected",nk="automatic",C0e="manual",S0e=/^(https?:)?\/\//;class Z5 extends W{static get pluginName(){return"LinkEditing"}static get requires(){return[hE,l5,si]}constructor(e){super(e),e.config.define("link",{allowCreatingEmptyLinks:!1,addTargetToExternalLinks:!1})}init(){const e=this.editor,t=this.editor.config.get("link.allowedProtocols");e.model.schema.extend("$text",{allowAttributes:"linkHref"}),e.conversion.for("dataDowncast").attributeToElement({model:"linkHref",view:QE}),e.conversion.for("editingDowncast").attributeToElement({model:"linkHref",view:(o,s)=>QE(Y5(o,t),s)}),e.conversion.for("upcast").elementToAttribute({view:{name:"a",attributes:{href:!0}},model:{key:"linkHref",value:o=>o.getAttribute("href")}}),e.commands.add("link",new b0e(e)),e.commands.add("unlink",new y0e(e));const r=g0e(e.t,p0e(e.config.get("link.decorators")));this._enableAutomaticDecorators(r.filter(o=>o.mode===nk)),this._enableManualDecorators(r.filter(o=>o.mode===C0e)),e.plugins.get(hE).registerAttribute("linkHref"),dve(e,"linkHref","a",_0e),this._enableLinkOpen(),this._enableSelectionAttributesFixer(),this._enableClipboardIntegration()}_enableAutomaticDecorators(e){const t=this.editor,i=t.commands.get("link").automaticDecorators;t.config.get("link.addTargetToExternalLinks")&&i.add({id:"linkIsExternal",mode:nk,callback:o=>!!o&&S0e.test(o),attributes:{target:"_blank",rel:"noopener noreferrer"}}),i.add(e),i.length&&t.conversion.for("downcast").add(i.getDispatcher())}_enableManualDecorators(e){if(!e.length)return;const t=this.editor,i=t.commands.get("link").manualDecorators;e.forEach(o=>{t.model.schema.extend("$text",{allowAttributes:o.id});const s=new w0e(o);i.add(s),t.conversion.for("downcast").attributeToElement({model:s.id,view:(a,{writer:l,schema:c},{item:u})=>{if((u.is("selection")||c.isInline(u))&&a){const d=l.createAttributeElement("a",s.attributes,{priority:5});s.classes&&l.addClass(s.classes,d);for(const f in s.styles)l.setStyle(f,s.styles[f],d);return l.setCustomProperty("link",!0,d),d}}}),t.conversion.for("upcast").elementToAttribute({view:{name:"a",...s._createPattern()},model:{key:s.id}})})}_enableLinkOpen(){const e=this.editor,r=e.editing.view.document;this.listenTo(r,"click",(i,o)=>{if(!(Re.isMac?o.domEvent.metaKey:o.domEvent.ctrlKey))return;let a=o.domTarget;if(a.tagName.toLowerCase()!="a"&&(a=a.closest("a")),!a)return;const l=a.getAttribute("href");l&&(i.stop(),o.preventDefault(),ek(l))},{context:"$capture"}),this.listenTo(r,"keydown",(i,o)=>{const a=e.commands.get("link").value;a&&o.keyCode===qe.enter&&o.altKey&&(i.stop(),ek(a))})}_enableSelectionAttributesFixer(){const t=this.editor.model,r=t.document.selection;this.listenTo(r,"change:attribute",(i,{attributeKeys:o})=>{!o.includes("linkHref")||r.hasAttribute("linkHref")||t.change(s=>{x0e(s,A0e(t.schema))})})}_enableClipboardIntegration(){const e=this.editor,t=e.model,r=this.editor.config.get("link.defaultProtocol");r&&this.listenTo(e.plugins.get("ClipboardPipeline"),"contentInsertion",(i,o)=>{t.change(s=>{const a=s.createRangeIn(o.content);for(const l of a.getItems())if(l.hasAttribute("linkHref")){const c=n_(l.getAttribute("linkHref"),r);s.setAttribute("linkHref",c,l)}})})}}function x0e(n,e){n.removeSelectionAttribute("linkHref");for(const t of e)n.removeSelectionAttribute(t)}function A0e(n){return n.getDefinition("$text").allowAttributes.filter(t=>t.startsWith("link"))}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class T0e extends be{constructor(e,t,r){super(e),this.focusTracker=new Ut,this.keystrokes=new mn,this._focusables=new rr;const i=e.t;this._validators=r,this.urlInputView=this._createUrlInput(),this.saveButtonView=this._createButton(i("Save"),Ee.check,"ck-button-save"),this.saveButtonView.type="submit",this.cancelButtonView=this._createButton(i("Cancel"),Ee.cancel,"ck-button-cancel","cancel"),this._manualDecoratorSwitches=this._createManualDecoratorSwitches(t),this.children=this._createFormChildren(t.manualDecorators),this._focusCycler=new ir({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}});const o=["ck","ck-link-form","ck-responsive-form"];t.manualDecorators.length&&o.push("ck-link-form_layout-vertical","ck-vertical-form"),this.setTemplate({tag:"form",attributes:{class:o,tabindex:"-1"},children:this.children})}getDecoratorSwitchesState(){return Array.from(this._manualDecoratorSwitches).reduce((e,t)=>(e[t.name]=t.isOn,e),{})}render(){super.render(),sd({view:this}),[this.urlInputView,...this._manualDecoratorSwitches,this.saveButtonView,this.cancelButtonView].forEach(t=>{this._focusables.add(t),this.focusTracker.add(t.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}isValid(){this.resetFormStatus();for(const e of this._validators){const t=e(this);if(t)return this.urlInputView.errorText=t,!1}return!0}resetFormStatus(){this.urlInputView.errorText=null}_createUrlInput(){const e=this.locale.t,t=new El(this.locale,hd);return t.label=e("Link URL"),t}_createButton(e,t,r,i){const o=new Ne(this.locale);return o.set({label:e,icon:t,tooltip:!0}),o.extendTemplate({attributes:{class:r}}),i&&o.delegate("execute").to(this,i),o}_createManualDecoratorSwitches(e){const t=this.createCollection();for(const r of e.manualDecorators){const i=new xg(this.locale);i.set({name:r.id,label:r.label,withText:!0}),i.bind("isOn").toMany([r,e],"value",(o,s)=>s===void 0&&o===void 0?!!r.defaultValue:!!o),i.on("execute",()=>{r.set("value",!i.isOn)}),t.add(i)}return t}_createFormChildren(e){const t=this.createCollection();if(t.add(this.urlInputView),e.length){const r=new be;r.setTemplate({tag:"ul",children:this._manualDecoratorSwitches.map(i=>({tag:"li",children:[i],attributes:{class:["ck","ck-list__item"]}})),attributes:{class:["ck","ck-reset","ck-list"]}}),t.add(r)}return t.add(this.saveButtonView),t.add(this.cancelButtonView),t}get url(){const{element:e}=this.urlInputView.fieldView;return e?e.value.trim():null}}const E0e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184zm4.919 10.562-1.414 1.414a.75.75 0 1 1-1.06-1.06l1.414-1.415-1.415-1.414a.75.75 0 0 1 1.061-1.06l1.414 1.414 1.414-1.415a.75.75 0 0 1 1.061 1.061l-1.414 1.414 1.414 1.415a.75.75 0 0 1-1.06 1.06l-1.415-1.414z"/></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class k0e extends be{constructor(e,t={}){super(e),this.focusTracker=new Ut,this.keystrokes=new mn,this._focusables=new rr;const r=e.t;this.previewButtonView=this._createPreviewButton(),this.unlinkButtonView=this._createButton(r("Unlink"),E0e,"unlink"),this.editButtonView=this._createButton(r("Edit link"),Ee.pencil,"edit"),this.set("href",void 0),this._linkConfig=t,this._focusCycler=new ir({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-link-actions","ck-responsive-form"],tabindex:"-1"},children:[this.previewButtonView,this.editButtonView,this.unlinkButtonView]})}render(){super.render(),[this.previewButtonView,this.editButtonView,this.unlinkButtonView].forEach(t=>{this._focusables.add(t),this.focusTracker.add(t.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createButton(e,t,r){const i=new Ne(this.locale);return i.set({label:e,icon:t,tooltip:!0}),i.delegate("execute").to(this,r),i}_createPreviewButton(){const e=new Ne(this.locale),t=this.bindTemplate,r=this.t;return e.set({withText:!0,tooltip:r("Open link in new tab")}),e.extendTemplate({attributes:{class:["ck","ck-link-actions__preview"],href:t.to("href",i=>i&&Y5(i,this._linkConfig.allowedProtocols)),target:"_blank",rel:"noopener noreferrer"}}),e.bind("label").to(this,"href",i=>i||r("This link has no URL")),e.bind("isEnabled").to(this,"href",i=>!!i),e.template.tag="a",e.template.eventListeners={},e}}const P0e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184z"/></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const hi="link-ui";class I0e extends W{constructor(){super(...arguments),this.actionsView=null,this.formView=null}static get requires(){return[Du]}static get pluginName(){return"LinkUI"}init(){const e=this.editor,t=this.editor.t;e.editing.view.addObserver(jfe),this._balloon=e.plugins.get(Du),this._createToolbarLinkButton(),this._enableBalloonActivators(),e.conversion.for("editingDowncast").markerToHighlight({model:hi,view:{classes:["ck-fake-link-selection"]}}),e.conversion.for("editingDowncast").markerToElement({model:hi,view:{name:"span",classes:["ck-fake-link-selection","ck-fake-link-selection_collapsed"]}}),e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Create link"),keystroke:_f},{label:t("Move out of a link"),keystroke:[["arrowleft","arrowleft"],["arrowright","arrowright"]]}]})}destroy(){super.destroy(),this.formView&&this.formView.destroy(),this.actionsView&&this.actionsView.destroy()}_createViews(){this.actionsView=this._createActionsView(),this.formView=this._createFormView(),this._enableUserBalloonInteractions()}_createActionsView(){const e=this.editor,t=new k0e(e.locale,e.config.get("link")),r=e.commands.get("link"),i=e.commands.get("unlink");return t.bind("href").to(r,"value"),t.editButtonView.bind("isEnabled").to(r),t.unlinkButtonView.bind("isEnabled").to(i),this.listenTo(t,"edit",()=>{this._addFormView()}),this.listenTo(t,"unlink",()=>{e.execute("unlink"),this._hideUI()}),t.keystrokes.set("Esc",(o,s)=>{this._hideUI(),s()}),t.keystrokes.set(_f,(o,s)=>{this._addFormView(),s()}),t}_createFormView(){const e=this.editor,t=e.commands.get("link"),r=e.config.get("link.defaultProtocol"),i=new(wg(T0e))(e.locale,t,O0e(e));return i.urlInputView.fieldView.bind("value").to(t,"value"),i.urlInputView.bind("isEnabled").to(t,"isEnabled"),i.saveButtonView.bind("isEnabled").to(t,"isEnabled"),this.listenTo(i,"submit",()=>{if(i.isValid()){const{value:o}=i.urlInputView.fieldView.element,s=n_(o,r);e.execute("link",s,i.getDecoratorSwitchesState()),this._closeFormView()}}),this.listenTo(i.urlInputView,"change:errorText",()=>{e.ui.update()}),this.listenTo(i,"cancel",()=>{this._closeFormView()}),i.keystrokes.set("Esc",(o,s)=>{this._closeFormView(),s()}),i}_createToolbarLinkButton(){const e=this.editor,t=e.commands.get("link");e.ui.componentFactory.add("link",()=>{const r=this._createButton(Ne);return r.set({tooltip:!0,isToggleable:!0}),r.bind("isOn").to(t,"value",i=>!!i),r}),e.ui.componentFactory.add("menuBar:link",()=>this._createButton(un))}_createButton(e){const t=this.editor,r=t.locale,i=t.commands.get("link"),o=new e(t.locale),s=r.t;return o.set({label:s("Link"),icon:P0e,keystroke:_f}),o.bind("isEnabled").to(i,"isEnabled"),this.listenTo(o,"execute",()=>this._showUI(!0)),o}_enableBalloonActivators(){const e=this.editor,t=e.editing.view.document;this.listenTo(t,"click",()=>{this._getSelectedLinkElement()&&this._showUI()}),e.keystrokes.set(_f,(r,i)=>{i(),e.commands.get("link").isEnabled&&this._showUI(!0)})}_enableUserBalloonInteractions(){this.editor.keystrokes.set("Tab",(e,t)=>{this._areActionsVisible&&!this.actionsView.focusTracker.isFocused&&(this.actionsView.focus(),t())},{priority:"high"}),this.editor.keystrokes.set("Esc",(e,t)=>{this._isUIVisible&&(this._hideUI(),t())}),od({emitter:this.formView,activator:()=>this._isUIInPanel,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideUI()})}_addActionsView(){this.actionsView||this._createViews(),!this._areActionsInPanel&&this._balloon.add({view:this.actionsView,position:this._getBalloonPositionData()})}_addFormView(){if(this.formView||this._createViews(),this._isFormInPanel)return;const t=this.editor.commands.get("link");this.formView.disableCssTransitions(),this.formView.resetFormStatus(),this._balloon.add({view:this.formView,position:this._getBalloonPositionData()}),this.formView.urlInputView.fieldView.value=t.value||"",this._balloon.visibleView===this.formView&&this.formView.urlInputView.fieldView.select(),this.formView.enableCssTransitions()}_closeFormView(){const e=this.editor.commands.get("link");e.restoreManualDecoratorStates(),e.value!==void 0?this._removeFormView():this._hideUI()}_removeFormView(){this._isFormInPanel&&(this.formView.saveButtonView.focus(),this.formView.urlInputView.fieldView.reset(),this._balloon.remove(this.formView),this.editor.editing.view.focus(),this._hideFakeVisualSelection())}_showUI(e=!1){this.formView||this._createViews(),this._getSelectedLinkElement()?(this._areActionsVisible?this._addFormView():this._addActionsView(),e&&this._balloon.showStack("main")):(this._showFakeVisualSelection(),this._addActionsView(),e&&this._balloon.showStack("main"),this._addFormView()),this._startUpdatingUI()}_hideUI(){if(!this._isUIInPanel)return;const e=this.editor;this.stopListening(e.ui,"update"),this.stopListening(this._balloon,"change:visibleView"),e.editing.view.focus(),this._removeFormView(),this._balloon.remove(this.actionsView),this._hideFakeVisualSelection()}_startUpdatingUI(){const e=this.editor,t=e.editing.view.document;let r=this._getSelectedLinkElement(),i=s();const o=()=>{const a=this._getSelectedLinkElement(),l=s();r&&!a||!r&&l!==i?this._hideUI():this._isUIVisible&&this._balloon.updatePosition(this._getBalloonPositionData()),r=a,i=l};function s(){return t.selection.focus.getAncestors().reverse().find(a=>a.is("element"))}this.listenTo(e.ui,"update",o),this.listenTo(this._balloon,"change:visibleView",o)}get _isFormInPanel(){return!!this.formView&&this._balloon.hasView(this.formView)}get _areActionsInPanel(){return!!this.actionsView&&this._balloon.hasView(this.actionsView)}get _areActionsVisible(){return!!this.actionsView&&this._balloon.visibleView===this.actionsView}get _isUIInPanel(){return this._isFormInPanel||this._areActionsInPanel}get _isUIVisible(){const e=this._balloon.visibleView;return!!this.formView&&e==this.formView||this._areActionsVisible}_getBalloonPositionData(){const e=this.editor.editing.view,t=this.editor.model,r=e.document;let i;if(t.markers.has(hi)){const o=Array.from(this.editor.editing.mapper.markerNameToElements(hi)),s=e.createRange(e.createPositionBefore(o[0]),e.createPositionAfter(o[o.length-1]));i=e.domConverter.viewRangeToDom(s)}else i=()=>{const o=this._getSelectedLinkElement();return o?e.domConverter.mapViewToDom(o):e.domConverter.viewRangeToDom(r.selection.getFirstRange())};return{target:i}}_getSelectedLinkElement(){const e=this.editor.editing.view,t=e.document.selection,r=t.getSelectedElement();if(t.isCollapsed||r&&$t(r))return mv(t.getFirstPosition());{const i=t.getFirstRange().getTrimmed(),o=mv(i.start),s=mv(i.end);return!o||o!=s?null:e.createRangeIn(o).getTrimmed().isEqual(i)?o:null}}_showFakeVisualSelection(){const e=this.editor.model;e.change(t=>{const r=e.document.selection.getFirstRange();if(e.markers.has(hi))t.updateMarker(hi,{range:r});else if(r.start.isAtEnd){const i=r.start.getLastMatchingPosition(({item:o})=>!e.schema.isContent(o),{boundaries:r});t.addMarker(hi,{usingOperation:!1,affectsData:!1,range:t.createRange(i,r.end)})}else t.addMarker(hi,{usingOperation:!1,affectsData:!1,range:r})})}_hideFakeVisualSelection(){const e=this.editor.model;e.markers.has(hi)&&e.change(t=>{t.removeMarker(hi)})}}function mv(n){return n.getAncestors().find(e=>h0e(e))||null}function O0e(n){const e=n.t,t=n.config.get("link.allowCreatingEmptyLinks");return[r=>{if(!t&&!r.url.length)return e("Link URL must not be empty.")}]}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const R0e=4,J5=new RegExp("(^|\\s)(((?:(?:(?:https?|ftp):)?\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(((?!www\\.)|(www\\.))(?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.)+(?:[a-z\\u00a1-\\uffff]{2,63})))(?::\\d{2,5})?(?:[/?#]\\S*)?)|((www.|(\\S+@))((?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.))+(?:[a-z\\u00a1-\\uffff]{2,63})))$","i"),M0e=2;class D0e extends W{static get requires(){return[Ti,Z5]}static get pluginName(){return"AutoLink"}init(){const t=this.editor.model.document.selection;t.on("change:range",()=>{this.isEnabled=!t.anchor.parent.is("element","codeBlock")}),this._enableTypingHandling()}afterInit(){this._enableEnterHandling(),this._enableShiftEnterHandling(),this._enablePasteLinking()}_expandLinkRange(e,t){return t.textNode&&t.textNode.hasAttribute("linkHref")?kg(t,"linkHref",t.textNode.getAttribute("linkHref"),e):null}_selectEntireLinks(e,t){const i=this.editor.model,o=i.document.selection,s=o.getFirstPosition(),a=o.getLastPosition();let l=t.getJoined(this._expandLinkRange(i,s)||t);l&&(l=l.getJoined(this._expandLinkRange(i,a)||t)),l&&(l.start.isBefore(s)||l.end.isAfter(a))&&e.setSelection(l)}_enablePasteLinking(){const e=this.editor,t=e.model,r=t.document.selection,i=e.plugins.get("ClipboardPipeline"),o=e.commands.get("link");i.on("inputTransformation",(s,a)=>{if(!this.isEnabled||!o.isEnabled||r.isCollapsed||a.method!=="paste"||r.rangeCount>1)return;const l=r.getFirstRange(),c=a.dataTransfer.getData("text/plain");if(!c)return;const u=c.match(J5);u&&u[2]===c&&(t.change(d=>{this._selectEntireLinks(d,l),o.execute(c)}),s.stop())},{priority:"high"})}_enableTypingHandling(){const e=this.editor,t=new d5(e.model,r=>{if(!B0e(r))return;const i=rk(r.substr(0,r.length-1));if(i)return{url:i}});t.on("matched:data",(r,i)=>{const{batch:o,range:s,url:a}=i;if(!o.isTyping)return;const l=s.end.getShiftedBy(-1),c=l.getShiftedBy(-a.length),u=e.model.createRange(c,l);this._applyAutoLink(a,u)}),t.bind("isEnabled").to(this)}_enableEnterHandling(){const e=this.editor,t=e.model,r=e.commands.get("enter");r&&r.on("execute",()=>{const i=t.document.selection.getFirstPosition();if(!i.parent.previousSibling)return;const o=t.createRangeIn(i.parent.previousSibling);this._checkAndApplyAutoLinkOnRange(o)})}_enableShiftEnterHandling(){const e=this.editor,t=e.model,r=e.commands.get("shiftEnter");r&&r.on("execute",()=>{const i=t.document.selection.getFirstPosition(),o=t.createRange(t.createPositionAt(i.parent,0),i.getShiftedBy(-1));this._checkAndApplyAutoLinkOnRange(o)})}_checkAndApplyAutoLinkOnRange(e){const t=this.editor.model,{text:r,range:i}=u5(e,t),o=rk(r);if(o){const s=t.createRange(i.end.getShiftedBy(-o.length),i.end);this._applyAutoLink(o,s)}}_applyAutoLink(e,t){const r=this.editor.model,i=this.editor.config.get("link.defaultProtocol"),o=n_(e,i);!this.isEnabled||!N0e(t,r)||!X5(o)||L0e(t)||this._persistAutoLink(o,t)}_persistAutoLink(e,t){const r=this.editor.model,i=this.editor.plugins.get("Delete");r.enqueueChange(o=>{o.setAttribute("linkHref",e,t),r.enqueueChange(()=>{i.requestUndoOnBackspace()})})}}function B0e(n){return n.length>R0e&&n[n.length-1]===" "&&n[n.length-2]!==" "}function rk(n){const e=J5.exec(n);return e?e[M0e]:null}function N0e(n,e){return e.schema.checkAttributeInSelection(e.createSelection(n),"linkHref")}function L0e(n){const e=n.start.nodeAfter;return!!e&&e.hasAttribute("linkHref")}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class F0e extends W{static get requires(){return[Z5,I0e,D0e]}static get pluginName(){return"Link"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Nr{constructor(e,t){this._startElement=e,this._referenceIndent=e.getAttribute("listIndent"),this._isForward=t.direction=="forward",this._includeSelf=!!t.includeSelf,this._sameAttributes=nt(t.sameAttributes||[]),this._sameIndent=!!t.sameIndent,this._lowerIndent=!!t.lowerIndent,this._higherIndent=!!t.higherIndent}static first(e,t){const i=new this(e,t)[Symbol.iterator]();return ln(i)}*[Symbol.iterator](){const e=[];for(const{node:t}of pd(this._getStartNode(),this._isForward?"forward":"backward")){const r=t.getAttribute("listIndent");if(r<this._referenceIndent){if(!this._lowerIndent)break;this._referenceIndent=r}else if(r>this._referenceIndent){if(!this._higherIndent)continue;if(!this._isForward){e.push(t);continue}}else{if(!this._sameIndent){if(this._higherIndent){e.length&&(yield*e,e.length=0);break}continue}if(this._sameAttributes.some(i=>t.getAttribute(i)!==this._startElement.getAttribute(i)))break}e.length&&(yield*e,e.length=0),yield t}}_getStartNode(){return this._includeSelf?this._startElement:this._isForward?this._startElement.nextSibling:this._startElement.previousSibling}}function*pd(n,e="forward"){const t=e=="forward",r=[];let i=null;for(;nn(n);){let o=null;if(i){const s=n.getAttribute("listIndent"),a=i.getAttribute("listIndent");s>a?r[a]=i:s<a?(o=r[s],r.length=s):o=i}yield{node:n,previous:i,previousNodeInList:o},i=n,n=t?n.nextSibling:n.previousSibling}}class $0e{constructor(e){this._listHead=e}[Symbol.iterator](){return pd(this._listHead,"forward")}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ol{static next(){return Br()}}function nn(n){return!!n&&n.is("element")&&n.hasAttribute("listItemId")}function r_(n,e={}){return[...Ro(n,{...e,direction:"backward"}),...Ro(n,{...e,direction:"forward"})]}function Ro(n,e={}){const t=e.direction=="forward",r=Array.from(new Nr(n,{...e,includeSelf:t,sameIndent:!0,sameAttributes:"listItemId"}));return t?r:r.reverse()}function V0e(n){return Array.from(new Nr(n,{direction:"forward",higherIndent:!0}))}function Q5(n,e){const t=new Nr(n,{sameIndent:!0,sameAttributes:"listType",...e}),r=new Nr(n,{sameIndent:!0,sameAttributes:"listType",includeSelf:!0,direction:"forward",...e});return[...Array.from(t).reverse(),...r]}function Ts(n){return!Nr.first(n,{sameIndent:!0,sameAttributes:"listItemId"})}function ik(n){return!Nr.first(n,{direction:"forward",sameIndent:!0,sameAttributes:"listItemId"})}function vd(n,e={}){n=nt(n);const t=e.withNested!==!1,r=new Set;for(const i of n)for(const o of r_(i,{higherIndent:t}))r.add(o);return Fs(r)}function z0e(n){n=nt(n);const e=new Set;for(const t of n)for(const r of Q5(t))e.add(r);return Fs(e)}function i_(n,e){const t=Ro(n,{direction:"forward"}),r=ol.next();for(const i of t)e.setAttribute("listItemId",r,i);return t}function Ly(n,e,t){const r={};for(const[o,s]of e.getAttributes())o.startsWith("list")&&(r[o]=s);const i=Ro(n,{direction:"forward"});for(const o of i)t.setAttributes(r,o);return i}function Fy(n,e,{expand:t,indentBy:r=1}={}){n=nt(n);const i=t?vd(n):n;for(const o of i){const s=o.getAttribute("listIndent")+r;s<0?Og(o,e):e.setAttribute("listIndent",s,o)}return i}function j0e(n,e){n=nt(n);const t=vd(n),r=new Set,i=Math.min(...t.map(s=>s.getAttribute("listIndent"))),o=new Map;for(const s of t)o.set(s,Nr.first(s,{lowerIndent:!0}));for(const s of t){if(r.has(s))continue;r.add(s);const a=s.getAttribute("listIndent")-1;if(a<0){Og(s,e);continue}if(s.getAttribute("listIndent")==i){const l=U0e(s,o.get(s),e);for(const c of l)r.add(c);if(l.length)continue}e.setAttribute("listIndent",a,s)}return Fs(r)}function Og(n,e){n=nt(n);for(const t of n)t.is("element","listItem")&&e.rename(t,"paragraph");for(const t of n)for(const r of t.getAttributeKeys())r.startsWith("list")&&e.removeAttribute(r,t);return n}function $u(n){if(!n.length)return!1;const e=n[0].getAttribute("listItemId");return e?!n.some(t=>t.getAttribute("listItemId")!=e):!1}function W0e(n,e){const t=[];let r=Number.POSITIVE_INFINITY;for(const{node:i}of pd(n.nextSibling,"forward")){const o=i.getAttribute("listIndent");if(o==0)break;o<r&&(r=o);const s=o-r;e.setAttribute("listIndent",s,i),t.push(i)}return t}function Fs(n){return Array.from(n).filter(e=>e.root.rootName!=="$graveyard").sort((e,t)=>e.index-t.index)}function Vu(n){const e=n.document.selection.getSelectedElement();return e&&n.schema.isObject(e)&&n.schema.isBlock(e)?e:null}function gv(n,e){return e.checkChild(n.parent,"listItem")&&e.checkChild(n,"$text")&&!e.isObject(n)}function H0e(n){return n=="numbered"||n=="customNumbered"}function U0e(n,e,t){return Ro(e,{direction:"forward"}).pop().index>n.index?Ly(n,e,t):[]}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ok extends Me{constructor(e,t){super(e),this._direction=t}refresh(){this.isEnabled=this._checkEnabled()}execute(){const e=this.editor.model,t=sk(e.document.selection);e.change(r=>{const i=[];$u(t)&&!Ts(t[0])?(this._direction=="forward"&&i.push(...Fy(t,r)),i.push(...i_(t[0],r))):this._direction=="forward"?i.push(...Fy(t,r,{expand:!0})):i.push(...j0e(t,r));for(const o of i){if(!o.hasAttribute("listType"))continue;const s=Nr.first(o,{sameIndent:!0});s&&r.setAttribute("listType",s.getAttribute("listType"),o)}this._fireAfterExecute(i)})}_fireAfterExecute(e){this.fire("afterExecute",Fs(new Set(e)))}_checkEnabled(){let e=sk(this.editor.model.document.selection),t=e[0];if(!t)return!1;if(this._direction=="backward"||$u(e)&&!Ts(e[0]))return!0;e=vd(e),t=e[0];const r=Nr.first(t,{sameIndent:!0});return r?r.getAttribute("listType")==t.getAttribute("listType"):!1}}function sk(n){const e=Array.from(n.getSelectedBlocks()),t=e.findIndex(r=>!nn(r));return t!=-1&&(e.length=t),e}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Cf extends Me{constructor(e,t,r={}){super(e),this.type=t,this._listWalkerOptions=r.multiLevel?{higherIndent:!0,lowerIndent:!0,sameAttributes:[]}:void 0}refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(e={}){const t=this.editor.model,r=t.document,i=Vu(t),o=Array.from(r.selection.getSelectedBlocks()).filter(a=>t.schema.checkAttribute(a,"listType")||gv(a,t.schema)),s=e.forceValue!==void 0?!e.forceValue:this.value;t.change(a=>{if(s){const l=o[o.length-1],c=Ro(l,{direction:"forward"}),u=[];c.length>1&&u.push(...i_(c[1],a)),u.push(...Og(o,a)),u.push(...W0e(l,a)),this._fireAfterExecute(u)}else if((i||r.selection.isCollapsed)&&nn(o[0])){const l=Q5(i||o[0],this._listWalkerOptions);for(const c of l)a.setAttributes({...e.additionalAttributes,listType:this.type},c);this._fireAfterExecute(l)}else{const l=[];for(const c of o)if(!c.hasAttribute("listType"))!c.is("element","listItem")&&gv(c,t.schema)&&a.rename(c,"listItem"),a.setAttributes({...e.additionalAttributes,listIndent:0,listItemId:ol.next(),listType:this.type},c),l.push(c);else for(const u of vd(c,{withNested:!1}))u.getAttribute("listType")!=this.type&&(a.setAttributes({...e.additionalAttributes,listType:this.type},u),l.push(u));this._fireAfterExecute(l)}})}_fireAfterExecute(e){this.fire("afterExecute",Fs(new Set(e)))}_getValue(){const e=this.editor.model.document.selection,t=Array.from(e.getSelectedBlocks());if(!t.length)return!1;for(const r of t)if(r.getAttribute("listType")!=this.type)return!1;return!0}_checkEnabled(){const e=this.editor.model,t=e.schema,r=e.document.selection,i=Array.from(r.getSelectedBlocks());if(!i.length)return!1;if(this.value)return!0;for(const o of i)if(t.checkAttribute(o,"listType")||gv(o,t))return!0;return!1}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ak extends Me{constructor(e,t){super(e),this._direction=t}refresh(){this.isEnabled=this._checkEnabled()}execute({shouldMergeOnBlocksContentLevel:e=!1}={}){const t=this.editor.model,r=t.document.selection,i=[];t.change(o=>{const{firstElement:s,lastElement:a}=this._getMergeSubjectElements(r,e),l=s.getAttribute("listIndent")||0,c=a.getAttribute("listIndent"),u=a.getAttribute("listItemId");if(l!=c){const d=V0e(a);i.push(...Fy([a,...d],o,{indentBy:l-c,expand:l<c}))}if(e){let d=r;r.isCollapsed&&(d=o.createSelection(o.createRange(o.createPositionAt(s,"end"),o.createPositionAt(a,0)))),t.deleteContent(d,{doNotResetEntireContent:r.isCollapsed});const f=d.getLastPosition().parent,h=f.nextSibling;i.push(f),h&&h!==a&&h.getAttribute("listItemId")==u&&i.push(...Ly(h,f,o))}else i.push(...Ly(a,s,o));this._fireAfterExecute(i)})}_fireAfterExecute(e){this.fire("afterExecute",Fs(new Set(e)))}_checkEnabled(){const e=this.editor.model,t=e.document.selection,r=Vu(e);if(t.isCollapsed||r){const i=r||t.getFirstPosition().parent;if(!nn(i))return!1;const o=this._direction=="backward"?i.previousSibling:i.nextSibling;if(!o||$u([i,o]))return!1}else{const i=t.getLastPosition(),o=t.getFirstPosition();if(i.parent===o.parent||!nn(i.parent))return!1}return!0}_getMergeSubjectElements(e,t){const r=this.editor.model,i=Vu(r);let o,s;if(e.isCollapsed||i){const a=i||e.getFirstPosition().parent,l=Ts(a);this._direction=="backward"?(s=a,l&&!t?o=Nr.first(a,{sameIndent:!0,lowerIndent:!0}):o=a.previousSibling):(o=a,s=a.nextSibling)}else o=e.getFirstPosition().parent,s=e.getLastPosition().parent;return{firstElement:o,lastElement:s}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class lk extends Me{constructor(e,t){super(e),this._direction=t}refresh(){this.isEnabled=this._checkEnabled()}execute(){this.editor.model.change(t=>{const r=i_(this._getStartBlock(),t);this._fireAfterExecute(r)})}_fireAfterExecute(e){this.fire("afterExecute",Fs(new Set(e)))}_checkEnabled(){const e=this.editor.model.document.selection,t=this._getStartBlock();return e.isCollapsed&&nn(t)&&!Ts(t)}_getStartBlock(){const t=this.editor.model.document.selection.getFirstPosition().parent;return this._direction=="before"?t:t.nextSibling}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class G0e extends W{static get pluginName(){return"ListUtils"}expandListBlocksToCompleteList(e){return z0e(e)}isFirstBlockOfListItem(e){return Ts(e)}isListItemBlock(e){return nn(e)}expandListBlocksToCompleteItems(e,t={}){return vd(e,t)}isNumberedListType(e){return H0e(e)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function eB(n){return n.is("element","ol")||n.is("element","ul")}function dm(n){return n.is("element","li")}function q0e(n){let e=0,t=n.parent;for(;t;){if(dm(t))e++;else{const r=t.previousSibling;r&&dm(r)&&e++}t=t.parent}return e}function K0e(n,e,t,r=nB(t,e)){return n.createAttributeElement(tB(t),null,{priority:2*e/100-100,id:r})}function Y0e(n,e,t){return n.createAttributeElement("li",null,{priority:(2*e+1)/100-100,id:t})}function tB(n){return n=="numbered"||n=="customNumbered"?"ol":"ul"}function nB(n,e){return`list-${n}-${e}`}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Yr(n,e){const t=n.nodeBefore;if(nn(t)){let r=t;for(const{node:i}of pd(r,"backward"))if(r=i,e.has(r))return;e.set(t,r)}else{const r=n.nodeAfter;nn(r)&&e.set(r,r)}}function X0e(n,e){let t=0,r=-1,i=null,o=!1;for(const{node:s}of n){const a=s.getAttribute("listIndent");if(a>t){let l;i===null?(i=a-t,l=t):(i>a&&(i=a),l=a-i),l>r+1&&(l=r+1),e.setAttribute("listIndent",l,s),o=!0,r=l}else i=null,t=a+1,r=a}return o}function Z0e(n,e,t){const r=new Set;let i=!1;for(const{node:o}of n){if(r.has(o))continue;let s=o.getAttribute("listType"),a=o.getAttribute("listItemId");if(e.has(a)&&(a=ol.next()),e.add(a),o.is("element","listItem")){o.getAttribute("listItemId")!=a&&(t.setAttribute("listItemId",a,o),i=!0);continue}for(const l of Ro(o,{direction:"forward"}))r.add(l),l.getAttribute("listType")!=s&&(a=ol.next(),s=l.getAttribute("listType")),l.getAttribute("listItemId")!=a&&(t.setAttribute("listItemId",a,l),i=!0)}return i}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function J0e(){return(n,e,t)=>{const{writer:r,schema:i}=t;if(!e.modelRange)return;const o=Array.from(e.modelRange.getItems({shallow:!0})).filter(d=>i.checkAttribute(d,"listItemId"));if(!o.length)return;const s=ol.next(),a=q0e(e.viewItem);let l=e.viewItem.parent&&e.viewItem.parent.is("element","ol")?"numbered":"bulleted";const c=o[0].getAttribute("listType");c&&(l=c);const u={listItemId:s,listIndent:a,listType:l};for(const d of o)d.hasAttribute("listItemId")||r.setAttributes(u,d);o.length>1&&o[1].getAttribute("listItemId")!=u.listItemId&&t.keepEmptyElement(o[0])}}function ck(){return(n,e,t)=>{if(!t.consumable.test(e.viewItem,{name:!0}))return;const r=new ad(e.viewItem.document);for(const i of Array.from(e.viewItem.getChildren()))!dm(i)&&!eB(i)&&r.remove(i)}}function Q0e(n,e,t,r){return()=>{const a=n.document.differ.getChanges(),l=[],c=new Map,u=new Set;for(const d of a)if(d.type=="insert"&&d.name!="$text")Yr(d.position,c),d.attributes.has("listItemId")?u.add(d.position.nodeAfter):Yr(d.position.getShiftedBy(d.length),c);else if(d.type=="remove"&&d.attributes.has("listItemId"))Yr(d.position,c);else if(d.type=="attribute"){const f=d.range.start.nodeAfter;t.includes(d.attributeKey)?(Yr(d.range.start,c),d.attributeNewValue===null?(Yr(d.range.start.getShiftedBy(1),c),o(f)&&l.push(f)):u.add(f)):nn(f)&&o(f)&&l.push(f)}for(const d of c.values())l.push(...i(d,u));for(const d of new Set(l))e.reconvertItem(d)};function i(a,l){const c=[],u=new Set,d=[];for(const{node:f,previous:h}of pd(a,"forward")){if(u.has(f))continue;const m=f.getAttribute("listIndent");h&&m<h.getAttribute("listIndent")&&(d.length=m+1),d[m]=Object.fromEntries(Array.from(f.getAttributes()).filter(([p])=>t.includes(p)));const g=Ro(f,{direction:"forward"});for(const p of g)u.add(p),(o(p,g)||s(p,d,l))&&c.push(p)}return c}function o(a,l){const c=e.mapper.toViewElement(a);if(!c)return!1;if(r.fire("checkElement",{modelElement:a,viewElement:c}))return!0;if(!a.is("element","paragraph")&&!a.is("element","listItem"))return!1;const d=iB(a,t,l);return d&&c.is("element","p")?!0:!!(!d&&c.is("element","span"))}function s(a,l,c){if(c.has(a))return!1;const u=e.mapper.toViewElement(a);let d=l.length-1;for(let f=u.parent;!f.is("editableElement");f=f.parent){const h=dm(f),m=eB(f);if(!m&&!h)continue;const g=`checkAttributes:${h?"item":"list"}`;if(r.fire(g,{viewElement:f,modelAttributes:l[d]}))break;if(m&&(d--,d<0))return!1}return!0}}function uk(n,e,t,{dataPipeline:r}={}){const i=s_e(n);return(o,s,a)=>{const{writer:l,mapper:c,consumable:u}=a,d=s.item;if(!n.includes(s.attributeKey)||!i(d,u))return;const f=t_e(d,c,t);rB(f,l,c),i_e(f,l);const h=r_e(d,f,e,l,{dataPipeline:r});o_e(d,h,e,l)}}function e_e(n){return(e,t,r)=>{const{writer:i,mapper:o}=r,s=e.name.split(":")[1];if(!n.checkAttribute(s,"listItemId"))return;const a=o.toViewPosition(t.position),l=t.position.getShiftedBy(t.length),c=o.toViewPosition(l,{isPhantom:!0}),d=i.createRange(a,c).getTrimmed().end.nodeBefore;/* istanbul ignore next -- @preserve */d&&rB(d,i,o)}}function dk(n,{dataPipeline:e}={}){return(t,{writer:r})=>{if(!iB(t,n))return null;if(!e)return r.createContainerElement("span",{class:"ck-list-bogus-paragraph"});const i=r.createContainerElement("p");return r.setCustomProperty("dataPipeline:transparentRendering",!0,i),i}}function t_e(n,e,t){const r=t.createRangeOn(n);return e.toViewRange(r).getTrimmed().end.nodeBefore}function n_e(n,e){return(t,r)=>{if(r.modelPosition.offset>0)return;const i=r.modelPosition.parent;if(!nn(i)||!n.some(c=>c.scope=="itemMarker"&&c.canInjectMarkerIntoElement&&c.canInjectMarkerIntoElement(i)))return;const o=r.mapper.toViewElement(i),s=e.createRangeIn(o),a=s.getWalker();let l=s.start;for(const{item:c}of a){if(c.is("element")&&r.mapper.toModelElement(c)||c.is("$textProxy"))break;c.is("element")&&c.getCustomProperty("listItemMarker")&&(l=e.createPositionAfter(c),a.skip(({previousPosition:u})=>!u.isEqual(l)))}r.viewPosition=l}}function rB(n,e,t){for(;n.parent.is("attributeElement")&&n.parent.getCustomProperty("listItemWrapper");)e.unwrap(e.createRangeOn(n),n.parent);const r=[];i(e.createPositionBefore(n).getWalker({direction:"backward"})),i(e.createRangeIn(n).getWalker());for(const o of r)e.remove(o);function i(o){for(const{item:s}of o){if(s.is("element")&&t.toModelElement(s))break;s.is("element")&&s.getCustomProperty("listItemMarker")&&r.push(s)}}}function r_e(n,e,t,r,{dataPipeline:i}){let o=r.createRangeOn(e);if(!Ts(n))return o;for(const s of t){if(s.scope!="itemMarker")continue;const a=s.createElement(r,n,{dataPipeline:i});if(!a||(r.setCustomProperty("listItemMarker",!0,a),s.canInjectMarkerIntoElement&&s.canInjectMarkerIntoElement(n)?r.insert(r.createPositionAt(e,0),a):(r.insert(o.start,a),o=r.createRange(r.createPositionBefore(a),r.createPositionAfter(e))),!s.createWrapperElement||!s.canWrapElement))continue;const l=s.createWrapperElement(r,n,{dataPipeline:i});r.setCustomProperty("listItemWrapper",!0,l),s.canWrapElement(n)?o=r.wrap(o,l):(o=r.wrap(r.createRangeOn(a),l),o=r.createRange(o.start,r.createPositionAfter(e)))}return o}function i_e(n,e){let t=n.parent;for(;t.is("attributeElement")&&["ul","ol","li"].includes(t.name);){const r=t.parent;e.unwrap(e.createRangeOn(n),t),t=r}}function o_e(n,e,t,r){if(!n.hasAttribute("listIndent"))return;const i=n.getAttribute("listIndent");let o=n;for(let s=i;s>=0;s--){const a=Y0e(r,s,o.getAttribute("listItemId")),l=K0e(r,s,o.getAttribute("listType"));for(const c of t)(c.scope=="list"||c.scope=="item")&&o.hasAttribute(c.attributeName)&&c.setAttributeOnDowncast(r,o.getAttribute(c.attributeName),c.scope=="list"?l:a);if(e=r.wrap(e,a),e=r.wrap(e,l),s==0||(o=Nr.first(o,{lowerIndent:!0}),!o))break}}function s_e(n){return(e,t)=>{const r=[];for(const i of n)e.hasAttribute(i)&&r.push(`attribute:${i}`);return r.every(i=>t.test(e,i)!==!1)?(r.forEach(i=>t.consume(e,i)),!0):!1}}function iB(n,e,t=r_(n)){if(!nn(n))return!1;for(const r of n.getAttributeKeys())if(!r.startsWith("selection:")&&!e.includes(r))return!1;return t.length<2}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Ff=["listType","listIndent","listItemId"];class a_e extends W{static get pluginName(){return"ListEditing"}static get requires(){return[md,Ti,G0e,si]}constructor(e){super(e),this._downcastStrategies=[],e.config.define("list.multiBlock",!0)}init(){const e=this.editor,t=e.model,r=e.config.get("list.multiBlock");if(e.plugins.has("LegacyListEditing"))throw new M("list-feature-conflict",this,{conflictPlugin:"LegacyListEditing"});t.schema.register("$listItem",{allowAttributes:Ff}),r?(t.schema.extend("$container",{allowAttributesOf:"$listItem"}),t.schema.extend("$block",{allowAttributesOf:"$listItem"}),t.schema.extend("$blockObject",{allowAttributesOf:"$listItem"})):t.schema.register("listItem",{inheritAllFrom:"$block",allowAttributesOf:"$listItem"});for(const i of Ff)t.schema.setAttributeProperties(i,{copyOnReplace:!0});e.commands.add("numberedList",new Cf(e,"numbered")),e.commands.add("bulletedList",new Cf(e,"bulleted")),e.commands.add("customNumberedList",new Cf(e,"customNumbered",{multiLevel:!0})),e.commands.add("customBulletedList",new Cf(e,"customBulleted",{multiLevel:!0})),e.commands.add("indentList",new ok(e,"forward")),e.commands.add("outdentList",new ok(e,"backward")),e.commands.add("splitListItemBefore",new lk(e,"before")),e.commands.add("splitListItemAfter",new lk(e,"after")),r&&(e.commands.add("mergeListItemBackward",new ak(e,"backward")),e.commands.add("mergeListItemForward",new ak(e,"forward"))),this._setupDeleteIntegration(),this._setupEnterIntegration(),this._setupTabIntegration(),this._setupClipboardIntegration(),this._setupAccessibilityIntegration()}afterInit(){const t=this.editor.commands,r=t.get("indent"),i=t.get("outdent");r&&r.registerChildCommand(t.get("indentList"),{priority:"high"}),i&&i.registerChildCommand(t.get("outdentList"),{priority:"lowest"}),this._setupModelPostFixing(),this._setupConversion()}registerDowncastStrategy(e){this._downcastStrategies.push(e)}getListAttributeNames(){return[...Ff,...this._downcastStrategies.map(e=>e.attributeName)]}_setupDeleteIntegration(){const e=this.editor,t=e.commands.get("mergeListItemBackward"),r=e.commands.get("mergeListItemForward");this.listenTo(e.editing.view.document,"delete",(i,o)=>{const s=e.model.document.selection;Vu(e.model)||e.model.change(()=>{const a=s.getFirstPosition();if(s.isCollapsed&&o.direction=="backward"){if(!a.isAtStart)return;const l=a.parent;if(!nn(l))return;if(!Nr.first(l,{sameAttributes:"listType",sameIndent:!0})&&l.getAttribute("listIndent")===0)ik(l)||e.execute("splitListItemAfter"),e.execute("outdentList");else{if(!t||!t.isEnabled)return;t.execute({shouldMergeOnBlocksContentLevel:fk(e.model,"backward")})}o.preventDefault(),i.stop()}else{if(s.isCollapsed&&!s.getLastPosition().isAtEnd||!r||!r.isEnabled)return;r.execute({shouldMergeOnBlocksContentLevel:fk(e.model,"forward")}),o.preventDefault(),i.stop()}})},{context:"li"})}_setupEnterIntegration(){const e=this.editor,t=e.model,r=e.commands,i=r.get("enter");this.listenTo(e.editing.view.document,"enter",(o,s)=>{const a=t.document,l=a.selection.getFirstPosition().parent;if(a.selection.isCollapsed&&nn(l)&&l.isEmpty&&!s.isSoft){const c=Ts(l),u=ik(l);c&&u?(e.execute("outdentList"),s.preventDefault(),o.stop()):c&&!u?(e.execute("splitListItemAfter"),s.preventDefault(),o.stop()):u&&(e.execute("splitListItemBefore"),s.preventDefault(),o.stop())}},{context:"li"}),this.listenTo(i,"afterExecute",()=>{const o=r.get("splitListItemBefore");if(o.refresh(),!o.isEnabled)return;const a=e.model.document.selection.getLastPosition().parent;r_(a).length===2&&o.execute()})}_setupTabIntegration(){const e=this.editor;this.listenTo(e.editing.view.document,"tab",(t,r)=>{const i=r.shiftKey?"outdentList":"indentList";this.editor.commands.get(i).isEnabled&&(e.execute(i),r.stopPropagation(),r.preventDefault(),t.stop())},{context:"li"})}_setupConversion(){const e=this.editor,t=e.model,r=this.getListAttributeNames(),i=e.config.get("list.multiBlock"),o=i?"paragraph":"listItem";e.conversion.for("upcast").elementToElement({view:"li",model:(a,{writer:l})=>l.createElement(o,{listType:""})}).elementToElement({view:"p",model:(a,{writer:l})=>a.parent&&a.parent.is("element","li")?l.createElement(o,{listType:""}):null,converterPriority:"high"}).add(a=>{a.on("element:li",J0e()),a.on("element:ul",ck(),{priority:"high"}),a.on("element:ol",ck(),{priority:"high"})}),i||e.conversion.for("downcast").elementToElement({model:"listItem",view:"p"}),e.conversion.for("editingDowncast").elementToElement({model:o,view:dk(r),converterPriority:"high"}).add(a=>{a.on("attribute",uk(r,this._downcastStrategies,t)),a.on("remove",e_e(t.schema))}),e.conversion.for("dataDowncast").elementToElement({model:o,view:dk(r,{dataPipeline:!0}),converterPriority:"high"}).add(a=>{a.on("attribute",uk(r,this._downcastStrategies,t,{dataPipeline:!0}))});const s=n_e(this._downcastStrategies,e.editing.view);e.editing.mapper.on("modelToViewPosition",s),e.data.mapper.on("modelToViewPosition",s),this.listenTo(t.document,"change:data",Q0e(t,e.editing,r,this),{priority:"high"}),this.on("checkAttributes:item",(a,{viewElement:l,modelAttributes:c})=>{l.id!=c.listItemId&&(a.return=!0,a.stop())}),this.on("checkAttributes:list",(a,{viewElement:l,modelAttributes:c})=>{(l.name!=tB(c.listType)||l.id!=nB(c.listType,c.listIndent))&&(a.return=!0,a.stop())})}_setupModelPostFixing(){const e=this.editor.model,t=this.getListAttributeNames();e.document.registerPostFixer(r=>l_e(e,r,t,this)),this.on("postFixer",(r,{listNodes:i,writer:o})=>{r.return=X0e(i,o)||r.return},{priority:"high"}),this.on("postFixer",(r,{listNodes:i,writer:o,seenIds:s})=>{r.return=Z0e(i,s,o)||r.return},{priority:"high"})}_setupClipboardIntegration(){const e=this.editor.model,t=this.editor.plugins.get("ClipboardPipeline");this.listenTo(e,"insertContent",c_e(e),{priority:"high"}),this.listenTo(t,"outputTransformation",(r,i)=>{e.change(o=>{const s=Array.from(i.content.getChildren()),a=s[s.length-1];if(s.length>1&&a.is("element")&&a.isEmpty&&s.slice(0,-1).every(nn)&&o.remove(a),i.method=="copy"||i.method=="cut"){const l=Array.from(i.content.getChildren());$u(l)&&Og(l,o)}})})}_setupAccessibilityIntegration(){const e=this.editor,t=e.t;e.accessibility.addKeystrokeInfoGroup({id:"list",label:t("Keystrokes that can be used in a list"),keystrokes:[{label:t("Increase list item indent"),keystroke:"Tab"},{label:t("Decrease list item indent"),keystroke:"Shift+Tab"}]})}}function l_e(n,e,t,r){const i=n.document.differ.getChanges(),o=new Map,s=r.editor.config.get("list.multiBlock");let a=!1;for(const c of i){if(c.type=="insert"&&c.name!="$text"){const u=c.position.nodeAfter;if(!n.schema.checkAttribute(u,"listItemId"))for(const d of Array.from(u.getAttributeKeys()))t.includes(d)&&(e.removeAttribute(d,u),a=!0);Yr(c.position,o),c.attributes.has("listItemId")||Yr(c.position.getShiftedBy(c.length),o);for(const{item:d,previousPosition:f}of n.createRangeIn(u))nn(d)&&Yr(f,o)}else c.type=="remove"?Yr(c.position,o):c.type=="attribute"&&t.includes(c.attributeKey)&&(Yr(c.range.start,o),c.attributeNewValue===null&&Yr(c.range.start.getShiftedBy(1),o));if(!s&&c.type=="attribute"&&Ff.includes(c.attributeKey)){const u=c.range.start.nodeAfter;c.attributeNewValue===null&&u&&u.is("element","listItem")?(e.rename(u,"paragraph"),a=!0):c.attributeOldValue===null&&u&&u.is("element")&&u.name!="listItem"&&(e.rename(u,"listItem"),a=!0)}}const l=new Set;for(const c of o.values())a=r.fire("postFixer",{listNodes:new $0e(c),listHead:c,writer:e,seenIds:l})||a;return a}function c_e(n){return(e,[t,r])=>{const i=t.is("documentFragment")?Array.from(t.getChildren()):[t];if(!i.length)return;const s=(r?n.createSelection(r):n.document.selection).getFirstPosition();let a;if(nn(s.parent))a=s.parent;else if(nn(s.nodeBefore))a=s.nodeBefore;else return;n.change(l=>{const c=a.getAttribute("listType"),u=a.getAttribute("listIndent"),d=i[0].getAttribute("listIndent")||0,f=Math.max(u-d,0);for(const h of i){const m=nn(h);a.is("element","listItem")&&h.is("element","paragraph")&&l.rename(h,"listItem"),l.setAttributes({listIndent:(m?h.getAttribute("listIndent"):0)+f,listItemId:m?h.getAttribute("listItemId"):ol.next(),listType:c},h)}})}}function fk(n,e){const t=n.document.selection;if(!t.isCollapsed)return!Vu(n);if(e==="forward")return!0;const i=t.getFirstPosition().parent,o=i.previousSibling;return n.schema.isObject(o)?!1:o.isEmpty?!0:$u([i,o])}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function hk(n,e,t,r){n.ui.componentFactory.add(e,()=>{const i=mk(Ne,n,e,t,r);return i.set({tooltip:!0,isToggleable:!0}),i}),n.ui.componentFactory.add(`menuBar:${e}`,()=>mk(un,n,e,t,r))}function mk(n,e,t,r,i){const o=e.commands.get(t),s=new n(e.locale);return s.set({label:r,icon:i}),s.bind("isOn","isEnabled").to(o,"value","isEnabled"),s.on("execute",()=>{e.execute(t),e.editing.view.focus()}),s}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class u_e extends W{static get pluginName(){return"ListUI"}init(){const e=this.editor.t;this.editor.ui.componentFactory.has("numberedList")||hk(this.editor,"numberedList",e("Numbered List"),Ee.numberedList),this.editor.ui.componentFactory.has("bulletedList")||hk(this.editor,"bulletedList",e("Bulleted List"),Ee.bulletedList)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let d_e=class extends W{static get requires(){return[a_e,u_e]}static get pluginName(){return"List"}};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const f_e=[{listStyle:"disc",typeAttribute:"disc",listType:"bulleted"},{listStyle:"circle",typeAttribute:"circle",listType:"bulleted"},{listStyle:"square",typeAttribute:"square",listType:"bulleted"},{listStyle:"decimal",typeAttribute:"1",listType:"numbered"},{listStyle:"decimal-leading-zero",typeAttribute:null,listType:"numbered"},{listStyle:"lower-roman",typeAttribute:"i",listType:"numbered"},{listStyle:"upper-roman",typeAttribute:"I",listType:"numbered"},{listStyle:"lower-alpha",typeAttribute:"a",listType:"numbered"},{listStyle:"upper-alpha",typeAttribute:"A",listType:"numbered"},{listStyle:"lower-latin",typeAttribute:"a",listType:"numbered"},{listStyle:"upper-latin",typeAttribute:"A",listType:"numbered"}];for(const{listStyle:n,typeAttribute:e,listType:t}of f_e);/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */rd("Ctrl+Enter");/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */rd("Ctrl+Enter");/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function gk(n,e){const t=(r,i,o)=>{if(!o.consumable.consume(i.item,r.name))return;const s=i.attributeNewValue,a=o.writer,l=o.mapper.toViewElement(i.item),c=[...l.getChildren()].find(d=>d.getCustomProperty("media-content"));a.remove(c);const u=n.getMediaViewElement(a,s,e);a.insert(a.createPositionAt(l,0),u)};return r=>{r.on("attribute:url:media",t)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function h_e(n,e,t){return e.setCustomProperty("media",!0,n),Pl(n,e,{label:t})}function pk(n,e,t,r){return n.createContainerElement("figure",{class:"media"},[e.getMediaViewElement(n,t,r),n.createSlot()])}function vk(n){const e=n.getSelectedElement();return e&&e.is("element","media")?e:null}function oB(n,e,t,r){n.change(i=>{const o=i.createElement("media",{url:e});n.insertObject(o,t,null,{setSelection:"on",findOptimalPosition:r?"auto":void 0})})}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class m_e extends Me{refresh(){const e=this.editor.model,t=e.document.selection,r=vk(t);this.value=r?r.getAttribute("url"):void 0,this.isEnabled=p_e(t)||g_e(t,e)}execute(e){const t=this.editor.model,r=t.document.selection,i=vk(r);i?t.change(o=>{o.setAttribute("url",e,i)}):oB(t,e,r,!0)}}function g_e(n,e){let r=Y0(n,e).start.parent;return r.isEmpty&&!e.schema.isLimit(r)&&(r=r.parent),e.schema.checkChild(r,"media")}function p_e(n){const e=n.getSelectedElement();return!!e&&e.name==="media"}const v_e='<svg viewBox="0 0 64 42" xmlns="http://www.w3.org/2000/svg"><path d="M47.426 17V3.713L63.102 0v19.389h-.001l.001.272c0 1.595-2.032 3.43-4.538 4.098-2.506.668-4.538-.083-4.538-1.678 0-1.594 2.032-3.43 4.538-4.098.914-.244 2.032-.565 2.888-.603V4.516L49.076 7.447v9.556A1.014 1.014 0 0 0 49 17h-1.574zM29.5 17h-8.343a7.073 7.073 0 1 0-4.657 4.06v3.781H3.3a2.803 2.803 0 0 1-2.8-2.804V8.63a2.803 2.803 0 0 1 2.8-2.805h4.082L8.58 2.768A1.994 1.994 0 0 1 10.435 1.5h8.985c.773 0 1.477.448 1.805 1.149l1.488 3.177H26.7c1.546 0 2.8 1.256 2.8 2.805V17zm-11.637 0H17.5a1 1 0 0 0-1 1v.05A4.244 4.244 0 1 1 17.863 17zm29.684 2c.97 0 .953-.048.953.889v20.743c0 .953.016.905-.953.905H19.453c-.97 0-.953.048-.953-.905V19.89c0-.937-.016-.889.97-.889h28.077zm-4.701 19.338V22.183H24.154v16.155h18.692zM20.6 21.375v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616V37.53H20.6zm24.233-16.155v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615V37.53h-1.615zM29.485 25.283a.4.4 0 0 1 .593-.35l9.05 4.977a.4.4 0 0 1 0 .701l-9.05 4.978a.4.4 0 0 1-.593-.35v-9.956z"/></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const b_e="0 0 64 42";class y_e{constructor(e,t){const r=t.providers,i=t.extraProviders||[],o=new Set(t.removeProviders),s=r.concat(i).filter(a=>{const l=a.name;return l?!o.has(l):(Ye("media-embed-no-provider-name",{provider:a}),!1)});this.locale=e,this.providerDefinitions=s}hasMedia(e){return!!this._getMedia(e)}getMediaViewElement(e,t,r){return this._getMedia(t).getViewElement(e,r)}_getMedia(e){if(!e)return new bk(this.locale);e=e.trim();for(const t of this.providerDefinitions){const r=t.html,i=nt(t.url);for(const o of i){const s=this._getUrlMatches(e,o);if(s)return new bk(this.locale,e,s,r)}}return null}_getUrlMatches(e,t){let r=e.match(t);if(r)return r;let i=e.replace(/^https?:\/\//,"");return r=i.match(t),r||(i=i.replace(/^www\./,""),r=i.match(t),r)?r:null}}class bk{constructor(e,t,r,i){this.url=this._getValidUrl(t),this._locale=e,this._match=r,this._previewRenderer=i}getViewElement(e,t){const r={};let i;if(t.renderForEditingView||t.renderMediaPreview&&this.url&&this._previewRenderer){this.url&&(r["data-oembed-url"]=this.url),t.renderForEditingView&&(r.class="ck-media__wrapper");const o=this._getPreviewHtml(t);i=e.createRawElement("div",r,(s,a)=>{a.setContentOf(s,o)})}else this.url&&(r.url=this.url),i=e.createEmptyElement(t.elementName,r);return e.setCustomProperty("media-content",!0,i),i}_getPreviewHtml(e){return this._previewRenderer?this._previewRenderer(this._match):this.url&&e.renderForEditingView?this._getPlaceholderHtml():""}_getPlaceholderHtml(){const e=new li,t=this._locale.t;return e.content=v_e,e.viewBox=b_e,new Jn({tag:"div",attributes:{class:"ck ck-reset_all ck-media__placeholder"},children:[{tag:"div",attributes:{class:"ck-media__placeholder__icon"},children:[e]},{tag:"a",attributes:{class:"ck-media__placeholder__url",target:"_blank",rel:"noopener noreferrer",href:this.url,"data-cke-tooltip-text":t("Open media in new tab")},children:[{tag:"span",attributes:{class:"ck-media__placeholder__url__text"},children:[this.url]}]}]}).render().outerHTML}_getValidUrl(e){return e?e.match(/^https?/)?e:"https://"+e:null}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class fm extends W{static get pluginName(){return"MediaEmbedEditing"}constructor(e){super(e),e.config.define("mediaEmbed",{elementName:"oembed",providers:[{name:"dailymotion",url:[/^dailymotion\.com\/video\/(\w+)/,/^dai.ly\/(\w+)/],html:t=>`<div style="position: relative; padding-bottom: 100%; height: 0; "><iframe src="https://www.dailymotion.com/embed/video/${t[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" width="480" height="270" allowfullscreen allow="autoplay"></iframe></div>`},{name:"spotify",url:[/^open\.spotify\.com\/(artist\/\w+)/,/^open\.spotify\.com\/(album\/\w+)/,/^open\.spotify\.com\/(track\/\w+)/],html:t=>`<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 126%;"><iframe src="https://open.spotify.com/embed/${t[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" allowtransparency="true" allow="encrypted-media"></iframe></div>`},{name:"youtube",url:[/^(?:m\.)?youtube\.com\/watch\?v=([\w-]+)(?:&t=(\d+))?/,/^(?:m\.)?youtube\.com\/v\/([\w-]+)(?:\?t=(\d+))?/,/^youtube\.com\/embed\/([\w-]+)(?:\?start=(\d+))?/,/^youtu\.be\/([\w-]+)(?:\?t=(\d+))?/],html:t=>{const r=t[1],i=t[2];return`<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;"><iframe src="https://www.youtube.com/embed/${r}${i?`?start=${i}`:""}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div>`}},{name:"vimeo",url:[/^vimeo\.com\/(\d+)/,/^vimeo\.com\/[^/]+\/[^/]+\/video\/(\d+)/,/^vimeo\.com\/album\/[^/]+\/video\/(\d+)/,/^vimeo\.com\/channels\/[^/]+\/(\d+)/,/^vimeo\.com\/groups\/[^/]+\/videos\/(\d+)/,/^vimeo\.com\/ondemand\/[^/]+\/(\d+)/,/^player\.vimeo\.com\/video\/(\d+)/],html:t=>`<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;"><iframe src="https://player.vimeo.com/video/${t[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></div>`},{name:"instagram",url:/^instagram\.com\/p\/(\w+)/},{name:"twitter",url:/^twitter\.com/},{name:"googleMaps",url:[/^google\.com\/maps/,/^goo\.gl\/maps/,/^maps\.google\.com/,/^maps\.app\.goo\.gl/]},{name:"flickr",url:/^flickr\.com/},{name:"facebook",url:/^facebook\.com/}]}),this.registry=new y_e(e.locale,e.config.get("mediaEmbed"))}init(){const e=this.editor,t=e.model.schema,r=e.t,i=e.conversion,o=e.config.get("mediaEmbed.previewsInData"),s=e.config.get("mediaEmbed.elementName"),a=this.registry;e.commands.add("mediaEmbed",new m_e(e)),t.register("media",{inheritAllFrom:"$blockObject",allowAttributes:["url"]}),i.for("dataDowncast").elementToStructure({model:"media",view:(l,{writer:c})=>{const u=l.getAttribute("url");return pk(c,a,u,{elementName:s,renderMediaPreview:!!u&&o})}}),i.for("dataDowncast").add(gk(a,{elementName:s,renderMediaPreview:o})),i.for("editingDowncast").elementToStructure({model:"media",view:(l,{writer:c})=>{const u=l.getAttribute("url"),d=pk(c,a,u,{elementName:s,renderForEditingView:!0});return h_e(d,c,r("media widget"))}}),i.for("editingDowncast").add(gk(a,{elementName:s,renderForEditingView:!0})),i.for("upcast").elementToElement({view:l=>["oembed",s].includes(l.name)&&l.getAttribute("url")?{name:!0}:null,model:(l,{writer:c})=>{const u=l.getAttribute("url");return a.hasMedia(u)?c.createElement("media",{url:u}):null}}).elementToElement({view:{name:"div",attributes:{"data-oembed-url":!0}},model:(l,{writer:c})=>{const u=l.getAttribute("data-oembed-url");return a.hasMedia(u)?c.createElement("media",{url:u}):null}}).add(l=>{const c=(u,d,f)=>{if(!f.consumable.consume(d.viewItem,{name:!0,classes:"media"}))return;const{modelRange:h,modelCursor:m}=f.convertChildren(d.viewItem,d.modelCursor);d.modelRange=h,d.modelCursor=m,ln(h.getItems())||f.consumable.revert(d.viewItem,{name:!0,classes:"media"})};l.on("element:figure",c)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const w_e=/^(?:http(s)?:\/\/)?[\w-]+\.[\w-.~:/?#[\]@!$&'()*+,;=%]+$/;class __e extends W{static get requires(){return[Z0,Ti,Pg]}static get pluginName(){return"AutoMediaEmbed"}constructor(e){super(e),this._timeoutId=null,this._positionToInsert=null}init(){const e=this.editor,t=e.model.document,r=e.plugins.get("ClipboardPipeline");this.listenTo(r,"inputTransformation",()=>{const o=t.selection.getFirstRange(),s=Kt.fromPosition(o.start);s.stickiness="toPrevious";const a=Kt.fromPosition(o.end);a.stickiness="toNext",t.once("change:data",()=>{this._embedMediaBetweenPositions(s,a),s.detach(),a.detach()},{priority:"high"})}),e.commands.get("undo").on("execute",()=>{this._timeoutId&&(he.window.clearTimeout(this._timeoutId),this._positionToInsert.detach(),this._timeoutId=null,this._positionToInsert=null)},{priority:"high"})}_embedMediaBetweenPositions(e,t){const r=this.editor,i=r.plugins.get(fm).registry,o=new Zn(e,t),s=o.getWalker({ignoreElementEnd:!0});let a="";for(const c of s)c.item.is("$textProxy")&&(a+=c.item.data);if(a=a.trim(),!a.match(w_e)){o.detach();return}if(!i.hasMedia(a)){o.detach();return}if(!r.commands.get("mediaEmbed").isEnabled){o.detach();return}this._positionToInsert=Kt.fromPosition(e),this._timeoutId=he.window.setTimeout(()=>{r.model.change(c=>{this._timeoutId=null,c.remove(o),o.detach();let u=null;this._positionToInsert.root.rootName!=="$graveyard"&&(u=this._positionToInsert),oB(r.model,a,u,!1),this._positionToInsert.detach(),this._positionToInsert=null}),r.plugins.get(Ti).requestUndoOnBackspace()},100)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class C_e extends be{constructor(e,t){super(t);const r=t.t;this.focusTracker=new Ut,this.keystrokes=new mn,this.set("mediaURLInputValue",""),this.urlInputView=this._createUrlInput(),this.saveButtonView=this._createButton(r("Save"),Ee.check,"ck-button-save"),this.saveButtonView.type="submit",this.cancelButtonView=this._createButton(r("Cancel"),Ee.cancel,"ck-button-cancel","cancel"),this._focusables=new rr,this._focusCycler=new ir({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this._validators=e,this.setTemplate({tag:"form",attributes:{class:["ck","ck-media-form","ck-responsive-form"],tabindex:"-1"},children:[this.urlInputView,this.saveButtonView,this.cancelButtonView]})}render(){super.render(),sd({view:this}),[this.urlInputView,this.saveButtonView,this.cancelButtonView].forEach(r=>{this._focusables.add(r),this.focusTracker.add(r.element)}),this.keystrokes.listenTo(this.element);const t=r=>r.stopPropagation();this.keystrokes.set("arrowright",t),this.keystrokes.set("arrowleft",t),this.keystrokes.set("arrowup",t),this.keystrokes.set("arrowdown",t)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}get url(){return this.urlInputView.fieldView.element.value.trim()}set url(e){this.urlInputView.fieldView.element.value=e.trim()}isValid(){this.resetFormStatus();for(const e of this._validators){const t=e(this);if(t)return this.urlInputView.errorText=t,!1}return!0}resetFormStatus(){this.urlInputView.errorText=null,this.urlInputView.infoText=this._urlInputViewInfoDefault}_createUrlInput(){const e=this.locale.t,t=new El(this.locale,hd),r=t.fieldView;return this._urlInputViewInfoDefault=e("Paste the media URL in the input."),this._urlInputViewInfoTip=e("Tip: Paste the URL into the content to embed faster."),t.label=e("Media URL"),t.infoText=this._urlInputViewInfoDefault,r.on("input",()=>{t.infoText=r.element.value?this._urlInputViewInfoTip:this._urlInputViewInfoDefault,this.mediaURLInputValue=r.element.value.trim()}),t}_createButton(e,t,r,i){const o=new Ne(this.locale);return o.set({label:e,icon:t,tooltip:!0}),o.extendTemplate({attributes:{class:r}}),i&&o.delegate("execute").to(this,i),o}}const S_e='<svg viewBox="0 0 22 20" xmlns="http://www.w3.org/2000/svg"><path d="M1.587 1.5c-.612 0-.601-.029-.601.551v14.84c0 .59-.01.559.591.559h18.846c.602 0 .591.03.591-.56V2.052c0-.58.01-.55-.591-.55H1.587Zm.701.971h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-14.24 1h13.008v12H4.467l.029-12Zm-2.208 1h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h1.003l-.029 1h-.974v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h.974v1h-.974v-1Zm16.448 0h1.003v1h-1.003v-1Z"/><path d="M8.374 6.648a.399.399 0 0 1 .395-.4.402.402 0 0 1 .2.049l5.148 2.824a.4.4 0 0 1 0 .7l-5.148 2.824a.403.403 0 0 1-.595-.35V6.648Z"/></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class x_e extends W{static get requires(){return[fm]}static get pluginName(){return"MediaEmbedUI"}init(){const e=this.editor,t=e.commands.get("mediaEmbed");e.ui.componentFactory.add("mediaEmbed",r=>{const i=Ln(r);return this._setUpDropdown(i,t),i})}_setUpDropdown(e,t){const r=this.editor,i=r.t,o=e.buttonView,s=r.plugins.get(fm).registry;e.once("change:isOpen",()=>{const a=new(wg(C_e))(A_e(r.t,s),r.locale);e.panelView.children.add(a),o.on("open",()=>{a.disableCssTransitions(),a.url=t.value||"",a.urlInputView.fieldView.select(),a.enableCssTransitions()},{priority:"low"}),e.on("submit",()=>{a.isValid()&&(r.execute("mediaEmbed",a.url),r.editing.view.focus())}),e.on("change:isOpen",()=>a.resetFormStatus()),e.on("cancel",()=>{r.editing.view.focus()}),a.delegate("submit","cancel").to(e),a.urlInputView.fieldView.bind("value").to(t,"value"),a.urlInputView.on("change:errorText",()=>{r.ui.update()}),a.urlInputView.bind("isEnabled").to(t,"isEnabled")}),e.bind("isEnabled").to(t),o.set({label:i("Insert media"),icon:S_e,tooltip:!0})}}function A_e(n,e){return[t=>{if(!t.url.length)return n("The URL must not be empty.")},t=>{if(!e.hasMedia(t.url))return n("This media URL is not supported.")}]}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class T_e extends W{static get requires(){return[fm,x_e,__e,Ls]}static get pluginName(){return"MediaEmbed"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class E_e extends Me{refresh(){const e=this.editor.model,t=e.schema,r=e.document.selection;this.isEnabled=k_e(r,t,e)}execute(){const e=this.editor.model;e.change(t=>{const r=t.createElement("pageBreak");e.insertObject(r,null,null,{setSelection:"after"})})}}function k_e(n,e,t){const r=P_e(n,t);return e.checkChild(r,"pageBreak")}function P_e(n,e){const r=Y0(n,e).start.parent;return r.isEmpty&&!r.is("element","$root")?r.parent:r}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class I_e extends W{static get pluginName(){return"PageBreakEditing"}init(){const e=this.editor,t=e.model.schema,r=e.t,i=e.conversion;t.register("pageBreak",{inheritAllFrom:"$blockObject"}),i.for("dataDowncast").elementToStructure({model:"pageBreak",view:(o,{writer:s})=>s.createContainerElement("div",{class:"page-break",style:"page-break-after: always"},s.createContainerElement("span",{style:"display: none"}))}),i.for("editingDowncast").elementToStructure({model:"pageBreak",view:(o,{writer:s})=>{const a=r("Page break"),l=s.createContainerElement("div"),c=s.createRawElement("span",{class:"page-break__label"},function(u){u.innerText=r("Page break")});return s.addClass("page-break",l),s.insert(s.createPositionAt(l,0),c),O_e(l,s,a)}}),i.for("upcast").elementToElement({view:o=>{const s=o.getStyle("page-break-before")=="always",a=o.getStyle("page-break-after")=="always";if(!s&&!a)return null;if(o.childCount==1){const l=o.getChild(0);if(!l.is("element","span")||l.getStyle("display")!="none")return null}else if(o.childCount>1)return null;return{name:!0}},model:"pageBreak",converterPriority:"high"}),e.commands.add("pageBreak",new E_e(e))}}function O_e(n,e,t){return e.setCustomProperty("pageBreak",!0,n),Pl(n,e,{label:t})}const R_e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.598.687h1.5v5h-1.5zm14.5 0h1.5v5h-1.5z"/><path d="M19.598 4.187v1.5h-16v-1.5zm-16 14.569h1.5v-5h-1.5zm14.5 0h1.5v-5h-1.5z"/><path d="M19.598 15.256v-1.5h-16v1.5zM5.081 9h6v2h-6zm8 0h6v2h-6zm-9.483 1L0 12.5v-5z"/></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class M_e extends W{static get pluginName(){return"PageBreakUI"}init(){const e=this.editor;e.ui.componentFactory.add("pageBreak",()=>{const t=this._createButton(Ne);return t.set({tooltip:!0}),t}),e.ui.componentFactory.add("menuBar:pageBreak",()=>this._createButton(un))}_createButton(e){const t=this.editor,r=t.locale,i=t.commands.get("pageBreak"),o=new e(t.locale),s=r.t;return o.set({label:s("Page break"),icon:R_e}),o.bind("isEnabled").to(i,"isEnabled"),this.listenTo(o,"execute",()=>{t.execute("pageBreak"),t.editing.view.focus()}),o}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class D_e extends W{static get requires(){return[I_e,M_e,Ls]}static get pluginName(){return"PageBreak"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function B_e(n,e){const{modelAttribute:t,styleName:r,viewElement:i,defaultValue:o,reduceBoxSides:s=!1,shouldUpcast:a=()=>!0}=e;n.for("upcast").attributeToAttribute({view:{name:i,styles:{[r]:/[\s\S]+/}},model:{key:t,value:l=>{if(!a(l))return;const c=l.getNormalizedStyle(r),u=s?L_e(c):c;if(o!==u)return u}}})}function N_e(n,e){const{modelElement:t,modelAttribute:r,styleName:i}=e;n.for("downcast").attributeToAttribute({model:{name:t,key:r},view:o=>({key:"style",value:{[i]:o}})})}function L_e(n){if(!n)return;const e=["top","right","bottom","left"];if(!e.every(o=>n[o]))return n;const r=n.top;return e.every(o=>n[o]===r)?r:n}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Ot(n,e,t,r,i=1){e!=null&&i!==void 0&&i!==null&&e>i?r.setAttribute(n,e,t):r.removeAttribute(n,t)}function $s(n,e,t={}){const r=n.createElement("tableCell",t);return n.insertElement("paragraph",r),n.insert(r,e),r}function $y(n,e){const t=e.parent.parent,r=parseInt(t.getAttribute("headingColumns")||"0"),{column:i}=n.getCellLocation(e);return!!r&&i<r}function F_e(n,e,t){const{modelAttribute:r}=t;n.extend("tableCell",{allowAttributes:[r]}),B_e(e,{viewElement:/^(td|th)$/,...t}),N_e(e,{modelElement:"tableCell",...t})}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function $_e(){return n=>{n.on("element:figure",(e,t,r)=>{if(!r.consumable.test(t.viewItem,{name:!0,classes:"table"}))return;const i=j_e(t.viewItem);if(!i||!r.consumable.test(i,{name:!0}))return;r.consumable.consume(t.viewItem,{name:!0,classes:"table"});const o=r.convertItem(i,t.modelCursor),s=ln(o.modelRange.getItems());if(!s){r.consumable.revert(t.viewItem,{name:!0,classes:"table"});return}r.convertChildren(t.viewItem,r.writer.createPositionAt(s,"end")),r.updateConversionResult(s,t)})}}function V_e(){return n=>{n.on("element:table",(e,t,r)=>{const i=t.viewItem;if(!r.consumable.test(i,{name:!0}))return;const{rows:o,headingRows:s,headingColumns:a}=W_e(i),l={};a&&(l.headingColumns=a),s&&(l.headingRows=s);const c=r.writer.createElement("table",l);if(r.safeInsert(c,t.modelCursor)){if(r.consumable.consume(i,{name:!0}),o.forEach(u=>r.convertItem(u,r.writer.createPositionAt(c,"end"))),r.convertChildren(i,r.writer.createPositionAt(c,"end")),c.isEmpty){const u=r.writer.createElement("tableRow");r.writer.insert(u,r.writer.createPositionAt(c,"end")),$s(r.writer,r.writer.createPositionAt(u,"end"))}r.updateConversionResult(c,t)}})}}function z_e(){return n=>{n.on("element:tr",(e,t)=>{t.viewItem.isEmpty&&t.modelCursor.index==0&&e.stop()},{priority:"high"})}}function yk(n){return e=>{e.on(`element:${n}`,(t,r,{writer:i})=>{if(!r.modelRange)return;const o=r.modelRange.start.nodeAfter,s=i.createPositionAt(o,0);if(r.viewItem.isEmpty){i.insertElement("paragraph",s);return}const a=Array.from(o.getChildren());if(a.every(l=>l.is("element","$marker"))){const l=i.createElement("paragraph");i.insert(l,i.createPositionAt(o,0));for(const c of a)i.move(i.createRangeOn(c),i.createPositionAt(l,"end"))}},{priority:"low"})}}function j_e(n){for(const e of n.getChildren())if(e.is("element","table"))return e}function W_e(n){let e=0,t;const r=[],i=[];let o;for(const s of Array.from(n.getChildren())){if(s.name!=="tbody"&&s.name!=="thead"&&s.name!=="tfoot")continue;s.name==="thead"&&!o&&(o=s);const a=Array.from(s.getChildren()).filter(l=>l.is("element","tr"));for(const l of a)if(o&&s===o||s.name==="tbody"&&Array.from(l.getChildren()).length&&Array.from(l.getChildren()).every(c=>c.is("element","th")))e++,r.push(l);else{i.push(l);const c=H_e(l);(!t||c<t)&&(t=c)}}return{headingRows:e,headingColumns:t||0,rows:[...r,...i]}}function H_e(n){let e=0,t=0;const r=Array.from(n.getChildren()).filter(i=>i.name==="th"||i.name==="td");for(;t<r.length&&r[t].name==="th";){const i=r[t],o=parseInt(i.getAttribute("colspan")||"1");e=e+o,t++}return e}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class lt{constructor(e,t={}){this._jumpedToStartRow=!1,this._table=e,this._startRow=t.row!==void 0?t.row:t.startRow||0,this._endRow=t.row!==void 0?t.row:t.endRow,this._startColumn=t.column!==void 0?t.column:t.startColumn||0,this._endColumn=t.column!==void 0?t.column:t.endColumn,this._includeAllSlots=!!t.includeAllSlots,this._skipRows=new Set,this._row=0,this._rowIndex=0,this._column=0,this._cellIndex=0,this._spannedCells=new Map,this._nextCellAtColumn=-1}[Symbol.iterator](){return this}next(){this._canJumpToStartRow()&&this._jumpToNonSpannedRowClosestToStartRow();const e=this._table.getChild(this._rowIndex);if(!e||this._isOverEndRow())return{done:!0,value:void 0};if(!e.is("element","tableRow"))return this._rowIndex++,this.next();if(this._isOverEndColumn())return this._advanceToNextRow();let t=null;const r=this._getSpanned();if(r)this._includeAllSlots&&!this._shouldSkipSlot()&&(t=this._formatOutValue(r.cell,r.row,r.column));else{const i=e.getChild(this._cellIndex);if(!i)return this._advanceToNextRow();const o=parseInt(i.getAttribute("colspan")||"1"),s=parseInt(i.getAttribute("rowspan")||"1");(o>1||s>1)&&this._recordSpans(i,s,o),this._shouldSkipSlot()||(t=this._formatOutValue(i)),this._nextCellAtColumn=this._column+o}return this._column++,this._column==this._nextCellAtColumn&&this._cellIndex++,t||this.next()}skipRow(e){this._skipRows.add(e)}_advanceToNextRow(){return this._row++,this._rowIndex++,this._column=0,this._cellIndex=0,this._nextCellAtColumn=-1,this.next()}_isOverEndRow(){return this._endRow!==void 0&&this._row>this._endRow}_isOverEndColumn(){return this._endColumn!==void 0&&this._column>this._endColumn}_formatOutValue(e,t=this._row,r=this._column){return{done:!1,value:new U_e(this,e,t,r)}}_shouldSkipSlot(){const e=this._skipRows.has(this._row),t=this._row<this._startRow,r=this._column<this._startColumn,i=this._endColumn!==void 0&&this._column>this._endColumn;return e||t||r||i}_getSpanned(){const e=this._spannedCells.get(this._row);return e&&e.get(this._column)||null}_recordSpans(e,t,r){const i={cell:e,row:this._row,column:this._column};for(let o=this._row;o<this._row+t;o++)for(let s=this._column;s<this._column+r;s++)(o!=this._row||s!=this._column)&&this._markSpannedCell(o,s,i)}_markSpannedCell(e,t,r){this._spannedCells.has(e)||this._spannedCells.set(e,new Map),this._spannedCells.get(e).set(t,r)}_canJumpToStartRow(){return!!this._startRow&&this._startRow>0&&!this._jumpedToStartRow}_jumpToNonSpannedRowClosestToStartRow(){const e=this._getRowLength(0);for(let t=this._startRow;!this._jumpedToStartRow;t--)e===this._getRowLength(t)&&(this._row=t,this._rowIndex=t,this._jumpedToStartRow=!0)}_getRowLength(e){return[...this._table.getChild(e).getChildren()].reduce((r,i)=>r+parseInt(i.getAttribute("colspan")||"1"),0)}}class U_e{constructor(e,t,r,i){this.cell=t,this.row=e._row,this.column=e._column,this.cellAnchorRow=r,this.cellAnchorColumn=i,this._cellIndex=e._cellIndex,this._rowIndex=e._rowIndex,this._table=e._table}get isAnchor(){return this.row===this.cellAnchorRow&&this.column===this.cellAnchorColumn}get cellWidth(){return parseInt(this.cell.getAttribute("colspan")||"1")}get cellHeight(){return parseInt(this.cell.getAttribute("rowspan")||"1")}get rowIndex(){return this._rowIndex}getPositionBefore(){return this._table.root.document.model.createPositionAt(this._table.getChild(this.row),this._cellIndex)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function wk(n,e){return(t,{writer:r})=>{const i=t.getAttribute("headingRows")||0,o=r.createContainerElement("table",null,[]),s=r.createContainerElement("figure",{class:"table"},o);i>0&&r.insert(r.createPositionAt(o,"end"),r.createContainerElement("thead",null,r.createSlot(a=>a.is("element","tableRow")&&a.index<i))),i<n.getRows(t)&&r.insert(r.createPositionAt(o,"end"),r.createContainerElement("tbody",null,r.createSlot(a=>a.is("element","tableRow")&&a.index>=i)));for(const{positionOffset:a,filter:l}of e.additionalSlots)r.insert(r.createPositionAt(o,a),r.createSlot(l));return r.insert(r.createPositionAt(o,"after"),r.createSlot(a=>a.is("element","tableRow")?!1:!e.additionalSlots.some(({filter:l})=>l(a)))),e.asWidget?q_e(s,r):s}}function G_e(){return(n,{writer:e})=>n.isEmpty?e.createEmptyElement("tr"):e.createContainerElement("tr")}function _k(n={}){return(e,{writer:t})=>{const r=e.parent,i=r.parent,o=i.getChildIndex(r),s=new lt(i,{row:o}),a=i.getAttribute("headingRows")||0,l=i.getAttribute("headingColumns")||0;let c=null;for(const u of s)if(u.cell==e){const f=u.row<a||u.column<l?"th":"td";c=n.asWidget?p5(t.createEditableElement(f),t):t.createContainerElement(f);break}return c}}function Ck(n={}){return(e,{writer:t})=>{if(!e.parent.is("element","tableCell")||!sB(e))return null;if(n.asWidget)return t.createContainerElement("span",{class:"ck-table-bogus-paragraph"});{const r=t.createContainerElement("p");return t.setCustomProperty("dataPipeline:transparentRendering",!0,r),r}}}function sB(n){return n.parent.childCount==1&&!K_e(n)}function q_e(n,e){return e.setCustomProperty("table",!0,n),Pl(n,e,{hasSelectionHandle:!0})}function K_e(n){return!n.getAttributeKeys().next().done}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Y_e extends Me{refresh(){const e=this.editor.model,t=e.document.selection,r=e.schema;this.isEnabled=X_e(t,r)}execute(e={}){const t=this.editor,r=t.model,i=t.plugins.get("TableUtils"),o=t.config.get("table.defaultHeadings.rows"),s=t.config.get("table.defaultHeadings.columns");e.headingRows===void 0&&o&&(e.headingRows=o),e.headingColumns===void 0&&s&&(e.headingColumns=s),r.change(a=>{const l=i.createTable(a,e);r.insertObject(l,null,null,{findOptimalPosition:"auto"}),a.setSelection(a.createPositionAt(l.getNodeByPath([0,0,0]),0))})}}function X_e(n,e){const t=n.getFirstPosition().parent,r=t===t.root?t:t.parent;return e.checkChild(r,"table")}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Sk extends Me{constructor(e,t={}){super(e),this.order=t.order||"below"}refresh(){const e=this.editor.model.document.selection,r=!!this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(e).length;this.isEnabled=r}execute(){const e=this.editor,t=e.model.document.selection,r=e.plugins.get("TableUtils"),i=this.order==="above",o=r.getSelectionAffectedTableCells(t),s=r.getRowIndexes(o),a=i?s.first:s.last,l=o[0].findAncestor("table");r.insertRows(l,{at:i?a:a+1,copyStructureFromAbove:!i})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class xk extends Me{constructor(e,t={}){super(e),this.order=t.order||"right"}refresh(){const e=this.editor.model.document.selection,r=!!this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(e).length;this.isEnabled=r}execute(){const e=this.editor,t=e.model.document.selection,r=e.plugins.get("TableUtils"),i=this.order==="left",o=r.getSelectionAffectedTableCells(t),s=r.getColumnIndexes(o),a=i?s.first:s.last,l=o[0].findAncestor("table");r.insertColumns(l,{columns:1,at:i?a:a+1})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ak extends Me{constructor(e,t={}){super(e),this.direction=t.direction||"horizontally"}refresh(){const t=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(this.editor.model.document.selection);this.isEnabled=t.length===1}execute(){const e=this.editor.plugins.get("TableUtils"),t=e.getSelectionAffectedTableCells(this.editor.model.document.selection)[0];this.direction==="horizontally"?e.splitCellHorizontally(t,2):e.splitCellVertically(t,2)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function aB(n,e,t){const{startRow:r,startColumn:i,endRow:o,endColumn:s}=e,a=t.createElement("table"),l=o-r+1;for(let u=0;u<l;u++)t.insertElement("tableRow",a,"end");const c=[...new lt(n,{startRow:r,endRow:o,startColumn:i,endColumn:s,includeAllSlots:!0})];for(const{row:u,column:d,cell:f,isAnchor:h,cellAnchorRow:m,cellAnchorColumn:g}of c){const p=u-r,b=a.getChild(p);if(!h)(m<r||g<i)&&$s(t,t.createPositionAt(b,"end"));else{const y=t.cloneElement(f);t.append(y,b),fB(y,u,d,o,s,t)}}return Z_e(a,n,r,i,t),a}function lB(n,e,t=0){const r=[],i=new lt(n,{startRow:t,endRow:e-1});for(const o of i){const{row:s,cellHeight:a}=o,l=s+a-1;s<e&&e<=l&&r.push(o)}return r}function cB(n,e,t){const r=n.parent,i=r.parent,o=r.index,s=parseInt(n.getAttribute("rowspan")),a=e-o,l={},c=s-a;c>1&&(l.rowspan=c);const u=parseInt(n.getAttribute("colspan")||"1");u>1&&(l.colspan=u);const d=o,f=d+a,h=[...new lt(i,{startRow:d,endRow:f,includeAllSlots:!0})];let m=null,g;for(const p of h){const{row:b,column:y,cell:C}=p;C===n&&g===void 0&&(g=y),g!==void 0&&g===y&&b===f&&(m=$s(t,p.getPositionBefore(),l))}return Ot("rowspan",a,n,t),m}function uB(n,e){const t=[],r=new lt(n);for(const i of r){const{column:o,cellWidth:s}=i,a=o+s-1;o<e&&e<=a&&t.push(i)}return t}function dB(n,e,t,r){const i=parseInt(n.getAttribute("colspan")),o=t-e,s={},a=i-o;a>1&&(s.colspan=a);const l=parseInt(n.getAttribute("rowspan")||"1");l>1&&(s.rowspan=l);const c=$s(r,r.createPositionAfter(n),s);return Ot("colspan",o,n,r),c}function fB(n,e,t,r,i,o){const s=parseInt(n.getAttribute("colspan")||"1"),a=parseInt(n.getAttribute("rowspan")||"1");if(t+s-1>i){const u=i-t+1;Ot("colspan",u,n,o,1)}if(e+a-1>r){const u=r-e+1;Ot("rowspan",u,n,o,1)}}function Z_e(n,e,t,r,i){const o=parseInt(e.getAttribute("headingRows")||"0");if(o>0){const a=o-t;Ot("headingRows",a,n,i,0)}const s=parseInt(e.getAttribute("headingColumns")||"0");if(s>0){const a=s-r;Ot("headingColumns",a,n,i,0)}}function Vy(n,e){const t=e.getColumns(n),r=new Array(t).fill(0);for(const{column:o}of new lt(n))r[o]++;const i=r.reduce((o,s,a)=>s?o:[...o,a],[]);if(i.length>0){const o=i[i.length-1];return e.removeColumns(n,{at:o}),!0}return!1}function zy(n,e){const t=[],r=e.getRows(n);for(let i=0;i<r;i++)n.getChild(i).isEmpty&&t.push(i);if(t.length>0){const i=t[t.length-1];return e.removeRows(n,{at:i}),!0}return!1}function o_(n,e){Vy(n,e)||zy(n,e)}function hB(n,e){const t=Array.from(new lt(n,{startColumn:e.firstColumn,endColumn:e.lastColumn,row:e.lastRow}));if(t.every(({cellHeight:o})=>o===1))return e.lastRow;const i=t[0].cellHeight-1;return e.lastRow+i}function mB(n,e){const t=Array.from(new lt(n,{startRow:e.firstRow,endRow:e.lastRow,column:e.lastColumn}));if(t.every(({cellWidth:o})=>o===1))return e.lastColumn;const i=t[0].cellWidth-1;return e.lastColumn+i}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Sf extends Me{constructor(e,t){super(e),this.direction=t.direction,this.isHorizontal=this.direction=="right"||this.direction=="left"}refresh(){const e=this._getMergeableCell();this.value=e,this.isEnabled=!!e}execute(){const e=this.editor.model,t=e.document,i=this.editor.plugins.get("TableUtils").getTableCellsContainingSelection(t.selection)[0],o=this.value,s=this.direction;e.change(a=>{const l=s=="right"||s=="down",c=l?i:o,u=l?o:i,d=u.parent;e1e(u,c,a);const f=this.isHorizontal?"colspan":"rowspan",h=parseInt(i.getAttribute(f)||"1"),m=parseInt(o.getAttribute(f)||"1");a.setAttribute(f,h+m,c),a.setSelection(a.createRangeIn(c));const g=this.editor.plugins.get("TableUtils"),p=d.findAncestor("table");o_(p,g)})}_getMergeableCell(){const t=this.editor.model.document,r=this.editor.plugins.get("TableUtils"),i=r.getTableCellsContainingSelection(t.selection)[0];if(!i)return;const o=this.isHorizontal?J_e(i,this.direction,r):Q_e(i,this.direction,r);if(!o)return;const s=this.isHorizontal?"rowspan":"colspan",a=parseInt(i.getAttribute(s)||"1");if(parseInt(o.getAttribute(s)||"1")===a)return o}}function J_e(n,e,t){const i=n.parent.parent,o=e=="right"?n.nextSibling:n.previousSibling,s=(i.getAttribute("headingColumns")||0)>0;if(!o)return;const a=e=="right"?n:o,l=e=="right"?o:n,{column:c}=t.getCellLocation(a),{column:u}=t.getCellLocation(l),d=parseInt(a.getAttribute("colspan")||"1"),f=$y(t,a),h=$y(t,l);return s&&f!=h?void 0:c+d===u?o:void 0}function Q_e(n,e,t){const r=n.parent,i=r.parent,o=i.getChildIndex(r);if(e=="down"&&o===t.getRows(i)-1||e=="up"&&o===0)return null;const s=parseInt(n.getAttribute("rowspan")||"1"),a=i.getAttribute("headingRows")||0,l=e=="down"&&o+s===a,c=e=="up"&&o===a;if(a&&(l||c))return null;const u=parseInt(n.getAttribute("rowspan")||"1"),d=e=="down"?o+u:o,f=[...new lt(i,{endRow:d})],m=f.find(p=>p.cell===n).column,g=f.find(({row:p,cellHeight:b,column:y})=>y!==m?!1:e=="down"?p===d:d===p+b);return g&&g.cell?g.cell:null}function e1e(n,e,t){Tk(n)||(Tk(e)&&t.remove(t.createRangeIn(e)),t.move(t.createRangeIn(n),t.createPositionAt(e,"end"))),t.remove(n)}function Tk(n){const e=n.getChild(0);return n.childCount==1&&e.is("element","paragraph")&&e.isEmpty}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class t1e extends Me{refresh(){const e=this.editor.plugins.get("TableUtils"),t=e.getSelectionAffectedTableCells(this.editor.model.document.selection),r=t[0];if(r){const i=r.findAncestor("table"),s=e.getRows(i)-1,a=e.getRowIndexes(t),l=a.first===0&&a.last===s;this.isEnabled=!l}else this.isEnabled=!1}execute(){const e=this.editor.model,t=this.editor.plugins.get("TableUtils"),r=t.getSelectionAffectedTableCells(e.document.selection),i=t.getRowIndexes(r),o=r[0],s=o.findAncestor("table"),a=t.getCellLocation(o).column;e.change(l=>{const c=i.last-i.first+1;t.removeRows(s,{at:i.first,rows:c});const u=n1e(s,i.first,a,t.getRows(s));l.setSelection(l.createPositionAt(u,0))})}}function n1e(n,e,t,r){const i=n.getChild(Math.min(e,r-1));let o=i.getChild(0),s=0;for(const a of i.getChildren()){if(s>t)return o;o=a,s+=parseInt(a.getAttribute("colspan")||"1")}return o}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class r1e extends Me{refresh(){const e=this.editor.plugins.get("TableUtils"),t=e.getSelectionAffectedTableCells(this.editor.model.document.selection),r=t[0];if(r){const i=r.findAncestor("table"),o=e.getColumns(i),{first:s,last:a}=e.getColumnIndexes(t);this.isEnabled=a-s<o-1}else this.isEnabled=!1}execute(){const e=this.editor.plugins.get("TableUtils"),[t,r]=o1e(this.editor.model.document.selection,e),i=t.parent.parent,o=[...new lt(i)],s={first:o.find(l=>l.cell===t).column,last:o.find(l=>l.cell===r).column},a=i1e(o,t,r,s);this.editor.model.change(l=>{const c=s.last-s.first+1;e.removeColumns(i,{at:s.first,columns:c}),l.setSelection(l.createPositionAt(a,0))})}}function i1e(n,e,t,r){return parseInt(t.getAttribute("colspan")||"1")>1?t:e.previousSibling||t.nextSibling?t.nextSibling||e.previousSibling:r.first?n.reverse().find(({column:o})=>o<r.first).cell:n.reverse().find(({column:o})=>o>r.last).cell}function o1e(n,e){const t=e.getSelectionAffectedTableCells(n),r=t[0],i=t.pop(),o=[r,i];return r.isBefore(i)?o:o.reverse()}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class s1e extends Me{refresh(){const e=this.editor.plugins.get("TableUtils"),t=this.editor.model,r=e.getSelectionAffectedTableCells(t.document.selection),i=r.length>0;this.isEnabled=i,this.value=i&&r.every(o=>this._isInHeading(o,o.parent.parent))}execute(e={}){if(e.forceValue===this.value)return;const t=this.editor.plugins.get("TableUtils"),r=this.editor.model,i=t.getSelectionAffectedTableCells(r.document.selection),o=i[0].findAncestor("table"),{first:s,last:a}=t.getRowIndexes(i),l=this.value?s:a+1,c=o.getAttribute("headingRows")||0;r.change(u=>{if(l){const d=l>c?c:0,f=lB(o,l,d);for(const{cell:h}of f)cB(h,l,u)}Ot("headingRows",l,o,u,0)})}_isInHeading(e,t){const r=parseInt(t.getAttribute("headingRows")||"0");return!!r&&e.parent.index<r}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class a1e extends Me{refresh(){const e=this.editor.model,t=this.editor.plugins.get("TableUtils"),r=t.getSelectionAffectedTableCells(e.document.selection),i=r.length>0;this.isEnabled=i,this.value=i&&r.every(o=>$y(t,o))}execute(e={}){if(e.forceValue===this.value)return;const t=this.editor.plugins.get("TableUtils"),r=this.editor.model,i=t.getSelectionAffectedTableCells(r.document.selection),o=i[0].findAncestor("table"),{first:s,last:a}=t.getColumnIndexes(i),l=this.value?s:a+1;r.change(c=>{if(l){const u=uB(o,l);for(const{cell:d,column:f}of u)dB(d,f,l,c)}Ot("headingColumns",l,o,c,0)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const l1e=5,jy=40,c1e=2;/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function u1e(n){const e=new Set;for(const t of n.document.differ.getChanges()){let r=null;switch(t.type){case"insert":r=["table","tableRow","tableCell"].includes(t.name)?t.position:null;break;case"remove":r=["tableRow","tableCell"].includes(t.name)?t.position:null;break;case"attribute":t.range.start.nodeAfter&&(r=["table","tableRow","tableCell"].includes(t.range.start.nodeAfter.name)?t.range.start:null);break}if(!r)continue;const i=r.nodeAfter&&r.nodeAfter.is("element","table")?r.nodeAfter:r.findAncestor("table");for(const o of n.createRangeOn(i).getItems())o.is("element","table")&&bd(o)&&e.add(o)}return e}function d1e(n,e){return jy*100/gB(n,e)}function gB(n,e){const t=Ek(n,"tbody",e)||Ek(n,"thead",e),r=e.editing.view.domConverter.mapViewToDom(t);return Wy(r)}function Ek(n,e,t){return[...[...t.editing.mapper.toViewElement(n).getChildren()].find(o=>o.is("element","table")).getChildren()].find(o=>o.is("element",e))}function Wy(n){const e=he.window.getComputedStyle(n);return e.boxSizing==="border-box"?parseFloat(e.width)-parseFloat(e.paddingLeft)-parseFloat(e.paddingRight)-parseFloat(e.borderLeftWidth)-parseFloat(e.borderRightWidth):parseFloat(e.width)}function f1e(n,e){const t=e.getCellLocation(n).column,r=n.getAttribute("colspan")||1;return{leftEdge:t,rightEdge:t+r-1}}function Yn(n){const e=Math.pow(10,c1e),t=typeof n=="number"?n:parseFloat(n);return Math.round(t*e)/e}function h1e(n,e,t){return n<=e?Yn(e):n>=t?Yn(t):Yn(n)}function m1e(n,e){return Array(n).fill(e)}function zu(n){return n.map(e=>typeof e=="number"?e:parseFloat(e)).filter(e=>!Number.isNaN(e)).reduce((e,t)=>e+t,0)}function s_(n){const e=n.map(i=>i==="auto"?i:parseFloat(i.replace("%","")));let t=g1e(e);const r=zu(t);return r!==100&&(t=t.map(i=>Yn(i*100/r)).map((i,o,s)=>{if(!(o===s.length-1))return i;const l=zu(s);return Yn(i+100-l)})),t.map(i=>i+"%")}function g1e(n){const e=n.filter(i=>i==="auto").length;if(e===0)return n.map(i=>Yn(i));const t=zu(n),r=Math.max((100-t)/e,l1e);return n.map(i=>i==="auto"?r:i).map(i=>Yn(i))}function p1e(n){const e=he.window.getComputedStyle(n);return e.boxSizing==="border-box"?parseInt(e.width):parseFloat(e.width)+parseFloat(e.paddingLeft)+parseFloat(e.paddingRight)+parseFloat(e.borderWidth)}function pB(n,e,t,r){for(let i=0;i<Math.max(t.length,n.length);i++){const o=n[i],s=t[i];s?o?r.setAttribute("columnWidth",s,o):r.appendElement("tableColumn",{columnWidth:s},e):r.remove(o)}}function bd(n){if(n.is("element","tableColumnGroup"))return n;const e=n.getChildren();return Array.from(e).find(t=>t.is("element","tableColumnGroup"))}function yd(n){const e=bd(n);return e?Array.from(e.getChildren()):[]}function v1e(n){return yd(n).map(e=>e.getAttribute("columnWidth"))}function b1e(n,e){return yd(n).reduce((r,i)=>{const o=i.getAttribute("columnWidth"),s=i.getAttribute("colSpan");if(!s)return r.push(o),r;for(let a=0;a<s;a++)r.push(o);return e.removeAttribute("colSpan",i),r},[])}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class an extends W{static get pluginName(){return"TableUtils"}init(){this.decorate("insertColumns"),this.decorate("insertRows")}getCellLocation(e){const t=e.parent,r=t.parent,i=r.getChildIndex(t),o=new lt(r,{row:i});for(const{cell:s,row:a,column:l}of o)if(s===e)return{row:a,column:l};/* istanbul ignore next -- @preserve */}createTable(e,t){const r=e.createElement("table"),i=t.rows||2,o=t.columns||2;return pv(e,r,0,i,o),t.headingRows&&Ot("headingRows",Math.min(t.headingRows,i),r,e,0),t.headingColumns&&Ot("headingColumns",Math.min(t.headingColumns,o),r,e,0),r}insertRows(e,t={}){const r=this.editor.model,i=t.at||0,o=t.rows||1,s=t.copyStructureFromAbove!==void 0,a=t.copyStructureFromAbove?i-1:i,l=this.getRows(e),c=this.getColumns(e);if(i>l)throw new M("tableutils-insertrows-insert-out-of-range",this,{options:t});r.change(u=>{const d=e.getAttribute("headingRows")||0;if(d>i&&Ot("headingRows",d+o,e,u,0),!s&&(i===0||i===l)){pv(u,e,i,o,c);return}const f=s?Math.max(i,a):i,h=new lt(e,{endRow:f}),m=new Array(c).fill(1);for(const{row:g,column:p,cellHeight:b,cellWidth:y,cell:C}of h){const A=g+b-1,w=g<i&&i<=A,S=g<=a&&a<=A;w?(u.setAttribute("rowspan",b+o,C),m[p]=-y):s&&S&&(m[p]=y)}for(let g=0;g<o;g++){const p=u.createElement("tableRow");u.insert(p,e,i);for(let b=0;b<m.length;b++){const y=m[b],C=u.createPositionAt(p,"end");y>0&&$s(u,C,y>1?{colspan:y}:void 0),b+=Math.abs(y)-1}}})}insertColumns(e,t={}){const r=this.editor.model,i=t.at||0,o=t.columns||1;r.change(s=>{const a=e.getAttribute("headingColumns");i<a&&s.setAttribute("headingColumns",a+o,e);const l=this.getColumns(e);if(i===0||l===i){for(const u of e.getChildren())u.is("element","tableRow")&&da(o,s,s.createPositionAt(u,i?"end":0));return}const c=new lt(e,{column:i,includeAllSlots:!0});for(const u of c){const{row:d,cell:f,cellAnchorColumn:h,cellAnchorRow:m,cellWidth:g,cellHeight:p}=u;if(h<i){s.setAttribute("colspan",g+o,f);const b=m+p-1;for(let y=d;y<=b;y++)c.skipRow(y)}else da(o,s,u.getPositionBefore())}})}removeRows(e,t){const r=this.editor.model,i=t.rows||1,o=this.getRows(e),s=t.at,a=s+i-1;if(a>o-1)throw new M("tableutils-removerows-row-index-out-of-range",this,{table:e,options:t});r.change(l=>{const c={first:s,last:a},{cellsToMove:u,cellsToTrim:d}=_1e(e,c);if(u.size){const f=a+1;C1e(e,f,u,l)}for(let f=a;f>=s;f--)l.remove(e.getChild(f));for(const{rowspan:f,cell:h}of d)Ot("rowspan",f,h,l);w1e(e,c,l),Vy(e,this)||zy(e,this)})}removeColumns(e,t){const r=this.editor.model,i=t.at,o=t.columns||1,s=t.at+o-1;r.change(a=>{y1e(e,{first:i,last:s},a);const l=yd(e);for(let c=s;c>=i;c--){for(const{cell:u,column:d,cellWidth:f}of[...new lt(e)])d<=c&&f>1&&d+f>c?Ot("colspan",f-1,u,a):d===c&&a.remove(u);if(l[c]){const u=c===0?l[1]:l[c-1],d=parseFloat(l[c].getAttribute("columnWidth")),f=parseFloat(u.getAttribute("columnWidth"));a.remove(l[c]),a.setAttribute("columnWidth",d+f+"%",u)}}zy(e,this)||Vy(e,this)})}splitCellVertically(e,t=2){const r=this.editor.model,o=e.parent.parent,s=parseInt(e.getAttribute("rowspan")||"1"),a=parseInt(e.getAttribute("colspan")||"1");r.change(l=>{if(a>1){const{newCellsSpan:c,updatedSpan:u}=kk(a,t);Ot("colspan",u,e,l);const d={};c>1&&(d.colspan=c),s>1&&(d.rowspan=s);const f=a>t?t-1:a-1;da(f,l,l.createPositionAfter(e),d)}if(a<t){const c=t-a,u=[...new lt(o)],{column:d}=u.find(({cell:g})=>g===e),f=u.filter(({cell:g,cellWidth:p,column:b})=>{const y=g!==e&&b===d,C=b<d&&b+p>d;return y||C});for(const{cell:g,cellWidth:p}of f)l.setAttribute("colspan",p+c,g);const h={};s>1&&(h.rowspan=s),da(c,l,l.createPositionAfter(e),h);const m=o.getAttribute("headingColumns")||0;m>d&&Ot("headingColumns",m+c,o,l)}})}splitCellHorizontally(e,t=2){const r=this.editor.model,i=e.parent,o=i.parent,s=o.getChildIndex(i),a=parseInt(e.getAttribute("rowspan")||"1"),l=parseInt(e.getAttribute("colspan")||"1");r.change(c=>{if(a>1){const u=[...new lt(o,{startRow:s,endRow:s+a-1,includeAllSlots:!0})],{newCellsSpan:d,updatedSpan:f}=kk(a,t);Ot("rowspan",f,e,c);const{column:h}=u.find(({cell:g})=>g===e),m={};d>1&&(m.rowspan=d),l>1&&(m.colspan=l);for(const g of u){const{column:p,row:b}=g,y=b>=s+f,C=p===h,A=(b+s+f)%d===0;y&&C&&A&&da(1,c,g.getPositionBefore(),m)}}if(a<t){const u=t-a,d=[...new lt(o,{startRow:0,endRow:s})];for(const{cell:m,cellHeight:g,row:p}of d)if(m!==e&&p+g>s){const b=g+u;c.setAttribute("rowspan",b,m)}const f={};l>1&&(f.colspan=l),pv(c,o,s+1,u,1,f);const h=o.getAttribute("headingRows")||0;h>s&&Ot("headingRows",h+u,o,c)}})}getColumns(e){return[...e.getChild(0).getChildren()].filter(r=>r.is("element","tableCell")).reduce((r,i)=>{const o=parseInt(i.getAttribute("colspan")||"1");return r+o},0)}getRows(e){return Array.from(e.getChildren()).reduce((t,r)=>r.is("element","tableRow")?t+1:t,0)}createTableWalker(e,t={}){return new lt(e,t)}getSelectedTableCells(e){const t=[];for(const r of this.sortRanges(e.getRanges())){const i=r.getContainedElement();i&&i.is("element","tableCell")&&t.push(i)}return t}getTableCellsContainingSelection(e){const t=[];for(const r of e.getRanges()){const i=r.start.findAncestor("tableCell");i&&t.push(i)}return t}getSelectionAffectedTableCells(e){const t=this.getSelectedTableCells(e);return t.length?t:this.getTableCellsContainingSelection(e)}getRowIndexes(e){const t=e.map(r=>r.parent.index);return this._getFirstLastIndexesObject(t)}getColumnIndexes(e){const t=e[0].findAncestor("table"),i=[...new lt(t)].filter(o=>e.includes(o.cell)).map(o=>o.column);return this._getFirstLastIndexesObject(i)}isSelectionRectangular(e){if(e.length<2||!this._areCellInTheSameTableSection(e))return!1;const t=new Set,r=new Set;let i=0;for(const s of e){const{row:a,column:l}=this.getCellLocation(s),c=parseInt(s.getAttribute("rowspan"))||1,u=parseInt(s.getAttribute("colspan"))||1;t.add(a),r.add(l),c>1&&t.add(a+c-1),u>1&&r.add(l+u-1),i+=c*u}return x1e(t,r)==i}sortRanges(e){return Array.from(e).sort(S1e)}_getFirstLastIndexesObject(e){const t=e.sort((o,s)=>o-s),r=t[0],i=t[t.length-1];return{first:r,last:i}}_areCellInTheSameTableSection(e){const t=e[0].findAncestor("table"),r=this.getRowIndexes(e),i=parseInt(t.getAttribute("headingRows"))||0;if(!this._areIndexesInSameSection(r,i))return!1;const o=this.getColumnIndexes(e),s=parseInt(t.getAttribute("headingColumns"))||0;return this._areIndexesInSameSection(o,s)}_areIndexesInSameSection({first:e,last:t},r){const i=e<r,o=t<r;return i===o}}function pv(n,e,t,r,i,o={}){for(let s=0;s<r;s++){const a=n.createElement("tableRow");n.insert(a,e,t),da(i,n,n.createPositionAt(a,"end"),o)}}function da(n,e,t,r={}){for(let i=0;i<n;i++)$s(e,t,r)}function kk(n,e){if(n<e)return{newCellsSpan:1,updatedSpan:1};const t=Math.floor(n/e),r=n-t*e+t;return{newCellsSpan:t,updatedSpan:r}}function y1e(n,e,t){const r=n.getAttribute("headingColumns")||0;if(r&&e.first<r){const i=Math.min(r-1,e.last)-e.first+1;t.setAttribute("headingColumns",r-i,n)}}function w1e(n,{first:e,last:t},r){const i=n.getAttribute("headingRows")||0;if(e<i){const o=t<i?i-(t-e+1):e;Ot("headingRows",o,n,r,0)}}function _1e(n,{first:e,last:t}){const r=new Map,i=[];for(const{row:o,column:s,cellHeight:a,cell:l}of new lt(n,{endRow:t})){const c=o+a-1;if(o>=e&&o<=t&&c>t){const f=t-o+1,h=a-f;r.set(s,{cell:l,rowspan:h})}if(o<e&&c>=e){let f;c>=t?f=t-e+1:f=c-e+1,i.push({cell:l,rowspan:a-f})}}return{cellsToMove:r,cellsToTrim:i}}function C1e(n,e,t,r){const o=[...new lt(n,{includeAllSlots:!0,row:e})],s=n.getChild(e);let a;for(const{column:l,cell:c,isAnchor:u}of o)if(t.has(l)){const{cell:d,rowspan:f}=t.get(l),h=a?r.createPositionAfter(a):r.createPositionAt(s,0);r.move(r.createRangeOn(d),h),Ot("rowspan",f,d,r),a=d}else u&&(a=c)}function S1e(n,e){const t=n.start,r=e.start;return t.isBefore(r)?-1:1}function x1e(n,e){const t=Array.from(n.values()),r=Array.from(e.values()),i=Math.max(...t),o=Math.min(...t),s=Math.max(...r),a=Math.min(...r);return(i-o+1)*(s-a+1)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class A1e extends Me{refresh(){const e=this.editor.plugins.get(an),t=e.getSelectedTableCells(this.editor.model.document.selection);this.isEnabled=e.isSelectionRectangular(t)}execute(){const e=this.editor.model,t=this.editor.plugins.get(an);e.change(r=>{const i=t.getSelectedTableCells(e.document.selection),o=i.shift(),{mergeWidth:s,mergeHeight:a}=E1e(o,i,t);Ot("colspan",s,o,r),Ot("rowspan",a,o,r);for(const c of i)T1e(c,o,r);const l=o.findAncestor("table");o_(l,t),r.setSelection(o,"in")})}}function T1e(n,e,t){Pk(n)||(Pk(e)&&t.remove(t.createRangeIn(e)),t.move(t.createRangeIn(n),t.createPositionAt(e,"end"))),t.remove(n)}function Pk(n){const e=n.getChild(0);return n.childCount==1&&e.is("element","paragraph")&&e.isEmpty}function E1e(n,e,t){let r=0,i=0;for(const c of e){const{row:u,column:d}=t.getCellLocation(c);r=Ik(c,d,r,"colspan"),i=Ik(c,u,i,"rowspan")}const{row:o,column:s}=t.getCellLocation(n),a=r-s,l=i-o;return{mergeWidth:a,mergeHeight:l}}function Ik(n,e,t,r){const i=parseInt(n.getAttribute(r)||"1");return Math.max(t,e+i)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class k1e extends Me{constructor(e){super(e),this.affectsData=!1}refresh(){const t=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(this.editor.model.document.selection);this.isEnabled=t.length>0}execute(){const e=this.editor.model,t=this.editor.plugins.get("TableUtils"),r=t.getSelectionAffectedTableCells(e.document.selection),i=t.getRowIndexes(r),o=r[0].findAncestor("table"),s=[];for(let a=i.first;a<=i.last;a++)for(const l of o.getChild(a).getChildren())s.push(e.createRangeOn(l));e.change(a=>{a.setSelection(s)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class P1e extends Me{constructor(e){super(e),this.affectsData=!1}refresh(){const t=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(this.editor.model.document.selection);this.isEnabled=t.length>0}execute(){const e=this.editor.plugins.get("TableUtils"),t=this.editor.model,r=e.getSelectionAffectedTableCells(t.document.selection),i=r[0],o=r.pop(),s=i.findAncestor("table"),a=e.getCellLocation(i),l=e.getCellLocation(o),c=Math.min(a.column,l.column),u=Math.max(a.column,l.column),d=[];for(const f of new lt(s,{startColumn:c,endColumn:u}))d.push(t.createRangeOn(f.cell));t.change(f=>{f.setSelection(d)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function I1e(n){n.document.registerPostFixer(e=>O1e(e,n))}function O1e(n,e){const t=e.document.differ.getChanges();let r=!1;const i=new Set;for(const o of t){let s=null;o.type=="insert"&&o.name=="table"&&(s=o.position.nodeAfter),(o.type=="insert"||o.type=="remove")&&(o.name=="tableRow"||o.name=="tableCell")&&(s=o.position.findAncestor("table")),N1e(o)&&(s=o.range.start.findAncestor("table")),s&&!i.has(s)&&(r=R1e(s,n)||r,r=M1e(s,n)||r,i.add(s))}return r}function R1e(n,e){let t=!1;const r=D1e(n);if(r.length){t=!0;for(const i of r)Ot("rowspan",i.rowspan,i.cell,e,1)}return t}function M1e(n,e){let t=!1;const r=B1e(n),i=[];for(const[l,c]of r.entries())!c&&n.getChild(l).is("element","tableRow")&&i.push(l);if(i.length){t=!0;for(const l of i.reverse())e.remove(n.getChild(l)),r.splice(l,1)}const o=r.filter((l,c)=>n.getChild(c).is("element","tableRow")),s=o[0];if(!o.every(l=>l===s)){const l=o.reduce((c,u)=>u>c?u:c,0);for(const[c,u]of o.entries()){const d=l-u;if(d){for(let f=0;f<d;f++)$s(e,e.createPositionAt(n.getChild(c),"end"));t=!0}}}return t}function D1e(n){const e=parseInt(n.getAttribute("headingRows")||"0"),t=Array.from(n.getChildren()).reduce((i,o)=>o.is("element","tableRow")?i+1:i,0),r=[];for(const{row:i,cell:o,cellHeight:s}of new lt(n)){if(s<2)continue;const l=i<e?e:t;if(i+s>l){const c=l-i;r.push({cell:o,rowspan:c})}}return r}function B1e(n){const e=new Array(n.childCount).fill(0);for(const{rowIndex:t}of new lt(n,{includeAllSlots:!0}))e[t]++;return e}function N1e(n){if(n.type!=="attribute")return!1;const e=n.attributeKey;return e==="headingRows"||e==="colspan"||e==="rowspan"}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function L1e(n){n.document.registerPostFixer(e=>F1e(e,n))}function F1e(n,e){const t=e.document.differ.getChanges();let r=!1;for(const i of t)i.type=="insert"&&i.name=="table"&&(r=$1e(i.position.nodeAfter,n)||r),i.type=="insert"&&i.name=="tableRow"&&(r=vB(i.position.nodeAfter,n)||r),i.type=="insert"&&i.name=="tableCell"&&(r=Hy(i.position.nodeAfter,n)||r),(i.type=="remove"||i.type=="insert")&&V1e(i)&&(r=Hy(i.position.parent,n)||r);return r}function $1e(n,e){let t=!1;for(const r of n.getChildren())r.is("element","tableRow")&&(t=vB(r,e)||t);return t}function vB(n,e){let t=!1;for(const r of n.getChildren())t=Hy(r,e)||t;return t}function Hy(n,e){if(n.childCount==0)return e.insertElement("paragraph",n),!0;const t=Array.from(n.getChildren()).filter(r=>r.is("$text"));for(const r of t)e.wrap(e.createRangeOn(r),"paragraph");return!!t.length}function V1e(n){return n.position.parent.is("element","tableCell")?n.type=="insert"&&n.name=="$text"||n.type=="remove":!1}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function z1e(n,e){const t=n.document.differ;for(const r of t.getChanges()){let i,o=!1;if(r.type=="attribute"){const c=r.range.start.nodeAfter;if(!c||!c.is("element","table")||r.attributeKey!="headingRows"&&r.attributeKey!="headingColumns")continue;i=c,o=r.attributeKey=="headingRows"}else(r.name=="tableRow"||r.name=="tableCell")&&(i=r.position.findAncestor("table"),o=r.name=="tableRow");if(!i)continue;const s=i.getAttribute("headingRows")||0,a=i.getAttribute("headingColumns")||0,l=new lt(i);for(const c of l){const d=c.row<s||c.column<a?"th":"td",f=e.mapper.toViewElement(c.cell);f&&f.is("element")&&f.name!=d&&e.reconvertItem(o?c.cell.parent:c.cell)}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function j1e(n,e){const t=n.document.differ,r=new Set;for(const i of t.getChanges()){const o=i.type=="attribute"?i.range.start.parent:i.position.parent;o.is("element","tableCell")&&r.add(o)}for(const i of r.values()){const o=Array.from(i.getChildren()).filter(s=>W1e(s,e.mapper));for(const s of o)e.reconvertItem(s)}}function W1e(n,e){if(!n.is("element","paragraph"))return!1;const t=e.toViewElement(n);return t?sB(n)!==t.is("element","span"):!1}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class a_ extends W{static get pluginName(){return"TableEditing"}static get requires(){return[an]}constructor(e){super(e),this._additionalSlots=[]}init(){const e=this.editor,t=e.model,r=t.schema,i=e.conversion,o=e.plugins.get(an);r.register("table",{inheritAllFrom:"$blockObject",allowAttributes:["headingRows","headingColumns"]}),r.register("tableRow",{allowIn:"table",isLimit:!0}),r.register("tableCell",{allowContentOf:"$container",allowIn:"tableRow",allowAttributes:["colspan","rowspan"],isLimit:!0,isSelectable:!0}),i.for("upcast").add($_e()),i.for("upcast").add(V_e()),i.for("editingDowncast").elementToStructure({model:{name:"table",attributes:["headingRows"]},view:wk(o,{asWidget:!0,additionalSlots:this._additionalSlots})}),i.for("dataDowncast").elementToStructure({model:{name:"table",attributes:["headingRows"]},view:wk(o,{additionalSlots:this._additionalSlots})}),i.for("upcast").elementToElement({model:"tableRow",view:"tr"}),i.for("upcast").add(z_e()),i.for("downcast").elementToElement({model:"tableRow",view:G_e()}),i.for("upcast").elementToElement({model:"tableCell",view:"td"}),i.for("upcast").elementToElement({model:"tableCell",view:"th"}),i.for("upcast").add(yk("td")),i.for("upcast").add(yk("th")),i.for("editingDowncast").elementToElement({model:"tableCell",view:_k({asWidget:!0})}),i.for("dataDowncast").elementToElement({model:"tableCell",view:_k()}),i.for("editingDowncast").elementToElement({model:"paragraph",view:Ck({asWidget:!0}),converterPriority:"high"}),i.for("dataDowncast").elementToElement({model:"paragraph",view:Ck(),converterPriority:"high"}),i.for("downcast").attributeToAttribute({model:"colspan",view:"colspan"}),i.for("upcast").attributeToAttribute({model:{key:"colspan",value:Ok("colspan")},view:"colspan"}),i.for("downcast").attributeToAttribute({model:"rowspan",view:"rowspan"}),i.for("upcast").attributeToAttribute({model:{key:"rowspan",value:Ok("rowspan")},view:"rowspan"}),e.config.define("table.defaultHeadings.rows",0),e.config.define("table.defaultHeadings.columns",0),e.commands.add("insertTable",new Y_e(e)),e.commands.add("insertTableRowAbove",new Sk(e,{order:"above"})),e.commands.add("insertTableRowBelow",new Sk(e,{order:"below"})),e.commands.add("insertTableColumnLeft",new xk(e,{order:"left"})),e.commands.add("insertTableColumnRight",new xk(e,{order:"right"})),e.commands.add("removeTableRow",new t1e(e)),e.commands.add("removeTableColumn",new r1e(e)),e.commands.add("splitTableCellVertically",new Ak(e,{direction:"vertically"})),e.commands.add("splitTableCellHorizontally",new Ak(e,{direction:"horizontally"})),e.commands.add("mergeTableCells",new A1e(e)),e.commands.add("mergeTableCellRight",new Sf(e,{direction:"right"})),e.commands.add("mergeTableCellLeft",new Sf(e,{direction:"left"})),e.commands.add("mergeTableCellDown",new Sf(e,{direction:"down"})),e.commands.add("mergeTableCellUp",new Sf(e,{direction:"up"})),e.commands.add("setTableColumnHeader",new a1e(e)),e.commands.add("setTableRowHeader",new s1e(e)),e.commands.add("selectTableRow",new k1e(e)),e.commands.add("selectTableColumn",new P1e(e)),I1e(t),L1e(t),this.listenTo(t.document,"change:data",()=>{z1e(t,e.editing),j1e(t,e.editing)})}registerAdditionalSlot(e){this._additionalSlots.push(e)}}function Ok(n){return e=>{const t=parseInt(e.getAttribute(n));return Number.isNaN(t)||t<=0?null:t}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Rk extends be{constructor(e){super(e);const t=this.bindTemplate;this.items=this._createGridCollection(),this.keystrokes=new mn,this.focusTracker=new Ut,this.set("rows",0),this.set("columns",0),this.bind("label").to(this,"columns",this,"rows",(r,i)=>`${i} × ${r}`),this.setTemplate({tag:"div",attributes:{class:["ck"]},children:[{tag:"div",attributes:{class:["ck-insert-table-dropdown__grid"]},on:{"mouseover@.ck-insert-table-dropdown-grid-box":t.to("boxover")},children:this.items},{tag:"div",attributes:{class:["ck","ck-insert-table-dropdown__label"],"aria-hidden":!0},children:[{text:t.to("label")}]}],on:{mousedown:t.to(r=>{r.preventDefault()}),click:t.to(()=>{this.fire("execute")})}}),this.on("boxover",(r,i)=>{const{row:o,column:s}=i.target.dataset;this.items.get((parseInt(o,10)-1)*10+(parseInt(s,10)-1)).focus()}),this.focusTracker.on("change:focusedElement",(r,i,o)=>{if(!o)return;const{row:s,column:a}=o.dataset;this.set({rows:parseInt(s),columns:parseInt(a)})}),this.on("change:columns",()=>this._highlightGridBoxes()),this.on("change:rows",()=>this._highlightGridBoxes())}render(){super.render(),MM({keystrokeHandler:this.keystrokes,focusTracker:this.focusTracker,gridItems:this.items,numberOfColumns:10,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection});for(const e of this.items)this.focusTracker.add(e.element);this.keystrokes.listenTo(this.element)}reset(){this.set({rows:1,columns:1})}focus(){this.items.get(0).focus()}focusLast(){this.items.get(0).focus()}_highlightGridBoxes(){const e=this.rows,t=this.columns;this.items.map((r,i)=>{const o=Math.floor(i/10),s=i%10,a=o<e&&s<t;r.set("isOn",a)})}_createGridButton(e,t,r,i){const o=new Ne(e);return o.set({label:i,class:"ck-insert-table-dropdown-grid-box"}),o.extendTemplate({attributes:{"data-row":t,"data-column":r}}),o}_createGridCollection(){const e=[];for(let t=0;t<100;t++){const r=Math.floor(t/10),i=t%10,o=`${r+1} × ${i+1}`;e.push(this._createGridButton(this.locale,r+1,i+1,o))}return this.createCollection(e)}}const H1e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M18 7v1H2V7h16zm0 5v1H2v-1h16z" opacity=".6"/><path d="M14 1v18a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V1a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1zm-2 1H8v4h4V2zm0 6H8v4h4V8zm0 6H8v4h4v-4z"/></svg>',U1e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M7 2h1v16H7V2zm5 0h1v16h-1V2z" opacity=".6"/><path d="M1 6h18a1 1 0 0 1 1 1v6a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1zm1 2v4h4V8H2zm6 0v4h4V8H8zm6 0v4h4V8h-4z"/></svg>',G1e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M7 2h1v16H7V2zm5 0h1v7h-1V2zm6 5v1H2V7h16zM8 12v1H2v-1h6z" opacity=".6"/><path d="M7 7h12a1 1 0 0 1 1 1v11a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1zm1 2v9h10V9H8z"/></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class q1e extends W{static get pluginName(){return"TableUI"}init(){const e=this.editor,t=this.editor.t,i=e.locale.contentLanguageDirection==="ltr";e.ui.componentFactory.add("insertTable",o=>{const s=e.commands.get("insertTable"),a=Ln(o);a.bind("isEnabled").to(s),a.buttonView.set({icon:Ee.table,label:t("Insert table"),tooltip:!0});let l;return a.on("change:isOpen",()=>{l||(l=new Rk(o),a.panelView.children.add(l),l.delegate("execute").to(a),a.on("execute",()=>{e.execute("insertTable",{rows:l.rows,columns:l.columns}),e.editing.view.focus()}))}),a}),e.ui.componentFactory.add("menuBar:insertTable",o=>{const s=e.commands.get("insertTable"),a=new fr(o),l=new Rk(o);return l.delegate("execute").to(a),a.on("change:isOpen",(c,u,d)=>{d||l.reset()}),l.on("execute",()=>{e.execute("insertTable",{rows:l.rows,columns:l.columns}),e.editing.view.focus()}),a.buttonView.set({label:t("Table"),icon:Ee.table}),a.panelView.children.add(l),a.bind("isEnabled").to(s),a}),e.ui.componentFactory.add("tableColumn",o=>{const s=[{type:"switchbutton",model:{commandName:"setTableColumnHeader",label:t("Header column"),bindIsOn:!0}},{type:"separator"},{type:"button",model:{commandName:i?"insertTableColumnLeft":"insertTableColumnRight",label:t("Insert column left")}},{type:"button",model:{commandName:i?"insertTableColumnRight":"insertTableColumnLeft",label:t("Insert column right")}},{type:"button",model:{commandName:"removeTableColumn",label:t("Delete column")}},{type:"button",model:{commandName:"selectTableColumn",label:t("Select column")}}];return this._prepareDropdown(t("Column"),H1e,s,o)}),e.ui.componentFactory.add("tableRow",o=>{const s=[{type:"switchbutton",model:{commandName:"setTableRowHeader",label:t("Header row"),bindIsOn:!0}},{type:"separator"},{type:"button",model:{commandName:"insertTableRowAbove",label:t("Insert row above")}},{type:"button",model:{commandName:"insertTableRowBelow",label:t("Insert row below")}},{type:"button",model:{commandName:"removeTableRow",label:t("Delete row")}},{type:"button",model:{commandName:"selectTableRow",label:t("Select row")}}];return this._prepareDropdown(t("Row"),U1e,s,o)}),e.ui.componentFactory.add("mergeTableCells",o=>{const s=[{type:"button",model:{commandName:"mergeTableCellUp",label:t("Merge cell up")}},{type:"button",model:{commandName:i?"mergeTableCellRight":"mergeTableCellLeft",label:t("Merge cell right")}},{type:"button",model:{commandName:"mergeTableCellDown",label:t("Merge cell down")}},{type:"button",model:{commandName:i?"mergeTableCellLeft":"mergeTableCellRight",label:t("Merge cell left")}},{type:"separator"},{type:"button",model:{commandName:"splitTableCellVertically",label:t("Split cell vertically")}},{type:"button",model:{commandName:"splitTableCellHorizontally",label:t("Split cell horizontally")}}];return this._prepareMergeSplitButtonDropdown(t("Merge cells"),G1e,s,o)})}_prepareDropdown(e,t,r,i){const o=this.editor,s=Ln(i),a=this._fillDropdownWithListOptions(s,r);return s.buttonView.set({label:e,icon:t,tooltip:!0}),s.bind("isEnabled").toMany(a,"isEnabled",(...l)=>l.some(c=>c)),this.listenTo(s,"execute",l=>{o.execute(l.source.commandName),l.source instanceof xg||o.editing.view.focus()}),s}_prepareMergeSplitButtonDropdown(e,t,r,i){const o=this.editor,s=Ln(i,ud),a="mergeTableCells",l=o.commands.get(a),c=this._fillDropdownWithListOptions(s,r);return s.buttonView.set({label:e,icon:t,tooltip:!0,isEnabled:!0}),s.bind("isEnabled").toMany([l,...c],"isEnabled",(...u)=>u.some(d=>d)),this.listenTo(s.buttonView,"execute",()=>{o.execute(a),o.editing.view.focus()}),this.listenTo(s,"execute",u=>{o.execute(u.source.commandName),o.editing.view.focus()}),s}_fillDropdownWithListOptions(e,t){const r=this.editor,i=[],o=new Vn;for(const s of t)K1e(s,r,i,o);return fd(e,o),i}}function K1e(n,e,t,r){if(n.type==="button"||n.type==="switchbutton"){const i=n.model=new rl(n.model),{commandName:o,bindIsOn:s}=n.model,a=e.commands.get(o);t.push(a),i.set({commandName:o}),i.bind("isEnabled").to(a),s&&i.bind("isOn").to(a,"value"),i.set({withText:!0})}r.add(n)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class vs extends W{static get pluginName(){return"TableSelection"}static get requires(){return[an,an]}init(){const e=this.editor,t=e.model,r=e.editing.view;this.listenTo(t,"deleteContent",(i,o)=>this._handleDeleteContent(i,o),{priority:"high"}),this.listenTo(r.document,"insertText",(i,o)=>this._handleInsertTextEvent(i,o),{priority:"high"}),this._defineSelectionConverter(),this._enablePluginDisabling()}getSelectedTableCells(){const e=this.editor.plugins.get(an),t=this.editor.model.document.selection,r=e.getSelectedTableCells(t);return r.length==0?null:r}getSelectionAsFragment(){const e=this.editor.plugins.get(an),t=this.getSelectedTableCells();return t?this.editor.model.change(r=>{const i=r.createDocumentFragment(),{first:o,last:s}=e.getColumnIndexes(t),{first:a,last:l}=e.getRowIndexes(t),c=t[0].findAncestor("table");let u=l,d=s;if(e.isSelectionRectangular(t)){const m={firstColumn:o,lastColumn:s,firstRow:a,lastRow:l};u=hB(c,m),d=mB(c,m)}const h=aB(c,{startRow:a,startColumn:o,endRow:u,endColumn:d},r);return r.insert(h,i,0),i}):null}setCellSelection(e,t){const r=this._getCellsToSelect(e,t);this.editor.model.change(i=>{i.setSelection(r.cells.map(o=>i.createRangeOn(o)),{backward:r.backward})})}getFocusCell(){const r=[...this.editor.model.document.selection.getRanges()].pop().getContainedElement();return r&&r.is("element","tableCell")?r:null}getAnchorCell(){const e=this.editor.model.document.selection,r=ln(e.getRanges()).getContainedElement();return r&&r.is("element","tableCell")?r:null}_defineSelectionConverter(){const e=this.editor,t=new Set;e.conversion.for("editingDowncast").add(i=>i.on("selection",(o,s,a)=>{const l=a.writer;r(l);const c=this.getSelectedTableCells();if(!c)return;for(const d of c){const f=a.mapper.toViewElement(d);l.addClass("ck-editor__editable_selected",f),t.add(f)}const u=a.mapper.toViewElement(c[c.length-1]);l.setSelection(u,0)},{priority:"lowest"}));function r(i){for(const o of t)i.removeClass("ck-editor__editable_selected",o);t.clear()}}_enablePluginDisabling(){const e=this.editor;this.on("change:isEnabled",()=>{if(!this.isEnabled){const t=this.getSelectedTableCells();if(!t)return;e.model.change(r=>{const i=r.createPositionAt(t[0],0),o=e.model.schema.getNearestSelectionRange(i);r.setSelection(o)})}})}_handleDeleteContent(e,t){const r=this.editor.plugins.get(an),i=t[0],o=t[1],s=this.editor.model,a=!o||o.direction=="backward",l=r.getSelectedTableCells(i);l.length&&(e.stop(),s.change(c=>{const u=l[a?l.length-1:0];s.change(f=>{for(const h of l)s.deleteContent(f.createSelection(h,"in"))});const d=s.schema.getNearestSelectionRange(c.createPositionAt(u,0));i.is("documentSelection")?c.setSelection(d):i.setTo(d)}))}_handleInsertTextEvent(e,t){const r=this.editor,i=this.getSelectedTableCells();if(!i)return;const o=r.editing.view,s=r.editing.mapper,a=i.map(l=>o.createRangeOn(s.toViewElement(l)));t.selection=o.createSelection(a)}_getCellsToSelect(e,t){const r=this.editor.plugins.get("TableUtils"),i=r.getCellLocation(e),o=r.getCellLocation(t),s=Math.min(i.row,o.row),a=Math.max(i.row,o.row),l=Math.min(i.column,o.column),c=Math.max(i.column,o.column),u=new Array(a-s+1).fill(null).map(()=>[]),d={startRow:s,endRow:a,startColumn:l,endColumn:c};for(const{row:m,cell:g}of new lt(e.findAncestor("table"),d))u[m-s].push(g);const f=o.row<i.row,h=o.column<i.column;return f&&u.reverse(),h&&u.forEach(m=>m.reverse()),{cells:u.flat(),backward:f||h}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Y1e extends W{static get pluginName(){return"TableClipboard"}static get requires(){return[Rc,si,vs,an]}init(){const e=this.editor,t=e.editing.view.document;this.listenTo(t,"copy",(r,i)=>this._onCopyCut(r,i)),this.listenTo(t,"cut",(r,i)=>this._onCopyCut(r,i)),this.listenTo(e.model,"insertContent",(r,[i,o])=>this._onInsertContent(r,i,o),{priority:"high"}),this.decorate("_replaceTableSlotCell")}_onCopyCut(e,t){const r=this.editor.editing.view,i=this.editor.plugins.get(vs),o=this.editor.plugins.get(Rc);i.getSelectedTableCells()&&(e.name=="cut"&&!this.editor.model.canEditAt(this.editor.model.document.selection)||(t.preventDefault(),e.stop(),this.editor.model.enqueueChange({isUndoable:e.name==="cut"},()=>{const s=o._copySelectedFragmentWithMarkers(e.name,this.editor.model.document.selection,()=>i.getSelectionAsFragment());r.document.fire("clipboardOutput",{dataTransfer:t.dataTransfer,content:this.editor.data.toView(s),method:e.name})})))}_onInsertContent(e,t,r){if(r&&!r.is("documentSelection"))return;const i=this.editor.model,o=this.editor.plugins.get(an),s=this.editor.plugins.get(Rc),a=this.getTableIfOnlyTableInContent(t,i);if(!a)return;const l=o.getSelectionAffectedTableCells(i.document.selection);if(!l.length){o_(a,o);return}e.stop(),t.is("documentFragment")?s._pasteMarkersIntoTransformedElement(t.markers,c=>this._replaceSelectedCells(a,l,c)):this.editor.model.change(c=>{this._replaceSelectedCells(a,l,c)})}_replaceSelectedCells(e,t,r){const i=this.editor.plugins.get(an),o={width:i.getColumns(e),height:i.getRows(e)},s=X1e(t,o,r,i),a=s.lastRow-s.firstRow+1,l=s.lastColumn-s.firstColumn+1,c={startRow:0,startColumn:0,endRow:Math.min(a,o.height)-1,endColumn:Math.min(l,o.width)-1};e=aB(e,c,r);const u=t[0].findAncestor("table"),d=this._replaceSelectedCellsWithPasted(e,o,u,s,r);if(this.editor.plugins.get("TableSelection").isEnabled){const f=i.sortRanges(d.map(h=>r.createRangeOn(h)));r.setSelection(f)}else r.setSelection(d[0],0);return u}_replaceSelectedCellsWithPasted(e,t,r,i,o){const{width:s,height:a}=t,l=J1e(e,s,a),c=[...new lt(r,{startRow:i.firstRow,endRow:i.lastRow,startColumn:i.firstColumn,endColumn:i.lastColumn,includeAllSlots:!0})],u=[];let d;for(const p of c){const{row:b,column:y}=p;y===i.firstColumn&&(d=p.getPositionBefore());const C=b-i.firstRow,A=y-i.firstColumn,w=l[C%a][A%s],S=w?o.cloneElement(w):null,_=this._replaceTableSlotCell(p,S,d,o);_&&(fB(_,b,y,i.lastRow,i.lastColumn,o),u.push(_),d=o.createPositionAfter(_))}const f=parseInt(r.getAttribute("headingRows")||"0"),h=parseInt(r.getAttribute("headingColumns")||"0"),m=i.firstRow<f&&f<=i.lastRow,g=i.firstColumn<h&&h<=i.lastColumn;if(m){const p={first:i.firstColumn,last:i.lastColumn},b=Uy(r,f,p,o,i.firstRow);u.push(...b)}if(g){const p={first:i.firstRow,last:i.lastRow},b=Gy(r,h,p,o);u.push(...b)}return u}_replaceTableSlotCell(e,t,r,i){const{cell:o,isAnchor:s}=e;return s&&i.remove(o),t?(i.insert(t,r),t):null}getTableIfOnlyTableInContent(e,t){if(!e.is("documentFragment")&&!e.is("element"))return null;if(e.is("element","table"))return e;if(e.childCount==1&&e.getChild(0).is("element","table"))return e.getChild(0);const r=t.createRangeIn(e);for(const i of r.getItems())if(i.is("element","table")){const o=t.createRange(r.start,t.createPositionBefore(i));if(t.hasContent(o,{ignoreWhitespaces:!0}))return null;const s=t.createRange(t.createPositionAfter(i),r.end);return t.hasContent(s,{ignoreWhitespaces:!0})?null:i}return null}}function X1e(n,e,t,r){const i=n[0].findAncestor("table"),o=r.getColumnIndexes(n),s=r.getRowIndexes(n),a={firstColumn:o.first,lastColumn:o.last,firstRow:s.first,lastRow:s.last},l=n.length===1;return l&&(a.lastRow+=e.height-1,a.lastColumn+=e.width-1,Z1e(i,a.lastRow+1,a.lastColumn+1,r)),l||!r.isSelectionRectangular(n)?Q1e(i,a,t):(a.lastRow=hB(i,a),a.lastColumn=mB(i,a)),a}function Z1e(n,e,t,r){const i=r.getColumns(n),o=r.getRows(n);t>i&&r.insertColumns(n,{at:i,columns:t-i}),e>o&&r.insertRows(n,{at:o,rows:e-o})}function J1e(n,e,t){const r=new Array(t).fill(null).map(()=>new Array(e).fill(null));for(const{column:i,row:o,cell:s}of new lt(n))r[o][i]=s;return r}function Q1e(n,e,t){const{firstRow:r,lastRow:i,firstColumn:o,lastColumn:s}=e,a={first:r,last:i},l={first:o,last:s};Gy(n,o,a,t),Gy(n,s+1,a,t),Uy(n,r,l,t),Uy(n,i+1,l,t,r)}function Uy(n,e,t,r,i=0){return e<1?void 0:lB(n,e,i).filter(({column:a,cellWidth:l})=>bB(a,l,t)).map(({cell:a})=>cB(a,e,r))}function Gy(n,e,t,r){return e<1?void 0:uB(n,e).filter(({row:s,cellHeight:a})=>bB(s,a,t)).map(({cell:s,column:a})=>dB(s,a,e,r))}function bB(n,e,t){const r=n+e-1,{first:i,last:o}=t,s=n>=i&&n<=o,a=n<i&&r>=i;return s||a}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class eCe extends W{static get pluginName(){return"TableKeyboard"}static get requires(){return[vs,an]}init(){const e=this.editor,r=e.editing.view.document,i=e.t;this.listenTo(r,"arrowKey",(...o)=>this._onArrowKey(...o),{context:"table"}),this.listenTo(r,"tab",(...o)=>this._handleTabOnSelectedTable(...o),{context:"figure"}),this.listenTo(r,"tab",(...o)=>this._handleTab(...o),{context:["th","td"]}),e.accessibility.addKeystrokeInfoGroup({id:"table",label:i("Keystrokes that can be used in a table cell"),keystrokes:[{label:i("Move the selection to the next cell"),keystroke:"Tab"},{label:i("Move the selection to the previous cell"),keystroke:"Shift+Tab"},{label:i("Insert a new table row (when in the last cell of a table)"),keystroke:"Tab"},{label:i("Navigate through the table"),keystroke:[["arrowup"],["arrowright"],["arrowdown"],["arrowleft"]]}]})}_handleTabOnSelectedTable(e,t){const r=this.editor,o=r.model.document.selection.getSelectedElement();!o||!o.is("element","table")||(t.preventDefault(),t.stopPropagation(),e.stop(),r.model.change(s=>{s.setSelection(s.createRangeIn(o.getChild(0).getChild(0)))}))}_handleTab(e,t){const r=this.editor,i=this.editor.plugins.get(an),o=this.editor.plugins.get("TableSelection"),s=r.model.document.selection,a=!t.shiftKey;let l=i.getTableCellsContainingSelection(s)[0];if(l||(l=o.getFocusCell()),!l)return;t.preventDefault(),t.stopPropagation(),e.stop();const c=l.parent,u=c.parent,d=u.getChildIndex(c),f=c.getChildIndex(l),h=f===0;if(!a&&h&&d===0){r.model.change(b=>{b.setSelection(b.createRangeOn(u))});return}const m=f===c.childCount-1,g=d===i.getRows(u)-1;if(a&&g&&m&&(r.execute("insertTableRowBelow"),d===i.getRows(u)-1)){r.model.change(b=>{b.setSelection(b.createRangeOn(u))});return}let p;if(a&&m)p=u.getChild(d+1).getChild(0);else if(!a&&h){const b=u.getChild(d-1);p=b.getChild(b.childCount-1)}else p=c.getChild(f+(a?1:-1));r.model.change(b=>{b.setSelection(b.createRangeIn(p))})}_onArrowKey(e,t){const r=this.editor,i=t.keyCode,o=S0(i,r.locale.contentLanguageDirection);this._handleArrowKeys(o,t.shiftKey)&&(t.preventDefault(),t.stopPropagation(),e.stop())}_handleArrowKeys(e,t){const r=this.editor.plugins.get(an),i=this.editor.plugins.get("TableSelection"),o=this.editor.model,s=o.document.selection,a=["right","down"].includes(e),l=r.getSelectedTableCells(s);if(l.length){let u;return t?u=i.getFocusCell():u=a?l[l.length-1]:l[0],this._navigateFromCellInDirection(u,e,t),!0}const c=s.focus.findAncestor("tableCell");/* istanbul ignore if: paranoid check -- @preserve */if(!c)return!1;if(!s.isCollapsed)if(t){if(s.isBackward==a&&!s.containsEntireContent(c))return!1}else{const u=s.getSelectedElement();if(!u||!o.schema.isObject(u))return!1}return this._isSelectionAtCellEdge(s,c,a)?(this._navigateFromCellInDirection(c,e,t),!0):!1}_isSelectionAtCellEdge(e,t,r){const i=this.editor.model,o=this.editor.model.schema,s=r?e.getLastPosition():e.getFirstPosition();if(!o.getLimitElement(s).is("element","tableCell"))return i.createPositionAt(t,r?"end":0).isTouching(s);const a=i.createSelection(s);return i.modifySelection(a,{direction:r?"forward":"backward"}),s.isEqual(a.focus)}_navigateFromCellInDirection(e,t,r=!1){const i=this.editor.model,o=e.findAncestor("table"),s=[...new lt(o,{includeAllSlots:!0})],{row:a,column:l}=s[s.length-1],c=s.find(({cell:y})=>y==e);let{row:u,column:d}=c;switch(t){case"left":d--;break;case"up":u--;break;case"right":d+=c.cellWidth;break;case"down":u+=c.cellHeight;break}const f=u<0||u>a,h=d<0&&u<=0,m=d>l&&u>=a;if(f||h||m){i.change(y=>{y.setSelection(y.createRangeOn(o))});return}d<0?(d=r?0:l,u--):d>l&&(d=r?l:0,u++);const g=s.find(y=>y.row==u&&y.column==d).cell,p=["right","down"].includes(t),b=this.editor.plugins.get("TableSelection");if(r&&b.isEnabled){const y=b.getAnchorCell()||e;b.setCellSelection(y,g)}else{const y=i.createPositionAt(g,p?0:"end");i.change(C=>{C.setSelection(y)})}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class yB extends $o{constructor(){super(...arguments),this.domEventType=["mousemove","mouseleave"]}onDomEvent(e){this.fire(e.type,e)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class tCe extends W{static get pluginName(){return"TableMouse"}static get requires(){return[vs,an]}init(){this.editor.editing.view.addObserver(yB),this._enableShiftClickSelection(),this._enableMouseDragSelection()}_enableShiftClickSelection(){const e=this.editor,t=e.plugins.get(an);let r=!1;const i=e.plugins.get(vs);this.listenTo(e.editing.view.document,"mousedown",(o,s)=>{const a=e.model.document.selection;if(!this.isEnabled||!i.isEnabled||!s.domEvent.shiftKey)return;const l=i.getAnchorCell()||t.getTableCellsContainingSelection(a)[0];if(!l)return;const c=this._getModelTableCellFromDomEvent(s);c&&Mk(l,c)&&(r=!0,i.setCellSelection(l,c),s.preventDefault())}),this.listenTo(e.editing.view.document,"mouseup",()=>{r=!1}),this.listenTo(e.editing.view.document,"selectionChange",o=>{r&&o.stop()},{priority:"highest"})}_enableMouseDragSelection(){const e=this.editor;let t,r,i=!1,o=!1;const s=e.plugins.get(vs);this.listenTo(e.editing.view.document,"mousedown",(a,l)=>{!this.isEnabled||!s.isEnabled||l.domEvent.shiftKey||l.domEvent.ctrlKey||l.domEvent.altKey||(t=this._getModelTableCellFromDomEvent(l))}),this.listenTo(e.editing.view.document,"mousemove",(a,l)=>{if(!l.domEvent.buttons||!t)return;const c=this._getModelTableCellFromDomEvent(l);c&&Mk(t,c)&&(r=c,!i&&r!=t&&(i=!0)),i&&(o=!0,s.setCellSelection(t,r),l.preventDefault())}),this.listenTo(e.editing.view.document,"mouseup",()=>{i=!1,o=!1,t=null,r=null}),this.listenTo(e.editing.view.document,"selectionChange",a=>{o&&a.stop()},{priority:"highest"})}_getModelTableCellFromDomEvent(e){const t=e.target,r=this.editor.editing.view.createPositionAt(t,0);return this.editor.editing.mapper.toModelPosition(r).parent.findAncestor("tableCell",{includeSelf:!0})}}function Mk(n,e){return n.parent.parent==e.parent.parent}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let nCe=class extends W{static get requires(){return[a_,q1e,vs,tCe,eCe,Y1e,Ls]}static get pluginName(){return"Table"}};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function rCe(n){const e=n.getSelectedElement();return e&&wB(e)?e:null}function iCe(n){const e=n.getFirstPosition();if(!e)return null;let t=e.parent;for(;t;){if(t.is("element")&&wB(t))return t;t=t.parent}return null}function wB(n){return!!n.getCustomProperty("table")&&$t(n)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class oCe extends W{static get requires(){return[sm]}static get pluginName(){return"TableToolbar"}afterInit(){const e=this.editor,t=e.t,r=e.plugins.get(sm),i=e.config.get("table.contentToolbar"),o=e.config.get("table.tableToolbar");i&&r.register("tableContent",{ariaLabel:t("Table toolbar"),items:i,getRelatedElement:iCe}),o&&r.register("table",{ariaLabel:t("Table toolbar"),items:o,getRelatedElement:rCe})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Yo=Cn.defaultPositions;Yo.northArrowSouth,Yo.northArrowSouthWest,Yo.northArrowSouthEast,Yo.southArrowNorth,Yo.southArrowNorthWest,Yo.southArrowNorthEast,Yo.viewportStickyNorth;/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function sCe(n,e){const t=parseFloat(n);return Number.isNaN(t)||String(t)!==String(n)?n:`${t}${e}`}function aCe(n,e={}){const t={borderStyle:"none",borderWidth:"",borderColor:"",backgroundColor:"",width:"",height:"",...n};return e.includeAlignmentProperty&&!t.alignment&&(t.alignment="center"),e.includePaddingProperty&&!t.padding&&(t.padding=""),e.includeVerticalAlignmentProperty&&!t.verticalAlignment&&(t.verticalAlignment="middle"),e.includeHorizontalAlignmentProperty&&!t.horizontalAlignment&&(t.horizontalAlignment=e.isRightToLeftContent?"right":"left"),t}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class lCe extends Me{constructor(e,t,r){super(e),this.attributeName=t,this._defaultValue=r}refresh(){const e=this.editor,r=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(e.model.document.selection);this.isEnabled=!!r.length,this.value=this._getSingleValue(r)}execute(e={}){const{value:t,batch:r}=e,i=this.editor.model,s=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(i.document.selection),a=this._getValueToSet(t);i.enqueueChange(r,l=>{a?s.forEach(c=>l.setAttribute(this.attributeName,a,c)):s.forEach(c=>l.removeAttribute(this.attributeName,c))})}_getAttribute(e){if(!e)return;const t=e.getAttribute(this.attributeName);if(t!==this._defaultValue)return t}_getValueToSet(e){if(e!==this._defaultValue)return e}_getSingleValue(e){const t=this._getAttribute(e[0]);return e.every(i=>this._getAttribute(i)===t)?t:void 0}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class cCe extends lCe{constructor(e,t){super(e,"tableCellWidth",t)}_getValueToSet(e){if(e=sCe(e,"px"),e!==this._defaultValue)return e}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class uCe extends W{static get pluginName(){return"TableCellWidthEditing"}static get requires(){return[a_]}init(){const e=this.editor,t=aCe(e.config.get("table.tableCellProperties.defaultProperties"));F_e(e.model.schema,e.conversion,{modelAttribute:"tableCellWidth",styleName:"width",defaultValue:t.width}),e.commands.add("tableCellWidth",new cCe(e,t.width))}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class dCe extends Me{refresh(){this.isEnabled=!0}execute(e={}){const{model:t,plugins:r}=this.editor;let{table:i=t.document.selection.getSelectedElement(),columnWidths:o,tableWidth:s}=e;o&&(o=Array.isArray(o)?o:o.split(",")),t.change(a=>{s?a.setAttribute("tableWidth",s,i):a.removeAttribute("tableWidth",i);const l=r.get("TableColumnResizeEditing").getColumnGroupElement(i);if(!o&&!l)return;if(!o)return a.remove(l);const c=s_(o);if(l)Array.from(l.getChildren()).forEach((u,d)=>a.setAttribute("columnWidth",c[d],u));else{const u=a.createElement("tableColumnGroup");c.forEach(d=>a.appendElement("tableColumn",{columnWidth:d},u)),a.append(u,i)}})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function fCe(n){return e=>e.on("element:colgroup",(t,r,i)=>{const o=r.modelCursor.findAncestor("table"),s=bd(o);if(!s)return;const a=yd(s),l=n.getColumns(o);let c=b1e(s,i.writer);c=Array.from({length:l},(u,d)=>c[d]||"auto"),(c.length!=a.length||c.includes("auto"))&&pB(a,s,s_(c),i.writer)},{priority:"low"})}function hCe(){return n=>n.on("insert:table",(e,t,r)=>{const i=r.writer,o=t.item,s=r.mapper.toViewElement(o),a=s.is("element","table")?s:Array.from(s.getChildren()).find(c=>c.is("element","table"));bd(o)?i.addClass("ck-table-resized",a):i.removeClass("ck-table-resized",a)},{priority:"low"})}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class mCe extends W{static get requires(){return[a_,an]}static get pluginName(){return"TableColumnResizeEditing"}constructor(e){super(e),this._isResizingActive=!1,this.set("_isResizingAllowed",!0),this._resizingData=null,this._domEmitter=new(nr()),this._tableUtilsPlugin=e.plugins.get("TableUtils"),this.on("change:_isResizingAllowed",(t,r,i)=>{const o=i?"removeClass":"addClass";e.editing.view.change(s=>{for(const a of e.editing.view.document.roots)s[o]("ck-column-resize_disabled",e.editing.view.document.getRoot(a.rootName))})})}init(){this._extendSchema(),this._registerPostFixer(),this._registerConverters(),this._registerResizingListeners(),this._registerResizerInserter();const e=this.editor,t=e.plugins.get("TableColumnResize");e.plugins.get("TableEditing").registerAdditionalSlot({filter:o=>o.is("element","tableColumnGroup"),positionOffset:0});const i=new dCe(e);e.commands.add("resizeTableWidth",i),e.commands.add("resizeColumnWidths",i),this.bind("_isResizingAllowed").to(e,"isReadOnly",t,"isEnabled",i,"isEnabled",(o,s,a)=>!o&&s&&a)}destroy(){this._domEmitter.stopListening(),super.destroy()}getColumnGroupElement(e){return bd(e)}getTableColumnElements(e){return yd(e)}getTableColumnsWidths(e){return v1e(e)}_extendSchema(){this.editor.model.schema.extend("table",{allowAttributes:["tableWidth"]}),this.editor.model.schema.register("tableColumnGroup",{allowIn:"table",isLimit:!0}),this.editor.model.schema.register("tableColumn",{allowIn:"tableColumnGroup",allowAttributes:["columnWidth","colSpan"],isLimit:!0})}_registerPostFixer(){const t=this.editor.model;t.document.registerPostFixer(o=>{let s=!1;for(const a of u1e(t)){const l=this.getColumnGroupElement(a),c=this.getTableColumnElements(l),u=this.getTableColumnsWidths(l);let d=s_(u);d=r(d,a,this),!Ta(u,d)&&(pB(c,l,d,o),s=!0)}return s});function r(o,s,a){const l=a._tableUtilsPlugin.getColumns(s);if(l-o.length===0)return o;const u=o.map(f=>Number(f.replace("%",""))),d=i(a.editor.model.document.differ,s);for(const f of d){const h=l-u.length;if(h===0)continue;const m=h>0,g=a._tableUtilsPlugin.getCellLocation(f).column;if(m){const p=d1e(s,a.editor),b=m1e(h,p);u.splice(g,0,...b)}else{const p=u.splice(g,Math.abs(h));u[g]+=zu(p)}}return u.map(f=>f+"%")}function i(o,s){const a=new Set;for(const l of o.getChanges())if(l.type=="insert"&&l.position.nodeAfter&&l.position.nodeAfter.name=="tableCell"&&l.position.nodeAfter.getAncestors().includes(s))a.add(l.position.nodeAfter);else if(l.type=="remove"){const c=l.position.nodeBefore||l.position.nodeAfter;c.name=="tableCell"&&c.getAncestors().includes(s)&&a.add(c)}return a}}_registerConverters(){const t=this.editor.conversion;t.for("upcast").attributeToAttribute({view:{name:"figure",key:"style",value:{width:/[\s\S]+/}},model:{name:"table",key:"tableWidth",value:r=>r.getStyle("width")}}),t.for("downcast").attributeToAttribute({model:{name:"table",key:"tableWidth"},view:r=>({name:"figure",key:"style",value:{width:r}})}),t.elementToElement({model:"tableColumnGroup",view:"colgroup"}),t.elementToElement({model:"tableColumn",view:"col"}),t.for("downcast").add(hCe()),t.for("upcast").add(fCe(this._tableUtilsPlugin)),t.for("upcast").attributeToAttribute({view:{name:"col",styles:{width:/.*/}},model:{key:"columnWidth",value:r=>{const i=r.getStyle("width");return!i||!i.endsWith("%")&&!i.endsWith("pt")?"auto":i}}}),t.for("upcast").attributeToAttribute({view:{name:"col",key:"span"},model:"colSpan"}),t.for("downcast").attributeToAttribute({model:{name:"tableColumn",key:"columnWidth"},view:r=>({key:"style",value:{width:r}})})}_registerResizingListeners(){const e=this.editor.editing.view;e.addObserver(yB),e.document.on("mousedown",this._onMouseDownHandler.bind(this),{priority:"high"}),this._domEmitter.listenTo(he.window.document,"mousemove",Ea(this._onMouseMoveHandler.bind(this),50)),this._domEmitter.listenTo(he.window.document,"mouseup",this._onMouseUpHandler.bind(this))}_onMouseDownHandler(e,t){const r=t.target;if(!r.hasClass("ck-table-column-resizer")||!this._isResizingAllowed)return;const i=this.editor,o=i.editing.mapper.toModelElement(r.findAncestor("figure"));if(!i.model.canEditAt(o))return;t.preventDefault(),e.stop();const s=c(o,this._tableUtilsPlugin,i),a=r.findAncestor("table"),l=i.editing.view;Array.from(a.getChildren()).find(f=>f.is("element","colgroup"))||l.change(f=>{u(f,s,a)}),this._isResizingActive=!0,this._resizingData=this._getResizingData(t,s),l.change(f=>d(f,a,this._resizingData));function c(f,h,m){const g=Array(h.getColumns(f)),p=new lt(f);for(const b of p){const y=m.editing.mapper.toViewElement(b.cell),C=m.editing.view.domConverter.mapViewToDom(y),A=p1e(C);(!g[b.column]||A<g[b.column])&&(g[b.column]=Yn(A))}return g}function u(f,h,m){const g=f.createContainerElement("colgroup");for(let p=0;p<h.length;p++){const b=f.createEmptyElement("col"),y=`${Yn(h[p]/zu(h)*100)}%`;f.setStyle("width",y,b),f.insert(f.createPositionAt(g,"end"),b)}f.insert(f.createPositionAt(m,0),g)}function d(f,h,m){const g=m.widths.viewFigureWidth/m.widths.viewFigureParentWidth;f.addClass("ck-table-resized",h),f.addClass("ck-table-column-resizer__active",m.elements.viewResizer),f.setStyle("width",`${Yn(g*100)}%`,h.findAncestor("figure"))}}_onMouseMoveHandler(e,t){if(!this._isResizingActive)return;if(!this._isResizingAllowed){this._onMouseUpHandler();return}const{columnPosition:r,flags:{isRightEdge:i,isTableCentered:o,isLtrContent:s},elements:{viewFigure:a,viewLeftColumn:l,viewRightColumn:c},widths:{viewFigureParentWidth:u,tableWidth:d,leftColumnWidth:f,rightColumnWidth:h}}=this._resizingData,m=-f+jy,g=i?u-d:h-jy,p=(s?1:-1)*(i&&o?2:1),b=h1e((t.clientX-r)*p,Math.min(m,0),Math.max(g,0));b!==0&&this.editor.editing.view.change(y=>{const C=Yn((f+b)*100/d);if(y.setStyle("width",`${C}%`,l),i){const A=Yn((d+b)*100/u);y.setStyle("width",`${A}%`,a)}else{const A=Yn((h-b)*100/d);y.setStyle("width",`${A}%`,c)}})}_onMouseUpHandler(){if(!this._isResizingActive)return;const{viewResizer:e,modelTable:t,viewFigure:r,viewColgroup:i}=this._resizingData.elements,o=this.editor,s=o.editing.view,a=this.getColumnGroupElement(t),l=Array.from(i.getChildren()).filter(g=>g.is("view:element")),c=a?this.getTableColumnsWidths(a):null,u=l.map(g=>g.getStyle("width")),d=!Ta(c,u),f=t.getAttribute("tableWidth"),h=r.getStyle("width"),m=f!==h;(d||m)&&(this._isResizingAllowed?o.execute("resizeTableWidth",{table:t,tableWidth:`${Yn(h)}%`,columnWidths:u}):s.change(g=>{if(c)for(const p of l)g.setStyle("width",c.shift(),p);else g.remove(i);m&&(f?g.setStyle("width",f,r):g.removeStyle("width",r)),!c&&!f&&g.removeClass("ck-table-resized",[...r.getChildren()].find(p=>p.name==="table"))})),s.change(g=>{g.removeClass("ck-table-column-resizer__active",e)}),this._isResizingActive=!1,this._resizingData=null}_getResizingData(e,t){const r=this.editor,i=e.domEvent.clientX,o=e.target,s=o.findAncestor("td")||o.findAncestor("th"),a=r.editing.mapper.toModelElement(s),l=a.findAncestor("table"),c=f1e(a,this._tableUtilsPlugin).rightEdge,u=this._tableUtilsPlugin.getColumns(l)-1,d=c===u,f=!l.hasAttribute("tableAlignment"),h=r.locale.contentLanguageDirection!=="rtl",m=s.findAncestor("table"),g=m.findAncestor("figure"),p=[...m.getChildren()].find(v=>v.is("element","colgroup")),b=p.getChild(c),y=d?void 0:p.getChild(c+1),C=Wy(r.editing.view.domConverter.mapViewToDom(g.parent)),A=Wy(r.editing.view.domConverter.mapViewToDom(g)),w=gB(l,r),S=t[c],_=d?void 0:t[c+1];return{columnPosition:i,flags:{isRightEdge:d,isTableCentered:f,isLtrContent:h},elements:{viewResizer:o,modelTable:l,viewFigure:g,viewColgroup:p,viewLeftColumn:b,viewRightColumn:y},widths:{viewFigureParentWidth:C,viewFigureWidth:A,tableWidth:w,leftColumnWidth:S,rightColumnWidth:_}}}_registerResizerInserter(){this.editor.conversion.for("editingDowncast").add(e=>{e.on("insert:tableCell",(t,r,i)=>{const o=r.item,s=i.mapper.toViewElement(o),a=i.writer;a.insert(a.createPositionAt(s,"end"),a.createUIElement("div",{class:"ck-table-column-resizer"}))},{priority:"lowest"})})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class gCe extends W{static get requires(){return[mCe,uCe]}static get pluginName(){return"TableColumnResize"}}const pCe='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:a="http://ns.adobe.com/AdobeSVGViewerExtensions/3.0/" x="0px" y="0px" viewBox="0 -0.827 20 18" enable-background="new 0 -0.827 20 18" xml:space="preserve"><defs></defs><path d="M18.182,0H1.818C0.818,0,0,0.818,0,1.818v3.627h1.818V1.801h16.363v12.753H1.818V10.9H0v3.646c0,1,0.818,1.801,1.818,1.801 h16.363c1,0,1.818-0.801,1.818-1.801V1.818C20,0.809,19.182,0,18.182,0z M9.091,11.81l3.636-3.637L9.091,4.536v2.728H0v1.818h9.091 V11.81z"></path></svg>';let xf;const vCe=new Uint8Array(16);function bCe(){if(!xf&&(xf=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!xf))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return xf(vCe)}const vn=[];for(let n=0;n<256;++n)vn.push((n+256).toString(16).slice(1));function yCe(n,e=0){return vn[n[e+0]]+vn[n[e+1]]+vn[n[e+2]]+vn[n[e+3]]+"-"+vn[n[e+4]]+vn[n[e+5]]+"-"+vn[n[e+6]]+vn[n[e+7]]+"-"+vn[n[e+8]]+vn[n[e+9]]+"-"+vn[n[e+10]]+vn[n[e+11]]+vn[n[e+12]]+vn[n[e+13]]+vn[n[e+14]]+vn[n[e+15]]}const wCe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Dk={randomUUID:wCe};function _Ce(n,e,t){if(Dk.randomUUID&&!n)return Dk.randomUUID();n=n||{};const r=n.random||(n.rng||bCe)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,yCe(r)}class CCe{constructor(e){this.editor=e,e.ui.componentFactory.add("markWord",t=>{const r=new Ne(t);r.set({label:"Mark word",icon:pCe,tooltip:!0});const i=()=>{const o=this.editor.model,a=o.document.selection,l="yellowMarker";o.change(c=>{const u=o.schema.getValidRanges(a.getRanges(),"highlight");if(a.isCollapsed){const d=a.getFirstPosition();if(a.hasAttribute("highlight")){const f=p=>p.item.hasAttribute("highlight")&&p.item.getAttribute("highlight")===this.value,h=d.getLastMatchingPosition(f,{direction:"backward"}),m=d.getLastMatchingPosition(f),g=c.createRange(h,m);this.value===l?(c.removeAttribute("highlight",g),c.removeSelectionAttribute("highlight")):(c.setAttribute("highlight",l,g),c.setSelectionAttribute("highlight",l))}else c.setSelectionAttribute("highlight",l)}else for(const d of u){let f="";for(const h of d.getItems())f+=h.data;if(a.hasAttribute("highlight")){const h=a.getAttribute("id");c.removeAttribute("highlight",d),c.removeAttribute("id",d),op.dispatch(sp.LEGAL_EDITOR_REMOVE_A_MARKER,h)}else{const h=_Ce();op.dispatch(sp.LEGAL_EDITOR_MARK_A_WORD,{text:f,id:h}),c.setAttributes({highlight:l,id:h},d)}}})};return r.on("execute",()=>{i()}),op.subscribe(sp.EDITOR_CANCEL_MARK_WORD,i),r})}forceDisabled(e){this._disableStack.add(e),this._disableStack.size==1&&(this.on("set:isEnabled",forceDisable,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(e){this._disableStack.delete(e),this._disableStack.size==0&&(this.off("set:isEnabled",forceDisable),this.isEnabled=!0)}destroy(){this.stopListening()}static get isContextPlugin(){return!1}}class SCe extends W{static get pluginName(){return"SetIdAttribute"}init(){const e=this.editor;["$text","$block"].forEach(r=>{e.model.schema.extend(r,{allowAttributes:"id"})}),e.conversion.for("downcast").attributeToElement({model:"id",view:(r,i)=>{const{writer:o}=i;return o.createAttributeElement("mark",{id:r},{priority:5})}}),e.conversion.for("upcast").elementToAttribute({view:{name:"mark",attributes:{id:!0}},model:{key:"id",value:r=>r.getAttribute("id")}})}}function xCe(n){n.model.schema.addAttributeCheck(e=>{if(e.endsWith("blockquote")||e.endsWith("blockQuote"))return!0}),n.conversion.for("upcast").elementToElement({view:"blockquote",model:(e,{writer:t})=>t.createElement("blockQuote",e.getAttributes())}),n.conversion.for("downcast").elementToElement({model:"blockQuote",view:"blockquote"}),n.conversion.for("downcast").add(e=>{e.on("attribute",(t,r,i)=>{if(r.item.name!="blockQuote")return;const o=i.writer,s=i.mapper.toViewElement(r.item);r.attributeNewValue?o.setAttribute(r.attributeKey,r.attributeNewValue,s):o.removeAttribute(r.attributeKey,s)})})}iI(()=>Promise.resolve({}),__vite__mapDeps([0]));iI(()=>Promise.resolve({}),__vite__mapDeps([1]));const ACe=uy.div`
  .ck-content {
    height: 450px;
  }
`,xIe=({content:n,setEditorState:e})=>{const[t,r]=R.useState(null),i=o=>{let s=o;o.value&&(s=o.value);const a=t.data.processor.toView(s),l=t.data.toModel(a);t.model.insertContent(l)};return R.useEffect(()=>{const o=[hve,qye,Ype,$ye,bwe,Dve,pve,Wbe,Xbe,iye,awe,dwe,Wwe,t0e,n0e,Rwe,s0e,wve,xve,F0e,d_e,T_e,D_e,gd,nCe,oCe,gCe,ove,Spe,Mpe,$pe,Pg,CCe,SCe];Eg.create(document.querySelector("#editor"),{language:"en",plugins:o,htmlSupport:{allow:[{name:/.*/,styles:!0,attributes:!0,classes:!0},{name:/.*/,attributes:{"data-fieldid":!0}}],disallow:[{name:/^.*$/,styles:"font-family"},{name:/^.*$/,styles:"font"}]},toolbar:{items:["heading","alignment","|","bold","italic","underline","|","fontSize","fontFamily","fontColor","link","bulletedList","numberedList","|","outdent","indent","|","imageUpload","blockQuote","insertTable","mediaEmbed","pageBreak","markWord","undo","redo"]},image:{resizeUnit:"px",toolbar:["imageTextAlternative","toggleImageCaption","imageStyle:inline","imageStyle:block","imageStyle:side"]},table:{contentToolbar:["tableColumn","tableRow","mergeTableCells"]},fontSize:{options:[9,10,11,12,"default",14,15,16,18,20,24],supportAllValues:!0},extraPlugins:[xCe]}).then(s=>{s.editing.view.document.on("enter",(a,l)=>{s.execute("shiftEnter"),l.preventDefault(),a.stop()},{priority:"high"}),r(s),e(s)}).catch(s=>{console.error(s)})},[]),R.useEffect(()=>{t&&i(n)},[n]),R.useEffect(()=>{t&&n&&i({value:n})},[t,n]),we.jsx(ACe,{id:"editor"})};function Hn(n){return"Minified Redux error #"+n+"; visit https://redux.js.org/Errors?code="+n+" for the full message or use the non-minified dev environment for full errors. "}var Bk=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),Nk=function(){return Math.random().toString(36).substring(7).split("").join(".")},Lk={INIT:"@@redux/INIT"+Nk(),REPLACE:"@@redux/REPLACE"+Nk()};function TCe(n){if(typeof n!="object"||n===null)return!1;for(var e=n;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e}function _B(n,e,t){var r;if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(Hn(0));if(typeof e=="function"&&typeof t>"u"&&(t=e,e=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(Hn(1));return t(_B)(n,e)}if(typeof n!="function")throw new Error(Hn(2));var i=n,o=e,s=[],a=s,l=!1;function c(){a===s&&(a=s.slice())}function u(){if(l)throw new Error(Hn(3));return o}function d(g){if(typeof g!="function")throw new Error(Hn(4));if(l)throw new Error(Hn(5));var p=!0;return c(),a.push(g),function(){if(p){if(l)throw new Error(Hn(6));p=!1,c();var y=a.indexOf(g);a.splice(y,1),s=null}}}function f(g){if(!TCe(g))throw new Error(Hn(7));if(typeof g.type>"u")throw new Error(Hn(8));if(l)throw new Error(Hn(9));try{l=!0,o=i(o,g)}finally{l=!1}for(var p=s=a,b=0;b<p.length;b++){var y=p[b];y()}return g}function h(g){if(typeof g!="function")throw new Error(Hn(10));i=g,f({type:Lk.REPLACE})}function m(){var g,p=d;return g={subscribe:function(y){if(typeof y!="object"||y===null)throw new Error(Hn(11));function C(){y.next&&y.next(u())}C();var A=p(C);return{unsubscribe:A}}},g[Bk]=function(){return this},g}return f({type:Lk.INIT}),r={dispatch:f,subscribe:d,getState:u,replaceReducer:h},r[Bk]=m,r}function Fk(n,e){return function(){return e(n.apply(this,arguments))}}function $k(n,e){if(typeof n=="function")return Fk(n,e);if(typeof n!="object"||n===null)throw new Error(Hn(16));var t={};for(var r in n){var i=n[r];typeof i=="function"&&(t[r]=Fk(i,e))}return t}function CB(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return e.length===0?function(r){return r}:e.length===1?e[0]:e.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function ECe(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return function(r){return function(){var i=r.apply(void 0,arguments),o=function(){throw new Error(Hn(15))},s={getState:i.getState,dispatch:function(){return o.apply(void 0,arguments)}},a=e.map(function(l){return l(s)});return o=CB.apply(void 0,a)(i.dispatch),c1(c1({},i),{},{dispatch:o})}}}var SB=O.createContext(null);function kCe(n){n()}var xB=kCe,PCe=function(e){return xB=e},ICe=function(){return xB};function OCe(){var n=ICe(),e=null,t=null;return{clear:function(){e=null,t=null},notify:function(){n(function(){for(var i=e;i;)i.callback(),i=i.next})},get:function(){for(var i=[],o=e;o;)i.push(o),o=o.next;return i},subscribe:function(i){var o=!0,s=t={callback:i,next:null,prev:t};return s.prev?s.prev.next=s:e=s,function(){!o||e===null||(o=!1,s.next?s.next.prev=s.prev:t=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}var Vk={notify:function(){},get:function(){return[]}};function AB(n,e){var t,r=Vk;function i(d){return l(),r.subscribe(d)}function o(){r.notify()}function s(){u.onStateChange&&u.onStateChange()}function a(){return!!t}function l(){t||(t=e?e.addNestedSub(s):n.subscribe(s),r=OCe())}function c(){t&&(t(),t=void 0,r.clear(),r=Vk)}var u={addNestedSub:i,notifyNestedSubs:o,handleChangeWrapper:s,isSubscribed:a,trySubscribe:l,tryUnsubscribe:c,getListeners:function(){return r}};return u}var TB=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?R.useLayoutEffect:R.useEffect;function RCe(n){var e=n.store,t=n.context,r=n.children,i=R.useMemo(function(){var a=AB(e);return{store:e,subscription:a}},[e]),o=R.useMemo(function(){return e.getState()},[e]);TB(function(){var a=i.subscription;return a.onStateChange=a.notifyNestedSubs,a.trySubscribe(),o!==e.getState()&&a.notifyNestedSubs(),function(){a.tryUnsubscribe(),a.onStateChange=null}},[i,o]);var s=t||SB;return O.createElement(s.Provider,{value:i},r)}var l_=f0,MCe={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},DCe={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},BCe={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},EB={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},c_={};c_[l_.ForwardRef]=BCe;c_[l_.Memo]=EB;function zk(n){return l_.isMemo(n)?EB:c_[n.$$typeof]||MCe}var NCe=Object.defineProperty,LCe=Object.getOwnPropertyNames,jk=Object.getOwnPropertySymbols,FCe=Object.getOwnPropertyDescriptor,$Ce=Object.getPrototypeOf,Wk=Object.prototype;function kB(n,e,t){if(typeof e!="string"){if(Wk){var r=$Ce(e);r&&r!==Wk&&kB(n,r,t)}var i=LCe(e);jk&&(i=i.concat(jk(e)));for(var o=zk(n),s=zk(e),a=0;a<i.length;++a){var l=i[a];if(!DCe[l]&&!(t&&t[l])&&!(s&&s[l])&&!(o&&o[l])){var c=FCe(e,l);try{NCe(n,l,c)}catch{}}}}return n}var VCe=kB;const Hk=ot(VCe);var PB={exports:{}},wt={};/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rg=60103,Mg=60106,wd=60107,_d=60108,Cd=60114,Sd=60109,xd=60110,Ad=60112,Td=60113,u_=60120,Ed=60115,kd=60116,IB=60121,OB=60122,RB=60117,MB=60129,DB=60131;if(typeof Symbol=="function"&&Symbol.for){var pn=Symbol.for;Rg=pn("react.element"),Mg=pn("react.portal"),wd=pn("react.fragment"),_d=pn("react.strict_mode"),Cd=pn("react.profiler"),Sd=pn("react.provider"),xd=pn("react.context"),Ad=pn("react.forward_ref"),Td=pn("react.suspense"),u_=pn("react.suspense_list"),Ed=pn("react.memo"),kd=pn("react.lazy"),IB=pn("react.block"),OB=pn("react.server.block"),RB=pn("react.fundamental"),MB=pn("react.debug_trace_mode"),DB=pn("react.legacy_hidden")}function ci(n){if(typeof n=="object"&&n!==null){var e=n.$$typeof;switch(e){case Rg:switch(n=n.type,n){case wd:case Cd:case _d:case Td:case u_:return n;default:switch(n=n&&n.$$typeof,n){case xd:case Ad:case kd:case Ed:case Sd:return n;default:return e}}case Mg:return e}}}var zCe=Sd,jCe=Rg,WCe=Ad,HCe=wd,UCe=kd,GCe=Ed,qCe=Mg,KCe=Cd,YCe=_d,XCe=Td;wt.ContextConsumer=xd;wt.ContextProvider=zCe;wt.Element=jCe;wt.ForwardRef=WCe;wt.Fragment=HCe;wt.Lazy=UCe;wt.Memo=GCe;wt.Portal=qCe;wt.Profiler=KCe;wt.StrictMode=YCe;wt.Suspense=XCe;wt.isAsyncMode=function(){return!1};wt.isConcurrentMode=function(){return!1};wt.isContextConsumer=function(n){return ci(n)===xd};wt.isContextProvider=function(n){return ci(n)===Sd};wt.isElement=function(n){return typeof n=="object"&&n!==null&&n.$$typeof===Rg};wt.isForwardRef=function(n){return ci(n)===Ad};wt.isFragment=function(n){return ci(n)===wd};wt.isLazy=function(n){return ci(n)===kd};wt.isMemo=function(n){return ci(n)===Ed};wt.isPortal=function(n){return ci(n)===Mg};wt.isProfiler=function(n){return ci(n)===Cd};wt.isStrictMode=function(n){return ci(n)===_d};wt.isSuspense=function(n){return ci(n)===Td};wt.isValidElementType=function(n){return typeof n=="string"||typeof n=="function"||n===wd||n===Cd||n===MB||n===_d||n===Td||n===u_||n===DB||typeof n=="object"&&n!==null&&(n.$$typeof===kd||n.$$typeof===Ed||n.$$typeof===Sd||n.$$typeof===xd||n.$$typeof===Ad||n.$$typeof===RB||n.$$typeof===IB||n[0]===OB)};wt.typeOf=ci;PB.exports=wt;var ZCe=PB.exports,JCe=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],QCe=["reactReduxForwardedRef"],eSe=[],tSe=[null,null];function nSe(n,e){var t=n[1];return[e.payload,t+1]}function Uk(n,e,t){TB(function(){return n.apply(void 0,e)},t)}function rSe(n,e,t,r,i,o,s){n.current=r,e.current=i,t.current=!1,o.current&&(o.current=null,s())}function iSe(n,e,t,r,i,o,s,a,l,c){if(n){var u=!1,d=null,f=function(){if(!u){var g=e.getState(),p,b;try{p=r(g,i.current)}catch(y){b=y,d=y}b||(d=null),p===o.current?s.current||l():(o.current=p,a.current=p,s.current=!0,c({type:"STORE_UPDATED",payload:{error:b}}))}};t.onStateChange=f,t.trySubscribe(),f();var h=function(){if(u=!0,t.tryUnsubscribe(),t.onStateChange=null,d)throw d};return h}}var oSe=function(){return[null,0]};function sSe(n,e){e===void 0&&(e={});var t=e,r=t.getDisplayName,i=r===void 0?function(C){return"ConnectAdvanced("+C+")"}:r,o=t.methodName,s=o===void 0?"connectAdvanced":o,a=t.renderCountProp,l=a===void 0?void 0:a,c=t.shouldHandleStateChanges,u=c===void 0?!0:c,d=t.storeKey,f=d===void 0?"store":d;t.withRef;var h=t.forwardRef,m=h===void 0?!1:h,g=t.context,p=g===void 0?SB:g,b=Hf(t,JCe),y=p;return function(A){var w=A.displayName||A.name||"Component",S=i(w),_=xe({},b,{getDisplayName:i,methodName:s,renderCountProp:l,shouldHandleStateChanges:u,storeKey:f,displayName:S,wrappedComponentName:w,WrappedComponent:A}),v=b.pure;function x(B){return n(B.dispatch,_)}var T=v?R.useMemo:function(B){return B()};function E(B){var D=R.useMemo(function(){var N=B.reactReduxForwardedRef,z=Hf(B,QCe);return[B.context,N,z]},[B]),F=D[0],L=D[1],H=D[2],$=R.useMemo(function(){return F&&F.Consumer&&ZCe.isContextConsumer(O.createElement(F.Consumer,null))?F:y},[F,y]),ne=R.useContext($),Z=!!B.store&&!!B.store.getState&&!!B.store.dispatch;ne&&ne.store;var G=Z?B.store:ne.store,X=R.useMemo(function(){return x(G)},[G]),ee=R.useMemo(function(){if(!u)return tSe;var N=AB(G,Z?null:ne.subscription),z=N.notifyNestedSubs.bind(N);return[N,z]},[G,Z,ne]),ie=ee[0],me=ee[1],Ie=R.useMemo(function(){return Z?ne:xe({},ne,{subscription:ie})},[Z,ne,ie]),ce=R.useReducer(nSe,eSe,oSe),q=ce[0],oe=q[0],Q=ce[1];if(oe&&oe.error)throw oe.error;var K=R.useRef(),Se=R.useRef(H),le=R.useRef(),Ce=R.useRef(!1),ye=T(function(){return le.current&&H===Se.current?le.current:X(G.getState(),H)},[G,oe,H]);Uk(rSe,[Se,K,Ce,H,ye,le,me]),Uk(iSe,[u,G,ie,X,Se,K,Ce,le,me,Q],[G,ie,X]);var je=R.useMemo(function(){return O.createElement(A,xe({},ye,{ref:L}))},[L,A,ye]),P=R.useMemo(function(){return u?O.createElement($.Provider,{value:Ie},je):je},[$,je,Ie]);return P}var k=v?O.memo(E):E;if(k.WrappedComponent=A,k.displayName=E.displayName=S,m){var I=O.forwardRef(function(D,F){return O.createElement(k,xe({},D,{reactReduxForwardedRef:F}))});return I.displayName=S,I.WrappedComponent=A,Hk(I,A)}return Hk(k,A)}}function Gk(n,e){return n===e?n!==0||e!==0||1/n===1/e:n!==n&&e!==e}function vv(n,e){if(Gk(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(var i=0;i<t.length;i++)if(!Object.prototype.hasOwnProperty.call(e,t[i])||!Gk(n[t[i]],e[t[i]]))return!1;return!0}function aSe(n,e){var t={},r=function(s){var a=n[s];typeof a=="function"&&(t[s]=function(){return e(a.apply(void 0,arguments))})};for(var i in n)r(i);return t}function d_(n){return function(t,r){var i=n(t,r);function o(){return i}return o.dependsOnOwnProps=!1,o}}function qk(n){return n.dependsOnOwnProps!==null&&n.dependsOnOwnProps!==void 0?!!n.dependsOnOwnProps:n.length!==1}function BB(n,e){return function(r,i){i.displayName;var o=function(a,l){return o.dependsOnOwnProps?o.mapToProps(a,l):o.mapToProps(a)};return o.dependsOnOwnProps=!0,o.mapToProps=function(a,l){o.mapToProps=n,o.dependsOnOwnProps=qk(n);var c=o(a,l);return typeof c=="function"&&(o.mapToProps=c,o.dependsOnOwnProps=qk(c),c=o(a,l)),c},o}}function lSe(n){return typeof n=="function"?BB(n):void 0}function cSe(n){return n?void 0:d_(function(e){return{dispatch:e}})}function uSe(n){return n&&typeof n=="object"?d_(function(e){return aSe(n,e)}):void 0}const dSe=[lSe,cSe,uSe];function fSe(n){return typeof n=="function"?BB(n):void 0}function hSe(n){return n?void 0:d_(function(){return{}})}const mSe=[fSe,hSe];function gSe(n,e,t){return xe({},t,n,e)}function pSe(n){return function(t,r){r.displayName;var i=r.pure,o=r.areMergedPropsEqual,s=!1,a;return function(c,u,d){var f=n(c,u,d);return s?(!i||!o(f,a))&&(a=f):(s=!0,a=f),a}}}function vSe(n){return typeof n=="function"?pSe(n):void 0}function bSe(n){return n?void 0:function(){return gSe}}const ySe=[vSe,bSe];var wSe=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function _Se(n,e,t,r){return function(o,s){return t(n(o,s),e(r,s),s)}}function CSe(n,e,t,r,i){var o=i.areStatesEqual,s=i.areOwnPropsEqual,a=i.areStatePropsEqual,l=!1,c,u,d,f,h;function m(C,A){return c=C,u=A,d=n(c,u),f=e(r,u),h=t(d,f,u),l=!0,h}function g(){return d=n(c,u),e.dependsOnOwnProps&&(f=e(r,u)),h=t(d,f,u),h}function p(){return n.dependsOnOwnProps&&(d=n(c,u)),e.dependsOnOwnProps&&(f=e(r,u)),h=t(d,f,u),h}function b(){var C=n(c,u),A=!a(C,d);return d=C,A&&(h=t(d,f,u)),h}function y(C,A){var w=!s(A,u),S=!o(C,c,A,u);return c=C,u=A,w&&S?g():w?p():S?b():h}return function(A,w){return l?y(A,w):m(A,w)}}function SSe(n,e){var t=e.initMapStateToProps,r=e.initMapDispatchToProps,i=e.initMergeProps,o=Hf(e,wSe),s=t(n,o),a=r(n,o),l=i(n,o),c=o.pure?CSe:_Se;return c(s,a,l,n,o)}var xSe=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function bv(n,e,t){for(var r=e.length-1;r>=0;r--){var i=e[r](n);if(i)return i}return function(o,s){throw new Error("Invalid value of type "+typeof n+" for "+t+" argument when connecting component "+s.wrappedComponentName+".")}}function ASe(n,e){return n===e}function TSe(n){var e=n===void 0?{}:n,t=e.connectHOC,r=t===void 0?sSe:t,i=e.mapStateToPropsFactories,o=i===void 0?mSe:i,s=e.mapDispatchToPropsFactories,a=s===void 0?dSe:s,l=e.mergePropsFactories,c=l===void 0?ySe:l,u=e.selectorFactory,d=u===void 0?SSe:u;return function(h,m,g,p){p===void 0&&(p={});var b=p,y=b.pure,C=y===void 0?!0:y,A=b.areStatesEqual,w=A===void 0?ASe:A,S=b.areOwnPropsEqual,_=S===void 0?vv:S,v=b.areStatePropsEqual,x=v===void 0?vv:v,T=b.areMergedPropsEqual,E=T===void 0?vv:T,k=Hf(b,xSe),I=bv(h,o,"mapStateToProps"),B=bv(m,a,"mapDispatchToProps"),D=bv(g,c,"mergeProps");return r(d,xe({methodName:"connect",getDisplayName:function(L){return"Connect("+L+")"},shouldHandleStateChanges:!!h,initMapStateToProps:I,initMapDispatchToProps:B,initMergeProps:D,pure:C,areStatesEqual:w,areOwnPropsEqual:_,areStatePropsEqual:x,areMergedPropsEqual:E},k))}}const NB=TSe();PCe(eF.unstable_batchedUpdates);function ESe(n,e){if(n.length!==e.length)return!1;for(var t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function LB(n,e){var t=R.useState(function(){return{inputs:e,result:n()}})[0],r=R.useRef(!0),i=R.useRef(t),o=r.current||!!(e&&i.current.inputs&&ESe(e,i.current.inputs)),s=o?i.current:{inputs:e,result:n()};return R.useEffect(function(){r.current=!1,i.current=s},[s]),s.result}function kSe(n,e){return LB(function(){return n},e)}var Qe=LB,ke=kSe,ti=function(e){var t=e.top,r=e.right,i=e.bottom,o=e.left,s=r-o,a=i-t,l={top:t,right:r,bottom:i,left:o,width:s,height:a,x:o,y:t,center:{x:(r+o)/2,y:(i+t)/2}};return l},f_=function(e,t){return{top:e.top-t.top,left:e.left-t.left,bottom:e.bottom+t.bottom,right:e.right+t.right}},Kk=function(e,t){return{top:e.top+t.top,left:e.left+t.left,bottom:e.bottom-t.bottom,right:e.right-t.right}},PSe=function(e,t){return{top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}},yv={top:0,right:0,bottom:0,left:0},h_=function(e){var t=e.borderBox,r=e.margin,i=r===void 0?yv:r,o=e.border,s=o===void 0?yv:o,a=e.padding,l=a===void 0?yv:a,c=ti(f_(t,i)),u=ti(Kk(t,s)),d=ti(Kk(u,l));return{marginBox:c,borderBox:ti(t),paddingBox:u,contentBox:d,margin:i,border:s,padding:l}},Sr=function(e){var t=e.slice(0,-2),r=e.slice(-2);if(r!=="px")return 0;var i=Number(t);return isNaN(i)&&Po(),i},ISe=function(){return{x:window.pageXOffset,y:window.pageYOffset}},hm=function(e,t){var r=e.borderBox,i=e.border,o=e.margin,s=e.padding,a=PSe(r,t);return h_({borderBox:a,border:i,margin:o,padding:s})},mm=function(e,t){return t===void 0&&(t=ISe()),hm(e,t)},FB=function(e,t){var r={top:Sr(t.marginTop),right:Sr(t.marginRight),bottom:Sr(t.marginBottom),left:Sr(t.marginLeft)},i={top:Sr(t.paddingTop),right:Sr(t.paddingRight),bottom:Sr(t.paddingBottom),left:Sr(t.paddingLeft)},o={top:Sr(t.borderTopWidth),right:Sr(t.borderRightWidth),bottom:Sr(t.borderBottomWidth),left:Sr(t.borderLeftWidth)};return h_({borderBox:e,margin:r,padding:i,border:o})},$B=function(e){var t=e.getBoundingClientRect(),r=window.getComputedStyle(e);return FB(t,r)},ju=function(e){var t=[],r=null,i=function(){for(var s=arguments.length,a=new Array(s),l=0;l<s;l++)a[l]=arguments[l];t=a,!r&&(r=requestAnimationFrame(function(){r=null,e.apply(void 0,t)}))};return i.cancel=function(){r&&(cancelAnimationFrame(r),r=null)},i};function VB(n,e){}VB.bind(null,"warn");VB.bind(null,"error");function xo(){}function OSe(n,e){return xe({},n,{},e)}function Pr(n,e,t){var r=e.map(function(i){var o=OSe(t,i.options);return n.addEventListener(i.eventName,i.fn,o),function(){n.removeEventListener(i.eventName,i.fn,o)}});return function(){r.forEach(function(o){o()})}}var RSe="Invariant failed";function gm(n){this.message=n}gm.prototype.toString=function(){return this.message};function ae(n,e){throw new gm(RSe)}var MSe=function(n){jR(e,n);function e(){for(var r,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=n.call.apply(n,[this].concat(o))||this,r.callbacks=null,r.unbind=xo,r.onWindowError=function(a){var l=r.getCallbacks();l.isDragging()&&l.tryAbort();var c=a.error;c instanceof gm&&a.preventDefault()},r.getCallbacks=function(){if(!r.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return r.callbacks},r.setCallbacks=function(a){r.callbacks=a},r}var t=e.prototype;return t.componentDidMount=function(){this.unbind=Pr(window,[{eventName:"error",fn:this.onWindowError}])},t.componentDidCatch=function(i){if(i instanceof gm){this.setState({});return}throw i},t.componentWillUnmount=function(){this.unbind()},t.render=function(){return this.props.children(this.setCallbacks)},e}(O.Component),DSe=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,pm=function(e){return e+1},BSe=function(e){return`
  You have lifted an item in position `+pm(e.source.index)+`
`},zB=function(e,t){var r=e.droppableId===t.droppableId,i=pm(e.index),o=pm(t.index);return r?`
      You have moved the item from position `+i+`
      to position `+o+`
    `:`
    You have moved the item from position `+i+`
    in list `+e.droppableId+`
    to list `+t.droppableId+`
    in position `+o+`
  `},jB=function(e,t,r){var i=t.droppableId===r.droppableId;return i?`
      The item `+e+`
      has been combined with `+r.draggableId:`
      The item `+e+`
      in list `+t.droppableId+`
      has been combined with `+r.draggableId+`
      in list `+r.droppableId+`
    `},NSe=function(e){var t=e.destination;if(t)return zB(e.source,t);var r=e.combine;return r?jB(e.draggableId,e.source,r):"You are over an area that cannot be dropped on"},Yk=function(e){return`
  The item has returned to its starting position
  of `+pm(e.index)+`
`},LSe=function(e){if(e.reason==="CANCEL")return`
      Movement cancelled.
      `+Yk(e.source)+`
    `;var t=e.destination,r=e.combine;return t?`
      You have dropped the item.
      `+zB(e.source,t)+`
    `:r?`
      You have dropped the item.
      `+jB(e.draggableId,e.source,r)+`
    `:`
    The item has been dropped while not over a drop area.
    `+Yk(e.source)+`
  `},$f={dragHandleUsageInstructions:DSe,onDragStart:BSe,onDragUpdate:NSe,onDragEnd:LSe},dn={x:0,y:0},_n=function(e,t){return{x:e.x+t.x,y:e.y+t.y}},dr=function(e,t){return{x:e.x-t.x,y:e.y-t.y}},Ao=function(e,t){return e.x===t.x&&e.y===t.y},Il=function(e){return{x:e.x!==0?-e.x:0,y:e.y!==0?-e.y:0}},Es=function(e,t,r){var i;return r===void 0&&(r=0),i={},i[e]=t,i[e==="x"?"y":"x"]=r,i},Wu=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},Xk=function(e,t){return Math.min.apply(Math,t.map(function(r){return Wu(e,r)}))},WB=function(e){return function(t){return{x:e(t.x),y:e(t.y)}}},FSe=function(n,e){var t=ti({top:Math.max(e.top,n.top),right:Math.min(e.right,n.right),bottom:Math.min(e.bottom,n.bottom),left:Math.max(e.left,n.left)});return t.width<=0||t.height<=0?null:t},Pd=function(e,t){return{top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}},Zk=function(e){return[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}]},$Se={top:0,right:0,bottom:0,left:0},VSe=function(e,t){return t?Pd(e,t.scroll.diff.displacement):e},zSe=function(e,t,r){if(r&&r.increasedBy){var i;return xe({},e,(i={},i[t.end]=e[t.end]+r.increasedBy[t.line],i))}return e},jSe=function(e,t){return t&&t.shouldClipSubject?FSe(t.pageMarginBox,e):ti(e)},sl=function(n){var e=n.page,t=n.withPlaceholder,r=n.axis,i=n.frame,o=VSe(e.marginBox,i),s=zSe(o,r,t),a=jSe(s,i);return{page:e,withPlaceholder:t,active:a}},m_=function(n,e){n.frame||ae();var t=n.frame,r=dr(e,t.scroll.initial),i=Il(r),o=xe({},t,{scroll:{initial:t.scroll.initial,current:e,diff:{value:r,displacement:i},max:t.scroll.max}}),s=sl({page:n.subject.page,withPlaceholder:n.subject.withPlaceholder,axis:n.axis,frame:o}),a=xe({},n,{frame:o,subject:s});return a};function vm(n){return Object.values?Object.values(n):Object.keys(n).map(function(e){return n[e]})}function g_(n,e){if(n.findIndex)return n.findIndex(e);for(var t=0;t<n.length;t++)if(e(n[t]))return t;return-1}function zo(n,e){if(n.find)return n.find(e);var t=g_(n,e);if(t!==-1)return n[t]}function HB(n){return Array.prototype.slice.call(n)}var UB=Xt(function(n){return n.reduce(function(e,t){return e[t.descriptor.id]=t,e},{})}),GB=Xt(function(n){return n.reduce(function(e,t){return e[t.descriptor.id]=t,e},{})}),Dg=Xt(function(n){return vm(n)}),WSe=Xt(function(n){return vm(n)}),Ol=Xt(function(n,e){var t=WSe(e).filter(function(r){return n===r.descriptor.droppableId}).sort(function(r,i){return r.descriptor.index-i.descriptor.index});return t});function p_(n){return n.at&&n.at.type==="REORDER"?n.at.destination:null}function Bg(n){return n.at&&n.at.type==="COMBINE"?n.at.combine:null}var Ng=Xt(function(n,e){return e.filter(function(t){return t.descriptor.id!==n.descriptor.id})}),HSe=function(n){var e=n.isMovingForward,t=n.draggable,r=n.destination,i=n.insideDestination,o=n.previousImpact;if(!r.isCombineEnabled)return null;var s=p_(o);if(!s)return null;function a(g){var p={type:"COMBINE",combine:{draggableId:g,droppableId:r.descriptor.id}};return xe({},o,{at:p})}var l=o.displaced.all,c=l.length?l[0]:null;if(e)return c?a(c):null;var u=Ng(t,i);if(!c){if(!u.length)return null;var d=u[u.length-1];return a(d.descriptor.id)}var f=g_(u,function(g){return g.descriptor.id===c});f===-1&&ae();var h=f-1;if(h<0)return null;var m=u[h];return a(m.descriptor.id)},Rl=function(n,e){return n.descriptor.droppableId===e.descriptor.id},qB={point:dn,value:0},Hu={invisible:{},visible:{},all:[]},USe={displaced:Hu,displacedBy:qB,at:null},Mr=function(n,e){return function(t){return n<=t&&t<=e}},KB=function(n){var e=Mr(n.top,n.bottom),t=Mr(n.left,n.right);return function(r){var i=e(r.top)&&e(r.bottom)&&t(r.left)&&t(r.right);if(i)return!0;var o=e(r.top)||e(r.bottom),s=t(r.left)||t(r.right),a=o&&s;if(a)return!0;var l=r.top<n.top&&r.bottom>n.bottom,c=r.left<n.left&&r.right>n.right,u=l&&c;if(u)return!0;var d=l&&s||c&&o;return d}},GSe=function(n){var e=Mr(n.top,n.bottom),t=Mr(n.left,n.right);return function(r){var i=e(r.top)&&e(r.bottom)&&t(r.left)&&t(r.right);return i}},v_={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},YB={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"},qSe=function(n){return function(e){var t=Mr(e.top,e.bottom),r=Mr(e.left,e.right);return function(i){return n===v_?t(i.top)&&t(i.bottom):r(i.left)&&r(i.right)}}},KSe=function(e,t){var r=t.frame?t.frame.scroll.diff.displacement:dn;return Pd(e,r)},YSe=function(e,t,r){return t.subject.active?r(t.subject.active)(e):!1},XSe=function(e,t,r){return r(t)(e)},b_=function(e){var t=e.target,r=e.destination,i=e.viewport,o=e.withDroppableDisplacement,s=e.isVisibleThroughFrameFn,a=o?KSe(t,r):t;return YSe(a,r,s)&&XSe(a,i,s)},ZSe=function(e){return b_(xe({},e,{isVisibleThroughFrameFn:KB}))},XB=function(e){return b_(xe({},e,{isVisibleThroughFrameFn:GSe}))},JSe=function(e){return b_(xe({},e,{isVisibleThroughFrameFn:qSe(e.destination.axis)}))},QSe=function(e,t,r){if(typeof r=="boolean")return r;if(!t)return!0;var i=t.invisible,o=t.visible;if(i[e])return!1;var s=o[e];return s?s.shouldAnimate:!0};function exe(n,e){var t=n.page.marginBox,r={top:e.point.y,right:0,bottom:0,left:e.point.x};return ti(f_(t,r))}function Uu(n){var e=n.afterDragging,t=n.destination,r=n.displacedBy,i=n.viewport,o=n.forceShouldAnimate,s=n.last;return e.reduce(function(l,c){var u=exe(c,r),d=c.descriptor.id;l.all.push(d);var f=ZSe({target:u,destination:t,viewport:i,withDroppableDisplacement:!0});if(!f)return l.invisible[c.descriptor.id]=!0,l;var h=QSe(d,s,o),m={draggableId:d,shouldAnimate:h};return l.visible[d]=m,l},{all:[],visible:{},invisible:{}})}function txe(n,e){if(!n.length)return 0;var t=n[n.length-1].descriptor.index;return e.inHomeList?t:t+1}function Jk(n){var e=n.insideDestination,t=n.inHomeList,r=n.displacedBy,i=n.destination,o=txe(e,{inHomeList:t});return{displaced:Hu,displacedBy:r,at:{type:"REORDER",destination:{droppableId:i.descriptor.id,index:o}}}}function bm(n){var e=n.draggable,t=n.insideDestination,r=n.destination,i=n.viewport,o=n.displacedBy,s=n.last,a=n.index,l=n.forceShouldAnimate,c=Rl(e,r);if(a==null)return Jk({insideDestination:t,inHomeList:c,displacedBy:o,destination:r});var u=zo(t,function(g){return g.descriptor.index===a});if(!u)return Jk({insideDestination:t,inHomeList:c,displacedBy:o,destination:r});var d=Ng(e,t),f=t.indexOf(u),h=d.slice(f),m=Uu({afterDragging:h,destination:r,displacedBy:o,last:s,viewport:i.frame,forceShouldAnimate:l});return{displaced:m,displacedBy:o,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:a}}}}function Mo(n,e){return!!e.effected[n]}var nxe=function(n){var e=n.isMovingForward,t=n.destination,r=n.draggables,i=n.combine,o=n.afterCritical;if(!t.isCombineEnabled)return null;var s=i.draggableId,a=r[s],l=a.descriptor.index,c=Mo(s,o);return c?e?l:l-1:e?l+1:l},rxe=function(n){var e=n.isMovingForward,t=n.isInHomeList,r=n.insideDestination,i=n.location;if(!r.length)return null;var o=i.index,s=e?o+1:o-1,a=r[0].descriptor.index,l=r[r.length-1].descriptor.index,c=t?l:l+1;return s<a||s>c?null:s},ixe=function(n){var e=n.isMovingForward,t=n.isInHomeList,r=n.draggable,i=n.draggables,o=n.destination,s=n.insideDestination,a=n.previousImpact,l=n.viewport,c=n.afterCritical,u=a.at;if(u||ae(),u.type==="REORDER"){var d=rxe({isMovingForward:e,isInHomeList:t,location:u.destination,insideDestination:s});return d==null?null:bm({draggable:r,insideDestination:s,destination:o,viewport:l,last:a.displaced,displacedBy:a.displacedBy,index:d})}var f=nxe({isMovingForward:e,destination:o,displaced:a.displaced,draggables:i,combine:u.combine,afterCritical:c});return f==null?null:bm({draggable:r,insideDestination:s,destination:o,viewport:l,last:a.displaced,displacedBy:a.displacedBy,index:f})},oxe=function(n){var e=n.displaced,t=n.afterCritical,r=n.combineWith,i=n.displacedBy,o=!!(e.visible[r]||e.invisible[r]);return Mo(r,t)?o?dn:Il(i.point):o?i.point:dn},sxe=function(n){var e=n.afterCritical,t=n.impact,r=n.draggables,i=Bg(t);i||ae();var o=i.draggableId,s=r[o].page.borderBox.center,a=oxe({displaced:t.displaced,afterCritical:e,combineWith:o,displacedBy:t.displacedBy});return _n(s,a)},ZB=function(e,t){return t.margin[e.start]+t.borderBox[e.size]/2},axe=function(e,t){return t.margin[e.end]+t.borderBox[e.size]/2},y_=function(e,t,r){return t[e.crossAxisStart]+r.margin[e.crossAxisStart]+r.borderBox[e.crossAxisSize]/2},Qk=function(e){var t=e.axis,r=e.moveRelativeTo,i=e.isMoving;return Es(t.line,r.marginBox[t.end]+ZB(t,i),y_(t,r.marginBox,i))},eP=function(e){var t=e.axis,r=e.moveRelativeTo,i=e.isMoving;return Es(t.line,r.marginBox[t.start]-axe(t,i),y_(t,r.marginBox,i))},lxe=function(e){var t=e.axis,r=e.moveInto,i=e.isMoving;return Es(t.line,r.contentBox[t.start]+ZB(t,i),y_(t,r.contentBox,i))},cxe=function(n){var e=n.impact,t=n.draggable,r=n.draggables,i=n.droppable,o=n.afterCritical,s=Ol(i.descriptor.id,r),a=t.page,l=i.axis;if(!s.length)return lxe({axis:l,moveInto:i.page,isMoving:a});var c=e.displaced,u=e.displacedBy,d=c.all[0];if(d){var f=r[d];if(Mo(d,o))return eP({axis:l,moveRelativeTo:f.page,isMoving:a});var h=hm(f.page,u.point);return eP({axis:l,moveRelativeTo:h,isMoving:a})}var m=s[s.length-1];if(m.descriptor.id===t.descriptor.id)return a.borderBox.center;if(Mo(m.descriptor.id,o)){var g=hm(m.page,Il(o.displacedBy.point));return Qk({axis:l,moveRelativeTo:g,isMoving:a})}return Qk({axis:l,moveRelativeTo:m.page,isMoving:a})},qy=function(n,e){var t=n.frame;return t?_n(e,t.scroll.diff.displacement):e},uxe=function(e){var t=e.impact,r=e.draggable,i=e.droppable,o=e.draggables,s=e.afterCritical,a=r.page.borderBox.center,l=t.at;return!i||!l?a:l.type==="REORDER"?cxe({impact:t,draggable:r,draggables:o,droppable:i,afterCritical:s}):sxe({impact:t,draggables:o,afterCritical:s})},Lg=function(n){var e=uxe(n),t=n.droppable,r=t?qy(t,e):e;return r},JB=function(n,e){var t=dr(e,n.scroll.initial),r=Il(t),i=ti({top:e.y,bottom:e.y+n.frame.height,left:e.x,right:e.x+n.frame.width}),o={frame:i,scroll:{initial:n.scroll.initial,max:n.scroll.max,current:e,diff:{value:t,displacement:r}}};return o};function tP(n,e){return n.map(function(t){return e[t]})}function dxe(n,e){for(var t=0;t<e.length;t++){var r=e[t].visible[n];if(r)return r}return null}var fxe=function(n){var e=n.impact,t=n.viewport,r=n.destination,i=n.draggables,o=n.maxScrollChange,s=JB(t,_n(t.scroll.current,o)),a=r.frame?m_(r,_n(r.frame.scroll.current,o)):r,l=e.displaced,c=Uu({afterDragging:tP(l.all,i),destination:r,displacedBy:e.displacedBy,viewport:s.frame,last:l,forceShouldAnimate:!1}),u=Uu({afterDragging:tP(l.all,i),destination:a,displacedBy:e.displacedBy,viewport:t.frame,last:l,forceShouldAnimate:!1}),d={},f={},h=[l,c,u];l.all.forEach(function(g){var p=dxe(g,h);if(p){f[g]=p;return}d[g]=!0});var m=xe({},e,{displaced:{all:l.all,invisible:d,visible:f}});return m},hxe=function(n,e){return _n(n.scroll.diff.displacement,e)},w_=function(n){var e=n.pageBorderBoxCenter,t=n.draggable,r=n.viewport,i=hxe(r,e),o=dr(i,t.page.borderBox.center);return _n(t.client.borderBox.center,o)},QB=function(n){var e=n.draggable,t=n.destination,r=n.newPageBorderBoxCenter,i=n.viewport,o=n.withDroppableDisplacement,s=n.onlyOnMainAxis,a=s===void 0?!1:s,l=dr(r,e.page.borderBox.center),c=Pd(e.page.borderBox,l),u={target:c,destination:t,withDroppableDisplacement:o,viewport:i};return a?JSe(u):XB(u)},mxe=function(n){var e=n.isMovingForward,t=n.draggable,r=n.destination,i=n.draggables,o=n.previousImpact,s=n.viewport,a=n.previousPageBorderBoxCenter,l=n.previousClientSelection,c=n.afterCritical;if(!r.isEnabled)return null;var u=Ol(r.descriptor.id,i),d=Rl(t,r),f=HSe({isMovingForward:e,draggable:t,destination:r,insideDestination:u,previousImpact:o})||ixe({isMovingForward:e,isInHomeList:d,draggable:t,draggables:i,destination:r,insideDestination:u,previousImpact:o,viewport:s,afterCritical:c});if(!f)return null;var h=Lg({impact:f,draggable:t,droppable:r,draggables:i,afterCritical:c}),m=QB({draggable:t,destination:r,newPageBorderBoxCenter:h,viewport:s.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});if(m){var g=w_({pageBorderBoxCenter:h,draggable:t,viewport:s});return{clientSelection:g,impact:f,scrollJumpRequest:null}}var p=dr(h,a),b=fxe({impact:f,viewport:s,destination:r,draggables:i,maxScrollChange:p});return{clientSelection:l,impact:b,scrollJumpRequest:p}},Mn=function(e){var t=e.subject.active;return t||ae(),t},gxe=function(n){var e=n.isMovingForward,t=n.pageBorderBoxCenter,r=n.source,i=n.droppables,o=n.viewport,s=r.subject.active;if(!s)return null;var a=r.axis,l=Mr(s[a.start],s[a.end]),c=Dg(i).filter(function(d){return d!==r}).filter(function(d){return d.isEnabled}).filter(function(d){return!!d.subject.active}).filter(function(d){return KB(o.frame)(Mn(d))}).filter(function(d){var f=Mn(d);return e?s[a.crossAxisEnd]<f[a.crossAxisEnd]:f[a.crossAxisStart]<s[a.crossAxisStart]}).filter(function(d){var f=Mn(d),h=Mr(f[a.start],f[a.end]);return l(f[a.start])||l(f[a.end])||h(s[a.start])||h(s[a.end])}).sort(function(d,f){var h=Mn(d)[a.crossAxisStart],m=Mn(f)[a.crossAxisStart];return e?h-m:m-h}).filter(function(d,f,h){return Mn(d)[a.crossAxisStart]===Mn(h[0])[a.crossAxisStart]});if(!c.length)return null;if(c.length===1)return c[0];var u=c.filter(function(d){var f=Mr(Mn(d)[a.start],Mn(d)[a.end]);return f(t[a.line])});return u.length===1?u[0]:u.length>1?u.sort(function(d,f){return Mn(d)[a.start]-Mn(f)[a.start]})[0]:c.sort(function(d,f){var h=Xk(t,Zk(Mn(d))),m=Xk(t,Zk(Mn(f)));return h!==m?h-m:Mn(d)[a.start]-Mn(f)[a.start]})[0]},nP=function(e,t){var r=e.page.borderBox.center;return Mo(e.descriptor.id,t)?dr(r,t.displacedBy.point):r},pxe=function(e,t){var r=e.page.borderBox;return Mo(e.descriptor.id,t)?Pd(r,Il(t.displacedBy.point)):r},vxe=function(n){var e=n.pageBorderBoxCenter,t=n.viewport,r=n.destination,i=n.insideDestination,o=n.afterCritical,s=i.filter(function(a){return XB({target:pxe(a,o),destination:r,viewport:t.frame,withDroppableDisplacement:!0})}).sort(function(a,l){var c=Wu(e,qy(r,nP(a,o))),u=Wu(e,qy(r,nP(l,o)));return c<u?-1:u<c?1:a.descriptor.index-l.descriptor.index});return s[0]||null},Id=Xt(function(e,t){var r=t[e.line];return{value:r,point:Es(e.line,r)}}),bxe=function(e,t,r){var i=e.axis;if(e.descriptor.mode==="virtual")return Es(i.line,t[i.line]);var o=e.subject.page.contentBox[i.size],s=Ol(e.descriptor.id,r),a=s.reduce(function(u,d){return u+d.client.marginBox[i.size]},0),l=a+t[i.line],c=l-o;return c<=0?null:Es(i.line,c)},eN=function(e,t){return xe({},e,{scroll:xe({},e.scroll,{max:t})})},tN=function(e,t,r){var i=e.frame;Rl(t,e)&&ae(),e.subject.withPlaceholder&&ae();var o=Id(e.axis,t.displaceBy).point,s=bxe(e,o,r),a={placeholderSize:o,increasedBy:s,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!i){var l=sl({page:e.subject.page,withPlaceholder:a,axis:e.axis,frame:e.frame});return xe({},e,{subject:l})}var c=s?_n(i.scroll.max,s):i.scroll.max,u=eN(i,c),d=sl({page:e.subject.page,withPlaceholder:a,axis:e.axis,frame:u});return xe({},e,{subject:d,frame:u})},yxe=function(e){var t=e.subject.withPlaceholder;t||ae();var r=e.frame;if(!r){var i=sl({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null});return xe({},e,{subject:i})}var o=t.oldFrameMaxScroll;o||ae();var s=eN(r,o),a=sl({page:e.subject.page,axis:e.axis,frame:s,withPlaceholder:null});return xe({},e,{subject:a,frame:s})},wxe=function(n){var e=n.previousPageBorderBoxCenter,t=n.moveRelativeTo,r=n.insideDestination,i=n.draggable,o=n.draggables,s=n.destination,a=n.viewport,l=n.afterCritical;if(!t){if(r.length)return null;var c={displaced:Hu,displacedBy:qB,at:{type:"REORDER",destination:{droppableId:s.descriptor.id,index:0}}},u=Lg({impact:c,draggable:i,droppable:s,draggables:o,afterCritical:l}),d=Rl(i,s)?s:tN(s,i,o),f=QB({draggable:i,destination:d,newPageBorderBoxCenter:u,viewport:a.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});return f?c:null}var h=e[s.axis.line]<=t.page.borderBox.center[s.axis.line],m=function(){var p=t.descriptor.index;return t.descriptor.id===i.descriptor.id||h?p:p+1}(),g=Id(s.axis,i.displaceBy);return bm({draggable:i,insideDestination:r,destination:s,viewport:a,displacedBy:g,last:Hu,index:m})},_xe=function(n){var e=n.isMovingForward,t=n.previousPageBorderBoxCenter,r=n.draggable,i=n.isOver,o=n.draggables,s=n.droppables,a=n.viewport,l=n.afterCritical,c=gxe({isMovingForward:e,pageBorderBoxCenter:t,source:i,droppables:s,viewport:a});if(!c)return null;var u=Ol(c.descriptor.id,o),d=vxe({pageBorderBoxCenter:t,viewport:a,destination:c,insideDestination:u,afterCritical:l}),f=wxe({previousPageBorderBoxCenter:t,destination:c,draggable:r,draggables:o,moveRelativeTo:d,insideDestination:u,viewport:a,afterCritical:l});if(!f)return null;var h=Lg({impact:f,draggable:r,droppable:c,draggables:o,afterCritical:l}),m=w_({pageBorderBoxCenter:h,draggable:r,viewport:a});return{clientSelection:m,impact:f,scrollJumpRequest:null}},hr=function(n){var e=n.at;return e?e.type==="REORDER"?e.destination.droppableId:e.combine.droppableId:null},Cxe=function(e,t){var r=hr(e);return r?t[r]:null},Sxe=function(n){var e=n.state,t=n.type,r=Cxe(e.impact,e.dimensions.droppables),i=!!r,o=e.dimensions.droppables[e.critical.droppable.id],s=r||o,a=s.axis.direction,l=a==="vertical"&&(t==="MOVE_UP"||t==="MOVE_DOWN")||a==="horizontal"&&(t==="MOVE_LEFT"||t==="MOVE_RIGHT");if(l&&!i)return null;var c=t==="MOVE_DOWN"||t==="MOVE_RIGHT",u=e.dimensions.draggables[e.critical.draggable.id],d=e.current.page.borderBoxCenter,f=e.dimensions,h=f.draggables,m=f.droppables;return l?mxe({isMovingForward:c,previousPageBorderBoxCenter:d,draggable:u,destination:s,draggables:h,viewport:e.viewport,previousClientSelection:e.current.client.selection,previousImpact:e.impact,afterCritical:e.afterCritical}):_xe({isMovingForward:c,previousPageBorderBoxCenter:d,draggable:u,isOver:s,draggables:h,droppables:m,viewport:e.viewport,afterCritical:e.afterCritical})};function ts(n){return n.phase==="DRAGGING"||n.phase==="COLLECTING"}function nN(n){var e=Mr(n.top,n.bottom),t=Mr(n.left,n.right);return function(i){return e(i.y)&&t(i.x)}}function xxe(n,e){return n.left<e.right&&n.right>e.left&&n.top<e.bottom&&n.bottom>e.top}function Axe(n){var e=n.pageBorderBox,t=n.draggable,r=n.candidates,i=t.page.borderBox.center,o=r.map(function(s){var a=s.axis,l=Es(s.axis.line,e.center[a.line],s.page.borderBox.center[a.crossAxisLine]);return{id:s.descriptor.id,distance:Wu(i,l)}}).sort(function(s,a){return a.distance-s.distance});return o[0]?o[0].id:null}function Txe(n){var e=n.pageBorderBox,t=n.draggable,r=n.droppables,i=Dg(r).filter(function(o){if(!o.isEnabled)return!1;var s=o.subject.active;if(!s||!xxe(e,s))return!1;if(nN(s)(e.center))return!0;var a=o.axis,l=s.center[a.crossAxisLine],c=e[a.crossAxisStart],u=e[a.crossAxisEnd],d=Mr(s[a.crossAxisStart],s[a.crossAxisEnd]),f=d(c),h=d(u);return!f&&!h?!0:f?c<l:u>l});return i.length?i.length===1?i[0].descriptor.id:Axe({pageBorderBox:e,draggable:t,candidates:i}):null}var rN=function(e,t){return ti(Pd(e,t))},Exe=function(n,e){var t=n.frame;return t?rN(e,t.scroll.diff.value):e};function iN(n){var e=n.displaced,t=n.id;return!!(e.visible[t]||e.invisible[t])}function kxe(n){var e=n.draggable,t=n.closest,r=n.inHomeList;return t?r&&t.descriptor.index>e.descriptor.index?t.descriptor.index-1:t.descriptor.index:null}var Pxe=function(n){var e=n.pageBorderBoxWithDroppableScroll,t=n.draggable,r=n.destination,i=n.insideDestination,o=n.last,s=n.viewport,a=n.afterCritical,l=r.axis,c=Id(r.axis,t.displaceBy),u=c.value,d=e[l.start],f=e[l.end],h=Ng(t,i),m=zo(h,function(p){var b=p.descriptor.id,y=p.page.borderBox.center[l.line],C=Mo(b,a),A=iN({displaced:o,id:b});return C?A?f<=y:d<y-u:A?f<=y+u:d<y}),g=kxe({draggable:t,closest:m,inHomeList:Rl(t,r)});return bm({draggable:t,insideDestination:i,destination:r,viewport:s,last:o,displacedBy:c,index:g})},Ixe=4,Oxe=function(n){var e=n.draggable,t=n.pageBorderBoxWithDroppableScroll,r=n.previousImpact,i=n.destination,o=n.insideDestination,s=n.afterCritical;if(!i.isCombineEnabled)return null;var a=i.axis,l=Id(i.axis,e.displaceBy),c=l.value,u=t[a.start],d=t[a.end],f=Ng(e,o),h=zo(f,function(g){var p=g.descriptor.id,b=g.page.borderBox,y=b[a.size],C=y/Ixe,A=Mo(p,s),w=iN({displaced:r.displaced,id:p});return A?w?d>b[a.start]+C&&d<b[a.end]-C:u>b[a.start]-c+C&&u<b[a.end]-c-C:w?d>b[a.start]+c+C&&d<b[a.end]+c-C:u>b[a.start]+C&&u<b[a.end]-C});if(!h)return null;var m={displacedBy:l,displaced:r.displaced,at:{type:"COMBINE",combine:{draggableId:h.descriptor.id,droppableId:i.descriptor.id}}};return m},oN=function(n){var e=n.pageOffset,t=n.draggable,r=n.draggables,i=n.droppables,o=n.previousImpact,s=n.viewport,a=n.afterCritical,l=rN(t.page.borderBox,e),c=Txe({pageBorderBox:l,draggable:t,droppables:i});if(!c)return USe;var u=i[c],d=Ol(u.descriptor.id,r),f=Exe(u,l);return Oxe({pageBorderBoxWithDroppableScroll:f,draggable:t,previousImpact:o,destination:u,insideDestination:d,afterCritical:a})||Pxe({pageBorderBoxWithDroppableScroll:f,draggable:t,destination:u,insideDestination:d,last:o.displaced,viewport:s,afterCritical:a})},__=function(n,e){var t;return xe({},n,(t={},t[e.descriptor.id]=e,t))},Rxe=function(e){var t=e.previousImpact,r=e.impact,i=e.droppables,o=hr(t),s=hr(r);if(!o||o===s)return i;var a=i[o];if(!a.subject.withPlaceholder)return i;var l=yxe(a);return __(i,l)},Mxe=function(n){var e=n.draggable,t=n.draggables,r=n.droppables,i=n.previousImpact,o=n.impact,s=Rxe({previousImpact:i,impact:o,droppables:r}),a=hr(o);if(!a)return s;var l=r[a];if(Rl(e,l)||l.subject.withPlaceholder)return s;var c=tN(l,e,t);return __(s,c)},Mc=function(n){var e=n.state,t=n.clientSelection,r=n.dimensions,i=n.viewport,o=n.impact,s=n.scrollJumpRequest,a=i||e.viewport,l=r||e.dimensions,c=t||e.current.client.selection,u=dr(c,e.initial.client.selection),d={offset:u,selection:c,borderBoxCenter:_n(e.initial.client.borderBoxCenter,u)},f={selection:_n(d.selection,a.scroll.current),borderBoxCenter:_n(d.borderBoxCenter,a.scroll.current),offset:_n(d.offset,a.scroll.diff.value)},h={client:d,page:f};if(e.phase==="COLLECTING")return xe({phase:"COLLECTING"},e,{dimensions:l,viewport:a,current:h});var m=l.draggables[e.critical.draggable.id],g=o||oN({pageOffset:f.offset,draggable:m,draggables:l.draggables,droppables:l.droppables,previousImpact:e.impact,viewport:a,afterCritical:e.afterCritical}),p=Mxe({draggable:m,impact:g,previousImpact:e.impact,draggables:l.draggables,droppables:l.droppables}),b=xe({},e,{current:h,dimensions:{draggables:l.draggables,droppables:p},impact:g,viewport:a,scrollJumpRequest:s||null,forceShouldAnimate:s?!1:null});return b};function Dxe(n,e){return n.map(function(t){return e[t]})}var sN=function(n){var e=n.impact,t=n.viewport,r=n.draggables,i=n.destination,o=n.forceShouldAnimate,s=e.displaced,a=Dxe(s.all,r),l=Uu({afterDragging:a,destination:i,displacedBy:e.displacedBy,viewport:t.frame,forceShouldAnimate:o,last:s});return xe({},e,{displaced:l})},aN=function(n){var e=n.impact,t=n.draggable,r=n.droppable,i=n.draggables,o=n.viewport,s=n.afterCritical,a=Lg({impact:e,draggable:t,draggables:i,droppable:r,afterCritical:s});return w_({pageBorderBoxCenter:a,draggable:t,viewport:o})},lN=function(n){var e=n.state,t=n.dimensions,r=n.viewport;e.movementMode!=="SNAP"&&ae();var i=e.impact,o=r||e.viewport,s=t||e.dimensions,a=s.draggables,l=s.droppables,c=a[e.critical.draggable.id],u=hr(i);u||ae();var d=l[u],f=sN({impact:i,viewport:o,destination:d,draggables:a}),h=aN({impact:f,draggable:c,droppable:d,draggables:a,viewport:o,afterCritical:e.afterCritical});return Mc({impact:f,clientSelection:h,state:e,dimensions:s,viewport:o})},Bxe=function(n){return{index:n.index,droppableId:n.droppableId}},cN=function(n){var e=n.draggable,t=n.home,r=n.draggables,i=n.viewport,o=Id(t.axis,e.displaceBy),s=Ol(t.descriptor.id,r),a=s.indexOf(e);a===-1&&ae();var l=s.slice(a+1),c=l.reduce(function(h,m){return h[m.descriptor.id]=!0,h},{}),u={inVirtualList:t.descriptor.mode==="virtual",displacedBy:o,effected:c},d=Uu({afterDragging:l,destination:t,displacedBy:o,last:null,viewport:i.frame,forceShouldAnimate:!1}),f={displaced:d,displacedBy:o,at:{type:"REORDER",destination:Bxe(e.descriptor)}};return{impact:f,afterCritical:u}},Nxe=function(n,e){return{draggables:n.draggables,droppables:__(n.droppables,e)}},Lxe=function(n){var e=n.draggable,t=n.offset,r=n.initialWindowScroll,i=hm(e.client,t),o=mm(i,r),s=xe({},e,{placeholder:xe({},e.placeholder,{client:i}),client:i,page:o});return s},Fxe=function(n){var e=n.frame;return e||ae(),e},$xe=function(n){var e=n.additions,t=n.updatedDroppables,r=n.viewport,i=r.scroll.diff.value;return e.map(function(o){var s=o.descriptor.droppableId,a=t[s],l=Fxe(a),c=l.scroll.diff.value,u=_n(i,c),d=Lxe({draggable:o,offset:u,initialWindowScroll:r.scroll.initial});return d})},Vxe=function(n){var e=n.state,t=n.published,r=t.modified.map(function(C){var A=e.dimensions.droppables[C.droppableId],w=m_(A,C.scroll);return w}),i=xe({},e.dimensions.droppables,{},UB(r)),o=GB($xe({additions:t.additions,updatedDroppables:i,viewport:e.viewport})),s=xe({},e.dimensions.draggables,{},o);t.removals.forEach(function(C){delete s[C]});var a={droppables:i,draggables:s},l=hr(e.impact),c=l?a.droppables[l]:null,u=a.draggables[e.critical.draggable.id],d=a.droppables[e.critical.droppable.id],f=cN({draggable:u,home:d,draggables:s,viewport:e.viewport}),h=f.impact,m=f.afterCritical,g=c&&c.isCombineEnabled?e.impact:h,p=oN({pageOffset:e.current.page.offset,draggable:a.draggables[e.critical.draggable.id],draggables:a.draggables,droppables:a.droppables,previousImpact:g,viewport:e.viewport,afterCritical:m}),b=xe({phase:"DRAGGING"},e,{phase:"DRAGGING",impact:p,onLiftImpact:h,dimensions:a,afterCritical:m,forceShouldAnimate:!1});if(e.phase==="COLLECTING")return b;var y=xe({phase:"DROP_PENDING"},b,{phase:"DROP_PENDING",reason:e.reason,isWaiting:!1});return y},Ky=function(e){return e.movementMode==="SNAP"},wv=function(e,t,r){var i=Nxe(e.dimensions,t);return!Ky(e)||r?Mc({state:e,dimensions:i}):lN({state:e,dimensions:i})};function _v(n){return n.isDragging&&n.movementMode==="SNAP"?xe({phase:"DRAGGING"},n,{scrollJumpRequest:null}):n}var rP={phase:"IDLE",completed:null,shouldFlush:!1},zxe=function(n,e){if(n===void 0&&(n=rP),e.type==="FLUSH")return xe({},rP,{shouldFlush:!0});if(e.type==="INITIAL_PUBLISH"){n.phase!=="IDLE"&&ae();var t=e.payload,r=t.critical,i=t.clientSelection,o=t.viewport,s=t.dimensions,a=t.movementMode,l=s.draggables[r.draggable.id],c=s.droppables[r.droppable.id],u={selection:i,borderBoxCenter:l.client.borderBox.center,offset:dn},d={client:u,page:{selection:_n(u.selection,o.scroll.initial),borderBoxCenter:_n(u.selection,o.scroll.initial),offset:_n(u.selection,o.scroll.diff.value)}},f=Dg(s.droppables).every(function(Q){return!Q.isFixedOnPage}),h=cN({draggable:l,home:c,draggables:s.draggables,viewport:o}),m=h.impact,g=h.afterCritical,p={phase:"DRAGGING",isDragging:!0,critical:r,movementMode:a,dimensions:s,initial:d,current:d,isWindowScrollAllowed:f,impact:m,afterCritical:g,onLiftImpact:m,viewport:o,scrollJumpRequest:null,forceShouldAnimate:null};return p}if(e.type==="COLLECTION_STARTING"){if(n.phase==="COLLECTING"||n.phase==="DROP_PENDING")return n;n.phase!=="DRAGGING"&&ae();var b=xe({phase:"COLLECTING"},n,{phase:"COLLECTING"});return b}if(e.type==="PUBLISH_WHILE_DRAGGING")return n.phase==="COLLECTING"||n.phase==="DROP_PENDING"||ae(),Vxe({state:n,published:e.payload});if(e.type==="MOVE"){if(n.phase==="DROP_PENDING")return n;ts(n)||ae();var y=e.payload.client;return Ao(y,n.current.client.selection)?n:Mc({state:n,clientSelection:y,impact:Ky(n)?n.impact:null})}if(e.type==="UPDATE_DROPPABLE_SCROLL"){if(n.phase==="DROP_PENDING"||n.phase==="COLLECTING")return _v(n);ts(n)||ae();var C=e.payload,A=C.id,w=C.newScroll,S=n.dimensions.droppables[A];if(!S)return n;var _=m_(S,w);return wv(n,_,!1)}if(e.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(n.phase==="DROP_PENDING")return n;ts(n)||ae();var v=e.payload,x=v.id,T=v.isEnabled,E=n.dimensions.droppables[x];E||ae(),E.isEnabled===T&&ae();var k=xe({},E,{isEnabled:T});return wv(n,k,!0)}if(e.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(n.phase==="DROP_PENDING")return n;ts(n)||ae();var I=e.payload,B=I.id,D=I.isCombineEnabled,F=n.dimensions.droppables[B];F||ae(),F.isCombineEnabled===D&&ae();var L=xe({},F,{isCombineEnabled:D});return wv(n,L,!0)}if(e.type==="MOVE_BY_WINDOW_SCROLL"){if(n.phase==="DROP_PENDING"||n.phase==="DROP_ANIMATING")return n;ts(n)||ae(),n.isWindowScrollAllowed||ae();var H=e.payload.newScroll;if(Ao(n.viewport.scroll.current,H))return _v(n);var $=JB(n.viewport,H);return Ky(n)?lN({state:n,viewport:$}):Mc({state:n,viewport:$})}if(e.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!ts(n))return n;var ne=e.payload.maxScroll;if(Ao(ne,n.viewport.scroll.max))return n;var Z=xe({},n.viewport,{scroll:xe({},n.viewport.scroll,{max:ne})});return xe({phase:"DRAGGING"},n,{viewport:Z})}if(e.type==="MOVE_UP"||e.type==="MOVE_DOWN"||e.type==="MOVE_LEFT"||e.type==="MOVE_RIGHT"){if(n.phase==="COLLECTING"||n.phase==="DROP_PENDING")return n;n.phase!=="DRAGGING"&&ae();var G=Sxe({state:n,type:e.type});return G?Mc({state:n,impact:G.impact,clientSelection:G.clientSelection,scrollJumpRequest:G.scrollJumpRequest}):n}if(e.type==="DROP_PENDING"){var X=e.payload.reason;n.phase!=="COLLECTING"&&ae();var ee=xe({phase:"DROP_PENDING"},n,{phase:"DROP_PENDING",isWaiting:!0,reason:X});return ee}if(e.type==="DROP_ANIMATE"){var ie=e.payload,me=ie.completed,Ie=ie.dropDuration,ce=ie.newHomeClientOffset;n.phase==="DRAGGING"||n.phase==="DROP_PENDING"||ae();var q={phase:"DROP_ANIMATING",completed:me,dropDuration:Ie,newHomeClientOffset:ce,dimensions:n.dimensions};return q}if(e.type==="DROP_COMPLETE"){var oe=e.payload.completed;return{phase:"IDLE",completed:oe,shouldFlush:!1}}return n},jxe=function(e){return{type:"BEFORE_INITIAL_CAPTURE",payload:e}},Wxe=function(e){return{type:"LIFT",payload:e}},Hxe=function(e){return{type:"INITIAL_PUBLISH",payload:e}},Uxe=function(e){return{type:"PUBLISH_WHILE_DRAGGING",payload:e}},Gxe=function(){return{type:"COLLECTION_STARTING",payload:null}},qxe=function(e){return{type:"UPDATE_DROPPABLE_SCROLL",payload:e}},Kxe=function(e){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}},Yxe=function(e){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}},uN=function(e){return{type:"MOVE",payload:e}},Xxe=function(e){return{type:"MOVE_BY_WINDOW_SCROLL",payload:e}},Zxe=function(e){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}},Jxe=function(){return{type:"MOVE_UP",payload:null}},Qxe=function(){return{type:"MOVE_DOWN",payload:null}},eAe=function(){return{type:"MOVE_RIGHT",payload:null}},tAe=function(){return{type:"MOVE_LEFT",payload:null}},C_=function(){return{type:"FLUSH",payload:null}},nAe=function(e){return{type:"DROP_ANIMATE",payload:e}},S_=function(e){return{type:"DROP_COMPLETE",payload:e}},dN=function(e){return{type:"DROP",payload:e}},rAe=function(e){return{type:"DROP_PENDING",payload:e}},fN=function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}},iAe=function(n){return function(e){var t=e.getState,r=e.dispatch;return function(i){return function(o){if(o.type!=="LIFT"){i(o);return}var s=o.payload,a=s.id,l=s.clientSelection,c=s.movementMode,u=t();u.phase==="DROP_ANIMATING"&&r(S_({completed:u.completed})),t().phase!=="IDLE"&&ae(),r(C_()),r(jxe({draggableId:a,movementMode:c}));var d={shouldPublishImmediately:c==="SNAP"},f={draggableId:a,scrollOptions:d},h=n.startPublishing(f),m=h.critical,g=h.dimensions,p=h.viewport;r(Hxe({critical:m,dimensions:g,clientSelection:l,movementMode:c,viewport:p}))}}}},oAe=function(n){return function(){return function(e){return function(t){t.type==="INITIAL_PUBLISH"&&n.dragging(),t.type==="DROP_ANIMATE"&&n.dropping(t.payload.completed.result.reason),(t.type==="FLUSH"||t.type==="DROP_COMPLETE")&&n.resting(),e(t)}}}},x_={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},Gu={opacity:{drop:0,combining:.7},scale:{drop:.75}},A_={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},Xo=A_.outOfTheWay+"s "+x_.outOfTheWay,Dc={fluid:"opacity "+Xo,snap:"transform "+Xo+", opacity "+Xo,drop:function(e){var t=e+"s "+x_.drop;return"transform "+t+", opacity "+t},outOfTheWay:"transform "+Xo,placeholder:"height "+Xo+", width "+Xo+", margin "+Xo},iP=function(e){return Ao(e,dn)?null:"translate("+e.x+"px, "+e.y+"px)"},Yy={moveTo:iP,drop:function(e,t){var r=iP(e);return r?t?r+" scale("+Gu.scale.drop+")":r:null}},Xy=A_.minDropTime,hN=A_.maxDropTime,sAe=hN-Xy,oP=1500,aAe=.6,lAe=function(n){var e=n.current,t=n.destination,r=n.reason,i=Wu(e,t);if(i<=0)return Xy;if(i>=oP)return hN;var o=i/oP,s=Xy+sAe*o,a=r==="CANCEL"?s*aAe:s;return Number(a.toFixed(2))},cAe=function(n){var e=n.impact,t=n.draggable,r=n.dimensions,i=n.viewport,o=n.afterCritical,s=r.draggables,a=r.droppables,l=hr(e),c=l?a[l]:null,u=a[t.descriptor.droppableId],d=aN({impact:e,draggable:t,draggables:s,afterCritical:o,droppable:c||u,viewport:i}),f=dr(d,t.client.borderBox.center);return f},uAe=function(n){var e=n.draggables,t=n.reason,r=n.lastImpact,i=n.home,o=n.viewport,s=n.onLiftImpact;if(!r.at||t!=="DROP"){var a=sN({draggables:e,impact:s,destination:i,viewport:o,forceShouldAnimate:!0});return{impact:a,didDropInsideDroppable:!1}}if(r.at.type==="REORDER")return{impact:r,didDropInsideDroppable:!0};var l=xe({},r,{displaced:Hu});return{impact:l,didDropInsideDroppable:!0}},dAe=function(n){var e=n.getState,t=n.dispatch;return function(r){return function(i){if(i.type!=="DROP"){r(i);return}var o=e(),s=i.payload.reason;if(o.phase==="COLLECTING"){t(rAe({reason:s}));return}if(o.phase!=="IDLE"){var a=o.phase==="DROP_PENDING"&&o.isWaiting;a&&ae(),o.phase==="DRAGGING"||o.phase==="DROP_PENDING"||ae();var l=o.critical,c=o.dimensions,u=c.draggables[o.critical.draggable.id],d=uAe({reason:s,lastImpact:o.impact,afterCritical:o.afterCritical,onLiftImpact:o.onLiftImpact,home:o.dimensions.droppables[o.critical.droppable.id],viewport:o.viewport,draggables:o.dimensions.draggables}),f=d.impact,h=d.didDropInsideDroppable,m=h?p_(f):null,g=h?Bg(f):null,p={index:l.draggable.index,droppableId:l.droppable.id},b={draggableId:u.descriptor.id,type:u.descriptor.type,source:p,reason:s,mode:o.movementMode,destination:m,combine:g},y=cAe({impact:f,draggable:u,dimensions:c,viewport:o.viewport,afterCritical:o.afterCritical}),C={critical:o.critical,afterCritical:o.afterCritical,result:b,impact:f},A=!Ao(o.current.client.offset,y)||!!b.combine;if(!A){t(S_({completed:C}));return}var w=lAe({current:o.current.client.offset,destination:y,reason:s}),S={newHomeClientOffset:y,dropDuration:w,completed:C};t(nAe(S))}}}},mN=function(){return{x:window.pageXOffset,y:window.pageYOffset}};function fAe(n){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(t){t.target!==window&&t.target!==window.document||n()}}}function hAe(n){var e=n.onWindowScroll;function t(){e(mN())}var r=ju(t),i=fAe(r),o=xo;function s(){return o!==xo}function a(){s()&&ae(),o=Pr(window,[i])}function l(){s()||ae(),r.cancel(),o(),o=xo}return{start:a,stop:l,isActive:s}}var mAe=function(e){return e.type==="DROP_COMPLETE"||e.type==="DROP_ANIMATE"||e.type==="FLUSH"},gAe=function(n){var e=hAe({onWindowScroll:function(r){n.dispatch(Xxe({newScroll:r}))}});return function(t){return function(r){!e.isActive()&&r.type==="INITIAL_PUBLISH"&&e.start(),e.isActive()&&mAe(r)&&e.stop(),t(r)}}},pAe=function(n){var e=!1,t=!1,r=setTimeout(function(){t=!0}),i=function(s){e||t||(e=!0,n(s),clearTimeout(r))};return i.wasCalled=function(){return e},i},vAe=function(){var n=[],e=function(o){var s=g_(n,function(c){return c.timerId===o});s===-1&&ae();var a=n.splice(s,1),l=a[0];l.callback()},t=function(o){var s=setTimeout(function(){return e(s)}),a={timerId:s,callback:o};n.push(a)},r=function(){if(n.length){var o=[].concat(n);n.length=0,o.forEach(function(s){clearTimeout(s.timerId),s.callback()})}};return{add:t,flush:r}},bAe=function(e,t){return e==null&&t==null?!0:e==null||t==null?!1:e.droppableId===t.droppableId&&e.index===t.index},yAe=function(e,t){return e==null&&t==null?!0:e==null||t==null?!1:e.draggableId===t.draggableId&&e.droppableId===t.droppableId},wAe=function(e,t){if(e===t)return!0;var r=e.draggable.id===t.draggable.id&&e.draggable.droppableId===t.draggable.droppableId&&e.draggable.type===t.draggable.type&&e.draggable.index===t.draggable.index,i=e.droppable.id===t.droppable.id&&e.droppable.type===t.droppable.type;return r&&i},lc=function(e,t){t()},Af=function(e,t){return{draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:t}},Cv=function(e,t,r,i){if(!e){r(i(t));return}var o=pAe(r),s={announce:o};e(t,s),o.wasCalled()||r(i(t))},_Ae=function(n,e){var t=vAe(),r=null,i=function(f,h){r&&ae(),lc("onBeforeCapture",function(){var m=n().onBeforeCapture;if(m){var g={draggableId:f,mode:h};m(g)}})},o=function(f,h){r&&ae(),lc("onBeforeDragStart",function(){var m=n().onBeforeDragStart;m&&m(Af(f,h))})},s=function(f,h){r&&ae();var m=Af(f,h);r={mode:h,lastCritical:f,lastLocation:m.source,lastCombine:null},t.add(function(){lc("onDragStart",function(){return Cv(n().onDragStart,m,e,$f.onDragStart)})})},a=function(f,h){var m=p_(h),g=Bg(h);r||ae();var p=!wAe(f,r.lastCritical);p&&(r.lastCritical=f);var b=!bAe(r.lastLocation,m);b&&(r.lastLocation=m);var y=!yAe(r.lastCombine,g);if(y&&(r.lastCombine=g),!(!p&&!b&&!y)){var C=xe({},Af(f,r.mode),{combine:g,destination:m});t.add(function(){lc("onDragUpdate",function(){return Cv(n().onDragUpdate,C,e,$f.onDragUpdate)})})}},l=function(){r||ae(),t.flush()},c=function(f){r||ae(),r=null,lc("onDragEnd",function(){return Cv(n().onDragEnd,f,e,$f.onDragEnd)})},u=function(){if(r){var f=xe({},Af(r.lastCritical,r.mode),{combine:null,destination:null,reason:"CANCEL"});c(f)}};return{beforeCapture:i,beforeStart:o,start:s,update:a,flush:l,drop:c,abort:u}},CAe=function(n,e){var t=_Ae(n,e);return function(r){return function(i){return function(o){if(o.type==="BEFORE_INITIAL_CAPTURE"){t.beforeCapture(o.payload.draggableId,o.payload.movementMode);return}if(o.type==="INITIAL_PUBLISH"){var s=o.payload.critical;t.beforeStart(s,o.payload.movementMode),i(o),t.start(s,o.payload.movementMode);return}if(o.type==="DROP_COMPLETE"){var a=o.payload.completed.result;t.flush(),i(o),t.drop(a);return}if(i(o),o.type==="FLUSH"){t.abort();return}var l=r.getState();l.phase==="DRAGGING"&&t.update(l.critical,l.impact)}}}},SAe=function(n){return function(e){return function(t){if(t.type!=="DROP_ANIMATION_FINISHED"){e(t);return}var r=n.getState();r.phase!=="DROP_ANIMATING"&&ae(),n.dispatch(S_({completed:r.completed}))}}},xAe=function(n){var e=null,t=null;function r(){t&&(cancelAnimationFrame(t),t=null),e&&(e(),e=null)}return function(i){return function(o){if((o.type==="FLUSH"||o.type==="DROP_COMPLETE"||o.type==="DROP_ANIMATION_FINISHED")&&r(),i(o),o.type==="DROP_ANIMATE"){var s={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){var l=n.getState();l.phase==="DROP_ANIMATING"&&n.dispatch(fN())}};t=requestAnimationFrame(function(){t=null,e=Pr(window,[s])})}}}},AAe=function(n){return function(){return function(e){return function(t){(t.type==="DROP_COMPLETE"||t.type==="FLUSH"||t.type==="DROP_ANIMATE")&&n.stopPublishing(),e(t)}}}},TAe=function(n){var e=!1;return function(){return function(t){return function(r){if(r.type==="INITIAL_PUBLISH"){e=!0,n.tryRecordFocus(r.payload.critical.draggable.id),t(r),n.tryRestoreFocusRecorded();return}if(t(r),!!e){if(r.type==="FLUSH"){e=!1,n.tryRestoreFocusRecorded();return}if(r.type==="DROP_COMPLETE"){e=!1;var i=r.payload.completed.result;i.combine&&n.tryShiftRecord(i.draggableId,i.combine.draggableId),n.tryRestoreFocusRecorded()}}}}}},EAe=function(e){return e.type==="DROP_COMPLETE"||e.type==="DROP_ANIMATE"||e.type==="FLUSH"},kAe=function(n){return function(e){return function(t){return function(r){if(EAe(r)){n.stop(),t(r);return}if(r.type==="INITIAL_PUBLISH"){t(r);var i=e.getState();i.phase!=="DRAGGING"&&ae(),n.start(i);return}t(r),n.scroll(e.getState())}}}},PAe=function(n){return function(e){return function(t){if(e(t),t.type==="PUBLISH_WHILE_DRAGGING"){var r=n.getState();r.phase==="DROP_PENDING"&&(r.isWaiting||n.dispatch(dN({reason:r.reason})))}}}},IAe=CB,OAe=function(n){var e=n.dimensionMarshal,t=n.focusMarshal,r=n.styleMarshal,i=n.getResponders,o=n.announce,s=n.autoScroller;return _B(zxe,IAe(ECe(oAe(r),AAe(e),iAe(e),dAe,SAe,xAe,PAe,kAe(s),gAe,TAe(t),CAe(i,o))))},Sv=function(){return{additions:{},removals:{},modified:{}}};function RAe(n){var e=n.registry,t=n.callbacks,r=Sv(),i=null,o=function(){i||(t.collectionStarting(),i=requestAnimationFrame(function(){i=null;var u=r,d=u.additions,f=u.removals,h=u.modified,m=Object.keys(d).map(function(b){return e.draggable.getById(b).getDimension(dn)}).sort(function(b,y){return b.descriptor.index-y.descriptor.index}),g=Object.keys(h).map(function(b){var y=e.droppable.getById(b),C=y.callbacks.getScrollWhileDragging();return{droppableId:b,scroll:C}}),p={additions:m,removals:Object.keys(f),modified:g};r=Sv(),t.publish(p)}))},s=function(u){var d=u.descriptor.id;r.additions[d]=u,r.modified[u.descriptor.droppableId]=!0,r.removals[d]&&delete r.removals[d],o()},a=function(u){var d=u.descriptor;r.removals[d.id]=!0,r.modified[d.droppableId]=!0,r.additions[d.id]&&delete r.additions[d.id],o()},l=function(){i&&(cancelAnimationFrame(i),i=null,r=Sv())};return{add:s,remove:a,stop:l}}var gN=function(n){var e=n.scrollHeight,t=n.scrollWidth,r=n.height,i=n.width,o=dr({x:t,y:e},{x:i,y:r}),s={x:Math.max(0,o.x),y:Math.max(0,o.y)};return s},pN=function(){var n=document.documentElement;return n||ae(),n},vN=function(){var n=pN(),e=gN({scrollHeight:n.scrollHeight,scrollWidth:n.scrollWidth,width:n.clientWidth,height:n.clientHeight});return e},MAe=function(){var n=mN(),e=vN(),t=n.y,r=n.x,i=pN(),o=i.clientWidth,s=i.clientHeight,a=r+o,l=t+s,c=ti({top:t,left:r,right:a,bottom:l}),u={frame:c,scroll:{initial:n,current:n,max:e,diff:{value:dn,displacement:dn}}};return u},DAe=function(n){var e=n.critical,t=n.scrollOptions,r=n.registry,i=MAe(),o=i.scroll.current,s=e.droppable,a=r.droppable.getAllByType(s.type).map(function(d){return d.callbacks.getDimensionAndWatchScroll(o,t)}),l=r.draggable.getAllByType(e.draggable.type).map(function(d){return d.getDimension(o)}),c={draggables:GB(l),droppables:UB(a)},u={dimensions:c,critical:e,viewport:i};return u};function sP(n,e,t){if(t.descriptor.id===e.id||t.descriptor.type!==e.type)return!1;var r=n.droppable.getById(t.descriptor.droppableId);return r.descriptor.mode==="virtual"}var BAe=function(n,e){var t=null,r=RAe({callbacks:{publish:e.publishWhileDragging,collectionStarting:e.collectionStarting},registry:n}),i=function(h,m){n.droppable.exists(h)||ae(),t&&e.updateDroppableIsEnabled({id:h,isEnabled:m})},o=function(h,m){t&&(n.droppable.exists(h)||ae(),e.updateDroppableIsCombineEnabled({id:h,isCombineEnabled:m}))},s=function(h,m){t&&(n.droppable.exists(h)||ae(),e.updateDroppableScroll({id:h,newScroll:m}))},a=function(h,m){t&&n.droppable.getById(h).callbacks.scroll(m)},l=function(){if(t){r.stop();var h=t.critical.droppable;n.droppable.getAllByType(h.type).forEach(function(m){return m.callbacks.dragStopped()}),t.unsubscribe(),t=null}},c=function(h){t||ae();var m=t.critical.draggable;h.type==="ADDITION"&&sP(n,m,h.value)&&r.add(h.value),h.type==="REMOVAL"&&sP(n,m,h.value)&&r.remove(h.value)},u=function(h){t&&ae();var m=n.draggable.getById(h.draggableId),g=n.droppable.getById(m.descriptor.droppableId),p={draggable:m.descriptor,droppable:g.descriptor},b=n.subscribe(c);return t={critical:p,unsubscribe:b},DAe({critical:p,registry:n,scrollOptions:h.scrollOptions})},d={updateDroppableIsEnabled:i,updateDroppableIsCombineEnabled:o,scrollDroppable:a,updateDroppableScroll:s,startPublishing:u,stopPublishing:l};return d},bN=function(n,e){return n.phase==="IDLE"?!0:n.phase!=="DROP_ANIMATING"||n.completed.result.draggableId===e?!1:n.completed.result.reason==="DROP"},NAe=function(n){window.scrollBy(n.x,n.y)},LAe=Xt(function(n){return Dg(n).filter(function(e){return!(!e.isEnabled||!e.frame)})}),FAe=function(e,t){var r=zo(LAe(t),function(i){return i.frame||ae(),nN(i.frame.pageMarginBox)(e)});return r},$Ae=function(n){var e=n.center,t=n.destination,r=n.droppables;if(t){var i=r[t];return i.frame?i:null}var o=FAe(e,r);return o},To={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:function(e){return Math.pow(e,2)},durationDampening:{stopDampeningAt:1200,accelerateAt:360}},VAe=function(n,e){var t=n[e.size]*To.startFromPercentage,r=n[e.size]*To.maxScrollAtPercentage,i={startScrollingFrom:t,maxScrollValueAt:r};return i},yN=function(n){var e=n.startOfRange,t=n.endOfRange,r=n.current,i=t-e;if(i===0)return 0;var o=r-e,s=o/i;return s},T_=1,zAe=function(n,e){if(n>e.startScrollingFrom)return 0;if(n<=e.maxScrollValueAt)return To.maxPixelScroll;if(n===e.startScrollingFrom)return T_;var t=yN({startOfRange:e.maxScrollValueAt,endOfRange:e.startScrollingFrom,current:n}),r=1-t,i=To.maxPixelScroll*To.ease(r);return Math.ceil(i)},aP=To.durationDampening.accelerateAt,lP=To.durationDampening.stopDampeningAt,jAe=function(n,e){var t=e,r=lP,i=Date.now(),o=i-t;if(o>=lP)return n;if(o<aP)return T_;var s=yN({startOfRange:aP,endOfRange:r,current:o}),a=n*To.ease(s);return Math.ceil(a)},cP=function(n){var e=n.distanceToEdge,t=n.thresholds,r=n.dragStartTime,i=n.shouldUseTimeDampening,o=zAe(e,t);return o===0?0:i?Math.max(jAe(o,r),T_):o},uP=function(n){var e=n.container,t=n.distanceToEdges,r=n.dragStartTime,i=n.axis,o=n.shouldUseTimeDampening,s=VAe(e,i),a=t[i.end]<t[i.start];return a?cP({distanceToEdge:t[i.end],thresholds:s,dragStartTime:r,shouldUseTimeDampening:o}):-1*cP({distanceToEdge:t[i.start],thresholds:s,dragStartTime:r,shouldUseTimeDampening:o})},WAe=function(n){var e=n.container,t=n.subject,r=n.proposedScroll,i=t.height>e.height,o=t.width>e.width;return!o&&!i?r:o&&i?null:{x:o?0:r.x,y:i?0:r.y}},HAe=WB(function(n){return n===0?0:n}),wN=function(n){var e=n.dragStartTime,t=n.container,r=n.subject,i=n.center,o=n.shouldUseTimeDampening,s={top:i.y-t.top,right:t.right-i.x,bottom:t.bottom-i.y,left:i.x-t.left},a=uP({container:t,distanceToEdges:s,dragStartTime:e,axis:v_,shouldUseTimeDampening:o}),l=uP({container:t,distanceToEdges:s,dragStartTime:e,axis:YB,shouldUseTimeDampening:o}),c=HAe({x:l,y:a});if(Ao(c,dn))return null;var u=WAe({container:t,subject:r,proposedScroll:c});return u?Ao(u,dn)?null:u:null},UAe=WB(function(n){return n===0?0:n>0?1:-1}),E_=function(){var n=function(t,r){return t<0?t:t>r?t-r:0};return function(e){var t=e.current,r=e.max,i=e.change,o=_n(t,i),s={x:n(o.x,r.x),y:n(o.y,r.y)};return Ao(s,dn)?null:s}}(),_N=function(e){var t=e.max,r=e.current,i=e.change,o={x:Math.max(r.x,t.x),y:Math.max(r.y,t.y)},s=UAe(i),a=E_({max:o,current:r,change:s});return!a||s.x!==0&&a.x===0||s.y!==0&&a.y===0},k_=function(e,t){return _N({current:e.scroll.current,max:e.scroll.max,change:t})},GAe=function(e,t){if(!k_(e,t))return null;var r=e.scroll.max,i=e.scroll.current;return E_({current:i,max:r,change:t})},P_=function(e,t){var r=e.frame;return r?_N({current:r.scroll.current,max:r.scroll.max,change:t}):!1},qAe=function(e,t){var r=e.frame;return!r||!P_(e,t)?null:E_({current:r.scroll.current,max:r.scroll.max,change:t})},KAe=function(n){var e=n.viewport,t=n.subject,r=n.center,i=n.dragStartTime,o=n.shouldUseTimeDampening,s=wN({dragStartTime:i,container:e.frame,subject:t,center:r,shouldUseTimeDampening:o});return s&&k_(e,s)?s:null},YAe=function(n){var e=n.droppable,t=n.subject,r=n.center,i=n.dragStartTime,o=n.shouldUseTimeDampening,s=e.frame;if(!s)return null;var a=wN({dragStartTime:i,container:s.pageMarginBox,subject:t,center:r,shouldUseTimeDampening:o});return a&&P_(e,a)?a:null},dP=function(n){var e=n.state,t=n.dragStartTime,r=n.shouldUseTimeDampening,i=n.scrollWindow,o=n.scrollDroppable,s=e.current.page.borderBoxCenter,a=e.dimensions.draggables[e.critical.draggable.id],l=a.page.marginBox;if(e.isWindowScrollAllowed){var c=e.viewport,u=KAe({dragStartTime:t,viewport:c,subject:l,center:s,shouldUseTimeDampening:r});if(u){i(u);return}}var d=$Ae({center:s,destination:hr(e.impact),droppables:e.dimensions.droppables});if(d){var f=YAe({dragStartTime:t,droppable:d,subject:l,center:s,shouldUseTimeDampening:r});f&&o(d.descriptor.id,f)}},XAe=function(n){var e=n.scrollWindow,t=n.scrollDroppable,r=ju(e),i=ju(t),o=null,s=function(u){o||ae();var d=o,f=d.shouldUseTimeDampening,h=d.dragStartTime;dP({state:u,scrollWindow:r,scrollDroppable:i,dragStartTime:h,shouldUseTimeDampening:f})},a=function(u){o&&ae();var d=Date.now(),f=!1,h=function(){f=!0};dP({state:u,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:h,scrollDroppable:h}),o={dragStartTime:d,shouldUseTimeDampening:f},f&&s(u)},l=function(){o&&(r.cancel(),i.cancel(),o=null)};return{start:a,stop:l,scroll:s}},ZAe=function(n){var e=n.move,t=n.scrollDroppable,r=n.scrollWindow,i=function(c,u){var d=_n(c.current.client.selection,u);e({client:d})},o=function(c,u){if(!P_(c,u))return u;var d=qAe(c,u);if(!d)return t(c.descriptor.id,u),null;var f=dr(u,d);t(c.descriptor.id,f);var h=dr(u,f);return h},s=function(c,u,d){if(!c||!k_(u,d))return d;var f=GAe(u,d);if(!f)return r(d),null;var h=dr(d,f);r(h);var m=dr(d,h);return m},a=function(c){var u=c.scrollJumpRequest;if(u){var d=hr(c.impact);d||ae();var f=o(c.dimensions.droppables[d],u);if(f){var h=c.viewport,m=s(c.isWindowScrollAllowed,h,f);m&&i(c,m)}}};return a},JAe=function(n){var e=n.scrollDroppable,t=n.scrollWindow,r=n.move,i=XAe({scrollWindow:t,scrollDroppable:e}),o=ZAe({move:r,scrollWindow:t,scrollDroppable:e}),s=function(c){if(c.phase==="DRAGGING"){if(c.movementMode==="FLUID"){i.scroll(c);return}c.scrollJumpRequest&&o(c)}},a={scroll:s,start:i.start,stop:i.stop};return a},al="data-rbd",ll=function(){var n=al+"-drag-handle";return{base:n,draggableId:n+"-draggable-id",contextId:n+"-context-id"}}(),Zy=function(){var n=al+"-draggable";return{base:n,contextId:n+"-context-id",id:n+"-id"}}(),QAe=function(){var n=al+"-droppable";return{base:n,contextId:n+"-context-id",id:n+"-id"}}(),fP={contextId:al+"-scroll-container-context-id"},eTe=function(e){return function(t){return"["+t+'="'+e+'"]'}},cc=function(e,t){return e.map(function(r){var i=r.styles[t];return i?r.selector+" { "+i+" }":""}).join(" ")},tTe="pointer-events: none;",nTe=function(n){var e=eTe(n),t=function(){var a=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:e(ll.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:a,dragging:tTe,dropAnimating:a}}}(),r=function(){var a=`
      transition: `+Dc.outOfTheWay+`;
    `;return{selector:e(Zy.contextId),styles:{dragging:a,dropAnimating:a,userCancel:a}}}(),i={selector:e(QAe.contextId),styles:{always:"overflow-anchor: none;"}},o={selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}},s=[r,t,i,o];return{always:cc(s,"always"),resting:cc(s,"resting"),dragging:cc(s,"dragging"),dropAnimating:cc(s,"dropAnimating"),userCancel:cc(s,"userCancel")}},mr=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?R.useLayoutEffect:R.useEffect,xv=function(){var e=document.querySelector("head");return e||ae(),e},hP=function(e){var t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.type="text/css",t};function rTe(n,e){var t=Qe(function(){return nTe(n)},[n]),r=R.useRef(null),i=R.useRef(null),o=ke(Xt(function(d){var f=i.current;f||ae(),f.textContent=d}),[]),s=ke(function(d){var f=r.current;f||ae(),f.textContent=d},[]);mr(function(){!r.current&&!i.current||ae();var d=hP(e),f=hP(e);return r.current=d,i.current=f,d.setAttribute(al+"-always",n),f.setAttribute(al+"-dynamic",n),xv().appendChild(d),xv().appendChild(f),s(t.always),o(t.resting),function(){var h=function(g){var p=g.current;p||ae(),xv().removeChild(p),g.current=null};h(r),h(i)}},[e,s,o,t.always,t.resting,n]);var a=ke(function(){return o(t.dragging)},[o,t.dragging]),l=ke(function(d){if(d==="DROP"){o(t.dropAnimating);return}o(t.userCancel)},[o,t.dropAnimating,t.userCancel]),c=ke(function(){i.current&&o(t.resting)},[o,t.resting]),u=Qe(function(){return{dragging:a,dropping:l,resting:c}},[a,l,c]);return u}var CN=function(n){return n&&n.ownerDocument?n.ownerDocument.defaultView:window};function Fg(n){return n instanceof CN(n).HTMLElement}function iTe(n,e){var t="["+ll.contextId+'="'+n+'"]',r=HB(document.querySelectorAll(t));if(!r.length)return null;var i=zo(r,function(o){return o.getAttribute(ll.draggableId)===e});return!i||!Fg(i)?null:i}function oTe(n){var e=R.useRef({}),t=R.useRef(null),r=R.useRef(null),i=R.useRef(!1),o=ke(function(f,h){var m={id:f,focus:h};return e.current[f]=m,function(){var p=e.current,b=p[f];b!==m&&delete p[f]}},[]),s=ke(function(f){var h=iTe(n,f);h&&h!==document.activeElement&&h.focus()},[n]),a=ke(function(f,h){t.current===f&&(t.current=h)},[]),l=ke(function(){r.current||i.current&&(r.current=requestAnimationFrame(function(){r.current=null;var f=t.current;f&&s(f)}))},[s]),c=ke(function(f){t.current=null;var h=document.activeElement;h&&h.getAttribute(ll.draggableId)===f&&(t.current=f)},[]);mr(function(){return i.current=!0,function(){i.current=!1;var f=r.current;f&&cancelAnimationFrame(f)}},[]);var u=Qe(function(){return{register:o,tryRecordFocus:c,tryRestoreFocusRecorded:l,tryShiftRecord:a}},[o,c,l,a]);return u}function sTe(){var n={draggables:{},droppables:{}},e=[];function t(d){return e.push(d),function(){var h=e.indexOf(d);h!==-1&&e.splice(h,1)}}function r(d){e.length&&e.forEach(function(f){return f(d)})}function i(d){return n.draggables[d]||null}function o(d){var f=i(d);return f||ae(),f}var s={register:function(f){n.draggables[f.descriptor.id]=f,r({type:"ADDITION",value:f})},update:function(f,h){var m=n.draggables[h.descriptor.id];m&&m.uniqueId===f.uniqueId&&(delete n.draggables[h.descriptor.id],n.draggables[f.descriptor.id]=f)},unregister:function(f){var h=f.descriptor.id,m=i(h);m&&f.uniqueId===m.uniqueId&&(delete n.draggables[h],r({type:"REMOVAL",value:f}))},getById:o,findById:i,exists:function(f){return!!i(f)},getAllByType:function(f){return vm(n.draggables).filter(function(h){return h.descriptor.type===f})}};function a(d){return n.droppables[d]||null}function l(d){var f=a(d);return f||ae(),f}var c={register:function(f){n.droppables[f.descriptor.id]=f},unregister:function(f){var h=a(f.descriptor.id);h&&f.uniqueId===h.uniqueId&&delete n.droppables[f.descriptor.id]},getById:l,findById:a,exists:function(f){return!!a(f)},getAllByType:function(f){return vm(n.droppables).filter(function(h){return h.descriptor.type===f})}};function u(){n.draggables={},n.droppables={},e.length=0}return{draggable:s,droppable:c,subscribe:t,clean:u}}function aTe(){var n=Qe(sTe,[]);return R.useEffect(function(){return function(){requestAnimationFrame(n.clean)}},[n]),n}var I_=O.createContext(null),ym=function(){var n=document.body;return n||ae(),n},lTe={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},cTe=function(e){return"rbd-announcement-"+e};function uTe(n){var e=Qe(function(){return cTe(n)},[n]),t=R.useRef(null);R.useEffect(function(){var o=document.createElement("div");return t.current=o,o.id=e,o.setAttribute("aria-live","assertive"),o.setAttribute("aria-atomic","true"),xe(o.style,lTe),ym().appendChild(o),function(){setTimeout(function(){var l=ym();l.contains(o)&&l.removeChild(o),o===t.current&&(t.current=null)})}},[e]);var r=ke(function(i){var o=t.current;if(o){o.textContent=i;return}},[]);return r}var dTe=0,fTe={separator:"::"};function O_(n,e){return e===void 0&&(e=fTe),Qe(function(){return""+n+e.separator+dTe++},[e.separator,n])}function hTe(n){var e=n.contextId,t=n.uniqueId;return"rbd-hidden-text-"+e+"-"+t}function mTe(n){var e=n.contextId,t=n.text,r=O_("hidden-text",{separator:"-"}),i=Qe(function(){return hTe({contextId:e,uniqueId:r})},[r,e]);return R.useEffect(function(){var s=document.createElement("div");return s.id=i,s.textContent=t,s.style.display="none",ym().appendChild(s),function(){var l=ym();l.contains(s)&&l.removeChild(s)}},[i,t]),i}var $g=O.createContext(null);function SN(n){var e=R.useRef(n);return R.useEffect(function(){e.current=n}),e}function gTe(){var n=null;function e(){return!!n}function t(s){return s===n}function r(s){n&&ae();var a={abandon:s};return n=a,a}function i(){n||ae(),n=null}function o(){n&&(n.abandon(),i())}return{isClaimed:e,isActive:t,claim:r,release:i,tryAbandon:o}}var pTe=9,vTe=13,R_=27,xN=32,bTe=33,yTe=34,wTe=35,_Te=36,CTe=37,STe=38,xTe=39,ATe=40,Tf,TTe=(Tf={},Tf[vTe]=!0,Tf[pTe]=!0,Tf),AN=function(n){TTe[n.keyCode]&&n.preventDefault()},Vg=function(){var n="visibilitychange";if(typeof document>"u")return n;var e=[n,"ms"+n,"webkit"+n,"moz"+n,"o"+n],t=zo(e,function(r){return"on"+r in document});return t||n}(),TN=0,mP=5;function ETe(n,e){return Math.abs(e.x-n.x)>=mP||Math.abs(e.y-n.y)>=mP}var gP={type:"IDLE"};function kTe(n){var e=n.cancel,t=n.completed,r=n.getPhase,i=n.setPhase;return[{eventName:"mousemove",fn:function(s){var a=s.button,l=s.clientX,c=s.clientY;if(a===TN){var u={x:l,y:c},d=r();if(d.type==="DRAGGING"){s.preventDefault(),d.actions.move(u);return}d.type!=="PENDING"&&ae();var f=d.point;if(ETe(f,u)){s.preventDefault();var h=d.actions.fluidLift(u);i({type:"DRAGGING",actions:h})}}}},{eventName:"mouseup",fn:function(s){var a=r();if(a.type!=="DRAGGING"){e();return}s.preventDefault(),a.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"mousedown",fn:function(s){r().type==="DRAGGING"&&s.preventDefault(),e()}},{eventName:"keydown",fn:function(s){var a=r();if(a.type==="PENDING"){e();return}if(s.keyCode===R_){s.preventDefault(),e();return}AN(s)}},{eventName:"resize",fn:e},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){r().type==="PENDING"&&e()}},{eventName:"webkitmouseforcedown",fn:function(s){var a=r();if(a.type==="IDLE"&&ae(),a.actions.shouldRespectForcePress()){e();return}s.preventDefault()}},{eventName:Vg,fn:e}]}function PTe(n){var e=R.useRef(gP),t=R.useRef(xo),r=Qe(function(){return{eventName:"mousedown",fn:function(d){if(!d.defaultPrevented&&d.button===TN&&!(d.ctrlKey||d.metaKey||d.shiftKey||d.altKey)){var f=n.findClosestDraggableId(d);if(f){var h=n.tryGetLock(f,s,{sourceEvent:d});if(h){d.preventDefault();var m={x:d.clientX,y:d.clientY};t.current(),c(h,m)}}}}}},[n]),i=Qe(function(){return{eventName:"webkitmouseforcewillbegin",fn:function(d){if(!d.defaultPrevented){var f=n.findClosestDraggableId(d);if(f){var h=n.findOptionsForDraggable(f);h&&(h.shouldRespectForcePress||n.canGetLock(f)&&d.preventDefault())}}}}},[n]),o=ke(function(){var d={passive:!1,capture:!0};t.current=Pr(window,[i,r],d)},[i,r]),s=ke(function(){var u=e.current;u.type!=="IDLE"&&(e.current=gP,t.current(),o())},[o]),a=ke(function(){var u=e.current;s(),u.type==="DRAGGING"&&u.actions.cancel({shouldBlockNextClick:!0}),u.type==="PENDING"&&u.actions.abort()},[s]),l=ke(function(){var d={capture:!0,passive:!1},f=kTe({cancel:a,completed:s,getPhase:function(){return e.current},setPhase:function(m){e.current=m}});t.current=Pr(window,f,d)},[a,s]),c=ke(function(d,f){e.current.type!=="IDLE"&&ae(),e.current={type:"PENDING",point:f,actions:d},l()},[l]);mr(function(){return o(),function(){t.current()}},[o])}var ra;function ITe(){}var OTe=(ra={},ra[yTe]=!0,ra[bTe]=!0,ra[_Te]=!0,ra[wTe]=!0,ra);function RTe(n,e){function t(){e(),n.cancel()}function r(){e(),n.drop()}return[{eventName:"keydown",fn:function(o){if(o.keyCode===R_){o.preventDefault(),t();return}if(o.keyCode===xN){o.preventDefault(),r();return}if(o.keyCode===ATe){o.preventDefault(),n.moveDown();return}if(o.keyCode===STe){o.preventDefault(),n.moveUp();return}if(o.keyCode===xTe){o.preventDefault(),n.moveRight();return}if(o.keyCode===CTe){o.preventDefault(),n.moveLeft();return}if(OTe[o.keyCode]){o.preventDefault();return}AN(o)}},{eventName:"mousedown",fn:t},{eventName:"mouseup",fn:t},{eventName:"click",fn:t},{eventName:"touchstart",fn:t},{eventName:"resize",fn:t},{eventName:"wheel",fn:t,options:{passive:!0}},{eventName:Vg,fn:t}]}function MTe(n){var e=R.useRef(ITe),t=Qe(function(){return{eventName:"keydown",fn:function(o){if(o.defaultPrevented||o.keyCode!==xN)return;var s=n.findClosestDraggableId(o);if(!s)return;var a=n.tryGetLock(s,u,{sourceEvent:o});if(!a)return;o.preventDefault();var l=!0,c=a.snapLift();e.current();function u(){l||ae(),l=!1,e.current(),r()}e.current=Pr(window,RTe(c,u),{capture:!0,passive:!1})}}},[n]),r=ke(function(){var o={passive:!1,capture:!0};e.current=Pr(window,[t],o)},[t]);mr(function(){return r(),function(){e.current()}},[r])}var Av={type:"IDLE"},DTe=120,BTe=.15;function NTe(n){var e=n.cancel,t=n.getPhase;return[{eventName:"orientationchange",fn:e},{eventName:"resize",fn:e},{eventName:"contextmenu",fn:function(i){i.preventDefault()}},{eventName:"keydown",fn:function(i){if(t().type!=="DRAGGING"){e();return}i.keyCode===R_&&i.preventDefault(),e()}},{eventName:Vg,fn:e}]}function LTe(n){var e=n.cancel,t=n.completed,r=n.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(o){var s=r();if(s.type!=="DRAGGING"){e();return}s.hasMoved=!0;var a=o.touches[0],l=a.clientX,c=a.clientY,u={x:l,y:c};o.preventDefault(),s.actions.move(u)}},{eventName:"touchend",fn:function(o){var s=r();if(s.type!=="DRAGGING"){e();return}o.preventDefault(),s.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"touchcancel",fn:function(o){if(r().type!=="DRAGGING"){e();return}o.preventDefault(),e()}},{eventName:"touchforcechange",fn:function(o){var s=r();s.type==="IDLE"&&ae();var a=o.touches[0];if(a){var l=a.force>=BTe;if(l){var c=s.actions.shouldRespectForcePress();if(s.type==="PENDING"){c&&e();return}if(c){if(s.hasMoved){o.preventDefault();return}e();return}o.preventDefault()}}}},{eventName:Vg,fn:e}]}function FTe(n){var e=R.useRef(Av),t=R.useRef(xo),r=ke(function(){return e.current},[]),i=ke(function(h){e.current=h},[]),o=Qe(function(){return{eventName:"touchstart",fn:function(h){if(!h.defaultPrevented){var m=n.findClosestDraggableId(h);if(m){var g=n.tryGetLock(m,a,{sourceEvent:h});if(g){var p=h.touches[0],b=p.clientX,y=p.clientY,C={x:b,y};t.current(),d(g,C)}}}}}},[n]),s=ke(function(){var h={capture:!0,passive:!1};t.current=Pr(window,[o],h)},[o]),a=ke(function(){var f=e.current;f.type!=="IDLE"&&(f.type==="PENDING"&&clearTimeout(f.longPressTimerId),i(Av),t.current(),s())},[s,i]),l=ke(function(){var f=e.current;a(),f.type==="DRAGGING"&&f.actions.cancel({shouldBlockNextClick:!0}),f.type==="PENDING"&&f.actions.abort()},[a]),c=ke(function(){var h={capture:!0,passive:!1},m={cancel:l,completed:a,getPhase:r},g=Pr(window,LTe(m),h),p=Pr(window,NTe(m),h);t.current=function(){g(),p()}},[l,r,a]),u=ke(function(){var h=r();h.type!=="PENDING"&&ae();var m=h.actions.fluidLift(h.point);i({type:"DRAGGING",actions:m,hasMoved:!1})},[r,i]),d=ke(function(h,m){r().type!=="IDLE"&&ae();var g=setTimeout(u,DTe);i({type:"PENDING",point:m,actions:h,longPressTimerId:g}),c()},[c,r,i,u]);mr(function(){return s(),function(){t.current();var m=r();m.type==="PENDING"&&(clearTimeout(m.longPressTimerId),i(Av))}},[r,s,i]),mr(function(){var h=Pr(window,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}]);return h},[])}var $Te={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function EN(n,e){if(e==null)return!1;var t=!!$Te[e.tagName.toLowerCase()];if(t)return!0;var r=e.getAttribute("contenteditable");return r==="true"||r===""?!0:e===n?!1:EN(n,e.parentElement)}function VTe(n,e){var t=e.target;return Fg(t)?EN(n,t):!1}var zTe=function(n){return ti(n.getBoundingClientRect()).center};function jTe(n){return n instanceof CN(n).Element}var WTe=function(){var n="matches";if(typeof document>"u")return n;var e=[n,"msMatchesSelector","webkitMatchesSelector"],t=zo(e,function(r){return r in Element.prototype});return t||n}();function kN(n,e){return n==null?null:n[WTe](e)?n:kN(n.parentElement,e)}function HTe(n,e){return n.closest?n.closest(e):kN(n,e)}function UTe(n){return"["+ll.contextId+'="'+n+'"]'}function GTe(n,e){var t=e.target;if(!jTe(t))return null;var r=UTe(n),i=HTe(t,r);return!i||!Fg(i)?null:i}function qTe(n,e){var t=GTe(n,e);return t?t.getAttribute(ll.draggableId):null}function KTe(n,e){var t="["+Zy.contextId+'="'+n+'"]',r=HB(document.querySelectorAll(t)),i=zo(r,function(o){return o.getAttribute(Zy.id)===e});return!i||!Fg(i)?null:i}function YTe(n){n.preventDefault()}function Ef(n){var e=n.expected,t=n.phase,r=n.isLockActive;return n.shouldWarn,!(!r()||e!==t)}function PN(n){var e=n.lockAPI,t=n.store,r=n.registry,i=n.draggableId;if(e.isClaimed())return!1;var o=r.draggable.findById(i);return!(!o||!o.options.isEnabled||!bN(t.getState(),i))}function XTe(n){var e=n.lockAPI,t=n.contextId,r=n.store,i=n.registry,o=n.draggableId,s=n.forceSensorStop,a=n.sourceEvent,l=PN({lockAPI:e,store:r,registry:i,draggableId:o});if(!l)return null;var c=i.draggable.getById(o),u=KTe(t,c.descriptor.id);if(!u||a&&!c.options.canDragInteractiveElements&&VTe(u,a))return null;var d=e.claim(s||xo),f="PRE_DRAG";function h(){return c.options.shouldRespectForcePress}function m(){return e.isActive(d)}function g(S,_){Ef({expected:S,phase:f,isLockActive:m,shouldWarn:!0})&&r.dispatch(_())}var p=g.bind(null,"DRAGGING");function b(S){function _(){e.release(),f="COMPLETED"}f!=="PRE_DRAG"&&(_(),f!=="PRE_DRAG"&&ae()),r.dispatch(Wxe(S.liftActionArgs)),f="DRAGGING";function v(x,T){if(T===void 0&&(T={shouldBlockNextClick:!1}),S.cleanup(),T.shouldBlockNextClick){var E=Pr(window,[{eventName:"click",fn:YTe,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(E)}_(),r.dispatch(dN({reason:x}))}return xe({isActive:function(){return Ef({expected:"DRAGGING",phase:f,isLockActive:m,shouldWarn:!1})},shouldRespectForcePress:h,drop:function(T){return v("DROP",T)},cancel:function(T){return v("CANCEL",T)}},S.actions)}function y(S){var _=ju(function(x){p(function(){return uN({client:x})})}),v=b({liftActionArgs:{id:o,clientSelection:S,movementMode:"FLUID"},cleanup:function(){return _.cancel()},actions:{move:_}});return xe({},v,{move:_})}function C(){var S={moveUp:function(){return p(Jxe)},moveRight:function(){return p(eAe)},moveDown:function(){return p(Qxe)},moveLeft:function(){return p(tAe)}};return b({liftActionArgs:{id:o,clientSelection:zTe(u),movementMode:"SNAP"},cleanup:xo,actions:S})}function A(){var S=Ef({expected:"PRE_DRAG",phase:f,isLockActive:m,shouldWarn:!0});S&&e.release()}var w={isActive:function(){return Ef({expected:"PRE_DRAG",phase:f,isLockActive:m,shouldWarn:!1})},shouldRespectForcePress:h,fluidLift:y,snapLift:C,abort:A};return w}var ZTe=[PTe,MTe,FTe];function JTe(n){var e=n.contextId,t=n.store,r=n.registry,i=n.customSensors,o=n.enableDefaultSensors,s=[].concat(o?ZTe:[],i||[]),a=R.useState(function(){return gTe()})[0],l=ke(function(y,C){y.isDragging&&!C.isDragging&&a.tryAbandon()},[a]);mr(function(){var y=t.getState(),C=t.subscribe(function(){var A=t.getState();l(y,A),y=A});return C},[a,t,l]),mr(function(){return a.tryAbandon},[a.tryAbandon]);for(var c=ke(function(b){return PN({lockAPI:a,registry:r,store:t,draggableId:b})},[a,r,t]),u=ke(function(b,y,C){return XTe({lockAPI:a,registry:r,contextId:e,store:t,draggableId:b,forceSensorStop:y,sourceEvent:C&&C.sourceEvent?C.sourceEvent:null})},[e,a,r,t]),d=ke(function(b){return qTe(e,b)},[e]),f=ke(function(b){var y=r.draggable.findById(b);return y?y.options:null},[r.draggable]),h=ke(function(){a.isClaimed()&&(a.tryAbandon(),t.getState().phase!=="IDLE"&&t.dispatch(C_()))},[a,t]),m=ke(a.isClaimed,[a]),g=Qe(function(){return{canGetLock:c,tryGetLock:u,findClosestDraggableId:d,findOptionsForDraggable:f,tryReleaseLock:h,isLockClaimed:m}},[c,u,d,f,h,m]),p=0;p<s.length;p++)s[p](g)}var QTe=function(e){return{onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}};function uc(n){return n.current||ae(),n.current}function eEe(n){var e=n.contextId,t=n.setCallbacks,r=n.sensors,i=n.nonce,o=n.dragHandleUsageInstructions,s=R.useRef(null),a=SN(n),l=ke(function(){return QTe(a.current)},[a]),c=uTe(e),u=mTe({contextId:e,text:o}),d=rTe(e,i),f=ke(function(x){uc(s).dispatch(x)},[]),h=Qe(function(){return $k({publishWhileDragging:Uxe,updateDroppableScroll:qxe,updateDroppableIsEnabled:Kxe,updateDroppableIsCombineEnabled:Yxe,collectionStarting:Gxe},f)},[f]),m=aTe(),g=Qe(function(){return BAe(m,h)},[m,h]),p=Qe(function(){return JAe(xe({scrollWindow:NAe,scrollDroppable:g.scrollDroppable},$k({move:uN},f)))},[g.scrollDroppable,f]),b=oTe(e),y=Qe(function(){return OAe({announce:c,autoScroller:p,dimensionMarshal:g,focusMarshal:b,getResponders:l,styleMarshal:d})},[c,p,g,b,l,d]);s.current=y;var C=ke(function(){var x=uc(s),T=x.getState();T.phase!=="IDLE"&&x.dispatch(C_())},[]),A=ke(function(){var x=uc(s).getState();return x.isDragging||x.phase==="DROP_ANIMATING"},[]),w=Qe(function(){return{isDragging:A,tryAbort:C}},[A,C]);t(w);var S=ke(function(x){return bN(uc(s).getState(),x)},[]),_=ke(function(){return ts(uc(s).getState())},[]),v=Qe(function(){return{marshal:g,focus:b,contextId:e,canLift:S,isMovementAllowed:_,dragHandleUsageInstructionsId:u,registry:m}},[e,g,u,b,S,_,m]);return JTe({contextId:e,store:y,registry:m,customSensors:r,enableDefaultSensors:n.enableDefaultSensors!==!1}),R.useEffect(function(){return C},[C]),O.createElement($g.Provider,{value:v},O.createElement(RCe,{context:I_,store:y},n.children))}var tEe=0;function nEe(){return Qe(function(){return""+tEe++},[])}function AIe(n){var e=nEe(),t=n.dragHandleUsageInstructions||$f.dragHandleUsageInstructions;return O.createElement(MSe,null,function(r){return O.createElement(eEe,{nonce:n.nonce,contextId:e,setCallbacks:r,dragHandleUsageInstructions:t,enableDefaultSensors:n.enableDefaultSensors,sensors:n.sensors,onBeforeCapture:n.onBeforeCapture,onBeforeDragStart:n.onBeforeDragStart,onDragStart:n.onDragStart,onDragUpdate:n.onDragUpdate,onDragEnd:n.onDragEnd},n.children)})}var IN=function(e){return function(t){return e===t}},rEe=IN("scroll"),iEe=IN("auto"),pP=function(e,t){return t(e.overflowX)||t(e.overflowY)},oEe=function(e){var t=window.getComputedStyle(e),r={overflowX:t.overflowX,overflowY:t.overflowY};return pP(r,rEe)||pP(r,iEe)},sEe=function(){return!1},aEe=function n(e){return e==null?null:e===document.body?sEe()?e:null:e===document.documentElement?null:oEe(e)?e:n(e.parentElement)},Jy=function(n){return{x:n.scrollLeft,y:n.scrollTop}},lEe=function n(e){if(!e)return!1;var t=window.getComputedStyle(e);return t.position==="fixed"?!0:n(e.parentElement)},cEe=function(n){var e=aEe(n),t=lEe(n);return{closestScrollable:e,isFixedOnPage:t}},uEe=function(n){var e=n.descriptor,t=n.isEnabled,r=n.isCombineEnabled,i=n.isFixedOnPage,o=n.direction,s=n.client,a=n.page,l=n.closest,c=function(){if(!l)return null;var h=l.scrollSize,m=l.client,g=gN({scrollHeight:h.scrollHeight,scrollWidth:h.scrollWidth,height:m.paddingBox.height,width:m.paddingBox.width});return{pageMarginBox:l.page.marginBox,frameClient:m,scrollSize:h,shouldClipSubject:l.shouldClipSubject,scroll:{initial:l.scroll,current:l.scroll,max:g,diff:{value:dn,displacement:dn}}}}(),u=o==="vertical"?v_:YB,d=sl({page:a,withPlaceholder:null,axis:u,frame:c}),f={descriptor:e,isCombineEnabled:r,isFixedOnPage:i,axis:u,isEnabled:t,client:s,page:a,frame:c,subject:d};return f},dEe=function(e,t){var r=$B(e);if(!t||e!==t)return r;var i=r.paddingBox.top-t.scrollTop,o=r.paddingBox.left-t.scrollLeft,s=i+t.scrollHeight,a=o+t.scrollWidth,l={top:i,right:a,bottom:s,left:o},c=f_(l,r.border),u=h_({borderBox:c,margin:r.margin,border:r.border,padding:r.padding});return u},fEe=function(n){var e=n.ref,t=n.descriptor,r=n.env,i=n.windowScroll,o=n.direction,s=n.isDropDisabled,a=n.isCombineEnabled,l=n.shouldClipSubject,c=r.closestScrollable,u=dEe(e,c),d=mm(u,i),f=function(){if(!c)return null;var m=$B(c),g={scrollHeight:c.scrollHeight,scrollWidth:c.scrollWidth};return{client:m,page:mm(m,i),scroll:Jy(c),scrollSize:g,shouldClipSubject:l}}(),h=uEe({descriptor:t,isEnabled:!s,isCombineEnabled:a,isFixedOnPage:r.isFixedOnPage,direction:o,client:u,page:d,closest:f});return h},hEe={passive:!1},mEe={passive:!0},vP=function(n){return n.shouldPublishImmediately?hEe:mEe};function wm(n){var e=R.useContext(n);return e||ae(),e}var kf=function(e){return e&&e.env.closestScrollable||null};function gEe(n){var e=R.useRef(null),t=wm($g),r=O_("droppable"),i=t.registry,o=t.marshal,s=SN(n),a=Qe(function(){return{id:n.droppableId,type:n.type,mode:n.mode}},[n.droppableId,n.mode,n.type]),l=R.useRef(a),c=Qe(function(){return Xt(function(A,w){e.current||ae();var S={x:A,y:w};o.updateDroppableScroll(a.id,S)})},[a.id,o]),u=ke(function(){var A=e.current;return!A||!A.env.closestScrollable?dn:Jy(A.env.closestScrollable)},[]),d=ke(function(){var A=u();c(A.x,A.y)},[u,c]),f=Qe(function(){return ju(d)},[d]),h=ke(function(){var A=e.current,w=kf(A);A&&w||ae();var S=A.scrollOptions;if(S.shouldPublishImmediately){d();return}f()},[f,d]),m=ke(function(A,w){e.current&&ae();var S=s.current,_=S.getDroppableRef();_||ae();var v=cEe(_),x={ref:_,descriptor:a,env:v,scrollOptions:w};e.current=x;var T=fEe({ref:_,descriptor:a,env:v,windowScroll:A,direction:S.direction,isDropDisabled:S.isDropDisabled,isCombineEnabled:S.isCombineEnabled,shouldClipSubject:!S.ignoreContainerClipping}),E=v.closestScrollable;return E&&(E.setAttribute(fP.contextId,t.contextId),E.addEventListener("scroll",h,vP(x.scrollOptions))),T},[t.contextId,a,h,s]),g=ke(function(){var A=e.current,w=kf(A);return A&&w||ae(),Jy(w)},[]),p=ke(function(){var A=e.current;A||ae();var w=kf(A);e.current=null,w&&(f.cancel(),w.removeAttribute(fP.contextId),w.removeEventListener("scroll",h,vP(A.scrollOptions)))},[h,f]),b=ke(function(A){var w=e.current;w||ae();var S=kf(w);S||ae(),S.scrollTop+=A.y,S.scrollLeft+=A.x},[]),y=Qe(function(){return{getDimensionAndWatchScroll:m,getScrollWhileDragging:g,dragStopped:p,scroll:b}},[p,m,g,b]),C=Qe(function(){return{uniqueId:r,descriptor:a,callbacks:y}},[y,a,r]);mr(function(){return l.current=C.descriptor,i.droppable.register(C),function(){e.current&&p(),i.droppable.unregister(C)}},[y,a,p,C,o,i.droppable]),mr(function(){e.current&&o.updateDroppableIsEnabled(l.current.id,!n.isDropDisabled)},[n.isDropDisabled,o]),mr(function(){e.current&&o.updateDroppableIsCombineEnabled(l.current.id,n.isCombineEnabled)},[n.isCombineEnabled,o])}function Tv(){}var bP={width:0,height:0,margin:$Se},pEe=function(e){var t=e.isAnimatingOpenOnMount,r=e.placeholder,i=e.animate;return t||i==="close"?bP:{height:r.client.borderBox.height,width:r.client.borderBox.width,margin:r.client.margin}},vEe=function(e){var t=e.isAnimatingOpenOnMount,r=e.placeholder,i=e.animate,o=pEe({isAnimatingOpenOnMount:t,placeholder:r,animate:i});return{display:r.display,boxSizing:"border-box",width:o.width,height:o.height,marginTop:o.margin.top,marginRight:o.margin.right,marginBottom:o.margin.bottom,marginLeft:o.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:i!=="none"?Dc.placeholder:null}};function bEe(n){var e=R.useRef(null),t=ke(function(){e.current&&(clearTimeout(e.current),e.current=null)},[]),r=n.animate,i=n.onTransitionEnd,o=n.onClose,s=n.contextId,a=R.useState(n.animate==="open"),l=a[0],c=a[1];R.useEffect(function(){return l?r!=="open"?(t(),c(!1),Tv):e.current?Tv:(e.current=setTimeout(function(){e.current=null,c(!1)}),t):Tv},[r,l,t]);var u=ke(function(f){f.propertyName==="height"&&(i(),r==="close"&&o())},[r,o,i]),d=vEe({isAnimatingOpenOnMount:l,animate:n.animate,placeholder:n.placeholder});return O.createElement(n.placeholder.tagName,{style:d,"data-rbd-placeholder-context-id":s,onTransitionEnd:u,ref:n.innerRef})}var yEe=O.memo(bEe),M_=O.createContext(null),wEe=function(n){jR(e,n);function e(){for(var r,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=n.call.apply(n,[this].concat(o))||this,r.state={isVisible:!!r.props.on,data:r.props.on,animate:r.props.shouldAnimate&&r.props.on?"open":"none"},r.onClose=function(){r.state.animate==="close"&&r.setState({isVisible:!1})},r}e.getDerivedStateFromProps=function(i,o){return i.shouldAnimate?i.on?{isVisible:!0,data:i.on,animate:"open"}:o.isVisible?{isVisible:!0,data:o.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!i.on,data:i.on,animate:"none"}};var t=e.prototype;return t.render=function(){if(!this.state.isVisible)return null;var i={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(i)},e}(O.PureComponent),yP={dragging:5e3,dropAnimating:4500},_Ee=function(e,t){return t?Dc.drop(t.duration):e?Dc.snap:Dc.fluid},CEe=function(e,t){return e?t?Gu.opacity.drop:Gu.opacity.combining:null},SEe=function(e){return e.forceShouldAnimate!=null?e.forceShouldAnimate:e.mode==="SNAP"};function xEe(n){var e=n.dimension,t=e.client,r=n.offset,i=n.combineWith,o=n.dropping,s=!!i,a=SEe(n),l=!!o,c=l?Yy.drop(r,s):Yy.moveTo(r),u={position:"fixed",top:t.marginBox.top,left:t.marginBox.left,boxSizing:"border-box",width:t.borderBox.width,height:t.borderBox.height,transition:_Ee(a,o),transform:c,opacity:CEe(s,l),zIndex:l?yP.dropAnimating:yP.dragging,pointerEvents:"none"};return u}function AEe(n){return{transform:Yy.moveTo(n.offset),transition:n.shouldAnimateDisplacement?null:"none"}}function TEe(n){return n.type==="DRAGGING"?xEe(n):AEe(n)}function EEe(n,e,t){t===void 0&&(t=dn);var r=window.getComputedStyle(e),i=e.getBoundingClientRect(),o=FB(i,r),s=mm(o,t),a={client:o,tagName:e.tagName.toLowerCase(),display:r.display},l={x:o.marginBox.width,y:o.marginBox.height},c={descriptor:n,placeholder:a,displaceBy:l,client:o,page:s};return c}function kEe(n){var e=O_("draggable"),t=n.descriptor,r=n.registry,i=n.getDraggableRef,o=n.canDragInteractiveElements,s=n.shouldRespectForcePress,a=n.isEnabled,l=Qe(function(){return{canDragInteractiveElements:o,shouldRespectForcePress:s,isEnabled:a}},[o,a,s]),c=ke(function(h){var m=i();return m||ae(),EEe(t,m,h)},[t,i]),u=Qe(function(){return{uniqueId:e,descriptor:t,options:l,getDimension:c}},[t,c,l,e]),d=R.useRef(u),f=R.useRef(!0);mr(function(){return r.draggable.register(d.current),function(){return r.draggable.unregister(d.current)}},[r.draggable]),mr(function(){if(f.current){f.current=!1;return}var h=d.current;d.current=u,r.draggable.update(u,h)},[u,r.draggable])}function PEe(n){n.preventDefault()}function IEe(n){var e=R.useRef(null),t=ke(function(x){e.current=x},[]),r=ke(function(){return e.current},[]),i=wm($g),o=i.contextId,s=i.dragHandleUsageInstructionsId,a=i.registry,l=wm(M_),c=l.type,u=l.droppableId,d=Qe(function(){return{id:n.draggableId,index:n.index,type:c,droppableId:u}},[n.draggableId,n.index,c,u]),f=n.children,h=n.draggableId,m=n.isEnabled,g=n.shouldRespectForcePress,p=n.canDragInteractiveElements,b=n.isClone,y=n.mapped,C=n.dropAnimationFinished;if(!b){var A=Qe(function(){return{descriptor:d,registry:a,getDraggableRef:r,canDragInteractiveElements:p,shouldRespectForcePress:g,isEnabled:m}},[d,a,r,p,g,m]);kEe(A)}var w=Qe(function(){return m?{tabIndex:0,role:"button","aria-describedby":s,"data-rbd-drag-handle-draggable-id":h,"data-rbd-drag-handle-context-id":o,draggable:!1,onDragStart:PEe}:null},[o,s,h,m]),S=ke(function(x){y.type==="DRAGGING"&&y.dropping&&x.propertyName==="transform"&&C()},[C,y]),_=Qe(function(){var x=TEe(y),T=y.type==="DRAGGING"&&y.dropping?S:null,E={innerRef:t,draggableProps:{"data-rbd-draggable-context-id":o,"data-rbd-draggable-id":h,style:x,onTransitionEnd:T},dragHandleProps:w};return E},[o,w,h,y,S,t]),v=Qe(function(){return{draggableId:d.id,type:d.type,source:{index:d.index,droppableId:d.droppableId}}},[d.droppableId,d.id,d.index,d.type]);return f(_,y.snapshot,v)}var ON=function(n,e){return n===e},RN=function(n){var e=n.combine,t=n.destination;return t?t.droppableId:e?e.droppableId:null},OEe=function(e){return e.combine?e.combine.draggableId:null},REe=function(e){return e.at&&e.at.type==="COMBINE"?e.at.combine.draggableId:null};function MEe(){var n=Xt(function(i,o){return{x:i,y:o}}),e=Xt(function(i,o,s,a,l){return{isDragging:!0,isClone:o,isDropAnimating:!!l,dropAnimation:l,mode:i,draggingOver:s,combineWith:a,combineTargetFor:null}}),t=Xt(function(i,o,s,a,l,c,u){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:l,combineWith:c,mode:o,offset:i,dimension:s,forceShouldAnimate:u,snapshot:e(o,a,l,c,null)}}}),r=function(o,s){if(o.isDragging){if(o.critical.draggable.id!==s.draggableId)return null;var a=o.current.client.offset,l=o.dimensions.draggables[s.draggableId],c=hr(o.impact),u=REe(o.impact),d=o.forceShouldAnimate;return t(n(a.x,a.y),o.movementMode,l,s.isClone,c,u,d)}if(o.phase==="DROP_ANIMATING"){var f=o.completed;if(f.result.draggableId!==s.draggableId)return null;var h=s.isClone,m=o.dimensions.draggables[s.draggableId],g=f.result,p=g.mode,b=RN(g),y=OEe(g),C=o.dropDuration,A={duration:C,curve:x_.drop,moveTo:o.newHomeClientOffset,opacity:y?Gu.opacity.drop:null,scale:y?Gu.scale.drop:null};return{mapped:{type:"DRAGGING",offset:o.newHomeClientOffset,dimension:m,dropping:A,draggingOver:b,combineWith:y,mode:p,forceShouldAnimate:null,snapshot:e(p,h,b,y,A)}}}return null};return r}function MN(n){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:n,combineWith:null}}var DEe={mapped:{type:"SECONDARY",offset:dn,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:MN(null)}};function BEe(){var n=Xt(function(s,a){return{x:s,y:a}}),e=Xt(MN),t=Xt(function(s,a,l){return a===void 0&&(a=null),{mapped:{type:"SECONDARY",offset:s,combineTargetFor:a,shouldAnimateDisplacement:l,snapshot:e(a)}}}),r=function(a){return a?t(dn,a,!0):null},i=function(a,l,c,u){var d=c.displaced.visible[a],f=!!(u.inVirtualList&&u.effected[a]),h=Bg(c),m=h&&h.draggableId===a?l:null;if(!d){if(!f)return r(m);if(c.displaced.invisible[a])return null;var g=Il(u.displacedBy.point),p=n(g.x,g.y);return t(p,m,!0)}if(f)return r(m);var b=c.displacedBy.point,y=n(b.x,b.y);return t(y,m,d.shouldAnimate)},o=function(a,l){if(a.isDragging)return a.critical.draggable.id===l.draggableId?null:i(l.draggableId,a.critical.draggable.id,a.impact,a.afterCritical);if(a.phase==="DROP_ANIMATING"){var c=a.completed;return c.result.draggableId===l.draggableId?null:i(l.draggableId,c.result.draggableId,c.impact,c.afterCritical)}return null};return o}var NEe=function(){var e=MEe(),t=BEe(),r=function(o,s){return e(o,s)||t(o,s)||DEe};return r},LEe={dropAnimationFinished:fN},FEe=NB(NEe,LEe,null,{context:I_,pure:!0,areStatePropsEqual:ON})(IEe);function DN(n){var e=wm(M_),t=e.isUsingCloneFor;return t===n.draggableId&&!n.isClone?null:O.createElement(FEe,n)}function TIe(n){var e=typeof n.isDragDisabled=="boolean"?!n.isDragDisabled:!0,t=!!n.disableInteractiveElementBlocking,r=!!n.shouldRespectForcePress;return O.createElement(DN,xe({},n,{isClone:!1,isEnabled:e,canDragInteractiveElements:t,shouldRespectForcePress:r}))}function $Ee(n){var e=R.useContext($g);e||ae();var t=e.contextId,r=e.isMovementAllowed,i=R.useRef(null),o=R.useRef(null),s=n.children,a=n.droppableId,l=n.type,c=n.mode,u=n.direction,d=n.ignoreContainerClipping,f=n.isDropDisabled,h=n.isCombineEnabled,m=n.snapshot,g=n.useClone,p=n.updateViewportMaxScroll,b=n.getContainerForClone,y=ke(function(){return i.current},[]),C=ke(function(E){i.current=E},[]);ke(function(){return o.current},[]);var A=ke(function(E){o.current=E},[]),w=ke(function(){r()&&p({maxScroll:vN()})},[r,p]);gEe({droppableId:a,type:l,mode:c,direction:u,isDropDisabled:f,isCombineEnabled:h,ignoreContainerClipping:d,getDroppableRef:y});var S=O.createElement(wEe,{on:n.placeholder,shouldAnimate:n.shouldAnimatePlaceholder},function(E){var k=E.onClose,I=E.data,B=E.animate;return O.createElement(yEe,{placeholder:I,onClose:k,innerRef:A,animate:B,contextId:t,onTransitionEnd:w})}),_=Qe(function(){return{innerRef:C,placeholder:S,droppableProps:{"data-rbd-droppable-id":a,"data-rbd-droppable-context-id":t}}},[t,a,S,C]),v=g?g.dragging.draggableId:null,x=Qe(function(){return{droppableId:a,type:l,isUsingCloneFor:v}},[a,v,l]);function T(){if(!g)return null;var E=g.dragging,k=g.render,I=O.createElement(DN,{draggableId:E.draggableId,index:E.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},function(B,D){return k(B,D,E)});return tF.createPortal(I,b())}return O.createElement(M_.Provider,{value:x},s(_,m),T())}var Ev=function(e,t){return e===t.droppable.type},wP=function(e,t){return t.draggables[e.draggable.id]},VEe=function(){var e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t=xe({},e,{shouldAnimatePlaceholder:!1}),r=Xt(function(s){return{draggableId:s.id,type:s.type,source:{index:s.index,droppableId:s.droppableId}}}),i=Xt(function(s,a,l,c,u,d){var f=u.descriptor.id,h=u.descriptor.droppableId===s;if(h){var m=d?{render:d,dragging:r(u.descriptor)}:null,g={isDraggingOver:l,draggingOverWith:l?f:null,draggingFromThisWith:f,isUsingPlaceholder:!0};return{placeholder:u.placeholder,shouldAnimatePlaceholder:!1,snapshot:g,useClone:m}}if(!a)return t;if(!c)return e;var p={isDraggingOver:l,draggingOverWith:f,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:u.placeholder,shouldAnimatePlaceholder:!0,snapshot:p,useClone:null}}),o=function(a,l){var c=l.droppableId,u=l.type,d=!l.isDropDisabled,f=l.renderClone;if(a.isDragging){var h=a.critical;if(!Ev(u,h))return t;var m=wP(h,a.dimensions),g=hr(a.impact)===c;return i(c,d,g,g,m,f)}if(a.phase==="DROP_ANIMATING"){var p=a.completed;if(!Ev(u,p.critical))return t;var b=wP(p.critical,a.dimensions);return i(c,d,RN(p.result)===c,hr(p.impact)===c,b,f)}if(a.phase==="IDLE"&&a.completed&&!a.shouldFlush){var y=a.completed;if(!Ev(u,y.critical))return t;var C=hr(y.impact)===c,A=!!(y.impact.at&&y.impact.at.type==="COMBINE"),w=y.critical.droppable.id===c;return C?A?e:t:w?e:t}return t};return o},zEe={updateViewportMaxScroll:Zxe};function jEe(){return document.body||ae(),document.body}var WEe={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:jEe},HEe=NB(VEe,zEe,null,{context:I_,pure:!0,areStatePropsEqual:ON})($Ee);HEe.defaultProps=WEe;var Qy={exports:{}},zg={},D_={};Object.defineProperty(D_,"__esModule",{value:!0});var UEe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M904 160H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0 624H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0-312H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8z"}}]},name:"menu",theme:"outlined"};D_.default=UEe;var GEe=gF.default,B_=pF.default;Object.defineProperty(zg,"__esModule",{value:!0});zg.default=void 0;var qEe=B_(vF),BN=GEe(R),KEe=B_(D_),YEe=B_(bF),XEe=function(e,t){return BN.createElement(YEe.default,(0,qEe.default)({},e,{ref:t,icon:KEe.default}))},ZEe=BN.forwardRef(XEe);zg.default=ZEe;(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;const t=r(zg);function r(o){return o&&o.__esModule?o:{default:o}}const i=t;e.default=i,n.exports=i})(Qy,Qy.exports);var JEe=Qy.exports;const EIe=ot(JEe),kIe=({isVisible:n,setVisible:e,reloadPool:t})=>{const{message:r,notification:i}=oI.useApp(),{pool:o}=xF(),[s,a]=R.useState([]),[l,c]=R.useState([]),[u,d]=R.useState(!1),[f,h]=R.useState(!1),[m,g]=R.useState(!1),[p,b]=R.useState(!1),[y,C]=R.useState(0),{connector:A}=nF(),[w,S]=R.useState(0),[_,v]=R.useState([]),[x,T]=R.useState([]),E=async()=>{if(l.length){let ee=[];ee=await lp.getLoanAndInvoiceInterestRates(l,o),T(ee)}};R.useEffect(()=>{E()},[l]);const k=[{dataIndex:"key",title:"ID",key:"key",render:(ee,ie)=>{switch(ie.assetType){case Vd.LENDING:return ie.debtOrderContract.externalId;case Vd.INVOICE:return ie.invoice.openItemId;default:return"N/A"}}},...w===1?[{title:"Repay Amount",dataIndex:"displayAmount",key:"repay_amount",render:(ee,ie,me)=>we.jsx("input",{className:"text-right border-solid border border-[#ABB0AC] focus:border-[#ABB0AC] focus-visible:outline-0 rounded-lg p-2",value:ee,placeholder:"Input Text",onChange:Ie=>I(Ie,me)})}]:[],{title:"Amount",dataIndex:"amount",key:"amount",render:ee=>ee?tp(ee):"N/A"},{title:"APR",dataIndex:"interestRatePercentage",key:"interestRatePercentage",render:(ee,ie,me)=>ie.assetType==Vd.NOTE_TOKEN?ie.type===SF.SENIOR?`${ie.interestRatePercentage}%`:"N/A":x.length?`${tp(x[me])}%`:null},{title:"Update collateral?",dataIndex:"updateCollateral",hidden:w===0,key:"updateCollateral",render:(ee,ie,me)=>we.jsx(rF,{checked:ee,onChange:async()=>{const Ie=[...l];Ie[me].updateCollateral=!ee,c(Ie)}})},{title:"Financing date",dataIndex:"createdAt",key:"createdAt",hidden:w===1,defaultSortOrder:"descend",render:(ee,ie)=>{var me;return jf.unix((me=ie==null?void 0:ie.debtOrderContract)==null?void 0:me.financingTimestamp).format("DD/MM/YYYY")},sorter:(ee,ie)=>ee.createdAt-ie.createdAt},{title:"Maturity Date",key:"dueDate",hidden:w===1,render:(ee,ie)=>{switch(ie.assetType){case Vd.LENDING:return jf(ie.debtOrderContract.debtOrderContractInfo.finalMaturityDate).format("DD/MM/YYYY");default:return"N/A"}}}].filter(ee=>!ee.hidden),I=(ee,ie)=>{let{value:me}=ee.target;if(me=me.replace(/,/g,""),!isNaN(me)&&Number(me)>=0){const Ie=[...l];Ie[ie].displayAmount=me,c(Ie),b(!1)}},B=l.reduce((ee,ie)=>ee+parseFloat(ie.displayAmount),0),D=R.useMemo(()=>s.reduce((ee,ie)=>ee+parseFloat(ie.displayAmount),0),[s]),F=async(ee,ie=!1)=>{const me=await _F(),Ie=o.currency.decimals;return{amounts:(await me.methods.getDebtAssetValues(o.poolContractAddress,ee.map(oe=>oe.tokenId)).call()).map(oe=>ie?new rp(oe).dividedBy(new rp(10).pow(Ie).toNumber()).toNumber():new rp(oe))}},L=async()=>{d(!0);const ee=await ap.getAllAssets({status:[d1.FINANCED,d1.PARTIAL_REPAY],poolId:o.id}),{amounts:ie}=await F(ee,!0),me=ee.map((ce,q)=>(ce.currentBalance=ce.amount,ce.amount=ie[q].toFixed(2),ce.displayAmount=ie[q].toFixed(2),ce.updateCollateral=!0,ce)),Ie=me.reduce((ce,q)=>ce+parseFloat(q.displayAmount),0);C(Ie),a(me),c(me),d(!1)};R.useEffect(()=>{L()},[]);const H=()=>{S(1),c(s.filter(ee=>_.includes(ee.id)))},$=()=>{b(!1),S(0),v([]),c(s)},ne=async()=>{g(!0);try{const ee=o.currency.decimals,ie=await yF(o.currency.tokenAddress),me=np((B+10).toFixed(2),ee);if(y>=parseFloat(B.toFixed(2))){const Ie=await ie.send("approve",[Bv.contracts.LoanKernel,me]);await lp.waitForTransactionReceipt(Ie,A==null?void 0:A.id),b(!0)}else r.error("Approve repay failed because of insufficient balance")}catch(ee){console.log("failed",ee),r.error("Approve repay failed")}g(!1)},Z=async()=>{h(!0);try{const ee=l.filter(oe=>oe.updateCollateral).map(oe=>({id:oe.id,outstandingAmount:Math.max(oe.currentBalance-oe.displayAmount,0)})),ie={data:ee},me=o.currency.decimals,ce=await(await wF(Bv.contracts.LoanKernel)).send("repayInBatch",[l.map(oe=>oe.tokenId),l.map(oe=>parseFloat(Number(oe.displayAmount).toFixed(2))>=parseFloat(oe.amount)?np((parseFloat(oe.displayAmount)+10).toFixed(2),me):np(oe.displayAmount,me)),o.currency.tokenAddress]),q=await lp.waitForTransactionReceipt(ce,A==null?void 0:A.id);await CF(ap.repayByTxHash,[q.transactionHash],3e3),r.success("Repay successfully"),ee.length&&(await ap.updateCollateral(ie),i.success({message:"Update collaterals successully!"})),t(),h(!1),e(!1)}catch(ee){console.log("failed",ee),r.error("Repay failed"),h(!1)}},G={selectedRowKeys:_,onChange:ee=>{v(ee)},getCheckboxProps:()=>({disabled:w===1})},X={header:{backgroundColor:"transparent"},content:{borderRadius:24}};return we.jsxs(sI,{onCancel:()=>e(!1),title:we.jsx("span",{className:"text-xl bg-tr",children:"Repay"}),footer:null,width:"65vw",open:n,style:{minWidth:500},styles:X,children:[we.jsx("div",{className:"flex justify-center",children:we.jsx(iF,{labelPlacement:"vertical",direction:"horizontal",type:"default",current:w,size:"small",className:"whitespace-nowrap mt-2 max-w-[450px]",items:[{title:"Select Asset",style:{fontWeight:600}},{title:"Enter Amount",style:{fontWeight:600}}]})}),we.jsx("div",{children:we.jsxs("div",{className:"mt-5",children:[we.jsx(oF,{columns:k,dataSource:l||[],"data-testid":"repay-asset-table",loading:u,scroll:{y:"calc(100vh - 360px)",x:1e3},bodyStyle:{cursor:"pointer",overflowX:"auto"},pagination:!1,size:"middle",rowKey:ee=>ee.id,rowSelection:G}),we.jsxs("div",{className:"mt-10 flex justify-between items-center",children:[we.jsxs("div",{children:[we.jsx("div",{className:"text-base font-normal",children:"Total Amount To Repay:"}),we.jsxs("div",{className:"font-bold text-lg mt-1",children:[tp(w===1?B:D),WL(Fc(o,"currency.shortCode",""))]})]}),we.jsx("div",{children:w===1?we.jsxs(we.Fragment,{children:[we.jsx(fa,{className:"shadow-none h-12 w-40 mr-5 bg-[#25272614] hover:bg-[#25272614]","data-testid":"repay-previous-button",shape:"round",onClick:$,disabled:!(_!=null&&_.length),children:"Previous"}),we.jsx(fa,{className:"shadow-none h-12 w-40 mr-5",shape:"round",type:"primary",loading:m,onClick:ne,disabled:p,"data-testid":"repay-approve-repay-button",children:"Approve Repay"}),we.jsx(fa,{className:"shadow-none h-12 w-40",type:"primary",loading:f,onClick:Z,"data-testid":"repay-repay-button",disabled:!p,children:"Repay"})]}):we.jsx(fa,{className:"shadow-none h-12 w-32",shape:"round",type:"primary",onClick:H,disabled:!(_!=null&&_.length),children:"Next"})})]})]})})]})},PIe=({visible:n,onClose:e,legalDocumentId:t,onSubmit:r,needSigner:i=!1})=>{const{notification:o}=oI.useApp(),[s,a]=R.useState(null),[l,c]=R.useState(!1),[u,d]=R.useState(null),[f,h]=R.useState(""),m=R.useCallback(async()=>{if(t)try{const{sasUrl:p}=await u1.getDocumentAttachment(t);if(p){const b=await u1.getDocumentContentViaURL(p);d(b)}}catch(p){console.log("get doc failed: ",p)}},[t]),g=async()=>{try{if(c(!0),!u){o.error({message:"Cannot upload collaterals until asset transfer agreement set by Issuer"});return}if(!s||s.isEmpty()){o.error({message:"Please sign the agreement first"});return}const p=s.toDataURL();await r(p,f)}catch(p){console.log(p)}finally{c(!1)}};return R.useEffect(()=>{setTimeout(()=>{if(document.getElementById("signature-pad")){const p=new mF(document.getElementById("signature-pad"),{backgroundColor:"rgba(255, 255, 255, 0)",penColor:"rgb(0, 0, 0)"});a(p)}},500),m()},[]),we.jsx(sI,{style:{minWidth:500,paddingBottom:0},width:"66vw",title:we.jsx("span",{className:"text-lg",children:"Sign Agreement"}),open:n,onCancel:e,styles:{header:{backgroundColor:"transparent"},content:{borderRadius:24,backgroundColor:"#F0F0F0"}},footer:null,children:we.jsx("div",{children:we.jsxs(ip,{style:{marginTop:10},children:[we.jsxs(sF,{span:24,children:[we.jsx("div",{className:"font-medium my-4",children:"Please sign below after reading the following statement"}),we.jsx("div",{className:"rounded-[24px] p-10 bg-white overflow-auto",children:u?we.jsx("div",{dangerouslySetInnerHTML:{__html:u}}):we.jsx(aF,{active:!0,loading:!0})})]}),we.jsx("div",{children:we.jsxs("div",{className:"px-3",style:{overflowY:"auto"},children:[we.jsx(ip,{style:{marginTop:10},children:we.jsxs("div",{className:"flex flex-row gap-6 flex-wrap lg:flex-nowrap",children:[we.jsx("div",{children:we.jsx("p",{style:{color:"red",textAlign:"justify"},className:"flex-grow",children:"By selecting the “Submit’ button, you acknowledge and agree that (i) you have read and are signing the Document electronically, (ii) your electronic signature is the legal equivalent of your manual signature on this document, (iii) you consent to be legally bound by the terms and conditions of the Document, including agreeing to submit to binding arbitration, and your waiver of certain rights and claims arising from or related to the Investor Agreement, (iv) no certification authority or other verification is necessary to validate your electronic signature and the the lack of such certification or verification will not in any way affect the enforceability of your electronic signature or any resulting contract between you and the countersigned in this Document, (v) you electronic signature and your use of Untangled service, website or electronic platform constitute your agreement to be bound by Untangled Terms of Use and your consent to electronic means for review, signature, and delivery of documents and materials, and (vi) you can access and print or save for future reference, this electronic consent, the Document and Untangled’s Term of Use."})}),we.jsxs("div",{className:"flex-shrink-0",children:[i&&we.jsx(lF,{label:"Signer",className:"mb-1",children:we.jsx(aI,{value:f,onChange:p=>h(p.target.value)})}),we.jsx("center",{children:we.jsxs("div",{className:"mt-5 w-80 bg-[#2527260A] rounded-[24px]",style:{border:"1px solid #e8e8e8"},children:[we.jsx("p",{className:"font-medium",children:"Add Signature"}),we.jsx("canvas",{id:"signature-pad",width:"300",height:"200"})]})})]})]})}),we.jsx(ip,{style:{marginTop:10},gutter:16,children:we.jsxs("div",{className:"flex gap-3 justify-end w-full mt-5",children:[we.jsx(fa,{onClick:e,className:"shadow-none w-40 h-12 bg-[#25272614] hover:bg-[#25272614]",children:"Cancel"}),we.jsx(fa,{className:"shadow-none w-40 h-12",onClick:g,loading:l,disabled:i?!f:!1,type:"primary",children:"Submit"})]})})]})})]})})})};var NN={exports:{}};/* @license
Papa Parse
v5.5.2
https://github.com/mholt/PapaParse
License: MIT
*/(function(n,e){((t,r)=>{n.exports=r()})(hc,function t(){var r=typeof self<"u"?self:typeof window<"u"?window:r!==void 0?r:{},i,o=!r.document&&!!r.postMessage,s=r.IS_PAPA_WORKER||!1,a={},l=0,c={};function u(v){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(x){var T=w(x);T.chunkSize=parseInt(T.chunkSize),x.step||x.chunk||(T.chunkSize=null),this._handle=new g(T),(this._handle.streamer=this)._config=T}).call(this,v),this.parseChunk=function(x,T){var E=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<E){let I=this._config.newline;I||(k=this._config.quoteChar||'"',I=this._handle.guessLineEndings(x,k)),x=[...x.split(I).slice(E)].join(I)}this.isFirstChunk&&_(this._config.beforeFirstChunk)&&(k=this._config.beforeFirstChunk(x))!==void 0&&(x=k),this.isFirstChunk=!1,this._halted=!1;var E=this._partialLine+x,k=(this._partialLine="",this._handle.parse(E,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(x=k.meta.cursor,E=(this._finished||(this._partialLine=E.substring(x-this._baseIndex),this._baseIndex=x),k&&k.data&&(this._rowCount+=k.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),s)r.postMessage({results:k,workerId:c.WORKER_ID,finished:E});else if(_(this._config.chunk)&&!T){if(this._config.chunk(k,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=k=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(k.data),this._completeResults.errors=this._completeResults.errors.concat(k.errors),this._completeResults.meta=k.meta),this._completed||!E||!_(this._config.complete)||k&&k.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),E||k&&k.meta.paused||this._nextChunk(),k}this._halted=!0},this._sendError=function(x){_(this._config.error)?this._config.error(x):s&&this._config.error&&r.postMessage({workerId:c.WORKER_ID,error:x,finished:!1})}}function d(v){var x;(v=v||{}).chunkSize||(v.chunkSize=c.RemoteChunkSize),u.call(this,v),this._nextChunk=o?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(T){this._input=T,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(x=new XMLHttpRequest,this._config.withCredentials&&(x.withCredentials=this._config.withCredentials),o||(x.onload=S(this._chunkLoaded,this),x.onerror=S(this._chunkError,this)),x.open(this._config.downloadRequestBody?"POST":"GET",this._input,!o),this._config.downloadRequestHeaders){var T,E=this._config.downloadRequestHeaders;for(T in E)x.setRequestHeader(T,E[T])}var k;this._config.chunkSize&&(k=this._start+this._config.chunkSize-1,x.setRequestHeader("Range","bytes="+this._start+"-"+k));try{x.send(this._config.downloadRequestBody)}catch(I){this._chunkError(I.message)}o&&x.status===0&&this._chunkError()}},this._chunkLoaded=function(){x.readyState===4&&(x.status<200||400<=x.status?this._chunkError():(this._start+=this._config.chunkSize||x.responseText.length,this._finished=!this._config.chunkSize||this._start>=(T=>(T=T.getResponseHeader("Content-Range"))!==null?parseInt(T.substring(T.lastIndexOf("/")+1)):-1)(x),this.parseChunk(x.responseText)))},this._chunkError=function(T){T=x.statusText||T,this._sendError(new Error(T))}}function f(v){(v=v||{}).chunkSize||(v.chunkSize=c.LocalChunkSize),u.call(this,v);var x,T,E=typeof FileReader<"u";this.stream=function(k){this._input=k,T=k.slice||k.webkitSlice||k.mozSlice,E?((x=new FileReader).onload=S(this._chunkLoaded,this),x.onerror=S(this._chunkError,this)):x=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var k=this._input,I=(this._config.chunkSize&&(I=Math.min(this._start+this._config.chunkSize,this._input.size),k=T.call(k,this._start,I)),x.readAsText(k,this._config.encoding));E||this._chunkLoaded({target:{result:I}})},this._chunkLoaded=function(k){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(k.target.result)},this._chunkError=function(){this._sendError(x.error)}}function h(v){var x;u.call(this,v=v||{}),this.stream=function(T){return x=T,this._nextChunk()},this._nextChunk=function(){var T,E;if(!this._finished)return T=this._config.chunkSize,x=T?(E=x.substring(0,T),x.substring(T)):(E=x,""),this._finished=!x,this.parseChunk(E)}}function m(v){u.call(this,v=v||{});var x=[],T=!0,E=!1;this.pause=function(){u.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){u.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(k){this._input=k,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){E&&x.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),x.length?this.parseChunk(x.shift()):T=!0},this._streamData=S(function(k){try{x.push(typeof k=="string"?k:k.toString(this._config.encoding)),T&&(T=!1,this._checkIsFinished(),this.parseChunk(x.shift()))}catch(I){this._streamError(I)}},this),this._streamError=S(function(k){this._streamCleanUp(),this._sendError(k)},this),this._streamEnd=S(function(){this._streamCleanUp(),E=!0,this._streamData("")},this),this._streamCleanUp=S(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function g(v){var x,T,E,k,I=Math.pow(2,53),B=-I,D=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,F=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,L=this,H=0,$=0,ne=!1,Z=!1,G=[],X={data:[],errors:[],meta:{}};function ee(ce){return v.skipEmptyLines==="greedy"?ce.join("").trim()==="":ce.length===1&&ce[0].length===0}function ie(){if(X&&E&&(Ie("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+c.DefaultDelimiter+"'"),E=!1),v.skipEmptyLines&&(X.data=X.data.filter(function(Q){return!ee(Q)})),me()){let Q=function(K,Se){_(v.transformHeader)&&(K=v.transformHeader(K,Se)),G.push(K)};if(X)if(Array.isArray(X.data[0])){for(var ce=0;me()&&ce<X.data.length;ce++)X.data[ce].forEach(Q);X.data.splice(0,1)}else X.data.forEach(Q)}function q(Q,K){for(var Se=v.header?{}:[],le=0;le<Q.length;le++){var Ce=le,ye=Q[le],ye=((je,P)=>(N=>(v.dynamicTypingFunction&&v.dynamicTyping[N]===void 0&&(v.dynamicTyping[N]=v.dynamicTypingFunction(N)),(v.dynamicTyping[N]||v.dynamicTyping)===!0))(je)?P==="true"||P==="TRUE"||P!=="false"&&P!=="FALSE"&&((N=>{if(D.test(N)&&(N=parseFloat(N),B<N&&N<I))return 1})(P)?parseFloat(P):F.test(P)?new Date(P):P===""?null:P):P)(Ce=v.header?le>=G.length?"__parsed_extra":G[le]:Ce,ye=v.transform?v.transform(ye,Ce):ye);Ce==="__parsed_extra"?(Se[Ce]=Se[Ce]||[],Se[Ce].push(ye)):Se[Ce]=ye}return v.header&&(le>G.length?Ie("FieldMismatch","TooManyFields","Too many fields: expected "+G.length+" fields but parsed "+le,$+K):le<G.length&&Ie("FieldMismatch","TooFewFields","Too few fields: expected "+G.length+" fields but parsed "+le,$+K)),Se}var oe;X&&(v.header||v.dynamicTyping||v.transform)&&(oe=1,!X.data.length||Array.isArray(X.data[0])?(X.data=X.data.map(q),oe=X.data.length):X.data=q(X.data,0),v.header&&X.meta&&(X.meta.fields=G),$+=oe)}function me(){return v.header&&G.length===0}function Ie(ce,q,oe,Q){ce={type:ce,code:q,message:oe},Q!==void 0&&(ce.row=Q),X.errors.push(ce)}_(v.step)&&(k=v.step,v.step=function(ce){X=ce,me()?ie():(ie(),X.data.length!==0&&(H+=ce.data.length,v.preview&&H>v.preview?T.abort():(X.data=X.data[0],k(X,L))))}),this.parse=function(ce,q,oe){var Q=v.quoteChar||'"',Q=(v.newline||(v.newline=this.guessLineEndings(ce,Q)),E=!1,v.delimiter?_(v.delimiter)&&(v.delimiter=v.delimiter(ce),X.meta.delimiter=v.delimiter):((Q=((K,Se,le,Ce,ye)=>{var je,P,N,z;ye=ye||[",","	","|",";",c.RECORD_SEP,c.UNIT_SEP];for(var se=0;se<ye.length;se++){for(var te,re=ye[se],ge=0,Ae=0,Fe=0,We=(N=void 0,new b({comments:Ce,delimiter:re,newline:Se,preview:10}).parse(K)),Dt=0;Dt<We.data.length;Dt++)le&&ee(We.data[Dt])?Fe++:(te=We.data[Dt].length,Ae+=te,N===void 0?N=te:0<te&&(ge+=Math.abs(te-N),N=te));0<We.data.length&&(Ae/=We.data.length-Fe),(P===void 0||ge<=P)&&(z===void 0||z<Ae)&&1.99<Ae&&(P=ge,je=re,z=Ae)}return{successful:!!(v.delimiter=je),bestDelimiter:je}})(ce,v.newline,v.skipEmptyLines,v.comments,v.delimitersToGuess)).successful?v.delimiter=Q.bestDelimiter:(E=!0,v.delimiter=c.DefaultDelimiter),X.meta.delimiter=v.delimiter),w(v));return v.preview&&v.header&&Q.preview++,x=ce,T=new b(Q),X=T.parse(x,q,oe),ie(),ne?{meta:{paused:!0}}:X||{meta:{paused:!1}}},this.paused=function(){return ne},this.pause=function(){ne=!0,T.abort(),x=_(v.chunk)?"":x.substring(T.getCharIndex())},this.resume=function(){L.streamer._halted?(ne=!1,L.streamer.parseChunk(x,!0)):setTimeout(L.resume,3)},this.aborted=function(){return Z},this.abort=function(){Z=!0,T.abort(),X.meta.aborted=!0,_(v.complete)&&v.complete(X),x=""},this.guessLineEndings=function(K,Q){K=K.substring(0,1048576);var Q=new RegExp(p(Q)+"([^]*?)"+p(Q),"gm"),oe=(K=K.replace(Q,"")).split("\r"),Q=K.split(`
`),K=1<Q.length&&Q[0].length<oe[0].length;if(oe.length===1||K)return`
`;for(var Se=0,le=0;le<oe.length;le++)oe[le][0]===`
`&&Se++;return Se>=oe.length/2?`\r
`:"\r"}}function p(v){return v.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function b(v){var x=(v=v||{}).delimiter,T=v.newline,E=v.comments,k=v.step,I=v.preview,B=v.fastMode,D=null,F=!1,L=v.quoteChar==null?'"':v.quoteChar,H=L;if(v.escapeChar!==void 0&&(H=v.escapeChar),(typeof x!="string"||-1<c.BAD_DELIMITERS.indexOf(x))&&(x=","),E===x)throw new Error("Comment character same as delimiter");E===!0?E="#":(typeof E!="string"||-1<c.BAD_DELIMITERS.indexOf(E))&&(E=!1),T!==`
`&&T!=="\r"&&T!==`\r
`&&(T=`
`);var $=0,ne=!1;this.parse=function(Z,G,X){if(typeof Z!="string")throw new Error("Input must be a string");var ee=Z.length,ie=x.length,me=T.length,Ie=E.length,ce=_(k),q=[],oe=[],Q=[],K=$=0;if(!Z)return ge();if(B||B!==!1&&Z.indexOf(L)===-1){for(var Se=Z.split(T),le=0;le<Se.length;le++){if(Q=Se[le],$+=Q.length,le!==Se.length-1)$+=T.length;else if(X)return ge();if(!E||Q.substring(0,Ie)!==E){if(ce){if(q=[],z(Q.split(x)),Ae(),ne)return ge()}else z(Q.split(x));if(I&&I<=le)return q=q.slice(0,I),ge(!0)}}return ge()}for(var Ce=Z.indexOf(x,$),ye=Z.indexOf(T,$),je=new RegExp(p(H)+p(L),"g"),P=Z.indexOf(L,$);;)if(Z[$]===L)for(P=$,$++;;){if((P=Z.indexOf(L,P+1))===-1)return X||oe.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:q.length,index:$}),te();if(P===ee-1)return te(Z.substring($,P).replace(je,L));if(L===H&&Z[P+1]===H)P++;else if(L===H||P===0||Z[P-1]!==H){Ce!==-1&&Ce<P+1&&(Ce=Z.indexOf(x,P+1));var N=se((ye=ye!==-1&&ye<P+1?Z.indexOf(T,P+1):ye)===-1?Ce:Math.min(Ce,ye));if(Z.substr(P+1+N,ie)===x){Q.push(Z.substring($,P).replace(je,L)),Z[$=P+1+N+ie]!==L&&(P=Z.indexOf(L,$)),Ce=Z.indexOf(x,$),ye=Z.indexOf(T,$);break}if(N=se(ye),Z.substring(P+1+N,P+1+N+me)===T){if(Q.push(Z.substring($,P).replace(je,L)),re(P+1+N+me),Ce=Z.indexOf(x,$),P=Z.indexOf(L,$),ce&&(Ae(),ne))return ge();if(I&&q.length>=I)return ge(!0);break}oe.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:q.length,index:$}),P++}}else if(E&&Q.length===0&&Z.substring($,$+Ie)===E){if(ye===-1)return ge();$=ye+me,ye=Z.indexOf(T,$),Ce=Z.indexOf(x,$)}else if(Ce!==-1&&(Ce<ye||ye===-1))Q.push(Z.substring($,Ce)),$=Ce+ie,Ce=Z.indexOf(x,$);else{if(ye===-1)break;if(Q.push(Z.substring($,ye)),re(ye+me),ce&&(Ae(),ne))return ge();if(I&&q.length>=I)return ge(!0)}return te();function z(Fe){q.push(Fe),K=$}function se(Fe){var We=0;return We=Fe!==-1&&(Fe=Z.substring(P+1,Fe))&&Fe.trim()===""?Fe.length:We}function te(Fe){return X||(Fe===void 0&&(Fe=Z.substring($)),Q.push(Fe),$=ee,z(Q),ce&&Ae()),ge()}function re(Fe){$=Fe,z(Q),Q=[],ye=Z.indexOf(T,$)}function ge(Fe){if(v.header&&!G&&q.length&&!F){var We=q[0],Dt={},oo=new Set(We);let so=!1;for(let yr=0;yr<We.length;yr++){let Pn=We[yr];if(Dt[Pn=_(v.transformHeader)?v.transformHeader(Pn,yr):Pn]){let ui,In=Dt[Pn];for(;ui=Pn+"_"+In,In++,oo.has(ui););oo.add(ui),We[yr]=ui,Dt[Pn]++,so=!0,(D=D===null?{}:D)[ui]=Pn}else Dt[Pn]=1,We[yr]=Pn;oo.add(Pn)}so&&console.warn("Duplicate headers found and renamed."),F=!0}return{data:q,errors:oe,meta:{delimiter:x,linebreak:T,aborted:ne,truncated:!!Fe,cursor:K+(G||0),renamedHeaders:D}}}function Ae(){k(ge()),q=[],oe=[]}},this.abort=function(){ne=!0},this.getCharIndex=function(){return $}}function y(v){var x=v.data,T=a[x.workerId],E=!1;if(x.error)T.userError(x.error,x.file);else if(x.results&&x.results.data){var k={abort:function(){E=!0,C(x.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:A,resume:A};if(_(T.userStep)){for(var I=0;I<x.results.data.length&&(T.userStep({data:x.results.data[I],errors:x.results.errors,meta:x.results.meta},k),!E);I++);delete x.results}else _(T.userChunk)&&(T.userChunk(x.results,k,x.file),delete x.results)}x.finished&&!E&&C(x.workerId,x.results)}function C(v,x){var T=a[v];_(T.userComplete)&&T.userComplete(x),T.terminate(),delete a[v]}function A(){throw new Error("Not implemented.")}function w(v){if(typeof v!="object"||v===null)return v;var x,T=Array.isArray(v)?[]:{};for(x in v)T[x]=w(v[x]);return T}function S(v,x){return function(){v.apply(x,arguments)}}function _(v){return typeof v=="function"}return c.parse=function(v,x){var T=(x=x||{}).dynamicTyping||!1;if(_(T)&&(x.dynamicTypingFunction=T,T={}),x.dynamicTyping=T,x.transform=!!_(x.transform)&&x.transform,!x.worker||!c.WORKERS_SUPPORTED)return T=null,c.NODE_STREAM_INPUT,typeof v=="string"?(v=(E=>E.charCodeAt(0)!==65279?E:E.slice(1))(v),T=new(x.download?d:h)(x)):v.readable===!0&&_(v.read)&&_(v.on)?T=new m(x):(r.File&&v instanceof File||v instanceof Object)&&(T=new f(x)),T.stream(v);(T=(()=>{var E;return!!c.WORKERS_SUPPORTED&&(E=(()=>{var k=r.URL||r.webkitURL||null,I=t.toString();return c.BLOB_URL||(c.BLOB_URL=k.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",I,")();"],{type:"text/javascript"})))})(),(E=new r.Worker(E)).onmessage=y,E.id=l++,a[E.id]=E)})()).userStep=x.step,T.userChunk=x.chunk,T.userComplete=x.complete,T.userError=x.error,x.step=_(x.step),x.chunk=_(x.chunk),x.complete=_(x.complete),x.error=_(x.error),delete x.worker,T.postMessage({input:v,config:x,workerId:T.id})},c.unparse=function(v,x){var T=!1,E=!0,k=",",I=`\r
`,B='"',D=B+B,F=!1,L=null,H=!1,$=((()=>{if(typeof x=="object"){if(typeof x.delimiter!="string"||c.BAD_DELIMITERS.filter(function(G){return x.delimiter.indexOf(G)!==-1}).length||(k=x.delimiter),typeof x.quotes!="boolean"&&typeof x.quotes!="function"&&!Array.isArray(x.quotes)||(T=x.quotes),typeof x.skipEmptyLines!="boolean"&&typeof x.skipEmptyLines!="string"||(F=x.skipEmptyLines),typeof x.newline=="string"&&(I=x.newline),typeof x.quoteChar=="string"&&(B=x.quoteChar),typeof x.header=="boolean"&&(E=x.header),Array.isArray(x.columns)){if(x.columns.length===0)throw new Error("Option columns is empty");L=x.columns}x.escapeChar!==void 0&&(D=x.escapeChar+B),x.escapeFormulae instanceof RegExp?H=x.escapeFormulae:typeof x.escapeFormulae=="boolean"&&x.escapeFormulae&&(H=/^[=+\-@\t\r].*$/)}})(),new RegExp(p(B),"g"));if(typeof v=="string"&&(v=JSON.parse(v)),Array.isArray(v)){if(!v.length||Array.isArray(v[0]))return ne(null,v,F);if(typeof v[0]=="object")return ne(L||Object.keys(v[0]),v,F)}else if(typeof v=="object")return typeof v.data=="string"&&(v.data=JSON.parse(v.data)),Array.isArray(v.data)&&(v.fields||(v.fields=v.meta&&v.meta.fields||L),v.fields||(v.fields=Array.isArray(v.data[0])?v.fields:typeof v.data[0]=="object"?Object.keys(v.data[0]):[]),Array.isArray(v.data[0])||typeof v.data[0]=="object"||(v.data=[v.data])),ne(v.fields||[],v.data||[],F);throw new Error("Unable to serialize unrecognized input");function ne(G,X,ee){var ie="",me=(typeof G=="string"&&(G=JSON.parse(G)),typeof X=="string"&&(X=JSON.parse(X)),Array.isArray(G)&&0<G.length),Ie=!Array.isArray(X[0]);if(me&&E){for(var ce=0;ce<G.length;ce++)0<ce&&(ie+=k),ie+=Z(G[ce],ce);0<X.length&&(ie+=I)}for(var q=0;q<X.length;q++){var oe=(me?G:X[q]).length,Q=!1,K=me?Object.keys(X[q]).length===0:X[q].length===0;if(ee&&!me&&(Q=ee==="greedy"?X[q].join("").trim()==="":X[q].length===1&&X[q][0].length===0),ee==="greedy"&&me){for(var Se=[],le=0;le<oe;le++){var Ce=Ie?G[le]:le;Se.push(X[q][Ce])}Q=Se.join("").trim()===""}if(!Q){for(var ye=0;ye<oe;ye++){0<ye&&!K&&(ie+=k);var je=me&&Ie?G[ye]:ye;ie+=Z(X[q][je],ye)}q<X.length-1&&(!ee||0<oe&&!K)&&(ie+=I)}}return ie}function Z(G,X){var ee,ie;return G==null?"":G.constructor===Date?JSON.stringify(G).slice(1,25):(ie=!1,H&&typeof G=="string"&&H.test(G)&&(G="'"+G,ie=!0),ee=G.toString().replace($,D),(ie=ie||T===!0||typeof T=="function"&&T(G,X)||Array.isArray(T)&&T[X]||((me,Ie)=>{for(var ce=0;ce<Ie.length;ce++)if(-1<me.indexOf(Ie[ce]))return!0;return!1})(ee,c.BAD_DELIMITERS)||-1<ee.indexOf(k)||ee.charAt(0)===" "||ee.charAt(ee.length-1)===" ")?B+ee+B:ee)}},c.RECORD_SEP="",c.UNIT_SEP="",c.BYTE_ORDER_MARK="\uFEFF",c.BAD_DELIMITERS=["\r",`
`,'"',c.BYTE_ORDER_MARK],c.WORKERS_SUPPORTED=!o&&!!r.Worker,c.NODE_STREAM_INPUT=1,c.LocalChunkSize=10485760,c.RemoteChunkSize=5242880,c.DefaultDelimiter=",",c.Parser=b,c.ParserHandle=g,c.NetworkStreamer=d,c.FileStreamer=f,c.StringStreamer=h,c.ReadableStreamStreamer=m,r.jQuery&&((i=r.jQuery).fn.parse=function(v){var x=v.config||{},T=[];return this.each(function(I){if(!(i(this).prop("tagName").toUpperCase()==="INPUT"&&i(this).attr("type").toLowerCase()==="file"&&r.FileReader)||!this.files||this.files.length===0)return!0;for(var B=0;B<this.files.length;B++)T.push({file:this.files[B],inputElem:this,instanceConfig:i.extend({},x)})}),E(),this;function E(){if(T.length===0)_(v.complete)&&v.complete();else{var I,B,D,F,L=T[0];if(_(v.before)){var H=v.before(L.file,L.inputElem);if(typeof H=="object"){if(H.action==="abort")return I="AbortError",B=L.file,D=L.inputElem,F=H.reason,void(_(v.error)&&v.error({name:I},B,D,F));if(H.action==="skip")return void k();typeof H.config=="object"&&(L.instanceConfig=i.extend(L.instanceConfig,H.config))}else if(H==="skip")return void k()}var $=L.instanceConfig.complete;L.instanceConfig.complete=function(ne){_($)&&$(ne,L.file,L.inputElem),k()},c.parse(L.file,L.instanceConfig)}}function k(){T.splice(0,1),E()}}),s&&(r.onmessage=function(v){v=v.data,c.WORKER_ID===void 0&&v&&(c.WORKER_ID=v.workerId),typeof v.input=="string"?r.postMessage({workerId:c.WORKER_ID,results:c.parse(v.input,v.config),finished:!0}):(r.File&&v.input instanceof File||v.input instanceof Object)&&(v=c.parse(v.input,v.config))&&r.postMessage({workerId:c.WORKER_ID,results:v,finished:!0})}),(d.prototype=Object.create(u.prototype)).constructor=d,(f.prototype=Object.create(u.prototype)).constructor=f,(h.prototype=Object.create(h.prototype)).constructor=h,(m.prototype=Object.create(u.prototype)).constructor=m,c})})(NN);var QEe=NN.exports;const IIe=ot(QEe);class OIe extends R.Component{render(){const{className:e,style:t,placeholder:r,accept:i}=this.props,o={};return i&&(o.accept=i),we.jsx("div",{style:t,className:`${e} relative`,children:we.jsxs("div",{children:[we.jsxs("div",{children:[we.jsx(aI,{id:this.props.id,type:"file",onChange:this.props.onFileChange,disabled:this.props.disableEditProfile,...o,className:"!hidden"}),we.jsxs("label",{htmlFor:this.props.id,className:"rounded-lg py-2 px-3 flex flex-row justify-between border border-solid border-gray-200 cursor-pointer",children:[we.jsx("div",{children:this.props.fileData.fileName||this.props.uploadedFileData.fileName||r||"Choose File"}),we.jsx("div",{className:"text-xs p-1 rounded-2xl bg-gray-200",children:"Browse"})]})]}),this.props.uploadedFileData.fileName&&we.jsx("div",{className:"input-group-append",children:we.jsx("button",{className:"btn btn-default btn-upload-attach",style:{fontSize:14,lineHeight:1.5},onClick:this.props.viewAttachment,children:"View"})})]})})}}function LN(){var n=this.constructor.getDerivedStateFromProps(this.props,this.state);n!=null&&this.setState(n)}function FN(n){function e(t){var r=this.constructor.getDerivedStateFromProps(n,t);return r??null}this.setState(e.bind(this))}function $N(n,e){try{var t=this.props,r=this.state;this.props=n,this.state=e,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(t,r)}finally{this.props=t,this.state=r}}LN.__suppressDeprecationWarning=!0;FN.__suppressDeprecationWarning=!0;$N.__suppressDeprecationWarning=!0;function Od(n){var e=n.prototype;if(!e||!e.isReactComponent)throw new Error("Can only polyfill class components");if(typeof n.getDerivedStateFromProps!="function"&&typeof e.getSnapshotBeforeUpdate!="function")return n;var t=null,r=null,i=null;if(typeof e.componentWillMount=="function"?t="componentWillMount":typeof e.UNSAFE_componentWillMount=="function"&&(t="UNSAFE_componentWillMount"),typeof e.componentWillReceiveProps=="function"?r="componentWillReceiveProps":typeof e.UNSAFE_componentWillReceiveProps=="function"&&(r="UNSAFE_componentWillReceiveProps"),typeof e.componentWillUpdate=="function"?i="componentWillUpdate":typeof e.UNSAFE_componentWillUpdate=="function"&&(i="UNSAFE_componentWillUpdate"),t!==null||r!==null||i!==null){var o=n.displayName||n.name,s=typeof n.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+o+" uses "+s+" but also contains the following legacy lifecycles:"+(t!==null?`
  `+t:"")+(r!==null?`
  `+r:"")+(i!==null?`
  `+i:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof n.getDerivedStateFromProps=="function"&&(e.componentWillMount=LN,e.componentWillReceiveProps=FN),typeof e.getSnapshotBeforeUpdate=="function"){if(typeof e.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");e.componentWillUpdate=$N;var a=e.componentDidUpdate;e.componentDidUpdate=function(c,u,d){var f=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:d;a.call(this,c,u,f)}}return n}function _P(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function CP(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?_P(Object(t),!0).forEach(function(r){j(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):_P(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function eke(n,e,t){return e=ut(e),$n(n,VN()?Reflect.construct(e,t||[],ut(n).constructor):e.apply(n,t))}function VN(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(VN=function(){return!!n})()}var zN=function(n){function e(){var t;Ht(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=eke(this,e,[].concat(i)),j(t,"state",{scrollToColumn:0,scrollToRow:0,instanceProps:{prevScrollToColumn:0,prevScrollToRow:0}}),j(t,"_columnStartIndex",0),j(t,"_columnStopIndex",0),j(t,"_rowStartIndex",0),j(t,"_rowStopIndex",0),j(t,"_onKeyDown",function(s){var a=t.props,l=a.columnCount,c=a.disabled,u=a.mode,d=a.rowCount;if(!c){var f=t._getScrollState(),h=f.scrollToColumn,m=f.scrollToRow,g=t._getScrollState(),p=g.scrollToColumn,b=g.scrollToRow;switch(s.key){case"ArrowDown":b=Math.min(u==="cells"?b+1:t._rowStopIndex+1,d-1);break;case"ArrowLeft":p=Math.max(u==="cells"?p-1:t._columnStartIndex-1,0);break;case"ArrowRight":p=Math.min(u==="cells"?p+1:t._columnStopIndex+1,l-1);break;case"ArrowUp":b=Math.max(u==="cells"?b-1:t._rowStartIndex-1,0);break}(p!==h||b!==m)&&(s.preventDefault(),t._updateScrollState({scrollToColumn:p,scrollToRow:b}))}}),j(t,"_onSectionRendered",function(s){var a=s.columnStartIndex,l=s.columnStopIndex,c=s.rowStartIndex,u=s.rowStopIndex;t._columnStartIndex=a,t._columnStopIndex=l,t._rowStartIndex=c,t._rowStopIndex=u}),t}return Fn(e,n),Wt(e,[{key:"setScrollIndexes",value:function(r){var i=r.scrollToColumn,o=r.scrollToRow;this.setState({scrollToRow:o,scrollToColumn:i})}},{key:"render",value:function(){var r=this.props,i=r.className,o=r.children,s=this._getScrollState(),a=s.scrollToColumn,l=s.scrollToRow;return R.createElement("div",{className:i,onKeyDown:this._onKeyDown},o({onSectionRendered:this._onSectionRendered,scrollToColumn:a,scrollToRow:l}))}},{key:"_getScrollState",value:function(){return this.props.isControlled?this.props:this.state}},{key:"_updateScrollState",value:function(r){var i=r.scrollToColumn,o=r.scrollToRow,s=this.props,a=s.isControlled,l=s.onScrollToChange;typeof l=="function"&&l({scrollToColumn:i,scrollToRow:o}),a||this.setState({scrollToColumn:i,scrollToRow:o})}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.isControlled?{}:r.scrollToColumn!==i.instanceProps.prevScrollToColumn||r.scrollToRow!==i.instanceProps.prevScrollToRow?CP(CP({},i),{},{scrollToColumn:r.scrollToColumn,scrollToRow:r.scrollToRow,instanceProps:{prevScrollToColumn:r.scrollToColumn,prevScrollToRow:r.scrollToRow}}):{}}}])}(R.PureComponent);j(zN,"defaultProps",{disabled:!1,isControlled:!1,mode:"edges",scrollToColumn:0,scrollToRow:0});Od(zN);function jN(n,e){var t;typeof e<"u"?t=e:typeof window<"u"?t=window:typeof self<"u"?t=self:t=global;var r=typeof t.document<"u"&&t.document.attachEvent;if(!r){var i=function(){var _=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||function(v){return t.setTimeout(v,20)};return function(v){return _(v)}}(),o=function(){var _=t.cancelAnimationFrame||t.mozCancelAnimationFrame||t.webkitCancelAnimationFrame||t.clearTimeout;return function(v){return _(v)}}(),s=function(v){var x=v.__resizeTriggers__,T=x.firstElementChild,E=x.lastElementChild,k=T.firstElementChild;E.scrollLeft=E.scrollWidth,E.scrollTop=E.scrollHeight,k.style.width=T.offsetWidth+1+"px",k.style.height=T.offsetHeight+1+"px",T.scrollLeft=T.scrollWidth,T.scrollTop=T.scrollHeight},a=function(v){return v.offsetWidth!=v.__resizeLast__.width||v.offsetHeight!=v.__resizeLast__.height},l=function(v){if(!(v.target.className&&typeof v.target.className.indexOf=="function"&&v.target.className.indexOf("contract-trigger")<0&&v.target.className.indexOf("expand-trigger")<0)){var x=this;s(this),this.__resizeRAF__&&o(this.__resizeRAF__),this.__resizeRAF__=i(function(){a(x)&&(x.__resizeLast__.width=x.offsetWidth,x.__resizeLast__.height=x.offsetHeight,x.__resizeListeners__.forEach(function(T){T.call(x,v)}))})}},c=!1,u="",d="animationstart",f="Webkit Moz O ms".split(" "),h="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),m="";{var g=t.document.createElement("fakeelement");if(g.style.animationName!==void 0&&(c=!0),c===!1){for(var p=0;p<f.length;p++)if(g.style[f[p]+"AnimationName"]!==void 0){m=f[p],u="-"+m.toLowerCase()+"-",d=h[p],c=!0;break}}}var b="resizeanim",y="@"+u+"keyframes "+b+" { from { opacity: 0; } to { opacity: 0; } } ",C=u+"animation: 1ms "+b+"; "}var A=function(v){if(!v.getElementById("detectElementResize")){var x=(y||"")+".resize-triggers { "+(C||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',T=v.head||v.getElementsByTagName("head")[0],E=v.createElement("style");E.id="detectElementResize",E.type="text/css",n!=null&&E.setAttribute("nonce",n),E.styleSheet?E.styleSheet.cssText=x:E.appendChild(v.createTextNode(x)),T.appendChild(E)}},w=function(v,x){if(r)v.attachEvent("onresize",x);else{if(!v.__resizeTriggers__){var T=v.ownerDocument,E=t.getComputedStyle(v);E&&E.position=="static"&&(v.style.position="relative"),A(T),v.__resizeLast__={},v.__resizeListeners__=[],(v.__resizeTriggers__=T.createElement("div")).className="resize-triggers";var k=T.createElement("div");k.className="expand-trigger",k.appendChild(T.createElement("div"));var I=T.createElement("div");I.className="contract-trigger",v.__resizeTriggers__.appendChild(k),v.__resizeTriggers__.appendChild(I),v.appendChild(v.__resizeTriggers__),s(v),v.addEventListener("scroll",l,!0),d&&(v.__resizeTriggers__.__animationListener__=function(D){D.animationName==b&&s(v)},v.__resizeTriggers__.addEventListener(d,v.__resizeTriggers__.__animationListener__))}v.__resizeListeners__.push(x)}},S=function(v,x){if(r)v.detachEvent("onresize",x);else if(v.__resizeListeners__.splice(v.__resizeListeners__.indexOf(x),1),!v.__resizeListeners__.length){v.removeEventListener("scroll",l,!0),v.__resizeTriggers__.__animationListener__&&(v.__resizeTriggers__.removeEventListener(d,v.__resizeTriggers__.__animationListener__),v.__resizeTriggers__.__animationListener__=null);try{v.__resizeTriggers__=!v.removeChild(v.__resizeTriggers__)}catch{}}};return{addResizeListener:w,removeResizeListener:S}}function SP(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function xP(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?SP(Object(t),!0).forEach(function(r){j(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):SP(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function tke(n,e,t){return e=ut(e),$n(n,WN()?Reflect.construct(e,t||[],ut(n).constructor):e.apply(n,t))}function WN(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(WN=function(){return!!n})()}var nke=function(n){function e(){var t;Ht(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=tke(this,e,[].concat(i)),j(t,"state",{height:t.props.defaultHeight||0,width:t.props.defaultWidth||0}),j(t,"_parentNode",void 0),j(t,"_autoSizer",void 0),j(t,"_window",void 0),j(t,"_detectElementResize",void 0),j(t,"_onResize",function(){var s=t.props,a=s.disableHeight,l=s.disableWidth,c=s.onResize;if(t._parentNode){var u=t._parentNode.offsetHeight||0,d=t._parentNode.offsetWidth||0,f=t._window||window,h=f.getComputedStyle(t._parentNode)||{},m=parseInt(h.paddingLeft,10)||0,g=parseInt(h.paddingRight,10)||0,p=parseInt(h.paddingTop,10)||0,b=parseInt(h.paddingBottom,10)||0,y=u-p-b,C=d-m-g;(!a&&t.state.height!==y||!l&&t.state.width!==C)&&(t.setState({height:u-p-b,width:d-m-g}),c({height:u,width:d}))}}),j(t,"_setRef",function(s){t._autoSizer=s}),t}return Fn(e,n),Wt(e,[{key:"componentDidMount",value:function(){var r=this.props.nonce;this._autoSizer&&this._autoSizer.parentNode&&this._autoSizer.parentNode.ownerDocument&&this._autoSizer.parentNode.ownerDocument.defaultView&&this._autoSizer.parentNode instanceof this._autoSizer.parentNode.ownerDocument.defaultView.HTMLElement&&(this._parentNode=this._autoSizer.parentNode,this._window=this._autoSizer.parentNode.ownerDocument.defaultView,this._detectElementResize=jN(r,this._window),this._detectElementResize.addResizeListener(this._parentNode,this._onResize),this._onResize())}},{key:"componentWillUnmount",value:function(){this._detectElementResize&&this._parentNode&&this._detectElementResize.removeResizeListener(this._parentNode,this._onResize)}},{key:"render",value:function(){var r=this.props,i=r.children,o=r.className,s=r.disableHeight,a=r.disableWidth,l=r.style,c=this.state,u=c.height,d=c.width,f={overflow:"visible"},h={};return s||(f.height=0,h.height=u),a||(f.width=0,h.width=d),R.createElement("div",{className:o,ref:this._setRef,style:xP(xP({},f),l)},i(h))}}])}(R.Component);j(nke,"defaultProps",{onResize:function(){},disableHeight:!1,disableWidth:!1,style:{}});function rke(n,e,t){return e=ut(e),$n(n,HN()?Reflect.construct(e,t||[],ut(n).constructor):e.apply(n,t))}function HN(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(HN=function(){return!!n})()}var ike=function(n){function e(){var t;Ht(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=rke(this,e,[].concat(i)),j(t,"_child",R.createRef()),j(t,"_measure",function(){var s=t.props,a=s.cache,l=s.columnIndex,c=l===void 0?0:l,u=s.parent,d=s.rowIndex,f=d===void 0?t.props.index||0:d,h=t._getCellMeasurements(),m=h.height,g=h.width;(m!==a.getHeight(f,c)||g!==a.getWidth(f,c))&&(a.set(f,c,g,m),u&&typeof u.recomputeGridSize=="function"&&u.recomputeGridSize({columnIndex:c,rowIndex:f}))}),j(t,"_registerChild",function(s){s&&!(s instanceof Element)&&console.warn("CellMeasurer registerChild expects to be passed Element or null"),t._child.current=s,s&&t._maybeMeasureCell()}),t}return Fn(e,n),Wt(e,[{key:"componentDidMount",value:function(){this._maybeMeasureCell()}},{key:"componentDidUpdate",value:function(){this._maybeMeasureCell()}},{key:"render",value:function(){var r=this,i=this.props.children,o=typeof i=="function"?i({measure:this._measure,registerChild:this._registerChild}):i;return o===null?o:R.cloneElement(o,{ref:function(a){typeof o.ref=="function"?o.ref(a):o.ref&&(o.ref.current=a),r._child.current=a}})}},{key:"_getCellMeasurements",value:function(){var r=this.props.cache,i=this._child.current;if(i&&i.ownerDocument&&i.ownerDocument.defaultView&&i instanceof i.ownerDocument.defaultView.HTMLElement){var o=i.style.width,s=i.style.height;r.hasFixedWidth()||(i.style.width="auto"),r.hasFixedHeight()||(i.style.height="auto");var a=Math.ceil(i.offsetHeight),l=Math.ceil(i.offsetWidth);return o&&(i.style.width=o),s&&(i.style.height=s),{height:a,width:l}}else return{height:0,width:0}}},{key:"_maybeMeasureCell",value:function(){var r=this.props,i=r.cache,o=r.columnIndex,s=o===void 0?0:o,a=r.parent,l=r.rowIndex,c=l===void 0?this.props.index||0:l;if(!i.has(c,s)){var u=this._getCellMeasurements(),d=u.height,f=u.width;i.set(c,s,f,d),a&&typeof a.invalidateCellSizeAfterRender=="function"&&a.invalidateCellSizeAfterRender({columnIndex:s,rowIndex:c})}}}])}(R.PureComponent);j(ike,"__internalCellMeasurerFlag",!1);function cl(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e={};return function(t){var r=t.callback,i=t.indices,o=Object.keys(i),s=!n||o.every(function(l){var c=i[l];return Array.isArray(c)?c.length>0:c>=0}),a=o.length!==Object.keys(e).length||o.some(function(l){var c=e[l],u=i[l];return Array.isArray(u)?c.join(",")!==u.join(","):c!==u});e=i,s&&a&&r(i)}}const oke=!!(typeof window<"u"&&window.document&&window.document.createElement);var Pf;function ew(n){if((!Pf&&Pf!==0||n)&&oke){var e=document.createElement("div");e.style.position="absolute",e.style.top="-9999px",e.style.width="50px",e.style.height="50px",e.style.overflow="scroll",document.body.appendChild(e),Pf=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return Pf}function AP(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function TP(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?AP(Object(t),!0).forEach(function(r){j(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):AP(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function ske(n,e,t){return e=ut(e),$n(n,UN()?Reflect.construct(e,t||[],ut(n).constructor):e.apply(n,t))}function UN(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(UN=function(){return!!n})()}var ake=150,ia={OBSERVED:"observed",REQUESTED:"requested"},jg=function(n){function e(){var t;Ht(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=ske(this,e,[].concat(i)),j(t,"state",{isScrolling:!1,scrollLeft:0,scrollTop:0}),j(t,"_calculateSizeAndPositionDataOnNextUpdate",!1),j(t,"_onSectionRenderedMemoizer",cl()),j(t,"_onScrollMemoizer",cl(!1)),j(t,"_invokeOnSectionRenderedHelper",function(){var s=t.props,a=s.cellLayoutManager,l=s.onSectionRendered;t._onSectionRenderedMemoizer({callback:l,indices:{indices:a.getLastRenderedIndices()}})}),j(t,"_setScrollingContainerRef",function(s){t._scrollingContainer=s}),j(t,"_updateScrollPositionForScrollToCell",function(){var s=t.props,a=s.cellLayoutManager,l=s.height,c=s.scrollToAlignment,u=s.scrollToCell,d=s.width,f=t.state,h=f.scrollLeft,m=f.scrollTop;if(u>=0){var g=a.getScrollPositionForCell({align:c,cellIndex:u,height:l,scrollLeft:h,scrollTop:m,width:d});(g.scrollLeft!==h||g.scrollTop!==m)&&t._setScrollPosition(g)}}),j(t,"_onScroll",function(s){if(s.target===t._scrollingContainer){t._enablePointerEventsAfterDelay();var a=t.props,l=a.cellLayoutManager,c=a.height,u=a.isScrollingChange,d=a.width,f=t._scrollbarSize,h=l.getTotalSize(),m=h.height,g=h.width,p=Math.max(0,Math.min(g-d+f,s.target.scrollLeft)),b=Math.max(0,Math.min(m-c+f,s.target.scrollTop));if(t.state.scrollLeft!==p||t.state.scrollTop!==b){var y=s.cancelable?ia.OBSERVED:ia.REQUESTED;t.state.isScrolling||u(!0),t.setState({isScrolling:!0,scrollLeft:p,scrollPositionChangeReason:y,scrollTop:b})}t._invokeOnScrollMemoizer({scrollLeft:p,scrollTop:b,totalWidth:g,totalHeight:m})}}),t._scrollbarSize=ew(),t._scrollbarSize===void 0?(t._scrollbarSizeMeasured=!1,t._scrollbarSize=0):t._scrollbarSizeMeasured=!0,t}return Fn(e,n),Wt(e,[{key:"recomputeCellSizesAndPositions",value:function(){this._calculateSizeAndPositionDataOnNextUpdate=!0,this.forceUpdate()}},{key:"componentDidMount",value:function(){var r=this.props,i=r.cellLayoutManager,o=r.scrollLeft,s=r.scrollToCell,a=r.scrollTop;this._scrollbarSizeMeasured||(this._scrollbarSize=ew(),this._scrollbarSizeMeasured=!0,this.setState({})),s>=0?this._updateScrollPositionForScrollToCell():(o>=0||a>=0)&&this._setScrollPosition({scrollLeft:o,scrollTop:a}),this._invokeOnSectionRenderedHelper();var l=i.getTotalSize(),c=l.height,u=l.width;this._invokeOnScrollMemoizer({scrollLeft:o||0,scrollTop:a||0,totalHeight:c,totalWidth:u})}},{key:"componentDidUpdate",value:function(r,i){var o=this.props,s=o.height,a=o.scrollToAlignment,l=o.scrollToCell,c=o.width,u=this.state,d=u.scrollLeft,f=u.scrollPositionChangeReason,h=u.scrollTop;f===ia.REQUESTED&&(d>=0&&d!==i.scrollLeft&&d!==this._scrollingContainer.scrollLeft&&(this._scrollingContainer.scrollLeft=d),h>=0&&h!==i.scrollTop&&h!==this._scrollingContainer.scrollTop&&(this._scrollingContainer.scrollTop=h)),(s!==r.height||a!==r.scrollToAlignment||l!==r.scrollToCell||c!==r.width)&&this._updateScrollPositionForScrollToCell(),this._invokeOnSectionRenderedHelper()}},{key:"componentWillUnmount",value:function(){this._disablePointerEventsTimeoutId&&clearTimeout(this._disablePointerEventsTimeoutId)}},{key:"render",value:function(){var r=this.props,i=r.autoHeight,o=r.cellCount,s=r.cellLayoutManager,a=r.className,l=r.height,c=r.horizontalOverscanSize,u=r.id,d=r.noContentRenderer,f=r.style,h=r.verticalOverscanSize,m=r.width,g=this.state,p=g.isScrolling,b=g.scrollLeft,y=g.scrollTop;(this._lastRenderedCellCount!==o||this._lastRenderedCellLayoutManager!==s||this._calculateSizeAndPositionDataOnNextUpdate)&&(this._lastRenderedCellCount=o,this._lastRenderedCellLayoutManager=s,this._calculateSizeAndPositionDataOnNextUpdate=!1,s.calculateSizeAndPositionData());var C=s.getTotalSize(),A=C.height,w=C.width,S=Math.max(0,b-c),_=Math.max(0,y-h),v=Math.min(w,b+m+c),x=Math.min(A,y+l+h),T=l>0&&m>0?s.cellRenderers({height:x-_,isScrolling:p,width:v-S,x:S,y:_}):[],E={boxSizing:"border-box",direction:"ltr",height:i?"auto":l,position:"relative",WebkitOverflowScrolling:"touch",width:m,willChange:"transform"},k=A>l?this._scrollbarSize:0,I=w>m?this._scrollbarSize:0;return E.overflowX=w+k<=m?"hidden":"auto",E.overflowY=A+I<=l?"hidden":"auto",R.createElement("div",{ref:this._setScrollingContainerRef,"aria-label":this.props["aria-label"],className:Kr("ReactVirtualized__Collection",a),id:u,onScroll:this._onScroll,role:"grid",style:TP(TP({},E),f),tabIndex:0},o>0&&R.createElement("div",{className:"ReactVirtualized__Collection__innerScrollContainer",style:{height:A,maxHeight:A,maxWidth:w,overflow:"hidden",pointerEvents:p?"none":"",width:w}},T),o===0&&d())}},{key:"_enablePointerEventsAfterDelay",value:function(){var r=this;this._disablePointerEventsTimeoutId&&clearTimeout(this._disablePointerEventsTimeoutId),this._disablePointerEventsTimeoutId=setTimeout(function(){var i=r.props.isScrollingChange;i(!1),r._disablePointerEventsTimeoutId=null,r.setState({isScrolling:!1})},ake)}},{key:"_invokeOnScrollMemoizer",value:function(r){var i=this,o=r.scrollLeft,s=r.scrollTop,a=r.totalHeight,l=r.totalWidth;this._onScrollMemoizer({callback:function(u){var d=u.scrollLeft,f=u.scrollTop,h=i.props,m=h.height,g=h.onScroll,p=h.width;g({clientHeight:m,clientWidth:p,scrollHeight:a,scrollLeft:d,scrollTop:f,scrollWidth:l})},indices:{scrollLeft:o,scrollTop:s}})}},{key:"_setScrollPosition",value:function(r){var i=r.scrollLeft,o=r.scrollTop,s={scrollPositionChangeReason:ia.REQUESTED};i>=0&&(s.scrollLeft=i),o>=0&&(s.scrollTop=o),(i>=0&&i!==this.state.scrollLeft||o>=0&&o!==this.state.scrollTop)&&this.setState(s)}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.cellCount===0&&(i.scrollLeft!==0||i.scrollTop!==0)?{scrollLeft:0,scrollTop:0,scrollPositionChangeReason:ia.REQUESTED}:r.scrollLeft!==i.scrollLeft||r.scrollTop!==i.scrollTop?{scrollLeft:r.scrollLeft!=null?r.scrollLeft:i.scrollLeft,scrollTop:r.scrollTop!=null?r.scrollTop:i.scrollTop,scrollPositionChangeReason:ia.REQUESTED}:null}}])}(R.PureComponent);j(jg,"defaultProps",{"aria-label":"grid",horizontalOverscanSize:0,noContentRenderer:function(){return null},onScroll:function(){return null},onSectionRendered:function(){return null},scrollToAlignment:"auto",scrollToCell:-1,style:{},verticalOverscanSize:0});jg.propTypes={};Od(jg);var lke=function(){function n(e){var t=e.height,r=e.width,i=e.x,o=e.y;Ht(this,n),this.height=t,this.width=r,this.x=i,this.y=o,this._indexMap={},this._indices=[]}return Wt(n,[{key:"addCellIndex",value:function(t){var r=t.index;this._indexMap[r]||(this._indexMap[r]=!0,this._indices.push(r))}},{key:"getCellIndices",value:function(){return this._indices}},{key:"toString",value:function(){return"".concat(this.x,",").concat(this.y," ").concat(this.width,"x").concat(this.height)}}])}(),cke=100,uke=function(){function n(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:cke;Ht(this,n),this._sectionSize=e,this._cellMetadata=[],this._sections={}}return Wt(n,[{key:"getCellIndices",value:function(t){var r=t.height,i=t.width,o=t.x,s=t.y,a={};return this.getSections({height:r,width:i,x:o,y:s}).forEach(function(l){return l.getCellIndices().forEach(function(c){a[c]=c})}),Object.keys(a).map(function(l){return a[l]})}},{key:"getCellMetadata",value:function(t){var r=t.index;return this._cellMetadata[r]}},{key:"getSections",value:function(t){for(var r=t.height,i=t.width,o=t.x,s=t.y,a=Math.floor(o/this._sectionSize),l=Math.floor((o+i-1)/this._sectionSize),c=Math.floor(s/this._sectionSize),u=Math.floor((s+r-1)/this._sectionSize),d=[],f=a;f<=l;f++)for(var h=c;h<=u;h++){var m="".concat(f,".").concat(h);this._sections[m]||(this._sections[m]=new lke({height:this._sectionSize,width:this._sectionSize,x:f*this._sectionSize,y:h*this._sectionSize})),d.push(this._sections[m])}return d}},{key:"getTotalSectionCount",value:function(){return Object.keys(this._sections).length}},{key:"toString",value:function(){var t=this;return Object.keys(this._sections).map(function(r){return t._sections[r].toString()})}},{key:"registerCell",value:function(t){var r=t.cellMetadatum,i=t.index;this._cellMetadata[i]=r,this.getSections(r).forEach(function(o){return o.addCellIndex({index:i})})}}])}();function dke(n){for(var e=n.cellCount,t=n.cellSizeAndPositionGetter,r=n.sectionSize,i=[],o=new uke(r),s=0,a=0,l=0;l<e;l++){var c=t({index:l});if(c.height==null||isNaN(c.height)||c.width==null||isNaN(c.width)||c.x==null||isNaN(c.x)||c.y==null||isNaN(c.y))throw Error("Invalid metadata returned for cell ".concat(l,`:
        x:`).concat(c.x,", y:").concat(c.y,", width:").concat(c.width,", height:").concat(c.height));s=Math.max(s,c.y+c.height),a=Math.max(a,c.x+c.width),i[l]=c,o.registerCell({cellMetadatum:c,index:l})}return{cellMetadata:i,height:s,sectionManager:o,width:a}}function EP(n){var e=n.align,t=e===void 0?"auto":e,r=n.cellOffset,i=n.cellSize,o=n.containerSize,s=n.currentOffset,a=r,l=a-o+i;switch(t){case"start":return a;case"end":return l;case"center":return a-(o-i)/2;default:return Math.max(l,Math.min(a,s))}}function fke(n,e,t){return e=ut(e),$n(n,GN()?Reflect.construct(e,t||[],ut(n).constructor):e.apply(n,t))}function GN(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(GN=function(){return!!n})()}var qN=function(n){function e(t,r){var i;return Ht(this,e),i=fke(this,e,[t,r]),i._cellMetadata=[],i._lastRenderedCellIndices=[],i._cellCache=[],i._isScrollingChange=i._isScrollingChange.bind(i),i._setCollectionViewRef=i._setCollectionViewRef.bind(i),i}return Fn(e,n),Wt(e,[{key:"forceUpdate",value:function(){this._collectionView!==void 0&&this._collectionView.forceUpdate()}},{key:"recomputeCellSizesAndPositions",value:function(){this._cellCache=[],this._collectionView.recomputeCellSizesAndPositions()}},{key:"render",value:function(){var r=xe({},(cF(this.props),this.props));return R.createElement(jg,xe({cellLayoutManager:this,isScrollingChange:this._isScrollingChange,ref:this._setCollectionViewRef},r))}},{key:"calculateSizeAndPositionData",value:function(){var r=this.props,i=r.cellCount,o=r.cellSizeAndPositionGetter,s=r.sectionSize,a=dke({cellCount:i,cellSizeAndPositionGetter:o,sectionSize:s});this._cellMetadata=a.cellMetadata,this._sectionManager=a.sectionManager,this._height=a.height,this._width=a.width}},{key:"getLastRenderedIndices",value:function(){return this._lastRenderedCellIndices}},{key:"getScrollPositionForCell",value:function(r){var i=r.align,o=r.cellIndex,s=r.height,a=r.scrollLeft,l=r.scrollTop,c=r.width,u=this.props.cellCount;if(o>=0&&o<u){var d=this._cellMetadata[o];a=EP({align:i,cellOffset:d.x,cellSize:d.width,containerSize:c,currentOffset:a}),l=EP({align:i,cellOffset:d.y,cellSize:d.height,containerSize:s,currentOffset:l})}return{scrollLeft:a,scrollTop:l}}},{key:"getTotalSize",value:function(){return{height:this._height,width:this._width}}},{key:"cellRenderers",value:function(r){var i=this,o=r.height,s=r.isScrolling,a=r.width,l=r.x,c=r.y,u=this.props,d=u.cellGroupRenderer,f=u.cellRenderer;return this._lastRenderedCellIndices=this._sectionManager.getCellIndices({height:o,width:a,x:l,y:c}),d({cellCache:this._cellCache,cellRenderer:f,cellSizeAndPositionGetter:function(m){var g=m.index;return i._sectionManager.getCellMetadata({index:g})},indices:this._lastRenderedCellIndices,isScrolling:s})}},{key:"_isScrollingChange",value:function(r){r||(this._cellCache=[])}},{key:"_setCollectionViewRef",value:function(r){this._collectionView=r}}])}(R.PureComponent);j(qN,"defaultProps",{"aria-label":"grid",cellGroupRenderer:hke});qN.propTypes={};function hke(n){var e=n.cellCache,t=n.cellRenderer,r=n.cellSizeAndPositionGetter,i=n.indices,o=n.isScrolling;return i.map(function(s){var a=r({index:s}),l={index:s,isScrolling:o,key:s,style:{height:a.height,left:a.x,position:"absolute",top:a.y,width:a.width}};return o?(s in e||(e[s]=t(l)),e[s]):t(l)}).filter(function(s){return!!s})}function mke(n,e,t){return e=ut(e),$n(n,KN()?Reflect.construct(e,t||[],ut(n).constructor):e.apply(n,t))}function KN(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(KN=function(){return!!n})()}var gke=function(n){function e(t,r){var i;return Ht(this,e),i=mke(this,e,[t,r]),i._registerChild=i._registerChild.bind(i),i}return Fn(e,n),Wt(e,[{key:"componentDidUpdate",value:function(r){var i=this.props,o=i.columnMaxWidth,s=i.columnMinWidth,a=i.columnCount,l=i.width;(o!==r.columnMaxWidth||s!==r.columnMinWidth||a!==r.columnCount||l!==r.width)&&this._registeredChild&&this._registeredChild.recomputeGridSize()}},{key:"render",value:function(){var r=this.props,i=r.children,o=r.columnMaxWidth,s=r.columnMinWidth,a=r.columnCount,l=r.width,c=s||1,u=o?Math.min(o,l):l,d=l/a;d=Math.max(c,d),d=Math.min(u,d),d=Math.floor(d);var f=Math.min(l,d*a);return i({adjustedWidth:f,columnWidth:d,getColumnWidth:function(){return d},registerChild:this._registerChild})}},{key:"_registerChild",value:function(r){if(r&&typeof r.recomputeGridSize!="function")throw Error("Unexpected child type registered; only Grid/MultiGrid children are supported.");this._registeredChild=r,this._registeredChild&&this._registeredChild.recomputeGridSize()}}])}(R.PureComponent);gke.propTypes={};function kP(n){var e=n.cellCount,t=n.cellSize,r=n.computeMetadataCallback,i=n.computeMetadataCallbackProps,o=n.nextCellsCount,s=n.nextCellSize,a=n.nextScrollToIndex,l=n.scrollToIndex,c=n.updateScrollOffsetForScrollToIndex;(e!==o||(typeof t=="number"||typeof s=="number")&&t!==s)&&(r(i),l>=0&&l===a&&c())}var pke=function(){function n(e){var t=e.cellCount,r=e.cellSizeGetter,i=e.estimatedCellSize;Ht(this,n),j(this,"_cellSizeAndPositionData",{}),j(this,"_lastMeasuredIndex",-1),j(this,"_lastBatchedIndex",-1),j(this,"_cellCount",void 0),j(this,"_cellSizeGetter",void 0),j(this,"_estimatedCellSize",void 0),this._cellSizeGetter=r,this._cellCount=t,this._estimatedCellSize=i}return Wt(n,[{key:"areOffsetsAdjusted",value:function(){return!1}},{key:"configure",value:function(t){var r=t.cellCount,i=t.estimatedCellSize,o=t.cellSizeGetter;this._cellCount=r,this._estimatedCellSize=i,this._cellSizeGetter=o}},{key:"getCellCount",value:function(){return this._cellCount}},{key:"getEstimatedCellSize",value:function(){return this._estimatedCellSize}},{key:"getLastMeasuredIndex",value:function(){return this._lastMeasuredIndex}},{key:"getOffsetAdjustment",value:function(){return 0}},{key:"getSizeAndPositionOfCell",value:function(t){if(t<0||t>=this._cellCount)throw Error("Requested index ".concat(t," is outside of range 0..").concat(this._cellCount));if(t>this._lastMeasuredIndex)for(var r=this.getSizeAndPositionOfLastMeasuredCell(),i=r.offset+r.size,o=this._lastMeasuredIndex+1;o<=t;o++){var s=this._cellSizeGetter({index:o});if(s===void 0||isNaN(s))throw Error("Invalid size returned for cell ".concat(o," of value ").concat(s));s===null?(this._cellSizeAndPositionData[o]={offset:i,size:0},this._lastBatchedIndex=t):(this._cellSizeAndPositionData[o]={offset:i,size:s},i+=s,this._lastMeasuredIndex=t)}return this._cellSizeAndPositionData[t]}},{key:"getSizeAndPositionOfLastMeasuredCell",value:function(){return this._lastMeasuredIndex>=0?this._cellSizeAndPositionData[this._lastMeasuredIndex]:{offset:0,size:0}}},{key:"getTotalSize",value:function(){var t=this.getSizeAndPositionOfLastMeasuredCell(),r=t.offset+t.size,i=this._cellCount-this._lastMeasuredIndex-1,o=i*this._estimatedCellSize;return r+o}},{key:"getUpdatedOffsetForIndex",value:function(t){var r=t.align,i=r===void 0?"auto":r,o=t.containerSize,s=t.currentOffset,a=t.targetIndex;if(o<=0)return 0;var l=this.getSizeAndPositionOfCell(a),c=l.offset,u=c-o+l.size,d;switch(i){case"start":d=c;break;case"end":d=u;break;case"center":d=c-(o-l.size)/2;break;default:d=Math.max(u,Math.min(c,s));break}var f=this.getTotalSize();return Math.max(0,Math.min(f-o,d))}},{key:"getVisibleCellRange",value:function(t){var r=t.containerSize,i=t.offset,o=this.getTotalSize();if(o===0)return{};var s=i+r,a=this._findNearestCell(i),l=this.getSizeAndPositionOfCell(a);i=l.offset+l.size;for(var c=a;i<s&&c<this._cellCount-1;)c++,i+=this.getSizeAndPositionOfCell(c).size;return{start:a,stop:c}}},{key:"resetCell",value:function(t){this._lastMeasuredIndex=Math.min(this._lastMeasuredIndex,t-1)}},{key:"_binarySearch",value:function(t,r,i){for(;r<=t;){var o=r+Math.floor((t-r)/2),s=this.getSizeAndPositionOfCell(o).offset;if(s===i)return o;s<i?r=o+1:s>i&&(t=o-1)}return r>0?r-1:0}},{key:"_exponentialSearch",value:function(t,r){for(var i=1;t<this._cellCount&&this.getSizeAndPositionOfCell(t).offset<r;)t+=i,i*=2;return this._binarySearch(Math.min(t,this._cellCount-1),Math.floor(t/2),r)}},{key:"_findNearestCell",value:function(t){if(isNaN(t))throw Error("Invalid offset ".concat(t," specified"));t=Math.max(0,t);var r=this.getSizeAndPositionOfLastMeasuredCell(),i=Math.max(0,this._lastMeasuredIndex);return r.offset>=t?this._binarySearch(i,0,t):this._exponentialSearch(i,t)}}])}(),vke=15e5,bke=16777100,yke=function(){return typeof window<"u"},wke=function(){return!!window.chrome},_ke=function(){return yke()&&wke()?bke:vke},Cke=["maxScrollSize"],PP=function(){function n(e){var t=e.maxScrollSize,r=t===void 0?_ke():t,i=mc(e,Cke);Ht(this,n),j(this,"_cellSizeAndPositionManager",void 0),j(this,"_maxScrollSize",void 0),this._cellSizeAndPositionManager=new pke(i),this._maxScrollSize=r}return Wt(n,[{key:"areOffsetsAdjusted",value:function(){return this._cellSizeAndPositionManager.getTotalSize()>this._maxScrollSize}},{key:"configure",value:function(t){this._cellSizeAndPositionManager.configure(t)}},{key:"getCellCount",value:function(){return this._cellSizeAndPositionManager.getCellCount()}},{key:"getEstimatedCellSize",value:function(){return this._cellSizeAndPositionManager.getEstimatedCellSize()}},{key:"getLastMeasuredIndex",value:function(){return this._cellSizeAndPositionManager.getLastMeasuredIndex()}},{key:"getOffsetAdjustment",value:function(t){var r=t.containerSize,i=t.offset,o=this._cellSizeAndPositionManager.getTotalSize(),s=this.getTotalSize(),a=this._getOffsetPercentage({containerSize:r,offset:i,totalSize:s});return Math.round(a*(s-o))}},{key:"getSizeAndPositionOfCell",value:function(t){return this._cellSizeAndPositionManager.getSizeAndPositionOfCell(t)}},{key:"getSizeAndPositionOfLastMeasuredCell",value:function(){return this._cellSizeAndPositionManager.getSizeAndPositionOfLastMeasuredCell()}},{key:"getTotalSize",value:function(){return Math.min(this._maxScrollSize,this._cellSizeAndPositionManager.getTotalSize())}},{key:"getUpdatedOffsetForIndex",value:function(t){var r=t.align,i=r===void 0?"auto":r,o=t.containerSize,s=t.currentOffset,a=t.targetIndex;s=this._safeOffsetToOffset({containerSize:o,offset:s});var l=this._cellSizeAndPositionManager.getUpdatedOffsetForIndex({align:i,containerSize:o,currentOffset:s,targetIndex:a});return this._offsetToSafeOffset({containerSize:o,offset:l})}},{key:"getVisibleCellRange",value:function(t){var r=t.containerSize,i=t.offset;return i=this._safeOffsetToOffset({containerSize:r,offset:i}),this._cellSizeAndPositionManager.getVisibleCellRange({containerSize:r,offset:i})}},{key:"resetCell",value:function(t){this._cellSizeAndPositionManager.resetCell(t)}},{key:"_getOffsetPercentage",value:function(t){var r=t.containerSize,i=t.offset,o=t.totalSize;return o<=r?0:i/(o-r)}},{key:"_offsetToSafeOffset",value:function(t){var r=t.containerSize,i=t.offset,o=this._cellSizeAndPositionManager.getTotalSize(),s=this.getTotalSize();if(o===s)return i;var a=this._getOffsetPercentage({containerSize:r,offset:i,totalSize:o});return Math.round(a*(s-r))}},{key:"_safeOffsetToOffset",value:function(t){var r=t.containerSize,i=t.offset,o=this._cellSizeAndPositionManager.getTotalSize(),s=this.getTotalSize();if(o===s)return i;var a=this._getOffsetPercentage({containerSize:r,offset:i,totalSize:s});return Math.round(a*(o-r))}}])}(),If=-1,Fi=1;function Ske(n){var e=n.cellCount,t=n.overscanCellsCount,r=n.scrollDirection,i=n.startIndex,o=n.stopIndex;return r===Fi?{overscanStartIndex:Math.max(0,i),overscanStopIndex:Math.min(e-1,o+t)}:{overscanStartIndex:Math.max(0,i-t),overscanStopIndex:Math.min(e-1,o)}}function IP(n){var e=n.cellSize,t=n.cellSizeAndPositionManager,r=n.previousCellsCount,i=n.previousCellSize,o=n.previousScrollToAlignment,s=n.previousScrollToIndex,a=n.previousSize,l=n.scrollOffset,c=n.scrollToAlignment,u=n.scrollToIndex,d=n.size,f=n.sizeJustIncreasedFromZero,h=n.updateScrollIndexCallback,m=t.getCellCount(),g=u>=0&&u<m,p=d!==a||f||!i||typeof e=="number"&&e!==i;g&&(p||c!==o||u!==s)?h(u):!g&&m>0&&(d<a||m<r)&&l>t.getTotalSize()-d&&h(m-1)}function xke(n){for(var e=n.cellCache,t=n.cellRenderer,r=n.columnSizeAndPositionManager,i=n.columnStartIndex,o=n.columnStopIndex,s=n.deferredMeasurementCache,a=n.horizontalOffsetAdjustment,l=n.isScrolling,c=n.isScrollingOptOut,u=n.parent,d=n.rowSizeAndPositionManager,f=n.rowStartIndex,h=n.rowStopIndex,m=n.styleCache,g=n.verticalOffsetAdjustment,p=n.visibleColumnIndices,b=n.visibleRowIndices,y=[],C=r.areOffsetsAdjusted()||d.areOffsetsAdjusted(),A=!l&&!C,w=f;w<=h;w++)for(var S=d.getSizeAndPositionOfCell(w),_=i;_<=o;_++){var v=r.getSizeAndPositionOfCell(_),x=_>=p.start&&_<=p.stop&&w>=b.start&&w<=b.stop,T="".concat(w,"-").concat(_),E=void 0;A&&m[T]?E=m[T]:s&&!s.has(w,_)?E={height:"auto",left:0,position:"absolute",top:0,width:"auto"}:(E={height:S.size,left:v.offset+a,position:"absolute",top:S.offset+g,width:v.size},m[T]=E);var k={columnIndex:_,isScrolling:l,isVisible:x,key:T,parent:u,rowIndex:w,style:E},I=void 0;(c||l)&&!a&&!g?(e[T]||(e[T]=t(k)),I=e[T]):I=t(k),!(I==null||I===!1)&&(I.props.role||(I=O.cloneElement(I,{role:"gridcell"})),y.push(I))}return y}var Bn;typeof window<"u"?Bn=window:typeof self<"u"?Bn=self:Bn={};var Ake=Bn.requestAnimationFrame||Bn.webkitRequestAnimationFrame||Bn.mozRequestAnimationFrame||Bn.oRequestAnimationFrame||Bn.msRequestAnimationFrame||function(n){return Bn.setTimeout(n,1e3/60)},Tke=Bn.cancelAnimationFrame||Bn.webkitCancelAnimationFrame||Bn.mozCancelAnimationFrame||Bn.oCancelAnimationFrame||Bn.msCancelAnimationFrame||function(n){Bn.clearTimeout(n)},OP=Ake,Eke=Tke,ul=function(e){return Eke(e.id)},N_=function(e,t){var r;Promise.resolve().then(function(){r=Date.now()});var i=function(){Date.now()-r>=t?e.call():o.id=OP(i)},o={id:OP(i)};return o};function RP(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Wn(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?RP(Object(t),!0).forEach(function(r){j(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):RP(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function kke(n,e,t){return e=ut(e),$n(n,YN()?Reflect.construct(e,t||[],ut(n).constructor):e.apply(n,t))}function YN(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(YN=function(){return!!n})()}var Pke=150,kv={OBSERVED:"observed",REQUESTED:"requested"},Ike=function(){return null},wo=function(n){function e(t){var r;Ht(this,e),r=kke(this,e,[t]),j(r,"_onGridRenderedMemoizer",cl()),j(r,"_onScrollMemoizer",cl(!1)),j(r,"_deferredInvalidateColumnIndex",null),j(r,"_deferredInvalidateRowIndex",null),j(r,"_recomputeScrollLeftFlag",!1),j(r,"_recomputeScrollTopFlag",!1),j(r,"_horizontalScrollBarSize",0),j(r,"_verticalScrollBarSize",0),j(r,"_scrollbarPresenceChanged",!1),j(r,"_scrollingContainer",void 0),j(r,"_childrenToDisplay",void 0),j(r,"_columnStartIndex",void 0),j(r,"_columnStopIndex",void 0),j(r,"_rowStartIndex",void 0),j(r,"_rowStopIndex",void 0),j(r,"_renderedColumnStartIndex",0),j(r,"_renderedColumnStopIndex",0),j(r,"_renderedRowStartIndex",0),j(r,"_renderedRowStopIndex",0),j(r,"_initialScrollTop",void 0),j(r,"_initialScrollLeft",void 0),j(r,"_disablePointerEventsTimeoutId",void 0),j(r,"_styleCache",{}),j(r,"_cellCache",{}),j(r,"_debounceScrollEndedCallback",function(){r._disablePointerEventsTimeoutId=null,r.setState({isScrolling:!1,needToResetStyleCache:!1})}),j(r,"_invokeOnGridRenderedHelper",function(){var s=r.props.onSectionRendered;r._onGridRenderedMemoizer({callback:s,indices:{columnOverscanStartIndex:r._columnStartIndex,columnOverscanStopIndex:r._columnStopIndex,columnStartIndex:r._renderedColumnStartIndex,columnStopIndex:r._renderedColumnStopIndex,rowOverscanStartIndex:r._rowStartIndex,rowOverscanStopIndex:r._rowStopIndex,rowStartIndex:r._renderedRowStartIndex,rowStopIndex:r._renderedRowStopIndex}})}),j(r,"_setScrollingContainerRef",function(s){r._scrollingContainer=s,typeof r.props.elementRef=="function"?r.props.elementRef(s):uF(r.props.elementRef)==="object"&&(r.props.elementRef.current=s)}),j(r,"_onScroll",function(s){s.target===r._scrollingContainer&&r.handleScrollEvent(s.target)});var i=new PP({cellCount:t.columnCount,cellSizeGetter:function(a){return e._wrapSizeGetter(t.columnWidth)(a)},estimatedCellSize:e._getEstimatedColumnSize(t)}),o=new PP({cellCount:t.rowCount,cellSizeGetter:function(a){return e._wrapSizeGetter(t.rowHeight)(a)},estimatedCellSize:e._getEstimatedRowSize(t)});return r.state={instanceProps:{columnSizeAndPositionManager:i,rowSizeAndPositionManager:o,prevColumnWidth:t.columnWidth,prevRowHeight:t.rowHeight,prevColumnCount:t.columnCount,prevRowCount:t.rowCount,prevIsScrolling:t.isScrolling===!0,prevScrollToColumn:t.scrollToColumn,prevScrollToRow:t.scrollToRow,scrollbarSize:0,scrollbarSizeMeasured:!1},isScrolling:!1,scrollDirectionHorizontal:Fi,scrollDirectionVertical:Fi,scrollLeft:0,scrollTop:0,scrollPositionChangeReason:null,needToResetStyleCache:!1},t.scrollToRow>0&&(r._initialScrollTop=r._getCalculatedScrollTop(t,r.state)),t.scrollToColumn>0&&(r._initialScrollLeft=r._getCalculatedScrollLeft(t,r.state)),r}return Fn(e,n),Wt(e,[{key:"getOffsetForCell",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=r.alignment,o=i===void 0?this.props.scrollToAlignment:i,s=r.columnIndex,a=s===void 0?this.props.scrollToColumn:s,l=r.rowIndex,c=l===void 0?this.props.scrollToRow:l,u=Wn(Wn({},this.props),{},{scrollToAlignment:o,scrollToColumn:a,scrollToRow:c});return{scrollLeft:this._getCalculatedScrollLeft(u),scrollTop:this._getCalculatedScrollTop(u)}}},{key:"getTotalRowsHeight",value:function(){return this.state.instanceProps.rowSizeAndPositionManager.getTotalSize()}},{key:"getTotalColumnsWidth",value:function(){return this.state.instanceProps.columnSizeAndPositionManager.getTotalSize()}},{key:"handleScrollEvent",value:function(r){var i=r.scrollLeft,o=i===void 0?0:i,s=r.scrollTop,a=s===void 0?0:s;if(!(a<0)){this._debounceScrollEnded();var l=this.props,c=l.autoHeight,u=l.autoWidth,d=l.height,f=l.width,h=this.state.instanceProps,m=h.scrollbarSize,g=h.rowSizeAndPositionManager.getTotalSize(),p=h.columnSizeAndPositionManager.getTotalSize(),b=Math.min(Math.max(0,p-f+m),o),y=Math.min(Math.max(0,g-d+m),a);if(this.state.scrollLeft!==b||this.state.scrollTop!==y){var C=b!==this.state.scrollLeft?b>this.state.scrollLeft?Fi:If:this.state.scrollDirectionHorizontal,A=y!==this.state.scrollTop?y>this.state.scrollTop?Fi:If:this.state.scrollDirectionVertical,w={isScrolling:!0,scrollDirectionHorizontal:C,scrollDirectionVertical:A,scrollPositionChangeReason:kv.OBSERVED};c||(w.scrollTop=y),u||(w.scrollLeft=b),w.needToResetStyleCache=!1,this.setState(w)}this._invokeOnScrollMemoizer({scrollLeft:b,scrollTop:y,totalColumnsWidth:p,totalRowsHeight:g})}}},{key:"invalidateCellSizeAfterRender",value:function(r){var i=r.columnIndex,o=r.rowIndex;this._deferredInvalidateColumnIndex=typeof this._deferredInvalidateColumnIndex=="number"?Math.min(this._deferredInvalidateColumnIndex,i):i,this._deferredInvalidateRowIndex=typeof this._deferredInvalidateRowIndex=="number"?Math.min(this._deferredInvalidateRowIndex,o):o}},{key:"measureAllCells",value:function(){var r=this.props,i=r.columnCount,o=r.rowCount,s=this.state.instanceProps;s.columnSizeAndPositionManager.getSizeAndPositionOfCell(i-1),s.rowSizeAndPositionManager.getSizeAndPositionOfCell(o-1)}},{key:"recomputeGridSize",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=r.columnIndex,o=i===void 0?0:i,s=r.rowIndex,a=s===void 0?0:s,l=this.props,c=l.scrollToColumn,u=l.scrollToRow,d=this.state.instanceProps;d.columnSizeAndPositionManager.resetCell(o),d.rowSizeAndPositionManager.resetCell(a),this._recomputeScrollLeftFlag=c>=0&&(this.state.scrollDirectionHorizontal===Fi?o<=c:o>=c),this._recomputeScrollTopFlag=u>=0&&(this.state.scrollDirectionVertical===Fi?a<=u:a>=u),this._styleCache={},this._cellCache={},this.forceUpdate()}},{key:"scrollToCell",value:function(r){var i=r.columnIndex,o=r.rowIndex,s=this.props.columnCount,a=this.props;s>1&&i!==void 0&&this._updateScrollLeftForScrollToColumn(Wn(Wn({},a),{},{scrollToColumn:i})),o!==void 0&&this._updateScrollTopForScrollToRow(Wn(Wn({},a),{},{scrollToRow:o}))}},{key:"componentDidMount",value:function(){var r=this.props,i=r.getScrollbarSize,o=r.height,s=r.scrollLeft,a=r.scrollToColumn,l=r.scrollTop,c=r.scrollToRow,u=r.width,d=this.state.instanceProps;if(this._initialScrollTop=0,this._initialScrollLeft=0,this._handleInvalidatedGridSize(),d.scrollbarSizeMeasured||this.setState(function(m){var g=Wn(Wn({},m),{},{needToResetStyleCache:!1});return g.instanceProps.scrollbarSize=i(),g.instanceProps.scrollbarSizeMeasured=!0,g}),typeof s=="number"&&s>=0||typeof l=="number"&&l>=0){var f=e._getScrollToPositionStateUpdate({prevState:this.state,scrollLeft:s,scrollTop:l});f&&(f.needToResetStyleCache=!1,this.setState(f))}this._scrollingContainer&&(this._scrollingContainer.scrollLeft!==this.state.scrollLeft&&(this._scrollingContainer.scrollLeft=this.state.scrollLeft),this._scrollingContainer.scrollTop!==this.state.scrollTop&&(this._scrollingContainer.scrollTop=this.state.scrollTop));var h=o>0&&u>0;a>=0&&h&&this._updateScrollLeftForScrollToColumn(),c>=0&&h&&this._updateScrollTopForScrollToRow(),this._invokeOnGridRenderedHelper(),this._invokeOnScrollMemoizer({scrollLeft:s||0,scrollTop:l||0,totalColumnsWidth:d.columnSizeAndPositionManager.getTotalSize(),totalRowsHeight:d.rowSizeAndPositionManager.getTotalSize()}),this._maybeCallOnScrollbarPresenceChange()}},{key:"componentDidUpdate",value:function(r,i){var o=this,s=this.props,a=s.autoHeight,l=s.autoWidth,c=s.columnCount,u=s.height,d=s.rowCount,f=s.scrollToAlignment,h=s.scrollToColumn,m=s.scrollToRow,g=s.width,p=this.state,b=p.scrollLeft,y=p.scrollPositionChangeReason,C=p.scrollTop,A=p.instanceProps;this._handleInvalidatedGridSize();var w=c>0&&r.columnCount===0||d>0&&r.rowCount===0;y===kv.REQUESTED&&(!l&&b>=0&&(b!==this._scrollingContainer.scrollLeft||w)&&(this._scrollingContainer.scrollLeft=b),!a&&C>=0&&(C!==this._scrollingContainer.scrollTop||w)&&(this._scrollingContainer.scrollTop=C));var S=(r.width===0||r.height===0)&&u>0&&g>0;if(this._recomputeScrollLeftFlag?(this._recomputeScrollLeftFlag=!1,this._updateScrollLeftForScrollToColumn(this.props)):IP({cellSizeAndPositionManager:A.columnSizeAndPositionManager,previousCellsCount:r.columnCount,previousCellSize:r.columnWidth,previousScrollToAlignment:r.scrollToAlignment,previousScrollToIndex:r.scrollToColumn,previousSize:r.width,scrollOffset:b,scrollToAlignment:f,scrollToIndex:h,size:g,sizeJustIncreasedFromZero:S,updateScrollIndexCallback:function(){return o._updateScrollLeftForScrollToColumn(o.props)}}),this._recomputeScrollTopFlag?(this._recomputeScrollTopFlag=!1,this._updateScrollTopForScrollToRow(this.props)):IP({cellSizeAndPositionManager:A.rowSizeAndPositionManager,previousCellsCount:r.rowCount,previousCellSize:r.rowHeight,previousScrollToAlignment:r.scrollToAlignment,previousScrollToIndex:r.scrollToRow,previousSize:r.height,scrollOffset:C,scrollToAlignment:f,scrollToIndex:m,size:u,sizeJustIncreasedFromZero:S,updateScrollIndexCallback:function(){return o._updateScrollTopForScrollToRow(o.props)}}),this._invokeOnGridRenderedHelper(),b!==i.scrollLeft||C!==i.scrollTop){var _=A.rowSizeAndPositionManager.getTotalSize(),v=A.columnSizeAndPositionManager.getTotalSize();this._invokeOnScrollMemoizer({scrollLeft:b,scrollTop:C,totalColumnsWidth:v,totalRowsHeight:_})}this._maybeCallOnScrollbarPresenceChange()}},{key:"componentWillUnmount",value:function(){this._disablePointerEventsTimeoutId&&ul(this._disablePointerEventsTimeoutId)}},{key:"render",value:function(){var r=this.props,i=r.autoContainerWidth,o=r.autoHeight,s=r.autoWidth,a=r.className,l=r.containerProps,c=r.containerRole,u=r.containerStyle,d=r.height,f=r.id,h=r.noContentRenderer,m=r.role,g=r.style,p=r.tabIndex,b=r.width,y=this.state,C=y.instanceProps,A=y.needToResetStyleCache,w=this._isScrolling(),S={boxSizing:"border-box",direction:"ltr",height:o?"auto":d,position:"relative",width:s?"auto":b,WebkitOverflowScrolling:"touch",willChange:"transform"};A&&(this._styleCache={}),this.state.isScrolling||this._resetStyleCache(),this._calculateChildrenToRender(this.props,this.state);var _=C.columnSizeAndPositionManager.getTotalSize(),v=C.rowSizeAndPositionManager.getTotalSize(),x=v>d?C.scrollbarSize:0,T=_>b?C.scrollbarSize:0;(T!==this._horizontalScrollBarSize||x!==this._verticalScrollBarSize)&&(this._horizontalScrollBarSize=T,this._verticalScrollBarSize=x,this._scrollbarPresenceChanged=!0),S.overflowX=_+x<=b?"hidden":"auto",S.overflowY=v+T<=d?"hidden":"auto";var E=this._childrenToDisplay,k=E.length===0&&d>0&&b>0;return R.createElement("div",xe({ref:this._setScrollingContainerRef},l,{"aria-label":this.props["aria-label"],"aria-readonly":this.props["aria-readonly"],className:Kr("ReactVirtualized__Grid",a),id:f,onScroll:this._onScroll,role:m,style:Wn(Wn({},S),g),tabIndex:p}),E.length>0&&R.createElement("div",{className:"ReactVirtualized__Grid__innerScrollContainer",role:c,style:Wn({width:i?"auto":_,height:v,maxWidth:_,maxHeight:v,overflow:"hidden",pointerEvents:w?"none":"",position:"relative"},u)},E),k&&h())}},{key:"_calculateChildrenToRender",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.state,o=r.cellRenderer,s=r.cellRangeRenderer,a=r.columnCount,l=r.deferredMeasurementCache,c=r.height,u=r.overscanColumnCount,d=r.overscanIndicesGetter,f=r.overscanRowCount,h=r.rowCount,m=r.width,g=r.isScrollingOptOut,p=i.scrollDirectionHorizontal,b=i.scrollDirectionVertical,y=i.instanceProps,C=this._initialScrollTop>0?this._initialScrollTop:i.scrollTop,A=this._initialScrollLeft>0?this._initialScrollLeft:i.scrollLeft,w=this._isScrolling(r,i);if(this._childrenToDisplay=[],c>0&&m>0){var S=y.columnSizeAndPositionManager.getVisibleCellRange({containerSize:m,offset:A}),_=y.rowSizeAndPositionManager.getVisibleCellRange({containerSize:c,offset:C}),v=y.columnSizeAndPositionManager.getOffsetAdjustment({containerSize:m,offset:A}),x=y.rowSizeAndPositionManager.getOffsetAdjustment({containerSize:c,offset:C});this._renderedColumnStartIndex=S.start,this._renderedColumnStopIndex=S.stop,this._renderedRowStartIndex=_.start,this._renderedRowStopIndex=_.stop;var T=d({direction:"horizontal",cellCount:a,overscanCellsCount:u,scrollDirection:p,startIndex:typeof S.start=="number"?S.start:0,stopIndex:typeof S.stop=="number"?S.stop:-1}),E=d({direction:"vertical",cellCount:h,overscanCellsCount:f,scrollDirection:b,startIndex:typeof _.start=="number"?_.start:0,stopIndex:typeof _.stop=="number"?_.stop:-1}),k=T.overscanStartIndex,I=T.overscanStopIndex,B=E.overscanStartIndex,D=E.overscanStopIndex;if(l){if(!l.hasFixedHeight()){for(var F=B;F<=D;F++)if(!l.has(F,0)){k=0,I=a-1;break}}if(!l.hasFixedWidth()){for(var L=k;L<=I;L++)if(!l.has(0,L)){B=0,D=h-1;break}}}this._childrenToDisplay=s({cellCache:this._cellCache,cellRenderer:o,columnSizeAndPositionManager:y.columnSizeAndPositionManager,columnStartIndex:k,columnStopIndex:I,deferredMeasurementCache:l,horizontalOffsetAdjustment:v,isScrolling:w,isScrollingOptOut:g,parent:this,rowSizeAndPositionManager:y.rowSizeAndPositionManager,rowStartIndex:B,rowStopIndex:D,scrollLeft:A,scrollTop:C,styleCache:this._styleCache,verticalOffsetAdjustment:x,visibleColumnIndices:S,visibleRowIndices:_}),this._columnStartIndex=k,this._columnStopIndex=I,this._rowStartIndex=B,this._rowStopIndex=D}}},{key:"_debounceScrollEnded",value:function(){var r=this.props.scrollingResetTimeInterval;this._disablePointerEventsTimeoutId&&ul(this._disablePointerEventsTimeoutId),this._disablePointerEventsTimeoutId=N_(this._debounceScrollEndedCallback,r)}},{key:"_handleInvalidatedGridSize",value:function(){if(typeof this._deferredInvalidateColumnIndex=="number"&&typeof this._deferredInvalidateRowIndex=="number"){var r=this._deferredInvalidateColumnIndex,i=this._deferredInvalidateRowIndex;this._deferredInvalidateColumnIndex=null,this._deferredInvalidateRowIndex=null,this.recomputeGridSize({columnIndex:r,rowIndex:i})}}},{key:"_invokeOnScrollMemoizer",value:function(r){var i=this,o=r.scrollLeft,s=r.scrollTop,a=r.totalColumnsWidth,l=r.totalRowsHeight;this._onScrollMemoizer({callback:function(u){var d=u.scrollLeft,f=u.scrollTop,h=i.props,m=h.height,g=h.onScroll,p=h.width;g({clientHeight:m,clientWidth:p,scrollHeight:l,scrollLeft:d,scrollTop:f,scrollWidth:a})},indices:{scrollLeft:o,scrollTop:s}})}},{key:"_isScrolling",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.state;return Object.hasOwnProperty.call(r,"isScrolling")?!!r.isScrolling:!!i.isScrolling}},{key:"_maybeCallOnScrollbarPresenceChange",value:function(){if(this._scrollbarPresenceChanged){var r=this.props.onScrollbarPresenceChange;this._scrollbarPresenceChanged=!1,r({horizontal:this._horizontalScrollBarSize>0,size:this.state.instanceProps.scrollbarSize,vertical:this._verticalScrollBarSize>0})}}},{key:"scrollToPosition",value:function(r){var i=r.scrollLeft,o=r.scrollTop,s=e._getScrollToPositionStateUpdate({prevState:this.state,scrollLeft:i,scrollTop:o});s&&(s.needToResetStyleCache=!1,this.setState(s))}},{key:"_getCalculatedScrollLeft",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.state;return e._getCalculatedScrollLeft(r,i)}},{key:"_updateScrollLeftForScrollToColumn",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.state,o=e._getScrollLeftForScrollToColumnStateUpdate(r,i);o&&(o.needToResetStyleCache=!1,this.setState(o))}},{key:"_getCalculatedScrollTop",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.state;return e._getCalculatedScrollTop(r,i)}},{key:"_resetStyleCache",value:function(){var r=this._styleCache,i=this._cellCache,o=this.props.isScrollingOptOut;this._cellCache={},this._styleCache={};for(var s=this._rowStartIndex;s<=this._rowStopIndex;s++)for(var a=this._columnStartIndex;a<=this._columnStopIndex;a++){var l="".concat(s,"-").concat(a);this._styleCache[l]=r[l],o&&(this._cellCache[l]=i[l])}}},{key:"_updateScrollTopForScrollToRow",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.state,o=e._getScrollTopForScrollToRowStateUpdate(r,i);o&&(o.needToResetStyleCache=!1,this.setState(o))}}],[{key:"getDerivedStateFromProps",value:function(r,i){var o={};r.columnCount===0&&i.scrollLeft!==0||r.rowCount===0&&i.scrollTop!==0?(o.scrollLeft=0,o.scrollTop=0):(r.scrollLeft!==i.scrollLeft&&r.scrollToColumn<0||r.scrollTop!==i.scrollTop&&r.scrollToRow<0)&&Object.assign(o,e._getScrollToPositionStateUpdate({prevState:i,scrollLeft:r.scrollLeft,scrollTop:r.scrollTop}));var s=i.instanceProps;o.needToResetStyleCache=!1,(r.columnWidth!==s.prevColumnWidth||r.rowHeight!==s.prevRowHeight)&&(o.needToResetStyleCache=!0),s.columnSizeAndPositionManager.configure({cellCount:r.columnCount,estimatedCellSize:e._getEstimatedColumnSize(r),cellSizeGetter:e._wrapSizeGetter(r.columnWidth)}),s.rowSizeAndPositionManager.configure({cellCount:r.rowCount,estimatedCellSize:e._getEstimatedRowSize(r),cellSizeGetter:e._wrapSizeGetter(r.rowHeight)}),(s.prevColumnCount===0||s.prevRowCount===0)&&(s.prevColumnCount=0,s.prevRowCount=0),r.autoHeight&&r.isScrolling===!1&&s.prevIsScrolling===!0&&Object.assign(o,{isScrolling:!1});var a,l;return kP({cellCount:s.prevColumnCount,cellSize:typeof s.prevColumnWidth=="number"?s.prevColumnWidth:null,computeMetadataCallback:function(){return s.columnSizeAndPositionManager.resetCell(0)},computeMetadataCallbackProps:r,nextCellsCount:r.columnCount,nextCellSize:typeof r.columnWidth=="number"?r.columnWidth:null,nextScrollToIndex:r.scrollToColumn,scrollToIndex:s.prevScrollToColumn,updateScrollOffsetForScrollToIndex:function(){a=e._getScrollLeftForScrollToColumnStateUpdate(r,i)}}),kP({cellCount:s.prevRowCount,cellSize:typeof s.prevRowHeight=="number"?s.prevRowHeight:null,computeMetadataCallback:function(){return s.rowSizeAndPositionManager.resetCell(0)},computeMetadataCallbackProps:r,nextCellsCount:r.rowCount,nextCellSize:typeof r.rowHeight=="number"?r.rowHeight:null,nextScrollToIndex:r.scrollToRow,scrollToIndex:s.prevScrollToRow,updateScrollOffsetForScrollToIndex:function(){l=e._getScrollTopForScrollToRowStateUpdate(r,i)}}),s.prevColumnCount=r.columnCount,s.prevColumnWidth=r.columnWidth,s.prevIsScrolling=r.isScrolling===!0,s.prevRowCount=r.rowCount,s.prevRowHeight=r.rowHeight,s.prevScrollToColumn=r.scrollToColumn,s.prevScrollToRow=r.scrollToRow,s.scrollbarSize=r.getScrollbarSize(),s.scrollbarSize===void 0?(s.scrollbarSizeMeasured=!1,s.scrollbarSize=0):s.scrollbarSizeMeasured=!0,o.instanceProps=s,Wn(Wn(Wn({},o),a),l)}},{key:"_getEstimatedColumnSize",value:function(r){return typeof r.columnWidth=="number"?r.columnWidth:r.estimatedColumnSize}},{key:"_getEstimatedRowSize",value:function(r){return typeof r.rowHeight=="number"?r.rowHeight:r.estimatedRowSize}},{key:"_getScrollToPositionStateUpdate",value:function(r){var i=r.prevState,o=r.scrollLeft,s=r.scrollTop,a={scrollPositionChangeReason:kv.REQUESTED};return typeof o=="number"&&o>=0&&(a.scrollDirectionHorizontal=o>i.scrollLeft?Fi:If,a.scrollLeft=o),typeof s=="number"&&s>=0&&(a.scrollDirectionVertical=s>i.scrollTop?Fi:If,a.scrollTop=s),typeof o=="number"&&o>=0&&o!==i.scrollLeft||typeof s=="number"&&s>=0&&s!==i.scrollTop?a:{}}},{key:"_wrapSizeGetter",value:function(r){return typeof r=="function"?r:function(){return r}}},{key:"_getCalculatedScrollLeft",value:function(r,i){var o=r.columnCount,s=r.height,a=r.scrollToAlignment,l=r.scrollToColumn,c=r.width,u=i.scrollLeft,d=i.instanceProps;if(o>0){var f=o-1,h=l<0?f:Math.min(f,l),m=d.rowSizeAndPositionManager.getTotalSize(),g=d.scrollbarSizeMeasured&&m>s?d.scrollbarSize:0;return d.columnSizeAndPositionManager.getUpdatedOffsetForIndex({align:a,containerSize:c-g,currentOffset:u,targetIndex:h})}return 0}},{key:"_getScrollLeftForScrollToColumnStateUpdate",value:function(r,i){var o=i.scrollLeft,s=e._getCalculatedScrollLeft(r,i);return typeof s=="number"&&s>=0&&o!==s?e._getScrollToPositionStateUpdate({prevState:i,scrollLeft:s,scrollTop:-1}):{}}},{key:"_getCalculatedScrollTop",value:function(r,i){var o=r.height,s=r.rowCount,a=r.scrollToAlignment,l=r.scrollToRow,c=r.width,u=i.scrollTop,d=i.instanceProps;if(s>0){var f=s-1,h=l<0?f:Math.min(f,l),m=d.columnSizeAndPositionManager.getTotalSize(),g=d.scrollbarSizeMeasured&&m>c?d.scrollbarSize:0;return d.rowSizeAndPositionManager.getUpdatedOffsetForIndex({align:a,containerSize:o-g,currentOffset:u,targetIndex:h})}return 0}},{key:"_getScrollTopForScrollToRowStateUpdate",value:function(r,i){var o=i.scrollTop,s=e._getCalculatedScrollTop(r,i);return typeof s=="number"&&s>=0&&o!==s?e._getScrollToPositionStateUpdate({prevState:i,scrollLeft:-1,scrollTop:s}):{}}}])}(R.PureComponent);j(wo,"defaultProps",{"aria-label":"grid","aria-readonly":!0,autoContainerWidth:!1,autoHeight:!1,autoWidth:!1,cellRangeRenderer:xke,containerRole:"row",containerStyle:{},estimatedColumnSize:100,estimatedRowSize:30,getScrollbarSize:ew,noContentRenderer:Ike,onScroll:function(){},onScrollbarPresenceChange:function(){},onSectionRendered:function(){},overscanColumnCount:0,overscanIndicesGetter:Ske,overscanRowCount:10,role:"grid",scrollingResetTimeInterval:Pke,scrollToAlignment:"auto",scrollToColumn:-1,scrollToRow:-1,style:{},tabIndex:0,isScrollingOptOut:!1});Od(wo);var Oke=1;function XN(n){var e=n.cellCount,t=n.overscanCellsCount,r=n.scrollDirection,i=n.startIndex,o=n.stopIndex;return t=Math.max(1,t),r===Oke?{overscanStartIndex:Math.max(0,i-1),overscanStopIndex:Math.min(e-1,o+t)}:{overscanStartIndex:Math.max(0,i-t),overscanStopIndex:Math.min(e-1,o+1)}}function Rke(n,e,t){return e=ut(e),$n(n,ZN()?Reflect.construct(e,t||[],ut(n).constructor):e.apply(n,t))}function ZN(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ZN=function(){return!!n})()}var JN=function(n){function e(t,r){var i;return Ht(this,e),i=Rke(this,e,[t,r]),i._loadMoreRowsMemoizer=cl(),i._onRowsRendered=i._onRowsRendered.bind(i),i._registerChild=i._registerChild.bind(i),i}return Fn(e,n),Wt(e,[{key:"resetLoadMoreRowsCache",value:function(r){this._loadMoreRowsMemoizer=cl(),r&&this._doStuff(this._lastRenderedStartIndex,this._lastRenderedStopIndex)}},{key:"render",value:function(){var r=this.props.children;return r({onRowsRendered:this._onRowsRendered,registerChild:this._registerChild})}},{key:"_loadUnloadedRanges",value:function(r){var i=this,o=this.props.loadMoreRows;r.forEach(function(s){var a=o(s);a&&a.then(function(){Mke({lastRenderedStartIndex:i._lastRenderedStartIndex,lastRenderedStopIndex:i._lastRenderedStopIndex,startIndex:s.startIndex,stopIndex:s.stopIndex})&&i._registeredChild&&Bke(i._registeredChild,i._lastRenderedStartIndex)})})}},{key:"_onRowsRendered",value:function(r){var i=r.startIndex,o=r.stopIndex;this._lastRenderedStartIndex=i,this._lastRenderedStopIndex=o,this._doStuff(i,o)}},{key:"_doStuff",value:function(r,i){var o,s=this,a=this.props,l=a.isRowLoaded,c=a.minimumBatchSize,u=a.rowCount,d=a.threshold,f=Dke({isRowLoaded:l,minimumBatchSize:c,rowCount:u,startIndex:Math.max(0,r-d),stopIndex:Math.min(u-1,i+d)}),h=(o=[]).concat.apply(o,dF(f.map(function(m){var g=m.startIndex,p=m.stopIndex;return[g,p]})));this._loadMoreRowsMemoizer({callback:function(){s._loadUnloadedRanges(f)},indices:{squashedUnloadedRanges:h}})}},{key:"_registerChild",value:function(r){this._registeredChild=r}}])}(R.PureComponent);j(JN,"defaultProps",{minimumBatchSize:10,rowCount:0,threshold:15});JN.propTypes={};function Mke(n){var e=n.lastRenderedStartIndex,t=n.lastRenderedStopIndex,r=n.startIndex,i=n.stopIndex;return!(r>t||i<e)}function Dke(n){for(var e=n.isRowLoaded,t=n.minimumBatchSize,r=n.rowCount,i=n.startIndex,o=n.stopIndex,s=[],a=null,l=null,c=i;c<=o;c++){var u=e({index:c});u?l!==null&&(s.push({startIndex:a,stopIndex:l}),a=l=null):(l=c,a===null&&(a=c))}if(l!==null){for(var d=Math.min(Math.max(l,a+t-1),r-1),f=l+1;f<=d&&!e({index:f});f++)l=f;s.push({startIndex:a,stopIndex:l})}if(s.length)for(var h=s[0];h.stopIndex-h.startIndex+1<t&&h.startIndex>0;){var m=h.startIndex-1;if(!e({index:m}))h.startIndex=m;else break}return s}function Bke(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=typeof n.recomputeGridSize=="function"?n.recomputeGridSize:n.recomputeRowHeights;t?t.call(n,e):n.forceUpdate()}function Nke(n,e,t){return e=ut(e),$n(n,QN()?Reflect.construct(e,t||[],ut(n).constructor):e.apply(n,t))}function QN(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(QN=function(){return!!n})()}var Lke=function(n){function e(){var t;Ht(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=Nke(this,e,[].concat(i)),j(t,"Grid",void 0),j(t,"_cellRenderer",function(s){var a=s.parent,l=s.rowIndex,c=s.style,u=s.isScrolling,d=s.isVisible,f=s.key,h=t.props.rowRenderer,m=Object.getOwnPropertyDescriptor(c,"width");return m&&m.writable&&(c.width="100%"),h({index:l,style:c,isScrolling:u,isVisible:d,key:f,parent:a})}),j(t,"_setRef",function(s){t.Grid=s}),j(t,"_onScroll",function(s){var a=s.clientHeight,l=s.scrollHeight,c=s.scrollTop,u=t.props.onScroll;u({clientHeight:a,scrollHeight:l,scrollTop:c})}),j(t,"_onSectionRendered",function(s){var a=s.rowOverscanStartIndex,l=s.rowOverscanStopIndex,c=s.rowStartIndex,u=s.rowStopIndex,d=t.props.onRowsRendered;d({overscanStartIndex:a,overscanStopIndex:l,startIndex:c,stopIndex:u})}),t}return Fn(e,n),Wt(e,[{key:"forceUpdateGrid",value:function(){this.Grid&&this.Grid.forceUpdate()}},{key:"getOffsetForRow",value:function(r){var i=r.alignment,o=r.index;if(this.Grid){var s=this.Grid.getOffsetForCell({alignment:i,rowIndex:o,columnIndex:0}),a=s.scrollTop;return a}return 0}},{key:"invalidateCellSizeAfterRender",value:function(r){var i=r.columnIndex,o=r.rowIndex;this.Grid&&this.Grid.invalidateCellSizeAfterRender({rowIndex:o,columnIndex:i})}},{key:"measureAllRows",value:function(){this.Grid&&this.Grid.measureAllCells()}},{key:"recomputeGridSize",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=r.columnIndex,o=i===void 0?0:i,s=r.rowIndex,a=s===void 0?0:s;this.Grid&&this.Grid.recomputeGridSize({rowIndex:a,columnIndex:o})}},{key:"recomputeRowHeights",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.Grid&&this.Grid.recomputeGridSize({rowIndex:r,columnIndex:0})}},{key:"scrollToPosition",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.Grid&&this.Grid.scrollToPosition({scrollTop:r})}},{key:"scrollToRow",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.Grid&&this.Grid.scrollToCell({columnIndex:0,rowIndex:r})}},{key:"render",value:function(){var r=this.props,i=r.className,o=r.noRowsRenderer,s=r.scrollToIndex,a=r.width,l=Kr("ReactVirtualized__List",i);return R.createElement(wo,xe({},this.props,{autoContainerWidth:!0,cellRenderer:this._cellRenderer,className:l,columnWidth:a,columnCount:1,noContentRenderer:o,onScroll:this._onScroll,onSectionRendered:this._onSectionRendered,ref:this._setRef,scrollToRow:s}))}}])}(R.PureComponent);j(Lke,"defaultProps",{autoHeight:!1,estimatedRowSize:30,onScroll:function(){},noRowsRenderer:function(){return null},onRowsRendered:function(){},overscanIndicesGetter:XN,overscanRowCount:10,scrollToAlignment:"auto",scrollToIndex:-1,style:{}});function Fke(n,e,t,r){for(var i=t+1;e<=t;){var o=e+t>>>1,s=n[o];s>=r?(i=o,t=o-1):e=o+1}return i}function $ke(n,e,t,r,i){for(var o=t+1;e<=t;){var s=e+t>>>1,a=n[s];i(a,r)>=0?(o=s,t=s-1):e=s+1}return o}function Vke(n,e,t,r,i){return typeof t=="function"?$ke(n,r===void 0?0:r|0,i===void 0?n.length-1:i|0,e,t):Fke(n,t===void 0?0:t|0,r===void 0?n.length-1:r|0,e)}function zke(n,e,t,r){for(var i=t+1;e<=t;){var o=e+t>>>1,s=n[o];s>r?(i=o,t=o-1):e=o+1}return i}function jke(n,e,t,r,i){for(var o=t+1;e<=t;){var s=e+t>>>1,a=n[s];i(a,r)>0?(o=s,t=s-1):e=s+1}return o}function Wke(n,e,t,r,i){return typeof t=="function"?jke(n,r===void 0?0:r|0,i===void 0?n.length-1:i|0,e,t):zke(n,t===void 0?0:t|0,r===void 0?n.length-1:r|0,e)}function Hke(n,e,t,r){for(var i=e-1;e<=t;){var o=e+t>>>1,s=n[o];s<r?(i=o,e=o+1):t=o-1}return i}function Uke(n,e,t,r,i){for(var o=e-1;e<=t;){var s=e+t>>>1,a=n[s];i(a,r)<0?(o=s,e=s+1):t=s-1}return o}function Gke(n,e,t,r,i){return typeof t=="function"?Uke(n,r===void 0?0:r|0,i===void 0?n.length-1:i|0,e,t):Hke(n,t===void 0?0:t|0,r===void 0?n.length-1:r|0,e)}function qke(n,e,t,r){for(var i=e-1;e<=t;){var o=e+t>>>1,s=n[o];s<=r?(i=o,e=o+1):t=o-1}return i}function Kke(n,e,t,r,i){for(var o=e-1;e<=t;){var s=e+t>>>1,a=n[s];i(a,r)<=0?(o=s,e=s+1):t=s-1}return o}function Yke(n,e,t,r,i){return typeof t=="function"?Kke(n,r===void 0?0:r|0,i===void 0?n.length-1:i|0,e,t):qke(n,t===void 0?0:t|0,r===void 0?n.length-1:r|0,e)}function Xke(n,e,t,r){for(;e<=t;){var i=e+t>>>1,o=n[i];if(o===r)return i;o<=r?e=i+1:t=i-1}return-1}function Zke(n,e,t,r,i){for(;e<=t;){var o=e+t>>>1,s=n[o],a=i(s,r);if(a===0)return o;a<=0?e=o+1:t=o-1}return-1}function Jke(n,e,t,r,i){return typeof t=="function"?Zke(n,r===void 0?0:r|0,i===void 0?n.length-1:i|0,e,t):Xke(n,t===void 0?0:t|0,r===void 0?n.length-1:r|0,e)}const _m={ge:Vke,gt:Wke,lt:Gke,le:Yke,eq:Jke};var ba=0,ns=1,Vf=2;function L_(n,e,t,r,i){this.mid=n,this.left=e,this.right=t,this.leftPoints=r,this.rightPoints=i,this.count=(e?e.count:0)+(t?t.count:0)+r.length}var Rd=L_.prototype;function Pv(n,e){n.mid=e.mid,n.left=e.left,n.right=e.right,n.leftPoints=e.leftPoints,n.rightPoints=e.rightPoints,n.count=e.count}function eL(n,e){var t=qu(e);n.mid=t.mid,n.left=t.left,n.right=t.right,n.leftPoints=t.leftPoints,n.rightPoints=t.rightPoints,n.count=t.count}function MP(n,e){var t=n.intervals([]);t.push(e),eL(n,t)}function DP(n,e){var t=n.intervals([]),r=t.indexOf(e);return r<0?ba:(t.splice(r,1),eL(n,t),ns)}Rd.intervals=function(n){return n.push.apply(n,this.leftPoints),this.left&&this.left.intervals(n),this.right&&this.right.intervals(n),n};Rd.insert=function(n){var e=this.count-this.leftPoints.length;if(this.count+=1,n[1]<this.mid)this.left?4*(this.left.count+1)>3*(e+1)?MP(this,n):this.left.insert(n):this.left=qu([n]);else if(n[0]>this.mid)this.right?4*(this.right.count+1)>3*(e+1)?MP(this,n):this.right.insert(n):this.right=qu([n]);else{var t=_m.ge(this.leftPoints,n,F_),r=_m.ge(this.rightPoints,n,$_);this.leftPoints.splice(t,0,n),this.rightPoints.splice(r,0,n)}};Rd.remove=function(n){var e=this.count-this.leftPoints;if(n[1]<this.mid){if(!this.left)return ba;var t=this.right?this.right.count:0;if(4*t>3*(e-1))return DP(this,n);var r=this.left.remove(n);return r===Vf?(this.left=null,this.count-=1,ns):(r===ns&&(this.count-=1),r)}else if(n[0]>this.mid){if(!this.right)return ba;var i=this.left?this.left.count:0;if(4*i>3*(e-1))return DP(this,n);var r=this.right.remove(n);return r===Vf?(this.right=null,this.count-=1,ns):(r===ns&&(this.count-=1),r)}else{if(this.count===1)return this.leftPoints[0]===n?Vf:ba;if(this.leftPoints.length===1&&this.leftPoints[0]===n){if(this.left&&this.right){for(var o=this,s=this.left;s.right;)o=s,s=s.right;if(o===this)s.right=this.right;else{var a=this.left,r=this.right;o.count-=s.count,o.right=s.left,s.left=a,s.right=r}Pv(this,s),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?Pv(this,this.left):Pv(this,this.right);return ns}for(var a=_m.ge(this.leftPoints,n,F_);a<this.leftPoints.length&&this.leftPoints[a][0]===n[0];++a)if(this.leftPoints[a]===n){this.count-=1,this.leftPoints.splice(a,1);for(var r=_m.ge(this.rightPoints,n,$_);r<this.rightPoints.length&&this.rightPoints[r][1]===n[1];++r)if(this.rightPoints[r]===n)return this.rightPoints.splice(r,1),ns}return ba}};function tL(n,e,t){for(var r=0;r<n.length&&n[r][0]<=e;++r){var i=t(n[r]);if(i)return i}}function nL(n,e,t){for(var r=n.length-1;r>=0&&n[r][1]>=e;--r){var i=t(n[r]);if(i)return i}}function rL(n,e){for(var t=0;t<n.length;++t){var r=e(n[t]);if(r)return r}}Rd.queryPoint=function(n,e){if(n<this.mid){if(this.left){var t=this.left.queryPoint(n,e);if(t)return t}return tL(this.leftPoints,n,e)}else if(n>this.mid){if(this.right){var t=this.right.queryPoint(n,e);if(t)return t}return nL(this.rightPoints,n,e)}else return rL(this.leftPoints,e)};Rd.queryInterval=function(n,e,t){if(n<this.mid&&this.left){var r=this.left.queryInterval(n,e,t);if(r)return r}if(e>this.mid&&this.right){var r=this.right.queryInterval(n,e,t);if(r)return r}return e<this.mid?tL(this.leftPoints,e,t):n>this.mid?nL(this.rightPoints,n,t):rL(this.leftPoints,t)};function Qke(n,e){return n-e}function F_(n,e){var t=n[0]-e[0];return t||n[1]-e[1]}function $_(n,e){var t=n[1]-e[1];return t||n[0]-e[0]}function qu(n){if(n.length===0)return null;for(var e=[],t=0;t<n.length;++t)e.push(n[t][0],n[t][1]);e.sort(Qke);for(var r=e[e.length>>1],i=[],o=[],s=[],t=0;t<n.length;++t){var a=n[t];a[1]<r?i.push(a):r<a[0]?o.push(a):s.push(a)}var l=s,c=s.slice();return l.sort(F_),c.sort($_),new L_(r,qu(i),qu(o),l,c)}function iL(n){this.root=n}var Ml=iL.prototype;Ml.insert=function(n){this.root?this.root.insert(n):this.root=new L_(n[0],null,null,[n],[n])};Ml.remove=function(n){if(this.root){var e=this.root.remove(n);return e===Vf&&(this.root=null),e!==ba}return!1};Ml.queryPoint=function(n,e){if(this.root)return this.root.queryPoint(n,e)};Ml.queryInterval=function(n,e,t){if(n<=e&&this.root)return this.root.queryInterval(n,e,t)};Object.defineProperty(Ml,"count",{get:function(){return this.root?this.root.count:0}});Object.defineProperty(Ml,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}});function ePe(n){return new iL(null)}var Iv=function(){function n(){Ht(this,n),j(this,"_columnSizeMap",{}),j(this,"_intervalTree",ePe()),j(this,"_leftMap",{})}return Wt(n,[{key:"estimateTotalHeight",value:function(t,r,i){var o=t-this.count;return this.tallestColumnSize+Math.ceil(o/r)*i}},{key:"range",value:function(t,r,i){var o=this;this._intervalTree.queryInterval(t,t+r,function(s){var a=fF(s,3),l=a[0];a[1];var c=a[2];return i(c,o._leftMap[c],l)})}},{key:"setPosition",value:function(t,r,i,o){this._intervalTree.insert([i,i+o,t]),this._leftMap[t]=r;var s=this._columnSizeMap,a=s[r];a===void 0?s[r]=i+o:s[r]=Math.max(a,i+o)}},{key:"count",get:function(){return this._intervalTree.count}},{key:"shortestColumnSize",get:function(){var t=this._columnSizeMap,r=0;for(var i in t){var o=t[i];r=r===0?o:Math.min(r,o)}return r}},{key:"tallestColumnSize",get:function(){var t=this._columnSizeMap,r=0;for(var i in t){var o=t[i];r=Math.max(r,o)}return r}}])}();function BP(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function tPe(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?BP(Object(t),!0).forEach(function(r){j(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):BP(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function nPe(n,e,t){return e=ut(e),$n(n,oL()?Reflect.construct(e,t||[],ut(n).constructor):e.apply(n,t))}function oL(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(oL=function(){return!!n})()}var rPe={},iPe=150,sL=function(n){function e(){var t;Ht(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=nPe(this,e,[].concat(i)),j(t,"state",{isScrolling:!1,scrollTop:0}),j(t,"_debounceResetIsScrollingId",void 0),j(t,"_invalidateOnUpdateStartIndex",null),j(t,"_invalidateOnUpdateStopIndex",null),j(t,"_positionCache",new Iv),j(t,"_startIndex",null),j(t,"_startIndexMemoized",null),j(t,"_stopIndex",null),j(t,"_stopIndexMemoized",null),j(t,"_debounceResetIsScrollingCallback",function(){t.setState({isScrolling:!1})}),j(t,"_setScrollingContainerRef",function(s){t._scrollingContainer=s}),j(t,"_onScroll",function(s){var a=t.props.height,l=s.currentTarget.scrollTop,c=Math.min(Math.max(0,t._getEstimatedTotalHeight()-a),l);l===c&&(t._debounceResetIsScrolling(),t.state.scrollTop!==c&&t.setState({isScrolling:!0,scrollTop:c}))}),t}return Fn(e,n),Wt(e,[{key:"clearCellPositions",value:function(){this._positionCache=new Iv,this.forceUpdate()}},{key:"invalidateCellSizeAfterRender",value:function(r){var i=r.rowIndex;this._invalidateOnUpdateStartIndex===null?(this._invalidateOnUpdateStartIndex=i,this._invalidateOnUpdateStopIndex=i):(this._invalidateOnUpdateStartIndex=Math.min(this._invalidateOnUpdateStartIndex,i),this._invalidateOnUpdateStopIndex=Math.max(this._invalidateOnUpdateStopIndex,i))}},{key:"recomputeCellPositions",value:function(){var r=this._positionCache.count-1;this._positionCache=new Iv,this._populatePositionCache(0,r),this.forceUpdate()}},{key:"componentDidMount",value:function(){this._checkInvalidateOnUpdate(),this._invokeOnScrollCallback(),this._invokeOnCellsRenderedCallback()}},{key:"componentDidUpdate",value:function(r,i){this._checkInvalidateOnUpdate(),this._invokeOnScrollCallback(),this._invokeOnCellsRenderedCallback(),this.props.scrollTop!==r.scrollTop&&this._debounceResetIsScrolling()}},{key:"componentWillUnmount",value:function(){this._debounceResetIsScrollingId&&ul(this._debounceResetIsScrollingId)}},{key:"render",value:function(){var r=this,i=this.props,o=i.autoHeight,s=i.cellCount,a=i.cellMeasurerCache,l=i.cellRenderer,c=i.className,u=i.height,d=i.id,f=i.keyMapper,h=i.overscanByPixels,m=i.role,g=i.style,p=i.tabIndex,b=i.width,y=i.rowDirection,C=this.state,A=C.isScrolling,w=C.scrollTop,S=[],_=this._getEstimatedTotalHeight(),v=this._positionCache.shortestColumnSize,x=this._positionCache.count,T=0,E;if(this._positionCache.range(Math.max(0,w-h),u+h*2,function(B,D,F){typeof E>"u"?(T=B,E=B):(T=Math.min(T,B),E=Math.max(E,B)),S.push(l({index:B,isScrolling:A,key:f(B),parent:r,style:j(j(j(j({height:a.getHeight(B)},y==="ltr"?"left":"right",D),"position","absolute"),"top",F),"width",a.getWidth(B))}))}),v<w+u+h&&x<s)for(var k=Math.min(s-x,Math.ceil((w+u+h-v)/a.defaultHeight*b/a.defaultWidth)),I=x;I<x+k;I++)E=I,S.push(l({index:I,isScrolling:A,key:f(I),parent:this,style:{width:a.getWidth(I)}}));return this._startIndex=T,this._stopIndex=E,R.createElement("div",{ref:this._setScrollingContainerRef,"aria-label":this.props["aria-label"],className:Kr("ReactVirtualized__Masonry",c),id:d,onScroll:this._onScroll,role:m,style:tPe({boxSizing:"border-box",direction:"ltr",height:o?"auto":u,overflowX:"hidden",overflowY:_<u?"hidden":"auto",position:"relative",width:b,WebkitOverflowScrolling:"touch",willChange:"transform"},g),tabIndex:p},R.createElement("div",{className:"ReactVirtualized__Masonry__innerScrollContainer",style:{width:"100%",height:_,maxWidth:"100%",maxHeight:_,overflow:"hidden",pointerEvents:A?"none":"",position:"relative"}},S))}},{key:"_checkInvalidateOnUpdate",value:function(){if(typeof this._invalidateOnUpdateStartIndex=="number"){var r=this._invalidateOnUpdateStartIndex,i=this._invalidateOnUpdateStopIndex;this._invalidateOnUpdateStartIndex=null,this._invalidateOnUpdateStopIndex=null,this._populatePositionCache(r,i),this.forceUpdate()}}},{key:"_debounceResetIsScrolling",value:function(){var r=this.props.scrollingResetTimeInterval;this._debounceResetIsScrollingId&&ul(this._debounceResetIsScrollingId),this._debounceResetIsScrollingId=N_(this._debounceResetIsScrollingCallback,r)}},{key:"_getEstimatedTotalHeight",value:function(){var r=this.props,i=r.cellCount,o=r.cellMeasurerCache,s=r.width,a=Math.max(1,Math.floor(s/o.defaultWidth));return this._positionCache.estimateTotalHeight(i,a,o.defaultHeight)}},{key:"_invokeOnScrollCallback",value:function(){var r=this.props,i=r.height,o=r.onScroll,s=this.state.scrollTop;this._onScrollMemoized!==s&&(o({clientHeight:i,scrollHeight:this._getEstimatedTotalHeight(),scrollTop:s}),this._onScrollMemoized=s)}},{key:"_invokeOnCellsRenderedCallback",value:function(){if(this._startIndexMemoized!==this._startIndex||this._stopIndexMemoized!==this._stopIndex){var r=this.props.onCellsRendered;r({startIndex:this._startIndex,stopIndex:this._stopIndex}),this._startIndexMemoized=this._startIndex,this._stopIndexMemoized=this._stopIndex}}},{key:"_populatePositionCache",value:function(r,i){for(var o=this.props,s=o.cellMeasurerCache,a=o.cellPositioner,l=r;l<=i;l++){var c=a(l),u=c.left,d=c.top;this._positionCache.setPosition(l,u,d,s.getHeight(l))}}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.scrollTop!==void 0&&i.scrollTop!==r.scrollTop?{isScrolling:!0,scrollTop:r.scrollTop}:null}}])}(R.PureComponent);j(sL,"defaultProps",{autoHeight:!1,keyMapper:oPe,onCellsRendered:NP,onScroll:NP,overscanByPixels:20,role:"grid",scrollingResetTimeInterval:iPe,style:rPe,tabIndex:0,rowDirection:"ltr"});function oPe(n){return n}function NP(){}Od(sL);var Ov=function(){function n(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ht(this,n),j(this,"_cellMeasurerCache",void 0),j(this,"_columnIndexOffset",void 0),j(this,"_rowIndexOffset",void 0),j(this,"columnWidth",function(l){var c=l.index;e._cellMeasurerCache.columnWidth({index:c+e._columnIndexOffset})}),j(this,"rowHeight",function(l){var c=l.index;e._cellMeasurerCache.rowHeight({index:c+e._rowIndexOffset})});var r=t.cellMeasurerCache,i=t.columnIndexOffset,o=i===void 0?0:i,s=t.rowIndexOffset,a=s===void 0?0:s;this._cellMeasurerCache=r,this._columnIndexOffset=o,this._rowIndexOffset=a}return Wt(n,[{key:"clear",value:function(t,r){this._cellMeasurerCache.clear(t+this._rowIndexOffset,r+this._columnIndexOffset)}},{key:"clearAll",value:function(){this._cellMeasurerCache.clearAll()}},{key:"defaultHeight",get:function(){return this._cellMeasurerCache.defaultHeight}},{key:"defaultWidth",get:function(){return this._cellMeasurerCache.defaultWidth}},{key:"hasFixedHeight",value:function(){return this._cellMeasurerCache.hasFixedHeight()}},{key:"hasFixedWidth",value:function(){return this._cellMeasurerCache.hasFixedWidth()}},{key:"getHeight",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return this._cellMeasurerCache.getHeight(t+this._rowIndexOffset,r+this._columnIndexOffset)}},{key:"getWidth",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return this._cellMeasurerCache.getWidth(t+this._rowIndexOffset,r+this._columnIndexOffset)}},{key:"has",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return this._cellMeasurerCache.has(t+this._rowIndexOffset,r+this._columnIndexOffset)}},{key:"set",value:function(t,r,i,o){this._cellMeasurerCache.set(t+this._rowIndexOffset,r+this._columnIndexOffset,i,o)}}])}(),sPe=["rowIndex"],aPe=["columnIndex","rowIndex"],lPe=["columnIndex"],cPe=["onScroll","onSectionRendered","onScrollbarPresenceChange","scrollLeft","scrollToColumn","scrollTop","scrollToRow"];function LP(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function vt(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?LP(Object(t),!0).forEach(function(r){j(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):LP(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function uPe(n,e,t){return e=ut(e),$n(n,aL()?Reflect.construct(e,t||[],ut(n).constructor):e.apply(n,t))}function aL(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(aL=function(){return!!n})()}var FP=20,V_=function(n){function e(t,r){var i;Ht(this,e),i=uPe(this,e,[t,r]),j(i,"state",{scrollLeft:0,scrollTop:0,scrollbarSize:0,showHorizontalScrollbar:!1,showVerticalScrollbar:!1}),j(i,"_deferredInvalidateColumnIndex",null),j(i,"_deferredInvalidateRowIndex",null),j(i,"_bottomLeftGridRef",function(l){i._bottomLeftGrid=l}),j(i,"_bottomRightGridRef",function(l){i._bottomRightGrid=l}),j(i,"_cellRendererBottomLeftGrid",function(l){var c=l.rowIndex,u=mc(l,sPe),d=i.props,f=d.cellRenderer,h=d.fixedRowCount,m=d.rowCount;return c===m-h?R.createElement("div",{key:u.key,style:vt(vt({},u.style),{},{height:FP})}):f(vt(vt({},u),{},{parent:i,rowIndex:c+h}))}),j(i,"_cellRendererBottomRightGrid",function(l){var c=l.columnIndex,u=l.rowIndex,d=mc(l,aPe),f=i.props,h=f.cellRenderer,m=f.fixedColumnCount,g=f.fixedRowCount;return h(vt(vt({},d),{},{columnIndex:c+m,parent:i,rowIndex:u+g}))}),j(i,"_cellRendererTopRightGrid",function(l){var c=l.columnIndex,u=mc(l,lPe),d=i.props,f=d.cellRenderer,h=d.columnCount,m=d.fixedColumnCount;return c===h-m?R.createElement("div",{key:u.key,style:vt(vt({},u.style),{},{width:FP})}):f(vt(vt({},u),{},{columnIndex:c+m,parent:i}))}),j(i,"_columnWidthRightGrid",function(l){var c=l.index,u=i.props,d=u.columnCount,f=u.fixedColumnCount,h=u.columnWidth,m=i.state,g=m.scrollbarSize,p=m.showHorizontalScrollbar;return p&&c===d-f?g:typeof h=="function"?h({index:c+f}):h}),j(i,"_onScroll",function(l){var c=l.scrollLeft,u=l.scrollTop;i.setState({scrollLeft:c,scrollTop:u});var d=i.props.onScroll;d&&d(l)}),j(i,"_onScrollbarPresenceChange",function(l){var c=l.horizontal,u=l.size,d=l.vertical,f=i.state,h=f.showHorizontalScrollbar,m=f.showVerticalScrollbar;if(c!==h||d!==m){i.setState({scrollbarSize:u,showHorizontalScrollbar:c,showVerticalScrollbar:d});var g=i.props.onScrollbarPresenceChange;typeof g=="function"&&g({horizontal:c,size:u,vertical:d})}}),j(i,"_onScrollLeft",function(l){var c=l.scrollLeft;i._onScroll({scrollLeft:c,scrollTop:i.state.scrollTop})}),j(i,"_onScrollTop",function(l){var c=l.scrollTop;i._onScroll({scrollTop:c,scrollLeft:i.state.scrollLeft})}),j(i,"_rowHeightBottomGrid",function(l){var c=l.index,u=i.props,d=u.fixedRowCount,f=u.rowCount,h=u.rowHeight,m=i.state,g=m.scrollbarSize,p=m.showVerticalScrollbar;return p&&c===f-d?g:typeof h=="function"?h({index:c+d}):h}),j(i,"_topLeftGridRef",function(l){i._topLeftGrid=l}),j(i,"_topRightGridRef",function(l){i._topRightGrid=l});var o=t.deferredMeasurementCache,s=t.fixedColumnCount,a=t.fixedRowCount;return i._maybeCalculateCachedStyles(!0),o&&(i._deferredMeasurementCacheBottomLeftGrid=a>0?new Ov({cellMeasurerCache:o,columnIndexOffset:0,rowIndexOffset:a}):o,i._deferredMeasurementCacheBottomRightGrid=s>0||a>0?new Ov({cellMeasurerCache:o,columnIndexOffset:s,rowIndexOffset:a}):o,i._deferredMeasurementCacheTopRightGrid=s>0?new Ov({cellMeasurerCache:o,columnIndexOffset:s,rowIndexOffset:0}):o),i}return Fn(e,n),Wt(e,[{key:"forceUpdateGrids",value:function(){this._bottomLeftGrid&&this._bottomLeftGrid.forceUpdate(),this._bottomRightGrid&&this._bottomRightGrid.forceUpdate(),this._topLeftGrid&&this._topLeftGrid.forceUpdate(),this._topRightGrid&&this._topRightGrid.forceUpdate()}},{key:"invalidateCellSizeAfterRender",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=r.columnIndex,o=i===void 0?0:i,s=r.rowIndex,a=s===void 0?0:s;this._deferredInvalidateColumnIndex=typeof this._deferredInvalidateColumnIndex=="number"?Math.min(this._deferredInvalidateColumnIndex,o):o,this._deferredInvalidateRowIndex=typeof this._deferredInvalidateRowIndex=="number"?Math.min(this._deferredInvalidateRowIndex,a):a}},{key:"measureAllCells",value:function(){this._bottomLeftGrid&&this._bottomLeftGrid.measureAllCells(),this._bottomRightGrid&&this._bottomRightGrid.measureAllCells(),this._topLeftGrid&&this._topLeftGrid.measureAllCells(),this._topRightGrid&&this._topRightGrid.measureAllCells()}},{key:"recomputeGridSize",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=r.columnIndex,o=i===void 0?0:i,s=r.rowIndex,a=s===void 0?0:s,l=this.props,c=l.fixedColumnCount,u=l.fixedRowCount,d=Math.max(0,o-c),f=Math.max(0,a-u);this._bottomLeftGrid&&this._bottomLeftGrid.recomputeGridSize({columnIndex:o,rowIndex:f}),this._bottomRightGrid&&this._bottomRightGrid.recomputeGridSize({columnIndex:d,rowIndex:f}),this._topLeftGrid&&this._topLeftGrid.recomputeGridSize({columnIndex:o,rowIndex:a}),this._topRightGrid&&this._topRightGrid.recomputeGridSize({columnIndex:d,rowIndex:a}),this._leftGridWidth=null,this._topGridHeight=null,this._maybeCalculateCachedStyles(!0)}},{key:"componentDidMount",value:function(){var r=this.props,i=r.scrollLeft,o=r.scrollTop;if(i>0||o>0){var s={};i>0&&(s.scrollLeft=i),o>0&&(s.scrollTop=o),this.setState(s)}this._handleInvalidatedGridSize()}},{key:"componentDidUpdate",value:function(){this._handleInvalidatedGridSize()}},{key:"render",value:function(){var r=this.props,i=r.onScroll,o=r.onSectionRendered;r.onScrollbarPresenceChange,r.scrollLeft;var s=r.scrollToColumn;r.scrollTop;var a=r.scrollToRow,l=mc(r,cPe);if(this._prepareForRender(),this.props.width===0||this.props.height===0)return null;var c=this.state,u=c.scrollLeft,d=c.scrollTop;return R.createElement("div",{style:this._containerOuterStyle},R.createElement("div",{style:this._containerTopStyle},this._renderTopLeftGrid(l),this._renderTopRightGrid(vt(vt({},l),{},{onScroll:i,scrollLeft:u}))),R.createElement("div",{style:this._containerBottomStyle},this._renderBottomLeftGrid(vt(vt({},l),{},{onScroll:i,scrollTop:d})),this._renderBottomRightGrid(vt(vt({},l),{},{onScroll:i,onSectionRendered:o,scrollLeft:u,scrollToColumn:s,scrollToRow:a,scrollTop:d}))))}},{key:"_getBottomGridHeight",value:function(r){var i=r.height,o=this._getTopGridHeight(r);return i-o}},{key:"_getLeftGridWidth",value:function(r){var i=r.fixedColumnCount,o=r.columnWidth;if(this._leftGridWidth==null)if(typeof o=="function"){for(var s=0,a=0;a<i;a++)s+=o({index:a});this._leftGridWidth=s}else this._leftGridWidth=o*i;return this._leftGridWidth}},{key:"_getRightGridWidth",value:function(r){var i=r.width,o=this._getLeftGridWidth(r);return i-o}},{key:"_getTopGridHeight",value:function(r){var i=r.fixedRowCount,o=r.rowHeight;if(this._topGridHeight==null)if(typeof o=="function"){for(var s=0,a=0;a<i;a++)s+=o({index:a});this._topGridHeight=s}else this._topGridHeight=o*i;return this._topGridHeight}},{key:"_handleInvalidatedGridSize",value:function(){if(typeof this._deferredInvalidateColumnIndex=="number"){var r=this._deferredInvalidateColumnIndex,i=this._deferredInvalidateRowIndex;this._deferredInvalidateColumnIndex=null,this._deferredInvalidateRowIndex=null,this.recomputeGridSize({columnIndex:r,rowIndex:i}),this.forceUpdate()}}},{key:"_maybeCalculateCachedStyles",value:function(r){var i=this.props,o=i.columnWidth,s=i.enableFixedColumnScroll,a=i.enableFixedRowScroll,l=i.height,c=i.fixedColumnCount,u=i.fixedRowCount,d=i.rowHeight,f=i.style,h=i.styleBottomLeftGrid,m=i.styleBottomRightGrid,g=i.styleTopLeftGrid,p=i.styleTopRightGrid,b=i.width,y=r||l!==this._lastRenderedHeight||b!==this._lastRenderedWidth,C=r||o!==this._lastRenderedColumnWidth||c!==this._lastRenderedFixedColumnCount,A=r||u!==this._lastRenderedFixedRowCount||d!==this._lastRenderedRowHeight;(r||y||f!==this._lastRenderedStyle)&&(this._containerOuterStyle=vt({height:l,overflow:"visible",width:b},f)),(r||y||A)&&(this._containerTopStyle={height:this._getTopGridHeight(this.props),position:"relative",width:b},this._containerBottomStyle={height:l-this._getTopGridHeight(this.props),overflow:"visible",position:"relative",width:b}),(r||h!==this._lastRenderedStyleBottomLeftGrid)&&(this._bottomLeftGridStyle=vt({left:0,overflowX:"hidden",overflowY:s?"auto":"hidden",position:"absolute"},h)),(r||C||m!==this._lastRenderedStyleBottomRightGrid)&&(this._bottomRightGridStyle=vt({left:this._getLeftGridWidth(this.props),position:"absolute"},m)),(r||g!==this._lastRenderedStyleTopLeftGrid)&&(this._topLeftGridStyle=vt({left:0,overflowX:"hidden",overflowY:"hidden",position:"absolute",top:0},g)),(r||C||p!==this._lastRenderedStyleTopRightGrid)&&(this._topRightGridStyle=vt({left:this._getLeftGridWidth(this.props),overflowX:a?"auto":"hidden",overflowY:"hidden",position:"absolute",top:0},p)),this._lastRenderedColumnWidth=o,this._lastRenderedFixedColumnCount=c,this._lastRenderedFixedRowCount=u,this._lastRenderedHeight=l,this._lastRenderedRowHeight=d,this._lastRenderedStyle=f,this._lastRenderedStyleBottomLeftGrid=h,this._lastRenderedStyleBottomRightGrid=m,this._lastRenderedStyleTopLeftGrid=g,this._lastRenderedStyleTopRightGrid=p,this._lastRenderedWidth=b}},{key:"_prepareForRender",value:function(){(this._lastRenderedColumnWidth!==this.props.columnWidth||this._lastRenderedFixedColumnCount!==this.props.fixedColumnCount)&&(this._leftGridWidth=null),(this._lastRenderedFixedRowCount!==this.props.fixedRowCount||this._lastRenderedRowHeight!==this.props.rowHeight)&&(this._topGridHeight=null),this._maybeCalculateCachedStyles(),this._lastRenderedColumnWidth=this.props.columnWidth,this._lastRenderedFixedColumnCount=this.props.fixedColumnCount,this._lastRenderedFixedRowCount=this.props.fixedRowCount,this._lastRenderedRowHeight=this.props.rowHeight}},{key:"_renderBottomLeftGrid",value:function(r){var i=r.enableFixedColumnScroll,o=r.fixedColumnCount,s=r.fixedRowCount,a=r.rowCount,l=r.hideBottomLeftGridScrollbar,c=this.state.showVerticalScrollbar;if(!o)return null;var u=c?1:0,d=this._getBottomGridHeight(r),f=this._getLeftGridWidth(r),h=this.state.showVerticalScrollbar?this.state.scrollbarSize:0,m=l?f+h:f,g=R.createElement(wo,xe({},r,{cellRenderer:this._cellRendererBottomLeftGrid,className:this.props.classNameBottomLeftGrid,columnCount:o,deferredMeasurementCache:this._deferredMeasurementCacheBottomLeftGrid,height:d,onScroll:i?this._onScrollTop:void 0,ref:this._bottomLeftGridRef,rowCount:Math.max(0,a-s)+u,rowHeight:this._rowHeightBottomGrid,style:this._bottomLeftGridStyle,tabIndex:null,width:m}));return l?R.createElement("div",{className:"BottomLeftGrid_ScrollWrapper",style:vt(vt({},this._bottomLeftGridStyle),{},{height:d,width:f,overflowY:"hidden"})},g):g}},{key:"_renderBottomRightGrid",value:function(r){var i=r.columnCount,o=r.fixedColumnCount,s=r.fixedRowCount,a=r.rowCount,l=r.scrollToColumn,c=r.scrollToRow;return R.createElement(wo,xe({},r,{cellRenderer:this._cellRendererBottomRightGrid,className:this.props.classNameBottomRightGrid,columnCount:Math.max(0,i-o),columnWidth:this._columnWidthRightGrid,deferredMeasurementCache:this._deferredMeasurementCacheBottomRightGrid,height:this._getBottomGridHeight(r),onScroll:this._onScroll,onScrollbarPresenceChange:this._onScrollbarPresenceChange,ref:this._bottomRightGridRef,rowCount:Math.max(0,a-s),rowHeight:this._rowHeightBottomGrid,scrollToColumn:l-o,scrollToRow:c-s,style:this._bottomRightGridStyle,width:this._getRightGridWidth(r)}))}},{key:"_renderTopLeftGrid",value:function(r){var i=r.fixedColumnCount,o=r.fixedRowCount;return!i||!o?null:R.createElement(wo,xe({},r,{className:this.props.classNameTopLeftGrid,columnCount:i,height:this._getTopGridHeight(r),ref:this._topLeftGridRef,rowCount:o,style:this._topLeftGridStyle,tabIndex:null,width:this._getLeftGridWidth(r)}))}},{key:"_renderTopRightGrid",value:function(r){var i=r.columnCount,o=r.enableFixedRowScroll,s=r.fixedColumnCount,a=r.fixedRowCount,l=r.scrollLeft,c=r.hideTopRightGridScrollbar,u=this.state,d=u.showHorizontalScrollbar,f=u.scrollbarSize;if(!a)return null;var h=d?1:0,m=this._getTopGridHeight(r),g=this._getRightGridWidth(r),p=d?f:0,b=m,y=this._topRightGridStyle;c&&(b=m+p,y=vt(vt({},this._topRightGridStyle),{},{left:0}));var C=R.createElement(wo,xe({},r,{cellRenderer:this._cellRendererTopRightGrid,className:this.props.classNameTopRightGrid,columnCount:Math.max(0,i-s)+h,columnWidth:this._columnWidthRightGrid,deferredMeasurementCache:this._deferredMeasurementCacheTopRightGrid,height:b,onScroll:o?this._onScrollLeft:void 0,ref:this._topRightGridRef,rowCount:a,scrollLeft:l,style:y,tabIndex:null,width:g}));return c?R.createElement("div",{className:"TopRightGrid_ScrollWrapper",style:vt(vt({},this._topRightGridStyle),{},{height:m,width:g,overflowX:"hidden"})},C):C}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.scrollLeft!==i.scrollLeft||r.scrollTop!==i.scrollTop?{scrollLeft:r.scrollLeft!=null&&r.scrollLeft>=0?r.scrollLeft:i.scrollLeft,scrollTop:r.scrollTop!=null&&r.scrollTop>=0?r.scrollTop:i.scrollTop}:null}}])}(R.PureComponent);j(V_,"defaultProps",{classNameBottomLeftGrid:"",classNameBottomRightGrid:"",classNameTopLeftGrid:"",classNameTopRightGrid:"",enableFixedColumnScroll:!1,enableFixedRowScroll:!1,fixedColumnCount:0,fixedRowCount:0,scrollToColumn:-1,scrollToRow:-1,style:{},styleBottomLeftGrid:{},styleBottomRightGrid:{},styleTopLeftGrid:{},styleTopRightGrid:{},hideTopRightGridScrollbar:!1,hideBottomLeftGridScrollbar:!1});V_.propTypes={};Od(V_);function dPe(n,e,t){return e=ut(e),$n(n,lL()?Reflect.construct(e,t||[],ut(n).constructor):e.apply(n,t))}function lL(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(lL=function(){return!!n})()}var fPe=function(n){function e(t,r){var i;return Ht(this,e),i=dPe(this,e,[t,r]),i.state={clientHeight:0,clientWidth:0,scrollHeight:0,scrollLeft:0,scrollTop:0,scrollWidth:0},i._onScroll=i._onScroll.bind(i),i}return Fn(e,n),Wt(e,[{key:"render",value:function(){var r=this.props.children,i=this.state,o=i.clientHeight,s=i.clientWidth,a=i.scrollHeight,l=i.scrollLeft,c=i.scrollTop,u=i.scrollWidth;return r({clientHeight:o,clientWidth:s,onScroll:this._onScroll,scrollHeight:a,scrollLeft:l,scrollTop:c,scrollWidth:u})}},{key:"_onScroll",value:function(r){var i=r.clientHeight,o=r.clientWidth,s=r.scrollHeight,a=r.scrollLeft,l=r.scrollTop,c=r.scrollWidth;this.setState({clientHeight:i,clientWidth:o,scrollHeight:s,scrollLeft:a,scrollTop:l,scrollWidth:c})}}])}(R.PureComponent);fPe.propTypes={};function hPe(n){var e=n.dataKey,t=n.rowData;return typeof t.get=="function"?t.get(e):t[e]}function mPe(n){var e=n.cellData;return e==null?"":String(e)}function gPe(n){var e=n.className,t=n.columns,r=n.style;return R.createElement("div",{className:e,role:"row",style:r},t)}var _o={ASC:"ASC",DESC:"DESC"};function cL(n){var e=n.sortDirection,t=Kr("ReactVirtualized__Table__sortableHeaderIcon",{"ReactVirtualized__Table__sortableHeaderIcon--ASC":e===_o.ASC,"ReactVirtualized__Table__sortableHeaderIcon--DESC":e===_o.DESC});return R.createElement("svg",{className:t,width:18,height:18,viewBox:"0 0 24 24"},e===_o.ASC?R.createElement("path",{d:"M7 14l5-5 5 5z"}):R.createElement("path",{d:"M7 10l5 5 5-5z"}),R.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}))}cL.propTypes={};function pPe(n){var e=n.dataKey,t=n.label,r=n.sortBy,i=n.sortDirection,o=r===e,s=[R.createElement("span",{className:"ReactVirtualized__Table__headerTruncatedText",key:"label",title:typeof t=="string"?t:null},t)];return o&&s.push(R.createElement(cL,{key:"SortIndicator",sortDirection:i})),s}function vPe(n){var e=n.className,t=n.columns,r=n.index,i=n.key,o=n.onRowClick,s=n.onRowDoubleClick,a=n.onRowMouseOut,l=n.onRowMouseOver,c=n.onRowRightClick,u=n.rowData,d=n.style,f={"aria-rowindex":r+1};return(o||s||a||l||c)&&(f["aria-label"]="row",f.tabIndex=0,o&&(f.onClick=function(h){return o({event:h,index:r,rowData:u})}),s&&(f.onDoubleClick=function(h){return s({event:h,index:r,rowData:u})}),a&&(f.onMouseOut=function(h){return a({event:h,index:r,rowData:u})}),l&&(f.onMouseOver=function(h){return l({event:h,index:r,rowData:u})}),c&&(f.onContextMenu=function(h){return c({event:h,index:r,rowData:u})})),R.createElement("div",xe({},f,{className:e,key:i,role:"row",style:d}),t)}function bPe(n,e,t){return e=ut(e),$n(n,uL()?Reflect.construct(e,t||[],ut(n).constructor):e.apply(n,t))}function uL(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(uL=function(){return!!n})()}var z_=function(n){function e(){return Ht(this,e),bPe(this,e,arguments)}return Fn(e,n),Wt(e)}(R.Component);j(z_,"defaultProps",{cellDataGetter:hPe,cellRenderer:mPe,defaultSortDirection:_o.ASC,flexGrow:0,flexShrink:1,headerRenderer:pPe,style:{}});z_.propTypes={};function $P(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function mi(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?$P(Object(t),!0).forEach(function(r){j(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):$P(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function yPe(n,e,t){return e=ut(e),$n(n,dL()?Reflect.construct(e,t||[],ut(n).constructor):e.apply(n,t))}function dL(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dL=function(){return!!n})()}var fL=function(n){function e(t){var r;return Ht(this,e),r=yPe(this,e,[t]),r.state={scrollbarWidth:0},r._createColumn=r._createColumn.bind(r),r._createRow=r._createRow.bind(r),r._onScroll=r._onScroll.bind(r),r._onSectionRendered=r._onSectionRendered.bind(r),r._setRef=r._setRef.bind(r),r._setGridElementRef=r._setGridElementRef.bind(r),r}return Fn(e,n),Wt(e,[{key:"forceUpdateGrid",value:function(){this.Grid&&this.Grid.forceUpdate()}},{key:"getOffsetForRow",value:function(r){var i=r.alignment,o=r.index;if(this.Grid){var s=this.Grid.getOffsetForCell({alignment:i,rowIndex:o}),a=s.scrollTop;return a}return 0}},{key:"invalidateCellSizeAfterRender",value:function(r){var i=r.columnIndex,o=r.rowIndex;this.Grid&&this.Grid.invalidateCellSizeAfterRender({rowIndex:o,columnIndex:i})}},{key:"measureAllRows",value:function(){this.Grid&&this.Grid.measureAllCells()}},{key:"recomputeGridSize",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=r.columnIndex,o=i===void 0?0:i,s=r.rowIndex,a=s===void 0?0:s;this.Grid&&this.Grid.recomputeGridSize({rowIndex:a,columnIndex:o})}},{key:"recomputeRowHeights",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.Grid&&this.Grid.recomputeGridSize({rowIndex:r})}},{key:"scrollToPosition",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.Grid&&this.Grid.scrollToPosition({scrollTop:r})}},{key:"scrollToRow",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.Grid&&this.Grid.scrollToCell({columnIndex:0,rowIndex:r})}},{key:"getScrollbarWidth",value:function(){if(this.GridElement){var r=this.GridElement,i=r.clientWidth||0,o=r.offsetWidth||0;return o-i}return 0}},{key:"componentDidMount",value:function(){this._setScrollbarWidth()}},{key:"componentDidUpdate",value:function(){this._setScrollbarWidth()}},{key:"render",value:function(){var r=this,i=this.props,o=i.children,s=i.className,a=i.disableHeader,l=i.gridClassName,c=i.gridStyle,u=i.headerHeight,d=i.headerRowRenderer,f=i.height,h=i.id,m=i.noRowsRenderer,g=i.rowClassName,p=i.rowStyle,b=i.scrollToIndex,y=i.style,C=i.width,A=this.state.scrollbarWidth,w=a?f:f-u,S=typeof g=="function"?g({index:-1}):g,_=typeof p=="function"?p({index:-1}):p;return this._cachedColumnStyles=[],R.Children.toArray(o).forEach(function(v,x){var T=r._getFlexStyleForColumn(v,v.props.style||z_.defaultProps.style);r._cachedColumnStyles[x]=mi({overflow:"hidden"},T)}),R.createElement("div",{"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-colcount":R.Children.toArray(o).length,"aria-rowcount":this.props.rowCount,className:Kr("ReactVirtualized__Table",s),id:h,role:"grid",style:y},!a&&d({className:Kr("ReactVirtualized__Table__headerRow",S),columns:this._getHeaderColumns(),style:mi({height:u,overflow:"hidden",paddingRight:A,width:C},_)}),R.createElement(wo,xe({},this.props,{elementRef:this._setGridElementRef,"aria-readonly":null,autoContainerWidth:!0,className:Kr("ReactVirtualized__Table__Grid",l),cellRenderer:this._createRow,columnWidth:C,columnCount:1,height:w,id:void 0,noContentRenderer:m,onScroll:this._onScroll,onSectionRendered:this._onSectionRendered,ref:this._setRef,role:"rowgroup",scrollbarWidth:A,scrollToRow:b,style:mi(mi({},c),{},{overflowX:"hidden"})})))}},{key:"_createColumn",value:function(r){var i=r.column,o=r.columnIndex,s=r.isScrolling,a=r.parent,l=r.rowData,c=r.rowIndex,u=this.props.onColumnClick,d=i.props,f=d.cellDataGetter,h=d.cellRenderer,m=d.className,g=d.columnData,p=d.dataKey,b=d.id,y=f({columnData:g,dataKey:p,rowData:l}),C=h({cellData:y,columnData:g,columnIndex:o,dataKey:p,isScrolling:s,parent:a,rowData:l,rowIndex:c}),A=function(v){u&&u({columnData:g,dataKey:p,event:v})},w=this._cachedColumnStyles[o],S=typeof C=="string"?C:null;return R.createElement("div",{"aria-colindex":o+1,"aria-describedby":b,className:Kr("ReactVirtualized__Table__rowColumn",m),key:"Row"+c+"-Col"+o,onClick:A,role:"gridcell",style:w,title:S},C)}},{key:"_createHeader",value:function(r){var i=r.column,o=r.index,s=this.props,a=s.headerClassName,l=s.headerStyle,c=s.onHeaderClick,u=s.sort,d=s.sortBy,f=s.sortDirection,h=i.props,m=h.columnData,g=h.dataKey,p=h.defaultSortDirection,b=h.disableSort,y=h.headerRenderer,C=h.id,A=h.label,w=!b&&u,S=Kr("ReactVirtualized__Table__headerColumn",a,i.props.headerClassName,{ReactVirtualized__Table__sortableHeaderColumn:w}),_=this._getFlexStyleForColumn(i,mi(mi({},l),i.props.headerStyle)),v=y({columnData:m,dataKey:g,disableSort:b,label:A,sortBy:d,sortDirection:f}),x,T,E,k,I;if(w||c){var B=d!==g,D=B?p:f===_o.DESC?_o.ASC:_o.DESC,F=function($){w&&u({defaultSortDirection:p,event:$,sortBy:g,sortDirection:D}),c&&c({columnData:m,dataKey:g,event:$})},L=function($){($.key==="Enter"||$.key===" ")&&F($)};I=i.props["aria-label"]||A||g,k="none",E=0,x=F,T=L}return d===g&&(k=f===_o.ASC?"ascending":"descending"),R.createElement("div",{"aria-label":I,"aria-sort":k,className:S,id:C,key:"Header-Col"+o,onClick:x,onKeyDown:T,role:"columnheader",style:_,tabIndex:E},v)}},{key:"_createRow",value:function(r){var i=this,o=r.rowIndex,s=r.isScrolling,a=r.key,l=r.parent,c=r.style,u=this.props,d=u.children,f=u.onRowClick,h=u.onRowDoubleClick,m=u.onRowRightClick,g=u.onRowMouseOver,p=u.onRowMouseOut,b=u.rowClassName,y=u.rowGetter,C=u.rowRenderer,A=u.rowStyle,w=this.state.scrollbarWidth,S=typeof b=="function"?b({index:o}):b,_=typeof A=="function"?A({index:o}):A,v=y({index:o}),x=R.Children.toArray(d).map(function(k,I){return i._createColumn({column:k,columnIndex:I,isScrolling:s,parent:l,rowData:v,rowIndex:o,scrollbarWidth:w})}),T=Kr("ReactVirtualized__Table__row",S),E=mi(mi({},c),{},{height:this._getRowHeight(o),overflow:"hidden",paddingRight:w},_);return C({className:T,columns:x,index:o,isScrolling:s,key:a,onRowClick:f,onRowDoubleClick:h,onRowRightClick:m,onRowMouseOver:g,onRowMouseOut:p,rowData:v,style:E})}},{key:"_getFlexStyleForColumn",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o="".concat(r.props.flexGrow," ").concat(r.props.flexShrink," ").concat(r.props.width,"px"),s=mi(mi({},i),{},{flex:o,msFlex:o,WebkitFlex:o});return r.props.maxWidth&&(s.maxWidth=r.props.maxWidth),r.props.minWidth&&(s.minWidth=r.props.minWidth),s}},{key:"_getHeaderColumns",value:function(){var r=this,i=this.props,o=i.children,s=i.disableHeader,a=s?[]:R.Children.toArray(o);return a.map(function(l,c){return r._createHeader({column:l,index:c})})}},{key:"_getRowHeight",value:function(r){var i=this.props.rowHeight;return typeof i=="function"?i({index:r}):i}},{key:"_onScroll",value:function(r){var i=r.clientHeight,o=r.scrollHeight,s=r.scrollTop,a=this.props.onScroll;a({clientHeight:i,scrollHeight:o,scrollTop:s})}},{key:"_onSectionRendered",value:function(r){var i=r.rowOverscanStartIndex,o=r.rowOverscanStopIndex,s=r.rowStartIndex,a=r.rowStopIndex,l=this.props.onRowsRendered;l({overscanStartIndex:i,overscanStopIndex:o,startIndex:s,stopIndex:a})}},{key:"_setRef",value:function(r){this.Grid=r}},{key:"_setGridElementRef",value:function(r){this.GridElement=r}},{key:"_setScrollbarWidth",value:function(){var r=this.getScrollbarWidth();this.setState({scrollbarWidth:r})}}])}(R.PureComponent);j(fL,"defaultProps",{disableHeader:!1,estimatedRowSize:30,headerHeight:0,headerStyle:{},noRowsRenderer:function(){return null},onRowsRendered:function(){return null},onScroll:function(){return null},overscanIndicesGetter:XN,overscanRowCount:10,rowRenderer:vPe,headerRowRenderer:gPe,rowStyle:{},scrollToAlignment:"auto",scrollToIndex:-1,style:{}});fL.propTypes={};var Eo=[],Bc=null,bs=null;function hL(){bs&&(bs=null,document.body&&Bc!=null&&(document.body.style.pointerEvents=Bc),Bc=null)}function wPe(){hL(),Eo.forEach(function(n){return n.__resetIsScrolling()})}function _Pe(){bs&&ul(bs);var n=0;Eo.forEach(function(e){n=Math.max(n,e.props.scrollingResetTimeInterval)}),bs=N_(wPe,n)}function mL(n){n.currentTarget===window&&Bc==null&&document.body&&(Bc=document.body.style.pointerEvents,document.body.style.pointerEvents="none"),_Pe(),Eo.forEach(function(e){e.props.scrollElement===n.currentTarget&&e.__handleWindowScrollEvent()})}function VP(n,e){Eo.some(function(t){return t.props.scrollElement===e})||e.addEventListener("scroll",mL),Eo.push(n)}function zP(n,e){Eo=Eo.filter(function(t){return t!==n}),Eo.length||(e.removeEventListener("scroll",mL),bs&&(ul(bs),hL()))}var j_=function(e){return e===window},yc=function(e){return e.getBoundingClientRect()};function jP(n,e){if(n)if(j_(n)){var t=window,r=t.innerHeight,i=t.innerWidth;return{height:typeof r=="number"?r:0,width:typeof i=="number"?i:0}}else return yc(n);else return{height:e.serverHeight,width:e.serverWidth}}function CPe(n,e){if(j_(e)&&document.documentElement){var t=document.documentElement,r=yc(n),i=yc(t);return{top:r.top-i.top,left:r.left-i.left}}else{var o=gL(e),s=yc(n),a=yc(e);return{top:s.top+o.top-a.top,left:s.left+o.left-a.left}}}function gL(n){return j_(n)&&document.documentElement?{top:"scrollY"in window?window.scrollY:document.documentElement.scrollTop,left:"scrollX"in window?window.scrollX:document.documentElement.scrollLeft}:{top:n.scrollTop,left:n.scrollLeft}}function WP(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function HP(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?WP(Object(t),!0).forEach(function(r){j(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):WP(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function SPe(n,e,t){return e=ut(e),$n(n,pL()?Reflect.construct(e,t||[],ut(n).constructor):e.apply(n,t))}function pL(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pL=function(){return!!n})()}var xPe=150,vL=function(){return typeof window<"u"?window:void 0},APe=function(n){function e(){var t;Ht(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=SPe(this,e,[].concat(i)),j(t,"_window",vL()),j(t,"_isMounted",!1),j(t,"_positionFromTop",0),j(t,"_positionFromLeft",0),j(t,"_detectElementResize",void 0),j(t,"_child",void 0),j(t,"_windowScrollerRef",R.createRef()),j(t,"state",HP(HP({},jP(t.props.scrollElement,t.props)),{},{isScrolling:!1,scrollLeft:0,scrollTop:0})),j(t,"_registerChild",function(s){s&&!(s instanceof Element)&&console.warn("WindowScroller registerChild expects to be passed Element or null"),t._child=s,t.updatePosition()}),j(t,"_onChildScroll",function(s){var a=s.scrollTop;if(t.state.scrollTop!==a){var l=t.props.scrollElement;l&&(typeof l.scrollTo=="function"?l.scrollTo(0,a+t._positionFromTop):l.scrollTop=a+t._positionFromTop)}}),j(t,"_registerResizeListener",function(s){s===window?window.addEventListener("resize",t._onResize,!1):t._detectElementResize.addResizeListener(s,t._onResize)}),j(t,"_unregisterResizeListener",function(s){s===window?window.removeEventListener("resize",t._onResize,!1):s&&t._detectElementResize.removeResizeListener(s,t._onResize)}),j(t,"_onResize",function(){t.updatePosition()}),j(t,"__handleWindowScrollEvent",function(){if(t._isMounted){var s=t.props.onScroll,a=t.props.scrollElement;if(a){var l=gL(a),c=Math.max(0,l.left-t._positionFromLeft),u=Math.max(0,l.top-t._positionFromTop);t.setState({isScrolling:!0,scrollLeft:c,scrollTop:u}),s({scrollLeft:c,scrollTop:u})}}}),j(t,"__resetIsScrolling",function(){t.setState({isScrolling:!1})}),t}return Fn(e,n),Wt(e,[{key:"updatePosition",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props.scrollElement,i=this.props.onResize,o=this.state,s=o.height,a=o.width,l=this._child||this._windowScrollerRef.current;if(l instanceof Element&&r){var c=CPe(l,r);this._positionFromTop=c.top,this._positionFromLeft=c.left}var u=jP(r,this.props);(s!==u.height||a!==u.width)&&(this.setState({height:u.height,width:u.width}),i({height:u.height,width:u.width})),this.props.updateScrollTopOnUpdatePosition===!0&&(this.__handleWindowScrollEvent(),this.__resetIsScrolling())}},{key:"componentDidMount",value:function(){var r=this.props.scrollElement;this._detectElementResize=jN(),this.updatePosition(r),r&&(VP(this,r),this._registerResizeListener(r)),this._isMounted=!0}},{key:"componentDidUpdate",value:function(r,i){var o=this.props.scrollElement,s=r.scrollElement;s!==o&&s!=null&&o!=null&&(this.updatePosition(o),zP(this,s),VP(this,o),this._unregisterResizeListener(s),this._registerResizeListener(o))}},{key:"componentWillUnmount",value:function(){var r=this.props.scrollElement;r&&(zP(this,r),this._unregisterResizeListener(r)),this._isMounted=!1}},{key:"render",value:function(){var r=this.props.children,i=this.state,o=i.isScrolling,s=i.scrollTop,a=i.scrollLeft,l=i.height,c=i.width;return R.createElement("div",{ref:this._windowScrollerRef},r({onChildScroll:this._onChildScroll,registerChild:this._registerChild,height:l,isScrolling:o,scrollLeft:a,scrollTop:s,width:c}))}}])}(R.PureComponent);j(APe,"defaultProps",{onResize:function(){},onScroll:function(){},scrollingResetTimeInterval:xPe,scrollElement:vL(),serverHeight:0,serverWidth:0});var tw={exports:{}};(function(n,e){Object.defineProperty(e,"__esModule",{value:!0});function t(_){return typeof _=="object"&&!("toString"in _)?Object.prototype.toString.call(_).slice(8,-1):_}var r=typeof process=="object"&&!0;function i(_,v){if(!_)throw r?new Error("Invariant failed"):new Error(v())}e.invariant=i;var o=Object.prototype.hasOwnProperty,s=Array.prototype.splice,a=Object.prototype.toString;function l(_){return a.call(_).slice(8,-1)}var c=Object.assign||function(_,v){return u(v).forEach(function(x){o.call(v,x)&&(_[x]=v[x])}),_},u=typeof Object.getOwnPropertySymbols=="function"?function(_){return Object.keys(_).concat(Object.getOwnPropertySymbols(_))}:function(_){return Object.keys(_)};function d(_){return Array.isArray(_)?c(_.constructor(_.length),_):l(_)==="Map"?new Map(_):l(_)==="Set"?new Set(_):_&&typeof _=="object"?c(Object.create(Object.getPrototypeOf(_)),_):_}var f=function(){function _(){this.commands=c({},h),this.update=this.update.bind(this),this.update.extend=this.extend=this.extend.bind(this),this.update.isEquals=function(v,x){return v===x},this.update.newContext=function(){return new _().update}}return Object.defineProperty(_.prototype,"isEquals",{get:function(){return this.update.isEquals},set:function(v){this.update.isEquals=v},enumerable:!0,configurable:!0}),_.prototype.extend=function(v,x){this.commands[v]=x},_.prototype.update=function(v,x){var T=this,E=typeof x=="function"?{$apply:x}:x;Array.isArray(v)&&Array.isArray(E)||i(!Array.isArray(E),function(){return"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."}),i(typeof E=="object"&&E!==null,function(){return"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the "+("following commands: "+Object.keys(T.commands).join(", ")+".")});var k=v;return u(E).forEach(function(I){if(o.call(T.commands,I)){var B=v===k;k=T.commands[I](E[I],k,E,v),B&&T.isEquals(k,v)&&(k=v)}else{var D=l(v)==="Map"?T.update(v.get(I),E[I]):T.update(v[I],E[I]),F=l(k)==="Map"?k.get(I):k[I];(!T.isEquals(D,F)||typeof D>"u"&&!o.call(v,I))&&(k===v&&(k=d(v)),l(k)==="Map"?k.set(I,D):k[I]=D)}}),k},_}();e.Context=f;var h={$push:function(_,v,x){return g(v,x,"$push"),_.length?v.concat(_):v},$unshift:function(_,v,x){return g(v,x,"$unshift"),_.length?_.concat(v):v},$splice:function(_,v,x,T){return b(v,x),_.forEach(function(E){y(E),v===T&&E.length&&(v=d(T)),s.apply(v,E)}),v},$set:function(_,v,x){return A(x),_},$toggle:function(_,v){p(_,"$toggle");var x=_.length?d(v):v;return _.forEach(function(T){x[T]=!v[T]}),x},$unset:function(_,v,x,T){return p(_,"$unset"),_.forEach(function(E){Object.hasOwnProperty.call(v,E)&&(v===T&&(v=d(T)),delete v[E])}),v},$add:function(_,v,x,T){return S(v,"$add"),p(_,"$add"),l(v)==="Map"?_.forEach(function(E){var k=E[0],I=E[1];v===T&&v.get(k)!==I&&(v=d(T)),v.set(k,I)}):_.forEach(function(E){v===T&&!v.has(E)&&(v=d(T)),v.add(E)}),v},$remove:function(_,v,x,T){return S(v,"$remove"),p(_,"$remove"),_.forEach(function(E){v===T&&v.has(E)&&(v=d(T)),v.delete(E)}),v},$merge:function(_,v,x,T){return w(v,_),u(_).forEach(function(E){_[E]!==v[E]&&(v===T&&(v=d(T)),v[E]=_[E])}),v},$apply:function(_,v){return C(_),_(v)}},m=new f;e.isEquals=m.update.isEquals,e.extend=m.extend,e.default=m.update,e.default.default=n.exports=c(e.default,e);function g(_,v,x){i(Array.isArray(_),function(){return"update(): expected target of "+t(x)+" to be an array; got "+t(_)+"."}),p(v[x],x)}function p(_,v){i(Array.isArray(_),function(){return"update(): expected spec of "+t(v)+" to be an array; got "+t(_)+". Did you forget to wrap your parameter in an array?"})}function b(_,v){i(Array.isArray(_),function(){return"Expected $splice target to be an array; got "+t(_)}),y(v.$splice)}function y(_){i(Array.isArray(_),function(){return"update(): expected spec of $splice to be an array of arrays; got "+t(_)+". Did you forget to wrap your parameters in an array?"})}function C(_){i(typeof _=="function",function(){return"update(): expected spec of $apply to be a function; got "+t(_)+"."})}function A(_){i(Object.keys(_).length===1,function(){return"Cannot have more than one key in an object with $set"})}function w(_,v){i(v&&typeof v=="object",function(){return"update(): $merge expects a spec of type 'object'; got "+t(v)}),i(_&&typeof _=="object",function(){return"update(): $merge expects a target of type 'object'; got "+t(_)})}function S(_,v){var x=l(_);i(x==="Map"||x==="Set",function(){return"update(): "+t(v)+" expects a target of type Set or Map; got "+t(x)})}})(tw,tw.exports);var TPe=tw.exports;const RIe=ot(TPe),MIe="/assets/IconSucess-CgaFcAe4.svg",{Option:Of}=hF,DIe=({items:n,nameKey:e,onSelect:t,placeholder:r,selectedValue:i,isCompany:o,isMember:s,allowNewValue:a=!0,notShowAtBegin:l=!1,dateKey:c,...u})=>{const[d,f]=R.useState("");return we.jsxs(AF,{...u,placeholder:r,value:i,showArrow:!1,type:"select",showSearch:!0,closestMatchOnly:!0,currentValue:d,onSearch:h=>f(h),notShowAtBegin:l,onSelect:h=>{t(h),f("")},children:[n.map(h=>we.jsx(Of,{value:h.id!==null&&h.id!==void 0?h.id:h[e],children:`${h[e]}${c?` - ${jf(h[c]).format("DD/MM/YYYY")}`:""}`},h.id!==null&&h.id!==void 0?h.id:h[e])),a&&d&&(o?we.jsx(Of,{value:d,children:`${d} [new company]`}):s?we.jsx(Of,{value:d,children:`${d} [new member]`}):we.jsx(Of,{value:d,children:d}))]})};var Md=n=>n.type==="checkbox",cs=n=>n instanceof Date,Dn=n=>n==null;const bL=n=>typeof n=="object";var jt=n=>!Dn(n)&&!Array.isArray(n)&&bL(n)&&!cs(n),yL=n=>jt(n)&&n.target?Md(n.target)?n.target.checked:n.target.value:n,EPe=n=>n.substring(0,n.search(/\.\d+(\.|$)/))||n,wL=(n,e)=>n.has(EPe(e)),kPe=n=>{const e=n.constructor&&n.constructor.prototype;return jt(e)&&e.hasOwnProperty("isPrototypeOf")},W_=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Un(n){let e;const t=Array.isArray(n),r=typeof FileList<"u"?n instanceof FileList:!1;if(n instanceof Date)e=new Date(n);else if(n instanceof Set)e=new Set(n);else if(!(W_&&(n instanceof Blob||r))&&(t||jt(n)))if(e=t?[]:{},!t&&!kPe(n))e=n;else for(const i in n)n.hasOwnProperty(i)&&(e[i]=Un(n[i]));else return n;return e}var Wg=n=>Array.isArray(n)?n.filter(Boolean):[],Lt=n=>n===void 0,de=(n,e,t)=>{if(!e||!jt(n))return t;const r=Wg(e.split(/[,[\].]+?/)).reduce((i,o)=>Dn(i)?i:i[o],n);return Lt(r)||r===n?Lt(n[e])?t:n[e]:r},Ar=n=>typeof n=="boolean",H_=n=>/^\w*$/.test(n),_L=n=>Wg(n.replace(/["|']|\]/g,"").split(/\.|\[/)),bt=(n,e,t)=>{let r=-1;const i=H_(e)?[e]:_L(e),o=i.length,s=o-1;for(;++r<o;){const a=i[r];let l=t;if(r!==s){const c=n[a];l=jt(c)||Array.isArray(c)?c:isNaN(+i[r+1])?{}:[]}if(a==="__proto__"||a==="constructor"||a==="prototype")return;n[a]=l,n=n[a]}return n};const Cm={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Zr={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Bi={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},CL=O.createContext(null),U_=()=>O.useContext(CL),BIe=n=>{const{children:e,...t}=n;return O.createElement(CL.Provider,{value:t},e)};var SL=(n,e,t,r=!0)=>{const i={defaultValues:e._defaultValues};for(const o in n)Object.defineProperty(i,o,{get:()=>{const s=o;return e._proxyFormState[s]!==Zr.all&&(e._proxyFormState[s]=!r||Zr.all),t&&(t[s]=!0),n[s]}});return i},Gn=n=>jt(n)&&!Object.keys(n).length,xL=(n,e,t,r)=>{t(n);const{name:i,...o}=n;return Gn(o)||Object.keys(o).length>=Object.keys(e).length||Object.keys(o).find(s=>e[s]===(!r||Zr.all))},Nc=n=>Array.isArray(n)?n:[n],AL=(n,e,t)=>!n||!e||n===e||Nc(n).some(r=>r&&(t?r===e:r.startsWith(e)||e.startsWith(r)));function G_(n){const e=O.useRef(n);e.current=n,O.useEffect(()=>{const t=!n.disabled&&e.current.subject&&e.current.subject.subscribe({next:e.current.next});return()=>{t&&t.unsubscribe()}},[n.disabled])}function PPe(n){const e=U_(),{control:t=e.control,disabled:r,name:i,exact:o}=n||{},[s,a]=O.useState(t._formState),l=O.useRef(!0),c=O.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),u=O.useRef(i);return u.current=i,G_({disabled:r,next:d=>l.current&&AL(u.current,d.name,o)&&xL(d,c.current,t._updateFormState)&&a({...t._formState,...d}),subject:t._subjects.state}),O.useEffect(()=>(l.current=!0,c.current.isValid&&t._updateValid(!0),()=>{l.current=!1}),[t]),O.useMemo(()=>SL(s,t,c.current,!1),[s,t])}var wi=n=>typeof n=="string",TL=(n,e,t,r,i)=>wi(n)?(r&&e.watch.add(n),de(t,n,i)):Array.isArray(n)?n.map(o=>(r&&e.watch.add(o),de(t,o))):(r&&(e.watchAll=!0),t);function IPe(n){const e=U_(),{control:t=e.control,name:r,defaultValue:i,disabled:o,exact:s}=n||{},a=O.useRef(r);a.current=r,G_({disabled:o,subject:t._subjects.values,next:u=>{AL(a.current,u.name,s)&&c(Un(TL(a.current,t._names,u.values||t._formValues,!1,i)))}});const[l,c]=O.useState(t._getWatch(r,i));return O.useEffect(()=>t._removeUnmounted()),l}function OPe(n){const e=U_(),{name:t,disabled:r,control:i=e.control,shouldUnregister:o}=n,s=wL(i._names.array,t),a=IPe({control:i,name:t,defaultValue:de(i._formValues,t,de(i._defaultValues,t,n.defaultValue)),exact:!0}),l=PPe({control:i,name:t,exact:!0}),c=O.useRef(i.register(t,{...n.rules,value:a,...Ar(n.disabled)?{disabled:n.disabled}:{}})),u=O.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!de(l.errors,t)},isDirty:{enumerable:!0,get:()=>!!de(l.dirtyFields,t)},isTouched:{enumerable:!0,get:()=>!!de(l.touchedFields,t)},isValidating:{enumerable:!0,get:()=>!!de(l.validatingFields,t)},error:{enumerable:!0,get:()=>de(l.errors,t)}}),[l,t]),d=O.useMemo(()=>({name:t,value:a,...Ar(r)||l.disabled?{disabled:l.disabled||r}:{},onChange:f=>c.current.onChange({target:{value:yL(f),name:t},type:Cm.CHANGE}),onBlur:()=>c.current.onBlur({target:{value:de(i._formValues,t),name:t},type:Cm.BLUR}),ref:f=>{const h=de(i._fields,t);h&&f&&(h._f.ref={focus:()=>f.focus(),select:()=>f.select(),setCustomValidity:m=>f.setCustomValidity(m),reportValidity:()=>f.reportValidity()})}}),[t,i._formValues,r,l.disabled,a,i._fields]);return O.useEffect(()=>{const f=i._options.shouldUnregister||o,h=(m,g)=>{const p=de(i._fields,m);p&&p._f&&(p._f.mount=g)};if(h(t,!0),f){const m=Un(de(i._options.defaultValues,t));bt(i._defaultValues,t,m),Lt(de(i._formValues,t))&&bt(i._formValues,t,m)}return!s&&i.register(t),()=>{(s?f&&!i._state.action:f)?i.unregister(t):h(t,!1)}},[t,i,s,o]),O.useEffect(()=>{i._updateDisabledField({disabled:r,fields:i._fields,name:t})},[r,t,i]),O.useMemo(()=>({field:d,formState:l,fieldState:u}),[d,l,u])}const NIe=n=>n.render(OPe(n));var RPe=(n,e,t,r,i)=>e?{...t[n],types:{...t[n]&&t[n].types?t[n].types:{},[r]:i||!0}}:{},UP=n=>({isOnSubmit:!n||n===Zr.onSubmit,isOnBlur:n===Zr.onBlur,isOnChange:n===Zr.onChange,isOnAll:n===Zr.all,isOnTouch:n===Zr.onTouched}),GP=(n,e,t)=>!t&&(e.watchAll||e.watch.has(n)||[...e.watch].some(r=>n.startsWith(r)&&/^\.\w+/.test(n.slice(r.length))));const Lc=(n,e,t,r)=>{for(const i of t||Object.keys(n)){const o=de(n,i);if(o){const{_f:s,...a}=o;if(s){if(s.refs&&s.refs[0]&&e(s.refs[0],i)&&!r)return!0;if(s.ref&&e(s.ref,s.name)&&!r)return!0;if(Lc(a,e))break}else if(jt(a)&&Lc(a,e))break}}};var MPe=(n,e,t)=>{const r=Nc(de(n,t));return bt(r,"root",e[t]),bt(n,t,r),n},q_=n=>n.type==="file",vi=n=>typeof n=="function",Sm=n=>{if(!W_)return!1;const e=n?n.ownerDocument:0;return n instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},zf=n=>wi(n),K_=n=>n.type==="radio",xm=n=>n instanceof RegExp;const qP={value:!1,isValid:!1},KP={value:!0,isValid:!0};var EL=n=>{if(Array.isArray(n)){if(n.length>1){const e=n.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:e,isValid:!!e.length}}return n[0].checked&&!n[0].disabled?n[0].attributes&&!Lt(n[0].attributes.value)?Lt(n[0].value)||n[0].value===""?KP:{value:n[0].value,isValid:!0}:KP:qP}return qP};const YP={isValid:!1,value:null};var kL=n=>Array.isArray(n)?n.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,YP):YP;function XP(n,e,t="validate"){if(zf(n)||Array.isArray(n)&&n.every(zf)||Ar(n)&&!n)return{type:t,message:zf(n)?n:"",ref:e}}var oa=n=>jt(n)&&!xm(n)?n:{value:n,message:""},ZP=async(n,e,t,r,i,o)=>{const{ref:s,refs:a,required:l,maxLength:c,minLength:u,min:d,max:f,pattern:h,validate:m,name:g,valueAsNumber:p,mount:b}=n._f,y=de(t,g);if(!b||e.has(g))return{};const C=a?a[0]:s,A=k=>{i&&C.reportValidity&&(C.setCustomValidity(Ar(k)?"":k||""),C.reportValidity())},w={},S=K_(s),_=Md(s),v=S||_,x=(p||q_(s))&&Lt(s.value)&&Lt(y)||Sm(s)&&s.value===""||y===""||Array.isArray(y)&&!y.length,T=RPe.bind(null,g,r,w),E=(k,I,B,D=Bi.maxLength,F=Bi.minLength)=>{const L=k?I:B;w[g]={type:k?D:F,message:L,ref:s,...T(k?D:F,L)}};if(o?!Array.isArray(y)||!y.length:l&&(!v&&(x||Dn(y))||Ar(y)&&!y||_&&!EL(a).isValid||S&&!kL(a).isValid)){const{value:k,message:I}=zf(l)?{value:!!l,message:l}:oa(l);if(k&&(w[g]={type:Bi.required,message:I,ref:C,...T(Bi.required,I)},!r))return A(I),w}if(!x&&(!Dn(d)||!Dn(f))){let k,I;const B=oa(f),D=oa(d);if(!Dn(y)&&!isNaN(y)){const F=s.valueAsNumber||y&&+y;Dn(B.value)||(k=F>B.value),Dn(D.value)||(I=F<D.value)}else{const F=s.valueAsDate||new Date(y),L=ne=>new Date(new Date().toDateString()+" "+ne),H=s.type=="time",$=s.type=="week";wi(B.value)&&y&&(k=H?L(y)>L(B.value):$?y>B.value:F>new Date(B.value)),wi(D.value)&&y&&(I=H?L(y)<L(D.value):$?y<D.value:F<new Date(D.value))}if((k||I)&&(E(!!k,B.message,D.message,Bi.max,Bi.min),!r))return A(w[g].message),w}if((c||u)&&!x&&(wi(y)||o&&Array.isArray(y))){const k=oa(c),I=oa(u),B=!Dn(k.value)&&y.length>+k.value,D=!Dn(I.value)&&y.length<+I.value;if((B||D)&&(E(B,k.message,I.message),!r))return A(w[g].message),w}if(h&&!x&&wi(y)){const{value:k,message:I}=oa(h);if(xm(k)&&!y.match(k)&&(w[g]={type:Bi.pattern,message:I,ref:s,...T(Bi.pattern,I)},!r))return A(I),w}if(m){if(vi(m)){const k=await m(y,t),I=XP(k,C);if(I&&(w[g]={...I,...T(Bi.validate,I.message)},!r))return A(I.message),w}else if(jt(m)){let k={};for(const I in m){if(!Gn(k)&&!r)break;const B=XP(await m[I](y,t),C,I);B&&(k={...B,...T(I,B.message)},A(B.message),r&&(w[g]=k))}if(!Gn(k)&&(w[g]={ref:C,...k},!r))return w}}return A(!0),w};function DPe(n,e){const t=e.slice(0,-1).length;let r=0;for(;r<t;)n=Lt(n)?r++:n[e[r++]];return n}function BPe(n){for(const e in n)if(n.hasOwnProperty(e)&&!Lt(n[e]))return!1;return!0}function Qt(n,e){const t=Array.isArray(e)?e:H_(e)?[e]:_L(e),r=t.length===1?n:DPe(n,t),i=t.length-1,o=t[i];return r&&delete r[o],i!==0&&(jt(r)&&Gn(r)||Array.isArray(r)&&BPe(r))&&Qt(n,t.slice(0,-1)),n}var Rv=()=>{let n=[];return{get observers(){return n},next:i=>{for(const o of n)o.next&&o.next(i)},subscribe:i=>(n.push(i),{unsubscribe:()=>{n=n.filter(o=>o!==i)}}),unsubscribe:()=>{n=[]}}},nw=n=>Dn(n)||!bL(n);function vo(n,e){if(nw(n)||nw(e))return n===e;if(cs(n)&&cs(e))return n.getTime()===e.getTime();const t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(const i of t){const o=n[i];if(!r.includes(i))return!1;if(i!=="ref"){const s=e[i];if(cs(o)&&cs(s)||jt(o)&&jt(s)||Array.isArray(o)&&Array.isArray(s)?!vo(o,s):o!==s)return!1}}return!0}var PL=n=>n.type==="select-multiple",NPe=n=>K_(n)||Md(n),Mv=n=>Sm(n)&&n.isConnected,IL=n=>{for(const e in n)if(vi(n[e]))return!0;return!1};function Am(n,e={}){const t=Array.isArray(n);if(jt(n)||t)for(const r in n)Array.isArray(n[r])||jt(n[r])&&!IL(n[r])?(e[r]=Array.isArray(n[r])?[]:{},Am(n[r],e[r])):Dn(n[r])||(e[r]=!0);return e}function OL(n,e,t){const r=Array.isArray(n);if(jt(n)||r)for(const i in n)Array.isArray(n[i])||jt(n[i])&&!IL(n[i])?Lt(e)||nw(t[i])?t[i]=Array.isArray(n[i])?Am(n[i],[]):{...Am(n[i])}:OL(n[i],Dn(e)?{}:e[i],t[i]):t[i]=!vo(n[i],e[i]);return t}var dc=(n,e)=>OL(n,e,Am(e)),RL=(n,{valueAsNumber:e,valueAsDate:t,setValueAs:r})=>Lt(n)?n:e?n===""?NaN:n&&+n:t&&wi(n)?new Date(n):r?r(n):n;function Dv(n){const e=n.ref;return q_(e)?e.files:K_(e)?kL(n.refs).value:PL(e)?[...e.selectedOptions].map(({value:t})=>t):Md(e)?EL(n.refs).value:RL(Lt(e.value)?n.ref.value:e.value,n)}var LPe=(n,e,t,r)=>{const i={};for(const o of n){const s=de(e,o);s&&bt(i,o,s._f)}return{criteriaMode:t,names:[...n],fields:i,shouldUseNativeValidation:r}},fc=n=>Lt(n)?n:xm(n)?n.source:jt(n)?xm(n.value)?n.value.source:n.value:n;const JP="AsyncFunction";var FPe=n=>!!n&&!!n.validate&&!!(vi(n.validate)&&n.validate.constructor.name===JP||jt(n.validate)&&Object.values(n.validate).find(e=>e.constructor.name===JP)),$Pe=n=>n.mount&&(n.required||n.min||n.max||n.maxLength||n.minLength||n.pattern||n.validate);function QP(n,e,t){const r=de(n,t);if(r||H_(t))return{error:r,name:t};const i=t.split(".");for(;i.length;){const o=i.join("."),s=de(e,o),a=de(n,o);if(s&&!Array.isArray(s)&&t!==o)return{name:t};if(a&&a.type)return{name:o,error:a};i.pop()}return{name:t}}var VPe=(n,e,t,r,i)=>i.isOnAll?!1:!t&&i.isOnTouch?!(e||n):(t?r.isOnBlur:i.isOnBlur)?!n:(t?r.isOnChange:i.isOnChange)?n:!0,zPe=(n,e)=>!Wg(de(n,e)).length&&Qt(n,e);const jPe={mode:Zr.onSubmit,reValidateMode:Zr.onChange,shouldFocusError:!0};function WPe(n={}){let e={...jPe,...n},t={submitCount:0,isDirty:!1,isLoading:vi(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},r={},i=jt(e.defaultValues)||jt(e.values)?Un(e.defaultValues||e.values)||{}:{},o=e.shouldUnregister?{}:Un(i),s={action:!1,mount:!1,watch:!1},a={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},l,c=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},d={values:Rv(),array:Rv(),state:Rv()},f=UP(e.mode),h=UP(e.reValidateMode),m=e.criteriaMode===Zr.all,g=P=>N=>{clearTimeout(c),c=setTimeout(P,N)},p=async P=>{if(!e.disabled&&(u.isValid||P)){const N=e.resolver?Gn((await v()).errors):await T(r,!0);N!==t.isValid&&d.state.next({isValid:N})}},b=(P,N)=>{!e.disabled&&(u.isValidating||u.validatingFields)&&((P||Array.from(a.mount)).forEach(z=>{z&&(N?bt(t.validatingFields,z,N):Qt(t.validatingFields,z))}),d.state.next({validatingFields:t.validatingFields,isValidating:!Gn(t.validatingFields)}))},y=(P,N=[],z,se,te=!0,re=!0)=>{if(se&&z&&!e.disabled){if(s.action=!0,re&&Array.isArray(de(r,P))){const ge=z(de(r,P),se.argA,se.argB);te&&bt(r,P,ge)}if(re&&Array.isArray(de(t.errors,P))){const ge=z(de(t.errors,P),se.argA,se.argB);te&&bt(t.errors,P,ge),zPe(t.errors,P)}if(u.touchedFields&&re&&Array.isArray(de(t.touchedFields,P))){const ge=z(de(t.touchedFields,P),se.argA,se.argB);te&&bt(t.touchedFields,P,ge)}u.dirtyFields&&(t.dirtyFields=dc(i,o)),d.state.next({name:P,isDirty:k(P,N),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else bt(o,P,N)},C=(P,N)=>{bt(t.errors,P,N),d.state.next({errors:t.errors})},A=P=>{t.errors=P,d.state.next({errors:t.errors,isValid:!1})},w=(P,N,z,se)=>{const te=de(r,P);if(te){const re=de(o,P,Lt(z)?de(i,P):z);Lt(re)||se&&se.defaultChecked||N?bt(o,P,N?re:Dv(te._f)):D(P,re),s.mount&&p()}},S=(P,N,z,se,te)=>{let re=!1,ge=!1;const Ae={name:P};if(!e.disabled){const Fe=!!(de(r,P)&&de(r,P)._f&&de(r,P)._f.disabled);if(!z||se){u.isDirty&&(ge=t.isDirty,t.isDirty=Ae.isDirty=k(),re=ge!==Ae.isDirty);const We=Fe||vo(de(i,P),N);ge=!!(!Fe&&de(t.dirtyFields,P)),We||Fe?Qt(t.dirtyFields,P):bt(t.dirtyFields,P,!0),Ae.dirtyFields=t.dirtyFields,re=re||u.dirtyFields&&ge!==!We}if(z){const We=de(t.touchedFields,P);We||(bt(t.touchedFields,P,z),Ae.touchedFields=t.touchedFields,re=re||u.touchedFields&&We!==z)}re&&te&&d.state.next(Ae)}return re?Ae:{}},_=(P,N,z,se)=>{const te=de(t.errors,P),re=u.isValid&&Ar(N)&&t.isValid!==N;if(e.delayError&&z?(l=g(()=>C(P,z)),l(e.delayError)):(clearTimeout(c),l=null,z?bt(t.errors,P,z):Qt(t.errors,P)),(z?!vo(te,z):te)||!Gn(se)||re){const ge={...se,...re&&Ar(N)?{isValid:N}:{},errors:t.errors,name:P};t={...t,...ge},d.state.next(ge)}},v=async P=>{b(P,!0);const N=await e.resolver(o,e.context,LPe(P||a.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return b(P),N},x=async P=>{const{errors:N}=await v(P);if(P)for(const z of P){const se=de(N,z);se?bt(t.errors,z,se):Qt(t.errors,z)}else t.errors=N;return N},T=async(P,N,z={valid:!0})=>{for(const se in P){const te=P[se];if(te){const{_f:re,...ge}=te;if(re){const Ae=a.array.has(re.name),Fe=te._f&&FPe(te._f);Fe&&u.validatingFields&&b([se],!0);const We=await ZP(te,a.disabled,o,m,e.shouldUseNativeValidation&&!N,Ae);if(Fe&&u.validatingFields&&b([se]),We[re.name]&&(z.valid=!1,N))break;!N&&(de(We,re.name)?Ae?MPe(t.errors,We,re.name):bt(t.errors,re.name,We[re.name]):Qt(t.errors,re.name))}!Gn(ge)&&await T(ge,N,z)}}return z.valid},E=()=>{for(const P of a.unMount){const N=de(r,P);N&&(N._f.refs?N._f.refs.every(z=>!Mv(z)):!Mv(N._f.ref))&&me(P)}a.unMount=new Set},k=(P,N)=>!e.disabled&&(P&&N&&bt(o,P,N),!vo(Z(),i)),I=(P,N,z)=>TL(P,a,{...s.mount?o:Lt(N)?i:wi(P)?{[P]:N}:N},z,N),B=P=>Wg(de(s.mount?o:i,P,e.shouldUnregister?de(i,P,[]):[])),D=(P,N,z={})=>{const se=de(r,P);let te=N;if(se){const re=se._f;re&&(!re.disabled&&bt(o,P,RL(N,re)),te=Sm(re.ref)&&Dn(N)?"":N,PL(re.ref)?[...re.ref.options].forEach(ge=>ge.selected=te.includes(ge.value)):re.refs?Md(re.ref)?re.refs.length>1?re.refs.forEach(ge=>(!ge.defaultChecked||!ge.disabled)&&(ge.checked=Array.isArray(te)?!!te.find(Ae=>Ae===ge.value):te===ge.value)):re.refs[0]&&(re.refs[0].checked=!!te):re.refs.forEach(ge=>ge.checked=ge.value===te):q_(re.ref)?re.ref.value="":(re.ref.value=te,re.ref.type||d.values.next({name:P,values:{...o}})))}(z.shouldDirty||z.shouldTouch)&&S(P,te,z.shouldTouch,z.shouldDirty,!0),z.shouldValidate&&ne(P)},F=(P,N,z)=>{for(const se in N){const te=N[se],re=`${P}.${se}`,ge=de(r,re);(a.array.has(P)||jt(te)||ge&&!ge._f)&&!cs(te)?F(re,te,z):D(re,te,z)}},L=(P,N,z={})=>{const se=de(r,P),te=a.array.has(P),re=Un(N);bt(o,P,re),te?(d.array.next({name:P,values:{...o}}),(u.isDirty||u.dirtyFields)&&z.shouldDirty&&d.state.next({name:P,dirtyFields:dc(i,o),isDirty:k(P,re)})):se&&!se._f&&!Dn(re)?F(P,re,z):D(P,re,z),GP(P,a)&&d.state.next({...t}),d.values.next({name:s.mount?P:void 0,values:{...o}})},H=async P=>{s.mount=!0;const N=P.target;let z=N.name,se=!0;const te=de(r,z),re=()=>N.type?Dv(te._f):yL(P),ge=Ae=>{se=Number.isNaN(Ae)||cs(Ae)&&isNaN(Ae.getTime())||vo(Ae,de(o,z,Ae))};if(te){let Ae,Fe;const We=re(),Dt=P.type===Cm.BLUR||P.type===Cm.FOCUS_OUT,oo=!$Pe(te._f)&&!e.resolver&&!de(t.errors,z)&&!te._f.deps||VPe(Dt,de(t.touchedFields,z),t.isSubmitted,h,f),so=GP(z,a,Dt);bt(o,z,We),Dt?(te._f.onBlur&&te._f.onBlur(P),l&&l(0)):te._f.onChange&&te._f.onChange(P);const yr=S(z,We,Dt,!1),Pn=!Gn(yr)||so;if(!Dt&&d.values.next({name:z,type:P.type,values:{...o}}),oo)return u.isValid&&(e.mode==="onBlur"&&Dt?p():Dt||p()),Pn&&d.state.next({name:z,...so?{}:yr});if(!Dt&&so&&d.state.next({...t}),e.resolver){const{errors:ui}=await v([z]);if(ge(We),se){const In=QP(t.errors,r,z),zr=QP(ui,r,In.name||z);Ae=zr.error,z=zr.name,Fe=Gn(ui)}}else b([z],!0),Ae=(await ZP(te,a.disabled,o,m,e.shouldUseNativeValidation))[z],b([z]),ge(We),se&&(Ae?Fe=!1:u.isValid&&(Fe=await T(r,!0)));se&&(te._f.deps&&ne(te._f.deps),_(z,Fe,Ae,yr))}},$=(P,N)=>{if(de(t.errors,N)&&P.focus)return P.focus(),1},ne=async(P,N={})=>{let z,se;const te=Nc(P);if(e.resolver){const re=await x(Lt(P)?P:te);z=Gn(re),se=P?!te.some(ge=>de(re,ge)):z}else P?(se=(await Promise.all(te.map(async re=>{const ge=de(r,re);return await T(ge&&ge._f?{[re]:ge}:ge)}))).every(Boolean),!(!se&&!t.isValid)&&p()):se=z=await T(r);return d.state.next({...!wi(P)||u.isValid&&z!==t.isValid?{}:{name:P},...e.resolver||!P?{isValid:z}:{},errors:t.errors}),N.shouldFocus&&!se&&Lc(r,$,P?te:a.mount),se},Z=P=>{const N={...s.mount?o:i};return Lt(P)?N:wi(P)?de(N,P):P.map(z=>de(N,z))},G=(P,N)=>({invalid:!!de((N||t).errors,P),isDirty:!!de((N||t).dirtyFields,P),error:de((N||t).errors,P),isValidating:!!de(t.validatingFields,P),isTouched:!!de((N||t).touchedFields,P)}),X=P=>{P&&Nc(P).forEach(N=>Qt(t.errors,N)),d.state.next({errors:P?t.errors:{}})},ee=(P,N,z)=>{const se=(de(r,P,{_f:{}})._f||{}).ref,te=de(t.errors,P)||{},{ref:re,message:ge,type:Ae,...Fe}=te;bt(t.errors,P,{...Fe,...N,ref:se}),d.state.next({name:P,errors:t.errors,isValid:!1}),z&&z.shouldFocus&&se&&se.focus&&se.focus()},ie=(P,N)=>vi(P)?d.values.subscribe({next:z=>P(I(void 0,N),z)}):I(P,N,!0),me=(P,N={})=>{for(const z of P?Nc(P):a.mount)a.mount.delete(z),a.array.delete(z),N.keepValue||(Qt(r,z),Qt(o,z)),!N.keepError&&Qt(t.errors,z),!N.keepDirty&&Qt(t.dirtyFields,z),!N.keepTouched&&Qt(t.touchedFields,z),!N.keepIsValidating&&Qt(t.validatingFields,z),!e.shouldUnregister&&!N.keepDefaultValue&&Qt(i,z);d.values.next({values:{...o}}),d.state.next({...t,...N.keepDirty?{isDirty:k()}:{}}),!N.keepIsValid&&p()},Ie=({disabled:P,name:N,field:z,fields:se})=>{(Ar(P)&&s.mount||P||a.disabled.has(N))&&(P?a.disabled.add(N):a.disabled.delete(N),S(N,Dv(z?z._f:de(se,N)._f),!1,!1,!0))},ce=(P,N={})=>{let z=de(r,P);const se=Ar(N.disabled)||Ar(e.disabled);return bt(r,P,{...z||{},_f:{...z&&z._f?z._f:{ref:{name:P}},name:P,mount:!0,...N}}),a.mount.add(P),z?Ie({field:z,disabled:Ar(N.disabled)?N.disabled:e.disabled,name:P}):w(P,!0,N.value),{...se?{disabled:N.disabled||e.disabled}:{},...e.progressive?{required:!!N.required,min:fc(N.min),max:fc(N.max),minLength:fc(N.minLength),maxLength:fc(N.maxLength),pattern:fc(N.pattern)}:{},name:P,onChange:H,onBlur:H,ref:te=>{if(te){ce(P,N),z=de(r,P);const re=Lt(te.value)&&te.querySelectorAll&&te.querySelectorAll("input,select,textarea")[0]||te,ge=NPe(re),Ae=z._f.refs||[];if(ge?Ae.find(Fe=>Fe===re):re===z._f.ref)return;bt(r,P,{_f:{...z._f,...ge?{refs:[...Ae.filter(Mv),re,...Array.isArray(de(i,P))?[{}]:[]],ref:{type:re.type,name:P}}:{ref:re}}}),w(P,!1,void 0,re)}else z=de(r,P,{}),z._f&&(z._f.mount=!1),(e.shouldUnregister||N.shouldUnregister)&&!(wL(a.array,P)&&s.action)&&a.unMount.add(P)}}},q=()=>e.shouldFocusError&&Lc(r,$,a.mount),oe=P=>{Ar(P)&&(d.state.next({disabled:P}),Lc(r,(N,z)=>{const se=de(r,z);se&&(N.disabled=se._f.disabled||P,Array.isArray(se._f.refs)&&se._f.refs.forEach(te=>{te.disabled=se._f.disabled||P}))},0,!1))},Q=(P,N)=>async z=>{let se;z&&(z.preventDefault&&z.preventDefault(),z.persist&&z.persist());let te=Un(o);if(a.disabled.size)for(const re of a.disabled)bt(te,re,void 0);if(d.state.next({isSubmitting:!0}),e.resolver){const{errors:re,values:ge}=await v();t.errors=re,te=ge}else await T(r);if(Qt(t.errors,"root"),Gn(t.errors)){d.state.next({errors:{}});try{await P(te,z)}catch(re){se=re}}else N&&await N({...t.errors},z),q(),setTimeout(q);if(d.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Gn(t.errors)&&!se,submitCount:t.submitCount+1,errors:t.errors}),se)throw se},K=(P,N={})=>{de(r,P)&&(Lt(N.defaultValue)?L(P,Un(de(i,P))):(L(P,N.defaultValue),bt(i,P,Un(N.defaultValue))),N.keepTouched||Qt(t.touchedFields,P),N.keepDirty||(Qt(t.dirtyFields,P),t.isDirty=N.defaultValue?k(P,Un(de(i,P))):k()),N.keepError||(Qt(t.errors,P),u.isValid&&p()),d.state.next({...t}))},Se=(P,N={})=>{const z=P?Un(P):i,se=Un(z),te=Gn(P),re=te?i:se;if(N.keepDefaultValues||(i=z),!N.keepValues){if(N.keepDirtyValues){const ge=new Set([...a.mount,...Object.keys(dc(i,o))]);for(const Ae of Array.from(ge))de(t.dirtyFields,Ae)?bt(re,Ae,de(o,Ae)):L(Ae,de(re,Ae))}else{if(W_&&Lt(P))for(const ge of a.mount){const Ae=de(r,ge);if(Ae&&Ae._f){const Fe=Array.isArray(Ae._f.refs)?Ae._f.refs[0]:Ae._f.ref;if(Sm(Fe)){const We=Fe.closest("form");if(We){We.reset();break}}}}r={}}o=e.shouldUnregister?N.keepDefaultValues?Un(i):{}:Un(re),d.array.next({values:{...re}}),d.values.next({values:{...re}})}a={mount:N.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},s.mount=!u.isValid||!!N.keepIsValid||!!N.keepDirtyValues,s.watch=!!e.shouldUnregister,d.state.next({submitCount:N.keepSubmitCount?t.submitCount:0,isDirty:te?!1:N.keepDirty?t.isDirty:!!(N.keepDefaultValues&&!vo(P,i)),isSubmitted:N.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:te?{}:N.keepDirtyValues?N.keepDefaultValues&&o?dc(i,o):t.dirtyFields:N.keepDefaultValues&&P?dc(i,P):N.keepDirty?t.dirtyFields:{},touchedFields:N.keepTouched?t.touchedFields:{},errors:N.keepErrors?t.errors:{},isSubmitSuccessful:N.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1})},le=(P,N)=>Se(vi(P)?P(o):P,N);return{control:{register:ce,unregister:me,getFieldState:G,handleSubmit:Q,setError:ee,_executeSchema:v,_getWatch:I,_getDirty:k,_updateValid:p,_removeUnmounted:E,_updateFieldArray:y,_updateDisabledField:Ie,_getFieldArray:B,_reset:Se,_resetDefaultValues:()=>vi(e.defaultValues)&&e.defaultValues().then(P=>{le(P,e.resetOptions),d.state.next({isLoading:!1})}),_updateFormState:P=>{t={...t,...P}},_disableForm:oe,_subjects:d,_proxyFormState:u,_setErrors:A,get _fields(){return r},get _formValues(){return o},get _state(){return s},set _state(P){s=P},get _defaultValues(){return i},get _names(){return a},set _names(P){a=P},get _formState(){return t},set _formState(P){t=P},get _options(){return e},set _options(P){e={...e,...P}}},trigger:ne,register:ce,handleSubmit:Q,watch:ie,setValue:L,getValues:Z,reset:le,resetField:K,clearErrors:X,unregister:me,setError:ee,setFocus:(P,N={})=>{const z=de(r,P),se=z&&z._f;if(se){const te=se.refs?se.refs[0]:se.ref;te.focus&&(te.focus(),N.shouldSelect&&vi(te.select)&&te.select())}},getFieldState:G}}function LIe(n={}){const e=O.useRef(void 0),t=O.useRef(void 0),[r,i]=O.useState({isDirty:!1,isValidating:!1,isLoading:vi(n.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:n.errors||{},disabled:n.disabled||!1,defaultValues:vi(n.defaultValues)?void 0:n.defaultValues});e.current||(e.current={...WPe(n),formState:r});const o=e.current.control;return o._options=n,G_({subject:o._subjects.state,next:s=>{xL(s,o._proxyFormState,o._updateFormState,!0)&&i({...o._formState})}}),O.useEffect(()=>o._disableForm(n.disabled),[o,n.disabled]),O.useEffect(()=>{if(o._proxyFormState.isDirty){const s=o._getDirty();s!==r.isDirty&&o._subjects.state.next({isDirty:s})}},[o,r.isDirty]),O.useEffect(()=>{n.values&&!vo(n.values,t.current)?(o._reset(n.values,o._options.resetOptions),t.current=n.values,i(s=>({...s}))):o._resetDefaultValues()},[n.values,o]),O.useEffect(()=>{n.errors&&o._setErrors(n.errors)},[n.errors,o]),O.useEffect(()=>{o._state.mount||(o._updateValid(),o._state.mount=!0),o._state.watch&&(o._state.watch=!1,o._subjects.state.next({...o._formState})),o._removeUnmounted()}),O.useEffect(()=>{n.shouldUnregister&&o._subjects.values.next({values:o._getWatch()})},[n.shouldUnregister,o]),e.current.formState=SL(r,o),e.current}export{aIe as A,HEe as C,AIe as D,BIe as F,MIe as I,EIe as M,TIe as P,sIe as R,PIe as S,fL as T,OIe as U,Rs as a,iIe as b,lIe as c,xIe as d,IIe as e,oIe as f,z_ as g,DIe as h,nIe as i,rIe as j,U_ as k,NIe as l,LIe as m,kIe as n,uy as s,RIe as u};
